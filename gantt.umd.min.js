/*

Bryntum Gantt 2.1.0
Copyright(c) 2020 Bryntum AB
https://bryntum.com/contact
https://bryntum.com/license

*/

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("gantt",[],t):"object"==typeof exports?exports.gantt=t():(e.bryntum=e.bryntum||{},e.bryntum.gantt=t())}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=249)}([function(e,t,n){var r=n(149),o=n(88),i=n(212);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,n){"use strict";var r=n(92),o=n(109),i=n(122),a=n(93),u=n(159),c=a.set,s=a.getterFor("Array Iterator");e.exports=u(Array,"Array",(function(e,t){c(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=s(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(e,t,n){"use strict";var r=n(132).charAt,o=n(93),i=n(159),a=o.set,u=o.getterFor("String Iterator");i(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=u(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=r(n,o),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(40),o=n(186),i=n(1),a=n(97),u=n(42),c=u("iterator"),s=u("toStringTag"),l=i.values;for(var f in o){var d=r[f],p=d&&d.prototype;if(p){if(p[c]!==l)try{a(p,c,l)}catch(e){p[c]=l}if(p[s]||a(p,s,f),o[f])for(var h in i)if(p[h]!==i[h])try{a(p,h,i[h])}catch(e){p[h]=i[h]}}}},function(e,t,n){"use strict";var r=n(15),o=n(40),i=n(81),a=n(31),u=n(44),c=n(145),s=n(175),l=n(33),f=n(60),d=n(116),p=n(39),h=n(24),y=n(85),g=n(92),v=n(107),m=n(102),b=n(103),w=n(117),k=n(114),S=n(178),O=n(144),E=n(89),C=n(80),x=n(125),_=n(97),j=n(88),D=n(140),R=n(126),P=n(113),T=n(127),A=n(42),M=n(179),I=n(146),F=n(104),L=n(93),N=n(100).forEach,H=R("hidden"),B=A("toPrimitive"),z=L.set,V=L.getterFor("Symbol"),W=Object.prototype,$=o.Symbol,Y=i("JSON","stringify"),G=E.f,U=C.f,q=S.f,X=x.f,K=D("symbols"),Z=D("op-symbols"),J=D("string-to-symbol-registry"),Q=D("symbol-to-string-registry"),ee=D("wks"),te=o.QObject,ne=!te||!te.prototype||!te.prototype.findChild,re=u&&l((function(){return 7!=b(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=G(W,t);r&&delete W[t],U(e,t,n),r&&e!==W&&U(W,t,r)}:U,oe=function(e,t){var n=K[e]=b($.prototype);return z(n,{type:"Symbol",tag:e,description:t}),u||(n.description=t),n},ie=s?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof $},ae=function(e,t,n){e===W&&ae(Z,t,n),h(e);var r=v(t,!0);return h(n),f(K,r)?(n.enumerable?(f(e,H)&&e[H][r]&&(e[H][r]=!1),n=b(n,{enumerable:m(0,!1)})):(f(e,H)||U(e,H,m(1,{})),e[H][r]=!0),re(e,r,n)):U(e,r,n)},ue=function(e,t){h(e);var n=g(t),r=w(n).concat(fe(n));return N(r,(function(t){u&&!ce.call(n,t)||ae(e,t,n[t])})),e},ce=function(e){var t=v(e,!0),n=X.call(this,t);return!(this===W&&f(K,t)&&!f(Z,t))&&(!(n||!f(this,t)||!f(K,t)||f(this,H)&&this[H][t])||n)},se=function(e,t){var n=g(e),r=v(t,!0);if(n!==W||!f(K,r)||f(Z,r)){var o=G(n,r);return!o||!f(K,r)||f(n,H)&&n[H][r]||(o.enumerable=!0),o}},le=function(e){var t=q(g(e)),n=[];return N(t,(function(e){f(K,e)||f(P,e)||n.push(e)})),n},fe=function(e){var t=e===W,n=q(t?Z:g(e)),r=[];return N(n,(function(e){!f(K,e)||t&&!f(W,e)||r.push(K[e])})),r};(c||(j(($=function(){if(this instanceof $)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=T(e),n=function(e){this===W&&n.call(Z,e),f(this,H)&&f(this[H],t)&&(this[H][t]=!1),re(this,t,m(1,e))};return u&&ne&&re(W,t,{configurable:!0,set:n}),oe(t,e)}).prototype,"toString",(function(){return V(this).tag})),j($,"withoutSetter",(function(e){return oe(T(e),e)})),x.f=ce,C.f=ae,E.f=se,k.f=S.f=le,O.f=fe,M.f=function(e){return oe(A(e),e)},u&&(U($.prototype,"description",{configurable:!0,get:function(){return V(this).description}}),a||j(W,"propertyIsEnumerable",ce,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:$}),N(w(ee),(function(e){I(e)})),r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=String(e);if(f(J,t))return J[t];var n=$(t);return J[t]=n,Q[n]=t,n},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");if(f(Q,e))return Q[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(e,t){return void 0===t?b(e):ue(b(e),t)},defineProperty:ae,defineProperties:ue,getOwnPropertyDescriptor:se}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:le,getOwnPropertySymbols:fe}),r({target:"Object",stat:!0,forced:l((function(){O.f(1)}))},{getOwnPropertySymbols:function(e){return O.f(y(e))}}),Y)&&r({target:"JSON",stat:!0,forced:!c||l((function(){var e=$();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}))},{stringify:function(e,t,n){for(var r,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=t,(p(t)||void 0!==e)&&!ie(e))return d(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ie(t))return t}),o[1]=t,Y.apply(null,o)}});$.prototype[B]||_($.prototype,B,$.prototype.valueOf),F($,"Symbol"),P[H]=!0},function(e,t,n){"use strict";var r=n(15),o=n(44),i=n(40),a=n(60),u=n(39),c=n(80).f,s=n(172),l=i.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new l(e):void 0===e?l():l(e);return""===e&&(f[t]=!0),t};s(d,l);var p=d.prototype=l.prototype;p.constructor=d;var h=p.toString,y="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=u(this)?this.valueOf():this,t=h.call(e);if(a(f,e))return"";var n=y?t.slice(7,-1):t.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},function(e,t,n){n(146)("iterator")},function(e,t,n){var r=n(15),o=n(33),i=n(85),a=n(121),u=n(183);r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!u},{getPrototypeOf:function(e){return a(i(e))}})},function(e,t,n){var r=n(15),o=n(33),i=n(92),a=n(89).f,u=n(44),c=o((function(){a(1)}));r({target:"Object",stat:!0,forced:!u||c,sham:!u},{getOwnPropertyDescriptor:function(e,t){return a(i(e),t)}})},function(e,t,n){var r=n(15),o=n(39),i=n(24),a=n(60),u=n(89),c=n(121);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,s,l=arguments.length<3?t:arguments[2];return i(t)===l?t[n]:(r=u.f(t,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(l):o(s=c(t))?e(s,n,l):void 0}})},function(e,t,n){"use strict";var r=n(15),o=n(180);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(e,t,n){var r=n(40),o=n(186),i=n(180),a=n(97);for(var u in o){var c=r[u],s=c&&c.prototype;if(s&&s.forEach!==i)try{a(s,"forEach",i)}catch(e){s.forEach=i}}},function(e,t,n){"use strict";var r=n(15),o=n(33),i=n(116),a=n(39),u=n(85),c=n(82),s=n(119),l=n(129),f=n(118),d=n(42),p=n(147),h=d("isConcatSpreadable"),y=p>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),g=f("concat"),v=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:i(e)};r({target:"Array",proto:!0,forced:!y||!g},{concat:function(e){var t,n,r,o,i,a=u(this),f=l(a,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?a:arguments[t],v(i)){if(d+(o=c(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,d++)n in i&&s(f,d,i[n])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");s(f,d++,i)}return f.length=d,f}})},function(e,t,n){var r=n(15),o=n(181);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,t,n){"use strict";var r=n(88),o=n(24),i=n(33),a=n(156),u=RegExp.prototype,c=u.toString,s=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),l="toString"!=c.name;(s||l)&&r(RegExp.prototype,"toString",(function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in u)?a.call(e):n)}),{unsafe:!0})},function(e,t,n){var r=n(40),o=n(89).f,i=n(97),a=n(88),u=n(138),c=n(172),s=n(115);e.exports=function(e,t){var n,l,f,d,p,h=e.target,y=e.global,g=e.stat;if(n=y?r:g?r[h]||u(h,{}):(r[h]||{}).prototype)for(l in t){if(d=t[l],f=e.noTargetGet?(p=o(n,l))&&p.value:n[l],!s(y?l:h+(g?".":"#")+l,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;c(d,f)}(e.sham||f&&f.sham)&&i(d,"sham",!0),a(n,l,d,e)}}},function(e,t,n){var r=n(44),o=n(80).f,i=Function.prototype,a=i.toString,u=/^\s*function ([^ (]*)/;!r||"name"in i||o(i,"name",{configurable:!0,get:function(){try{return a.call(this).match(u)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(15),o=n(100).map,i=n(118),a=n(90),u=i("map"),c=a("map");r({target:"Array",proto:!0,forced:!u||!c},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r,o,i,a,u=n(15),c=n(31),s=n(40),l=n(81),f=n(214),d=n(88),p=n(123),h=n(104),y=n(157),g=n(39),v=n(41),m=n(111),b=n(96),w=n(139),k=n(38),S=n(160),O=n(94),E=n(196).set,C=n(215),x=n(216),_=n(217),j=n(198),D=n(218),R=n(93),P=n(115),T=n(42),A=n(147),M=T("species"),I="Promise",F=R.get,L=R.set,N=R.getterFor(I),H=f,B=s.TypeError,z=s.document,V=s.process,W=l("fetch"),$=j.f,Y=$,G="process"==b(V),U=!!(z&&z.createEvent&&s.dispatchEvent),q=P(I,(function(){if(!(w(H)!==String(H))){if(66===A)return!0;if(!G&&"function"!=typeof PromiseRejectionEvent)return!0}if(c&&!H.prototype.finally)return!0;if(A>=51&&/native code/.test(H))return!1;var e=H.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[M]=t,!(e.then((function(){}))instanceof t)})),X=q||!S((function(e){H.all(e).catch((function(){}))})),K=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;C((function(){for(var o=t.value,i=1==t.state,a=0;r.length>a;){var u,c,s,l=r[a++],f=i?l.ok:l.fail,d=l.resolve,p=l.reject,h=l.domain;try{f?(i||(2===t.rejection&&te(e,t),t.rejection=1),!0===f?u=o:(h&&h.enter(),u=f(o),h&&(h.exit(),s=!0)),u===l.promise?p(B("Promise-chain cycle")):(c=K(u))?c.call(u,d,p):d(u)):p(o)}catch(e){h&&!s&&h.exit(),p(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Q(e,t)}))}},J=function(e,t,n){var r,o;U?((r=z.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),s.dispatchEvent(r)):r={promise:t,reason:n},(o=s["on"+e])?o(r):"unhandledrejection"===e&&_("Unhandled promise rejection",n)},Q=function(e,t){E.call(s,(function(){var n,r=t.value;if(ee(t)&&(n=D((function(){G?V.emit("unhandledRejection",r,e):J("unhandledrejection",e,r)})),t.rejection=G||ee(t)?2:1,n.error))throw n.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){E.call(s,(function(){G?V.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)}))},ne=function(e,t,n,r){return function(o){e(t,n,o,r)}},re=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,Z(e,t,!0))},oe=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw B("Promise can't be resolved itself");var o=K(n);o?C((function(){var r={done:!1};try{o.call(n,ne(oe,e,r,t),ne(re,e,r,t))}catch(n){re(e,r,n,t)}})):(t.value=n,t.state=1,Z(e,t,!1))}catch(n){re(e,{done:!1},n,t)}}};q&&(H=function(e){m(this,H,I),v(e),r.call(this);var t=F(this);try{e(ne(oe,this,t),ne(re,this,t))}catch(e){re(this,t,e)}},(r=function(e){L(this,{type:I,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(H.prototype,{then:function(e,t){var n=N(this),r=$(O(this,H));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=G?V.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Z(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=F(e);this.promise=e,this.resolve=ne(oe,e,t),this.reject=ne(re,e,t)},j.f=$=function(e){return e===H||e===i?new o(e):Y(e)},c||"function"!=typeof f||(a=f.prototype.then,d(f.prototype,"then",(function(e,t){var n=this;return new H((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof W&&u({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return x(H,W.apply(s,arguments))}}))),u({global:!0,wrap:!0,forced:q},{Promise:H}),h(H,I,!1,!0),y(I),i=l(I),u({target:I,stat:!0,forced:q},{reject:function(e){var t=$(this);return t.reject.call(void 0,e),t.promise}}),u({target:I,stat:!0,forced:c||q},{resolve:function(e){return x(c&&this===i?H:this,e)}}),u({target:I,stat:!0,forced:X},{all:function(e){var t=this,n=$(t),r=n.resolve,o=n.reject,i=D((function(){var n=v(t.resolve),i=[],a=0,u=1;k(e,(function(e){var c=a++,s=!1;i.push(void 0),u++,n.call(t,e).then((function(e){s||(s=!0,i[c]=e,--u||r(i))}),o)})),--u||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=$(t),r=n.reject,o=D((function(){var o=v(t.resolve);k(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},function(e,t,n){"use strict";var r=n(15),o=n(39),i=n(116),a=n(128),u=n(82),c=n(92),s=n(119),l=n(42),f=n(118),d=n(90),p=f("slice"),h=d("slice",{ACCESSORS:!0,0:0,1:2}),y=l("species"),g=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!p||!h},{slice:function(e,t){var n,r,l,f=c(this),d=u(f.length),p=a(e,d),h=a(void 0===t?d:t,d);if(i(f)&&("function"!=typeof(n=f.constructor)||n!==Array&&!i(n.prototype)?o(n)&&null===(n=n[y])&&(n=void 0):n=void 0,n===Array||void 0===n))return g.call(f,p,h);for(r=new(void 0===n?Array:n)(v(h-p,0)),l=0;p<h;p++,l++)p in f&&s(r,l,f[p]);return r.length=l,r}})},function(e,t,n){var r=n(15),o=n(191);r({target:"Array",stat:!0,forced:!n(160)((function(e){Array.from(e)}))},{from:o})},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(e,t,n,r){var o=t&&t.prototype instanceof l?t:l,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=b(a,n);if(u){if(u===s)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===s)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var s={};function l(){}function f(){}function d(){}var p={};p[o]=function(){return this};var h=Object.getPrototypeOf,y=h&&h(h(O([])));y&&y!==t&&n.call(y,o)&&(p=y);var g=d.prototype=l.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function m(e){var t;this._invoke=function(r,o){function i(){return new Promise((function(t,i){!function t(r,o,i,a){var u=c(e[r],e,o);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,i,a)}),(function(e){t("throw",e,i,a)})):Promise.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return t("throw",e,i,a)}))}a(u.arg)}(r,o,t,i)}))}return t=t?t.then(i,i):i()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=g.constructor=d,d.constructor=f,d[a]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(m.prototype),m.prototype[i]=function(){return this},e.AsyncIterator=m,e.async=function(t,n,r,o){var i=new m(u(t,n,r,o));return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),g[a]="Generator",g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r=n(15),o=n(142).indexOf,i=n(108),a=n(90),u=[].indexOf,c=!!u&&1/[1].indexOf(1,-0)<0,s=i("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!s||!l},{indexOf:function(e){return c?u.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(15),o=n(100).filter,i=n(118),a=n(90),u=i("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!u||!c},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(39);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";var r=n(15),o=n(130);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t,n){"use strict";var r=n(15),o=n(142).includes,i=n(109);r({target:"Array",proto:!0,forced:!n(90)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(e,t,n){var r=n(15),o=n(24),i=n(39),a=n(60),u=n(33),c=n(80),s=n(89),l=n(121),f=n(102);r({target:"Reflect",stat:!0,forced:u((function(){var e=c.f({},"a",{configurable:!0});return!1!==Reflect.set(l(e),"a",1,e)}))},{set:function e(t,n,r){var u,d,p=arguments.length<4?t:arguments[3],h=s.f(o(t),n);if(!h){if(i(d=l(t)))return e(d,n,r,p);h=f(0)}if(a(h,"value")){if(!1===h.writable||!i(p))return!1;if(u=s.f(p,n)){if(u.get||u.set||!1===u.writable)return!1;u.value=r,c.f(p,n,u)}else c.f(p,n,f(0,r));return!0}return void 0!==h.set&&(h.set.call(p,r),!0)}})},function(e,t,n){"use strict";var r=n(15),o=n(152),i=n(84);r({target:"String",proto:!0,forced:!n(154)("includes")},{includes:function(e){return!!~String(i(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(15),o=n(219).left,i=n(108),a=n(90),u=i("reduce"),c=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!u||!c},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(15),o=n(112),i=n(92),a=n(108),u=[].join,c=o!=Object,s=a("join",",");r({target:"Array",proto:!0,forced:c||!s},{join:function(e){return u.call(i(this),void 0===e?",":e)}})},function(e,t){e.exports=!1},function(e,t,n){"use strict";var r=n(15),o=n(100).find,i=n(109),a=n(90),u=!0,c=a("find");"find"in[]&&Array(1).find((function(){u=!1})),r({target:"Array",proto:!0,forced:u||!c},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("find")},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(15),o=n(128),i=n(101),a=n(82),u=n(85),c=n(129),s=n(119),l=n(118),f=n(90),d=l("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,y=Math.min;r({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var n,r,l,f,d,p,g=u(this),v=a(g.length),m=o(e,v),b=arguments.length;if(0===b?n=r=0:1===b?(n=0,r=v-m):(n=b-2,r=y(h(i(t),0),v-m)),v+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=c(g,r),f=0;f<r;f++)(d=m+f)in g&&s(l,f,g[d]);if(l.length=r,n<r){for(f=m;f<v-r;f++)p=f+n,(d=f+r)in g?g[p]=g[d]:delete g[p];for(f=v;f>v-r+n;f--)delete g[f-1]}else if(n>r)for(f=v-r;f>m;f--)p=f+n-1,(d=f+r-1)in g?g[p]=g[d]:delete g[p];for(f=0;f<n;f++)g[f+m]=arguments[f+2];return g.length=v-r+n,l}})},function(e,t,n){"use strict";var r=n(15),o=n(100).some,i=n(108),a=n(90),u=i("some"),c=a("some");r({target:"Array",proto:!0,forced:!u||!c},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(15),o=n(85),i=n(117);r({target:"Object",stat:!0,forced:n(33)((function(){i(1)}))},{keys:function(e){return i(o(e))}})},function(e,t,n){var r=n(15),o=n(182),i=n(33),a=n(39),u=n(120).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:i((function(){c(1)})),sham:!o},{freeze:function(e){return c&&a(e)?c(u(e)):e}})},function(e,t,n){var r=n(24),o=n(193),i=n(82),a=n(78),u=n(134),c=n(192),s=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,l,f){var d,p,h,y,g,v,m,b=a(t,n,l?2:1);if(f)d=e;else{if("function"!=typeof(p=u(e)))throw TypeError("Target is not iterable");if(o(p)){for(h=0,y=i(e.length);y>h;h++)if((g=l?b(r(m=e[h])[0],m[1]):b(e[h]))&&g instanceof s)return g;return new s(!1)}d=p.call(e)}for(v=d.next;!(m=v.call(d)).done;)if("object"==typeof(g=c(d,b,m.value,l))&&g&&g instanceof s)return g;return new s(!1)}).stop=function(e){return new s(!0,e)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(168))},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(40),o=n(140),i=n(60),a=n(127),u=n(145),c=n(175),s=o("wks"),l=r.Symbol,f=c?l:l&&l.withoutSetter||a;e.exports=function(e){return i(s,e)||(u&&i(l,e)?s[e]=l[e]:s[e]=f("Symbol."+e)),s[e]}},function(e,t,n){"use strict";var r=n(131),o=n(24),i=n(85),a=n(82),u=n(101),c=n(84),s=n(158),l=n(133),f=Math.max,d=Math.min,p=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,m=g?"$":"$0";return[function(n,r){var o=c(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!g&&v||"string"==typeof r&&-1===r.indexOf(m)){var i=n(t,e,this,r);if(i.done)return i.value}var c=o(e),p=String(this),h="function"==typeof r;h||(r=String(r));var y=c.global;if(y){var w=c.unicode;c.lastIndex=0}for(var k=[];;){var S=l(c,p);if(null===S)break;if(k.push(S),!y)break;""===String(S[0])&&(c.lastIndex=s(p,a(c.lastIndex),w))}for(var O,E="",C=0,x=0;x<k.length;x++){S=k[x];for(var _=String(S[0]),j=f(d(u(S.index),p.length),0),D=[],R=1;R<S.length;R++)D.push(void 0===(O=S[R])?O:String(O));var P=S.groups;if(h){var T=[_].concat(D,j,p);void 0!==P&&T.push(P);var A=String(r.apply(void 0,T))}else A=b(_,p,j,D,P,r);j>=C&&(E+=p.slice(C,j)+A,C=j+_.length)}return E+p.slice(C)}];function b(e,n,r,o,a,u){var c=r+e.length,s=o.length,l=y;return void 0!==a&&(a=i(a),l=h),t.call(u,l,(function(t,i){var u;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":u=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return t;if(l>s){var f=p(l/10);return 0===f?t:f<=s?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):t}u=o[l-1]}return void 0===u?"":u}))}}))},function(e,t,n){var r=n(33);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){"use strict";var r=n(131),o=n(153),i=n(24),a=n(84),u=n(94),c=n(158),s=n(82),l=n(133),f=n(130),d=n(33),p=[].push,h=Math.min,y=!d((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(a(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!o(e))return t.call(r,e,i);for(var u,c,s,l=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,y=new RegExp(e.source,d+"g");(u=f.call(y,r))&&!((c=y.lastIndex)>h&&(l.push(r.slice(h,u.index)),u.length>1&&u.index<r.length&&p.apply(l,u.slice(1)),s=u[0].length,h=c,l.length>=i));)y.lastIndex===u.index&&y.lastIndex++;return h===r.length?!s&&y.test("")||l.push(""):l.push(r.slice(h)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=a(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var a=n(r,e,this,o,r!==t);if(a.done)return a.value;var f=i(e),d=String(this),p=u(f,RegExp),g=f.unicode,v=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(y?"y":"g"),m=new p(y?f:"^(?:"+f.source+")",v),b=void 0===o?4294967295:o>>>0;if(0===b)return[];if(0===d.length)return null===l(m,d)?[d]:[];for(var w=0,k=0,S=[];k<d.length;){m.lastIndex=y?k:0;var O,E=l(m,y?d:d.slice(k));if(null===E||(O=h(s(m.lastIndex+(y?0:k)),d.length))===w)k=c(d,k,g);else{if(S.push(d.slice(w,k)),S.length===b)return S;for(var C=1;C<=E.length-1;C++)if(S.push(E[C]),S.length===b)return S;k=w=O}}return S.push(d.slice(w)),S}]}),!y)},function(e,t,n){"use strict";var r=n(164),o=n(205);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(165);r({target:"Map",proto:!0,real:!0,forced:o},{deleteAll:function(){return i.apply(this,arguments)}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(78),u=n(99),c=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{every:function(e){var t=i(this),n=u(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return!c(n,(function(e,n){if(!r(n,e,t))return c.stop()}),void 0,!0,!0).stopped}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(78),s=n(94),l=n(99),f=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{filter:function(e){var t=a(this),n=l(t),r=c(e,arguments.length>1?arguments[1]:void 0,3),o=new(s(t,i("Map"))),d=u(o.set);return f(n,(function(e,n){r(n,e,t)&&d.call(o,e,n)}),void 0,!0,!0),o}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(78),u=n(99),c=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{find:function(e){var t=i(this),n=u(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(e,n){if(r(n,e,t))return c.stop(n)}),void 0,!0,!0).result}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(78),u=n(99),c=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{findKey:function(e){var t=i(this),n=u(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(e,n){if(r(n,e,t))return c.stop(e)}),void 0,!0,!0).result}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(99),u=n(230),c=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{includes:function(e){return c(a(i(this)),(function(t,n){if(u(n,e))return c.stop()}),void 0,!0,!0).stopped}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(99),u=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{keyOf:function(e){return u(a(i(this)),(function(t,n){if(n===e)return u.stop(t)}),void 0,!0,!0).result}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(78),s=n(94),l=n(99),f=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{mapKeys:function(e){var t=a(this),n=l(t),r=c(e,arguments.length>1?arguments[1]:void 0,3),o=new(s(t,i("Map"))),d=u(o.set);return f(n,(function(e,n){d.call(o,r(n,e,t),n)}),void 0,!0,!0),o}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(78),s=n(94),l=n(99),f=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{mapValues:function(e){var t=a(this),n=l(t),r=c(e,arguments.length>1?arguments[1]:void 0,3),o=new(s(t,i("Map"))),d=u(o.set);return f(n,(function(e,n){d.call(o,e,r(n,e,t))}),void 0,!0,!0),o}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(41),u=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{merge:function(e){for(var t=i(this),n=a(t.set),r=0;r<arguments.length;)u(arguments[r++],n,t,!0);return t}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(41),u=n(99),c=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{reduce:function(e){var t=i(this),n=u(t),r=arguments.length<2,o=r?void 0:arguments[1];if(a(e),c(n,(function(n,i){r?(r=!1,o=i):o=e(o,i,n,t)}),void 0,!0,!0),r)throw TypeError("Reduce of empty map with no initial value");return o}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(78),u=n(99),c=n(38);r({target:"Map",proto:!0,real:!0,forced:o},{some:function(e){var t=i(this),n=u(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(e,n){if(r(n,e,t))return c.stop()}),void 0,!0,!0).stopped}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(41);r({target:"Map",proto:!0,real:!0,forced:o},{update:function(e,t){var n=i(this),r=arguments.length;a(t);var o=n.has(e);if(!o&&r<3)throw TypeError("Updating absent value");var u=o?n.get(e):a(r>2?arguments[2]:void 0)(e,n);return n.set(e,t(u,e,n)),n}})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";var r=n(164),o=n(205);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(231);r({target:"Set",proto:!0,real:!0,forced:o},{addAll:function(){return i.apply(this,arguments)}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(165);r({target:"Set",proto:!0,real:!0,forced:o},{deleteAll:function(){return i.apply(this,arguments)}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(94),s=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{difference:function(e){var t=a(this),n=new(c(t,i("Set")))(t),r=u(n.delete);return s(e,(function(e){r.call(n,e)})),n}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(78),u=n(106),c=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{every:function(e){var t=i(this),n=u(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return!c(n,(function(e){if(!r(e,e,t))return c.stop()}),void 0,!1,!0).stopped}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(78),s=n(94),l=n(106),f=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{filter:function(e){var t=a(this),n=l(t),r=c(e,arguments.length>1?arguments[1]:void 0,3),o=new(s(t,i("Set"))),d=u(o.add);return f(n,(function(e){r(e,e,t)&&d.call(o,e)}),void 0,!1,!0),o}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(78),u=n(106),c=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{find:function(e){var t=i(this),n=u(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(e){if(r(e,e,t))return c.stop(e)}),void 0,!1,!0).result}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(94),s=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{intersection:function(e){var t=a(this),n=new(c(t,i("Set"))),r=u(t.has),o=u(n.add);return s(e,(function(e){r.call(t,e)&&o.call(n,e)})),n}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(41),u=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{isDisjointFrom:function(e){var t=i(this),n=a(t.has);return!u(e,(function(e){if(!0===n.call(t,e))return u.stop()})).stopped}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(136),s=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{isSubsetOf:function(e){var t=c(this),n=a(e),r=n.has;return"function"!=typeof r&&(n=new(i("Set"))(e),r=u(n.has)),!s(t,(function(e){if(!1===r.call(n,e))return s.stop()}),void 0,!1,!0).stopped}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(41),u=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{isSupersetOf:function(e){var t=i(this),n=a(t.has);return!u(e,(function(e){if(!1===n.call(t,e))return u.stop()})).stopped}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(106),u=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{join:function(e){var t=i(this),n=a(t),r=void 0===e?",":String(e),o=[];return u(n,o.push,o,!1,!0),o.join(r)}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(78),s=n(94),l=n(106),f=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{map:function(e){var t=a(this),n=l(t),r=c(e,arguments.length>1?arguments[1]:void 0,3),o=new(s(t,i("Set"))),d=u(o.add);return f(n,(function(e){d.call(o,r(e,e,t))}),void 0,!1,!0),o}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(41),u=n(106),c=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{reduce:function(e){var t=i(this),n=u(t),r=arguments.length<2,o=r?void 0:arguments[1];if(a(e),c(n,(function(n){r?(r=!1,o=n):o=e(o,n,n,t)}),void 0,!1,!0),r)throw TypeError("Reduce of empty set with no initial value");return o}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(24),a=n(78),u=n(106),c=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{some:function(e){var t=i(this),n=u(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(e){if(r(e,e,t))return c.stop()}),void 0,!1,!0).stopped}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(94),s=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{symmetricDifference:function(e){var t=a(this),n=new(c(t,i("Set")))(t),r=u(n.delete),o=u(n.add);return s(e,(function(e){r.call(n,e)||o.call(n,e)})),n}})},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(81),a=n(24),u=n(41),c=n(94),s=n(38);r({target:"Set",proto:!0,real:!0,forced:o},{union:function(e){var t=a(this),n=new(c(t,i("Set")))(t);return s(e,u(n.add),n),n}})},function(e,t,n){var r=n(41);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(15),o=n(194).values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},function(e,t,n){var r=n(44),o=n(169),i=n(24),a=n(107),u=Object.defineProperty;t.f=r?u:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(173),o=n(40),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t,n){var r=n(101),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(15),o=n(194).entries;r({target:"Object",stat:!0},{entries:function(e){return o(e)}})},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(84);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r,o=n(15),i=n(89).f,a=n(82),u=n(152),c=n(84),s=n(154),l=n(31),f="".startsWith,d=Math.min,p=s("startsWith");o({target:"String",proto:!0,forced:!!(l||p||(r=i(String.prototype,"startsWith"),!r||r.writable))&&!p},{startsWith:function(e){var t=String(c(this));u(e);var n=a(d(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return f?f.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";var r=n(15),o=n(100).findIndex,i=n(109),a=n(90),u=!0,c=a("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){u=!1})),r({target:"Array",proto:!0,forced:u||!c},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},function(e,t,n){var r=n(40),o=n(97),i=n(60),a=n(138),u=n(139),c=n(93),s=c.get,l=c.enforce,f=String(String).split("String");(e.exports=function(e,t,n,u){var c=!!u&&!!u.unsafe,s=!!u&&!!u.enumerable,d=!!u&&!!u.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),l(n).source=f.join("string"==typeof t?t:"")),e!==r?(c?!d&&e[t]&&(s=!0):delete e[t],s?e[t]=n:o(e,t,n)):s?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&s(this).source||u(this)}))},function(e,t,n){var r=n(44),o=n(125),i=n(102),a=n(92),u=n(107),c=n(60),s=n(169),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=u(t,!0),s)try{return l(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){var r=n(44),o=n(33),i=n(60),a=Object.defineProperty,u={},c=function(e){throw e};e.exports=function(e,t){if(i(u,e))return u[e];t||(t={});var n=[][e],s=!!i(t,"ACCESSORS")&&t.ACCESSORS,l=i(t,0)?t[0]:c,f=i(t,1)?t[1]:void 0;return u[e]=!!n&&!o((function(){if(s&&!r)return!0;var e={length:-1};s?a(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,l,f)}))}},function(e,t,n){"use strict";var r=n(15),o=n(199).trim;r({target:"String",proto:!0,forced:n(222)("trim")},{trim:function(){return o(this)}})},function(e,t,n){var r=n(112),o=n(84);e.exports=function(e){return r(o(e))}},function(e,t,n){var r,o,i,a=n(171),u=n(40),c=n(39),s=n(97),l=n(60),f=n(126),d=n(113),p=u.WeakMap;if(a){var h=new p,y=h.get,g=h.has,v=h.set;r=function(e,t){return v.call(h,e,t),t},o=function(e){return y.call(h,e)||{}},i=function(e){return g.call(h,e)}}else{var m=f("state");d[m]=!0,r=function(e,t){return s(e,m,t),t},o=function(e){return l(e,m)?e[m]:{}},i=function(e){return l(e,m)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(24),o=n(41),i=n(42)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},function(e,t,n){"use strict";var r=n(44),o=n(40),i=n(115),a=n(88),u=n(60),c=n(96),s=n(155),l=n(107),f=n(33),d=n(103),p=n(114).f,h=n(89).f,y=n(80).f,g=n(199).trim,v=o.Number,m=v.prototype,b="Number"==c(d(m)),w=function(e){var t,n,r,o,i,a,u,c,s=l(e,!1);if("string"==typeof s&&s.length>2)if(43===(t=(s=g(s)).charCodeAt(0))||45===t){if(88===(n=s.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+s}for(a=(i=s.slice(2)).length,u=0;u<a;u++)if((c=i.charCodeAt(u))<48||c>o)return NaN;return parseInt(i,r)}return+s};if(i("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,S=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof S&&(b?f((function(){m.valueOf.call(n)})):"Number"!=c(n))?s(new v(w(t)),n,S):w(t)},O=r?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;O.length>E;E++)u(v,k=O[E])&&!u(S,k)&&y(S,k,h(v,k));S.prototype=m,m.constructor=S,a(o,"Number",S)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(44),o=n(80),i=n(102);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var r=n(15),o=n(100).every,i=n(108),a=n(90),u=i("every"),c=a("every");r({target:"Array",proto:!0,forced:!u||!c},{every:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(31),o=n(136);e.exports=r?o:function(e){return Map.prototype.entries.call(e)}},function(e,t,n){var r=n(78),o=n(112),i=n(85),a=n(82),u=n(129),c=[].push,s=function(e){var t=1==e,n=2==e,s=3==e,l=4==e,f=6==e,d=5==e||f;return function(p,h,y,g){for(var v,m,b=i(p),w=o(b),k=r(h,y,3),S=a(w.length),O=0,E=g||u,C=t?E(p,S):n?E(p,0):void 0;S>O;O++)if((d||O in w)&&(m=k(v=w[O],O,b),e))if(t)C[O]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return O;case 2:c.call(C,v)}else if(l)return!1;return f?-1:s||l?l:C}};e.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r,o=n(24),i=n(176),a=n(143),u=n(113),c=n(177),s=n(137),l=n(126),f=l("IE_PROTO"),d=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=s("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};u[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=o(e),n=new d,d.prototype=null,n[f]=e):n=h(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(80).f,o=n(60),i=n(42)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r,o=n(15),i=n(89).f,a=n(82),u=n(152),c=n(84),s=n(154),l=n(31),f="".endsWith,d=Math.min,p=s("endsWith");o({target:"String",proto:!0,forced:!!(l||p||(r=i(String.prototype,"endsWith"),!r||r.writable))&&!p},{endsWith:function(e){var t=String(c(this));u(e);var n=arguments.length>1?arguments[1]:void 0,r=a(t.length),o=void 0===n?r:d(a(n),r),i=String(e);return f?f.call(t,i,o):t.slice(o-i.length,o)===i}})},function(e,t,n){var r=n(31),o=n(136);e.exports=r?o:function(e){return Set.prototype.values.call(e)}},function(e,t,n){var r=n(39);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var r=n(33);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){var r=n(42),o=n(103),i=n(80),a=r("unscopables"),u=Array.prototype;null==u[a]&&i.f(u,a,{configurable:!0,value:o(null)}),e.exports=function(e){u[a][e]=!0}},function(e,t,n){var r=n(44),o=n(40),i=n(115),a=n(155),u=n(80).f,c=n(114).f,s=n(153),l=n(156),f=n(188),d=n(88),p=n(33),h=n(93).set,y=n(157),g=n(42)("match"),v=o.RegExp,m=v.prototype,b=/a/g,w=/a/g,k=new v(b)!==b,S=f.UNSUPPORTED_Y;if(r&&i("RegExp",!k||S||p((function(){return w[g]=!1,v(b)!=b||v(w)==w||"/a/i"!=v(b,"i")})))){for(var O=function(e,t){var n,r=this instanceof O,o=s(e),i=void 0===t;if(!r&&o&&e.constructor===O&&i)return e;k?o&&!i&&(e=e.source):e instanceof O&&(i&&(t=l.call(e)),e=e.source),S&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var u=a(k?new v(e,t):v(e,t),r?this:m,O);return S&&n&&h(u,{sticky:n}),u},E=function(e){e in O||u(O,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},C=c(v),x=0;C.length>x;)E(C[x++]);m.constructor=O,O.prototype=m,d(o,"RegExp",O)}y("RegExp")},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var r=n(33),o=n(96),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t){e.exports={}},function(e,t,n){var r=n(174),o=n(143).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(33),o=/#|\.prototype\./,i=function(e,t){var n=u[a(e)];return n==s||n!=c&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=i.data={},c=i.NATIVE="N",s=i.POLYFILL="P";e.exports=i},function(e,t,n){var r=n(96);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(174),o=n(143);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(33),o=n(42),i=n(147),a=o("species");e.exports=function(e){return i>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){"use strict";var r=n(107),o=n(80),i=n(102);e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},function(e,t,n){var r=n(113),o=n(39),i=n(60),a=n(80).f,u=n(127),c=n(182),s=u("meta"),l=0,f=Object.isExtensible||function(){return!0},d=function(e){a(e,s,{value:{objectID:"O"+ ++l,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,s)){if(!f(e))return"F";if(!t)return"E";d(e)}return e[s].objectID},getWeakData:function(e,t){if(!i(e,s)){if(!f(e))return!0;if(!t)return!1;d(e)}return e[s].weakData},onFreeze:function(e){return c&&p.REQUIRED&&f(e)&&!i(e,s)&&d(e),e}};r[s]=!0},function(e,t,n){var r=n(60),o=n(85),i=n(126),a=n(183),u=i("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),r(e,u)?e[u]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t){e.exports={}},function(e,t,n){var r=n(88);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(131),o=n(24),i=n(82),a=n(84),u=n(158),c=n(133);r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=o(e),s=String(this);if(!a.global)return c(a,s);var l=a.unicode;a.lastIndex=0;for(var f,d=[],p=0;null!==(f=c(a,s));){var h=String(f[0]);d[p]=h,""===h&&(a.lastIndex=u(s,i(a.lastIndex),l)),p++}return 0===p?null:d}]}))},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(140),o=n(127),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var r=n(101),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},function(e,t,n){var r=n(39),o=n(116),i=n(42)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){"use strict";var r,o,i=n(156),a=n(188),u=RegExp.prototype.exec,c=String.prototype.replace,s=u,l=(r=/a/,o=/b*/g,u.call(r,"a"),u.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(l||d||f)&&(s=function(e){var t,n,r,o,a=this,s=f&&a.sticky,p=i.call(a),h=a.source,y=0,g=e;return s&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),g=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(h="(?: "+h+")",g=" "+g,y++),n=new RegExp("^(?:"+h+")",p)),d&&(n=new RegExp("^"+h+"$(?!\\s)",p)),l&&(t=a.lastIndex),r=u.call(s?n:a,g),s?r?(r.input=r.input.slice(y),r[0]=r[0].slice(y),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:l&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),d&&r&&r.length>1&&c.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=s},function(e,t,n){"use strict";n(25);var r=n(88),o=n(33),i=n(42),a=n(130),u=n(97),c=i("species"),s=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),f=i("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),p=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var h=i(e),y=!o((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),g=y&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!y||!g||"replace"===e&&(!s||!l||d)||"split"===e&&!p){var v=/./[h],m=n(h,""[e],(function(e,t,n,r,o){return t.exec===a?y&&!o?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),b=m[0],w=m[1];r(String.prototype,e,b),r(RegExp.prototype,h,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}f&&u(RegExp.prototype[h],"sham",!0)}},function(e,t,n){var r=n(101),o=n(84),i=function(e){return function(t,n){var i,a,u=String(o(t)),c=r(n),s=u.length;return c<0||c>=s?e?"":void 0:(i=u.charCodeAt(c))<55296||i>56319||c+1===s||(a=u.charCodeAt(c+1))<56320||a>57343?e?u.charAt(c):i:e?u.slice(c,c+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,n){var r=n(96),o=n(130);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){var r=n(150),o=n(122),i=n(42)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(15),o=n(220);r({target:"String",proto:!0,forced:n(221)("anchor")},{anchor:function(e){return o(this,"a","name",e)}})},function(e,t,n){var r=n(24),o=n(134);e.exports=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){var r=n(40),o=n(39),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(40),o=n(97);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(170),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(31),o=n(170);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(81),o=n(114),i=n(144),a=n(24);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(92),o=n(82),i=n(128),a=function(e){return function(t,n,a){var u,c=r(t),s=o(c.length),l=i(a,s);if(e&&n!=n){for(;s>l;)if((u=c[l++])!=u)return!0}else for(;s>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(33);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r=n(173),o=n(60),i=n(179),a=n(80).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},function(e,t,n){var r,o,i=n(40),a=n(148),u=i.process,c=u&&u.versions,s=c&&c.v8;s?o=(r=s.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),e.exports=o&&+o},function(e,t,n){var r=n(81);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r={};r[n(42)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(149),o=n(96),i=n(42)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r=n(15),o=n(44),i=n(24),a=n(107),u=n(80);r({target:"Reflect",stat:!0,forced:n(33)((function(){Reflect.defineProperty(u.f({},1,{value:1}),1,{value:2})})),sham:!o},{defineProperty:function(e,t,n){i(e);var r=a(t,!0);i(n);try{return u.f(e,r,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(153);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var r=n(39),o=n(96),i=n(42)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(42)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){var r=n(39),o=n(187);e.exports=function(e,t,n){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&o(e,a),e}},function(e,t,n){"use strict";var r=n(24);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(81),o=n(80),i=n(42),a=n(44),u=i("species");e.exports=function(e){var t=r(e),n=o.f;a&&t&&!t[u]&&n(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(132).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){"use strict";var r=n(15),o=n(189),i=n(121),a=n(187),u=n(104),c=n(97),s=n(88),l=n(42),f=n(31),d=n(122),p=n(190),h=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,g=l("iterator"),v=function(){return this};e.exports=function(e,t,n,l,p,m,b){o(n,t,l);var w,k,S,O=function(e){if(e===p&&j)return j;if(!y&&e in x)return x[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",C=!1,x=e.prototype,_=x[g]||x["@@iterator"]||p&&x[p],j=!y&&_||O(p),D="Array"==t&&x.entries||_;if(D&&(w=i(D.call(new e)),h!==Object.prototype&&w.next&&(f||i(w)===h||(a?a(w,h):"function"!=typeof w[g]&&c(w,g,v)),u(w,E,!0,!0),f&&(d[E]=v))),"values"==p&&_&&"values"!==_.name&&(C=!0,j=function(){return _.call(this)}),f&&!b||x[g]===j||c(x,g,j),d[t]=j,p)if(k={values:O("values"),keys:m?j:O("keys"),entries:O("entries")},b)for(S in k)!y&&!C&&S in x||s(x,S,k[S]);else r({target:t,proto:!0,forced:y||C},k);return k}},function(e,t,n){var r=n(42)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(131),o=n(24),i=n(84),a=n(223),u=n(133);r("search",1,(function(e,t,n){return[function(t){var n=i(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=o(e),c=String(this),s=i.lastIndex;a(s,0)||(i.lastIndex=0);var l=u(i,c);return a(i.lastIndex,s)||(i.lastIndex=s),null===l?-1:l.index}]}))},function(e,t,n){"use strict";var r=n(101),o=n(84);e.exports="".repeat||function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t,n){var r=n(15),o=n(81),i=n(41),a=n(24),u=n(39),c=n(103),s=n(228),l=n(33),f=o("Reflect","construct"),d=l((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),p=!l((function(){f((function(){}))})),h=d||p;r({target:"Reflect",stat:!0,forced:h,sham:h},{construct:function(e,t){i(e),a(t);var n=arguments.length<3?e:i(arguments[2]);if(p&&!d)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(s.apply(e,r))}var o=n.prototype,l=c(u(o)?o:Object.prototype),h=Function.apply.call(e,l,t);return u(h)?h:l}})},function(e,t,n){"use strict";var r=n(15),o=n(40),i=n(115),a=n(88),u=n(120),c=n(38),s=n(111),l=n(39),f=n(33),d=n(160),p=n(104),h=n(155);e.exports=function(e,t,n){var y=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),v=y?"set":"add",m=o[e],b=m&&m.prototype,w=m,k={},S=function(e){var t=b[e];a(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(i(e,"function"!=typeof m||!(g||b.forEach&&!f((function(){(new m).entries().next()})))))w=n.getConstructor(t,e,y,v),u.REQUIRED=!0;else if(i(e,!0)){var O=new w,E=O[v](g?{}:-0,1)!=O,C=f((function(){O.has(1)})),x=d((function(e){new m(e)})),_=!g&&f((function(){for(var e=new m,t=5;t--;)e[v](t,t);return!e.has(-0)}));x||((w=t((function(t,n){s(t,w,e);var r=h(new m,t,w);return null!=n&&c(n,r[v],r,y),r}))).prototype=b,b.constructor=w),(C||_)&&(S("delete"),S("has"),y&&S("get")),(_||E)&&S(v),g&&b.clear&&delete b.clear}return k[e]=w,r({global:!0,forced:w!=m},k),p(w,e),g||n.setStrong(w,e,y),w}},function(e,t,n){"use strict";var r=n(24),o=n(41);e.exports=function(){for(var e,t=r(this),n=o(t.delete),i=!0,a=0,u=arguments.length;a<u;a++)e=n.call(t,arguments[a]),i=i&&e;return!!i}},function(e,t,n){n(15)({target:"String",proto:!0},{repeat:n(162)})},function(e,t,n){n(146)("asyncIterator")},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(44),o=n(33),i=n(137);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(40),o=n(138),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,t,n){var r=n(40),o=n(139),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t,n){var r=n(60),o=n(141),i=n(89),a=n(80);e.exports=function(e,t){for(var n=o(t),u=a.f,c=i.f,s=0;s<n.length;s++){var l=n[s];r(e,l)||u(e,l,c(t,l))}}},function(e,t,n){var r=n(40);e.exports=r},function(e,t,n){var r=n(60),o=n(92),i=n(142).indexOf,a=n(113);e.exports=function(e,t){var n,u=o(e),c=0,s=[];for(n in u)!r(a,n)&&r(u,n)&&s.push(n);for(;t.length>c;)r(u,n=t[c++])&&(~i(s,n)||s.push(n));return s}},function(e,t,n){var r=n(145);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(44),o=n(80),i=n(24),a=n(117);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),u=r.length,c=0;u>c;)o.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(81);e.exports=r("document","documentElement")},function(e,t,n){var r=n(92),o=n(114).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(r(e))}},function(e,t,n){var r=n(42);t.f=r},function(e,t,n){"use strict";var r=n(100).forEach,o=n(108),i=n(90),a=o("forEach"),u=i("forEach");e.exports=a&&u?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){"use strict";var r=n(44),o=n(33),i=n(117),a=n(144),u=n(125),c=n(85),s=n(112),l=Object.assign,f=Object.defineProperty;e.exports=!l||o((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||"abcdefghijklmnopqrst"!=i(l({},t)).join("")}))?function(e,t){for(var n=c(e),o=arguments.length,l=1,f=a.f,d=u.f;o>l;)for(var p,h=s(arguments[l++]),y=f?i(h).concat(f(h)):i(h),g=y.length,v=0;g>v;)p=y[v++],r&&!d.call(h,p)||(n[p]=h[p]);return n}:l},function(e,t,n){var r=n(33);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){var r=n(33);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(15),o=n(33),i=n(39),a=Object.isFrozen;r({target:"Object",stat:!0,forced:o((function(){a(1)}))},{isFrozen:function(e){return!i(e)||!!a&&a(e)}})},function(e,t,n){var r=n(15),o=n(44),i=n(24),a=n(89);r({target:"Reflect",stat:!0,sham:!o},{getOwnPropertyDescriptor:function(e,t){return a.f(i(e),t)}})},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var r=n(24),o=n(213);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},function(e,t,n){"use strict";var r=n(33);function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var r=n(190).IteratorPrototype,o=n(103),i=n(102),a=n(104),u=n(122),c=function(){return this};e.exports=function(e,t,n){var s=t+" Iterator";return e.prototype=o(r,{next:i(1,n)}),a(e,s,!1,!0),u[s]=c,e}},function(e,t,n){"use strict";var r,o,i,a=n(121),u=n(97),c=n(60),s=n(42),l=n(31),f=s("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):d=!0),null==r&&(r={}),l||c(r,f)||u(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(e,t,n){"use strict";var r=n(78),o=n(85),i=n(192),a=n(193),u=n(82),c=n(119),s=n(134);e.exports=function(e){var t,n,l,f,d,p,h=o(e),y="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,m=void 0!==v,b=s(h),w=0;if(m&&(v=r(v,g>2?arguments[2]:void 0,2)),null==b||y==Array&&a(b))for(n=new y(t=u(h.length));t>w;w++)p=m?v(h[w],w):h[w],c(n,w,p);else for(d=(f=b.call(h)).next,n=new y;!(l=d.call(f)).done;w++)p=m?i(f,v,[l.value,w],!0):l.value,c(n,w,p);return n.length=w,n}},function(e,t,n){var r=n(24);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(42),o=n(122),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},function(e,t,n){var r=n(44),o=n(117),i=n(92),a=n(125).f,u=function(e){return function(t){for(var n,u=i(t),c=o(u),s=c.length,l=0,f=[];s>l;)n=c[l++],r&&!a.call(u,n)||f.push(e?[n,u[n]]:u[n]);return f}};e.exports={entries:u(!0),values:u(!1)}},function(e,t,n){var r=n(15),o=n(33),i=n(39),a=Object.isExtensible;r({target:"Object",stat:!0,forced:o((function(){a(1)}))},{isExtensible:function(e){return!!i(e)&&(!a||a(e))}})},function(e,t,n){var r,o,i,a=n(40),u=n(33),c=n(96),s=n(78),l=n(177),f=n(137),d=n(197),p=a.location,h=a.setImmediate,y=a.clearImmediate,g=a.process,v=a.MessageChannel,m=a.Dispatch,b=0,w={},k=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},S=function(e){return function(){k(e)}},O=function(e){k(e.data)},E=function(e){a.postMessage(e+"",p.protocol+"//"+p.host)};h&&y||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return w[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(b),b},y=function(e){delete w[e]},"process"==c(g)?r=function(e){g.nextTick(S(e))}:m&&m.now?r=function(e){m.now(S(e))}:v&&!d?(i=(o=new v).port2,o.port1.onmessage=O,r=s(i.postMessage,i,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||u(E)?r="onreadystatechange"in f("script")?function(e){l.appendChild(f("script")).onreadystatechange=function(){l.removeChild(this),k(e)}}:function(e){setTimeout(S(e),0)}:(r=E,a.addEventListener("message",O,!1))),e.exports={set:h,clear:y}},function(e,t,n){var r=n(148);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){"use strict";var r=n(41),o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},function(e,t,n){var r=n(84),o="["+n(200)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),u=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){n(15)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(82),o=n(162),i=n(84),a=Math.ceil,u=function(e){return function(t,n,u){var c,s,l=String(i(t)),f=l.length,d=void 0===u?" ":String(u),p=r(n);return p<=f||""==d?l:(c=p-f,(s=o.call(d,a(c/d.length))).length>c&&(s=s.slice(0,c)),e?l+s:s+l)}};e.exports={start:u(!1),end:u(!0)}},function(e,t,n){var r=n(148);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},function(e,t,n){"use strict";var r=n(15),o=n(202).start;r({target:"String",proto:!0,forced:n(203)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(80).f,o=n(103),i=n(123),a=n(78),u=n(111),c=n(38),s=n(159),l=n(157),f=n(44),d=n(120).fastKey,p=n(93),h=p.set,y=p.getterFor;e.exports={getConstructor:function(e,t,n,s){var l=e((function(e,r){u(e,l,t),h(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),f||(e.size=0),null!=r&&c(r,e[s],e,n)})),p=y(t),g=function(e,t,n){var r,o,i=p(e),a=v(e,t);return a?a.value=n:(i.last=a={index:o=d(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=a),r&&(r.next=a),f?i.size++:e.size++,"F"!==o&&(i.index[o]=a)),e},v=function(e,t){var n,r=p(e),o=d(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return i(l.prototype,{clear:function(){for(var e=p(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:this.size=0},delete:function(e){var t=p(this),n=v(this,e);if(n){var r=n.next,o=n.previous;delete t.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),t.first==n&&(t.first=r),t.last==n&&(t.last=o),f?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=p(this),r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!v(this,e)}}),i(l.prototype,n?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),f&&r(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",o=y(t),i=y(r);s(e,t,(function(e,t){h(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){"use strict";var r,o=n(40),i=n(123),a=n(120),u=n(164),c=n(232),s=n(39),l=n(93).enforce,f=n(171),d=!o.ActiveXObject&&"ActiveXObject"in o,p=Object.isExtensible,h=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},y=e.exports=u("WeakMap",h,c);if(f&&d){r=c.getConstructor(h,"WeakMap",!0),a.REQUIRED=!0;var g=y.prototype,v=g.delete,m=g.has,b=g.get,w=g.set;i(g,{delete:function(e){if(s(e)&&!p(e)){var t=l(this);return t.frozen||(t.frozen=new r),v.call(this,e)||t.frozen.delete(e)}return v.call(this,e)},has:function(e){if(s(e)&&!p(e)){var t=l(this);return t.frozen||(t.frozen=new r),m.call(this,e)||t.frozen.has(e)}return m.call(this,e)},get:function(e){if(s(e)&&!p(e)){var t=l(this);return t.frozen||(t.frozen=new r),m.call(this,e)?b.call(this,e):t.frozen.get(e)}return b.call(this,e)},set:function(e,t){if(s(e)&&!p(e)){var n=l(this);n.frozen||(n.frozen=new r),m.call(this,e)?w.call(this,e,t):n.frozen.set(e,t)}else w.call(this,e,t);return this}})}},function(e,t,n){"use strict";var r=n(15),o=n(31),i=n(165);r({target:"WeakMap",proto:!0,real:!0,forced:o},{deleteAll:function(){return i.apply(this,arguments)}})},function(e,t,n){n(15)({target:"Reflect",stat:!0},{ownKeys:n(141)})},function(e,t,n){var r=n(33),o=n(42),i=n(31),a=o("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(e,t,n){n(15)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,n){(function(r){var o,i;void 0===(i="function"==typeof(o=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var c=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],r=0,o=n.length;r<o;r++)if(n[r]===t)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var n=function(n){setTimeout((function(){return n.call(t,e)}))},r=this.listeners[e.type],o=0,i=r.length;o<i;o++)n(r[o]);return!e.defaultPrevented}}}]),t}(),s=function(t){function r(){var t;return e(this,r),(t=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?a(e):t}(this,o(r).call(this))).listeners||c.call(a(t)),Object.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,t),n(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),u(o(r.prototype),"dispatchEvent",this).call(this,e)}}]),r}(c),l=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new s,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();function f(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",s.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(f(e))if(e.fetch){var t=function(e){"function"==typeof e&&(e={fetch:e});var t=e,n=t.fetch,r=t.Request,o=void 0===r?n.Request:r,i=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,u=void 0!==a&&a;if(!f({fetch:n,Request:o,AbortController:i,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:u}))return{fetch:n,Request:c};var c=o;(c&&!c.prototype.hasOwnProperty("signal")||u)&&((c=function(e,t){var n;t&&t.signal&&(n=t.signal,delete t.signal);var r=new o(e,t);return n&&Object.defineProperty(r,"signal",{writable:!1,enumerable:!1,configurable:!0,value:n}),r}).prototype=o.prototype);var s=n;return{fetch:function(e,t){var n=c&&c.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(n){var r;try{r=new DOMException("Aborted","AbortError")}catch(e){(r=new Error("Aborted")).name="AbortError"}if(n.aborted)return Promise.reject(r);var o=new Promise((function(e,t){n.addEventListener("abort",(function(){return t(r)}),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([o,s(e,t)])}return s(e,t)},Request:c}}(e),n=t.fetch,r=t.Request;e.fetch=n,e.Request=r,Object.defineProperty(e,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:l}),Object.defineProperty(e,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:s})}else console.warn("fetch() is not available, cannot install abortcontroller-polyfill")}("undefined"!=typeof self?self:r)})?o.call(t,n,t,e):o)||(e.exports=i)}).call(this,n(168))},function(e,t,n){"use strict";var r=n(149),o=n(150);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,n){var r=n(39);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var r=n(40);e.exports=r.Promise},function(e,t,n){var r,o,i,a,u,c,s,l,f=n(40),d=n(89).f,p=n(96),h=n(196).set,y=n(197),g=f.MutationObserver||f.WebKitMutationObserver,v=f.process,m=f.Promise,b="process"==p(v),w=d(f,"queueMicrotask"),k=w&&w.value;k||(r=function(){var e,t;for(b&&(e=v.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},b?a=function(){v.nextTick(r)}:g&&!y?(u=!0,c=document.createTextNode(""),new g(r).observe(c,{characterData:!0}),a=function(){c.data=u=!u}):m&&m.resolve?(s=m.resolve(void 0),l=s.then,a=function(){l.call(s,r)}):a=function(){h.call(f,r)}),e.exports=k||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},function(e,t,n){var r=n(24),o=n(39),i=n(198);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(40);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){var r=n(41),o=n(85),i=n(112),a=n(82),u=function(e){return function(t,n,u,c){r(n);var s=o(t),l=i(s),f=a(s.length),d=e?f-1:0,p=e?-1:1;if(u<2)for(;;){if(d in l){c=l[d],d+=p;break}if(d+=p,e?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:f>d;d+=p)d in l&&(c=n(c,l[d],d,s));return c}};e.exports={left:u(!1),right:u(!0)}},function(e,t,n){var r=n(84),o=/"/g;e.exports=function(e,t,n,i){var a=String(r(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),u+">"+a+"</"+t+">"}},function(e,t,n){var r=n(33);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},function(e,t,n){var r=n(33),o=n(200);e.exports=function(e){return r((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(15),o=n(101),i=n(225),a=n(162),u=n(33),c=1..toFixed,s=Math.floor,l=function(e,t,n){return 0===t?n:t%2==1?l(e,t-1,n*e):l(e*e,t/2,n)};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!u((function(){c.call({})}))},{toFixed:function(e){var t,n,r,u,c=i(this),f=o(e),d=[0,0,0,0,0,0],p="",h="0",y=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*d[n],d[n]=r%1e7,r=s(r/1e7)},g=function(e){for(var t=6,n=0;--t>=0;)n+=d[t],d[t]=s(n/e),n=n%e*1e7},v=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==d[e]){var n=String(d[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*l(2,69,1))-69)<0?c*l(2,-t,1):c/l(2,t,1),n*=4503599627370496,(t=52-t)>0){for(y(0,n),r=f;r>=7;)y(1e7,0),r-=7;for(y(l(10,r,1),0),r=t-1;r>=23;)g(1<<23),r-=23;g(1<<r),y(1,1),g(2),h=v()}else y(0,n),y(1<<-t,0),h=v()+a.call("0",f);return h=f>0?p+((u=h.length)<=f?"0."+a.call("0",f-u)+h:h.slice(0,u-f)+"."+h.slice(u-f)):p+h}})},function(e,t,n){var r=n(96);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){n(15)({target:"Math",stat:!0},{sign:n(227)})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){"use strict";var r=n(41),o=n(39),i=[].slice,a={},u=function(e,t,n){if(!(t in a)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";a[t]=Function("C,a","return new C("+r.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),a=function(){var r=n.concat(i.call(arguments));return this instanceof a?u(t,r.length,r):t.apply(e,r)};return o(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t,n){"use strict";var r=n(15),o=n(202).end;r({target:"String",proto:!0,forced:n(203)},{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(24),o=n(41);e.exports=function(){for(var e=r(this),t=o(e.add),n=0,i=arguments.length;n<i;n++)t.call(e,arguments[n]);return e}},function(e,t,n){"use strict";var r=n(123),o=n(120).getWeakData,i=n(24),a=n(39),u=n(111),c=n(38),s=n(100),l=n(60),f=n(93),d=f.set,p=f.getterFor,h=s.find,y=s.findIndex,g=0,v=function(e){return e.frozen||(e.frozen=new m)},m=function(){this.entries=[]},b=function(e,t){return h(e.entries,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var n=b(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=y(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,s){var f=e((function(e,r){u(e,f,t),d(e,{type:t,id:g++,frozen:void 0}),null!=r&&c(r,e[s],e,n)})),h=p(t),y=function(e,t,n){var r=h(e),a=o(i(t),!0);return!0===a?v(r).set(t,n):a[r.id]=n,e};return r(f.prototype,{delete:function(e){var t=h(this);if(!a(e))return!1;var n=o(e);return!0===n?v(t).delete(e):n&&l(n,t.id)&&delete n[t.id]},has:function(e){var t=h(this);if(!a(e))return!1;var n=o(e);return!0===n?v(t).has(e):n&&l(n,t.id)}}),r(f.prototype,n?{get:function(e){var t=h(this);if(a(e)){var n=o(e);return!0===n?v(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return y(this,e,t)}}:{add:function(e){return y(this,e,!0)}}),f}}},function(e,t,n){"use strict";n(15)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(e,t,n){var r=n(15),o=n(33),i=n(178).f;r({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})},function(e,t,n){"use strict";n(2);var r,o=n(15),i=n(44),a=n(209),u=n(40),c=n(176),s=n(88),l=n(111),f=n(60),d=n(181),p=n(191),h=n(132).codeAt,y=n(236),g=n(104),v=n(237),m=n(93),b=u.URL,w=v.URLSearchParams,k=v.getState,S=m.set,O=m.getterFor("URL"),E=Math.floor,C=Math.pow,x=/[A-Za-z]/,_=/[\d+\-.A-Za-z]/,j=/\d/,D=/^(0x|0X)/,R=/^[0-7]+$/,P=/^\d+$/,T=/^[\dA-Fa-f]+$/,A=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,M=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,I=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\u0009\u000A\u000D]/g,L=function(e,t){var n,r,o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=H(t.slice(1,-1))))return"Invalid host";e.host=n}else if(U(e)){if(t=y(t),A.test(t))return"Invalid host";if(null===(n=N(t)))return"Invalid host";e.host=n}else{if(M.test(t))return"Invalid host";for(n="",r=p(t),o=0;o<r.length;o++)n+=Y(r[o],z);e.host=n}},N=function(e){var t,n,r,o,i,a,u,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(o=c[r]))return e;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=D.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?P:8==i?R:T).test(o))return e;a=parseInt(o,i)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=C(256,5-t))return null}else if(a>255)return null;for(u=n.pop(),r=0;r<n.length;r++)u+=n[r]*C(256,3-r);return u},H=function(e){var t,n,r,o,i,a,u,c=[0,0,0,0,0,0,0,0],s=0,l=null,f=0,d=function(){return e.charAt(f)};if(":"==d()){if(":"!=e.charAt(1))return;f+=2,l=++s}for(;d();){if(8==s)return;if(":"!=d()){for(t=n=0;n<4&&T.test(d());)t=16*t+parseInt(d(),16),f++,n++;if("."==d()){if(0==n)return;if(f-=n,s>6)return;for(r=0;d();){if(o=null,r>0){if(!("."==d()&&r<4))return;f++}if(!j.test(d()))return;for(;j.test(d());){if(i=parseInt(d(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;f++}c[s]=256*c[s]+o,2!=++r&&4!=r||s++}if(4!=r)return;break}if(":"==d()){if(f++,!d())return}else if(d())return;c[s++]=t}else{if(null!==l)return;f++,l=++s}}if(null!==l)for(a=s-l,s=7;0!=s&&a>0;)u=c[s],c[s--]=c[l+a-1],c[l+--a]=u;else if(8!=s)return;return c},B=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=E(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},z={},V=d({},z,{" ":1,'"':1,"<":1,">":1,"`":1}),W=d({},V,{"#":1,"?":1,"{":1,"}":1}),$=d({},W,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Y=function(e,t){var n=h(e,0);return n>32&&n<127&&!f(t,e)?e:encodeURIComponent(e)},G={ftp:21,file:null,http:80,https:443,ws:80,wss:443},U=function(e){return f(G,e.scheme)},q=function(e){return""!=e.username||""!=e.password},X=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},K=function(e,t){var n;return 2==e.length&&x.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Z=function(e){var t;return e.length>1&&K(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},J=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&K(t[0],!0)||t.pop()},Q=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ne={},re={},oe={},ie={},ae={},ue={},ce={},se={},le={},fe={},de={},pe={},he={},ye={},ge={},ve={},me={},be={},we={},ke=function(e,t,n,o){var i,a,u,c,s,l=n||ee,d=0,h="",y=!1,g=!1,v=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(I,"")),t=t.replace(F,""),i=p(t);d<=i.length;){switch(a=i[d],l){case ee:if(!a||!x.test(a)){if(n)return"Invalid scheme";l=ne;continue}h+=a.toLowerCase(),l=te;break;case te:if(a&&(_.test(a)||"+"==a||"-"==a||"."==a))h+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";h="",l=ne,d=0;continue}if(n&&(U(e)!=f(G,h)||"file"==h&&(q(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=h,n)return void(U(e)&&G[e.scheme]==e.port&&(e.port=null));h="","file"==e.scheme?l=pe:U(e)&&o&&o.scheme==e.scheme?l=re:U(e)?l=ue:"/"==i[d+1]?(l=oe,d++):(e.cannotBeABaseURL=!0,e.path.push(""),l=me)}break;case ne:if(!o||o.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(o.cannotBeABaseURL&&"#"==a){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment="",e.cannotBeABaseURL=!0,l=we;break}l="file"==o.scheme?pe:ie;continue;case re:if("/"!=a||"/"!=i[d+1]){l=ie;continue}l=ce,d++;break;case oe:if("/"==a){l=se;break}l=ve;continue;case ie:if(e.scheme=o.scheme,a==r)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if("/"==a||"\\"==a&&U(e))l=ae;else if("?"==a)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query="",l=be;else{if("#"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),l=ve;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment="",l=we}break;case ae:if(!U(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,l=ve;continue}l=se}else l=ce;break;case ue:if(l=ce,"/"!=a||"/"!=h.charAt(d+1))continue;d++;break;case ce:if("/"!=a&&"\\"!=a){l=se;continue}break;case se:if("@"==a){y&&(h="%40"+h),y=!0,u=p(h);for(var m=0;m<u.length;m++){var b=u[m];if(":"!=b||v){var w=Y(b,$);v?e.password+=w:e.username+=w}else v=!0}h=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&U(e)){if(y&&""==h)return"Invalid authority";d-=p(h).length+1,h="",l=le}else h+=a;break;case le:case fe:if(n&&"file"==e.scheme){l=ye;continue}if(":"!=a||g){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&U(e)){if(U(e)&&""==h)return"Invalid host";if(n&&""==h&&(q(e)||null!==e.port))return;if(c=L(e,h))return c;if(h="",l=ge,n)return;continue}"["==a?g=!0:"]"==a&&(g=!1),h+=a}else{if(""==h)return"Invalid host";if(c=L(e,h))return c;if(h="",l=de,n==fe)return}break;case de:if(!j.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&U(e)||n){if(""!=h){var k=parseInt(h,10);if(k>65535)return"Invalid port";e.port=U(e)&&k===G[e.scheme]?null:k,h=""}if(n)return;l=ge;continue}return"Invalid port"}h+=a;break;case pe:if(e.scheme="file","/"==a||"\\"==a)l=he;else{if(!o||"file"!=o.scheme){l=ve;continue}if(a==r)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if("?"==a)e.host=o.host,e.path=o.path.slice(),e.query="",l=be;else{if("#"!=a){Z(i.slice(d).join(""))||(e.host=o.host,e.path=o.path.slice(),J(e)),l=ve;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment="",l=we}}break;case he:if("/"==a||"\\"==a){l=ye;break}o&&"file"==o.scheme&&!Z(i.slice(d).join(""))&&(K(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),l=ve;continue;case ye:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&K(h))l=ve;else if(""==h){if(e.host="",n)return;l=ge}else{if(c=L(e,h))return c;if("localhost"==e.host&&(e.host=""),n)return;h="",l=ge}continue}h+=a;break;case ge:if(U(e)){if(l=ve,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=ve,"/"!=a))continue}else e.fragment="",l=we;else e.query="",l=be;break;case ve:if(a==r||"/"==a||"\\"==a&&U(e)||!n&&("?"==a||"#"==a)){if(".."===(s=(s=h).toLowerCase())||"%2e."===s||".%2e"===s||"%2e%2e"===s?(J(e),"/"==a||"\\"==a&&U(e)||e.path.push("")):Q(h)?"/"==a||"\\"==a&&U(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&K(h)&&(e.host&&(e.host=""),h=h.charAt(0)+":"),e.path.push(h)),h="","file"==e.scheme&&(a==r||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",l=be):"#"==a&&(e.fragment="",l=we)}else h+=Y(a,W);break;case me:"?"==a?(e.query="",l=be):"#"==a?(e.fragment="",l=we):a!=r&&(e.path[0]+=Y(a,z));break;case be:n||"#"!=a?a!=r&&("'"==a&&U(e)?e.query+="%27":e.query+="#"==a?"%23":Y(a,z)):(e.fragment="",l=we);break;case we:a!=r&&(e.fragment+=Y(a,V))}d++}},Se=function(e){var t,n,r=l(this,Se,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(e),u=S(r,{type:"URL"});if(void 0!==o)if(o instanceof Se)t=O(o);else if(n=ke(t={},String(o)))throw TypeError(n);if(n=ke(u,a,null,t))throw TypeError(n);var c=u.searchParams=new w,s=k(c);s.updateSearchParams(u.query),s.updateURL=function(){u.query=String(c)||null},i||(r.href=Ee.call(r),r.origin=Ce.call(r),r.protocol=xe.call(r),r.username=_e.call(r),r.password=je.call(r),r.host=De.call(r),r.hostname=Re.call(r),r.port=Pe.call(r),r.pathname=Te.call(r),r.search=Ae.call(r),r.searchParams=Me.call(r),r.hash=Ie.call(r))},Oe=Se.prototype,Ee=function(){var e=O(this),t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,a=e.path,u=e.query,c=e.fragment,s=t+":";return null!==o?(s+="//",q(e)&&(s+=n+(r?":"+r:"")+"@"),s+=B(o),null!==i&&(s+=":"+i)):"file"==t&&(s+="//"),s+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==u&&(s+="?"+u),null!==c&&(s+="#"+c),s},Ce=function(){var e=O(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&U(e)?t+"://"+B(e.host)+(null!==n?":"+n:""):"null"},xe=function(){return O(this).scheme+":"},_e=function(){return O(this).username},je=function(){return O(this).password},De=function(){var e=O(this),t=e.host,n=e.port;return null===t?"":null===n?B(t):B(t)+":"+n},Re=function(){var e=O(this).host;return null===e?"":B(e)},Pe=function(){var e=O(this).port;return null===e?"":String(e)},Te=function(){var e=O(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ae=function(){var e=O(this).query;return e?"?"+e:""},Me=function(){return O(this).searchParams},Ie=function(){var e=O(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(i&&c(Oe,{href:Fe(Ee,(function(e){var t=O(this),n=String(e),r=ke(t,n);if(r)throw TypeError(r);k(t.searchParams).updateSearchParams(t.query)})),origin:Fe(Ce),protocol:Fe(xe,(function(e){var t=O(this);ke(t,String(e)+":",ee)})),username:Fe(_e,(function(e){var t=O(this),n=p(String(e));if(!X(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Y(n[r],$)}})),password:Fe(je,(function(e){var t=O(this),n=p(String(e));if(!X(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Y(n[r],$)}})),host:Fe(De,(function(e){var t=O(this);t.cannotBeABaseURL||ke(t,String(e),le)})),hostname:Fe(Re,(function(e){var t=O(this);t.cannotBeABaseURL||ke(t,String(e),fe)})),port:Fe(Pe,(function(e){var t=O(this);X(t)||(""==(e=String(e))?t.port=null:ke(t,e,de))})),pathname:Fe(Te,(function(e){var t=O(this);t.cannotBeABaseURL||(t.path=[],ke(t,e+"",ge))})),search:Fe(Ae,(function(e){var t=O(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",ke(t,e,be)),k(t.searchParams).updateSearchParams(t.query)})),searchParams:Fe(Me),hash:Fe(Ie,(function(e){var t=O(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",ke(t,e,we)):t.fragment=null}))}),s(Oe,"toJSON",(function(){return Ee.call(this)}),{enumerable:!0}),s(Oe,"toString",(function(){return Ee.call(this)}),{enumerable:!0}),b){var Le=b.createObjectURL,Ne=b.revokeObjectURL;Le&&s(Se,"createObjectURL",(function(e){return Le.apply(b,arguments)})),Ne&&s(Se,"revokeObjectURL",(function(e){return Ne.apply(b,arguments)}))}g(Se,"URL"),o({global:!0,forced:!a,sham:!i},{URL:Se})},function(e,t,n){"use strict";var r=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",a=Math.floor,u=String.fromCharCode,c=function(e){return e+22+75*(e<26)},s=function(e,t,n){var r=0;for(e=n?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},l=function(e){var t,n,r=[],o=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t}(e)).length,l=128,f=0,d=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(u(n));var p=r.length,h=p;for(p&&r.push("-");h<o;){var y=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=l&&n<y&&(y=n);var g=h+1;if(y-l>a((2147483647-f)/g))throw RangeError(i);for(f+=(y-l)*g,l=y,t=0;t<e.length;t++){if((n=e[t])<l&&++f>2147483647)throw RangeError(i);if(n==l){for(var v=f,m=36;;m+=36){var b=m<=d?1:m>=d+26?26:m-d;if(v<b)break;var w=v-b,k=36-b;r.push(u(c(b+w%k))),v=a(w/k)}r.push(u(c(v))),d=s(f,g,h==p),f=0,++h}}++f,++l}return r.join("")};e.exports=function(e){var t,n,i=[],a=e.toLowerCase().replace(o,".").split(".");for(t=0;t<a.length;t++)n=a[t],i.push(r.test(n)?"xn--"+l(n):n);return i.join(".")}},function(e,t,n){"use strict";n(1);var r=n(15),o=n(81),i=n(209),a=n(88),u=n(123),c=n(104),s=n(189),l=n(93),f=n(111),d=n(60),p=n(78),h=n(150),y=n(24),g=n(39),v=n(103),m=n(102),b=n(136),w=n(134),k=n(42),S=o("fetch"),O=o("Headers"),E=k("iterator"),C=l.set,x=l.getterFor("URLSearchParams"),_=l.getterFor("URLSearchParamsIterator"),j=/\+/g,D=Array(4),R=function(e){return D[e-1]||(D[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},P=function(e){try{return decodeURIComponent(e)}catch(t){return e}},T=function(e){var t=e.replace(j," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(R(n--),P);return t}},A=/[!'()~]|%20/g,M={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},I=function(e){return M[e]},F=function(e){return encodeURIComponent(e).replace(A,I)},L=function(e,t){if(t)for(var n,r,o=t.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),e.push({key:T(r.shift()),value:T(r.join("="))}))},N=function(e){this.entries.length=0,L(this.entries,e)},H=function(e,t){if(e<t)throw TypeError("Not enough arguments")},B=s((function(e,t){C(this,{type:"URLSearchParamsIterator",iterator:b(x(e).entries),kind:t})}),"Iterator",(function(){var e=_(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),z=function(){f(this,z,"URLSearchParams");var e,t,n,r,o,i,a,u,c,s=arguments.length>0?arguments[0]:void 0,l=this,p=[];if(C(l,{type:"URLSearchParams",entries:p,updateURL:function(){},updateSearchParams:N}),void 0!==s)if(g(s))if("function"==typeof(e=w(s)))for(n=(t=e.call(s)).next;!(r=n.call(t)).done;){if((a=(i=(o=b(y(r.value))).next).call(o)).done||(u=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:u.value+""})}else for(c in s)d(s,c)&&p.push({key:c,value:s[c]+""});else L(p,"string"==typeof s?"?"===s.charAt(0)?s.slice(1):s:s+"")},V=z.prototype;u(V,{append:function(e,t){H(arguments.length,2);var n=x(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){H(arguments.length,1);for(var t=x(this),n=t.entries,r=e+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;t.updateURL()},get:function(e){H(arguments.length,1);for(var t=x(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){H(arguments.length,1);for(var t=x(this).entries,n=e+"",r=[],o=0;o<t.length;o++)t[o].key===n&&r.push(t[o].value);return r},has:function(e){H(arguments.length,1);for(var t=x(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){H(arguments.length,1);for(var n,r=x(this),o=r.entries,i=!1,a=e+"",u=t+"",c=0;c<o.length;c++)(n=o[c]).key===a&&(i?o.splice(c--,1):(i=!0,n.value=u));i||o.push({key:a,value:u}),r.updateURL()},sort:function(){var e,t,n,r=x(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===n&&o.push(e)}r.updateURL()},forEach:function(e){for(var t,n=x(this).entries,r=p(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new B(this,"keys")},values:function(){return new B(this,"values")},entries:function(){return new B(this,"entries")}},{enumerable:!0}),a(V,E,V.entries),a(V,"toString",(function(){for(var e,t=x(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(F(e.key)+"="+F(e.value));return n.join("&")}),{enumerable:!0}),c(z,"URLSearchParams"),r({global:!0,forced:!i},{URLSearchParams:z}),i||"function"!=typeof S||"function"!=typeof O||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,o=[e];return arguments.length>1&&(t=arguments[1],g(t)&&(n=t.body,"URLSearchParams"===h(n)&&((r=t.headers?new O(t.headers):new O).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=v(t,{body:m(0,String(n)),headers:m(0,r)}))),o.push(t)),S.apply(this,o)}}),e.exports={URLSearchParams:z,getState:x}},function(e,t,n){var r=n(15),o=n(33),i=n(39),a=Object.isSealed;r({target:"Object",stat:!0,forced:o((function(){a(1)}))},{isSealed:function(e){return!i(e)||!!a&&a(e)}})},function(e,t,n){n(15)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){"use strict";var r=n(15),o=n(44),i=n(241),a=n(85),u=n(41),c=n(80);o&&r({target:"Object",proto:!0,forced:i},{__defineGetter__:function(e,t){c.f(a(this),e,{get:u(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(31),o=n(40),i=n(33);e.exports=r||!i((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete o[e]}))},function(e,t,n){var r=n(15),o=n(44),i=n(141),a=n(92),u=n(89),c=n(119);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),o=u.f,s=i(r),l={},f=0;s.length>f;)void 0!==(n=o(r,t=s[f++]))&&c(l,t,n);return l}})},function(e,t,n){var r=n(15),o=n(244),i=n(109);r({target:"Array",proto:!0},{fill:o}),i("fill")},function(e,t,n){"use strict";var r=n(85),o=n(128),i=n(82);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,u=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,s=void 0===c?n:o(c,n);s>u;)t[u++]=e;return t}},function(e,t,n){"use strict";var r=n(15),o=n(132).charAt;r({target:"String",proto:!0},{at:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(15),o=n(247),i=n(85),a=n(82),u=n(101),c=n(129);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=a(t.length),r=c(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:u(e)),r}})},function(e,t,n){"use strict";var r=n(116),o=n(82),i=n(78),a=function(e,t,n,u,c,s,l,f){for(var d,p=c,h=0,y=!!l&&i(l,f,3);h<u;){if(h in n){if(d=y?y(n[h],h,t):n[h],s>0&&r(d))p=a(e,t,d,o(d.length),p,s-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[p]=d}p++}h++}return p};e.exports=a},function(e,t,n){n(109)("flat")},function(e,t,n){"use strict";n.r(t);var r="URLSearchParams"in self,o="Symbol"in self&&"iterator"in Symbol,i="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in self,u="ArrayBuffer"in self;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function y(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=y(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=h(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=y(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=l(e),t=f(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[l(e)]},p.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},p.prototype.set=function(e,t){this.map[l(e)]=f(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){var n,r,o=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),b.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function k(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function S(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},m.call(w.prototype),m.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];S.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})};var E=self.DOMException;try{new E}catch(e){(E=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),E.prototype.constructor=E}function C(e,t){return new Promise((function(n,r){var o=new w(e,t);if(o.signal&&o.signal.aborted)return r(new E("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new S(o,r))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.onabort=function(){r(new E("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}C.polyfill=!0,self.fetch||(self.fetch=C,self.Headers=p,self.Request=w,self.Response=S);n(211),n(4),n(5),n(10),n(26),n(17),n(19),n(34),n(16),n(13),n(37),n(7),n(184),n(36),n(0),n(151),n(185),n(28),n(86),n(11),n(30),n(110),n(25),n(14),n(43);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=/([a-z])([A-Z])/g,j=/[.*+?^${}()|[\]\\]/g,D=/(^[^a-z]+|[^\w]+)/gi,R=function(e,t,n){return t+"-"+n.toLowerCase()},P=function(e){return e?"_x".concat(e.charCodeAt(0).toString(16)):"__blank__"},T={},A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"capitalizeFirstLetter",value:function(e){return e?e[0].toUpperCase()+e.substr(1):null}},{key:"lowercaseFirstLetter",value:function(e){return e?e[0].toLowerCase()+e.substr(1):null}},{key:"hyphenate",value:function(e){var t=T[e];return t||(T[e]=e.replace(_,R))}},{key:"safeJsonParse",value:function(e){var t=null;try{t=JSON.parse(e)}catch(e){console.error(e)}return t}},{key:"safeJsonStringify",value:function(e){var t=null;try{t=JSON.stringify(e)}catch(e){console.error(e)}return t}},{key:"createId",value:function(e){return String(e).replace(D,P)}},{key:"escapeRegExp",value:function(e){return e.replace(j,"\\$&")}},{key:"joinPaths",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return e.join(t).replace(new RegExp("\\"+t+"+","g"),t)}}],(n=null)&&x(t.prototype,n),r&&x(t,r),e}();A._$name="StringHelper";n(12),n(105);function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=!1;try{I=Boolean(window!==window.parent&&window.parent.Siesta)}catch(e){}var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"setVersion",value:function(e,t){this[e=e.toLowerCase()]={version:t,isNewerThan:function(e){return e<t},isOlderThan:function(e){return e>t}};var n="".concat("gantt",".").concat(e).concat(t.replace(/\./g,"-"));if(!0===window.bryntum[n]){if(!I)throw new Error("Bundle included twice, check cache-busters and file types (.js)");window.BUNDLE_EXCEPTION=!0}else window.bryntum[n]=!0}},{key:"getVersion",value:function(e){if(!this[e=e.toLowerCase()])throw new Error("No version specified");return this[e].version}},{key:"checkVersion",value:function(e,t,n,r){var o,i=this.getVersion(e);switch(n){case"<":o=i<t;break;case"<=":o=i<=t;break;case"=":o=i===t;break;case">=":o=i>=t;break;case">":o=i>t}return o}},{key:"deprecate",value:function(e,t,n){var r=this.checkVersion(e,t,"<",n);if(!t.endsWith(".0.0"))throw new Error("May only break APIs in major releases");if(!n)throw new Error("Must provide helpful message for developers");if(!r)throw new Error("Deprecated API use. ".concat(n));console.warn("Deprecation warning: You are using a deprecated API which will change in v".concat(t,". ").concat(n))}},{key:"isTestEnv",get:function(){return I}}],(n=null)&&M(t.prototype,n),r&&M(t,r),e}();function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.bryntum||(window.bryntum={})).getVersion=F.getVersion.bind(F),window.bryntum.checkVersion=F.checkVersion.bind(F),window.bryntum.deprecate=F.deprecate.bind(F),F._$name="VersionHelper";var H=Symbol("defaultConfig"),B=Symbol("propertyInitializers"),z=Symbol("classHierarchy"),V=Symbol("configuration"),W=Symbol("originalConfig"),$=Symbol("instanceProperties"),Y=function(){function e(){L(this,e),this.construct.apply(this,arguments),this.afterConstruct()}var t,n,r;return t=e,r=[{key:"destroy",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){e&&e.destroy&&!e.isDestroyed&&e.destroy()}))}},{key:"getDefaultConfiguration",value:function(){var e=this.getConfigDescriptor(),t=e.needsFork?this.fork(e.defaultConfig):Object.setPrototypeOf({},e.defaultConfig);if(F.isTestEnv&&t.testConfig&&window.__applyTestConfigs)for(var n in t.testConfig)t[n]=t.testConfig[n];return t}},{key:"getConfigDescriptor",value:function(t){var n,r,o,i,a,u=this,c=!t&&u.hasOwnProperty(H)?u[H]:null;if(!c){for(r in c={defaultConfig:n=u.hasOwnProperty("defaultConfig")?u.defaultConfig:{},needsFork:0},t||(u[H]=c),n)if((i=n[r])&&(i.constructor===Object||Array.isArray(i))&&!Object.isFrozen(i)){c.needsFork=1;break}if(!t)for(o=u.superclass;o&&o!==e;o=o.superclass)a=o.getConfigDescriptor(!0),Object.keys(a.defaultConfig).length&&(c.needsFork|=a.needsFork,Object.setPrototypeOf(n,n=a.defaultConfig))}return c}},{key:"fork",value:function(e){var t,n,r;if(e&&e.constructor===Object&&!Object.isFrozen(e))for(n in t=Object.setPrototypeOf({},e),e)(r=e[n])&&(r.constructor===Object?t[n]=this.fork(r):r instanceof Array&&(t[n]=r.slice()));else t=e;return t}},{key:"assign",value:function(e){for(var t,n,r=0,o=arguments.length<=1?0:arguments.length-1;r<o;r++)for(n in t=r+1<1||arguments.length<=r+1?void 0:arguments[r+1])e[n]=t[n];return e}},{key:"createPropInitializer",value:function(e){var t=(this[B]||(this[B]={}))[e];if(!t){var n="initializing"+A.capitalizeFirstLetter(e);t=this[B][e]={configurable:!0,get:function(){var t=this,r=t[$][e];return r?Reflect.defineProperty(t,e,r):delete t[e],t[n]=!0,t[e]=t[V][e],t[n]=!1,t.configDone[e]=!0,t[e]},set:function(t){var n=this,r=n[$][e];r?Reflect.defineProperty(n,e,r):delete n[e],n.configDone[e]=!0,n[e]=t}}}return t}},{key:"isOfTypeName",value:function(e){return this.classNameHierarchy().includes(e)}},{key:"$name",get:function(){return this.hasOwnProperty("_$name")&&this._$name||this.name}},{key:"superclass",get:function(){return Object.getPrototypeOf(this)}}],(n=[{key:"construct",value:function(){null!==(arguments.length<=0?void 0:arguments[0])&&this.configure.apply(this,arguments),this.afterConfigure()}},{key:"destroy",value:function(){var e=this;for(var t in e.isDestroying=!0,e.doDestroy(),Object.setPrototypeOf(this,null),e)delete e[t];delete e[W],e.isDestroyed=!0}},{key:"_thisIsAUsedExpression",value:function(e){}},{key:"startConfigure",value:function(e){}},{key:"finishConfigure",value:function(e){}},{key:"afterConfigure",value:function(){}},{key:"afterConstruct",value:function(){}},{key:"callback",value:function(e,t,n){"this"===t&&(t=this);var r=this.resolveCallback(e,t),o=r.handler,i=r.thisObj;return n?o.apply(i,n):o.call(i)}},{key:"resolveCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if(e.substr){if(e.startsWith("up."))for(e=e.substr(3),t=this.owner;t&&!t[e];t=t.owner);else e.startsWith("this.")&&(t=this);e=t[e]}return{handler:e,thisObj:t}}},{key:"bindCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if(e){var n=this.resolveCallback(e,t),r=n.handler,o=n.thisObj;if(r)return r.bind(o)}}},{key:"delay",value:function(e,t){e=this.setTimeout?e:e.bind(this),("number"==typeof t?this.setTimeout||setTimeout:this.requestAnimationFrame||requestAnimationFrame)(e,t)}},{key:"doDestroy",value:function(){}},{key:"destroyProperties",value:function(){for(var e,t,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];for(var a=0,u=o;a<u.length;a++)!((e=u[a])in n)||n[V]&&n[V][e]||((t=n[e])&&t.destroy&&t.destroy(),delete n[e])}},{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;n.initialConfig=t,n.isConfiguring=!0,Object.assign(n,n.getProperties()),n.setConfig(n[W]=e.assign(n.getDefaultConfiguration(),t),!0),n.isConfiguring=!1}},{key:"setConfig",value:function(t,n){var r,o,i=this,a=i[V],u=a?i.configDone:i.configDone={},c=i[$]={};for(r in i[V]=a?Object.setPrototypeOf(Object.assign({},t),a):t,t)null!=t[r]||t.hasOwnProperty(r)?(c[r]||!(o=Reflect.getOwnPropertyDescriptor(i,r))||"value"in o||(c[r]=o),Reflect.defineProperty(i,r,e.createPropInitializer(r)),n||(u[r]=!1)):u[r]=!0;for(r in n&&i.startConfigure(t),t)u[r]||(i[r]=t[r]);a?i[V]=a:delete i[V],n&&i.finishConfigure(t)}},{key:"getDefaultConfiguration",value:function(){return this.constructor.getDefaultConfiguration()}},{key:"getProperties",value:function(){var e,t,n=this.classHierarchy(),r=n.length,o={};for(e=0;e<r;e++)(t=n[e]).hasOwnProperty("properties")&&Object.assign(o,t.properties);return o}},{key:"classHierarchy",value:function(t){var n,r=this.constructor,o=r.hasOwnProperty(z)?r[z]:null;if(!o){for(o=r[z]=[];r!==e;r=Object.getPrototypeOf(r))o.unshift(r);Object.freeze(o)}if(t)for(var i=0;!n&&i<o.length;i++)o[i]===t&&(n=o.slice(i));else n=o;return n}},{key:"classNameHierarchy",value:function(e){return this.classHierarchy(e).map((function(e){return e.$name}))}},{key:"detachListeners",value:function(e){var t=this.$detachers;if(t=t&&t[e])for(;t.length;)t.pop()()}},{key:"trackDetacher",value:function(e,t){var n=this.$detachers||(this.$detachers={});(n[e]||(n[e]=[])).push(t)}},{key:"untrackDetachers",value:function(e){var t=this.$detachers;if(t)for(var n in t)for(var r=t[n],o=r.length;o-- >0;)r[o].eventer===e&&r.splice(o,1)}},{key:"$name",get:function(){return this.constructor.$name}},{key:"config",get:function(){var e,t={},n=this[W];for(e in n)t[e]=n[e];return t}}])&&N(t.prototype,n),r&&N(t,r),e}();Object.assign(Y.prototype,{$detachers:null}),F.setVersion("core","0.0.0"),Y._$name="Base";n(6),n(1),n(2),n(3),n(87),n(20),n(83),n(8),n(195),n(18),n(9),n(22),n(29),n(95),n(201),n(27);function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"clean",value:function(e){return e.reduce((function(e,t){return null==t||Array.isArray(t)&&0===t.length||""===t||e.push(t),e}),[])}},{key:"remove",value:function(e){for(var t,n,r=!1,o=0;o<(arguments.length<=1?0:arguments.length-1);o++)n=o+1<1||arguments.length<=o+1?void 0:arguments[o+1],-1!==(t=e.indexOf(n))&&(e.splice(t,1),r=!0);return r}},{key:"findInsertionIndex",value:function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.lexicalCompare,i=arguments.length>3?arguments[3]:void 0,a=t.length;return i<a&&(n=i>0?o(t[i-1],e):0,r=i<a-1?o(e,t[i]):0,n<1&&r<1)?i:this.binarySearch(t,e,o)}},{key:"binarySearch",value:function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.lexicalCompare,u=e.length;for(o instanceof Function?(a=o,o=0):i instanceof Function&&(a=i,i=u),--i;o<=i;)(r=a(t,e[n=o+i>>1]))>=0?o=n+1:r<0&&(i=n-1);return o}},{key:"fill",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],o=Array.isArray(t)?t:[t],i=0;i<e;i++){var a=!0,u=!1,c=void 0;try{for(var s,l=o[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var f=s.value,d=Object.assign({},f);n&&n(d,i),r.push(d)}}catch(e){u=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(u)throw c}}}return r}},{key:"populate",value:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n}},{key:"include",value:function(e,t){e.includes(t)||e.push(t)}},{key:"allowNegative",value:function(e){return new Proxy(e,{get:function(e,t,n){if("string"!=typeof t)return Reflect.get(e,t,n);var r=Number(t);return Number.isNaN(r)?Reflect.get(e,t,n):e[r<0?e.length+r:r]},set:function(e,t,n,r){if("string"!=typeof t)return Reflect.set(e,t,n,r);var o=Number(t);return Number.isNaN(o)?Reflect.set(e,t,n,r):(e[o<0?e.length+o:o]=n,!0)}})}},{key:"delta",value:function(e,t){if(!t)return{onlyInA:e,onlyInB:[],inBoth:[]};for(var n=[],r=[],o=[],i=0;i<e.length;i++){var a=e[i];t.includes(a)?o.push(a):n.push(a)}for(var u=0;u<t.length;u++){var c=t[u];o.includes(c)||r.push(c)}return{onlyInA:n,onlyInB:r,inBoth:o}}}],(n=[{key:"magnitudeCompare",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"lexicalCompare",value:function(e,t){return(e=String(e))<(t=String(t))?-1:e>t?1:0}}])&&G(t.prototype,n),r&&G(t,r),e}();function q(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e,t,n){return(te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}U._$name="ArrayHelper";var oe={thisObj:1,detachable:1,once:1,detacher:1,prio:1,args:1,expires:1,name:1,_oldDestructor:1},ie=function(e,t){return t.prio-e.prio},ae=function(e){return function(e){function t(){return J(this,t),ee(this,ne(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{listeners:null}}}],(r=[{key:"destroy",value:function(){this.trigger("beforeDestroy"),te(ne(t.prototype),"destroy",this).call(this)}},{key:"construct",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=te(ne(t.prototype),"construct",this)).call.apply(e,[this].concat(r)),this.processConfiguredListeners()}},{key:"processConfiguredListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.listeners&&this.initialEventListeners,t=this;if(e&&!t.defaultListenersInitialized){var n=t.addListener(e,t);!1!==t.listeners.detachable&&(t.listenerDetacher=n),t.defaultListenersInitialized=!0}}},{key:"doDestroy",value:function(){this.trigger("destroy"),this.listenerDetacher&&this.listenerDetacher(),this.removeAllListeners(),te(ne(t.prototype),"doDestroy",this).call(this)}},{key:"addListener",value:function(e,t,n){var r,o=this,i=o.eventListeners||(o.eventListeners={});if("string"==typeof e)return o.addListener((Z(r={},e,t),Z(r,"detachable",!1!==t.detachable),Z(r,"thisObj",n),r));for(var a in t=void 0!==e.thisObj?e.thisObj:e.thisObj=t,e)oe[a]||function(){var n=e[a],r={fn:"object"===K(n)?n.fn:n,thisObj:void 0!==n.thisObj?n.thisObj:t,args:n.args||e.args,prio:void 0!==n.prio?n.prio:void 0!==e.prio?e.prio:0,once:void 0!==n.once?n.once:void 0!==e.once&&e.once,catchAll:"catchAll"===a},u=a.toLowerCase(),c=i[u]||(i[u]=[]);n.expires&&o.delay((function(){return o.un(u,r)}),e.expires),c.splice(U.findInsertionIndex(r,c,ie,c.length),0,r)}();e.relayAll&&o.relayAll(e.relayAll),t&&o.attachAutoDetacher(e);var u=!1!==e.detachable,c=e.name,s=e.expires||u||c?function(){o.isDestroyed||o.removeListener(e)}:null;return s&&(s.eventer=o,s.listenerName=c,c&&t&&t.trackDetacher&&t.trackDetacher(c,s),e.expires&&o.delay(s,e.expires),u)?s:void 0}},{key:"on",value:function(){return this.addListener.apply(this,arguments)}},{key:"un",value:function(){this.removeListener.apply(this,arguments)}},{key:"removeListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.thisObj,n=this;"string"!=typeof e?(Object.entries(e).forEach((function(e){var r=X(e,2),o=r[0],i=r[1];if(!oe[o]){var a=o.toLowerCase(),u=n.eventListeners&&n.eventListeners[a];if(u){var c=u.findIndex((function(e){return!(e.fn!==i&&e.fn!==i.fn||e.thisObj!==t&&e.thisObj!==i.thisObj&&t)}));c>=0&&(u.splice(c,1),u.length||delete n.eventListeners[a])}}})),e.thisObj&&!e.thisObj.isDestroyed&&n.detachAutoDetacher(e)):n.removeListener(Z({},e,t),!((arguments.length<=2?0:arguments.length-2)>0)||(arguments.length<=2?void 0:arguments[2]))}},{key:"hasListener",value:function(e){return Boolean(this.eventListeners&&this.eventListeners[e])}},{key:"relayAll",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(this.relayAllTargets||(this.relayAllTargets=[])).push({through:e,prefix:t,transformCase:n})}},{key:"removeAllListeners",value:function(){var e,t,n=this.eventListeners;for(var r in n){var o=n[r];for(e=o.length;e-- >0;){var i=o[e];this.removeListener(r,i),(t=i.thisObj)&&t.untrackDetachers&&t.untrackDetachers(this)}}}},{key:"relayEvents",value:function(e,t,n){var r=this,o={detachable:!0},i=function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return r.trigger.apply(r,[(n||"")+e].concat(o))};return t.forEach((function(e){o[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.apply(void 0,[e].concat(n))}})),e.on(o)}},{key:"attachAutoDetacher",value:function(e){var t=this,n=e.thisObj,r="doDestroy"in n?"doDestroy":"destroy";r in n?(e._oldDestructor=n[r],n[r]=function(){t.isDestroyed||t.removeListener(e),e._oldDestructor.call(n)}):n[r]=function(){t.removeListener(e)}}},{key:"detachAutoDetacher",value:function(e){var t=e.thisObj,n="doDestroy"in t?"doDestroy":"destroy";e._oldDestructor&&(t[n]=e._oldDestructor)}},{key:"await",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{checkLog:!0,resetLog:!0},n=this;return!1===t&&(t={checkLog:!1}),new Promise((function(r){var o;t.checkLog&&n._triggered&&n._triggered[e]&&(r(),t.resetLog&&n.clearLog(e)),n.on((Z(o={},e,(function(){r.apply(void 0,arguments),t.resetLog&&n.clearLog(e)})),Z(o,"prio",-1e4),Z(o,"once",!0),o))}))}},{key:"clearLog",value:function(e){this._triggered&&(e?delete this._triggered[e]:this._triggered={})}},{key:"callPreventable",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this;if(!o&&!1===i.trigger("before"+A.capitalizeFirstLetter(e),t))return!1;var a=n.apply(void 0,[t].concat(q(r)));return o||i.trigger(e,t),a}},{key:"trigger",value:function(e,t){var n,r=this,o=e.toLowerCase(),i=r.eventsSuspended,a=r.relayAllTargets,u=r.callOnFunctions,c=r.owner,s=r.eventListeners&&r.eventListeners[o],l=!0;if(r._triggered||(r._triggered={}),r._triggered[e]=!0,i)return i.shouldQueue&&i.queue.push(arguments),!0;if(r.eventListeners&&r.eventListeners.catchall&&((n=s=s?s.slice():[]).push.apply(n,q(r.eventListeners.catchall)),s.sort(ie),l=!1),!s&&!a&&!u)return!0;if(t?"source"in t||(Object.isExtensible(t)?t.source=r:t=Object.setPrototypeOf({source:r},t)):t={source:r},t.type!==o&&(t.constructor!==Object?Reflect.defineProperty(t,"type",{get:function(){return o}}):t.type=o),u){var f="on"+A.capitalizeFirstLetter(e);if(f in r&&(r.callback(r[f],r,[t]),!r.isDestroyed&&r.hasOwnProperty(f)&&(!r.pluginFunctionChain||!r.pluginFunctionChain[f]))){var d=Object.getPrototypeOf(r);if(f in d&&(d[f].call(r,t),r.isDestroyed))return}}if(s){var p,h,y=0;for(l&&(s=s.slice());y<s.length&&!r.isDestroyed;y++){var g=(p=s[y]).thisObj;if(!g||!g.isDestroyed){if(p.once&&r.removeListener(o,p),"string"==typeof p.fn){if(g&&(h=g[p.fn]),!h){var v=r.resolveCallback(p.fn);h=v.handler,g=v.thisObj}}else h=p.fn;var m;if(p.args){if(!1===(m=h).call.apply(m,[g||r].concat(q(p.args),[t])))return!1}else if(!1===h.call(g||r,t))return!1}}}return a&&a.forEach((function(n){var r=e;if(n.transformCase&&(r=A.capitalizeFirstLetter(r)),n.prefix&&(r=n.prefix+r),!1===n.through.trigger(r,t))return!1})),!(t.bubbles&&c&&!c.isDestroyed)||c.trigger(e,t)}},{key:"suspendEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.eventsSuspended||(this.eventsSuspended={shouldQueue:e,queue:[],count:0});t.count++}},{key:"resumeEvents",value:function(){var e=this.eventsSuspended;if(e&&0==--e.count&&(this.eventsSuspended=null,e.shouldQueue)){var t=!0,n=!1,r=void 0;try{for(var o,i=e.queue[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.trigger.apply(this,q(a))}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return!Boolean(this.eventsSuspended)}},{key:"listeners",set:function(e){this.isConfiguring?this.initialEventListeners=e:(this.removeAllListeners(),e&&this.on(e))},get:function(){return this.eventListeners||this.initialEventListeners}}])&&Q(n.prototype,r),o&&Q(n,o),t}(e||Y)};n(135),n(23),n(45),n(91);function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var se=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"register",value:function(e,t){var n=fe[t];e=e.toLowerCase(),le[e]=t,n?n[e]=1:fe[t]=ue({},e,1)}},{key:"getClass",value:function(e){return le[e.toLowerCase()]}},{key:"isType",value:function(e,t,n){t=t.toLowerCase();for(var r=e.constructor;r;r=n&&Object.getPrototypeOf(r)){var o=r.hasOwnProperty("$name")?r.$name:r.name,i=fe[r]||o&&(fe[r]=ue({},o.toLowerCase(),1));if(i&&i[t])return!0}}},{key:"createWidget",value:function(e,t){var n=this.getClass(e||"widget");return n?new n(t):null}}],(n=null)&&ce(t.prototype,n),r&&ce(t,r),e}(),le=se.widgetRegister={},fe=se.widgetClassRegister={};function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}se._$name="BryntumWidgetAdapterRegister";function he(e,t){for(var n=e.classHierarchy(),r=0;r<n.length;r++)if(n[r].$name.toLowerCase()===t)return!0;return!1}var ye=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"generateId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"generatedId";return t+ ++e.idCounter}},{key:"register",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.id;if(null==r&&(r=t.id=e.generateId(n),t.hasGeneratedId=!0),r in e.idMap&&!this.disableThrow)throw new Error("Id "+r+" already in use");e.idMap[r]=t}},{key:"unregister",value:function(t){e.idMap[t.id]===t&&delete e.idMap[t.id]}},{key:"get",value:function(t){return e.idMap[t]}},{key:"query",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.idMap;for(var o in r)if(ge(r[o],t,n))return r[o];return null}},{key:"queryAll",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.idMap,o=[];for(var i in r)ge(r[i],t,n)&&o.push(r[i]);return o}},{key:"fromElement",value:function(t,n,r){var o=de(n);t&&t instanceof Event&&(t=t.target),("number"===o||n&&1===n.nodeType)&&(r=n,n=null);var i,a,u,c=t,s=e.idMap,l=0;for("number"!=typeof r&&(i=r,r=Number.MAX_VALUE),"string"===o&&(n=n.toLowerCase());c&&1===c.nodeType&&l<r&&c!==i;){if(a=c.dataset&&c.dataset.ownerCmp||c.id){if(u=s[a]){if(!n)return u;if("function"===o){if(n(u))return u}else if(ge(u,n)||he(u,n))return u}l++}c=c.parentNode}return null}}],(n=null)&&pe(t.prototype,n),r&&pe(t,r),e}();function ge(e,t,n){return"*"===t||("function"==typeof t?t(e):se.isType(e,t,n))}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ye.idCounter=0,ye.idMap={},(window.bryntum||(window.bryntum={})).get=ye.get,window.bryntum.IdHelper=ye,window.bryntum.query=ye.query,window.bryntum.queryAll=ye.queryAll,window.bryntum.fromElement=ye.fromElement,ye._$name="IdHelper";var me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getById",value:function(e){return ye.get(e)}},{key:"fromElement",value:function(e,t,n){return ye.fromElement(e,t,n)}},{key:"createWidget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.adapter.createWidget(e)}},{key:"append",value:function(e,t){if(e=Array.isArray(e)&&e||[e],(t instanceof HTMLElement||"string"==typeof t)&&(t={appendTo:t}),t.insertFirst){var n="string"==typeof t.insertFirst?document.getElementById(t.insertFirst):t.insertFirst;n.firstChild?t.insertBefore=n.firstChild:t.appendTo=n}return this.adapter.appendWidgets(e,t)}},{key:"openPopup",value:function(e,t){return this.adapter.openPopup(e,t)}},{key:"showContextMenu",value:function(e,t){return this.adapter.showContextMenu(e,t)}},{key:"attachTooltip",value:function(e,t){return this.adapter.attachTooltip(e,t)}},{key:"hasTooltipAttached",value:function(e){return this.adapter.hasTooltipAttached(e)}},{key:"destroyTooltipAttached",value:function(e){return this.adapter.destroyTooltipAttached(e)}},{key:"mask",value:function(e,t){return this.adapter.mask(e,t)}},{key:"unmask",value:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1],this.adapter.unmask(e)}},{key:"toast",value:function(e){this.adapter.toast(e)}},{key:"adapter",set:function(e){this._adapter=new e},get:function(){if(!this._adapter)throw new Error("Widget adapter is required. Please import BryntumWidgetAdapter class. See docs here: https://www.bryntum.com/docs/grid/#Core/adapter/widget/BryntumWidgetAdapter");return this._adapter}},{key:"hasAdapter",get:function(){return!!this._adapter}},{key:"defaultStyle",set:function(e){this.adapter.defaultStyle=e},get:function(){return this.adapter.defaultStyle}}],(n=null)&&ve(t.prototype,n),r&&ve(t,r),e}();me._$name="WidgetHelper";n(124),n(161);function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var we=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"cacheFlags",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.platform,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent,n=this;n._isLinux=Boolean(e.match(/Linux/)),n._isMac=Boolean(e.match(/Mac/)),n._isWindows=Boolean(e.match(/Win32/)),n._isIE11=Boolean(t.match(/rv:11/)),n._edgeVersion=n.getVersion(t,/Edge\/(\d+)\./),n._isEdge=n._edgeVersion>0,n._isWebkit=Boolean(t.match(/WebKit/))&&!n._isEdge,n._firefoxVersion=n.getVersion(t,/Firefox\/(\d+)\./),n._isFirefox=n._firefoxVersion>0,n._chromeVersion=n._isEdge?0:n.getVersion(t,/Chrom(?:e|ium)\/(\d+)\./),n._isChrome=n._chromeVersion>0,n._isSafari=Boolean(t.match(/Safari/))&&!n._isChrome&&!n._isEdge,n._isMobileSafari=Boolean(t.match(/Mobile.*Safari/)),n._isAndroid=Boolean(t.match(/Android/g));try{document.querySelector(":scope"),n.supportsQueryScope=!n._isFirefox}catch(e){n.supportsQueryScope=!1}n._supportsPassive=!1;try{document.addEventListener("__notvalid__",null,{get passive(){n._supportsPassive=!0}})}catch(e){}}},{key:"getVersion",value:function(e,t){var n=e.match(t);return n?parseInt(n[1]):0}},{key:"setLocalStorageItem",value:function(e,t){this.storageAvailable&&localStorage.setItem(e,t)}},{key:"getLocalStorageItem",value:function(e){return this.storageAvailable&&localStorage.getItem(e)}},{key:"removeLocalStorageItem",value:function(e){this.storageAvailable&&localStorage.removeItem(e)}},{key:"searchParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.location.search,r=new RegExp("[?&]".concat(e,"=([^&]*)")),o=n.match(r);return o&&o[1]||t}},{key:"isTouchDevice",get:function(){return"_isTouchDevice"in this?this._isTouchDevice:"ontouchstart"in window||!this.isEdge&&navigator.maxTouchPoints>0||this.isEdge&&window.TouchEvent||navigator.msMaxTouchPoints>0},set:function(e){this._isTouchDevice=e}},{key:"isMac",get:function(){return this._isMac}},{key:"isWindows",get:function(){return this._isWindows}},{key:"isLinux",get:function(){return this._isLinux}},{key:"isIE11",get:function(){return this._isIE11}},{key:"isEdge",get:function(){return this._isEdge}},{key:"edgeVersion",get:function(){return this._edgeVersion}},{key:"isWebkit",get:function(){return this._isWebkit}},{key:"isChrome",get:function(){return this._isChrome}},{key:"chromeVersion",get:function(){return this._chromeVersion}},{key:"isFirefox",get:function(){return this._isFirefox}},{key:"firefoxVersion",get:function(){return this._firefoxVersion}},{key:"isSafari",get:function(){return this._isSafari}},{key:"isMobileSafari",get:function(){return this._isMobileSafari}},{key:"isAndroid",get:function(){return this._isAndroid}},{key:"supportsPassive",get:function(){return this._supportsPassive}},{key:"storageAvailable",get:function(){var e,t;try{return e=localStorage,t="__storage_test__",e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&0!==e.length}}}],(n=null)&&be(t.prototype,n),r&&be(t,r),e}();we.cacheFlags(),we._$name="BrowserHelper";n(98),n(224),n(226),n(163),n(229),n(204),n(35);function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Oe=/^(\w+)=(.*)$/,Ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"get",value:function(e,t){return this.fetch(e,t)}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t instanceof FormData||"string"==typeof t||(t=JSON.stringify(t)),this.fetch(e,Object.assign({method:"POST",body:t},n))}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new AbortController;if(t.signal=n.signal,"credentials"in t||(t.credentials="include"),t.queryParams){var r=Object.entries(t.queryParams);r.length&&(e+="?"+r.map((function(e){var t=Se(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(encodeURIComponent(r))})).join("&"))}var o=new Promise((function(n,r){fetch(e,t).then((function(e){t.parseJson?e.json().then((function(t){e.parsedJson=t,n(e)})).catch((function(t){e.parsedJson=null,e.error=t,r(e)})):n(e)})).catch((function(e){e.stack=o.stack,r(e)}))}));return o.stack=(new Error).stack,o.abort=function(){n.abort()},o}))},{key:"mockUrl",value:function(t,n){(this.mockAjaxMap||(this.mockAjaxMap={}))[t]=n,e.originalFetch||(e.originalFetch=e.fetch),e.fetch=this.mockAjaxFetch.bind(this)}},{key:"mockAjaxFetch",value:function(t,n){var r=t.split("?"),o=this.mockAjaxMap[r[0]],i=null;if(o){"function"==typeof o&&(o=o(r[0],r[1]&&function(e){var t={},n=e.split("&"),r=!0,o=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value,s=Se(Oe.exec(c),3),l=s[0],f=s[1],d=s[2];if(l){var p=t[f];p?(Array.isArray(p)||(p=t[f]=[p]),p.push(d)):t[f]=d}}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return t}(r[1]),n));try{i=n.parseJson&&JSON.parse(o.responseText)}catch(e){i=null,o.error=e}return o=Object.assign({status:200,ok:!0,headers:new Headers,statusText:"OK",url:t,parsedJson:i,text:function(){return new Promise((function(e){e(o.responseText)}))},json:function(){return new Promise((function(e){e(i)}))}},o),new Promise((function(e,t){o.synchronous?e(o):setTimeout((function(){e(o)}),"delay"in o?o.delay:100)}))}return e.originalFetch(t,n)}}],n&&ke(t.prototype,n),r&&ke(t,r),e}();function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e,t,n){return(De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Re(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ee._$name="AjaxHelper";var Te=new(function(e){function t(){return xe(this,t),je(this,Re(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{locales:{}}}}],(r=[{key:"construct",value:function(){for(var e,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(e=De(Re(t.prototype),"construct",this)).call.apply(e,[this].concat(o));var a=document.querySelector("script[data-default-locale]");a&&(n.defaultLocaleName=a.dataset.defaultLocale),window.bryntum&&window.bryntum.locales&&(Object.keys(window.bryntum.locales).forEach((function(e){if(!e.startsWith("moment")){var t=window.bryntum.locales[e];t.extends?n.extendLocale(t.extends,t):n.registerLocale(t.localeName,{desc:t.localeDesc,locale:t})}})),n.locale||"En"!==n.defaultLocaleName&&n.applyLocale(n.defaultLocaleName||Object.keys(n.locales)[0]))}},{key:"registerLocale",value:function(e,t){var n=this,r=n.defaultLocaleName===e,o=n.locale&&n.locale.localeName===e,i=0===Object.keys(n.locales).length;n.locales[e]=t,(r||!n.defaultLocaleName&&(i||o))&&n.internalApplyLocale(t)}},{key:"extendLocale",value:function(e,t){var n=this.locales[e];return!!n&&(Object.keys(t).forEach((function(e){n.locale[e]?Object.assign(n.locale[e],t[e]):n.locale[e]=t[e]})),delete n.locale.extends,!0)}},{key:"internalApplyLocale",value:function(e){this._locale=e.locale,this.trigger("locale",e)}},{key:"applyLocale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.locales[e];if(o&&o.locale&&r._locale===o.locale&&!t)return!0;if(!o){if(n)return!0;throw new Error("Locale ".concat(e," not registered"))}function i(){r.internalApplyLocale(o)}return o.locale?(i(),!0):new Promise((function(t,n){r.loadLocale(o.path).then((function(n){n.text().then((function(n){new Function(n)(),o.locale=window.bryntum.locales[e],i(),t(o)}))})).catch((function(e){return n(e)}))}))}},{key:"loadLocale",value:function(e){return Ee.get(e)}},{key:"locales",set:function(e){this._locales=e},get:function(){return this._locales}},{key:"locale",set:function(e){"string"==typeof e?this.applyLocale(e):(e.locale||(e={locale:e,localeName:e.localeName||"custom"}),this.registerLocale(e.localeName,e),this.applyLocale(e.localeName))},get:function(){return this._locale}}])&&_e(n.prototype,r),o&&_e(n,o),t}(ae(Y)));function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e,t,n){return(Ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=He(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze=function(e){return function(e){function t(){return Ie(this,t),Le(this,He(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,e),n=t,o=[{key:"parseText",value:function(e){var t=this.inTextLocaleRegExp.exec(e);return t?t[1]:e}},{key:"getTranslation",value:function(e,t,n){var r,o,i=Te.locale;if(i)for(e=this.parseText(e);n&&(o="string"==typeof n?n:n.$name||n.name);){var a=i[o];if(a&&e in a){var u=a[e];r="function"==typeof u&&void 0!==t?u(t):u;break}if("string"==typeof n)break;n=Object.getPrototypeOf(n)}return r}},{key:"L",value:function(e){for(var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return i.length||(i=[this]),i.some((function(o){return void 0!==(t=n.getTranslation(e,r,o))})),void 0===t?e:t}},{key:"defaultConfig",get:function(){return{localeClass:null,localizableProperties:[]}}},{key:"inTextLocaleRegExp",get:function(){return/L{([^}]+)}/g}}],(r=[{key:"construct",value:function(){for(var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];(e=Ne(He(t.prototype),"construct",this)).call.apply(e,[this,n].concat(i)),Te.on("locale",r.updateLocalization,r),r.updateLocalization()}},{key:"localizeProperty",value:function(e){var t=this;if("string"==typeof t[e]){t.originalLocales=t.originalLocales||{},t.originalLocales[e]=t.originalLocales[e]||t[e];var n=t.originalLocales[e];n&&(t[e]=t.L(n))}}},{key:"updateLocalization",value:function(){this.localizableProperties&&this.localizableProperties.forEach(this.localizeProperty,this)}},{key:"buildLocalizableProperties",value:function(e){var t=[];e.localizableProperties&&t.push.apply(t,Me(e.localizableProperties));for(var n=this.constructor.superclass;n&&n!==Y;n=n.superclass){var r=n.getConfigDescriptor(!0).defaultConfig;r&&r.localizableProperties&&t.push.apply(t,Me(r.localizableProperties.filter((function(e){return t.indexOf(e)<0}))))}return t}},{key:"startConfigure",value:function(e){e.localizableProperties=this.buildLocalizableProperties(e),Ne(He(t.prototype),"startConfigure",this).call(this,e)}},{key:"L",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.localeClass&&this.localeClass!==this.constructor?t.L(e,n,this.localeClass,this.constructor):t.L(e,n,this.constructor)}},{key:"localeClass",get:function(){return this._localeClass||this.parent&&this.parent.localeClass||null},set:function(e){this._localeClass=e}},{key:"localeManager",get:function(){return Te}}])&&Fe(n.prototype,r),o&&Fe(n,o),t}(e||Y)};function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ye(e,t,n){return(Ye=$e()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Ze(o,n.prototype),o}).apply(null,arguments)}function Ge(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je=function(e){return e+({1:"st",2:"nd",3:"rd"}[e[e.length-1]]||"th")},Qe=new RegExp("‎"),et=function(e,t){return isNaN(e)||null==e?t:e},tt=function(e,t,n){var r=(it[e]||(it[e]=new Intl.DateTimeFormat(nt,t))).format(n);return we.isIE11&&(r=r.replace(Qe,"")),r},nt="en-US",rt=Je,ot={},it={},at={},ut={M:function(e){return e.getMonth()+1},Mo:function(e){return rt(ut.M(e).toString())},MM:function(e){return(e.getMonth()+1).toString().padStart(2,"0")},MMM:function(e){return tt("MMM",{month:"short"},e)},MMMM:function(e){return tt("MMMM",{month:"long"},e)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},Qo:function(e){return rt(ut.Q(e).toString())},D:function(e){return e.getDate()},Do:function(e){return rt(ut.D(e).toString())},DD:function(e){return e.getDate().toString().padStart(2,"0")},DDD:function(e){return Math.ceil((new Date(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0)-new Date(e.getFullYear(),0,0,12,0,0))/864e5)},DDDo:function(e){return rt(ut.DDD(e).toString())},DDDD:function(e){return ut.DDD(e).toString().padStart(3,"0")},d:function(e){return e.getDay()},do:function(e){return rt(e.getDay().toString())},d1:function(e){return ut.ddd(e).substring(0,1)},dd:function(e){return ut.ddd(e).substring(0,2)},ddd:function(e){return tt("ddd",{weekday:"short"},e)},dddd:function(e){return tt("dddd",{weekday:"long"},e)},e:function(e){return e.getDay()},E:function(e){return e.getDay()+1},W:function(e){var t=new Date(e.valueOf());t.setDate(t.getDate()-(e.getDay()+6)%7+3);var n=t.valueOf();return t.setMonth(0,1),4!==t.getDay()&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((n-t)/6048e5)},Wo:function(e){return rt(ut.W(e).toString())},WW:function(e){return ut.W(e).toString().padStart(2,"0")},Y:function(e){return e.getFullYear()},YY:function(e){return e.getFullYear()%100},YYYY:function(e){return e.getFullYear()},A:function(e){return e.getHours()<12?"AM":"PM"},a:function(e){return e.getHours()<12?"am":"pm"},H:function(e){return e.getHours()},HH:function(e){return e.getHours().toString().padStart(2,"0")},h:function(e){return e.getHours()%12||12},hh:function(e){return ut.h(e).toString().padStart(2,"0")},k:function(e){return e.getHours()+1},kk:function(e){return ut.k(e).toString().padStart(2,"0")},K:function(e){return tt("K",{hour:"numeric"},e)},KK:function(e){return tt("KK",{hour:"2-digit"},e)},m:function(e){return e.getMinutes()},mm:function(e){return ut.m(e).toString().padStart(2,"0")},s:function(e){return e.getSeconds()},ss:function(e){return ut.s(e).toString().padStart(2,"0")},S:function(e){return e.getMilliseconds().toString().substr(0,1)},SS:function(e){return e.getMilliseconds().toString().substr(0,2).padEnd(2,"0")},SSS:function(e){return e.getMilliseconds().toString().substr(0,3).padEnd(3,"0")},z:function(e){return tt("z",{timeZoneName:"short"},e)},zz:function(e){return tt("zz",{timeZoneName:"long"},e)},LT:function(e){return tt("LT",{hour:"2-digit",minute:"2-digit"},e)},LTS:function(e){return tt("LTS",{hour:"2-digit",minute:"2-digit",second:"2-digit"},e)},L:function(e){return tt("L",{year:"numeric",month:"2-digit",day:"2-digit"},e)},l:function(e){return tt("l",{year:"numeric",month:"numeric",day:"numeric"},e)},LL:function(e){return tt("LL",{year:"numeric",month:"long",day:"numeric"},e)},ll:function(e){return tt("ll",{year:"numeric",month:"short",day:"numeric"},e)},LLL:function(e){return tt("LLL",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"},e)},lll:function(e){return tt("lll",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"},e)},LLLL:function(e){return tt("LLLL",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",weekday:"long"},e)},llll:function(e){return tt("llll",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",weekday:"short"},e)}},ct=Object.keys(ut).sort((function(e,t){return t.length-e.length})),st="^(?:".concat(ct.join("|"),")"),lt=function(){return{}},ft={YYYY:function(e){return{year:parseInt(e)}},Y:function(e){return{year:parseInt(e)}},YY:function(e){var t=parseInt(e);return{year:t+(t>1968?1900:2e3)}},MM:function(e){return{month:parseInt(e)-1}},Mo:function(e){return{month:parseInt(e)-1}},DD:function(e){return{date:parseInt(e)}},M:function(e){return{month:parseInt(e)-1}},D:function(e){return{date:parseInt(e)}},Do:function(e){return{date:parseInt(e)}},DDD:lt,MMM:lt,MMMM:lt,DDDo:lt,DDDD:lt,d:lt,do:lt,d1:lt,dd:lt,ddd:lt,dddd:lt,Q:lt,Qo:lt,W:lt,Wo:lt,WW:lt,e:lt,E:lt,HH:function(e){return{hours:parseInt(e)}},hh:function(e){return{hours:parseInt(e)}},mm:function(e){return{minutes:parseInt(e)}},H:function(e){return{hours:parseInt(e)}},m:function(e){return{minutes:parseInt(e)}},ss:function(e){return{seconds:parseInt(e)}},s:function(e){return{seconds:parseInt(e)}},S:function(e){return{milliseconds:parseInt(e)}},SS:function(e){return{milliseconds:parseInt(e)}},SSS:function(e){return{milliseconds:parseInt(e)}},A:function(e){return{amPm:e.toLowerCase()}},a:function(e){return{amPm:e.toLowerCase()}},L:"MM/DD/YYYY",LT:"HH:mm A",Z:function(e){if(!e)return{};var t=0;if(!e.endsWith("Z")){var n=Et.exec(e);if(n)t=("+"===n[1]?1:-1)*(60*(parseInt(n[2])||0)+(parseInt(n[3])||0));else t=-1*(new Date).getTimezoneOffset()}return{timeZone:t}}},dt=Object.keys(ft).sort((function(e,t){return t.length-e.length})),pt=new RegExp("(".concat(dt.join("|"),")")),ht=new RegExp("(l|LL|ll|LLL|lll|LLLL|llll)"),yt={year:{year:1,quarter:4,month:12,week:52,day:365,hour:8760,minute:525600,second:31536e3,millisecond:31536e6},quarter:{year:.25,quarter:1,month:3,week:4,day:91,hour:2184,minute:131040,second:7862400,millisecond:78624e5},month:{year:1/12,quarter:1/3,month:1,week:4,day:-30,hour:-720,minute:-43200,second:-2592e3,millisecond:-2592e6},week:{year:-1/52,quarter:-1/13,month:-.25,day:7,hour:168,minute:10080,second:604800,millisecond:6048e5},day:{year:-1/365,quarter:-1/91,month:-1/30,week:1/7,hour:24,minute:1440,second:86400,millisecond:864e5},hour:{year:-1/8760,quarter:-1/2184,month:-1/720,week:1/168,day:1/24,minute:60,second:3600,millisecond:36e5},minute:{year:-1/525600,quarter:-1/131040,month:-1/43200,week:1/10080,day:1/1440,hour:1/60,second:60,millisecond:6e4},second:{year:-1/31536e3,quarter:-1/7862400,month:-1/2592e3,week:1/604800,day:1/86400,hour:1/3600,minute:1/60,millisecond:1e3},millisecond:{year:-1/31536e6,quarter:-1/78624e5,month:-1/2592e6,week:1/6048e5,day:1/864e5,hour:1/36e5,minute:1/6e4,second:.001}},gt={ms:"millisecond",milliseconds:"millisecond",s:"second",seconds:"second",m:"minute",minutes:"minute",h:"hour",hours:"hour",d:"day",days:"day",w:"week",weeks:"week",M:"month",months:"month",q:"quarter",quarters:"quarter",y:"year",years:"year"},vt=/^\s*([-+]?\d+(?:[.,]\d*)?|[-+]?(?:[.,]\d+))\s*([^\s]+)?/i,mt=/^\s*([-+]?\d+)(?![.,])\s*([^\s]+)?/i,bt=["millisecond","second","minute","hour","day","week","month","quarter","year"],wt=[["mil"],["s","sec"],["m","min"],["h","hr"],["d"],["w","wk"],["mo","mon","mnt"],["q","quar","qrt"],["y","yr"]],kt=["year","month","week","day","hour","minute","second","millisecond"],St=["milliseconds","seconds","minutes","hours","date","month","year"],Ot=function(e){var t=parseFloat(e);return isNaN(t)?null:t},Et=/([+-])(\d\d):*(\d\d)*$/,Ct={millisecond:0,second:1,minute:2,hour:3,day:4,week:5,month:6,quarter:7,year:8},xt=function(e){function t(){return Ue(this,t),Xe(this,Ke(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,e),n=t,o=[{key:"buildParser",value:function(e){var n=this,r=e.split(pt),o=[];return 1===r.length||ht.test(e)?[]:(r.reduce((function(r,i,a,u){if(0!==a||""!==i)if(pt.test(i)){var c=("parsers"!==n.L("parsers")&&n.L("parsers")||{})[i]||ft[i];if("Z"===i&&a<u.length-2)throw new Error("Invalid format ".concat(e," TimeZone (Z) must be last token"));if("string"==typeof c){var s=t.buildParser(c),l=s.pop();delete l.last,o.push.apply(o,Ge(s)),r=l}else r.pattern=i,r.fn=ft[i]}else r.splitter=i,o.push(r),r={};else r.hasOwnProperty("pattern")&&o.push(r);return r}),{}),o[o.length-1].last=!0,o)}},{key:"parse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultFormat;if(e instanceof Date)return e;if("string"!=typeof e||!e)return null;var r={year:null,month:null,date:null,hours:null,minutes:null,seconds:null,milliseconds:null},o=at[n];o||(o=at[n]=t.buildParser(n)),o.reduce((function(e,t){if(!t.last){var n,o,i;if(-1===(n="T"===t.splitter&&-1===e.indexOf("T")?e.indexOf(" "):""!==t.splitter?e.indexOf(t.splitter):t.pattern&&t.pattern.length||-1)){var a=e.split(/([Z\-+])/);1===a.length?(o=e,i=""):(o=a[0],i="".concat(a[1]).concat(a[2]))}else o=e.substring(0,n)||e,i=e.substring(n+t.splitter.length);return t.fn&&Object.assign(r,t.fn(o)),i}Object.assign(r,t.fn(e))}),e),r.year&&!r.date&&(r.date=1);var i=this.create(r);return i||new Date(e)}},{key:"create",value:function(e){var t=Object.assign({},e),n=isNaN(t.year),r=!1;if(!n){var o=!0;St.forEach((function(e){e in t&&!isNaN(t[e])||(t[e]=0),o=o&&null===t[e]})),n=o}if("pm"===t.amPm&&(t.hours=t.hours%12+12),"timeZone"in t&&(r=!0,t.minutes-=t.timeZone),n)return null;var i=[et(t.year,1970),et(t.month,0),et(t.date,1),t.hours,t.minutes,t.seconds,t.milliseconds];return r?new Date(Date.UTC.apply(Date,i)):Ye(Date,i)}},{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultFormat;if(!e||isNaN(e))return null;var n=ot[t],r="";if(!n){n=ot[t]=[];for(var o=0;o<t.length;o++){var i=t.substr(o).match(st),a=i&&i[0];if(a){var u="formats"!==this.L("formats")&&this.L("formats")||{},c=u[a]||ut[a];n.push(c),o+=a.length-1}else if("{"===t[o]){var s=t.indexOf("}",o+1);-1===s?(n.push(t.substr(o+1)),o=t.length):(n.push(t.substring(o+1,s)),o=s)}else n.push(t[o])}}return n.forEach((function(t){r+="string"==typeof t?t:t(e)})),(we.isEdge||we.isIE11)&&(r=r.replace(/\u200E/g,"")),r}},{key:"asMilliseconds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e&&(t=e,e=1),this.as("millisecond",e,t)}},{key:"formatDelta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=t?this.getShortNameOfUnit:this.getLocalizedNameOfUnit,o=t?"":" ",i=!0,a=!1,u=void 0;try{for(var c,s=kt[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var l=c.value,f=Math.floor(this.as(l,e));if(f&&(n.push("".concat(f).concat(o).concat(r.call(this,l,f>1))),e-=this.as("ms",f,l)),!e)break}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}return n.join(", ")}},{key:"as",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ms";return e===n?t:(e=this.normalizeUnit(e),n=this.normalizeUnit(n),Ct[n]>Ct[e]?t*Math.abs(yt[n][e]):t/Math.abs(yt[e][n]))}},{key:"formatContainsHourInfo",value:function(e){return/([HhKkmSsAa]|LT|L{3,}|l{3,})/.test(e.replace(/(\\.)/g,""))}},{key:"is24HourFormat",value:function(e){return this.format(this.getTime(13,0,0),e).includes("13")}},{key:"add",value:function(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ms",i=this;if(r="string"==typeof e?i.parse(e):new Date(e.getTime()),!o||0===n)return r;switch(o=t.normalizeUnit(o)){case"millisecond":r=new Date(r.getTime()+n);break;case"second":r=new Date(r.getTime()+1e3*n);break;case"minute":r=new Date(r.getTime()+6e4*n);break;case"hour":r=new Date(r.getTime()+36e5*n);break;case"day":n%1==0?r.setDate(r.getDate()+n):r=new Date(r.getTime()+864e5*n),23===r.getHours()&&0===r.getHours()&&(r=i.add(r,1,"hour"));break;case"week":r.setDate(r.getDate()+7*n);break;case"month":var a=r.getDate();a>28&&(a=Math.min(a,i.getLastDateOfMonth(i.add(i.getFirstDateOfMonth(r),n,"month")).getDate())),r.setDate(a),r.setMonth(r.getMonth()+n);break;case"quarter":r=i.add(r,3*n,"month");break;case"year":r.setFullYear(r.getFullYear()+n)}return r}},{key:"diff",value:function(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ms",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(o=t.normalizeUnit(o),!e||!n)return 0;switch(o){case"year":r=this.diff(e,n,"month")/12;break;case"quarter":r=this.diff(e,n,"month")/3;break;case"month":r=12*(n.getFullYear()-e.getFullYear())+(n.getMonth()-e.getMonth());break;case"week":r=this.diff(e,n,"day")/7;break;case"day":var a=e.getTimezoneOffset()-n.getTimezoneOffset();r=(n-e+60*a*1e3)/864e5;break;case"hour":r=(n-e)/36e5;break;case"minute":r=(n-e)/6e4;break;case"second":r=(n-e)/1e3;break;case"millisecond":r=n-e}return i?r:Math.round(r)}},{key:"startOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;t=this.normalizeUnit(t),n&&(e=this.clone(e));for(var r={},o=Ct[t],i=0;i<o;i++){var a=bt[i];"quarter"!==a&&"week"!==a&&(r[a]="day"===a?1:0)}if("quarter"===t)r.month=3*(this.get(e,"quarter")-1);else if("week"===t){var u=e.getDay()-this.weekStartDay;r.day=e.getDate()-u}return this.set(e,r)}},{key:"clone",value:function(e){return new Date(e.getTime())}},{key:"clearTime",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.startOf(e,"day",n)}},{key:"set",value:function(e,t,n){var r=this;if(!t)return e;if("string"==typeof t)switch(this.normalizeUnit(t)){case"millisecond":(0!==n||e.getMilliseconds()>0)&&e.setMilliseconds(n);break;case"second":(0!==n||e.getSeconds()>0)&&e.setSeconds(n);break;case"minute":(0!==n||e.getMinutes()>0)&&e.setMinutes(n);break;case"hour":e.setHours(n);break;case"day":case"date":e.setDate(n);break;case"week":throw new Error("week not implemented");case"month":e.setMonth(n);break;case"quarter":e.setDate(1),e.setMonth(3*(n-1));break;case"year":e.setFullYear(n)}else Object.entries(t).sort((function(e,t){return Ct[e[0]]-Ct[t[0]]})).forEach((function(t){var n=We(t,2),o=n[0],i=n[1];r.set(e,o,i)}));return e}},{key:"constrain",value:function(e,t,n){return null!=t&&(e=this.max(e,t)),null==n?e:this.min(e,n)}},{key:"getTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Date(1970,0,1,e,t,n,r)}},{key:"copyTimeValues",value:function(e,t){return e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds()),e}},{key:"isDST",value:function(e){var t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1);return e.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),n.getTimezoneOffset())}},{key:"isBefore",value:function(e,t){return e<t}},{key:"isAfter",value:function(e,t){return e>t}},{key:"isEqual",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===n?e&&t&&e.getTime()===t.getTime():this.startOf(e,n)-this.startOf(t,n)==0}},{key:"compare",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this;return n&&(e=r.startOf(e,n),t=r.startOf(t,n)),r.isBefore(e,t)?-1:r.isAfter(e,t)?1:0}},{key:"isStartOf",value:function(e,t){return this.isEqual(e,this.startOf(e,t))}},{key:"betweenLesser",value:function(e,t,n){return t.getTime()<=e.getTime()&&e.getTime()<n.getTime()}},{key:"betweenLesserEqual",value:function(e,t,n){return t.getTime()<=e.getTime()&&e.getTime()<=n.getTime()}},{key:"intersectSpans",value:function(e,t,n,r){return this.betweenLesser(e,n,r)||this.betweenLesser(n,e,t)}},{key:"compareUnits",value:function(e,t){return Math.sign(Ct[e]-Ct[t])}},{key:"timeSpanContains",value:function(e,t,n,r){return n-e>=0&&t-r>=0}},{key:"get",value:function(e,t){switch(this.normalizeUnit(t)){case"millisecond":return e.getMilliseconds();case"second":return e.getSeconds();case"minute":return e.getMinutes();case"hour":return e.getHours();case"date":case"day":return e.getDate();case"week":return ut.W(e);case"month":return e.getMonth();case"quarter":return Math.floor(e.getMonth()/3)+1;case"year":return e.getFullYear()}return null}},{key:"daysInMonth",value:function(e){var t=this.clone(e);return t.setDate(1),t.setMonth(e.getMonth()+1),t.setDate(0),t.getDate()}},{key:"getFirstDateOfMonth",value:function(e){return new Date(e.getFullYear(),e.getMonth(),1)}},{key:"getLastDateOfMonth",value:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}},{key:"min",value:function(e,t){return e.getTime()<t.getTime()?e:t}},{key:"max",value:function(e,t){return e.getTime()>t.getTime()?e:t}},{key:"getNext",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.weekStartDay,o=this;if("week"===t){var i=o.clone(e),a=i.getDay();return i=o.startOf(i,"day"),(i=o.add(i,r-a+7*(n-(r<=a?0:1)),"day")).getDay()!==r&&o.add(i,1,"hour"),i}return o.startOf(o.add(e,n,t),t)}},{key:"isValidDate",value:function(e){return this.isDate(e)&&!isNaN(e)}},{key:"isDate",value:function(e){return e&&e.constructor&&"Date"===e.constructor.name}},{key:"getStartOfNextDay",value:function(e,n,r){var o=t.add(r?e:t.clearTime(e,n),1,"day");if(o.getDate()==e.getDate()){var i=t.add(t.clearTime(e,n),"day",2).getTimezoneOffset(),a=e.getTimezoneOffset();o=t.add(o,a-i,"minute")}return o}},{key:"getEndOfPreviousDay",value:function(e,n){var r=n?e:t.clearTime(e,!0);return r-e?r:this.add(r,-1,"day")}},{key:"formatCount",value:function(e,n){return n=t.normalizeUnit(n),1!==e&&(n+="s"),e+" "+n}},{key:"getUnitToBaseUnitRatio",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(e=t.normalizeUnit(e))===(n=t.normalizeUnit(n))?1:yt[e]&&yt[e][n]&&(r||yt[e][n]>0)?1/t.as(n,1,e):yt[n]&&yt[n][e]&&(r||yt[n][e]>0)?t.as(e,1,n):-1}},{key:"getMeasuringUnit",value:function(e){return"week"===e?"day":e}},{key:"getShortNameOfUnit",value:function(e){return e=this.parseTimeUnit(e),this.unitLookup[e].abbrev}},{key:"getLocalizedNameOfUnit",value:function(e,t){return e=this.normalizeUnit(e),e=this.parseTimeUnit(e),this.unitLookup[e][t?"plural":"single"]}},{key:"normalizeUnit",value:function(e){return e?"date"===e.toLowerCase()||bt.includes(e.toLowerCase())?e.toLowerCase():gt[e]||gt[e.toLowerCase()]:null}},{key:"getUnitByName",value:function(e){return t.normalizeUnit(e)||t.normalizeUnit(this.parseTimeUnit(e))}},{key:"getDurationInUnit",value:function(e,t,n,r){return this.diff(e,t,n,r)}},{key:"doesUnitsAlign",value:function(e,t){return e===t||"week"!==t}},{key:"getSmallerUnit",value:function(e){return bt[Ct[this.normalizeUnit(e)]-1]||null}},{key:"getLargerUnit",value:function(e){return bt[Ct[this.normalizeUnit(e)]+1]||null}},{key:"parseDuration",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this,o=t?vt:mt,i=o.exec(e);if(null==e||!i)return null;var a=Ot(i[1]),u=r.parseTimeUnit(i[2])||n;return u?{magnitude:a,unit:u}:null}},{key:"parseTimeUnit",value:function(e){var t=null==e?null:this.durationRegEx.exec(e.toLowerCase());if(!t)return null;for(var n=0;n<bt.length;n++)if(t[n+1])return bt[n]}},{key:"fillDayNames",value:function(){var e=this,t=new Date("2000-01-01T12:00:00"),n=e._dayNames||[],r=e._dayShortNames||[];n.length=0,r.length=0;for(var o=2;o<9;o++)t.setDate(o),n.push(e.format(t,"dddd")),r.push(e.format(t,"ddd"));e._dayNames=n,e._dayShortNames=r}},{key:"getDayNames",value:function(){return this._dayNames}},{key:"getDayName",value:function(e){return this._dayNames[e]}},{key:"getDayShortNames",value:function(){return this._dayShortNames}},{key:"getDayShortName",value:function(e){return this._dayShortNames[e]}},{key:"fillMonthNames",value:function(){var e=this,t=new Date("2000-01-15T12:00:00"),n=e._monthNames||[],r=e._monthShortNames||[];n.length=0,r.length=0;for(var o=0;o<12;o++)t.setMonth(o),n.push(e.format(t,"MMMM")),r.push(e.format(t,"MMM"));e._monthNames=n,e._monthShortNames=r}},{key:"getMonthShortNames",value:function(){return this._monthShortNames}},{key:"getMonthShortName",value:function(e){return this._monthShortNames[e]}},{key:"getMonthNames",value:function(){return this._monthNames}},{key:"getMonthName",value:function(e){return this._monthNames[e]}},{key:"setupDurationRegEx",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this,r={},o="",i=0;i<t.length;i++){var a=t[i],u=e[i];u.canonicalUnitName=bt[i],r[u.single]=r[u.single.toUpperCase()]=r[u.canonicalUnitName]=r[u.canonicalUnitName.toUpperCase()]=u,o+="".concat(i?"|":"","(");for(var c=0;c<a.length;c++)o+="".concat(a[c],"|");if("en-US"!==(nt=n.L("locale")||"en-US"))for(var s=wt[i],l=0;l<s.length;l++)o+="".concat(s[l],"|");o+="".concat(u.single,"|").concat(u.plural,"|").concat(u.canonicalUnitName,")")}n.unitLookup=r,n.durationRegEx=new RegExp("^(?:".concat(o,")$"))}},{key:"applyLocale",value:function(){var e=this,t=e.L("unitAbbreviations"),n=e.unitNames=e.L("unitNames");"unitNames"!==n&&("en-US"===(nt=e.L("locale")||"en-US")?rt=Je:"ordinalSuffix"!==e.L("ordinalSuffix")&&(rt=e.L("ordinalSuffix")),ot={},at={},it={},e.setupDurationRegEx(n,t),e.fillDayNames(),e.fillMonthNames())}},{key:"defaultFormat",set:function(e){this._defaultFormat=e},get:function(){return this._defaultFormat||"YYYY-MM-DDTHH:mm:ssZ"}},{key:"weekStartDay",get:function(){var e=this.L("weekStartDay");return"weekStartDay"!==e?e:0}},{key:"locale",set:function(e){nt=e},get:function(){return nt}}],(r=null)&&qe(n.prototype,r),o&&qe(n,o),t}(ze());function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function jt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}xt._$name="DateHelper",Te.on({locale:"applyLocale",prio:1e3,thisObj:xt}),Te.locale&&xt.applyLocale(),xt._$name="DateHelper";var Pt=/\s+/,Tt=function(e){var t=Rt(e);if("object"===t){if(null===e)return"null";if("[object Date]"===Object.prototype.toString.call(e))return"date"}return t},At="1.01"===1.005.toFixed(2)?null:function(e,t){var n=e.toString().split("."),r=+(n[1]?n.join(".")+"1":n[0]);return e.toFixed.call(r,t)},Mt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isEqual",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e&&null!==t||void 0===e&&void 0!==t||null===t&&null!==e||void 0===t&&void 0!==e)return!1;if(null==e&&null==t)return!0;if(e===t)return!0;var o=Rt(e),i=Rt(t);if(o===i){switch(o){case"number":case"string":case"boolean":return e===t}switch(!0){case e instanceof Date&&t instanceof Date:return e.getTime()===t.getTime();case Array.isArray(e)&&Array.isArray(t):return e.length===t.length&&e.every((function(e,o){return n.isEqual(e,t[o],r)}));case"object"===o&&e.constructor.prototype===t.constructor.prototype:return r?this.isDeeplyEqual(e,t,r):JSON.stringify(e)===JSON.stringify(t)}}return String(e)===String(t)}},{key:"isDeeplyEqual",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;if(!e||!t)return!1;var r=this.keys(e,n.ignore),o=this.keys(t,n.ignore);if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++){var a=r[i],u=o[i];if(a!==u)return!1;var c=e[a],s=t[u];if(!n.shouldEvaluate||!1!==n.shouldEvaluate(a,{value:c,object:e},{value:s,object:t})){if(n.evaluate){var l=n.evaluate(a,{value:c,object:e},{value:s,object:t});if(!1===l)return!1;if(!0===l)continue}if(!this.isEqual(c,s,n))return!1}}return!0}},{key:"isPartial",value:function(e,t){return e=String(e).toLowerCase(),t=String(t).toLowerCase(),-1!=e.indexOf(t)}},{key:"isLessThan",value:function(e,t){return e instanceof Date&&t instanceof Date?xt.isBefore(e,t):e<t}},{key:"isMoreThan",value:function(e,t){return e instanceof Date&&t instanceof Date?xt.isAfter(e,t):e>t}},{key:"fork",value:function(e){var t,n,r;if(e&&e.constructor===Object)for(n in t=Object.setPrototypeOf({},e),e)(r=e[n])&&(r.constructor===Object?t[n]=this.fork(r):r instanceof Array&&(t[n]=r.slice()));else t=e;return t}},{key:"assign",value:function(e){for(var t,n,r=0,o=arguments.length<=1?0:arguments.length-1;r<o;r++)for(n in t=r+1<1||arguments.length<=r+1?void 0:arguments[r+1])e[n]=t[n];return e}},{key:"clone",value:function(e){if(null==e)return e;var t,n,r=e.constructor.name,o=e;if("Date"===r)return new Date(e.getTime());if("Array"===r)for(t=e.length,o=[];t--;)o[t]=this.clone(e[t]);else if("Object"===r)for(n in o={},e)o[n]=this.clone(e[n]);return o}},{key:"merge",value:function(e){for(var t,n,r,o,i=0,a=arguments.length<=1?0:arguments.length-1;i<a;i++)for(n in t=i+1<1||arguments.length<=i+1?void 0:arguments[i+1])(r=t[n])&&r.constructor===Object?(o=e[n])&&"Object"===o.constructor.name?this.merge(o,r):e[n]=this.clone(r):e[n]=r;return e}},{key:"copyProperties",value:function(e,t,n){var r,o;for(o=0;o<n.length;o++)(r=n[o])in t&&(e[r]=t[r]);return e}},{key:"copyPropertiesIf",value:function(e,t,n){var r=!0,o=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;c in e||(e[c]=t[c])}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return e}},{key:"keys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];for(var r in e)t&&t[r]||n.push(r);return n}},{key:"isEmpty",value:function(e){for(var t in e)return!1;return!0}},{key:"getTruthyKeys",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;)e[t[n]]?n++:t.splice(n,1);return t}},{key:"getTruthyValues",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;)e[t[n]]?t[n]=e[t[n++]]:t.splice(n,1);return t}},{key:"createTruthyKeys",value:function(e){"string"==typeof e&&(e=e.split(Pt));var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;u.length&&(t[u]=1)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}},{key:"allKeys",value:function(e){for(var t=[];e;e=Object.getPrototypeOf(e))t.push.apply(t,jt(Object.keys(e)));return t}},{key:"pathExists",value:function(e,t){return t.split(".").every((function(t){return t in e&&(e=e[t],!0)}))}},{key:"getPath",value:function(e,t){return t.split(".").reduce((function(e,t){return(e||{})[t]}),e)}},{key:"setPath",value:function(e,t,n){return t.split(".").reduce((function(e,t,r,o){return r===o.length-1?e[t]=n:(e[t]instanceof Object||(e[t]={}),e[t])}),e),e}},{key:"deletePath",value:function(e,t){t.split(".").reduce((function(e,t,n,r){if(null==e)return null;if(Object.hasOwnProperty.call(e,t)){if(n!==r.length-1)return e[t];delete e[t]}}),e)}},{key:"coerce",value:function(e,t){var n=Tt(e),r=Tt(t),o="string"==typeof e;if(n!==r)switch(r){case"string":return String(e);case"number":return Number(e);case"boolean":return!(o&&(!e||"false"===e||"0"===e))&&Boolean(e);case"null":return!(!o||e&&"null"!==e)&&null;case"undefined":return!(!o||e&&"undefined"!==e)&&void 0;case"date":return o&&isNaN(e)?xt.parse(e):Date(Number(e))}return e}},{key:"wrapProperty",value:function(e,t,n,r){for(var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i={},a=Object.getPrototypeOf(e),u=Object.getOwnPropertyDescriptor(a,t);!u&&a&&o;)(a=Object.getPrototypeOf(a))&&(u=Object.getOwnPropertyDescriptor(a,t));u?(u.set?i.set=function(t){u.set.call(e,t),r&&r.call(e,u.get.call(e))}:i.set=r,u.get?i.get=function(){var t=u.get.call(e);return n&&(t=n.call(e,t)),t}:i.get=n):(i.set=function(n){e["_".concat(t)]=n,r&&r.call(e,n)},i.get=function(){var r=e["_".concat(t)];return n&&(r=n.call(e,r)),r}),Object.defineProperty(e,t,i)}},{key:"getPropertyDescriptor",value:function(e,t){for(var n=null,r=e;!n&&r!==Y;r=Object.getPrototypeOf(r))n=Object.getOwnPropertyDescriptor(r,t);return n}},{key:"cleanupProperties",value:function(e){return Object.entries(e).forEach((function(t){var n=_t(t,2),r=n[0];return null==n[1]&&delete e[r]})),e}},{key:"assertType",value:function(e,t,n){if(null!=e&&Rt(e)!==t)throw new Error('Incorrect type "'.concat(Rt(e),'" for ').concat(n,', expected "').concat(t,'"'))}},{key:"assertNumber",value:function(e,t){this.assertType(e,"number",t)}},{key:"assertBoolean",value:function(e,t){this.assertType(e,"boolean",t)}},{key:"toFixed",value:function(e,t){return At?At(e,t):e.toFixed(t)}},{key:"roundTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.round(e/t)*t}},{key:"round",value:function(e,t){if(null==t)return e;var n=Math.pow(10,t);return Math.round(e*n)/n}}],(n=null)&&Dt(t.prototype,n),r&&Dt(t,r),e}();function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Mt._$name="ObjectHelper";var Nt=function(){function e(){Ft(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"object"===It(n[0])?Object.assign(this,n[0]):this.process(1,n),this[Vt]=!0}var t,n,r;return t=e,(n=[{key:"clone",value:function(){return new e(this)}},{key:"contains",value:function(e){return!("string"!=typeof e||!e)&&Boolean(this[e])}},{key:"toString",value:function(){return this.length?"".concat(this.value," "):""}},{key:"toJSON",value:function(){return this.toString()}},{key:"trim",value:function(){return this.value}},{key:"isEqual",value:function(e){if("string"==typeof e&&(Wt.value=e,e=Wt),this.length===e.length){for(var t=Mt.getTruthyKeys(e),n=0,r=t.length;n<r;n++)if(!this[t[n]])return!1;return!0}return!1}},{key:"process",value:function(e,t){for(var n=t.length,r=0;r<n;r++)if(t[r])for(var o=t[r],i=o.values?Array.from(o.values()):o.item?Array.from(o):o.split(Ht),a=i.length,u=0;u<a;u++)i[u]&&(this[i[u]]=e);this[Vt]=!0}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.process(1,t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.process(0,t)}},{key:"split",value:function(){return Mt.getTruthyKeys(this)}},{key:"forEach",value:function(e){return Mt.getTruthyKeys(this).forEach(e)}},{key:"value",get:function(){var e=this;if(e[Vt]){var t=Mt.getTruthyKeys(e);e[zt]=t.length,e[Bt]=t.join(" "),e[Vt]=!1}return e[Bt]},set:function(e){for(var t=Object.keys(this),n=t.length,r=0;r<n;r++)delete this[t[r]];e?this.process(1,[e]):this[Vt]=!0}},{key:"length",get:function(){return this.value?this[zt]:0}},{key:"isDomClassList",get:function(){return!0}}])&&Lt(t.prototype,n),r&&Lt(t,r),e}(),Ht=/\s+/,Bt=Symbol("value"),zt=Symbol("length"),Vt=Symbol("dirty"),Wt=new Nt;function $t(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Nt._$name="DomClassList";var qt,Xt,Kt,Zt,Jt,Qt,en={align:"t0-t0"},tn=null,nn=0,rn=null,on=/(?:matrix\((?:-?\d*\.?[0-9]*),\s?(?:-?\d*\.?[0-9]*),\s?(?:-?\d*\.?[0-9]*),\s?(?:-?\d*\.?[0-9]*),\s?(-?\d*\.?[0-9]*),\s?(-?\d*\.?[0-9]*))|(?:matrix3d\((?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(?:-?\d*),\s?(-?\d*),\s?(-?\d*))/,an=/translate(3d|X)?\((-?\d*\.?[0-9]*)px(?:,\s?(-?\d*\.?[0-9]*)px)?/,un=/translate(3d|Y)?\((-?\d*\.?[0-9]*)px(?:,\s?(-?\d*\.?[0-9]*)px)?/,cn=/^[^a-z]+|[^\w:.-]+/gi,sn=/\s+/,ln={tag:1,html:1,children:1,tooltip:1,style:1,dataset:1,parent:1,nextSibling:1,ns:1,reference:1,className:1,unmatched:1,_element:1,onlyChildren:1,elementData:1,compareHtml:1,syncOptions:1},fn={length:1,parentRule:1,style:1},dn={width:1,height:1,top:1,left:1,minWidth:1,minHeight:1,maxWidth:1,maxHeight:1,fontSize:1},pn={BUTTON:1,IFRAME:1,EMBED:1,INPUT:1,OBJECT:1,SELECT:1,TEXTAREA:1,HTML:we.isIE11?1:0,BODY:we.isIE11?0:1},hn=window,yn=document,gn={},vn=[],mn=Array.prototype.slice,bn=new Promise((function(e){return e()})),wn=window.devicePixelRatio||1,kn=1===wn?Math.round:function(e){return Math.round(e*wn)/wn},Sn=["font-size","font-size-adjust","font-style","font-weight","font-family","font-kerning","font-stretch","line-height","text-transform","text-decoration","letter-spacing","word-break"],On=function(e){return e._hidden},En=document.documentElement.getRootNode?function(e){return e.getRootNode()}:function(e){for(;e.parentNode;)e=e.parentNode;return e},Cn=function e(t){return t&&(document.body.contains(t)||(qt=En(t).host)&&e(qt))},xn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isFocusable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&(!this.isVisible(e)||ye.fromElement(e,On)))return!1;var n=e.nodeName;return pn[n]||("A"===n||"LINK"===n)&&!!e.href||null!=e.getAttribute("tabIndex")||"true"===e.contentEditable}},{key:"isInView",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=tr.from(e),r=!0,o=n.height,i=n.width;r&&e.parentElement;)e=e.parentElement,r=(n=n.intersect(tr.from(e)))&&(!t||n.height>=o&&n.width>=i);return r}},{key:"isVisible",value:function(e){for(var t,n,r,o=e.ownerDocument;e;e=(r=e).parentNode||r.host){if(e===o)return!0;if(1===e.nodeType&&(n=void 0,"none"===(n=(t=e).ownerDocument.defaultView.getComputedStyle(t)).getPropertyValue("display")||"hidden"===n.getPropertyValue("visibility")))return!1}return!1}},{key:"roundPx",value:function(e){return kn(e)}},{key:"isCustomElement",value:function(e){return e&&e.shadowRoot}},{key:"elementFromPoint",value:function(t,n){var r=document.elementFromPoint(t,n);return e.isCustomElement(r)&&(r=r.shadowRoot.elementFromPoint(t,n)||r),r}},{key:"getId",value:function(e){return e.id||(e.id="b-element-"+ ++nn)}},{key:"getElement",value:function(e){return e instanceof Element?e:yn.querySelector(e)}},{key:"setAttributes",value:function(e,t){var n=this.getElement(e);Object.entries(t).forEach((function(e){var t=Gt(e,2),r=t[0],o=t[1];return n.setAttribute(r,o)}))}},{key:"setLength",value:function(e,t,n){return 1===arguments.length?"number"==typeof e?"".concat(e,"px"):e:(e=this.getElement(e)).style[t]="number"==typeof n?"".concat(n,"px"):n}},{key:"getChild",value:function(e,t){if(we.supportsQueryScope)t=":scope>"+t;else{var n=e.id||(e.id="b-element-"+ ++nn);t="#".concat(n," > ").concat(t)}return e.querySelector(t)}},{key:"hasChild",value:function(t,n){return null!=e.getChild(t,n)}},{key:"children",value:function(e,t){return Array.from(e.querySelectorAll(t))}},{key:"down",value:function(e,t){if(!e)return null;if(e.matches&&e.matches(t))return e;if(we.supportsQueryScope)t=":scope "+t;else{var n=e.id||(e.id="b-element-"+ ++nn);t="#".concat(n," ").concat(t)}return e.querySelector(t)}},{key:"isDescendant",value:function(e,t){return e.contains||(e=e.body),e.contains(t)}},{key:"forEachSelector",value:function(e,t,n){"string"==typeof e&&(n=t,t=e,e=yn),this.children(e,t).forEach(n)}},{key:"forEachChild",value:function(e,t){Array.from(e.children).forEach(t)}},{key:"removeEachSelector",value:function(e,t){this.forEachSelector(e,t,(function(e){return e.remove()}))}},{key:"removeClsGlobally",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.forEach((function(n){return t.forEachSelector(e,"."+n,(function(e){return e.classList.remove(n)}))}))}},{key:"up",value:function(e,t){return e&&e.closest(t)}},{key:"getAncestor",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!1,i=e;for(Array.isArray(t)||(t=[t]);i=i.parentElement;){if(t.includes(i)){o=!0;break}if(r&&i===r)break;n=i}return o?n||e:null}},{key:"getParents",value:function(e){for(var t=[];e.parentElement;)t.push(e.parentElement),e=e.parentElement;return t}},{key:"makeValidId",value:function(e){return null==e?null:String(e).replace(cn,"")}},{key:"createElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;"string"==typeof t.parent&&(t.parent=document.getElementById(t.parent)),t.syncOptions&&t.syncOptions.syncIdField&&(o=t.syncOptions.syncIdField);var i,a=t.parent||t.nextSibling&&t.nextSibling.parentNode;i=t.ns?yn.createElementNS(t.ns,t.tag||"svg"):yn.createElement(t.tag||"div"),null!=t.html&&(t.html instanceof DocumentFragment?i.appendChild(t.html):i.innerHTML=t.html),t.tooltip&&me.attachTooltip(i,t.tooltip),t.style&&this.applyStyle(i,t.style),t.dataset&&Object.assign(i.dataset,t.dataset),a&&a.insertBefore(i,t.nextSibling),t.reference&&((r||(r={}))[t.reference]=i,i.setAttribute("reference",t.reference)),t.elementData&&(i.elementData=t.elementData);var u=t.className;u&&(u.isDomClassList?i.className=u.toString():"object"===Yt(u)?i.className=new Nt(u):i.className=u);for(var c=0,s=Object.keys(t);c<s.length;c++){var l=s[c];ln[l]||(t.ns?i.setAttribute(l,t[l]):i[l]=t[l])}return!0===n?n=[i]:Array.isArray(n)&&n.push(i),t.children&&(o&&(i.syncIdMap={}),t.children.forEach((function(a){if(a)if("string"==typeof a)i.appendChild(document.createTextNode(a));else if(isNaN(a.nodeType)){a.parent=i,!a.ns&&t.ns&&(a.ns=t.ns);var u=e.createElement(a,n,r,o),c=a.dataset&&a.dataset[o];null!=c&&(i.syncIdMap[c]=u),delete a.parent}else i.appendChild(a)}))),i.lastConfig=t,t._element=i,r||n||i}},{key:"createElementFromTemplate",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn,o=r.array,i=r.raw,a=r.fragment;if(e.supportsTemplate){if((Xt||(Xt=yn.createElement("template"))).innerHTML=t,n=Xt.content,a)return n.cloneNode(!0)}else{if((Kt||(Kt=new DOMParser)).parseFromString(t,"text/html"),n=Kt.parseFromString(t,"text/html").body,a){var u=n?n.childNodes:vn;for(n=document.createDocumentFragment();u.length;)n.appendChild(u[0]);return n}n||(n={children:[],childNodes:[]})}return 1!==(n=i?n.childNodes:n.children).length||o?mn.call(n):n[0]}},{key:"insertFirst",value:function(t,n){return n&&n.nodeType!==Node.ELEMENT_NODE&&n.tag&&(n=e.createElement(n)),t.insertBefore(n,t.firstElementChild)}},{key:"insertBefore",value:function(t,n,r){return n&&n.nodeType!==Node.ELEMENT_NODE&&n.tag&&(n=e.createElement(n)),r?t.insertBefore(n,r):e.insertFirst(t,n)}},{key:"append",value:function(t,n){return n&&("string"==typeof n?n=e.createElementFromTemplate(n):n.nodeType!==Node.ELEMENT_NODE&&n.tag&&(n=e.createElement(n))),Array.isArray(n)?n.map((function(e){return t.appendChild(e)})):t.appendChild(n)}},{key:"getTranslateX",value:function(e){var t=e.style.transform,n=an.exec(t);return n?parseInt(n[2]):(n=on.exec(t)||on.exec(this.getStyleValue(this.getElement(e),"transform")))?parseInt(n[1]||n[3]):0}},{key:"getTranslateY",value:function(e){var t=e.style.transform,n=un.exec(t);if(n){var r=parseInt(n["Y"===n[1]?2:3]);return isNaN(r)?0:r}return(n=on.exec(t)||on.exec(this.getStyleValue(this.getElement(e),"transform")))?parseInt(n[2]||n[4]):0}},{key:"getTranslateXY",value:function(e){return[this.getTranslateX(e),this.getTranslateY(e)]}},{key:"getOffsetX",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.getBoundingClientRect().left-t.getBoundingClientRect().left:e.offsetLeft}},{key:"getOffsetY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.getBoundingClientRect().top-t.getBoundingClientRect().top:e.offsetTop}},{key:"getOffsetXY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[this.getOffsetX(e,t),this.getOffsetY(e,t)]}},{key:"focusWithoutScrolling",value:function(t){function n(e){e.forEach((function(e){var t=e.element,n=e.scrollLeft,r=e.scrollTop;t.scrollLeft!==n&&(t.scrollLeft=n),t.scrollTop!==r&&(t.scrollTop=r)}))}if(we.chromeVersion>=64||we.fireFoxVersion>=68)t.focus({preventScroll:!0});else{var r=e.getParents(t).map((function(e){return{element:e,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}));t.focus(),we.isIE11?n(r):setTimeout((function(){return n(r)}),0)}}},{key:"getPageX",value:function(e){return e.getBoundingClientRect().left+hn.pageXOffset}},{key:"getPageY",value:function(e){return e.getBoundingClientRect().top+hn.pageYOffset}},{key:"getExtremalSizePX",value:function(e,t){var n=A.hyphenate(t),r=n.split("-")[1],o=this.getStyleValue(e,n);return o=/%/.test(o)?e.parentElement?parseInt(this.getStyleValue(e.parentElement,r),10):NaN:parseInt(o,10)}},{key:"setTranslateX",value:function(t,n){var r=e.getStyleValue(t,"transform").split(/,\s*/);n=kn(n),r.length>1?(r[r[0].startsWith("matrix3d")?12:4]=n,t.style.transform=r.join(",")):t.style.transform="translateX(".concat(n,"px)")}},{key:"setTranslateY",value:function(t,n){var r=e.getStyleValue(t,"transform").split(/,\s*/);n=kn(n),r.length>1?(r[r[0].startsWith("matrix3d")?13:5]=n,t.style.transform=r.join(",")+")"):t.style.transform="translateY(".concat(n,"px)")}},{key:"setTop",value:function(e,t){this.setLength(e,"top",t)}},{key:"setLeft",value:function(e,t){this.setLength(e,"left",t)}},{key:"setTranslateXY",value:function(t,n,r){if(null==n)return this.setTranslateY(t,r);if(null==r)return this.setTranslateX(t,n);n=kn(n),r=kn(r);var o=e.getStyleValue(t,"transform").split(/,\s*/),i=o[0].startsWith("matrix3d");o.length>1?(o[i?12:4]=n,o[i?13:5]=r,t.style.transform=o.join(",")+")"):t.style.transform="translateX(".concat(n,"px) translateY(").concat(r,"px)")}},{key:"addTranslateX",value:function(t,n){e.setTranslateX(t,e.getTranslateX(t)+n)}},{key:"addTranslateY",value:function(t,n){e.setTranslateY(t,e.getTranslateY(t)+n)}},{key:"addLeft",value:function(t,n){e.setLeft(t,e.getOffsetX(t)+n)}},{key:"addTop",value:function(t,n){e.setTop(t,e.getOffsetY(t)+n)}},{key:"alignTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:en;t=t instanceof tr?t:tr.from(t,!0);var r=this.getTranslateXY(e),o=tr.from(e,!0),i=o.alignTo(Object.assign(n,{target:t}));this.setTranslateXY(e,r[0]+i.x-o.x,r[1]+i.y-o.y)}},{key:"getStyleValue",value:function(e,t,n,r){var o=n?e.style:e.ownerDocument.defaultView.getComputedStyle(e,r);if(Array.isArray(t)){var i={},a=!0,u=!1,c=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var f=s.value;i[f]=o.getPropertyValue(A.hyphenate(f))}}catch(e){u=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(u)throw c}}return i}return o.getPropertyValue(A.hyphenate(t))}},{key:"getEdgeSize",value:function(t,n,r){for(var o="border"===n?"-width":"",i={raw:{}},a=0,u=["top","right","bottom","left"];a<u.length;a++){var c=u[a];r&&!r.includes(c[0])||(i[c]=parseFloat(i.raw[c]=e.getStyleValue(t,"".concat(n,"-").concat(c).concat(o))))}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}},{key:"applyStyle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof t)n?(t.length||e.style.cssText.length)&&(e.style.cssText=t):e.style.cssText+=t;else for(var r in n&&(e.style.cssText=""),t.style&&("string"==typeof t.style?e.style.cssText=t.style:t=Object.assign({},t.style,t)),t)fn[r]||(dn[r]&&"number"==typeof t[r]?e.style[A.hyphenate(r)]=t[r]+"px":e.style[A.hyphenate(r)]=t[r])}},{key:"getCSSText",value:function(e){if("string"==typeof e)return e;var t="";for(var n in e)fn[n]||(t+="".concat(A.hyphenate(n),":").concat(e[n],";"));return t}},{key:"addClasses",value:function(e,t){t.forEach((function(t){return e.classList.add(t)}))}},{key:"removeClasses",value:function(e,t){t.forEach((function(t){return e.classList.remove(t)}))}},{key:"toggleClasses",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Array.isArray(t)||(t=[t]),!0===n?this.addClasses(e,t):!1===n?this.removeClasses(e,t):t.forEach((function(t){return e.classList.toggle(t)}))}},{key:"addTemporaryClass",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;n>0&&(e.classList.add(t),r.setTimeout((function(){return e.classList.remove(t)}),n))}},{key:"getPropertyTransitionDuration",value:function(e,t){var n,r=window.getComputedStyle(e),o=r.transitionProperty.split(", "),i=r.transitionDuration.split(", "),a=o.indexOf(t);return-1!==a&&(n=1e3*parseFloat(i[a])),n}},{key:"highlight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return e instanceof tr?e.highlight():new Promise((function(n){t.setTimeout((function(){e.classList.add("b-fx-highlight"),t.setTimeout((function(){e.classList.remove("b-fx-highlight"),n()}),1e3)}),0)}))}},{key:"resetScrollBarWidth",value:function(){tn=null}},{key:"measureText",value:function(e,t,n,r){var o=this.getMeasureElement(t,r);o[n?"innerHTML":"innerText"]=e;var i=o.clientWidth;return o.className="",i}},{key:"measureSize",value:function(t,n){if(!t)return 0;if("number"==typeof t)return t;if(!t.length)return 0;if(/^\d+(px)?$/.test(t))return parseInt(t);if(n){var r=this.getMeasureElement(n);r.innerHTML="",r.style.width=e.setLength(t);var o=r.offsetWidth;return r.style.width=r.className="",o}return/^\d+em$/.test(t)?14*parseInt(t):isNaN(t)?0:parseInt(t)}},{key:"getMeasureElement",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn.body,r=hn.getComputedStyle(t),o=n.offScreenDiv=n.offScreenDiv||e.createElement({parent:n,style:"position:fixed;top:-10000px;left:-10000px;visibility:hidden;contain:strict",className:"b-measure-element",children:[{style:"white-space:nowrap;display:inline-block;will-change:contents;width:auto;contain:none"}]},!0)[1];return Sn.forEach((function(e){o.style[e]!==r[e]&&(o.style[e]=r[e])})),o.className=t.className,o.parentElement.parentElement!==n&&n.appendChild(o.parentElement),o}},{key:"sync",value:function(e,t){if("string"==typeof e){if(""===e)return void(t.innerHTML="");e=this.createElementFromTemplate(e)}return this.performSync(e,t),t}},{key:"performSync",value:function(e,t){return e.outerHTML!==t.outerHTML&&(this.syncAttributes(e,t),this.syncContent(e,t),this.syncChildren(e,t),!0)}},{key:"getSyncAttributes",value:function(e){for(var t={},n=[],r=0;r<e.attributes.length;r++){var o=e.attributes[r];if(o.specified){var i=o.name.toLowerCase();t[i]=o.value,n.push(i)}}return{attributes:t,names:n}}},{key:"syncAttributes",value:function(e,t){var n=this.getSyncAttributes(e),r=n.attributes,o=n.names,i=this.getSyncAttributes(t),a=i.attributes,u=i.names,c=o.includes("dataset"),s=o.filter((function(e){return!u.includes(e)})),l=u.filter((function(e){return!(o.includes(e)||c&&e.startsWith("data-"))})),f=o.filter((function(e){return u.includes(e)}));if(s.length>0)for(var d=0;d<s.length;d++){var p=s[d];"style"===p?this.applyStyle(t,r.style,!0):"dataset"===p?Object.assign(t.dataset,r.dataset):t.setAttribute(p,r[p])}if(l.length>0)for(var h=0;h<l.length;h++)t.removeAttribute(l[h]);if(f.length>0)for(var y=0;y<f.length;y++){var g=f[y];if("style"===g)this.applyStyle(t,r.style,!0);else if("dataset"===g)Object.assign(t.dataset,r.dataset);else if("class"!==g||!r.class.isDomClassList&&"object"!==Yt(r.class))a[g]!==r[g]&&t.setAttribute(g,r[g]);else{var v=void 0;(v=r.class.isDomClassList?r.class:new Nt(r.class)).isEqual(a.class)||t.setAttribute("class",v)}}}},{key:"syncContent",value:function(e,t){0===e.childElementCount&&(t.innerText=e.innerText)}},{key:"setInnerText",value:function(e,t){var n=e.firstChild;n?n.data=t:e.textContent=t}},{key:"syncChildren",value:function(e,t){for(var n=mn.call(e.childNodes),r=mn.call(t.childNodes);n.length;){var o=n.shift(),i=r.shift();if(o&&o.nodeType!==Node.TEXT_NODE&&o.nodeType!==Node.ELEMENT_NODE)throw new Error("Source node type ".concat(o.nodeType," not supported by DomHelper.sync()"));if(i&&i.nodeType!==Node.TEXT_NODE&&i.nodeType!==Node.ELEMENT_NODE)throw new Error("Target node type ".concat(i.nodeType," not supported by DomHelper.sync()"));if(i)if(o.nodeType===i.nodeType)o.nodeType===Node.TEXT_NODE?i.data=o.data:o.tagName===i.tagName?this.performSync(o,i):(t.insertBefore(o,i),i.remove());else{if(o.nodeType!==Node.TEXT_NODE||i.nodeType!==Node.ELEMENT_NODE)throw new Error("Currently no support for transforming nodeType");t.innerText=o.data.trim()}else t.appendChild(o)}r.forEach((function(e){e.remove()}))}},{key:"syncClassList",value:function(e,t){var n,r=e.classList,o="string"==typeof t,i=o?t.trim().split(sn):Array.isArray(t)?t:Mt.getTruthyKeys(t),a=i.length,u=r.length!==a;for(n=0;!u&&n<a;n++)u=!r.contains(i[n]);u&&(e.className=o?t:i.join(" "))}},{key:"setTheme",value:function(t){t=t.toLowerCase();var n=this.themeInfo.name.toLowerCase(),r=document.head.querySelector("#bryntum-theme")||document.head.querySelector('[href$="'.concat(n,'.css"]'));if(!r||!r.href.includes("".concat(n,".css")))throw new Error("Theme link for ".concat(n," not found"));return r.href.includes(t)?bn:new Promise((function(n,o){var i=document.createElement("link"),a=r.nextSibling,u=e.themeInfo.name.toLowerCase(),c={theme:t,prev:u};i.rel="stylesheet",i.id="bryntum-theme",i.addEventListener("load",(function(){rn=null,r.remove(),window.bryntum.GlobalEvents.trigger("theme",c),n(c)})),i.addEventListener("error",(function(e){o(e)})),i.href=r.href.replace(u,t),a.parentNode.insertBefore(i,a)}))}},{key:"isOrphaned",value:function(e){return e!==document.body&&e!==document.documentElement&&e.nodeType===Node.ELEMENT_NODE&&null===e.offsetParent}},{key:"activeElement",get:function(){for(var e=document.activeElement;e.shadowRoot;)e=e.shadowRoot.activeElement;return e}},{key:"scrollBarWidth",get:function(){if(null===tn&&yn.body){var t=e.createElement({parent:yn.body,style:"position:absolute;top:-999px;width:100px;height:100px;overflow:scroll"});tn=t.offsetWidth-t.clientWidth,t.remove()}return tn}},{key:"themeInfo",get:function(){if(!rn){var e=this.createElement({parent:document.body,className:"b-theme-info"}),t=this.getStyleValue(e,"content",!1,":before");if(t)try{rn=JSON.parse(t.replace(/^["']|["']$|\\/g,""))}catch(e){rn=null}e.remove()}return rn}}],(n=null)&&Ut(t.prototype,n),r&&Ut(t,r),e}(),_n=function(){return xn.isTouchEvent=!1},jn=function(){xn.isTouchEvent=!0,clearTimeout(Zt),Zt=setTimeout(_n,400)};if(yn.addEventListener("touchstart",jn,!0),yn.addEventListener("touchend",jn,!0),xn.supportsTemplate="content"in yn.createElement("template"),!("children"in Node.prototype)){var Dn=function(e){return 1===e.nodeType};Object.defineProperty(Node.prototype,"children",{get:function(){return Array.prototype.filter.call(this.childNodes,Dn)}})}(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),hn.Element&&!Element.prototype.closest?Node.prototype.closest=Element.prototype.closest=function(e){var t=this;if(!yn.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}:Node.prototype.closest=function(e){return this.parentNode.closest(e)},[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){Object.prototype.hasOwnProperty.call(e,"remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),SVGElement.prototype.contains||(SVGElement.prototype.contains=function(e){do{if(this===e)return!0;e=e.parentNode}while(e);return!1}),"function"!=typeof hn.CustomEvent)&&(hn.CustomEvent=Qt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0};return(Jt=yn.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),Jt},Qt.prototype=hn.Event.prototype,hn.MouseEvent=Qt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0};return(Jt=yn.createEvent("MouseEvents")).initMouseEvent(e,t.bubbles,t.cancelable,yn.defaultView||hn,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,document),Jt},Qt.prototype=hn.Event.prototype,hn.KeyboardEvent=Qt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0},n="".concat(t.shiftKey?"Shift ":"").concat(t.ctrlKey?"Control":"");return(Jt=yn.createEvent("KeyboardEvent")).initKeyboardEvent(e,t.bubbles,t.cancelable,yn.defaultView||hn,t.key,t.location,n,!1,""),Jt},Qt.prototype=hn.Event.prototype);if(!Object.getOwnPropertyDescriptor(SVGElement.prototype,"dataset")||!Object.getOwnPropertyDescriptor(SVGElement.prototype,"dataset").get){var Rn={enumerable:!0,get:function(){var e,t,n,r,o,i={},a=this.attributes,u=a.length,c=function(e){return e.charAt(1).toUpperCase()},s=function(){return this},l=function(e,t){return void 0!==t?this.setAttribute(e,t):this.removeAttribute(e)};for(e=0;e<u;e++)(o=a[e])&&o.name&&/^data-\w[\w-]*$/.test(o.name)&&(t=o.value,r=(n=o.name).substr(5).replace(/-./g,c),Object.defineProperty(i,r,{enumerable:this.enumerable,get:s.bind(t||""),set:l.bind(this,n)}));return i}};Object.defineProperty(SVGElement.prototype,"dataset",Rn)}var Pn=DOMTokenList.prototype.add,Tn=DOMTokenList.prototype.remove;function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t,n){return t&&Mn(e.prototype,t),n&&Mn(e,n),e}DOMTokenList.prototype.add=function(e){Array.isArray(e)?Pn.call.apply(Pn,[this].concat($t(e))):Pn.call.apply(Pn,[this].concat(Array.prototype.slice.call(arguments)))},DOMTokenList.prototype.remove=function(e){Array.isArray(e)?Tn.call.apply(Tn,[this].concat($t(e))):Tn.call.apply(Tn,[this].concat(Array.prototype.slice.call(arguments)))},xn._$name="DomHelper";var Fn=["border-top-width","border-right-width","border-bottom-width","border-left-width"],Ln=["padding-top","padding-right","padding-bottom","padding-left"],Nn="border-top-width",Hn="border-right-width",Bn="border-bottom-width",zn="border-left-width",Vn="padding-top",Wn="padding-right",$n="padding-bottom",Yn="padding-left",Gn=Object.freeze({x:0,y:0}),Un=/^([trblc])(\d*)-([trblc])(\d*)$/i,qn=/^([trblc])(\d*)$/i,Xn=["top","right","bottom","left"],Kn={t:0,r:1,b:2,l:3},Zn=["b-t","l-r","t-b","r-l"],Jn=Object.freeze([0,0]),Qn=["width","height"];function er(e){return"".concat(Xn[(Kn[e.myEdge]+2)%4][0]).concat(e.myOffset,"-").concat(Xn[(Kn[e.targetEdge]+2)%4][0]).concat(e.targetOffset)}var tr=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._x=t,this._y=n,this._width=r,this._height=o}return In(e,[{key:"round",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.devicePixelRatio/2||1,t=this;return t._x=Mt.roundTo(t._x,e),t._y=Mt.roundTo(t._y,e),t._width=Mt.roundTo(t._width,e),t._height=Mt.roundTo(t._height,e),t}},{key:"$name",get:function(){return this.constructor.$name}}],[{key:"from",value:function(t,n,r){if(t instanceof e)return t;if(void 0===r&&"boolean"==typeof n&&(r=n,n=null),n){var o=n,i=o.scrollLeft,a=o.scrollTop;(we.isEdge||we.isSafari)&&n===document.body&&(i=a=0),n=e.from(n).translate(-i,-a)}else n=Gn;var u=t===document||t===window,c=u?new e(0,0,window.innerWidth,window.innerHeight):t.getBoundingClientRect(),s=r||u?[0,0]:[window.pageXOffset,window.pageYOffset];return new e(c.left+s[0]-n.x,c.top+s[1]-n.y,c.width,c.height)}},{key:"inner",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.from(e,t,n);if(document.body.contains(e)){var o=xn.getStyleValue(e,Fn);r.x+=parseInt(o[zn]),r.y+=parseInt(o[Nn]),r.right-=parseInt(o[Hn]),r.bottom-=parseInt(o[Bn])}return r}},{key:"content",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.from(e,t,n);if(document.body.contains(e)){var o=xn.getStyleValue(e,Fn),i=xn.getStyleValue(e,Ln);r.x+=parseInt(o[zn])+parseInt(i[Yn]),r.y+=parseInt(o[Nn])+parseInt(i[Vn]),r.right-=parseInt(o[Hn])+parseInt(i[Wn]),r.bottom-=parseInt(o[Bn])+parseInt(i[$n])}return r}},{key:"client",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.content(e,t,r),i=xn.scrollBarWidth;return i&&(e.scrollHeight>e.clientHeight&&"hidden"!==xn.getStyleValue(e,"overflow-y")&&(n=parseInt(xn.getStyleValue(e,"padding-right")),o.right+=n-Math.max(n,i)),e.scrollWidth>e.clientWidth&&"hidden"!==xn.getStyleValue(e,"overflow-x")&&(n=parseInt(xn.getStyleValue(e,"padding-bottom")),o.bottom+=n-Math.max(n,i))),o}},{key:"union",value:function(){var t,n=arguments.length<=0?void 0:arguments[0],r=n.x,o=n.y,i=n.right,a=n.bottom;if(arguments.length>1)for(var u=1;u<arguments.length;u++)(t=u<0||arguments.length<=u?void 0:arguments[u]).x<r&&(r=t.x),t.y<o&&(o=t.y),t.right>i&&(i=t.right),t.bottom>a&&(a=t.bottom);return new e(r,o,i-r,a-o)}},{key:"$name",get:function(){return this.hasOwnProperty("_$name")&&this._$name||this.name}}]),In(e,[{key:"clone",value:function(){var t=this,n=new e(t.x,t.y,t.width,t.height);return n.minHeight=t.minHeight,n.minWidth=t.minWidth,n}},{key:"contains",value:function(t){return t instanceof e&&(t._x>=this._x&&t._y>=this._y&&t.right<=this.right&&t.bottom<=this.bottom)}},{key:"intersect",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this,i=Math.max(o.y,t.y),a=Math.min(o.right,t.right),u=Math.min(o.bottom,t.bottom),c=Math.max(o.x,t.x),s=r?u>=i&&a>=c:u>i&&a>c;return!!s&&(!!n||new e(c,i,a-c,u-i))}},{key:"equals",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n?function(e){return Math.round(e)}:function(e){return e};return t instanceof e&&r(t.x)===r(this.x)&&r(t.y)===r(this.y)&&r(t.width)===r(this.width)&&r(t.height)===r(this.height)}},{key:"translate",value:function(e,t){return this._x+=e||0,this._y+=t||0,this}},{key:"moveTo",value:function(e,t){return null!=e&&(this._x=e),null!=t&&(this._y=t),this}},{key:"getDelta",value:function(e){return[e.x-this.x,e.y-this.y]}},{key:"adjust",value:function(e,t,n,r){var o=this;return o.x+=e,o.y+=t,o.width+=n,o.height+=r,o}},{key:"inflate",value:function(e){return this.adjust(-e,-e,e,e)}},{key:"constrainTo",value:function(e,t){var n=this,r=n.height,o=n.y,i=n.minWidth||n.width,a=n.minHeight||n.height;if(n.height>=e.height){if(t&&a>e.height)return!1;n._y=e.y,n.height=e.height}if(n.width>=e.width){if(t&&i>e.width)return n.y=o,n.height=r,!1;n._x=e.x,n.width=e.width}var u=n.bottom-e.bottom;return u>0&&n.translate(0,-u),(u=n.right-e.right)>0&&n.translate(-u),(u=e.y-n.y)>0&&n.translate(0,u),(u=e.x-n.x)>0&&n.translate(u),n}},{key:"alignTo",value:function(t){var n,r,o,i,a=this.clone(),u=t.target,c=t.constrainTo;!u||u instanceof e||(u=e.from(u.element?u.element:u)),!c||c instanceof e||(i=c===window||c===document,c=e.from(c.element?c.element:c,null,t.ignorePageScroll));var s,l=this,f=null==(s=t.offset)?Jn:"number"==typeof s?[s,s]:s,d=t.align,p=t.axisLock,h=t.anchorSize,y=t.anchorPosition,g=function(e){var t=Un.exec(e),n=parseInt(t[2]||50),r=parseInt(t[4]||50);return{myAlignmentPoint:t[1]+n,myEdge:t[1],myOffset:n,targetAlignmentPoint:t[3]+r,targetEdge:t[3],targetOffset:r,startZone:Kn[t[3]]}}(d),v=t.position||(u&&"Point"===u.$name?u:null),m=c&&c.clone(),b=[],w=[{zone:r=g.startZone,align:d}],k=t.matchSize&&Qn[1&g.startZone],S=l[k];if(k&&p&&(a[k]=u[k]),c&&a.constrainTo(c),c&&null!=g.startZone)if(p)w.push({zone:r=(r+2)%4,align:er(g)}),"flexible"===p&&(w.push({zone:r=(g.startZone+1)%4,align:Zn[r]}),w.push({zone:r=(r+2)%4,align:Zn[r]}));else for(var O=1;O<4;O++)w.push({zone:r=(r+1)%4,align:Zn[r]});if(y){var E,C=1&g.startZone?"y":"x";An(E={},C,y[C]),An(E,"edge",Xn[(g.startZone+2)%4]),n=E}if(m&&u&&(m.adjust(-u.width,-u.height,u.width,u.height),u.constrainTo(m)),a.minWidth=l.minWidth,a.minHeight=l.minHeight,v)a.moveTo(v.x,v.y),c&&a.constrainTo(c);else{var x=h?[h[1]+f[0],h[1]+f[1]]:f,_=u.getAlignmentPoint(g.targetAlignmentPoint,x),j=a.getAlignmentPoint(g.myAlignmentPoint);if(a.translate(_[0]-j[0],_[1]-j[1]),a.intersect(u,!0))c&&a.constrainTo(c),o=g.startZone;else if(c&&!c.contains(a)){var D,R,P=a.clone(),T=[];n=null,b[0]=D=c.clone(),D.bottom=u.y-x[1],b[1]=D=c.clone(),D.x=u.right+x[0],b[2]=D=c.clone(),D.y=u.bottom+x[1],b[3]=D=c.clone(),D.right=u.x-x[0];for(var A=0;A<w.length;A++){if(k&&2==A&&(a[k]=S),D=b[o=w[A].zone],(a=a.alignTo({target:u,offsets:x,align:w[A].align})).constrainTo(D,!0)&&(T.push({result:a,zone:o}),!R||a.width<l.width||a.height<l.height)){a.align=w[A].align;break}if(!R||D.area>R.area){var M=a.clone();switch(o){case 0:M.moveTo(null,D.bottom-M.height);break;case 1:M.moveTo(D.left);break;case 2:M.moveTo(null,D.top);break;case 3:M.moveTo(D.right-M.width)}R={area:D.area,result:M,zone:o}}}T.length?(T.length>1&&!p&&T.sort((function(e,t){return Math.sqrt(Math.pow(P.x-e.result.x,2)+Math.pow(P.y-e.result.y,2))-Math.sqrt(Math.pow(P.x-t.result.x,2)+Math.pow(P.y-t.result.y,2))})),a=T[0].result,o=T[0].zone):(a=R.result,o=R.zone,i&&a.constrainTo(c))}else o=g.startZone;if(a.zone=o,h){if(!n){var I,F=1&o,L=F?"y":"x",N=F?"bottom":"right",H=Math.max(u[L],a[L]),B=H+(Math.min(u[N],a[N])-H)/2-h[0]/2,z=B+h[0];z>a[N]&&(B-=z-a[N]),B<a[L]&&(B+=a[L]-B),An(I={},L,B-a[L]),An(I,"edge",Xn[(o+2)%4]),n=I}a.anchor=n}}return a}},{key:"getAlignmentPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jn,n=this,r=qn.exec(e),o=r[1].toLowerCase(),i=Math.min(Math.max(parseInt(r[2]||50),0),100)/100;switch(o){case"t":return[n.x+n.width*i,n.y-t[1]];case"r":return[n.right+t[0],n.y+n.height*i];case"b":return[n.x+n.width*i,n.bottom+t[1]];case"l":return[n.x-t[0],n.y+n.height*i];case"c":var a=n.center;return[a.x+t[0],a.y+t[1]]}}},{key:"highlight",value:function(){var e=xn.createElement({parent:document.body,style:"position:absolute;z-index:9999999;pointer-events:none;\n                            left:".concat(this.x,"px;top:").concat(this.y,"px;width:").concat(this.width,"px;height:").concat(this.height,"px")});return xn.highlight(e).then((function(){return e.remove()}))}},{key:"center",get:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2)}},{key:"x",set:function(e){var t=e-this._x;this._x=e,this._width-=t},get:function(){return this._x}},{key:"left",set:function(e){this.x=e},get:function(){return this.x}},{key:"top",set:function(e){this.y=e},get:function(){return this.y}},{key:"y",set:function(e){var t=e-this._y;this._y=e,this._height-=t},get:function(){return this._y}},{key:"width",set:function(e){this._width=e},get:function(){return this._width}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}},{key:"right",set:function(e){this._width=e-this._x},get:function(){return this._x+this._width}},{key:"bottom",set:function(e){this._height=e-this._y},get:function(){return this._y+this._height}},{key:"area",get:function(){return this.width*this.height}},{key:"minWidth",set:function(e){var t=this;isNaN(e)?t._minWidth=null:(t._minWidth=Number(e),t.width=Math.max(t.width,t._minWidth))},get:function(){return this._minWidth}},{key:"minHeight",set:function(e){var t=this;isNaN(e)?t._minHeight=null:(t._minHeight=Number(e),t.height=Math.max(t.height,t._minHeight))},get:function(){return this._minHeight}}]),e}();function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){return!t||"object"!==nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ar(e,t,n){return t&&ir(e.prototype,t),n&&ir(e,n),e}function ur(e,t){return(ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}tr._$name="Rectangle";var cr=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rr(this,or(t).call(this,e,n,0,0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ur(e,t)}(t,e),ar(t,null,[{key:"from",value:function(e){var n=e.changedTouches;return new t(n?n[0].screenX:e.screenX,n?n[0].screenY:e.pageY)}}]),ar(t,[{key:"constrain",value:function(e){return this.x=Math.min(Math.max(this.x,e.x),e.right-1),this.y=Math.min(Math.max(this.y,e.y),e.bottom-1),this}},{key:"toArray",value:function(){return[this.x,this.y]}}]),t}(tr);function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}cr.__proto__.Point=cr,cr._$name="Point";var lr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"curry",value:function(e){return function t(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.length>=e.length?e.apply(this,r):function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.apply(this,r.concat(n))}}}},{key:"bindAll",value:function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=e[t].bind(e))}},{key:"createInterceptor",value:function(e,t,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return!1!==t.call.apply(t,[n].concat(o))&&e.call.apply(e,[n].concat(o))}}},{key:"createSequence",value:function(e,t,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=e.call.apply(e,[n].concat(o)),u=t.call.apply(t,[n].concat(o));return void 0===u?a:u}}},{key:"createThrottled",value:function(e,t,n,r,o){var i,a,u,c=0,s=function(){a=0,c=performance.now(),i.push.apply(i,r),e.apply(n,i)};return(u=function(){for(var e=performance.now()-c,u=arguments.length,l=new Array(u),f=0;f<u;f++)l[f]=arguments[f];i=l,e>=t?(clearTimeout(a),s()):(a||(a=setTimeout(s,t-e)),o&&(i.push.apply(i,r),o.apply(n,i)))}).cancel=function(){return clearTimeout(a)},u}},{key:"createBuffered",value:function(e,t,n,r){var o,i,a,u=function(){i=0,o.push.apply(o,r),e.apply(n,o)};return(a=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];o=n,i&&clearTimeout(i),i=setTimeout(u,t)}).cancel=function(){return clearTimeout(i)},a}},{key:"returnTrue",value:function(){return!0}},{key:"animate",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"linear",i=!1,a=new Promise((function(a){var u=performance.now();!function c(){var s=Math.min((performance.now()-u)/e,1),l=n&&n.setTimeout?n:window;i||!1===t.call(n,r.easingFunctions[o](s))&&a(),i||1===s?l.requestAnimationFrame((function(){return a()})):l.requestAnimationFrame(c)}()}));return a.cancel=function(){return i=!0,!1},a}}],(n=null)&&sr(t.prototype,n),r&&sr(t,r),e}(),fr=1.70158,dr=7.5625,pr=1.525,hr=2/2.75,yr=2.25/2.75,gr=1/2.75,vr=1.5/2.75,mr=2.5/2.75,br=2.625/2.75;function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}lr.easingFunctions={linear:function(e){return e},easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<gr?dr*e*e:e<hr?dr*(e-=vr)*e+.75:e<mr?dr*(e-=yr)*e+.9375:dr*(e-=br)*e+.984375},easeInBack:function(e){return e*e*((fr+1)*e-fr)},easeOutBack:function(e){return(e-=1)*e*((fr+1)*e+fr)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=pr))*e-t)*.5:.5*((e-=2)*e*((1+(t*=pr))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=pr))*e-t)*.5:.5*((e-=2)*e*((1+(t*=pr))*e+t)+2)},swingFrom:function(e){return e*e*((fr+1)*e-fr)},swingTo:function(e){return(e-=1)*e*((fr+1)*e+fr)+1},bounce:function(e){return e<gr?dr*e*e:e<hr?dr*(e-=vr)*e+.75:e<mr?dr*(e-=yr)*e+.9375:dr*(e-=br)*e+.984375},bouncePast:function(e){return e<gr?dr*e*e:e<hr?2-(dr*(e-=vr)*e+.75):e<mr?2-(dr*(e-=yr)*e+.9375):2-(dr*(e-=br)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}},lr._$name="FunctionHelper";var Sr=["clientX","clientY","pageX","pageY","screenX","screenY"],Or={element:1,thisObj:1,once:1,delegate:1,delay:1,capture:1,passive:1,throttled:1,autoDetach:1,expires:1},Er={get:function(){return!0}},Cr={Spacebar:"Space",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown"},xr=function(e){var t=e.type;if(t.startsWith("key")){var n=Cr[e.key];n&&Object.defineProperty(e,"key",{get:function(){return n}})," "!==e.key||e.code||Object.defineProperty(e,"code",{get:function(){return"Space"}})}if(e.metaKey&&!e.ctrlKey&&Object.defineProperty(e,"ctrlKey",Er),e.target&&e.target.shadowRoot&&e.composedPath&&!we.isIE11&&!we.isEdge){var r=e.composedPath()[0],o=e.target;e.target!==r&&(Object.defineProperty(e,"target",{get:function(){return r}}),Object.defineProperty(e,"originalTarget",{get:function(){return o}}))}if(we.isChrome&&e.target){var i=e.target,a=e.offsetX,u=e.offsetY,c=i.offsetWidth,s=i.offsetHeight,l=Math.min(Math.max(a,0),c-1),f=Math.min(Math.max(u,0),s-1);!Object.getOwnPropertyDescriptor(e,"offsetX")&&(a<0||a>=c)&&Object.defineProperty(e,"offsetX",{get:function(){return l}}),!Object.getOwnPropertyDescriptor(e,"offsetY")&&(u<0||u>=s)&&Object.defineProperty(e,"offsetY",{get:function(){return f}})}if(e.target&&9===e.target.nodeType&&"clientX"in e){var d=xn.elementFromPoint(e.clientX,e.clientY);Object.defineProperty(e,"target",{get:function(){return d}})}if(e.target&&3===e.target.nodeType){var p=e.target.parentElement;Object.defineProperty(e,"target",{get:function(){return p}})}if(e.relatedTarget&&3===e.relatedTarget.nodeType){var h=e.target.parentElement;Object.defineProperty(e,"relatedTarget",{get:function(){return h}})}return t.startsWith("touch")&&e.touches.length&&_r.normalizeEvent(e),e},_r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"normalizeEvent",value:function(e){return Mt.copyPropertiesIf(e,e.touches[0]||e.changedTouches[0],Sr)}},{key:"getXY",value:function(e){return e.touches&&(e=e.touches[0]),[e.clientX,e.clientY]}},{key:"getDistanceBetween",value:function(e,t){var n=this.getXY(e),r=this.getXY(t);return Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2))}},{key:"getPagePoint",value:function(e){return new cr(e.pageX,e.pageY)}},{key:"getClientPoint",value:function(e){return new cr(e.clientX,e.clientY)}},{key:"addListener",value:function(e,t,n,r){var o,i,a;return r=e.nodeType?"string"==typeof t?Object.assign((a=n,(i=t)in(o={element:e})?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,o),r):Object.assign({element:e},t):e,this.on(r)}},{key:"on",value:function(e){var t,n,r=e.element,o=e.thisObj,i=[],a=Mt.allKeys(e),u=a.length;for(t=0;t<u;t++)if(n=a[t],!Or[n]){var c=e[n];"object"!==wr(c)&&(c={handler:c});var s=c.element||r;we.isTouchDevice&&!we.isAndroid&&"contextmenu"===n&&i.push(this.addElementListener(s,"touchstart",{handler:this.createContextMenuWrapper(c.handler,c.thisObj||o)},e)),i.push(this.addElementListener(s,n,c,e))}var l=function(){for(u=i.length,t=0;t<u;t++){var e=i[t];e[0].removeEventListener(e[1],e[2],e[3])}i.length=0};return o&&!1!==e.autoDetach&&(o.doDestroy=lr.createInterceptor(o.doDestroy,l,o)),l}},{key:"addElementListener",value:function(e,t,n,r){var o=this.createHandler(e,t,n,r),i="passive"in n,a=n.expires||r.expires,u=r.thisObj,c=n.capture||r.capture;if((i||"passive"in r)&&we.supportsPassive&&(c={capture:!!c,passive:i?n.passive:r.passive}),e.addEventListener(t,o,c),a){var s=u&&u.setTimeout?u:window;("number"==typeof a?s.setTimeout:s.requestAnimationFrame).call(s,(function(){return e.removeEventListener(t,o,c)}),a)}return[e,t,o,c]}},{key:"createHandler",value:function(e,t,n,r){var o=this,i=n.delay||r.delay,a=n.throttled||r.throttled,u=n.once||r.once,c=n.thisObj||r.thisObj,s=n.capture||r.capture,l=n.delegate||r.delegate,f=n.handler,d=function(e){var t;if(!(o.playingDemo&&e.isTrusted||c&&c.isDestroyed)){if(xr(e),l){var n=e.target instanceof HTMLElement&&e.target.closest(l);if(!n)return;Object.defineProperty(e,"currentTarget",{get:function(){return n},configurable:!0})}"string"==typeof f&&(f=c[f]);for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];(t=f).call.apply(t,[c,e].concat(i))}};if(null!=i){var p=d,h=c&&c.setTimeout?c:window;d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.setTimeout((function(){p.apply(void 0,t)}),i)}}if(null!=a){var y,g=a;a.buffer&&(y=function(e){return a.alt.call(o,xr(e))},g=a.buffer),d=c&&c.isDelayable?c.throttle(d,g,c,null,y):lr.createThrottled(d,g,c,null,y)}if(u){var v=d;d=function(){e.removeEventListener(t,d,s),v.apply(void 0,arguments)}}return n.thisObj&&!1!==n.autoDetach&&(c.doDestroy=lr.createInterceptor(c.doDestroy,(function(){return e.removeEventListener(t,d)}),c)),d}},{key:"onTransitionEnd",value:function(t){var n,r=t.element,o=t.property,i=t.handler,a=t.timeout,u=t.thisObj,c=void 0===u?window:u,s=e.on({element:r,thisObj:c,transitionend:function(e){e.propertyName===o&&(n&&(c.isDelayable?c.clearTimeout(n):clearTimeout(n),n=null),s(),i.call(c))}});null==a&&(a=xn.getPropertyTransitionDuration(r,o)),null!=a&&(n=c.isDelayable?c.setTimeout((function(){s(),i.call(c)}),a):setTimeout((function(){s(),i.call(c)}),a))}},{key:"createContextMenuWrapper",value:function(e,t){var n=this;return function(r){if(1===r.touches.length)var o=r.touches[0],i=setTimeout((function(){u();var i=new MouseEvent("contextmenu",o);Object.defineProperty(i,"target",{get:function(){return o.target}}),"string"==typeof e&&(e=t[e]),i.browserEvent=r,e.call(t,i),n.contextMenuTouchId=o.identifier}),n.longPressTime),a=function(){n.contextMenuTouchId=null,u(),clearTimeout(i)},u=n.on({element:document,touchmove:a,touchend:a,pointermove:a,pointerup:a,capture:!0})}}},{key:"createDblClickWrapper",value:function(e,t,n){var r,o,i,a=this;return function(){o||(o=a.on({element:e,touchstart:function(e){r=e.changedTouches[0].identifier,e.preventDefault()},touchend:function(e){if(e.changedTouches[0].identifier===r){e.preventDefault(),clearTimeout(i),r=o=null;var a=tr.from(e.changedTouches[0].target,null,!0),u=e.changedTouches[0].pageX-a.x,c=e.changedTouches[0].pageY-a.y,s=Object.assign({browserEvent:e},e),l=new MouseEvent("dblclick",s);Object.defineProperty(l,"target",{get:function(){return e.target}}),Object.defineProperty(l,"offsetX",{get:function(){return u}}),Object.defineProperty(l,"offsetY",{get:function(){return c}}),"string"==typeof t&&(t=n[t]),t.call(n,l)}},once:!0}),i=setTimeout((function(){o(),r=o=null}),a.dblClickTime))}}},{key:"lockComposedPath",value:function(e){var t;e.composedPath&&(e.composedPath=(t=e.composedPath(),function(){return t}))}}],(n=null)&&kr(t.prototype,n),r&&kr(t,r),e}();function jr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}_r.longPressTime=500,_r.dblClickTime=300,_r.on({element:document,mousedown:function(){xn.isTouchEvent||(xn.usingKeyboard=!1,document.body.classList.remove("b-using-keyboard"))},touchmove:function(){xn.usingKeyboard=!1,document.body.classList.remove("b-using-keyboard")},keydown:function(){xn.usingKeyboard=!0,document.body.classList.add("b-using-keyboard")}}),we.isTouchDevice&&_r.on({element:document,touchmove:function(e){e.target.closest(".b-dragging")&&e.preventDefault()},passive:!1,capture:!0}),_r._$name="EventHelper";var Rr=null,Pr=[],Tr=function(e){return 1===e.nodeType&&"absolute"===e.ownerDocument.defaultView.getComputedStyle(e).getPropertyValue("position")},Ar=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"addResizeListener",value:function(e,t){var n=this;if(e!==document&&e!==window||(e=document.body),e.classList.contains("b-resize-monitored")||(e.classList.add("b-resize-monitored"),e._bResizemonitor={handlers:[]}),e===document.body)n.hasWindowResizeListener||(window.addEventListener("resize",n.onWindowResize),n.hasWindowResizeListener=!0);else if(window.ResizeObserver)n.resizeObserver||(n.resizeObserver=new ResizeObserver(n.onElementResize)),n.resizeObserver.observe(e);else{var r=jr(xn.createElement({parent:e,className:"b-resize-monitors",children:[{className:"b-resize-monitor-expand"},{className:"b-resize-monitor-shrink"}]},!0),3),o=r[0],i=r[1],a=r[2];i.scrollLeft=i.scrollTop=a.scrollLeft=a.scrollTop=1e6,i.addEventListener("scroll",n.onSizeMonitorScroll,!0),a.addEventListener("scroll",n.onSizeMonitorScroll,!0),(t.targetMutationMonitor=new MutationObserver((function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value;"childList"===c.type&&(t.push.apply(t,c.removedNodes),t.push.apply(t,c.addedNodes))}}catch(e){r=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}t.length>0&&t.every(Tr)||i.dispatchEvent(new CustomEvent("scroll",{bubbles:!1}))}))).observe(e,{childList:!0,subtree:!0}),t.monitorElement=o}e._bResizemonitor.handlers.push(t)}},{key:"removeResizeListener",value:function(e,t){if(e){e!==document&&e!==window||(e=document.body);var n=e._bResizemonitor,r=0;n&&n.handlers&&(U.remove(n.handlers,t),r=n.handlers.length),r||(e.classList.remove("b-resize-monitored"),this.resizeObserver?this.resizeObserver.unobserve(e):(t.monitorElement&&(t.monitorElement.remove(),t.monitorElement=null),t.targetMutationMonitor&&t.targetMutationMonitor.disconnect()))}}},{key:"onElementResize",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,u=a.target,c=u._bResizemonitor,s=a.contentRect||u.getBoundingClientRect();if(u.offsetParent&&(!c.rectangle||s.width!==c.rectangle.width||s.height!==c.rectangle.height)){var l=c.rectangle;c.rectangle=s;var f=!0,d=!1,p=void 0;try{for(var h,y=c.handlers[Symbol.iterator]();!(f=(h=y.next()).done);f=!0)(0,h.value)(u,l,s)}catch(e){d=!0,p=e}finally{try{f||null==y.return||y.return()}finally{if(d)throw p}}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"onSizeMonitorScroll",value:function(t){if(document.body.contains(t.target)){t.stopImmediatePropagation();var n=t.target.parentNode,r=n.parentNode,o=r._bResizemonitor,i=r.getBoundingClientRect();o.rectangle&&i.width===o.rectangle.width&&i.height===o.rectangle.height||(Pr.push([r,o.rectangle,i]),o.rectangle=i,Rr||(Rr=requestAnimationFrame(e.fireResizeEvents))),n.firstChild.scrollLeft=n.firstChild.scrollTop=n.childNodes[1].scrollTop=n.childNodes[1].scrollLeft=1e6}}},{key:"onWindowResize",value:function(e){var t=document.body,n=t._bResizemonitor,r=n.rectangle;n.rectangle=document.documentElement.getBoundingClientRect();var o=!0,i=!1,a=void 0;try{for(var u,c=n.handlers[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)(0,u.value)(t,r,n.rectangle)}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}},{key:"fireResizeEvents",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=Pr[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,a=!0,u=!1,c=void 0;try{for(var s,l=i[0]._bResizemonitor.handlers[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var f=s.value;i[0].offsetParent&&f.apply(this,i)}}catch(e){u=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(u)throw c}}}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}Rr=null,Pr.length=0}}],(n=null)&&Dr(t.prototype,n),r&&Dr(t,r),e}();Ar._$name="ResizeMonitor";n(46),n(61),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77);function Mr(e){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ir(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e,t){return!t||"object"!==Mr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hr(e,t,n){return(Hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Br(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vr=null;F.isTestEnv&&(Vr=window.bryntum.globalDelays={timeouts:new Map,intervals:new Map,animationFrames:new Map,isEmpty:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Vr.timeouts.size+Vr.animationFrames.size+(e?Vr.intervals.size:0)===0}});var Wr=function(e){return function(e){function t(){return Fr(this,t),Nr(this,Br(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(t,e),n=t,(r=[{key:"doDestroy",value:function(){var e=this;e.timeoutIds&&(e.timeoutIds.forEach((function(e,t){"function"==typeof e&&e(),clearTimeout(t),Vr&&Vr.timeouts.delete(t)})),e.timeoutIds=null),e.timeoutMap&&(e.timeoutMap.forEach((function(e,t){return clearTimeout(t)})),e.timeoutMap=null),e.intervalIds&&(e.intervalIds.forEach((function(e){clearInterval(e),Vr&&Vr.intervals.delete(e)})),e.intervalIds=null),e.animationFrameIds&&(e.animationFrameIds.forEach((function(e){cancelAnimationFrame(e),Vr&&Vr.animationFrames.delete(e)})),e.animationFrameIds=null),Hr(Br(t.prototype),"doDestroy",this).call(this)}},{key:"hasTimeout",value:function(e){return!(!this.timeoutMap||!this.timeoutMap.has(e))}},{key:"setTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.fn,n=e.delay,r=e.name,o=e.runOnDestroy,i=e.cancelOutstanding,a=e.args;if(arguments.length>1||"function"==typeof arguments[0]){var u=Array.prototype.slice.call(arguments);t=u[0],n=u[1],r=u[2],o=u[3]}"string"==typeof t?r=t:r||(r=t.name),i&&this.clearTimeout(r);var c=this,s=c.timeoutIds||(c.timeoutIds=new Map),l=c.timeoutMap||(c.timeoutMap=new Map),f=setTimeout((function(){"string"==typeof t&&(t=c[r]),s&&s.delete(f),l&&l.delete(r),Vr&&Vr.timeouts.delete(f),t.apply(c,a)}),n);return s.set(f,!o||t),Vr&&Vr.timeouts.set(f,{fn:t,delay:n,name:r}),r&&l.set(r,f),f}))},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e;if("string"==typeof t){if(!this.timeoutMap)return;t=this.timeoutMap.get(e),this.timeoutMap.delete(e)}clearTimeout(t),this.timeoutIds&&this.timeoutIds.delete(t),Vr&&Vr.timeouts.delete(t)}))},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){clearInterval(e),this.intervalIds&&this.intervalIds.delete(e),Vr&&Vr.intervals.delete(e)}))},{key:"setInterval",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var n=setInterval(e,t);return(this.intervalIds||(this.intervalIds=new Set)).add(n),Vr&&Vr.intervals.set(n,{fn:e,delay:t}),n}))},{key:"requestAnimationFrame",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=this.animationFrameIds||(this.animationFrameIds=new Set),o=requestAnimationFrame((function(){return Vr&&Vr.animationFrames.delete(o),r.delete(o),e.apply(n,t)}));return r.add(o),Vr&&Vr.animationFrames.set(o,{fn:e,extraArgs:t,thisObj:n}),o}))},{key:"createOnFrame",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,i=arguments.length>3?arguments[3]:void 0,a=function(){for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];t&&i&&(n.cancelAnimationFrame(t),t=null),t||(t=n.requestAnimationFrame((function(){"string"==typeof e&&(e=o[e]),t=null,u.push.apply(u,Ir(r)),e.apply(o,u)})))};return a.cancel=function(){return n.cancelAnimationFrame(t)},a}},{key:"cancelAnimationFrame",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){cancelAnimationFrame(e),this.animationFrameIds&&this.animationFrameIds.delete(e),Vr&&Vr.animationFrames.delete(e)}))},{key:"buffer",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,o=null;"string"==typeof e&&(e=r[e]);var i=function i(){for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];i.called=!1,null!==o&&n.clearTimeout(o),o=n.setTimeout((function(){var t;(t=e).call.apply(t,[r].concat(u)),i.called=!0}),t)};return i}},{key:"throttle",value:function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,u=this,c=0,s=function(){r=0,c=performance.now(),n.push.apply(n,i),e.apply(o,n),l.called=!0},l=function e(){for(var l=performance.now()-c,f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];n=d,l>=t?(u.clearTimeout(r),s()):(r||(r=u.setTimeout(s,t-l),e.called=!1),a&&(n.push.apply(n,i),a.apply(o,n)))};return l.cancel=function(){return u.clearTimeout(r)},l}},{key:"isDelayable",get:function(){return!0}},{key:"widgetClass",get:function(){}}])&&Lr(n.prototype,r),o&&Lr(n,o),t}(e||Y)};n(32),n(206),n(207);function $r(e){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ur(e,t){return!t||"object"!==$r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qr(e,t,n){return(qr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kr(e,t){return(Kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zr=function(e){function t(){return Yr(this,t),Ur(this,Xr(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kr(e,t)}(t,e),n=t,o=[{key:"generateFiltersFunction",value:function(e){return e&&(e.length||e.count)?function(t){var n=!0,r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;if(c.disabled||(n=c.filter(t)),!n)break}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}:lr.returnTrue}},{key:"defaultConfig",get:function(){return{property:null,value:null,operator:null,filterBy:null,convert:null,caseSensitive:!0,id:null}}}],(r=[{key:"construct",value:function(e){"function"==typeof e&&(e={filterBy:e}),qr(Xr(t.prototype),"construct",this).call(this,e)}},{key:"onChange",value:function(e){var t=this;!t.isConfiguring&&t.owner&&!t.owner.isConfiguring&&t.owner.onFilterChanged&&t.owner.onFilterChanged(t,e)}},{key:"defaultFilterBy",value:function(e){return this[this.operator](this.convert(e[this.property]))}},{key:"convert",value:function(e){return this.caseSensitive||"string"!=typeof e?e:e.toLowerCase()}},{key:"filter",value:function(e){return this.filterBy(e)}},{key:"startsWith",value:function(e){return String(e).startsWith(this.value)}},{key:"endsWith",value:function(e){return String(e).endsWith(this.value)}},{key:"=",value:function(e){return Mt.isEqual(e,this.value)}},{key:"!=",value:function(e){return!Mt.isEqual(e,this.value)}},{key:">",value:function(e){return Mt.isMoreThan(e,this.value)}},{key:">=",value:function(e){return Mt.isMoreThan(e,this.value)||Mt.isEqual(e,this.value)}},{key:"<",value:function(e){return Mt.isLessThan(e,this.value)}},{key:"<=",value:function(e){return Mt.isLessThan(e,this.value)||Mt.isEqual(e,this.value)}},{key:"*",value:function(e){return Mt.isPartial(e,this.value)}},{key:"id",get:function(){return this._id||(this._id=this.property||ye.generateId("b-filter"))},set:function(e){this._id=e}},{key:"filterBy",get:function(){return this._filterBy||this.defaultFilterBy},set:function(e){this._filterBy=e}},{key:"property",set:function(e){this._property=e,this.onChange("property")},get:function(){return this._property}},{key:"value",set:function(e){this._value=this.caseSensitive||"string"!=typeof e?e:e.toLowerCase(),this.onChange("value")},get:function(){return this._value}},{key:"operator",set:function(e){this._operator=e,this.onChange("operator")},get:function(){return this._operator||("string"==typeof this.value?"*":"=")}}])&&Gr(n.prototype,r),o&&Gr(n,o),t}(Y);function Jr(e){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t){return!t||"object"!==Jr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function no(e,t,n){return(no="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ro(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oo(e,t){return(oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Zr._$name="CollectionFilter";var io=function(e){function t(){return Qr(this,t),to(this,ro(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oo(e,t)}(t,e),n=t,o=[{key:"generateSortFunction",value:function(e,t){var n=e.isCollection?e.values:e,r=n.length;return function(e,o){var i,a;for(a=0;a<r;++a)if(i=n[a].sortFn(e,o))return i;return t?t(e,o):0}}},{key:"defaultConfig",get:function(){return{property:null,direction:"ASC",sortFn:null,convert:null,id:null,useLocaleSort:null}}}],(r=[{key:"construct",value:function(e){"function"==typeof e&&(e={sortFn:e}),no(ro(t.prototype),"construct",this).call(this,e)}},{key:"defaultSortFn",value:function(e,t){var n=this.convert,r=this.property,o=this.useLocaleSort,i="desc"===this.direction.toLowerCase()?-1:1;if(e=e[r],t=t[r],n&&(e=n(e),t=n(t)),o&&null!=e&&null!=t){if(!0===o)return String(e).localeCompare(t);if("string"==typeof o)return String(e).localeCompare(t,o);if("object"===Jr(o))return String(e).localeCompare(t,o.locale,o)}return(e>t?1:e<t?-1:0)*i}},{key:"id",get:function(){return this._id||(this._id=this.property||ye.generateId("b-sorter"))},set:function(e){this._id=e}},{key:"sortFn",set:function(e){this._sortFn=e},get:function(){return this._sortFn?this._sortFn:this.defaultSortFn}}])&&eo(n.prototype,r),o&&eo(n,o),t}(Y);function ao(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function so(e,t){return!t||"object"!==ho(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lo(e,t,n){return(lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function po(e,t){return(po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ho(e){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}io._$name="CollectionSorter";var yo=function(){return 0},go=function(e,t){return t-e},vo=Symbol("filteredIndicesProperty"),mo=Object.freeze([]),bo=Object.freeze({action:"sort",added:mo,removed:mo,replaced:mo}),wo=Object.freeze({action:"filter",added:mo,removed:mo,replaced:mo}),ko={string:1,number:1},So=new WeakMap,Oo=function(e){if(e&&"object"===ho(e)){var t=So.get(e);void 0===t&&(t=Symbol("bscik"),So.set(e,t)),e=t}return e},Eo=function(e){function t(){return uo(this,t),so(this,fo(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&po(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e){this.generation=0,this._values=[],lo(fo(t.prototype),"construct",this).call(this,e)}},{key:"doDestroy",value:function(){lo(fo(t.prototype),"doDestroy",this).call(this),this._values.length=0,this.isFiltered&&(this._filteredValues.length=0,this.filters.destroy()),this._sorters&&this._sorters.destroy()}},{key:"clear",value:function(){var e=this,t=this._values.slice();e.totalCount&&(e._values.length=0,e._filteredValues&&(e._filteredValues.length=0),e._indicesInvalid=!0,e.generation++,e.trigger("change",{action:"clear",removed:t}))}},{key:"replaceValues",value:function(e,t,n){var r,o=this;o.isFiltered&&!n?(r=o._filteredValues,o._filteredValues=e.slice()):(r=o._values,o._values=e,o.isFiltered&&n&&o.autoFilter?(o._filterFunction=null,o._filteredValues=o._values.filter(o.filterFunction),o._indicesInvalid=!0):o._filteredValues&&(o._filteredValues.length=0)),o._indicesInvalid=!0,o.generation++,t||o.trigger("change",{action:"replaceValues",removed:r,values:e,replaced:[]})}},{key:Symbol.iterator,value:function(){return this.values[Symbol.iterator]()}},{key:"forEach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(this.isFiltered&&!t?this._filteredValues:this._values).forEach(e)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(this.isFiltered&&!t?this._filteredValues:this._values).map(e)}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(this.isFiltered&&!t?this._filteredValues:this._values).find(e)}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length?this.splice.apply(this,[this._values.length,null].concat(t)):this.splice(this._values.length,null,t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length?this.splice.apply(this,[0].concat(t)):this.splice(0,t)}},{key:"move",value:function(e,t){var n=this,r=n._values,o=n.indexOf(e,!0),i=t?n.indexOf(t,!0):r.length;if(-1===o||-1===i)throw new Error("Collection move parameters must be present in Collection");return o!==i&&o!==i-1&&(o<i&&i--,r.splice(o,1),r.splice(i,0,e),n._indicesInvalid=!0,n.trigger("change",{action:"move",item:e,from:o,to:i})),i}},{key:"splice",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i,a,u=this,c=u.idProperty,s=u._values,l={},f=[],d=[],p=u.totalCount;if(r)if(1===r.length&&Array.isArray(r[0])&&(r=r[0]),p&&r.length){var h=u.indices[c];i=[];for(var y=0;y<r.length;y++){var g=r[y],v=Oo(g[c]),m=h[v];l[v]=!0,null!=m?s[m]!==g&&(d.push([s[m],g]),s[m]=g):i.push(g)}}else i=r;if(t)if("number"==typeof t)for(var b=e;t;--t){var w=Oo(s[b][c]);l[w]?(e++,b++):(f.push(s[b]),s.splice(b,1),u._indicesInvalid=a=!0)}else{var k,S=0===i.length;Array.isArray(t)||(t=[t]);var O=t.reduce((function(e,t){var n="number"==typeof t,r=n?t:u.indexOf(t,!0);return S&&(null!=k&&r!==k+1||n)&&(S=!1),r>=0&&r<p&&e.push(r),k=r,e}),[]).sort(go);if(S)O.length&&(f.push.apply(f,t),s.splice(O[O.length-1],O.length),u._indicesInvalid=a=!0);else for(var E=0;E<O.length;E++){var C=O[E];if(-1!==C){var x=Oo(s[C][c]);l[x]||(f.unshift(s[C]),s.splice(C,1),u._indicesInvalid=a=!0)}}}if(i.length&&(s.splice.apply(s,[Math.min(e,s.length),0].concat(ao(i))),u._indicesInvalid=a=!0),u.isSorted)u.onSortersChanged();else if(u.isFiltered){var _;u.autoFilter?u.onFiltersChanged():(_=u._filteredValues).push.apply(_,ao(i))}a||d.length?(u.generation++,u.trigger("change",{action:"splice",removed:f,added:i,replaced:d,oldCount:p})):u.trigger("noChange",{index:e,toRemove:t,toAdd:r})}},{key:"changeId",value:function(e,t){var n=this,r=n.idProperty,o=ko[ho(e)]?e:e[r],i=n.get(o);if(i){var a=n.get(t);if(a&&i!==a)throw new Error("Attempt to set item ".concat(o," to already existing member's id ").concat(t));if(i[r]=t,!n._indicesInvalid){var u=n.indices.id,c=u[o];delete u[o],u[t]=c}}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getBy(this.idProperty,e,t)}},{key:"getAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.isFiltered&&!t?this._filteredValues[e]:this._values[e]}},{key:"getBy",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;if(r.isFiltered&&n){var o=r.findIndex(e,t,!0);if(-1!==o)return r._values[o]}else{var i=r.findIndex(e,t);if(-1!==i)return r.values[i]}}},{key:"addSorter",value:function(e){var t=e instanceof io?e:new io(e);return this.sorters.add(t),t}},{key:"onSortersChanged",value:function(){var e=this;delete e._sortFunction,e._values.sort(e.sortFunction),e._indicesInvalid=!0,e.trigger("change",bo)}},{key:"addFilter",value:function(e){var t=e instanceof Zr?e:new Zr(e);return this.filters.add(t),t}},{key:"onFiltersChanged",value:function(){var e=this;e._filterFunction=null,e._filteredValues=e._values.filter(e.filterFunction),e._indicesInvalid=!0,e.trigger("change",wo)}},{key:"addIndex",value:function(e){(this._indices||(this._indices={}))[e]={},this._indicesInvalid=!0}},{key:"findIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.isFiltered,i=o&&!n?r.indices[vo][e]:r.indices[e];if(i){var a=i[Oo(t)];if(null!=a)return a}else for(var u=o&&!n?r._filteredValues:r._values,c=u.length,s=0;s<c;s++)if(u[s][e]==t)return s;return-1}},{key:"indexOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.findIndex(this.idProperty,ko[ho(e)]?e:e[this.idProperty],t)}},{key:"includes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return-1!==this.indexOf(e,t)}},{key:"rebuildIndices",value:function(){var e,t,n=this,r=n.isFiltered,o=n._indices||(n._indices={}),i=Object.keys(o),a=i.length,u=n._values,c=u.length;for(r&&(o[vo]={}),e=0;e<a;e++)o[i[e]]={},r&&(o[vo][i[e]]={});for(e=0;e<c;e++){var s=u[e];for(t=0;t<a;t++){var l=i[t];o[l][Oo(s[l])]=e}}if(r){var f=n._filteredValues,d=f.length,p=n._indices[vo];for(e=0;e<d;e++){var h=f[e];for(t=0;t<a;t++){var y=i[t];p[y][Oo(h[y])]=e}}}n._indicesInvalid=!1}},{key:"isCollection",get:function(){return!0}},{key:"values",set:function(e){this.splice(0,this._values.length,e)},get:function(){return this.isFiltered?this._filteredValues:this._values}},{key:"first",get:function(){return this.values[0]}},{key:"last",get:function(){return this.values[this.count-1]}},{key:"allValues",get:function(){return this._values}},{key:"count",get:function(){return this.values.length}},{key:"totalCount",get:function(){return this._values.length}},{key:"idProperty",set:function(e){this._idProperty=e,this.addIndex(e)},get:function(){return this._idProperty}},{key:"extraKeys",set:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)this.addIndex(e[t])}},{key:"sorters",get:function(){return this._sorters||(this._sorters=new t({listeners:{change:"onSortersChanged",thisObj:this}})),this._sorters}},{key:"isSorted",get:function(){return Boolean(this._sorters&&this._sorters.count)}},{key:"sortFunction",get:function(){return this._sortFunction||(this.isSorted?this._sortFunction=io.generateSortFunction(this.sorters.values):this._sortFunction=yo),this._sortFunction}},{key:"filters",get:function(){return this._filters||(this._filters=new t({listeners:{change:"onFiltersChanged",thisObj:this}})),this._filters}},{key:"isFiltered",get:function(){return Boolean(this._filters&&this._filters.count)}},{key:"filterFunction",get:function(){return this._filterFunction||(this.isFiltered?this._filterFunction=Zr.generateFiltersFunction(this.filters.values):this._filterFunction=lr.returnTrue),this._filterFunction}},{key:"indices",get:function(){return this._indicesInvalid&&this.rebuildIndices(),this._indices}}],o=[{key:"defaultConfig",get:function(){return{idProperty:"id",extraKeys:null,autoFilter:!0}}}],r&&co(n.prototype,r),o&&co(n,o),t}(ae(Y));function Co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ro(e,t){return!t||"object"!==xo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Po(e,t,n){return(Po="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=To(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function To(e){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ao(e,t){return(Ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Eo._$name="Collection";var Mo={true:"auto",false:"hidden","hidden-scroll":"auto"},Io={block:"nearest"},Fo=new Promise((function(e){return e()})),Lo=function(e){return new Promise((function(t){return _r.on({element:e,scroll:t,once:!0})}))},No={x:1},Ho=function(e){function t(){return jo(this,t),Ro(this,To(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ao(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{element:null,overflowX:null,overflowY:null,translate:null,_x:0,_y:0,scrollEndBuffer:100}}}],(r=[{key:"addPartner",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No;"string"==typeof t&&(t=_o({},t,1)),(this.partners||(this.partners=new Eo)).add({id:e.id,scroller:e,axes:t}),e.partners&&e.partners.includes(this.id)||e.addPartner(this,t)}},{key:"removePartner",value:function(e){this.partners&&this.partners.includes(e)&&(this.partners.remove(e),e.removePartner(this))}},{key:"scrollIntoView",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Io,r=e instanceof tr,o=r?e:tr.from(e),i=this.getDeltaTo(e,n),a=i.xDelta,u=i.yDelta,c=this.scrollBy(a,u,n);return(n.highlight||n.focus)&&c.then((function(){r&&(e=o.translate(-a,-u)),n.highlight&&xn.highlight(e,t),n.focus&&e.focus()})),c}},{key:"scrollBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Io,r=this,o="object"===xo(n)?n.animate:n,i=Math.abs(e),a=Math.abs(t);r.scrollAnimation&&(r.scrollAnimation.cancel(),r.scrollAnimation=null),(e||t)&&(r.silent=n.silent);var u=o&&("number"==typeof o?o:"number"==typeof o.duration?o.duration:300);if(u&&(i>10||a>10)){var c=r.x,s=r.y,l=c,f=s;return Math.max(i,a)<50&&(u=Math.min(u,500)),r.scrollAnimation=lr.animate(u,(function(o){var i=1===o;if(e){if(r.x!==l&&!n.force)return r.scrollAnimation&&r.scrollAnimation.cancel();r.x=Math.max(c+(i?e:Math.round(e*o)),0)}if(t){if(r.y!==f&&!n.force)return r.scrollAnimation&&r.scrollAnimation.cancel();r.y=Math.max(s+(i?t:Math.round(t*o)),0)}l=r.x,f=r.y}),r,o.easing),r.element.classList.add("b-scrolling"),r.scrollAnimation.then((function(){r.isDestroyed||(r.element.classList.remove("b-scrolling"),r.scrollAnimation=null)})),r.scrollAnimation}return e|t?(r.x+=e,r.y+=t,Lo(r.element)):Fo}},{key:"scrollTo",value:function(e,t,n){var r=this.x,o=this.y,i=null==e?0:e-r,a=null==t?0:t-o;return this.scrollBy(i,a,n)}},{key:"doDestroy",value:function(){var e=this;e._element&&(e._element.removeEventListener("scroll",e.scrollHandler),e.wheelListenerRemover&&e.wheelListenerRemover()),e.scrollAnimation&&e.scrollAnimation.cancel(),e.partners&&e.partners.forEach((function(t){return t.scroller.removePartner(e)})),Po(To(t.prototype),"doDestroy",this).call(this)}},{key:"onElMutation",value:function(e){var t=this,n=Co(xn.getTranslateXY(t.element),2),r=n[0],o=n[1];if(t._x!==-r||t.y!==-o){var i=new CustomEvent("scroll",{bubbles:!0});Object.defineProperty(i,"target",{get:function(){return t.element}}),t.onScroll(i)}}},{key:"onScroll",value:function(e){var t=this;t.widget&&t.widget.isDestroyed||(t.positionDirty=!0,t.element.classList.contains("b-scrolling")||t.element.classList.add("b-scrolling"),e.widget=t.widget,t.silent||t.trigger("scroll",e),t.syncPartners(),t.controllingPartner=null,t.scrollEndHandler(e))}},{key:"syncPartners",value:function(){var e=this;e.partners&&e.partners.forEach((function(t){var n=t.axes,r=t.scroller;r!==e.controllingPartner&&r.sync(e,n)}))}},{key:"onScrollEnd",value:function(e){this.silent&&(this.silent=!1),this.trigger("scrollEnd",e),this.element.classList.remove("b-scrolling")}},{key:"getDeltaTo",value:function(e,t){var n=this;if(!n.viewport)return{xDelta:0,yDelta:0};e instanceof tr||(e=tr.from(e)),e.round();var r=t.block||"nearest",o=n.viewport.round(),i=t.edgeOffset||0,a=o.width>=e.width+2*i?i:0,u=o.height>=e.height+2*i?i:0,c=e.clone().adjust(-a,-u,a,u).constrainTo(new tr(o.x-n.x,o.y-n.y,n.scrollWidth,n.scrollHeight)),s=c.clone(),l=0,f=0;if("start"===r)s.moveTo(o.x,o.y),l=c.x-s.x,f=c.y-s.y;else if("end"===r)s.translate(o.right-s.right,o.bottom-s.bottom),l=c.x-s.x,f=c.y-s.y;else if("center"===r){var d=o.center;s.moveTo(d.x-s.width/2,d.y-s.height/2),l=l||c.x-s.x,f=f||c.y-s.y}else s.width>o.width?l=s.x-o.x:s.right>o.right?l=s.right-o.right:s.x<o.x&&(l=s.x-o.x),s.height>o.height?f=s.y-o.y:s.bottom>o.bottom?f=s.bottom-o.bottom:s.y<o.y&&(f=s.y-o.y);return{xDelta:!1===t.x?0:Math.max(Math.min(l,n.maxX-n.x),-n.x),yDelta:!1===t.y?0:Math.max(Math.min(f,n.maxY-n.y),-n.y)}}},{key:"sync",value:function(e,t){var n=t.x,r=t.y;this.controllingPartner=e,null!=n&&(this.x=e.x),null!=r&&(this.y=e.y)}},{key:"updateOverflowX",value:function(e){var t=this.element,n=this.translate;"hidden-scroll"!==e||n||(t.classList.add("b-hide-scroll"),this.enableWheel()),n||(t.style.overflowX=Mo[e]||e),this.positionDirty=!this.isConfiguring}},{key:"updateOverflowY",value:function(e){var t=this.element,n=this.translate;"hidden-scroll"!==e||n||(t.classList.add("b-hide-scroll"),this.enableWheel()),n||(t.style.overflowY=Mo[e]||e),this.positionDirty=!this.isConfiguring}},{key:"enableWheel",value:function(){we.isChrome||we.isSafari||this.wheelListenerRemover||(this.wheelListenerRemover=_r.on({element:this.element,wheel:"onWheel",thisObj:this}))}},{key:"onWheel",value:function(e){e.deltaX>e.deltaY&&!1!==this.overflowX?this.x+=e.deltaX:!1!==this.overflowY&&(this.y+=e.deltaY)}},{key:"viewport",get:function(){return tr.client(this.element)}},{key:"element",get:function(){return this._element},set:function(e){var t=this,n=t.scrollHandler||(t.scrollHandler=t.onScroll.bind(t));if(t.scrollEndHandler||(t.scrollEndHandler=t.buffer(t.onScrollEnd,t.scrollEndBuffer)),t._element&&(t.translate?t.mutationObserver&&t.mutationObserver.disconnect(t._element):(t._element.removeEventListener("scroll",n),t._element.classList.remove("b-widget-scroller"))),t._element=e,t.translate){if(t.mutationObserver||(t.mutationObserver=new MutationObserver((function(e){return t.onElMutation(e)}))),t.mutationObserver.observe(e,{attributes:!0}),t._x=t._y=0,document.contains(e)){var r=Co(xn.getTranslateXY(e),2),o=r[0],i=r[1];t._x=-o,t._y=-i}}else e.addEventListener("scroll",n),e.classList.add("b-widget-scroller");t.updateOverflowX(t.overflowX),t.updateOverflowY(t.overflowY)}},{key:"x",get:function(){var e=this,t=e.element;if(t&&e.positionDirty){if(e.translate){var n=Co(xn.getTranslateXY(t),2),r=n[0],o=n[1];e._x=-r,e._y=-o}else e._x=t.scrollLeft,e._y=t.scrollTop;e.positionDirty=!1}return e._x},set:function(e){var t=this.element,n=this.widget;n&&n.isConfiguring||(this._x=e,t&&(this.trigger("scrollStart",{x:e}),this.translate?xn.setTranslateX(t,-e):t.scrollLeft=e,this.positionDirty=!0))}},{key:"y",get:function(){var e=this,t=e.element;if(t&&e.positionDirty){if(e.translate){var n=Co(xn.getTranslateXY(t),2),r=n[0],o=n[1];e._x=-r,e._y=-o}else e._x=t.scrollLeft,e._y=t.scrollTop;e.positionDirty=!1}return e._y},set:function(e){var t=this.element,n=this.widget;n&&n.isConfiguring||(this._y=e,t&&(this.trigger("scrollStart",{y:e}),this.translate?xn.setTranslateY(t,-e):t.scrollTop=e,this.positionDirty=!0))}},{key:"maxX",get:function(){return this.scrollWidth-this.clientWidth}},{key:"maxY",get:function(){return this.scrollHeight-this.clientHeight}},{key:"overflowX",get:function(){return this._overflowX},set:function(e){this._overflowX=e,this.element&&this.updateOverflowX(e)}},{key:"overflowY",get:function(){return this._overflowY},set:function(e){this._overflowY=e,this.element&&this.updateOverflowY(e)}},{key:"scrollWidth",get:function(){return this.element?this.element.scrollWidth:0},set:function(e){var t=this,n=t.widthStretcher;n&&null==e?(n.remove(),t.widthStretcher=null):e&&(n||(n=t.widthStretcher=xn.createElement({className:"b-scroller-stretcher"})),n.style.transform="translateX(".concat(e-1,"px)"),t.element&&t.element.lastChild!==n&&t.element.appendChild(n))}},{key:"scrollHeight",get:function(){return this.element?this.element.scrollHeight:0},set:function(e){var t=this,n=t.stretcher||(t.stretcher=xn.createElement({className:"b-scroller-stretcher"}));n.style.transform="translateY(".concat(e-1,"px)"),t.element&&t.element.lastChild!==n&&t.element.appendChild(n)}},{key:"clientWidth",get:function(){return this.element?this.element.clientWidth:0}},{key:"clientHeight",get:function(){return this.element?this.element.clientHeight:0}},{key:"id",get:function(){return this._id||(this.widget?this._id="".concat(this.widget.id,"-scroller"):this._id=ye.generateId("scroller-")),this._id}}])&&Do(n.prototype,r),o&&Do(n,o),t}(Wr(ae(Y)));Ho._$name="Scroller";var Bo={localeName:"En",localeDesc:"English",Object:{Yes:"Yes",No:"No",Cancel:"Cancel",Custom:"Custom"},InstancePlugin:{fnMissing:function(e){return"Trying to chain fn ".concat(e.plugIntoName,"#").concat(e.fnName,", but plugin fn ").concat(e.pluginName,"#").concat(e.fnName," does not exist")},overrideFnMissing:function(e){return"Trying to override fn ".concat(e.plugIntoName,"#").concat(e.fnName,", but plugin fn ").concat(e.pluginName,"#").concat(e.fnName," does not exist")}},Field:{invalidValue:"Invalid field value",minimumValueViolation:"Minimum value violation",maximumValueViolation:"Maximum value violation",fieldRequired:"This field is required",validateFilter:"Value must be selected from the list"},DateField:{invalidDate:"Invalid date input"},TimeField:{invalidTime:"Invalid time input"},DateHelper:{locale:"en-US",shortWeek:"W",shortQuarter:"q",week:"Week",weekStartDay:0,unitNames:[{single:"millisecond",plural:"ms",abbrev:"ms"},{single:"second",plural:"seconds",abbrev:"s"},{single:"minute",plural:"minutes",abbrev:"min"},{single:"hour",plural:"hours",abbrev:"h"},{single:"day",plural:"days",abbrev:"d"},{single:"week",plural:"weeks",abbrev:"w"},{single:"month",plural:"months",abbrev:"mon"},{single:"quarter",plural:"quarters",abbrev:"q"},{single:"year",plural:"years",abbrev:"yr"}],unitAbbreviations:[["mil"],["s","sec"],["m","min"],["h","hr"],["d"],["w","wk"],["mo","mon","mnt"],["q","quar","qrt"],["y","yr"]],parsers:{L:"MM/DD/YYYY",LT:"HH:mm A"},ordinalSuffix:function(e){return e+({1:"st",2:"nd",3:"rd"}[e[e.length-1]]||"th")}},PagingToolbar:{firstPage:"Go to first page",prevPage:"Go to previous page",page:"Page",nextPage:"Go to next page",lastPage:"Go to last page",reload:"Reload current page",noRecords:"No records to display",pageCountTemplate:function(e){return"of ".concat(e.lastPage)},summaryTemplate:function(e){return"Displaying records ".concat(e.start," - ").concat(e.end," of ").concat(e.allCount)}},List:{loading:"Loading..."}},zo=Bo;function Vo(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $o(e){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uo(e,t){return!t||"object"!==$o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qo(e,t,n){return(qo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xo(e){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Te.registerLocale("En",{desc:"English",locale:Bo});var Zo=/transparent|rgba\(0,\s*0,\s*0,\s*0\)/,Jo={INPUT:1,TEXTAREA:1},Qo=function(e){e.isVisible&&e.triggerPaint()},ei=/^:not\((.+)\)$/,ti=xn.createElement({html:" ",style:"position:absolute;top:-10000em;left:-10000em"}),ni=function(e){function t(){return Yo(this,t),Uo(this,Xo(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Widget"}},{key:"defaultConfig",get:function(){return{element:!0,callOnFunctions:!0,id:"",html:null,hasGeneratedId:null,cls:null,style:null,disabled:null,adopt:null,appendTo:null,insertBefore:null,insertFirst:null,dataset:null,tooltip:null,preventTooltipOnTouch:null,monitorResize:null,cache:{},floating:null,positioned:null,draggable:null,align:"t-b",centered:null,constrainTo:null,anchor:null,scrollAction:null,hideAnimation:null,showAnimation:null,x:null,y:null,scrollable:null,scrollerClass:Ho,defaultBindProperty:"html",defaultAction:null,width:null,height:null,scaleToFitWidth:null,allowGrowWidth:!0,margin:null,flex:null,alignSelf:null,ripple:null,title:null,localizableProperties:["title"],requireSize:!1,ref:null,hidden:null}}},{key:"floatRoot",get:function(){var e=this;return e._floatRoot||(e._floatRoot=document.querySelector(".b-float-root")),e._floatRoot?document.body.contains(e._floatRoot)||document.body.appendChild(e._floatRoot):(e._floatRoot=xn.createElement({className:"b-float-root",parent:document.body}),we.isAndroid&&(e._floatRoot.style.height="".concat(screen.height,"px"),_r.on({element:window,orientationchange:function(){return e._floatRoot.style.height="".concat(screen.height,"px")}}))),e._floatRoot}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;n.alignConstrained=0,n.afterHideShowAnimate=n.afterHideShowAnimate.bind(n),n.callRealign=n.realign.bind(n),n.doHideOrRealign=n.doHideOrRealign.bind(n),n.initialRender=!0,n._isUserAction=!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];qo(Xo(t.prototype),"construct",this).call(this,e,o),n.finalizeInit()}},{key:"isType",value:function(e,t){return ye.isType(this,e,t)}},{key:"startConfigure",value:function(e){var n=this,r=n.adopt,o=n.element;if(r){var i="string"==typeof r?document.getElementById(r):r,a=ye.fromElement(i);a&&a.destroy(),n.preExistingElements=Array.from(i.childNodes),n.adoptedElementClassName=i.className,n.adoptedElementCssText=i.style.cssText,i.id&&!e.id&&(n.id=o.id=i.id),xn.syncAttributes(o,i);for(var u=0,c=o.childNodes.length;u<c;u++)i.appendChild(o.childNodes[0]);n._element=i,delete n._contentRange}qo(Xo(t.prototype),"startConfigure",this).call(this,e)}},{key:"finalizeInit",value:function(){(this.insertBefore||this.appendTo||this.insertFirst||this.adopt)&&this.render()}},{key:"doDestroy",value:function(){var e=this,n=e._element,r=e.tooltip,o=e.preExistingElements;if(e.scrollable&&e.scrollable.destroy(),r&&(e._tooltip?r.destroy():r.activeTarget===n&&r.isVisible&&r.hide()),e.unmask(),n){if(e.removeTransientListeners(),e.floating||e.positioned?e.hide():e.revertFocus(),Ar.removeResizeListener(n.parentElement,e.onParentElementResize),Ar.removeResizeListener(n,e.onElementResize),e.adopt){for(var i=Array.from(n.childNodes),a=0,u=i.length;a<u;a++){var c=i[a];o.includes(c)||c===t.floatRoot||c.remove()}n.className=e.adoptedElementClassName,n.style.cssText=e.adoptedElementCssText}else n.remove();e.dragEventDetacher&&e.dragEventDetacher(),e.dragOverEventDetacher&&e.dragOverEventDetacher(),ti.remove()}ye.unregister(e),qo(Xo(t.prototype),"doDestroy",this).call(this)}},{key:"render",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.element;Ar.removeResizeListener(r.parentElement,n.onParentElementResize),Ar.removeResizeListener(r,n.onElementResize),n.emptyCache(),n.syncElement&&n.currentElement?xn.sync(r,n.currentElement):(e?(n.appendTo="string"==typeof e?document.getElementById(e):e,n.appendTo.appendChild(r)):n.insertBefore?(n.insertBefore="string"==typeof n.insertBefore?document.getElementById(n.insertBefore):n.insertBefore,n.insertBefore.parentElement.insertBefore(r,n.insertBefore)):n.insertFirst?(n.insertFirst="string"==typeof n.insertFirst?document.getElementById(n.insertFirst):n.insertFirst,n.insertFirst.firstChild?n.insertFirst.insertBefore(r,n.insertFirst.firstChild):n.insertFirst.appendChild(r)):n.appendTo&&(n.appendTo="string"==typeof n.appendTo?document.getElementById(n.appendTo):n.appendTo,n.appendTo.appendChild(r)),n.currentElement=r),n.rendered=!0,t&&(n._thisIsAUsedExpression(n.contentRange),n.triggerPaint())}},{key:"template",value:function(e){return'<div class="'.concat(e.html?"b-html":"",'" ').concat(e.name?'data-name="'.concat(e.name,'"'):"",">").concat(e.html||"","</div>")}},{key:"alignTo",value:function(e){(1===e.nodeType||e instanceof t||e instanceof cr)&&(e={target:e}),this.releaseSizeConstraints();var n=this,r=n.scrollable,o=n.element,i=e.target,a=i&&(i instanceof tr?i:i.element||i),u=tr.from(o,n.positioned?o.offsetParent:null,!0),c=a&&1===a.nodeType;if(e=Object.assign({constrainTo:n.positioned?null:n.constrainTo,axisLock:n.axisLock,anchor:n.anchor},"object"===$o(n.align)?n.align:{align:n.align},e),u.minWidth=e.minWidth||n.minWidth,u.minHeight=e.minHeight||n.minHeight,n.lastAlignSpec=e,c&&a.offsetParent){(e=Object.setPrototypeOf({},e)).target=tr.from(a,n.positioned?o.offsetParent:null,!n.positioned),e.target.height=Math.max(e.target.height,1),e.target.width=Math.max(e.target.width,1);var s=n.clippedBy;if(s){var l=e.target.intersect(s);if(!l){var f=n.hide();return n.lastAlignSpec.targetHidden=!0,f}e.target=l}n.anchoredTo=a}else n.anchoredTo=null;e.anchor&&(e.anchorSize=n.anchorSize,o.appendChild(n.anchorElement)),n.isAligning=!0,n.trigger("beforeAlign",e),n.isAligning=!1;var d=e.constrainTo,p=d===window||d===document,h=u.alignTo(e),y=h.align,g=h.anchor,v=h.x,m=h.y,b=h.width,w=h.height,k=h.bottom,S=h.right;if(n.lastAlignSpec.zone=h.zone,w!==u.height&&("configuredHeight"in n||(n.configuredHeight=o.style.height),n.height=w,n.alignConstrained=1|n.alignConstrained,r&&(r.overflowY=!0)),b!==u.width&&("configuredWidth"in n||(n.configuredWidth=o.style.width),n.width=b,n.alignConstrained=2|n.alignConstrained,r&&(r.overflowX=r.clientWidth>r.scrollWidth)),y&&n.alignConstrained){e.align=y;var O=tr.from(o,n.positioned?o.offsetParent:null,!0).alignTo(e);g=O.anchor,v=O.x,m=O.y,b=O.width,w=O.height,k=O.bottom,S=O.right}if(n.setXY(v,m),g){var E,C=g.edge,x=n.anchorElement,_=[],j=o.style.pointerEvents;o.style.pointerEvents="all","top"===C||"bottom"===C?(_[0]=v+g.x,_[1]="top"===C?m+1:k-1):(_[0]="left"===C?v+1:S-1,_[1]=m+g.y);var D=(E=document).elementFromPoint.apply(E,_);if(o.style.pointerEvents=j||null,D){var R=xn.getStyleValue(D,"background-color");R.match(Zo)?n.anchorPathElement.setAttribute("fill",n.defaultAnchorBackgroundColor):n.anchorPathElement.setAttribute("fill",R)}x.classList.remove("b-hide-display"),x.style.transform="",x.className="b-anchor b-anchor-".concat(C),xn.setTranslateXY(x,g.x,g.y)}else n._anchorElement&&n.anchorElement.classList.add("b-hide-display");"hide"!==n.scrollAction||c||(o.style.pointerEvents="none",n.anchoredTo=document.elementFromPoint(v,m),o.style.pointerEvents=""),("realign"===n.scrollAction&&c||"hide"===n.scrollAction)&&!n.documentScrollListener&&n.setTimeout((function(){document.addEventListener("scroll",n.doHideOrRealign,!0),n.documentScrollListener=!0}),0),!we.isAndroid&&p&&(!d||1!==d.nodeType&&!p||n.constrainListeners||(Ar.addResizeListener(d,n.callRealign),p||n.constrainMutationMonitor||(n.constrainMutationMonitor=new MutationObserver(n.callRealign)).observe(d,{attributes:!0,childList:!0}),n.constrainListeners=!0))}},{key:"realign",value:function(e){var t=this;if(t.isVisible&&(t.floating||t.positioned)&&t.lastAlignSpec){var n=t.lastAlignSpec.target;if(n&&1===n.nodeType){var r=tr.from(n);if(r.minHeight=r.minWidth=1,n!==document.body&&!n.offsetParent||e&&1===e.nodeType&&e.contains(n)&&!tr.from(e).intersect(r))return t.hide()}t.alignTo(t.lastAlignSpec)}}},{key:"releaseSizeConstraints",value:function(){var e=this,t=e.scrollable;1&e.alignConstrained&&(e.height=e.configuredHeight,t&&(t.overflowY=t.config.overflowY)),2&e.alignConstrained&&(e.width=e.configuredWidth,t&&(t.overflowX=t.config.overflowX)),e.alignConstrained=0}},{key:"toFront",value:function(){this.element&&this.element.nextSibling&&this.element.parentNode.appendChild(this.element)}},{key:"onThemeChange",value:function(){this.anchorElement&&this.anchorElement.offsetParent&&(this._anchorSize=null,this.realign())}},{key:"onWidgetDragStart",value:function(e){var t=this,n=document.elementFromPoint(e.clientX,e.clientY),r=t.draggable.handleSelector;if(r){var o=ei.exec(r)[1];if(o){if(n.closest("#".concat(t.element.id," ").concat(o)))return void e.preventDefault()}else if(!n.closest("#".concat(t.element.id," ").concat(r)))return void e.preventDefault()}t.removeTransientListeners();var i=e.clientX,a=e.clientY,u=document.scrollingElement||document.body,c=t.getXY()[0],s=t.getXY()[1];document.body.appendChild(ti),e.dataTransfer.setDragImage&&(e.dataTransfer.setData("application/node type",""),e.dataTransfer.setDragImage(ti,0,0)),e.dataTransfer.effectAllowed="none",t.dragOverEventDetacher=_r.addListener({element:document.body,dragover:function(e){return t.setXY(c+e.clientX-i-u.scrollLeft,s+e.clientY-a-u.scrollTop)}}),t.anchor=null}},{key:"onWidgetDragEnd",value:function(e){ti.remove(),this.dragOverEventDetacher()}},{key:"getXY",value:function(){return[xn.getPageX(this.element),xn.getPageY(this.element)]}},{key:"setXY",value:function(e,t){var n=this;(n.floating||n.positioned)&&(null!=e&&(n._x=e,n.centered=!1),null!=t&&(n._y=t,n.centered=!1),xn.setTranslateXY(n.element,n._x||0,n._y||0))}},{key:"fixIEMaxHeightBug",value:function(){var e=this.element,t=this.contentElement;if("column"===xn.getStyleValue(e,"flex-direction")){t.style.maxHeight="";for(var n=tr.client(e).height,r=e.childNodes,o=r.length,i=0;i<o;i++){var a=r[i];a===t||a.classList.contains("b-resize-monitors")||(n-=a.offsetHeight)}this.contentElement.style.maxHeight="".concat(n,"px")}}},{key:"onDisabled",value:function(e){}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"focus",value:function(){this.isFocusable&&xn.focusWithoutScrolling(this.focusElement)}},{key:"show",value:function(){var e=this;return new Promise((function(n){var r,o,i=e,a=i.showAnimation,u=i.element,c=t.floatRoot,s=u.style;i.isVisible||!1===i.trigger("beforeShow")?n():(i.cancelHideShowAnimation(),a&&(r=Object.keys(a)[0],o=a[r],i.currentAnimation={styleProp:r,resolve:n},i.isAnimating=!0,u.addEventListener("transitionend",i.afterHideShowAnimate),s[r]=o.from),i.floating&&(c.contains(u)||(i.rendered?c.appendChild(i.element):i.render(c,!1))),i._hidden=!1,u.classList.remove("b-hidden"),a&&(s.transition="".concat(r," ").concat(o.duration," ease ").concat(o.delay),i.requestAnimationFrame((function(){s[r]=o.to}))),i.afterShow(!a&&n),!i.inShowBy&&i.floating&&i.forElement&&!i.hidden&&i.alignTo(i.forElement))}))}},{key:"showBy",value:function(e){var t=this;t.inShowBy=!0;var n=t.show();return t.inShowBy=!1,t.isVisible&&t.alignTo(e),n}},{key:"showByPoint",value:function(e,t,n){var r=1===arguments.length?e:[e,t];return this.showBy(Object.assign({target:new tr(r[0],r[1],1,1),align:"t-b"},n))}},{key:"afterShow",value:function(e){this.boundMaxHeightBugHandler&&this.boundMaxHeightBugHandler(),this.trigger("show"),this.triggerPaint(),e&&e()}},{key:"triggerPaint",value:function(){var e=this,t=e.element,n=!e.isPainted;e.isVisible&&(n&&(e.scaleToFitWidth?(e.onParentElementResize=e.onParentElementResize.bind(e),Ar.addResizeListener(t.parentElement,e.onParentElementResize),e.isVisible&&e.updateScale()):e.monitorResize&&(e.onElementResize=e.onElementResize.bind(e),Ar.addResizeListener(t,e.onElementResize))),e.eachWidget&&e.eachWidget(Qo,!1),e.trigger("paint",{firstPaint:n}),n&&e.monitorResize&&!e.scaleToFitWidth&&Ar.onElementResize([{target:e.element}]),e.isPainted=!0)}},{key:"cancelHideShowAnimation",value:function(){var e=this,t=e.element,n=t.style;e.currentAnimation&&(e.isAnimating=!1,t.classList.remove("b-hiding"),t.removeEventListener("transitionend",e.afterHideShowAnimate),n.transition=n[e.currentAnimation.styleProp]="",e.currentAnimation=null)}},{key:"afterHideShowAnimate",value:function(e){if(!this.isDestroyed){var t=this,n=t.element,r=n.style,o=t.currentAnimation,i=o.styleProp,a=o.resolve;e.target===n&&e.propertyName===i&&(n.classList.remove("b-hiding"),t.isAnimating=!1,t.currentAnimation=null,n.removeEventListener("transitionend",t.afterHideShowAnimate),r.transition=r[i]="",t._hidden&&t.afterHideAnimation(),a())}}},{key:"hide",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(n){var r=e,o=r.element,i=o.style,a=t&&r.hideAnimation;if(!r._hidden&&!1!==r.trigger("beforeHide")){if(r._hidden=!0,!o)return;if(r.revertFocus(),r.isDestroyed)return void n();if(r.cancelHideShowAnimation(),a){var u=Object.keys(a)[0],c=a[u];Number(getComputedStyle(r.element)[u])!==c.to?(r.currentAnimation={styleProp:u,resolve:n},o.classList.add("b-hiding"),r.isAnimating=!0,o.addEventListener("transitionend",r.afterHideShowAnimate),i[u]=c.from,i.transition="".concat(u," ").concat(c.duration," ease ").concat(c.delay),r.requestAnimationFrame((function(){i[u]=c.to}))):o.classList.add("b-hidden")}else o.classList.add("b-hidden");r.afterHide(!a&&n)}}))}},{key:"doHideOrRealign",value:function(e){var t=this,n=t.anchoredTo,r=t.lastAlignSpec,o=r&&r.target,i=document.activeElement,a=Wo(t.getXY(),2),u=a[0],c=a[1];if(!t.element.contains(e.target)&&e.isTrusted&&!(9===e.target.nodeType&&t.element.contains(i)&&Jo[i]&&window.innerHeight<document.body.offsetHeight)&&(t.realign(e.target),!t.isDestroyed&&"hide"===t.scrollAction)){var s=Wo(t.getXY(),2),l=s[0],f=s[1];!(l!==u||f!==c||o instanceof cr)||n&&!xn.isDescendant(e.target,n)||t.hide()}}},{key:"afterHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=t.lastAlignSpec;n&&(n.targetHidden=null),t.removeTransientListeners(),t.hideAnimation||t.afterHideAnimation(),t.trigger("hide"),e&&e()}},{key:"removeTransientListeners",value:function(){var e=this;e.documentScrollListener&&(document.removeEventListener("scroll",e.doHideOrRealign,!0),e.documentScrollListener=!1),e.constrainListeners&&(Ar.removeResizeListener(e.lastAlignSpec.constrainTo,e.callRealign),e.constrainMutationMonitor&&e.constrainMutationMonitor.disconnect(),e.constrainListeners=!1)}},{key:"afterHideAnimation",value:function(){var e=this.element;this.floating&&t.floatRoot.contains(e)?e.remove():e.classList.add("b-hidden")}},{key:"getSibling",value:function(e){var t=this.parent,n=t?t.childItems:Array.from(this.element.parentElement.querySelectorAll(".b-widget"));return t?n[n.indexOf(this)+e]:ye.fromElement(n[n.indexOf(this.element)+e])}},{key:"up",value:function(e,t,n){for(var r=$o(n),o="number"===r,i="string"===r,a=this.owner,u=1;a;a=a.owner,u++){if(ge(a,e,t))return a;if(o&&u>=n)return;if(i&&ge(a,n,t))return;if(a===n)return}}},{key:"owns",value:function(e){if(e){if(e.eventPhase&&(e=e.target),1===e.nodeType){if(this.element.contains(e))return!0;e=ye.fromElement(e)}for(;e;){if(e===this)return!0;e=e.owner}}return!1}},{key:"onFocusIn",value:function(e){var t=this,n=t.element;t.containsFocus=!0,t.focusInEvent=e,n.classList.add("b-contains-focus"),n.contains(e.target)&&t.onInternalKeyDown&&!t.keyDownListenerRemover&&(t.keyDownListenerRemover=_r.on({element:n,keydown:"onInternalKeyDown",thisObj:t})),t.trigger("focusin",e)}},{key:"onFocusOut",value:function(e){var t=this;t.keyDownListenerRemover&&(t.keyDownListenerRemover(),t.keyDownListenerRemover=null),t.isDestroyed||(e.relatedTarget||t.revertFocus(!0),t.containsFocus=!1,t.element.classList.remove("b-contains-focus"),t.trigger("focusout",e))}},{key:"revertFocus",value:function(e){var t=this.focusInEvent&&this.focusInEvent.relatedTarget;(e||this.containsFocus&&t&&1===t.nodeType&&this.element.contains(document.activeElement))&&(t&&xn.isFocusable(t)||(t=this.getFocusRevertTarget()),t&&xn.isFocusable(t)&&xn.focusWithoutScrolling(t))}},{key:"getFocusRevertTarget",value:function(){var e=this,t=e.owner,n=e.focusInEvent,r=n&&n.backwards?1:-1,o=n&&n.relatedTarget,i=o&&ye.fromElement(o);if(t&&!t.isDestroyed&&(!o||!xn.isFocusable(o)||i&&!i.isFocusable)){if(o=null,t.eachWidget){var a=[];if(t.eachWidget((function(t){(t===e||t.isFocusable)&&a.push(t)}),!1),a.length>1){var u=a.indexOf(e);o=a[u+r]||a[u-r]}}!o&&t.isFocusable&&(o=t),o=o?o.focusElement:t.getFocusRevertTarget()}return o}},{key:"fromCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.element;if(!n)return null;var r=this;return r.cache[e]||(r.cache[e]=t?xn.children(n,e):xn.down(n,e)),r.cache[e]}},{key:"emptyCache",value:function(){this.cache={}}},{key:"mask",value:function(e){var t=this;return t.maskInstance&&t.maskInstance.destroy(),"string"==typeof e?t.maskInstance=me.mask(t.element,e):(e.element=t.element,t.maskInstance=me.mask(e))}},{key:"unmask",value:function(){this.maskInstance&&(me.unmask(this.element),this.maskInstance=null)}},{key:"onInternalResize",value:function(e,t,n,r,o){this._width=e.offsetWidth,this._height=e.offsetHeight}},{key:"onElementResize",value:function(e){var t=this,n=t.element,r=t._width,o=t._height,i=n.offsetWidth,a=n.offsetHeight;t.suspendResizeMonitor||r===i&&o===a||(t.onInternalResize(n,i,a,r,o),t.trigger("resize",{width:i,height:a,oldWidth:r,oldHeight:o}))}},{key:"updateScale",value:function(){var e=this,t=e.element,n=t.parentElement;e.configuredWidth||(e.configuredWidth=e.width),e.parentHeight||(e.parentHeight=n.offsetHeight),t.style.display="none";var r=n.offsetWidth/e.configuredWidth,o=e.allowGrowWidth?Math.min(r,1):r;t.style.transform="scale(".concat(o,")"),t.style.transformOrigin="top left",t.style.display="",n.style.height=e.parentHeight*o+"px",e.allowGrowWidth&&r>1&&(e.width=e.configuredWidth*r)}},{key:"onParentElementResize",value:function(e){this.updateScale()}},{key:"parseTRBL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";if("number"==typeof(e=e||0))return["".concat(e).concat(t),"".concat(e).concat(t),"".concat(e).concat(t),"".concat(e).concat(t)];var n=e.split(" "),r=n.length;return 1===r?n[1]=n[2]=n[3]=n[0]:2===r?(n[2]=n[0],n[3]=n[1]):3===r&&(n[3]=n[1]),[isFinite(n[0])?"".concat(n[0]).concat(t):n[0],isFinite(n[1])?"".concat(n[1]).concat(t):n[2],isFinite(n[2])?"".concat(n[2]).concat(t):n[3],isFinite(n[3])?"".concat(n[3]).concat(t):n[4]]}},{key:"title",set:function(e){this._title!==e&&(this._title=e,this.titleElement&&(this.titleElement.innerHTML=e))},get:function(){return this._title}},{key:"element",get:function(){return this._element},set:function(e){var t=this;"string"==typeof e?e=xn.createElementFromTemplate(e):"Object"===e.constructor.name?e=xn.createElement(e):1!==e.nodeType&&(e=xn.createElementFromTemplate(t.template(t))),t._element=e;var n=e.classList;e.id=t.id,e.className+=" "+t.widgetClassList.join(" "),t._hidden&&n.add("b-hidden"),t.parent||(t.floating||t.owner||n.add("b-outer"),we.isTouchDevice&&n.add("b-touch-events"),xn.scrollBarWidth?n.add("b-visible-scrollbar"):n.add("b-overlay-scrollbar"),we.isChrome?n.add("b-chrome"):we.isSafari?n.add("b-safari"):we.isFirefox?n.add("b-firefox"):we.isIE11?n.add("b-ie"):we.isEdge&&n.add("b-edge"));var r=e.querySelectorAll("[reference]"),o=!0,i=!1,a=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,l=s.getAttribute("reference");s.removeAttribute("reference"),t[l]=s,s.dataset&&(s.dataset.ownerCmp=t.id)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}},{key:"constrainTo",set:function(e){this._constrainTo=e},get:function(){return"_constrainTo"in this?this._constrainTo:window}},{key:"centered",set:function(e){if(this._centered=e,e&&!this.floating)throw new Error("`centered` is only relevant when a Widget is `floating`");e?this.element.classList.add("b-centered"):this.element.classList.remove("b-centered")},get:function(){return this._centered}},{key:"contentElement",get:function(){return this.element}},{key:"contentRange",get:function(){var e=this,t=e.contentElement,n=e._contentRange||(e._contentRange=we.isIE11?document.createRange():new Range);return n.collapsed&&(n.setStart(t,e.contentRangeStartOffset||0),n.setEnd(t,e.contentRangeEndOffset||t.childNodes.length)),n}},{key:"id",get:function(){return this._id},set:function(e){var t=this,n=t._id;if(e?t.hasGeneratedId=!1:(e=ye.generateId("b-".concat(t.$name.toLowerCase(),"-")),t.hasGeneratedId=!0),n){var r=t.element.querySelectorAll('[data-owner-cmp="'.concat(n,'"]'));ye.unregister(t);for(var o=0,i=r.length;o<i;o++)r[o].dataset.ownerCmp=e;t.element.id=e}t._id=e,ye.register(t)}},{key:"style",get:function(){return this.element?this.element.ownerDocument.defaultView.getComputedStyle(this.element):this._style},set:function(e){this._style=e,this.element&&xn.applyStyle(this.element,this._style)}},{key:"dataset",get:function(){return this.element.dataset},set:function(e){Object.assign(this.dataset,e)}},{key:"ref",set:function(e){this._ref=e,this.element.dataset.ref=e},get:function(){return this._ref}},{key:"clippedBy",set:function(e){this._clippedBy=Array.isArray(e)?e:e?[e]:null},get:function(){var e=this._clippedBy;if(e){var t,n=tr.from(e[0],null,!0);for(t=1;t<e.length;t++)n=n.intersect(tr.from(e[t],null,!0));return n}}},{key:"overflowElement",get:function(){return this.contentElement}},{key:"maxHeightElement",get:function(){return this.element}},{key:"scrollable",set:function(e){var t=this.overflowElement;"boolean"==typeof e&&(e={overflowX:e,overflowY:e}),t&&(e.element=t),e.widget=this,this._scrollable=new this.scrollerClass(e)},get:function(){return this._scrollable}},{key:"html",get:function(){return this.initializingElement||!this.element?this.content||this._html:this.contentElement.innerHTML},set:function(e){var t=this,n=null==e,r=t.element,o=t.contentElement;if(t._html!==e&&(t._html=e,r)){var i=o===r&&t._anchorElement;r.classList[n?"remove":"add"]("b-html"),i&&t.element.removeChild(i),t.contentElement.innerHTML=n?"":e,i&&r.appendChild(i),(t.floating||t.positioned)&&(t.isAligning||t.realign())}}},{key:"content",set:function(e){var t=this,n=null==e,r=t.element;if(t._html!==e&&(t._html=e,r)){var o=t.contentRange;r.classList[n?"remove":"add"]("b-html"),Cn(r)?(o.deleteContents(),n||o.insertNode(xn.createElementFromTemplate(e,{fragment:!0}))):t.contentElement.innerHTML=e,t.contentRangeStartOffset=o.startOffset,t.contentRangeEndOffset=o.endOffset,t.isAligning&&!t.positioned||t.realign()}}},{key:"anchorSize",get:function(){var e=this,t=this._anchorSize;if(!t){var n=parseFloat(xn.getStyleValue(e.element,"border-top-width")),r=xn.getStyleValue(e.element,"border-top-color"),o=e.anchorElement,i=o.firstElementChild,a=e.anchorPathElement=i.lastElementChild,u=e._hidden,c=xn.getStyleValue(e.contentElement,"background-color");c.match(Zo)&&(c=xn.getStyleValue(e.element,"background-color")),e.defaultAnchorBackgroundColor=c,t=o.getBoundingClientRect();var s=Wo(t=e._anchorSize=[t.width,t.height],2),l=s[0],f=s[1];i.setAttribute("height",f+n),i.setAttribute("width",l),a.setAttribute("d","M0,".concat(f,"L").concat(l/2,",0.5L").concat(l,",").concat(f)),n&&(a.setAttribute("stroke-width",n),a.setAttribute("stroke",r)),t[1]-=n,u&&e.element.classList.add("b-hidden"),e.themeChangeListener||(e.themeChangeListener=di.on({theme:"onThemeChange",thisObj:e}))}return e.anchorPathElement.setAttribute("fill",e.defaultAnchorBackgroundColor),t}},{key:"anchorElement",get:function(){var e=this._anchorElement;return e||(e=this._anchorElement=xn.createElement({parent:this.element,className:"b-anchor b-anchor-top",children:[{tag:"svg",ns:"http://www.w3.org/2000/svg",version:"1.1",class:"b-pointer-el",children:[{tag:"defs",children:[{tag:"filter",id:"shadow-filter",children:[{tag:"feDropShadow",dx:0,dy:-1,stdDeviation:2,"flood-opacity":.05}]}]},{tag:"path",filter:we.isIE11||we.isEdge?null:"url(#shadow-filter)"}]}]})),e}},{key:"anchor",set:function(e){this._anchor=e,this._anchorElement&&this._anchorElement.classList[e?"remove":"add"]("b-hide-display")},get:function(){return this._anchor}},{key:"draggable",get:function(){return this._draggable},set:function(e){var t=this,n=t.element;t._draggable=e,n.setAttribute("draggable",Boolean(e)),e?t.dragEventDetacher=_r.addListener({element:t.element,dragstart:t.onWidgetDragStart,dragend:t.onWidgetDragEnd,thisObj:t}):(t.dragEventDetacher&&t.dragEventDetacher(),t.dragOverEventDetacher&&t.dragOverEventDetacher())}},{key:"floating",get:function(){return this._floating},set:function(e){e=Boolean(e),Boolean(this.floating)!==e&&(this._floating=e)}},{key:"positioned",get:function(){return this._positioned},set:function(e){e=Boolean(e),Boolean(this.positioned)!==e&&(this.element.classList[e?"add":"remove"]("b-positioned"),this._positioned=e)}},{key:"x",set:function(e){this.setXY(e)},get:function(){return this.getXY()[0]}},{key:"y",set:function(e){this.setXY(null,e)},get:function(){return this.getXY()[1]}},{key:"width",get:function(){var e=this,t=e.element;return e.monitorResize?(null==e._width&&(e._width=t.offsetWidth),e._width):t.offsetWidth},set:function(e){xn.setLength(this.element,"width",e),this._width=null,this._flex=null,this.element.style.flex=we.isIE11?"":null}},{key:"maxWidth",get:function(){return xn.measureSize(this.element.style.maxWidth,this.element)},set:function(e){xn.setLength(this.element,"maxWidth",e)}},{key:"minWidth",get:function(){return xn.measureSize(this.element.style.minWidth,this.element)},set:function(e){xn.setLength(this.element,"minWidth",e)}},{key:"flex",get:function(){return this._flex},set:function(e){this._flex=e,("number"==typeof e||"string"==typeof e&&1===e.split(/\s/).length)&&(e="".concat(e," ").concat(e)),this.element.style.flex=e,this.element.style.width=we.isIE11?"":null}},{key:"alignSelf",get:function(){return this._alignSelf},set:function(e){this.element.style.alignSelf=e}},{key:"margin",get:function(){return this._margin},set:function(e){this.element.style.margin=this._margin=this.parseTRBL(e).join(" ")}},{key:"height",get:function(){var e=this,t=e.element;return e.monitorResize?(null==e._height&&(e._height=t.offsetHeight),e._height):t.offsetHeight},set:function(e){xn.setLength(this.element,"height",e),this._height=null}},{key:"maxHeight",get:function(){return xn.measureSize(this.maxHeightElement.style.maxHeight,this.element)},set:function(e){var t=this,n=t.element;xn.setLength(t.maxHeightElement,"maxHeight",e),we.isIE11&&t.contentElement!==n&&(null==e?Ar.removeResizeListener(n,t.boundMaxHeightBugHandler):(Ar.addResizeListener(n,t.boundMaxHeightBugHandler||(t.boundMaxHeightBugHandler=t.fixIEMaxHeightBug.bind(t))),document.body.contains(n)&&t.fixIEMaxHeightBug()))}},{key:"minHeight",get:function(){return xn.measureSize(this.element.style.minHeight,this.element)},set:function(e){xn.setLength(this.element,"minHeight",e)}},{key:"disabled",get:function(){return this._disabled},set:function(e){var t=this.element,n=this.focusElement;e&&this.revertFocus(),t&&(t.classList[e?"add":"remove"]("b-disabled"),n&&(n.disabled=e)),this._disabled=e,this.onDisabled(e)}},{key:"tooltip",get:function(){if(this._tooltip)return this._tooltip;var e=this.constructor.tooltip;return e&&e.trigger("pointerOver",{source:e,target:this.element}),e},set:function(e){var t=this;t._tooltip&&(t._tooltip.destroy(),t._tooltip=null),delete t.element.dataset.btip,e&&(t.preventTooltipOnTouch&&we.isTouchDevice||("Object"!==e.constructor.name&&(e={html:"string"==typeof e?e:t.placeholder,textContent:!0}),e.newInstance?(e.type="tooltip",e.forElement||(e.forElement=t.element),"showOnHover"in e||e.forSelector||(e.showOnHover=!0),"autoClose"in e||(e.autoClose=!0),t._tooltip=me.createWidget(e)):(t.element.dataset.btip=!0,t.tipConfig=e)))}},{key:"isVisible",get:function(){var e=this,t=e.element;return Boolean(t&&!e._hidden&&!e.isDestroying&&Cn(t)&&(!e.requireSize||function e(t){return t&&(t===document.body||("offsetParent"in t?t.offsetParent:e(t.parentNode)))}(t))&&(!e.owner||e.owner.isVisible))}},{key:"focusElement",get:function(){}},{key:"isFocusable",get:function(){var e=this.focusElement;return e&&this.isVisible&&!this.disabled&&(e===document.body||e.offsetParent)}},{key:"visible",set:function(e){this.hidden=!e}},{key:"hidden",set:function(e){this.isConfiguring?(this._hidden=e,this.element.classList[e?"add":"remove"]("b-hidden")):e?this.hide():this.show()},get:function(){return Boolean(this._hidden)}},{key:"assignedId",get:function(){return this.hasGeneratedId?null:this.id}},{key:"owner",get:function(){return this.parent||this._owner||this._element&&ye.fromElement(this.forElement||this.element.parentNode)},set:function(e){this._owner=e}},{key:"previousSibling",get:function(){return this.getSibling(-1)}},{key:"nextSibling",get:function(){return this.getSibling(1)}},{key:"widgetClassList",get:function(){var e=this,n=e.cls,r=e.classHierarchy(t).reduce((function(t,n){var r,o=Reflect.getOwnPropertyDescriptor(n.prototype,"widgetClass");if(o&&o.get)r=o.get.call(e);else{var i=Object.prototype.hasOwnProperty.call(n,"$name")||Object.prototype.hasOwnProperty.call(n,"_$name")?n.$name:n.name;(i.length<3||i.includes("$"))&&console.warn("Widget class ".concat(i," with no $name getter found")),r="b-".concat(i.toLowerCase())}return r&&t.push.apply(t,Vo(r.split(" "))),t}),n?n.split(" "):[]);return e.floating&&r.push("b-floating"),we.isTouchDevice&&r.push("b-touch"),r}},{key:"isAnimating",get:function(){return this._animating},set:function(e){this.isPainted&&e!==this.isAnimating&&(this.element.classList[e?"add":"remove"]("b-animating"),this._animating=e)}}])&&Go(n.prototype,r),o&&Go(n,o),t}(Wr(ae(ze(Y))));function ri(e){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ai(e,t){return!t||"object"!==ri(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ci(e,t){return(ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ni._$name="Widget",se.register("widget",ni);var si,li,fi=!1,di=(window.bryntum||(window.bryntum={})).GlobalEvents=new(function(e){function t(){return oi(this,t),ai(this,ui(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ci(e,t)}(t,e),n=t,(r=[{key:"suspendFocusEvents",value:function(){fi=!0}},{key:"resumeFocusEvents",value:function(){fi=!1}},{key:"lastInteractionType",get:function(){return li}}])&&ii(n.prototype,r),o&&ii(n,o),t}(ae(Y))),pi=function(e){return e.isVisible&&e.isTopModal};function hi(e,t,n,r,o,i,a){var u=new CustomEvent(e,a);return Object.defineProperty(u,"target",{get:function(){return t}}),Object.defineProperty(u,"relatedTarget",{get:function(){return n}}),u.fromWidget=r,u.toWidget=o,u.backwards=i,u}function yi(e,t){if(e===t)return e;for(var n=e instanceof ni;e&&!e[n?"owns":"contains"](t)&&e!==t;)e=e[n?"owner":"parentNode"];return e}var gi={element:document,touchstart:function(e){si=si||1!==e.changedTouches.length?null:e.changedTouches[0]},touchend:{handler:function(e){si&&(si.identifier===_r.contextMenuTouchId?(e.stopImmediatePropagation(),e.preventDefault()):1===e.changedTouches.length&&e.changedTouches[0].identifier===si.identifier&&di.trigger("globaltap",{event:e}),si=null)},passive:!1},mousedown:{handler:function(e){li="mouse",si||di.trigger("globaltap",{event:e})},passive:!1},keydown:function(){li="key"},keypress:function(){li="key"},focusin:function(e){if(ni.floatRoot.scrollTop=ni.floatRoot.scrollLeft=0,!fi){var t=e.relatedTarget?e.relatedTarget instanceof HTMLElement?e.relatedTarget:document.body:null,n=e.target||document.body,r=ye.fromElement(t),o=ye.fromElement(n),i=yi(r,o),a=!!(t&&4&n.compareDocumentPosition(t)),u=ye.query(pi),c=document.activeElement;if(!u||o&&u.owns(o)){for(var s=hi("focusout",t,e.target,r,o,a),l=r;l&&l!==i;l=l.owner)if(!l.isDestroyed&&!l.isDestroying&&l.onFocusOut&&(l.onFocusOut(s),c!==document.activeElement))return;if(i&&e.target===i.element)document.activeElement===n&&i.focusElement&&i.focusElement!==i.element&&i.setTimeout((function(){return i.focus&&i.focus()}),0);else{s=hi("focusin",n,t,r,o,a);for(var f=o;f&&f!==i;f=f.owner)f.isDestroyed||f.isDestroying||f.onFocusIn&&f.onFocusIn(s)}var d=yi(t&&1===t.nodeType?t:null,n)||n.parentNode;s=hi("focusmove",n,t,r,o,a,{bubbles:!0}),d.dispatchEvent(s)}else u.focus()}},focusout:function(e){fi||e.relatedTarget&&ye.fromElement(e.relatedTarget)||gi.focusin({target:e.relatedTarget,relatedTarget:e.target})},capture:!0,passive:!0};function vi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=Mt.assign({},gi,{element:e});_r.on(t)}function mi(e){return(mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Si(e,t){return!t||"object"!==mi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oi(e,t,n){return(Oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ei(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ci(e,t){return(Ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}vi();var xi=function(e){function t(){return wi(this,t),Si(this,Ei(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ci(e,t)}(t,e),n=t,o=[{key:"mask",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;return new t("string"!=typeof e?Object.assign({element:n},e):{element:n,text:e})}},{key:"unmask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return e.mask&&e.mask.close()}},{key:"$name",get:function(){return"Mask"}},{key:"defaultConfig",get:function(){return{mode:"dark",icon:"b-icon b-icon-spinner",text:null,type:null,progress:null,maxProgress:null,useTransition:!1}}}],(r=[{key:"construct",value:function(e){Oi(Ei(t.prototype),"construct",this).call(this,e),this.element||(this.element=document.body),this.show()}},{key:"doDestroy",value:function(){var e=this;e.maskElement&&(e.maskElement.remove(),e.maskElement=null,e.mode.endsWith("blur")&&xn.forEachChild(e.element,(function(t){t.classList.remove("b-masked-".concat(e.mode))})),e.elementMask=null),Oi(Ei(t.prototype),"doDestroy",this).call(this)}},{key:"create",value:function(){var e,t=this;t.elementMask=t,Object.assign(t,xn.createElement({parent:t.element,className:(e={"b-mask":1,"b-mask-type":1,"b-widget":1},bi(e,"b-mask-".concat(t.mode),1),bi(e,"b-progress",t.maxProgress),bi(e,"b-prevent-transitions",!t.useTransition),e),reference:"maskElement",children:[{className:"b-mask-content",reference:"maskContent",children:[t.maxProgress?{className:"b-mask-progress-bar",reference:"progressElement",style:{width:Math.round(t.progress/t.maxProgress*100)+"%"}}:null,{className:"b-mask-text",reference:"maskText"}]}]})),t.text=t._text}},{key:"show",value:function(){var e=this;e.hasTimeout("hide")&&(e.resolve(),e.clearTimeout("hide")),e.elementMask||e.create();var t=e.element,n=e.maskElement;n&&(t.classList.add("b-masked"),n.classList.add("b-visible"),n.classList.remove("b-hidden"),e.shown=!0,e.mode.endsWith("blur")&&xn.forEachChild(t,(function(t){t!==n&&t.classList.add("b-masked-".concat(e.mode))})))}},{key:"hide",value:function(){var e=this,t=e.element,n=e.maskElement;return new Promise((function(r){e.shown?(e.shown=!1,n.classList.remove("b-visible"),n.classList.add("b-hidden"),t.classList.remove("b-masked"),e.mode.endsWith("blur")&&xn.forEachChild(t,(function(t){t!==n&&t.classList.remove("b-masked-".concat(e.mode))})),e.resolve=r,e.setTimeout((function(){return r()}),500,"hide")):r()}))}},{key:"close",value:function(){var e=this;return new Promise((function(t){e.hide().then((function(){e.destroy(),t()}))}))}},{key:"typeName",get:function(){return"string"==typeof this.type?this.type.trim():""}},{key:"maskName",get:function(){return"mask".concat(this.typeName)}},{key:"elementMask",get:function(){return this.element&&this.element[this.maskName]},set:function(e){this.element&&(this.element[this.maskName]=e)}},{key:"text",set:function(e){var t=this;t._text=e||"",t.maskText&&(t.maskText.innerHTML='<i class="b-mask-icon '.concat(t.icon,'"></i>').concat(t._text))},get:function(){return this._text}},{key:"progress",set:function(e){this._progress=e,this.progressElement&&null!=e&&(this.progressElement.style.width=Math.round(e/this._maxProgress*100)+"%")},get:function(){return this._progress}},{key:"maxProgress",set:function(e){this._maxProgress=e,this.progress=this.progress},get:function(){return this._maxProgress}}])&&ki(n.prototype,r),o&&ki(n,o),t}(Wr());xi._$name="Mask";n(79);function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ri(e,t){return!t||"object"!==_i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pi(e,t,n){return(Pi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ti(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ti(e){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ai(e,t){return(Ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mi=function(e){function t(){return ji(this,t),Ri(this,Ti(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ai(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Tool"}}],(r=[{key:"template",value:function(){return'<div class="b-icon"></div>'}},{key:"construct",value:function(e){Pi(Ti(t.prototype),"construct",this).call(this,e),_r.on({element:this.element,click:"onClick",mousedown:"onMousedown",thisObj:this})}},{key:"onClick",value:function(e){var t=this,n=t.panel,r="function"==typeof t.handler?t.handler:n[t.handler];!1!==n.trigger("toolclick",{tool:t})&&r&&t.callback(r,n,[e])}},{key:"onMousedown",value:function(e){var t=this.panel,n=t.focusElement;e.preventDefault(),n&&document.activeElement!==n&&t.focus()}},{key:"panel",get:function(){return this.parent}}])&&Di(n.prototype,r),o&&Di(n,o),t}(ni);function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ni(e,t){return!t||"object"!==Ii(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hi(e){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bi(e,t){return(Bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Mi._$name="Tool",se.register("tool",Mi);var zi=function(e){function t(){return Fi(this,t),Ni(this,Hi(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bi(e,t)}(t,e),n=t,o=[{key:"getLayout",value:function(e,n){if(e instanceof t)return e;var r="string"==typeof e,o={owner:n};return new(r?Vi[e]:e)(r?o:Object.assign(o,e))}},{key:"registerLayout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.$name.toLowerCase();Vi[t]=e}},{key:"defaultConfig",get:function(){return{containerCls:null,itemCls:null}}}],(r=[{key:"renderChildren",value:function(){var e=this.owner,t=this.containerCls,n=this.itemCls,r=e.contentElement,o=e.items,i=e.itemCls,a=o&&o.length;if(r.classList.add("b-content-element"),t&&r.classList.add(t),a){e.textContent=!1;for(var u=0;u<a;u++){var c=o[u],s=c.element;s.dataset.itemIndex=u,n&&s.classList.add(n),i&&s.classList.add(i),s.classList.remove("b-outer"),c.render(r,Boolean(e.isPainted))}}}},{key:"removeChild",value:function(e){var t=e.element,n=this.owner,r=this.itemCls,o=n.contentElement,i=n.itemCls;o.removeChild(t),delete t.dataset.itemIndex,r&&t.classList.remove(r),i&&t.classList.remove(i),this.fixChildIndices()}},{key:"appendChild",value:function(e){var t=e.element,n=this.owner.indexOfChild(e),r=this.owner,o=this.itemCls,i=r.contentElement,a=r.itemCls;t.dataset.itemIndex=n,r.textContent=!1,o&&t.classList.add(o),a&&t.classList.add(a),i.appendChild(t)}},{key:"insertChild",value:function(e,t){var n=e.element,r=this.owner,o=this.itemCls,i=r.contentElement,a=i.querySelector('[data-item-index="'.concat(t-1,'"]')),u=r.itemCls;r.textContent=!1,o&&n.classList.add(o),u&&n.classList.add(u),i.insertBefore(n,a&&a.nextSibling),this.fixChildIndices()}},{key:"fixChildIndices",value:function(){this.owner.items.forEach((function(e,t){e.element.dataset.itemIndex=t}))}}])&&Li(n.prototype,r),o&&Li(n,o),t}(ae(Y)),Vi={default:zi};function Wi(e){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gi(e,t){return!t||"object"!==Wi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ui(e,t,n){return(Ui="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xi(e,t){return(Xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}zi._$name="Layout";var Ki=0,Zi=function(e){return e.ripple},Ji=window.Ripple=new(function(e){function t(){return $i(this,t),Gi(this,qi(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xi(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{id:"bryntum-ripple",old_element:{children:[{className:"b-ripple-inner",reference:"rippleElement"}]},element:{children:[{tag:"svg",class:"b-ripple-inner",reference:"rippleElement",ns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 100 100",children:[{reference:"circleElement",tag:"circle",cx:"0",cy:"0",r:10}]}]},floating:!0,hideAnimation:!1,showAnimation:!1,scrollAction:"realign",color:"rgba(0,0,0,.3)",startRadius:10,radius:100}}},{key:"$name",get:function(){return"Ripple"}}],(r=[{key:"afterConstruct",value:function(){Ui(qi(t.prototype),"afterConstruct",this).call(this),_r.on({element:document,mousedown:"onRippleControllingEvent",thisObj:this,capture:!0,once:!0})}},{key:"onRippleControllingEvent",value:function(e){var t=this;t.show();var n=xn.getStyleValue(t.circleElement,"animationName");t.hide(),t.listenerDetacher&&t.listenerDetacher(),n&&"none"!==n&&(t.listenerDetacher=_r.on({mousedown:{element:document,capture:!0,handler:"onDocumentMousedown"},touchstart:{element:document,capture:!0,handler:"onDocumentTouchStart"},animationend:{element:t.circleElement,handler:"onAnimationEnd"},thisObj:t}),"mousedown"===e.type&&(t.onDocumentMousedown(e),di.on({theme:"onRippleControllingEvent",thisObj:this})))}},{key:"onDocumentTouchStart",value:function(e){Ki=performance.now(),this.handleTriggerEvent(e)}},{key:"onDocumentMousedown",value:function(e){performance.now()-Ki>200&&this.handleTriggerEvent(e)}},{key:"handleTriggerEvent",value:function(e){var t=ye.fromElement(e.target,Zi);if(t){var n=t.ripple,r=n.delegate?e.target.closest(n.delegate):t.focusElement||t.element;if(r){var o=Mt.assign({event:e,target:r,radius:this.radius},n);if("string"==typeof o.clip&&(o.clip=t[o.clip]||e.target.closest(o.clip),!o.clip))return;this.ripple(o)}}}},{key:"ripple",value:function(e){var t=e.event,n=e.point,r=void 0===n?_r.getClientPoint(t):n,o=e.target,i=void 0===o?t.target:o,a=e.clip,u=void 0===a?i:a,c=e.radius,s=void 0===c?this.radius:c,l=e.color,f=void 0===l?this.color:l;this.clip=u,u=tr.from(u,null,!0);var d=this,p=u.getDelta(r),h=d.rippleElement.style,y=d.circleElement;d.hide(),d.alignTo(u),h.transform="translateX(".concat(p[0],"px) translateY(").concat(p[1],"px)"),h.height=h.width="".concat(s,"px"),y.setAttribute("r",s),y.setAttribute("fill",f),d.show(),d.requestAnimationFrame((function(){document.addEventListener("scroll",d.callRealign,!0),d.documentScrollListener=!0}))}},{key:"alignTo",value:function(e){1===e.nodeType&&(e=tr.from(e,null,!0));var t=e,n=t.x,r=t.y,o=t.width,i=t.height;this.x=n,this.y=r,this.height=i,this.width=o}},{key:"onAnimationEnd",value:function(e){"b-ripple-expand"===e.animationName&&this.hide()}},{key:"realign",value:function(){this.isVisible&&this.alignTo(this.clip)}}])&&Yi(n.prototype,r),o&&Yi(n,o),t}(ni));function Qi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var na=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;n.generation=0,n.items=new Set,n.idMap={},n.idProperty="id",t&&(t.idProperty&&(n.idProperty=t.idProperty),t.values&&(n.values=t.values))}var t,n,r;return t=e,(n=[{key:"get",value:function(e){return this.idMap[Oo(e)]}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&Array.isArray(t[0])&&(t=t[0]);for(var r=this,o=r.items,i=r.idMap,a=r.idProperty,u=t.length,c=0;c<u;c++){var s=t[c],l=ko[ea(s)]?s:Oo(s[a]),f=i[l];null==f?(i[l]=s,o.add(s),r.generation++):f!==s&&(i[l]=s,o.delete(f),o.add(s))}}},{key:"remove",value:function(e){Array.isArray(e)||(e=[e]);for(var t=this.items,n=this.idMap,r=this.idProperty,o=e.length,i=0;i<o;i++){var a=e[i],u=ko[ea(a)]?a:Oo(a[r]),c=n[u];null!=c&&(t.delete(c),delete n[u],this.generation++)}}},{key:"clear",value:function(){this.items.clear(),this.idMap={},this.generation++}},{key:"changeId",value:function(e,t){var n=this.idMap,r=this.idProperty,o=ko[ea(e)]?e:Oo(e[r]),i=this.get(o);if(i){var a=this.get(t);if(a&&i!==a)throw new Error("Attempt to set item ".concat(o," to already existing member's id ").concat(t));i[r]=t,delete n[o],n[t]=i}}},{key:"includes",value:function(e){var t=ko[ea(e)]?e:Oo(e[this.idProperty]);return Boolean(this.idMap[t])}},{key:"map",value:function(e,t){var n=this.items,r=new Array(n.size),o=0;return n.forEach((function(i){r[o]=e.call(t,i,o++,n)})),r}},{key:"forEach",value:function(e,t){return this.items.forEach(e,t)}},{key:"find",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.items[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(e(a))return a}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:Symbol.iterator,value:function(){return this.items[Symbol.iterator]()}},{key:"indexOf",value:function(e){return this.values.indexOf(e)}},{key:"sort",value:function(e){this.values=this.values.sort(e)}},{key:"some",value:function(e,t){return this.values.some(e,t)}},{key:"count",get:function(){return this.items.size}},{key:"values",get:function(){return Qi(this.items)},set:function(e){Array.isArray(e)||(e=[e]),this.clear(),this.add.apply(this,e),this.generation++}}])&&ta(t.prototype,n),r&&ta(t,r),e}();function ra(e){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aa(e,t){return!t||"object"!==ra(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ua(e,t,n){return(ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ca(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ca(e){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sa(e,t){return(sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}na._$name="Bag";var la=Object.freeze({}),fa=function(e){return e.weight},da=function(e,t){return(e.weight||0)-(t.weight||0)},pa=function(e){function t(){return oa(this,t),aa(this,ca(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sa(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Container"}},{key:"defaultConfig",get:function(){return{items:null,widgets:null,defaults:null,defaultType:"widget",layoutStyle:null,itemCls:null,layout:"default",namedItems:null,textContent:!0}}}],(r=[{key:"setConfig",value:function(e,n){e.widgets&&(e.items=e.widgets),ua(ca(t.prototype),"setConfig",this).call(this,e,n)}},{key:"startConfigure",value:function(e){var n=this.items;this.hasItems=Boolean(n&&n.length),ua(ca(t.prototype),"startConfigure",this).call(this,e)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0;1===t.length&&(Array.isArray(t[0])?t=t[0]:r=!1);for(var o=this,i=[],a=0;a<t.length;a++){var u=t[a];o._items.includes(u)&&(o._items.remove(u),o.layout.removeChild(u),i.push(u),o.unregisterReference(u))}return r?i:i[0]}},{key:"removeAll",value:function(){return this.remove(this.items)}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0;1===t.length&&(Array.isArray(t[0])?t=t[0]:r=!1);for(var o=this,i=[],a=0;a<t.length;a++){var u=t[a];u instanceof ni?u.parent=o:u=o.createWidget(u),o._items.includes(u)||(o.registerReference(u),o._items.add(u),o.layout.appendChild(u),i.push(u))}return r?i:i[0]}},{key:"insert",value:function(e,t){var n=this,r=n._items;e instanceof ni?e.parent=n:e=n.createWidget(e),r.includes(t)&&(t=n.indexOfChild(t)),t=Math.min(t,r.count);var o=r.values;return o.splice(t,0,e),r.values=o,n.registerReference(e),n.layout.insertChild(e,t),e}},{key:"indexOfChild",value:function(e){return this._items.indexOf(e)}},{key:"processItemsArray",value:function(e,t){var n,r,o=e.length;for(n=0;n<o;n++)(r=e[n])instanceof ni?r.parent=this:r=this.createWidget(r),r&&t.add(r)}},{key:"processItemsObject",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:la,o=arguments.length>2?arguments[2]:void 0;for(n in e)(t=e[n])&&(n in r&&(t="object"===ra(t)?Mt.merge(Mt.clone(r[n]),t):r[n]),t&&(t instanceof ni?t.parent=this:t=this.createWidget(t),t&&(t.ref=n,o.add(t))))}},{key:"registerReference",value:function(e){var t=e.ref||e.id;if(t)for(var n=this;n;n=n.parent)n.widgetMap[t]||(n.widgetMap[t]=e)}},{key:"unregisterReference",value:function(e){var t=e.ref||e.id;if(t)for(var n=this;n;n=n.parent)n.widgetMap[t]===e&&delete n.widgetMap[t]}},{key:"getValues",value:function(e){for(var t=this.queryAll((function(e){return e.name})),n=t.length,r={},o=0;o<n;o++){var i=t[o],a=i.name;e&&!e(i)||(r[a]=i.value)}return r}},{key:"eachWidget",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.childItems,r=n?n.length:0,o=0;o<r;o++){var i=n[o];if(!1===e(i))return!1;if(t&&i.eachWidget&&!1===i.eachWidget(e,t))return!1}return!0}},{key:"queryAll",value:function(e){var t=[];return this.eachWidget((function(n){e(n)&&t.push(n)})),t}},{key:"query",value:function(e){var t=null;return this.eachWidget((function(n){if(e(n))return t=n,!1})),t}},{key:"getWidgetById",value:function(e){return this.widgetMap[e]}},{key:"processWidgetConfig",value:function(e){}},{key:"createWidget",value:function(e){var t=this;"string"==typeof e?e={html:e}:1===e.nodeType&&(e={element:e,id:e.id}),(e=Object.setPrototypeOf({parent:t},e)).type||(e.type=t.defaultType);for(var n=e.parent;n;n=n.parent)if(!1===n.processWidgetConfig(e))return null;return!1===t.trigger("beforeWidgetCreate",{widget:e})?null:me.createWidget(Mt.assign({},t.defaults,e),t.defaultType||"widget")}},{key:"render",value:function(){this.layout.renderChildren(),ua(ca(t.prototype),"render",this).apply(this,arguments)}},{key:"doDestroy",value:function(){!this.configuredItems&&this.items&&this.items.forEach((function(e){return e.destroy&&e.destroy()})),ua(ca(t.prototype),"doDestroy",this).call(this)}},{key:"setValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._isSettingValues=!0,this.eachWidget((function(n){var r=n.highlightExternalChange,o=t?n.name:n.name||n.ref||n.id;"value"in n&&o&&(n.highlightExternalChange=!1,n.value=e&&o in e?e[o]:null,n.highlightExternalChange=r)}),!0),this._isSettingValues=!1}},{key:"widgets",set:function(e){console.warn("`widgets` was deprecated in 2.1, please change your code to use `items`")},get:function(){return console.warn("`widgets` was deprecated in 2.1, please change your code to use `items`"),this.items}},{key:"items",set:function(e){this.configuredItems=e},get:function(){var e=this,t=e._items||(e._items=new na),n=e.configuredItems;return n&&(e.configuredItems=!1,Array.isArray(n)?e.processItemsArray(n,t):n&&e.processItemsObject(n,e.namedItems,t),t.some(fa)&&t.sort(da),t.forEach(e.registerReference,e)),t.values}},{key:"widgetMap",get:function(){return this._widgetMap||(this._widgetMap={}),this._thisIsAUsedExpression(this.items),this._widgetMap}},{key:"record",set:function(e){this._record=e,this.setValues(e,!0)},get:function(){return this._record}},{key:"textContent",set:function(e){this._textContent=e,this.element.classList[e?"add":"remove"]("b-text-content")},get:function(){return this._textContent}},{key:"layoutStyle",set:function(e){xn.applyStyle(this.contentElement,e),this._layoutStyle=e},get:function(){return this._layoutStyle}},{key:"layout",set:function(e){this._layout=zi.getLayout(e,this)},get:function(){return this._layout||(this._layout=new zi)}},{key:"childItems",get:function(){return this.items}},{key:"focusElement",get:function(){var e=this.query(this.defaultFocus||function(e){return e.isFocusable});return e?e.focusElement:ua(ca(t.prototype),"focusElement",this)}},{key:"isValid",get:function(){var e=!0;return this.eachWidget((function(t){if("isValid"in t&&!t.isValid)return e=!1}),!0),e}},{key:"values",get:function(){var e={};return this.eachWidget((function(t){"value"in t&&(e[t.name||t.ref||t.id]=t.value)}),!0),e},set:function(e){this.setValues(e)}},{key:"isSettingValues",get:function(){return this._isSettingValues||this.parent&&this.parent.isSettingValues}}])&&ia(n.prototype,r),o&&ia(n,o),t}(ni);function ha(e){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function va(e,t){return!t||"object"!==ha(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ma(e,t,n){return(ma="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ba(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ba(e){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wa(e,t){return(wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}pa._$name="Container",se.register("container",pa);var ka=function(e){function t(){return ya(this,t),va(this,ba(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wa(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Toolbar"}},{key:"defaultConfig",get:function(){return{defaultType:"button",widgetCls:null,layout:"default"}}}],(r=[{key:"createWidget",value:function(e){"->"===e?e={type:"widget",cls:"b-toolbar-fill"}:"|"===e?e={type:"widget",cls:"b-toolbar-separator"}:"string"==typeof e&&(e={type:"widget",cls:"b-toolbar-text",html:e});var n=ma(ba(t.prototype),"createWidget",this).call(this,e);return this.widgetCls&&n.element.classList.add(this.widgetCls),n}}])&&ga(n.prototype,r),o&&ga(n,o),t}(pa);function Sa(e){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xa(e,t){return!t||"object"!==Sa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _a(e,t,n){return(_a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Da(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ja(e,t,n,r){return(ja="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Da(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Da(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ra(e)););return e}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pa(e,t){return(Pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ka._$name="Toolbar",se.register("toolbar",ka);var Ta=function(e){return!e.classList.contains("b-focus-trap")&&xn.isFocusable(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},Aa=function(e,t){return(e.weight||0)-(t.weight||0)},Ma=function(e,t){return(t.weight||0)-(e.weight||0)};Ta.acceptNode=Ta;var Ia=function(e){function t(){return Ea(this,t),xa(this,Ra(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pa(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Panel"}},{key:"defaultConfig",get:function(){return{trapFocus:null,title:null,header:null,footer:null,tools:null,tbar:null,bbar:null}}}],(r=[{key:"onFocusTrapped",value:function(e){var t=this,n=t.treeWalker;e.target===t.bottomFocusTrap?(n.currentNode=t.topFocusTrap,n.nextNode()):(n.currentNode=t.bottomFocusTrap,n.previousNode()),t.requestAnimationFrame((function(){return n.currentNode.focus()}))}},{key:"doDestroy",value:function(){var e=this.tools;if(e)for(var n=0,r=Object.values(e);n<r.length;n++)r[n].destroy();this.tbar&&this.tbar.destroy(),this.bbar&&this.bbar.destroy(),_a(Ra(t.prototype),"doDestroy",this).call(this)}},{key:"element",set:function(e){var n=this,r=n.title&&(!n.parent||!n.parent.suppressChildHeaders),o=n.header||(n.tools||r?{}:null),i=n.footer,a=o&&("string"==typeof o?o:n.title||o.title),u=o&&(o.titleAlign||"start"),c=n.classHierarchy(t).map((function(e){return"b-".concat(e.$name.toLowerCase(),"-header")})).join(" "),s=n.tbar,l=n.bbar||n.buttons,f=[{reference:"topFocusTrap",className:"b-focus-trap",tabIndex:0}],d=[],p=[],h={children:f};if((n.hasItems||n.focusable)&&(h.tabIndex=0),o){var y=[{reference:"titleElement",className:"b-header-title b-align-".concat(u),html:a}];for(var g in n.tools){var v=n.tools[g];"start"===v.align?d.unshift(v):p.push(v)}d.sort(Aa),p.sort(Ma),y.unshift.apply(y,Oa(d.map((function(e){return e.element})))),y.push.apply(y,Oa(p.map((function(e){return e.element})))),f.push({tag:"header",reference:"headerElement",className:"".concat(c," b-dock-").concat(o.dock||"top"," ").concat(o.cls||""),children:y})}s&&(s.layout.renderChildren(),f.push(s.element)),f.push(n.bodyConfig),l&&(l.layout.renderChildren(),f.push(l.element)),i&&f.push({tag:"footer",reference:"footerElement",className:"".concat(c," b-dock-").concat(i.dock||"bottom"," ").concat(i.cls||"")}),f.push({reference:"bottomFocusTrap",className:"b-focus-trap",tabIndex:0}),function(e,t,n,r,o){if(!ja(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Ra(t.prototype),"element",h,this,!0)},get:function(){return _a(Ra(t.prototype),"element",this)}},{key:"bodyConfig",set:function(e){this._bodyConfig=e},get:function(){return this._bodyConfig||{reference:"bodyElement",className:this.classHierarchy(t).map((function(e){return"b-".concat(e.$name.toLowerCase(),"-content")})).join(" "),html:this.html}}},{key:"tbar",get:function(){return this._tbar},set:function(e){e instanceof ka?e.parent=this:(Array.isArray(e)&&(e={items:e}),e=new ka(Object.assign({parent:this},e))),this.hasItems=this.hasItems||e.hasItems,e.element.classList.add("b-top-toolbar","b-dock-".concat(e.dock||"top")),this._tbar=e}},{key:"bbar",get:function(){return this._bbar},set:function(e){e instanceof ka?e.parent=this:(Array.isArray(e)&&(e={items:e}),e=me.createWidget(Object.assign({type:"toolbar",parent:this},e))),this.hasItems=this.hasItems||e.hasItems,e.element.classList.add("b-bottom-toolbar","b-dock-".concat(e.dock||"bottom")),this._bbar=e}},{key:"childItems",get:function(){var e=this,t=e.items?e.items.slice():[];return e.tools&&t.unshift.apply(t,Oa(Object.values(e.tools))),e.tbar&&t.unshift(e.tbar),e.bbar&&t.push(e.bbar),t}},{key:"tools",set:function(e){var t=this._tools={};for(var n in e){var r=t[n]=me.createWidget(Mt.assign({type:"tool",ref:n,reference:n,parent:this},e[n]),this.defaultToolType||"tool");this.registerReference(r,r.ref)}},get:function(){return this._tools}},{key:"trapFocus",set:function(e){var t=this;t.element.classList[e?"add":"remove"]("b-focus-trapped"),e?(t.focusTrapListener=_r.on({element:t.element,focusin:"onFocusTrapped",delegate:".b-focus-trap",thisObj:t}),t.treeWalker||(t.treeWalker=document.createTreeWalker(t.element,NodeFilter.SHOW_ELEMENT,Ta,!1))):t.focusTrapListener&&(t.focusTrapListener(),t.focusTrapListener=null),t._trapFocus=e},get:function(){return this._trapFocus}},{key:"focusElement",get:function(){return this.hasItems&&(_a(Ra(t.prototype),"focusElement",this)||this.element)}},{key:"contentElement",get:function(){return this.element&&this.bodyElement}},{key:"widgetClassList",get:function(){var e=this,n=_a(Ra(t.prototype),"widgetClassList",this),r=e.header;return(r||e.title||e.tools)&&n.push("b-panel-has-header b-header-dock-".concat(r&&r.dock||"top")),e.tbar&&n.push("b-panel-has-top-toolbar"),e.bbar&&n.push("b-panel-has-bottom-toolbar"),n}}])&&Ca(n.prototype,r),o&&Ca(n,o),t}(pa);function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function La(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ha(e,t){return!t||"object"!==Fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ba(e,t,n,r){return(Ba="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Va(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function za(e,t,n){return(za="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Va(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Va(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wa(e)););return e}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $a(e,t){return($a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ia._$name="Panel",se.register("panel",Ia);var Ya=function(e){function t(){return La(this,t),Ha(this,Wa(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Popup"}},{key:"defaultConfig",get:function(){return{autoShow:!0,autoClose:!0,showOnClick:!1,forElement:null,monitorResize:!0,floating:!0,hidden:!0,axisLock:!0,hideAnimation:we.isIE11?null:{opacity:{from:1,to:0,duration:".3s",delay:"0s"}},showAnimation:we.isIE11?null:{opacity:{from:0,to:1,duration:".4s",delay:"0s"}},testConfig:{hideAnimation:null,showAnimation:null},closeAction:"hide",trapFocus:!0,focusOnToFront:!0,closable:null,modal:null}}},{key:"modalMask",get:function(){var e=this;return e._modalMask?e.floatRoot.contains(e._modalMask)||e.floatRoot.appendChild(e._modalMask):e._modalMask=xn.createElement({className:"b-modal-mask b-hide-display",parent:e.floatRoot}),e._modalMask}}],(r=[{key:"startConfigure",value:function(e){this._thisIsAUsedExpression(this.closable),za(Wa(t.prototype),"startConfigure",this).call(this,e)}},{key:"finalizeInit",value:function(){var e=this;e.anchoredTo=e.forElement,e.initialAnchor=e.anchor,e.forElement&&e.showOnClick&&(e.initialConfig.autoShow||(e.autoShow=!1),_r.on({element:e.forElement,click:"onElementUserAction",thisObj:e})),za(Wa(t.prototype),"finalizeInit",this).call(this),e.autoShow&&(!0===e.autoShow?e.show():e.setTimeout((function(){return e.show()}),e.autoShow))}},{key:"doDestroy",value:function(){this.syncModalMask(),za(Wa(t.prototype),"doDestroy",this).call(this)}},{key:"close",value:function(){if(!this._hidden&&!1!==this.trigger("beforeClose")||this._hidden&&"destroy"==this.closeAction)return this[this.closeAction]()}},{key:"onElementResize",value:function(e,n,r){var o=this,i=o.lastAlignSpec;if(o.isVisible&&i&&i.target){var a=!n||r.height!==n.height,u=!n||r.width!==n.width;(a&&2!==i.zone||u&&1!==i.zone)&&o.requestAnimationFrame((function(){return o.realign()}))}za(Wa(t.prototype),"onElementResize",this).call(this,e)}},{key:"onInternalKeyDown",value:function(e){"Escape"===e.key&&(e.stopImmediatePropagation(),this.close(!0))}},{key:"onDocumentMouseDown",value:function(e){var n=e.event,r=this;r.modal&&n.target===t.modalMask?(n.preventDefault(),r.modal.closeOnMaskTap?r.close():r.containsFocus||r.focus()):r.owns(n.target)||!r.autoClose||r.containsFocus||r.close(),r.setTimeout((function(){return document.body.classList.add("b-using-keyboard")}),0)}},{key:"onFocusIn",value:function(e){var n=document.activeElement;za(Wa(t.prototype),"onFocusIn",this).call(this,e),document.activeElement===n&&e.target===this.element&&this.focus()}},{key:"onFocusOut",value:function(e){!this.modal&&this.autoClose&&this.close(),za(Wa(t.prototype),"onFocusOut",this).call(this,e)}},{key:"onShow",value:function(){var e=this;e.autoClose&&!e.mouseDownRemover&&e.addDocumentMouseDownListener(),e.focusOnToFront&&e.focus(),za(Wa(t.prototype),"onShow",this)&&za(Wa(t.prototype),"onShow",this).call(this),e.syncModalMask()}},{key:"addDocumentMouseDownListener",value:function(){this.mouseDownRemover=di.on({globaltap:"onDocumentMouseDown",thisObj:this})}},{key:"syncModalMask",value:function(){var e=this,n=e.modal,r=t.modalMask;if(n&&e.isVisible)e._x||e._y||(e.centered=!0),r.classList.remove("b-hide-display"),r.parentNode.insertBefore(r,e.element),e.element.classList.add("b-modal");else{e.element.classList.remove("b-modal");var o=e.constructor.floatRoot.querySelectorAll(".b-modal");if(o.length){var i=o[o.length-1];r.classList.remove("b-hide-display"),r.parentNode.insertBefore(r,i)}else r.classList.add("b-hide-display")}}},{key:"onHide",value:function(){this.mouseDownRemover&&(this.mouseDownRemover(),this.mouseDownRemover=null),za(Wa(t.prototype),"onHide",this)&&za(Wa(t.prototype),"onHide",this).call(this),this.syncModalMask()}},{key:"onElementUserAction",value:function(){this.show()}},{key:"isTopModal",get:function(){return xn.isVisible(t.modalMask)&&this.element.previousElementSibling===t.modalMask}},{key:"closable",set:function(e){this._closable=e,this.tools||(this.tools={})},get:function(){return this._closable}},{key:"tools",set:function(e){this.closable&&((e||(e={})).close={cls:"b-popup-close",handler:"close",weight:-1e3}),function(e,t,n,r,o){if(!Ba(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Wa(t.prototype),"tools",e,this,!0)},get:function(){return za(Wa(t.prototype),"tools",this)}}])&&Na(n.prototype,r),o&&Na(n,o),t}(Ia);Ya._$name="Popup",se.register("popup",Ya);n(166);function Ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ua=/>[ \t\r\n]+</g,qa=/\s\s+/g,Xa=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"tpl",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i=n.map((function(t,n){var r=e[n];return Array.isArray(t)?r+=t.reduce((function(e,t){return e+(("string"==typeof t?t.trim():t)+"\n")}),""):(void 0===t&&(t=""),r+="string"==typeof t?t.trim():t),o++,r})).join("");return o<=e.length&&(i+=e[e.length-1]),i.replace(Ua,"><").replace(qa," ").trim()}},{key:"docsTpl",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i=n.map((function(t,n){var r=e[n];return Array.isArray(t)?r+=t.reduce((function(e,t){return e+(("string"==typeof t?t.trim():t)+"\n")}),""):(void 0===t&&(t=""),r+="string"==typeof t?t.trim():t),o++,r})).join("");return o<=e.length&&(i+=e[e.length-1]),i.replace(Ua,"><").trim()}},{key:"repeat",value:function(t){return function(){return e.tpl.apply(e,arguments).repeat(t)}}},{key:"loop",value:function(e){}}],(n=null)&&Ga(t.prototype,n),r&&Ga(t,r),e}();function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n            <"," "," ",' class="','" ',' tabIndex="-1">\n                ','\n                <span class="b-menu-text" reference="textElement">',"</span>\n                ","\n            </",">"]);return Za=function(){return e},e}function Ja(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eu(e,t){return!t||"object"!==Ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tu(e,t,n){return(tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function nu(e){return(nu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ru(e,t){return(ru=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Xa._$name="TemplateHelper";var ou=/^b-icon-/,iu=/^b-fa-/,au=function(e){function t(){return Ja(this,t),eu(this,nu(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ru(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"MenuItem"}},{key:"defaultConfig",get:function(){return{menu:null,icon:null,text:null,checked:null,closeParent:null,localizableProperties:["text"]}}}],(r=[{key:"doAction",value:function(e){var t=this.parent,n={menu:t,item:this,element:this.element,bubbles:!0};"boolean"==typeof this.checked&&(this.checked=!this.checked),this.trigger("beforeItem",n),this.trigger("item",n),this.closeParent&&t&&(t.rootMenu.close(),e&&!this.href&&e.preventDefault())}},{key:"doDestroy",value:function(){var e=this._menu;e instanceof ni&&e.destroy(),tu(nu(t.prototype),"doDestroy",this).call(this)}},{key:"template",value:function(e){var t=e.icon||("boolean"==typeof e.checked?"b-fw-icon b-icon-".concat(e.checked?"":"un","checked"):""),n=ou.test(t)?" b-icon":iu.test(t)?" b-fa":"",r=e.href?"a":"div";return Xa.tpl(Za(),r,"a"===r?'href="'.concat(e.href,'"'):"","a"===r&&e.target?'target="'.concat(e.target,'"'):"",e.hasMenu?"b-has-submenu":"",e.name?'data-name="'.concat(e.name,'"'):"",t?'<i class="b-menuitem-icon '.concat(t).concat(n,'" reference="iconElement"></i>'):"",e.text,e.hasMenu?'<i class="b-fw-icon b-icon-sub-menu" reference="subMenuIcon"></i>':"",r)}},{key:"onFocusIn",value:function(e){tu(nu(t.prototype),"onFocusIn",this).call(this,e),!this.disabled&&this.menu&&this.openMenu()}},{key:"onFocusOut",value:function(e){tu(nu(t.prototype),"onFocusOut",this).call(this,e),this.closeMenu()}},{key:"openMenu",value:function(e){var t=this.menu;!this.disabled&&t&&(t.focusOnToFront=e,t.show(),this.owner.currentSubMenu=t)}},{key:"closeMenu",value:function(){this._menu instanceof ni&&this.menu.close()}},{key:"focusElement",get:function(){return this.element}},{key:"contentElement",get:function(){return this.textElement}},{key:"isFocusable",get:function(){var e=this.focusElement;return e&&this.isVisible&&(e===document.body||e.offsetParent)}},{key:"checked",set:function(e){var t=this,n=t.isConfiguring;(n||"boolean"==typeof t._checked)&&(e=!!e)!==t._checked&&(t._checked=e,n||(t.iconElement.classList[e?"add":"remove"]("b-icon-checked"),t.iconElement.classList[e?"remove":"add"]("b-icon-unchecked"),t.trigger("toggle",{menu:t.owner,item:t,checked:t._checked,element:t.element,bubbles:!0})))},get:function(){return this._checked}},{key:"menu",set:function(e){this._menu=e},get:function(){var e=this,t=e._menu;return!t||t instanceof ni||("object"!==Ka(t)||"items"in t||"widgets"in t||"html"in t||(t={items:t}),t=e.menu=me.createWidget(Object.assign({type:"menu",autoShow:!1,autoClose:!0,scrollAction:e.owner.scrollAction,constrainTo:e.owner.constrainTo,forElement:e.element,align:"l0-r0",anchor:!0,owner:e,cls:"b-sub-menu"},t))),t}},{key:"text",get:function(){return this.html},set:function(e){this.html=e}},{key:"closeParent",set:function(e){this._closeParent=e},get:function(){return("boolean"==typeof this.checked?this._closeParent:!1!==this._closeParent)&&!this.hasMenu}},{key:"hasMenu",get:function(){var e=this.isConfiguring?this.initialConfig.menu:this._menu;return e&&(e instanceof ni||"object"===Ka(e)||e.length>0)}}])&&Qa(n.prototype,r),o&&Qa(n,o),t}(ni);function uu(e){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lu(e,t){return!t||"object"!==uu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fu(e,t,n){return(fu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=du(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function du(e){return(du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pu(e,t){return(pu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}au._$name="MenuItem",se.register("menuitem",au);var hu={ArrowUp:1,ArrowDown:1,ArrowRight:1,ArrowLeft:1,Enter:1,Escape:1},yu=function(e){function t(){return cu(this,t),lu(this,du(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pu(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Menu"}},{key:"defaultConfig",get:function(){return{align:"t-b",scrollAction:"hide",focusOnHover:null,scrollable:!1,defaultType:"menuitem"}}}],(r=[{key:"construct",value:function(e){Array.isArray(e)&&(e={items:e}),fu(du(t.prototype),"construct",this).call(this,e),_r.on({element:this.element,click:"onMouseClick",mouseover:"onMouseOver",mouseleave:"onMouseLeave",thisObj:this})}},{key:"afterShow",value:function(e){this.items.some((function(e){return Boolean(e._menu)}))&&this.element.classList.add("b-menu-with-submenu"),this.items.some((function(e){return e.icon}))&&this.element.classList.add("b-menu-with-icon"),fu(du(t.prototype),"afterShow",this).call(this,e)}},{key:"createWidget",value:function(e){return"string"==typeof e&&(e={text:e}),fu(du(t.prototype),"createWidget",this).call(this,e)}},{key:"onDocumentMouseDown",value:function(e){this.parentMenu&&this.parentMenu.owns(e.event.target)||fu(du(t.prototype),"onDocumentMouseDown",this).call(this,e)}},{key:"hide",value:function(e){fu(du(t.prototype),"hide",this).call(this,e),this.currentSubMenu&&!this.currentSubMenu.isDestroyed&&this.currentSubMenu.hide(e),this.parentMenu&&(this.parentMenu.currentSubMenu=null)}},{key:"onMouseClick",value:function(e){var t=e.target.closest(".b-menuitem");t&&(this.triggerElement(t,e),e.stopImmediatePropagation())}},{key:"onMouseOver",value:function(e){if(!1!==this.focusOnHover){var t=xn.up(e.relatedTarget,".b-widget"),n=xn.up(e.target,".b-widget"),r=ye.fromElement(n);!xn.isTouchEvent&&n&&n!==t&&r.parent===this&&this.setTimeout({fn:"handleMouseOver",delay:30,args:[r],cancelOutstanding:!0})}}},{key:"handleMouseOver",value:function(e){e.focus()}},{key:"onMouseLeave",value:function(e){var t=this,n=e.relatedTarget,r=n&&t.owns(n),o=n&&n instanceof HTMLElement&&ye.fromElement(n),i=!r;if(o){for(;o.ownerCmp;)o=o.ownerCmp;i&=!xn.getAncestor(o.element,[e.target])}!r&&i&&(t.currentSubMenu&&t.currentSubMenu.hide(),t.currentSubMenu=t.selectedElement=null,t.element.contains(document.activeElement)&&document.activeElement.matches(".b-menuitem")&&t.element.focus())}},{key:"onInternalKeyDown",value:function(e){var n=ye.fromElement(e),r=n&&n!==this&&!(n instanceof au);if("Escape"!==e.key){if(fu(du(t.prototype),"onInternalKeyDown",this).call(this,e),!r){hu[e.key]&&e.preventDefault();var o=document.activeElement,i=this.element;this.navigateFrom(o!==i&&i.contains(o)?o:null,e.key,e)}}else(r?this:this.rootMenu).close()}},{key:"navigateFrom",value:function(e,t,n){var r,o=this,i=o.treeWalker,a=e&&o.getItem(e);switch(t){case"ArrowUp":i.currentNode=e||(e=o.bottomFocusTrap),i.previousNode(),r=i.currentNode;break;case"ArrowDown":i.currentNode=e||(e=o.topFocusTrap),i.nextNode(),r=i.currentNode;break;case" ":e&&!e.classList.contains("b-disabled")&&(a&&a.menu?o.openSubMenu(e,a):o.triggerElement(e,n));break;case"ArrowRight":if(e&&a&&a.menu&&!e.classList.contains("b-disabled")){var u=o.openSubMenu(e,a);u&&u.focus()}else i.currentNode=e||(e=o.topFocusTrap),i.nextNode(),r=i.currentNode;break;case"ArrowLeft":o.isSubMenu?o.hide():e||(i.currentNode=e||(e=o.topFocusTrap),i.nextNode(),r=i.currentNode);break;case"Enter":e&&!e.classList.contains("b-disabled")&&o.triggerElement(e,n)}r&&(r===o.element?o.navigateFrom(o.bottomFocusTrap,"ArrowUp",n):r===e?o.navigateFrom(o.topFocusTrap,"ArrowDown",n):r.focus())}},{key:"getItem",value:function(e){if(null!=e)return"number"==typeof e?this.items[e]:1===e.nodeType?ye.fromElement(e,"menuitem",this.contentElement):this.items.find((function(t){return t.id==e}))}},{key:"triggerElement",value:function(e,t){var n=this.getItem(e);n&&!n.disabled&&n.doAction(t)}},{key:"openSubMenu",value:function(e,t){var n=t.menu;if(n){if(!n.isVisible){var r={item:t,element:e};if(!1===this.trigger("beforeSubMenu",r))return;if(t.onBeforeSubMenu&&!1===t.onBeforeSubMenu(r))return;n.show()}return this.currentSubMenu=n}}},{key:"selectFirst",value:function(){var e=this.treeWalker;e.currentNode=this.topFocusTrap,e.nextNode(),this.requestAnimationFrame((function(){return e.currentNode.focus()}))}},{key:"focusElement",get:function(){var e=this.parentMenu&&this.parentMenu.element.contains(document.activeElement),n=this.items[0];return!e&&n instanceof au?this.element:fu(du(t.prototype),"focusElement",this)}},{key:"isSubMenu",get:function(){return this.owner&&this===this.owner.menu}},{key:"selectedElement",set:function(e){var t=this._selectedElement;if(t){var n=this.getItem(t),r=n&&n.menu;r&&r.hide(),t.classList.remove("b-active")}if(this._selectedElement=e,e){var o=xn.isFocusable(e);e.classList.add("b-active"),this.scrollable.scrollIntoView(e,{animate:!o,focus:o})}},get:function(){return this._selectedElement}},{key:"parentMenu",get:function(){var e=this.owner;if(e instanceof au&&(e=e.owner),e instanceof t)return e}},{key:"rootMenu",get:function(){for(var e=this;e.parentMenu&&e.parentMenu instanceof this.constructor;)e=e.parentMenu;return e}}])&&su(n.prototype,r),o&&su(n,o),t}(Ya);function gu(e){return(gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bu(e,t){return!t||"object"!==gu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wu(e,t,n,r){return(wu="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Su(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function ku(e,t,n){return(ku="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Su(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Su(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ou(e)););return e}function Ou(e){return(Ou=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eu(e,t){return(Eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yu._$name="Menu",se.register("menu",yu);var Cu=function(e){function t(){return vu(this,t),bu(this,Ou(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eu(e,t)}(t,e),n=t,o=[{key:"hideAll",value:function(){t.toasts.reverse().forEach((function(e){return e.hide()}))}},{key:"show",value:function(e){var n=new t("string"==typeof e?{html:e}:e);return n.show(),n}},{key:"$name",get:function(){return"Toast"}},{key:"defaultConfig",get:function(){return{testConfig:{timeout:100,destroyTimeout:1},floating:!0,timeout:2500,destroyTimeout:200,showProgress:!0,color:null,bottomMargin:20}}}],(r=[{key:"doDestroy",value:function(){var e=t.toasts.indexOf(this);e>-1&&t.toasts.splice(e,1),ku(Ou(t.prototype),"doDestroy",this).call(this)}},{key:"show",value:function(){ku(Ou(t.prototype),"show",this).call(this),this.timeout>0&&(this.hideTimeout=this.setTimeout("hide",this.timeout))}},{key:"hide",value:function(){var e=this;e.destroyTimer||(e.element.classList.add("b-toast-hide"),e.element.style.bottom="",e.destroyTimer=e.setTimeout("destroy",e.destroyTimeout))}},{key:"element",set:function(e){},get:function(){if(!this._element&&!this.isConfiguring){var e=this,n=t.toasts.length&&t.toasts[0].element,r=n?n._nextBottom:e.bottomMargin,o=function(e,t,n,r,o){if(!wu(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}(Ou(t.prototype),"element",xn.createElement({parent:e.appendTo||ni.floatRoot,children:e.showProgress?[{className:"b-toast-progress",style:"animation-duration:".concat(e.timeout/1e3,"s;")}]:null,html:e._html,className:e.color||"",style:e._style||""}),this,!0);_r.on({element:o,click:"hide",thisObj:e}),t.toasts.unshift(e),o._nextBottom=r+o.offsetHeight+e.bottomMargin,o.style.cssText+=";bottom:".concat(r,"px;transform:translateY(0)")}return ku(Ou(t.prototype),"element",this)}}])&&mu(n.prototype,r),o&&mu(n,o),t}(ni);function xu(e){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Du(e,t){return!t||"object"!==xu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ru(e,t,n,r){return(Ru="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Tu(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Pu(e,t,n){return(Pu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Tu(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Tu(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Au(e)););return e}function Au(e){return(Au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mu(e,t){return(Mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Cu.toasts=[],Cu._$name="Toast",se.register("toast",Cu);var Iu={left:!0,right:!0,top:!0,bottom:!0,transform:!0},Fu=function(e){function t(){return _u(this,t),Du(this,Au(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mu(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Tooltip"}},{key:"defaultConfig",get:function(){return{mouseOffsetX:15,mouseOffsetY:15,floating:!0,getHtml:null,forElement:null,trackMouse:null,updateContentOnMouseMove:!1,forSelector:null,hideOnDelegateChange:null,anchorToTarget:!0,showOnHover:!1,hoverDelay:500,autoShow:!1,dismissDelay:0,hideDelay:500,loadingMsg:"Loading...",allowOver:!1,anchor:!0,align:"b-t",axisLock:!0,showAnimation:null,hideAnimation:null,testConfig:{hideDelay:100,hoverDelay:100}}}}],(r=[{key:"afterConstruct",value:function(){var e=this;e.forSelector&&(e.showOnHover=!0,e.forElement||(e.trackMouse=!0,e.forElement=document.body)),Pu(Au(t.prototype),"afterConstruct",this).call(this),e.forElement&&e.showOnHover&&(e.pointerOverOutDetacher=_r.on({element:e.forElement,mouseover:"internalOnPointerOver",mouseout:"internalOnPointerOut",thisObj:e})),e.autoShow&&e.show(),e.allowOver&&_r.on({element:e.element,mouseenter:"onOwnElementMouseEnter",mouseleave:"internalOnPointerOut",thisObj:e})}},{key:"doDestroy",value:function(){this.pointerOverOutDetacher&&this.pointerOverOutDetacher(),Pu(Au(t.prototype),"doDestroy",this).call(this)}},{key:"onDocumentMouseDown",value:function(e){var n=e.event,r=this.pointerEvent;r&&xn.isTouchEvent&&n.pageX===r.pageX&&n.pageY===r.pageY&&this.activeTarget.contains(n.target)&&performance.now()-r.timeStamp<500||(this.abortDelayedShow(),Pu(Au(t.prototype),"onDocumentMouseDown",this).call(this,{event:n}))}},{key:"internalOnPointerOver",value:function(e){var t,n=this,r=n.forElement,o=n.forSelector,i=n.activeTarget;if(!(n.disabled||n.allowOver&&n.element.contains(e.target))){if(o){if(i&&i.contains(e.target)&&i.contains(e.relatedTarget))return;if((t=e.target.closest(o))&&e.relatedTarget&&e.relatedTarget.closest(o)===t)return}else{if(r.contains(e.relatedTarget))return;t=r}t?n.handleForElementOver(e,t):i&&n.handleForElementOut()}}},{key:"onTransitionEnd",value:function(e){var n=this,r=t.currentOverElement;if(Iu[e.propertyName]){if(n.allowOver&&n.element.contains(r))return;n.activeTarget&&n.activeTarget.contains(r)&&!n.trackMouse&&n.realign()}}},{key:"handleForElementOver",value:function(e,t){var n=this;if(!1===n.trigger("pointerOver",{event:e,target:t}))n.internalOnPointerOut(e);else if(n.pointerEvent=e,n.abortDelayedHide(),n.isVisible&&!n.hideOnDelegateChange){if(n.updateActiveTarget(t),!1===n.trigger("beforeShow"))return n.hide();n.updateContents(),n.alignTo({target:n.anchorToTarget?t:new cr(n.pointerEvent.pageX-window.pageXOffset+n.mouseOffsetX,n.pointerEvent.pageY-window.pageYOffset+n.mouseOffsetY),overlap:!(n.anchorToTarget&&n.anchor)}),n.trigger("show"),n.afterShowByTarget()}else n.hideOnDelegateChange&&n.hide(),n.updateActiveTarget(t),n.delayShow(t)}},{key:"delayShow",value:function(e){var t=this;t.currentAnimation&&(t.cancelHideShowAnimation(),t._hidden=!0),t.isVisible||t.hasTimeout("show")?t.isVisible&&t.showByTarget(e):!t.hoverDelay||t.forSelector&&Date.now()-t.lastHidden<t.quickShowInterval?(t.updateContents(),t.showByTarget(e)):(t.addDocumentMouseDownListener(),t.listeningForMouseMove||t.anchorToTarget||(t.mouseMoveRemover=_r.on({element:document,mousemove:"onMouseMove",thisObj:t})),t.setTimeout((function(){xn.isOrphaned(e)||(t.updateContents(),t.showByTarget(e))}),t.pointerEvent&&"mouseover"!==t.pointerEvent.type?0:t.hoverDelay,"show"))}},{key:"updateContents",value:function(){var e=this;e.getHtml&&(e.html=e.getHtml({tip:e,element:e.element,activeTarget:e.activeTarget,event:e.pointerEvent}))}},{key:"showAsyncMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.L(this.loadingMsg);e&&(this.html='<div class="b-tooltip-loading"><div class="b-icon b-icon-spinner"></div>'.concat(e,"</div>"))}},{key:"showByTarget",value:function(e){var t=this;t.mouseMoveRemover&&(t.mouseMoveRemover(),t.mouseMoveRemover=null),t.showBy({target:t.anchorToTarget?e:new cr(t.pointerEvent.pageX-window.pageXOffset+t.mouseOffsetX,t.pointerEvent.pageY-window.pageYOffset+t.mouseOffsetY),overlap:!(t.anchorToTarget&&t.anchor)})}},{key:"afterShowByTarget",value:function(){var e=this.dismissDelay;this.abortDelayedShow(),e&&this.setTimeout("hide",e),this.toFront()}},{key:"updateActiveTarget",value:function(e){var t=this.activeTarget;this.activeTarget=e,this.isConfiguring||this.trigger("overtarget",{newTarget:e,lastTarget:t})}},{key:"internalOnPointerOut",value:function(e){var t=this,n=e.relatedTarget;t.allowOver&&t.element.contains(n)||t.element.contains(e.target)&&t.activeTarget&&t.activeTarget.contains(n)||t.activeTarget&&!t.activeTarget.contains(e.relatedTarget)&&t.handleForElementOut()}},{key:"handleForElementOut",value:function(){var e=this,t=e.hideDelay;!1!==e.trigger("pointerOut")?(e.abortDelayedShow(),e.isVisible&&!1!==t&&(e.abortDelayedHide(),t>0?e.setTimeout("hide",t):e.hide())):e.activeTarget=null}},{key:"show",value:function(){var e=this;e.forElement&&e.anchorToTarget&&!e.forSelector&&!e.inShowBy?e.showByTarget(e.forElement):(e.inShowBy&&(e.y=-1e4),Pu(Au(t.prototype),"show",this).call(this)),e.afterShowByTarget(),e.mouseMoveRemover||e._hidden||!e.trackMouse&&!e.updateContentOnMouseMove||(e.mouseMoveRemover=_r.on({element:document,mousemove:"onMouseMove",thisObj:e})),!e.forElement||e.transitionEndDetacher||e._hidden||(e.transitionEndDetacher=_r.on({element:e.forElement,transitionend:"onTransitionEnd",thisObj:e}))}},{key:"hide",value:function(){var e=this;if(e.isVisible){var n;e.abortDelayedShow(),e.abortDelayedHide();for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(n=Pu(Au(t.prototype),"hide",this)).call.apply(n,[this].concat(o)),e.lastHidden=Date.now(),e.activeTarget=null,e.mouseMoveRemover&&(e.mouseMoveRemover(),e.mouseMoveRemover=null),e.transitionEndDetacher&&(e.transitionEndDetacher(),e.transitionEndDetacher=null),e.listeningForMouseMove=!1}}},{key:"abortDelayedShow",value:function(){var e=this;e.hasTimeout("show")&&(e.clearTimeout("show"),e.mouseMoveRemover&&(e.mouseMoveRemover(),e.mouseMoveRemover=null),e.transitionEndDetacher&&(e.transitionEndDetacher(),e.transitionEndDetacher=null))}},{key:"abortDelayedHide",value:function(){this.clearTimeout("hide")}},{key:"realign",value:function(e){var n=this,r=n.lastAlignSpec,o=n.clippedBy;!n.isConfiguring&&o&&!n.isVisible&&r&&r.targetHidden&&tr.from(r.target,n.positioned?n.element.offsetParent:null,!n.positioned).intersect(o)&&(n.show(),r.targetHidden=!1),Pu(Au(t.prototype),"realign",this).call(this,e)}},{key:"alignTo",value:function(e){this.isVisible&&(this.pointerEvent&&this.element.contains(this.pointerEvent.target)||1===e.nodeType&&(e={target:e}),Pu(Au(t.prototype),"alignTo",this).call(this,e))}},{key:"onMouseMove",value:function(e){var t,n=this,r=e.pageX-window.pageXOffset+n.mouseOffsetX,o=e.pageY-window.pageYOffset+n.mouseOffsetY,i=n.hasTimeout("hide"),a=e.target;n.pointerEvent=e,n._hidden||(n.forSelector&&n.activeTarget&&!i&&1===a.nodeType&&!a.matches(n.forSelector)&&!(n.allowOver&&n.element.contains(a))&&(t=n.handleForElementOut()),(t||!i||n.forElement.contains(a))&&(n.dismissDelay&&!i&&n.setTimeout("hide",n.dismissDelay),n.updateContentOnMouseMove&&n.getHtml&&(n.html=n.getHtml({tip:n,element:n.element,forElement:n.activeTarget,event:e})),n.trackMouse&&n.alignTo({position:new cr(r,o),ignorePageScroll:!0})))}},{key:"onOwnElementMouseEnter",value:function(e){this.abortDelayedHide()}},{key:"focusElement",get:function(){var e=Pu(Au(t.prototype),"focusElement",this);if(e!==this.element)return e}},{key:"anchorToTarget",get:function(){return this._anchorToTarget},set:function(e){this._anchorToTarget=e,e||(this.anchor=!1)}},{key:"trackMouse",set:function(e){this._trackMouse=e},get:function(){return this._trackMouse&&!this.anchorToTarget}},{key:"html",set:function(e){var n=this;return!1===e?(F.deprecate("Grid","5.0.0","Setting false to indicate loading is deprecated, in favor of `showAsyncMessage`. Please see https://bryntum.com/docs/grid/#guides/upgrades/3.0.1.md for more information"),void this.showAsyncMessage()):e instanceof Promise?(n.showAsyncMessage(),e.target=n.activeTarget,void e.then((function(t){e.target===n.activeTarget&&(n.html=t)}))):(null!=e&&(e=n.L(String(e))),void(e?(function(e,t,n,r,o){if(!Ru(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Au(t.prototype),"html",e,this,!0),n.isVisible&&n.realign(),n.trigger("innerHtmlUpdate")):n.hide()))},get:function(){return Pu(Au(t.prototype),"html",this)}}])&&ju(n.prototype,r),o&&ju(n,o),t}(Ya);function Lu(e){return(Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bu(e,t){return!t||"object"!==Lu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zu(e,t,n){return(zu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Vu(e){return(Vu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wu(e,t){return(Wu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_r.on({element:document,mouseenter:function(e){return Fu.currentOverElement=e.target},capture:!0}),Fu._$name="Tooltip",se.register("tooltip",Fu),ni.tooltip=new Fu({id:"bryntum-tooltip",forElement:window,forSelector:"[data-btip]",header:!0,resetCfg:{},listeners:{pointerOver:function(e){var t=e.source,n=e.target;for(var r in t.resetCfg)"listeners"===r?t.un(t.resetCfg[r].set):"was"in t.resetCfg[r]?t[r]=t.resetCfg[r].was:delete t[r];t.resetCfg={};var o=ye.get(n.id),i=o?o.tipConfig:t.gatherDataConfigs(n.dataset);for(var a in i)t.resetCfg[a]={set:i[a]},t.hasOwnProperty(a)&&(t.resetCfg[a].was=t[a]),"listeners"===a?t.on(i[a]):t[a]=i[a];t.headerElement.style.display=t.title?"":"none"}},gatherDataConfigs:function(e){var t={};for(var n in e)if(n.startsWith("btip"))if(n.length>4){var r=A.lowercaseFirstLetter(n.substr(4));if(r in this.getDefaultConfiguration()){var o=e[n];t[r]=isNaN(o)?o:parseInt(o,10)}}else t.html=e[n];return t}});var $u=function(e){return function(e){function t(){return Nu(this,t),Bu(this,Vu(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wu(e,t)}(t,e),n=t,(r=[{key:"construct",value:function(e){zu(Vu(t.prototype),"construct",this).call(this,e),this._badge&&(this.badge=this._badge)}},{key:"badge",set:function(e){var t=this.element;this._badge=e,t&&(null!=e&&""!==e?(t.dataset.badge=e,t.classList.add("b-badge")):(t.dataset.badge&&delete t.dataset.badge,t.classList.remove("b-badge")))},get:function(){return this._badge}},{key:"widgetClass",get:function(){if(this.badge)return"b-badge"}}])&&Hu(n.prototype,r),o&&Hu(n,o),t}(e||Y)};function Yu(e){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gu(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <button class="'," ",'" ',">\n                 \n            </button>\n        "],['\n            <button class="'," ",'" ',">\n                \\xa0\n            </button>\n        "]);return Gu=function(){return e},e}function Uu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xu(e,t){return!t||"object"!==Yu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ku(e,t,n){return(Ku="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Zu(e){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ju(e,t){return(Ju=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qu=/^b-icon-/,ec=/^b-fa-/,tc=function(e){function t(){return Uu(this,t),Xu(this,Zu(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ju(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Button"}},{key:"defaultConfig",get:function(){return{icon:null,pressedIcon:null,iconAlign:"start",text:"",color:null,toggleable:!1,pressed:!1,toggleGroup:null,ripple:{radius:75},defaultBindProperty:"text",localizableProperties:["text"],menu:null,onMenuHideTimeout:300,testConfig:{onMenuHideTimeout:0}}}}],(r=[{key:"template",value:function(){var e=this;return Xa.tpl(Gu(),e.color||"",e.toggleable&&e.pressed?"b-pressed":"",e.toggleGroup?'data-group="'.concat(e.toggleGroup,'"'):"")}},{key:"construct",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.toggleGroup&&(n.toggleable=!0);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(e=Ku(Zu(t.prototype),"construct",this)).call.apply(e,[this,n].concat(o)),_r.on({element:this.element,click:"onInternalClick",thisObj:this})}},{key:"doDestroy",value:function(){this.destroyProperties("menu"),Ku(Zu(t.prototype),"doDestroy",this).call(this)}},{key:"eachWidget",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.menu;if(n){if(!1===e(n))return;t&&n.eachWidget&&n.eachWidget(e,t)}}},{key:"onFocusOut",value:function(e){Ku(Zu(t.prototype),"onFocusOut",this).call(this,e),this.menu&&this.menu.hide()}},{key:"onInternalClick",value:function(e){var t=this,n={event:e};if(t.toggleable){if(t.toggleGroup&&t.pressed)return;t.toggle(!t.pressed)}t.trigger("click",n),t.isDestroyed||t.trigger("action",n),e.preventDefault(),e.stopPropagation()}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=t.menu;t.toggleable&&(null===e&&(e=!t.pressed),t.pressed=e,t.toggling=!0,n&&(n.minWidth=t.width,n[e?"show":"hide"]()),t.syncIconCls(),t.trigger("toggle",{pressed:e}),t.toggling=!1)}},{key:"syncIconCls",value:function(){var e=this,t=e._iconEl;if(e.icon){t||(t=e._iconEl=xn.createElement({tag:"i",nextSibling:e.element.firstChild}));var n=e.pressed&&e.pressedIcon?e.pressedIcon:e.icon;e._iconEl.className=n,Qu.test(n)?t.classList.add("b-icon"):ec.test(n)&&t.classList.add("b-fa")}else t&&t.remove()}},{key:"focusElement",get:function(){return this.element}},{key:"text",get:function(){return this._text},set:function(e){var t=this.element;null==e&&(e=""),t.lastChild.data=this._text=e,t.classList[String(e).length?"add":"remove"]("b-text")}},{key:"menu",get:function(){var e=this,t=e._menu;return!t||t instanceof ni||("object"!==Yu(t)||"items"in t||"widgets"in t||"html"in t||(t={items:t}),t=e.menu=me.createWidget(Object.assign({type:"menu",autoShow:!1,autoClose:!0,scrollAction:"realign",constrainTo:document.body,forElement:e.element,align:"t0-b0",owner:e,onHide:function(){e.setTimeout((function(){return e.toggle(!1)}),e.onMenuHideTimeout)}},t))),t},set:function(e){this._menu=e,this.toggleable=Boolean(e)}},{key:"pressed",set:function(e){var t=this;e&&t.toggleGroup&&xn.forEachSelector("button[data-group=".concat(t.toggleGroup,"]"),(function(e){e!==t.element&&me.getById(e.id).toggle(!1)})),t._pressed=e,t.element&&t.element.classList[e?"add":"remove"]("b-pressed")},get:function(){return this._pressed}},{key:"icon",set:function(e){this._icon=e,this.syncIconCls()},get:function(){return this._icon}},{key:"pressedIcon",set:function(e){this._pressedIcon=e,this.syncIconCls()},get:function(){return this._pressedIcon}},{key:"iconAlign",set:function(e){var t=this._iconAlign;e!==t&&(t&&this.element.classList.remove("b-icon-align-".concat(t)),this.element.classList.add("b-icon-align-".concat(e)),this._iconAlign=e)},get:function(){return this._iconAlign}}])&&qu(n.prototype,r),o&&qu(n,o),t}($u(ni));function nc(e){return(nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ic(e,t){return!t||"object"!==nc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ac(e,t,n,r){return(ac="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=cc(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function uc(e,t,n){return(uc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=cc(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function cc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sc(e)););return e}function sc(e){return(sc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lc(e,t){return(lc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}tc._$name="Button",se.register("button",tc);var fc=function(e){function t(){return rc(this,t),ic(this,sc(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lc(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ButtonGroup"}},{key:"defaultConfig",get:function(){return{defaultType:"button",cls:null,items:null,color:null,toggleGroup:null,valueSeparator:",",columns:null}}}],(r=[{key:"construct",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};uc(sc(t.prototype),"construct",this).call(this,n),this.items.forEach((function(t){return t.on("click",e.onItemClick,e)}))}},{key:"onItemClick",value:function(){this._value=null}},{key:"createWidget",value:function(e){var n=this;n.color&&!e.color&&(e.color=n.color),n.toggleGroup&&!e.toggleGroup&&("boolean"==typeof n.toggleGroup&&(n.toggleGroup=ye.generateId("toggleGroup")),e.toggleGroup=n.toggleGroup),n.columns&&(e.width="".concat(100/n.columns,"%"));var r=uc(sc(t.prototype),"createWidget",this).call(this,e);if(!(r instanceof tc))throw new Error("A ButtonGroup can only contain buttons");return r}},{key:"value",get:function(){if(!this._value){var e=[];this.items.forEach((function(t){t.pressed&&void 0!==t.value&&e.push(t.value)})),this._value=e.join(this.valueSeparator)}return this._value},set:function(e){Array.isArray(e)||(e=null==e?[]:"string"==typeof e?e.split(this.valueSeparator):[e]),this._value=e,this.items.forEach((function(t){void 0!==t.value&&(t.pressed=e.indexOf(t.value)>-1)}))}},{key:"disabled",get:function(){return uc(sc(t.prototype),"disabled",this)},set:function(e){!function(e,t,n,r,o){if(!ac(e,t,n,r||e)&&o)throw new Error("failed to set property")}(sc(t.prototype),"disabled",e,this,!0),this.items.forEach((function(t){return t.disabled=e}))}},{key:"widgetClassList",get:function(){var e=uc(sc(t.prototype),"widgetClassList",this);return this.columns&&e.push("b-columned"),e}}])&&oc(n.prototype,r),o&&oc(n,o),t}(pa);function dc(e){return(dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yc(e,t){return!t||"object"!==dc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gc(e,t,n){return(gc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function vc(e){return(vc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mc(e,t){return(mc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}fc._$name="ButtonGroup",se.register("buttonGroup",fc);var bc=function(e){function t(){return pc(this,t),yc(this,vc(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mc(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{element:null,delegate:null,delay:500,startRate:2,endRate:20,accelerateDuration:4e3}}}],(r=[{key:"doDestroy",value:function(){this.mousedownRemover&&this.mousedownRemover(),gc(vc(t.prototype),"doDestroy",this).call(this)}},{key:"onMouseDown",value:function(e){var t=this,n=t.delegate?e.target.closest(t.delegate):t.element;n&&(t.triggerEvent=e,_r.lockComposedPath(t.triggerEvent),t.activeListenerRemover=_r.on({mouseup:{element:document,handler:"onMouseUp"},mousemove:{element:n,handler:"onTargetMouseMove"},mouseleave:{element:n,handler:"onTargetMouseLeave"},mouseenter:{element:n,handler:"onTargetMouseEnter"},thisObj:t}),t.setTimeout("startAutoRepeat",t.delay))}},{key:"onMouseUp",value:function(e){var t=this;t.acceleration&&t.acceleration.cancel(),t.activeListenerRemover&&t.activeListenerRemover(),t.clearTimeout("startAutoRepeat"),t.clearTimeout(t.repeatTimer)}},{key:"onTargetMouseLeave",value:function(){this.clearInterval(this.repeatTimer)}},{key:"onTargetMouseEnter",value:function(e){this.triggerEvent=e,this.fireClick()}},{key:"onTargetMouseMove",value:function(e){this.triggerEvent=e}},{key:"startAutoRepeat",value:function(){var e=this;e.interval=e.startInterval=1e3/e.startRate,e.accelerationDelta=e.startInterval-1e3/e.endRate,e.fireClick(),e.acceleration=lr.animate(e.accelerateDuration,e.nextTick,e,"easeOutQuad")}},{key:"nextTick",value:function(e){this.interval=this.startInterval-this.accelerationDelta*e}},{key:"fireClick",value:function(){var e=this,t=new MouseEvent("click",e.triggerEvent);e.triggerEvent.target.dispatchEvent(t),e.repeatTimer=e.setTimeout(e.fireClick,e.interval)}},{key:"element",set:function(e){this._element=e,this.mousedownRemover=_r.on({element:e,mousedown:"onMouseDown",thisObj:this})},get:function(){return this._element}}])&&hc(n.prototype,r),o&&hc(n,o),t}(Wr(Y));function wc(e){return(wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kc(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Sc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ec(e,t,n){return t&&Oc(e.prototype,t),n&&Oc(e,n),e}function Cc(e,t){return!t||"object"!==wc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xc(e,t,n,r){return(xc="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=jc(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function _c(e,t,n){return(_c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=jc(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function jc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dc(e)););return e}function Dc(e){return(Dc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pc(e,t)}function Pc(e,t){return(Pc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}bc._$name="ClickRepeater";var Tc=function(e,t){return(e.weight||0)-(t.weight||0)},Ac=function(e,t){return(t.weight||0)-(e.weight||0)},Mc={array:!0},Ic=function(e){function t(){return Sc(this,t),Cc(this,Dc(t).apply(this,arguments))}return Rc(t,e),Ec(t,[{key:"doDestroy",value:function(){var e=this,n=e.triggers,r=t._errorTip;if(e.inputListenerRemover&&e.inputListenerRemover(),e.keyListenerRemover&&e.keyListenerRemover(),_c(Dc(t.prototype),"doDestroy",this).call(this),n)for(var o=0,i=Object.values(n);o<i.length;o++){i[o].destroy()}r&&r.field===e&&r.hide()}},{key:"construct",value:function(e){var n=this;n.highlightChanged=n.createOnFrame("addUpdatedCls"),_c(Dc(t.prototype),"construct",this).call(this,e),t.errorTip,n.keyStrokeChangeDelay&&(n.changeOnKeyStroke=n.buffer(n.internalOnChange,n.keyStrokeChangeDelay))}},{key:"onFocusIn",value:function(e){this.valueOnFocus=Mt.clone(this.value),_c(Dc(t.prototype),"onFocusIn",this).call(this,e)}},{key:"onFocusOut",value:function(e){_c(Dc(t.prototype),"onFocusOut",this).call(this,e),this.updateRequired(),this.onEditComplete()}},{key:"onEditComplete",value:function(){}},{key:"select",value:function(e,t){var n=this.focusElement;if(n.value.length){if(0===arguments.length)return void this.selectAll();if(!this.supportsTextSelection)return;we.isIE11?(n.focus(),n.setSelectionRange(e,t)):n.setSelectionRange(e,t)}}},{key:"moveCaretToEnd",value:function(){var e=this.input;if(e.createTextRange){var t=e.createTextRange();t.collapse(!1),t.select()}else this.supportsTextSelection&&this.select(e.value.length,e.value.length)}},{key:"selectAll",value:function(){this.focusElement.select()}},{key:"updateEmpty",value:function(){var e=this.isEmptyInput,t=this.isEmpty,n=this.element,r=this.clearIcon,o=e&&t;n&&(r&&r.classList[o?"add":"remove"]("b-icon-hidden"),n.classList[o?"add":"remove"]("b-empty"))}},{key:"updateInvalid",value:function(){this.updatingInvalid=!0;var e=this.isValid,t=this.element,n=this.errorTip,r=this.inputWrap;t&&(t.classList[e?"remove":"add"]("b-invalid"),e?n.isVisible&&n.field===this&&n.hide():r.contains(Fu.currentOverElement)&&(n.activeTarget===r&&n.isVisible?n.onBeforeShow():(n.activeTarget=r,n.showBy(r)))),this.updatingInvalid=!1}},{key:"hasChanged",value:function(e,t){return t!==e}},{key:"syncInputFieldValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.input;n&&!t.inputting&&(t.input.value=t.inputValue,t.isConfiguring||t.containsFocus||!t.highlightExternalChange||(n.classList.remove("b-field-updated"),t.clearTimeout("removeUpdatedCls"),e||t.parent&&t.parent.isSettingValues||t.highlightChanged())),t.updateEmpty(),t.updateInvalid()}},{key:"addUpdatedCls",value:function(){this.input.classList.add("b-field-updated"),this.setTimeout("removeUpdatedCls",this.updatedClsDuration)}},{key:"removeUpdatedCls",value:function(){this.input.classList.remove("b-field-updated")}},{key:"internalOnInputFocus",value:function(){var e=this.input.value.length;we.isIE11&&e&&!this.autoSelect&&this.select(e,e)}},{key:"internalOnChange",value:function(e){var t=this;t.isValid&&t.hasChanged(t._lastValue,t.value)&&(t.triggerChange(e,!0),t._lastValue=t.value)}},{key:"triggerChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Boolean(this._isUserAction),n=this,r=n.value,o=n._lastValue,i=n.isValid;n.trigger("change",{value:r,oldValue:o,event:e,userAction:t,valid:i}),"change"===n.defaultAction&&n.trigger("action",{value:r,oldValue:o,event:e,userAction:t,valid:i})}},{key:"internalOnInput",value:function(e){var t=this;t.inputting=!0,t.value=t.input.value,t.inputting=!1,t.trigger("input",{value:t.value,event:e}),t.changeOnKeyStroke&&t.changeOnKeyStroke(e)}},{key:"internalOnKeyPress",value:function(e){var t=this,n=t.value,r=!1;if("keydown"===e.type)if("Escape"!==e.key||t.readOnly)"Enter"===e.key&&we.isIE11&&t.internalOnChange(e);else{var o="initialValue"in t?t.initialValue:t.valueOnFocus,i=t.hasChanged(o,n),a=t.input.value!==String(t.inputValue);t.revertOnEscape&&(!t.isValid||i||a)?(i&&(t.value=o),a&&t.syncInputFieldValue(!0),t.clearError(),r=!0):t.clearable&&(n||t.input.value)&&t.clear()}t.isDestroyed||(r&&e.stopImmediatePropagation(),t.trigger(e.type,{event:e}))}},{key:"clear",value:function(){this.value=null,this.trigger("clear")}},{key:"onDisabled",value:function(){this.updateInvalid()}},{key:"updateRequired",value:function(){var e=this;e.isConfiguring||!e.required||""!==e.value&&null!=e.value?e.clearError("fieldRequired",e.updatingInvalid):e.setError("fieldRequired",e.updatingInvalid)}},{key:"setError",value:function(e,t){(this.errors||(this.errors={}))[e]=this.L(e),t||this.updateInvalid()}},{key:"clearError",value:function(e,t){this.errors&&(e?delete this.errors[e]:this.errors={}),t||this.updateInvalid()}},{key:"getErrors",value:function(){if(!this.isValid){var e=this.errors?Mt.getTruthyValues(this.errors):[this.input.validationMessage||this.L("invalidValue")];if(e&&e.length)return e}}},{key:"errorTip",get:function(){return this.constructor.errorTip}},{key:"element",set:function(e){var n=this,r=n.initialConfig.value,o=xn.createElementFromTemplate(n.inputTemplate(n),Mc),i=[{className:"b-field-inner",reference:"inputWrap",children:o}],a=[],u=[],c=n.labels||[];for(var s in n.label&&c.push({reference:"labelElement",html:n.label}),c&&c.forEach((function(e){var t=Object.assign({tag:"label",htmlFor:"".concat(n.id,"_input"),className:"b-align-".concat(e.align||"start")},e);e.align&&"start"!==e.align?i.push(t):i.unshift(t)})),n._thisIsAUsedExpression(n.clearable),n.triggers){var l=n.triggers[s];"start"===l.align?a.unshift(l):u.push(l)}a.sort(Tc),u.sort(Ac),o.unshift.apply(o,kc(a.map((function(e){return e.element})))),o.push.apply(o,kc(u.map((function(e){return e.element})))),function(e,t,n,r,o){if(!xc(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Dc(t.prototype),"element",{className:c.length?"b-has-label":"",children:i},this,!0),null!=r&&(n.value=r),n.updateEmpty(),n.updateInvalid();var f=n.input||n.focusElement;f&&(n.keyListenerRemover=_r.on({element:f,thisObj:n,keydown:"internalOnKeyPress",keypress:"internalOnKeyPress",keyup:"internalOnKeyPress"}))},get:function(){return _c(Dc(t.prototype),"element",this)}},{key:"focusElement",get:function(){return this.input}},{key:"attributeString",get:function(){var e=this,t=e.attributes.map((function(t){return null!=e[t]?"".concat(t.toLowerCase(),'="').concat(e[t],'"'):""})).join(" ");return e.inputAttributes&&(t+=Object.keys(e.inputAttributes).map((function(t){return"".concat(t,'="').concat(e.inputAttributes[t],'"')})).join(" ")),t}},{key:"editable",get:function(){return this._editable},set:function(e){var t=this,n=t.input;t._editable=e,n&&(n.readOnly=!1===e?"readOnly":null,!1!==e?t.inputListenerRemover=_r.on({element:n,thisObj:t,focus:"internalOnInputFocus",change:"internalOnChange",input:"internalOnInput"}):t.inputListenerRemover&&t.inputListenerRemover())}},{key:"clearable",set:function(e){this._clearable=e,e&&!this.triggers&&(this.triggers={})},get:function(){return this._clearable}},{key:"triggers",set:function(e){var t=this,n=t._triggers={};for(var r in t.clearable&&((e||(e={})).clear={cls:"b-icon-remove",handler:function(){t._isUserAction=!0,t.clear(),t._isUserAction=!1},weight:1e3}),e)n[r]=me.createWidget(Mt.assign({type:"trigger",reference:r,parent:t},e[r]),t.defaultTriggerType||"trigger")},get:function(){return this._triggers}},{key:"labelWidth",set:function(e){this.labelElement&&(this.labelElement.style.flex="0 0 ".concat(xn.setLength(e)),this.inputWrap.style.flexBasis=null==e?"":0)}},{key:"label",get:function(){return this._label},set:function(e){null==e&&(e=""),this._label=e,this.labelElement&&(this.labelElement.innerHTML=e)}},{key:"readOnly",get:function(){return this._readOnly||this.disabled},set:function(e){var t=this;e=Boolean(e),Boolean(t._readOnly)!==e&&(t._readOnly=e,t.element.classList[e?"add":"remove"]("b-readonly"),e?(t.readWriteEditability=t.editable,t.editable=!1):t.editable=t.readWriteEditability)}},{key:"isValid",get:function(){var e=this;if(!e.disabled){if(e.updateRequired(),e.errors&&Mt.getTruthyValues(e.errors).length)return!1;if(e.input&&e.input.validity)return e.input.validity.valid}return!0}},{key:"isEmpty",get:function(){return null==this.value||""===this.value}},{key:"isEmptyInput",get:function(){return!this.input||null==this.input.value||""===this.input.value}},{key:"value",get:function(){return this._value},set:function(e){var t=this,n=t._value;t.hasChanged(n,e)?(t._value=e,t.isConfiguring||(t.updateRequired(),t.inputting||t.triggerChange()),t.inputting||(t._lastValue=e),t.syncInputFieldValue()):""===e&&t.updateRequired()}},{key:"inputValue",get:function(){return null==this.value?"":this.value}},{key:"supportsTextSelection",get:function(){var e=this.focusElement;return e&&("textarea"===e.tagName.toLowerCase()||e.type&&(/text|search|password|tel|url/.test(e.type)||we.isEdge))}}],[{key:"$name",get:function(){return"Field"}},{key:"defaultConfig",get:function(){return{value:"",label:null,labels:null,required:null,clearable:null,revertOnEscape:null,labelWidth:null,inputWidth:null,keyStrokeChangeDelay:0,readOnly:null,editable:!0,defaultAction:"change",triggers:null,highlightExternalChange:!0,localizableProperties:["label","title","placeholder"],autoSelect:!1,autoComplete:"off",inputAttributes:null,updatedClsDuration:1500,testConfig:{updatedClsDuration:10}}}},{key:"errorTip",get:function(){return t._errorTip||(t._errorTip=new Fu({id:"bryntum-field-errortip",cls:"b-field-error-tip",forSelector:".b-field.b-invalid .b-field-inner",align:"l-r",scrollAction:"realign",onBeforeShow:function(){var e=ye.fromElement(this.activeTarget);if(e){var t=e.getErrors();if(t)return this.html=t.join("<br>"),this.field=e,!0}return!1}}))}}]),t}($u(ni));function Fc(e){return(Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lc(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <input type="checkbox" id="','_input" reference="input" ','/>\n            <label class="b-checkbox-label" for="','_input" reference="textLabel">',"</label>\n        "]);return Lc=function(){return e},e}function Nc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bc(e,t){return!t||"object"!==Fc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zc(e,t,n,r){return(zc="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Wc(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Vc(e,t,n){return(Vc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Wc(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Wc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$c(e)););return e}function $c(e){return($c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yc(e,t){return(Yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ic.Trigger=function(e){function t(){return Sc(this,t),Cc(this,Dc(t).apply(this,arguments))}return Rc(t,e),Ec(t,[{key:"template",value:function(){return'<div class="b-icon b-align-'.concat(this.align||"end",'"></div>')}},{key:"construct",value:function(e){_c(Dc(t.prototype),"construct",this).call(this,e),_r.on({element:this.element,click:{handler:"onClick",thisObj:this},mousedown:{handler:"onMousedown",thisObj:this}})}},{key:"onClick",value:function(e){var t=this,n=t.field,r="function"==typeof t.handler?t.handler:n[t.handler];n.disabled||n.readOnly||r&&!1!==n.trigger("trigger",{trigger:t})&&r.call(n,e)}},{key:"onMousedown",value:function(e){var t=this.field;!("key"in e)&&xn.isTouchEvent&&t.editable&&(t.editable=!1,t.setTimeout((function(){return t.editable=!0}),500)),e.preventDefault(),document.activeElement!==t.input&&t.focus()}},{key:"field",get:function(){return this.parent}}],[{key:"$name",get:function(){return"FieldTrigger"}},{key:"defaultConfig",get:function(){return{align:null}}}]),t}(ni),Ic.SpinTrigger=function(e){function t(){return Sc(this,t),Cc(this,Dc(t).apply(this,arguments))}return Rc(t,e),Ec(t,[{key:"doDestroy",value:function(){this.clickRepeater&&this.clickRepeater.destroy(),_c(Dc(t.prototype),"doDestroy",this).call(this)}},{key:"template",value:function(){return'<div class="b-icon b-align-'.concat(this.align||"end",'">\n                    <div reference="upButton" class="b-icon b-spin-up"></div>\n                    <div reference="downButton" class="b-icon b-spin-down"></div>\n                </div>')}},{key:"onClick",value:function(e){var t=this.field;t.disabled||(e.target===this.upButton?t.doSpinUp():e.target===this.downButton&&t.doSpinDown())}},{key:"repeat",set:function(e){var t=this;e?t.clickRepeater=new bc(Object.assign({element:t.element},e)):t.clickrepeater&&(t.clickRepeater.destroy(),t.clickrepeater=null)}}],[{key:"$name",get:function(){return"SpinTrigger"}},{key:"defaultConfig",get:function(){return{repeat:!0}}}]),t}(Ic.Trigger),Ic._$name="Field",se.register("trigger",Ic.Trigger),se.register("spintrigger",Ic.SpinTrigger);var Gc=function(e){function t(){return Nc(this,t),Bc(this,$c(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yc(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Checkbox"}},{key:"defaultConfig",get:function(){return{text:"",color:null,value:"",toggleGroup:null,defaultBindProperty:"value",localizableProperties:["label","text"]}}}],(r=[{key:"construct",value:function(e){Vc($c(t.prototype),"construct",this).call(this,e);var n=this;n.initialConfig.readOnly&&(n.readOnly=!0),n.isConfiguring=!0,n.initialConfig.checked&&(n.checked=!0),n.isConfiguring=!1}},{key:"inputTemplate",value:function(){var e=this;return Xa.tpl(Lc(),e.id,e.toggleGroup?'data-group="'.concat(e.toggleGroup,'"'):"",e.id,e.text||"")}},{key:"getToggleGroupMembers",value:function(){var e=this.checked,t=this.toggleGroup,n=this.input,r=[];return e&&t&&xn.forEachSelector("input[type=checkbox][data-group=".concat(t,"]"),(function(e){if(e!==n){var t=me.fromElement(e);t&&r.push(t)}})),r}},{key:"uncheckToggleGroupMembers",value:function(){this.checked&&this.toggleGroup&&this.getToggleGroupMembers().forEach((function(e){return e.checked=!1}))}},{key:"check",value:function(){this.checked=!0}},{key:"uncheck",value:function(){this.checked=!1}},{key:"toggle",value:function(){this.checked=!this.checked}},{key:"internalOnChange",value:function(e){this.triggerChange(!0)}},{key:"triggerChange",value:function(e){var t=this,n=t.input.checked;(!n&&e&&t.toggleGroup&&t.getToggleGroupMembers().filter((function(e){return e.isVisible&&!e.disabled})).length||!t.callPreventable("change",{checked:n,value:n,userAction:e},(function(n){return e&&t.uncheckToggleGroupMembers(),t.trigger("action",n),!0})))&&(t.input.checked=!t.input.checked)}},{key:"element",set:function(e){var n=this;!function(e,t,n,r,o){if(!zc(e,t,n,r||e)&&o)throw new Error("failed to set property")}($c(t.prototype),"element",e,this,!0),n.color&&n.element.classList.add(n.color),n.text&&n.element.classList.add("b-text")},get:function(){return Vc($c(t.prototype),"element",this)}},{key:"text",get:function(){return this._text},set:function(e){this._text=e,this.textLabel&&(this.textLabel.innerHTML=e)}},{key:"value",get:function(){return this.checked},set:function(e){this.checked="false"!==e&&Boolean(e)}},{key:"checked",get:function(){return this.input.checked},set:function(e){var t=this;e=Boolean(e),t.inputting||t.input.checked===e||(t.input.checked=e,t.uncheckToggleGroupMembers(),t.isConfiguring||t.triggerChange(!1))}},{key:"readOnly",get:function(){return this._readOnly},set:function(e){this._readOnly=e,this.element.classList[e?"add":"remove"]("b-readonly"),this.input.disabled=e}}])&&Hc(n.prototype,r),o&&Hc(n,o),t}(Ic);Gc._$name="Checkbox",se.register("checkbox",Gc),se.register("check",Gc);n(233);function Uc(e){return(Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kc(e,t){return!t||"object"!==Uc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zc(e,t,n){return(Zc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Jc(e){return(Jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qc(e,t){return(Qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var es=function(e){function t(){return qc(this,t),Kc(this,Jc(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qc(e,t)}(t,e),n=t,o=[{key:"initPlugins",value:function(e){for(var t=e.plugins||(e.plugins={}),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0,a=r;i<a.length;i++){var u=a[i];t[u.$name]=new u(e)}}},{key:"defaultConfig",get:function(){return{disabled:!1}}}],(r=[{key:"construct",value:function(e,n){this.pluggedInto=this.client=e,Zc(Jc(t.prototype),"construct",this).call(this,n),this.applyPluginConfig(e)}},{key:"applyPluginConfig",value:function(e){var t=this,n=t.pluginConfig||t.constructor.pluginConfig;if(n){var r=n.assign,o=n.chain,i=n.after,a=n.before,u=n.override;r&&t.applyAssign(e,r),(o||i)&&t.applyChain(e,o||i),a&&t.applyChain(e,a,!1),u&&t.applyOverride(e,u)}}},{key:"applyAssign",value:function(e,t){var n=this;t.forEach((function(t){return n.assign(e,t)}))}},{key:"applyChain",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.forEach((function(t){e[t]?n.chain(e,t,r):n.assign(e,t)}))}},{key:"applyOverride",value:function(e,t){var n=this,r=this;r.overridden||(r.overridden={}),t.forEach((function(t){if(!r[t])throw new Error(n.L("overrideFnMissing",{plugIntoName:e.$name,pluginName:r.$name,fnName:t}));"function"==typeof e[t]&&(r.overridden[t]=e[t].bind(e)),e[t]=r[t].bind(r)}))}},{key:"assign",value:function(e,t){var n=this,r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(n),t);r&&(r.get||r.set)?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:r.get&&r.get.bind(n),set:r.set&&r.set.bind(n)}):e[t]=n[t].bind(n)}},{key:"chain",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this,o=e.pluginFunctionChain||(e.pluginFunctionChain={});if(o[t]||(o[t]=[e[t].bind(e)]),!r[t])throw new Error(this.L("fnMissing",{plugIntoName:e.$name,pluginName:r.$name,fnName:t}));o[t][n?"push":"unshift"](r[t].bind(r)),e[t]=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.functionChainRunner.apply(r,[t].concat(n))}}},{key:"functionChainRunner",value:function(e){for(var t,n=this.client.pluginFunctionChain[e],r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];for(var a=0;a<n.length;a++)if(!1===(t=n[a].apply(n,o)))return!1;return t}},{key:"doDisable",value:function(e){var t=this.constructor,n="featureClass"in t?t.featureClass:"b-".concat(t.$name.toLowerCase());n&&this.client&&this.client.element&&this.client.element.classList[e?"remove":"add"](n),e?this.trigger("disable"):this.trigger("enable")}},{key:"client",get:function(){return this._client},set:function(e){this._client=e}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this.doDisable(e)}}])&&Xc(n.prototype,r),o&&Xc(n,o),t}(ze(ae(Y)));function ts(e){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ns(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function os(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function is(e,t){return!t||"object"!==ts(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function as(e){return(as=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function us(e,t){return(us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}es._$name="InstancePlugin";var cs=function(e){return function(e){function t(){return rs(this,t),is(this,as(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&us(e,t)}(t,e),n=t,(r=[{key:"initPlugins",value:function(){}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];es.initPlugins.apply(es,[this].concat(t))}},{key:"hasPlugin",value:function(e){return null!=this.getPlugin(e)}},{key:"getPlugin",value:function(e){return"function"==typeof e&&(e=e.$name),this.plugins&&this.plugins[e]}},{key:"plugins",get:function(){return this._plugins||(this._plugins={}),this._plugins},set:function(e){e&&(Array.isArray(e)||(e=[e]),es.initPlugins.apply(es,[this].concat(ns(e)))),this.initPlugins()}},{key:"widgetClass",get:function(){}}])&&os(n.prototype,r),o&&os(n,o),t}(e||Y)};function ss(e){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ls(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ds(e,t){return!t||"object"!==ss(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ps(e){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hs(e,t){return(hs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ys=function(e){return function(e){function t(){return ls(this,t),ds(this,ps(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hs(e,t)}(t,e),n=t,(r=[{key:"state",get:function(){return this._state=this.getState(),this._state},set:function(e){this._state=e,this.applyState(e)}},{key:"widgetClass",get:function(){}}])&&fs(n.prototype,r),o&&fs(n,o),t}(e||Y)};n(208);function gs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ms(e){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ks(e,t){return!t||"object"!==ms(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ss(e,t,n){return(Ss="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Os(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Es(e,t){return(Es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cs=Symbol("STM_PROP"),xs={parentIndex:1};function _s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function js(e){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ds(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ps(e,t){return!t||"object"!==js(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ts(e){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function As(e,t){return(As=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ms(e){return(Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Is(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Fs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ns(e,t){return!t||"object"!==Ms(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hs(e,t,n){return(Hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Bs(e){return(Bs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zs(e,t){return(zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vs,Ws={children:1,data:1,meta:1},$s={},Ys=function(e){return e instanceof Date||(e=xt.parse(e,this.format||this.dateFormat||xt.defaultFormat)),e||void 0},Gs=function(e,t,n){return e&&e.isEqual?e.isEqual(t,n):Mt.isEqual(t,n)},Us=function(){},qs=function(e){function t(){return Fs(this,t),Ns(this,Bs(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zs(e,t)}(t,e),n=t,o=[{key:"processData",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=this.fieldMap,i=this.defaultValues,a=r||{},u=a.useRawData,c=void 0===u?{enabled:!1}:u,s=c.enabled?e:Object.assign({},e);if(!(n=n||c.disableDefaultValue))for(t in i)void 0===s[t]&&(s[t]=i[t]);if(!c.disableTypeConversion)for(t in o){var l=o[t],f=l.name,d=l.dataSource,p=d!==f&&!Mt.pathExists(e,d)&&f in e,h=!c.disableTypeConversion&&l.convert;if(p||h){var y=p?e[f]:e[d];(!n||p&&f in e||!p&&d in e)&&(Mt.setPath(s,d,h?l.convert(y):y),p&&delete s[f])}}return s}},{key:"exposeProperties",value:function(e){var t=this,n=t.superclass,r=t.hasOwnProperty("fields")&&t.fields;if(n.exposeProperties&&!n.hasOwnProperty("fieldMap")&&n.exposeProperties(),t.hasOwnProperty("propertiesExposed")||(t.defaultValues=Object.assign({},n.defaultValues,t.hasOwnProperty("defaults")?t.defaults:null),t.fieldMap=Object.setPrototypeOf({},n.fieldMap||$s),t.fieldDataSourceMap=Object.setPrototypeOf({},n.fieldDataSourceMap||$s),t.propertiesExposed=Object.setPrototypeOf({},n.propertiesExposed||$s),t.hasOwnProperty("idField")&&(t.addField({name:"id",dataSource:t.idField}),t.propertiesExposed[t.idField]=!0),r&&r.length&&r.map(t.addField,t)),t.autoExposeFields&&e&&!t.hasOwnProperty("propertiesExposedForData")){for(var o in e)t.propertiesExposed[o]||t.addField({name:o,dataSource:o,fromData:!0});t.propertiesExposedForData=!0}t.exposeRelations()}},{key:"addField",value:function(e){if(null!=e){"string"==typeof e&&(e={name:e});var t=this,n=t.propertiesExposed,r=t.defaultValues,o=e.name,i=e.dataSource||(e.dataSource=o);return e.hasOwnProperty("persist")||(e.persist=!0),"date"===e.type&&(e.convert=Ys),t.fieldMap[o]=e,t.fieldDataSourceMap[i]||(t.fieldDataSourceMap[i]=e),i.includes(".")||"model"===e.type?(e.complexMapping=!0,n[i.split(".")[0]]=!0):n[i]=!0,"defaultValue"in e&&(r[i]=e.defaultValue),t.createFieldProperty(o,i,e),e}}},{key:"removeField",value:function(e){var t=this.fieldMap[e];if(t){var n=t.dataSource;delete this.fieldMap[e],delete this.fieldDataSourceMap[n],delete this.prototype[e],this._internalFields=null}}},{key:"createFieldProperty",value:function(e,t,n){Ws[t]||e in this.prototype||Object.defineProperty(this.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.get(e)},set:n&&n.readOnly?Us:function(t){this.set(e,t)}})}},{key:"exposeRelations",value:function(){var e=this;e.hasOwnProperty("relationsExposed")||e.relationConfig&&(e.relationsExposed=!0,e.relations=[],e.relationConfig.forEach((function(t){e.relations.push(t);var n=t.relationName;Reflect.ownKeys(e.prototype).includes(n)||Object.defineProperty(e.prototype,n,{enumerable:!0,get:function(){return this.getForeign(n)},set:function(e){this.setForeign(n,e,t)}})})))}},{key:"getFieldDefinition",value:function(e){return this.fieldMap[e]}},{key:"getFieldDataSource",value:function(e){return this.getFieldDefinition(e).dataSource}},{key:"processField",value:function(e,t){var n=this.fieldMap[e];return n&&n.convert?n.convert(t):t}},{key:"asId",value:function(e){return e&&e.isModel?e.id:e}},{key:"idField",set:function(e){this._assignedIdField=!0,this._idField=e},get:function(){return this._idField}},{key:"childrenField",set:function(e){this._childrenField=e},get:function(){return this._childrenField||"children"}},{key:"autoExposeFields",get:function(){return!0}},{key:"fields",get:function(){return[]}},{key:"internalFields",get:function(){var e=this.fieldMap,t=this._internalFields;if(this.hasOwnProperty("fieldMap")&&!t)for(var n in t=this._internalFields=[],e)t.push(e[n]);return t}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this,a=i.constructor,u=a.fieldMap,c=n?Array.isArray(n)?n:[n]:[],s=null;if(n=c[0],i.meta=Object.assign({modified:{}},a.metaConfig,r),a.applyConfigs){var l=a.getDefaultConfiguration(),f=Is(new Set(Mt.allKeys(l)));f.length&&(i.useRawData&&i.useRawData.enabled||(e=Object.assign({},e)),s={},f.forEach((function(t){s[t]=e[t]||l[t],delete e[t]})))}if(Hs(Bs(t.prototype),"construct",this).call(this,s),o?a.hasOwnProperty("fieldMap")||a.exposeProperties():a.exposeProperties(e),!a.hasOwnProperty("idFieldProcessed")){var d=i.meta.idField;d||(a._assignedIdField?d=a.idField:n&&(d=n.idField)),d&&d!==u.id.dataSource&&a.addField({name:"id",dataSource:d}),a.idFieldProcessed=!0}i._internalId=t._internalIdCounter++,i.stores=[],i.unjoinedStores=[],i.originalData||(i.originalData=e),i.data=a.processData(e,!1,n),null==i.id&&i.setData("id",i.generateId(n)),i.data[a.childrenField]&&i.processChildren(c),i.generation=0}},{key:"equals",value:function(e){if(e instanceof this.constructor){for(var t=this.fields,n=0,r=t.length;n<r;n++){var o=t[n],i=o.name;if("id"!==i&&!Gs(o,this[i],e[i]))return!1}return!0}return!1}},{key:"getFieldDefinition",value:function(e){return this.constructor.getFieldDefinition(e)}},{key:"getFieldDefinitionFromDataSource",value:function(e){return this.constructor.fieldDataSourceMap[e]}},{key:"getDataSource",value:function(e){var t=this.constructor.getFieldDefinition(e);if(t)return t.dataSource||t.name}},{key:"initRelations",value:function(){var e=this;e.constructor.relations&&e.stores.forEach((function(t){t.modelRelations||t.initRelations();var n=[];t.modelRelations&&t.modelRelations.forEach((function(t){n.push({related:e.initRelation(t),config:t})})),t.updateRecordRelationCache(e,n)}))}},{key:"initRelation",value:function(e){var t=this.get(e.fieldName),n=void 0!==t&&"string"!=typeof e.store&&e.store.getById(t),r={id:t,placeHolder:!0};return this.meta.relationCache||(this.meta.relationCache={}),this.meta.relationCache[e.relationName]=n||(null!=t?r:null),n}},{key:"removeRelation",value:function(e){this.meta.relationCache[e.relationName]&&(delete this.meta.relationCache[e.relationName],e.nullFieldOnRemove&&this.setData(e.fieldName,null))}},{key:"getForeign",value:function(e){return this.meta.relationCache&&this.meta.relationCache[e]}},{key:"setForeign",value:function(e,n,r){var o=t.asId(n);return this.set(r.fieldName,o)}},{key:"get",value:function(e){var t=this,n=t.meta.batchChanges?Object.assign({},t.data,t.meta.batchChanges):t.data,r=t.constructor.fieldMap[e],o=r?r.dataSource:e;if(o){if(!r&&e.includes(".")){var i=e.split(".")[0];r=t.constructor.fieldMap[i]}return r&&r.complexMapping?Mt.getPath(n,o):o in n?n[o]:n[e]}}},{key:"setData",value:function(e,t){var n=this.constructor.fieldMap[e],r=n?n.dataSource:e;r&&Mt.setPath(this.data,r,t)}},{key:"syncId",value:function(e){var t=this.id;if(t!==e){this.setData("id",e);var n={id:{value:e,oldValue:t}};this.afterChange(n,n)}}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this;if(o.isBatchUpdating)return o.inBatchSet(e,t),null;var i=o.beforeSet?o.beforeSet(e,t,n,r):void 0,a=o.inSet(e,t,n,r);return o.afterSet&&o.afterSet(e,t,n,r,i,a),a}},{key:"fieldToKeys",value:function(e,t){var n;return"string"!=typeof e?(n={},Reflect.ownKeys(e).forEach((function(t){return n[t]=e[t]}))):n=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t),n}},{key:"inBatchSet",value:function(e,t){var n=this;if("string"!=typeof e){var r=this.fieldToKeys(e,t);Object.keys(r).forEach((function(e){n.meta.batchChanges[e]=n.constructor.processField(e,r[e])}))}else this.meta.batchChanges[e]=t}},{key:"inSet",value:function(e,t,n,r){var o=this,i=o.constructor.fieldMap,a=o.constructor.prototype,u=o.data,c={},s=o.fieldToKeys(e,t),l=!1;return n||o.triggerBeforeUpdate(s)?(Object.keys(s).forEach((function(e){if(e!==o.constructor.childrenField){var t=i[e],n=t&&t.readOnly,f=t?t.dataSource:e,d=!t&&e in a,p=d?o[f]:Mt.getPath(u,f),h=o.constructor.processField(e,s[e]),y=s[e]={value:h},g=o.getRelationConfig(e);n||Gs(t,p,h)?delete s[e]:(o.generation++,y.oldValue=p,l=!0,Gs(t,o.meta.modified[e],h)?delete o.meta.modified[e]:(o.meta.modified[e]=p,void 0===y.oldValue&&"oldValue"in y&&delete y.oldValue),c[e]=y,d?o[e]=h:Mt.setPath(u,f,h),g&&!r&&(o.initRelation(g),o.stores.forEach((function(e){return e.cacheRelatedRecord(o,h,g.relationName,y.oldValue)}))))}})),l&&o.afterChange(s,c,n,r),l?c:null):null}},{key:"afterChange",value:function(e,t,n,r){var o=this;this.stores.forEach((function(i){i.onModelChange(o,e,t,n,r)}))}},{key:"isFieldModified",value:function(e){return this.isModified&&this.meta.modified[e]}},{key:"getFieldPersistentValue",value:function(e){var t,n=this.getFieldDefinition(e);return n&&!n.persist||(t=this[e],n&&n.serialize&&(t=n.serialize.call(this,t,this))),t}},{key:"clearChanges",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.meta;r.modified={},r.committing=!1,e&&n.stores.forEach((function(e){if(e.modified.remove(n),e.added.remove(n),t){var r=e.collectDescendants(n).all;e.added.remove(r),e.modified.remove(r)}}))}},{key:"generateId",value:function(){return this.constructor.generatedIdIndex||(this.constructor.generatedIdIndex=0),"_generated"+this.$name+ ++this.constructor.generatedIdIndex}},{key:"toJSON",value:function(){return this.data}},{key:"beginBatch",value:function(){this.batching||(this.batching=0,this.meta.batchChanges={}),this.batching++}},{key:"endBatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.constructor.parentIdField;if(t.batching&&(t.batching--,!(t.batching>0||Mt.isEmpty(t.meta.batchChanges)))){var r=Object.assign({},t.meta.batchChanges);t.meta.batchChanges=null,r[n]&&(t.parentId=r[n],delete r[n]),t.set(r,void 0,e),t.cancelBatch()}}},{key:"cancelBatch",value:function(){this.batching=null,this.meta.batchChanges=null}},{key:"triggerBeforeUpdate",value:function(e){var t=this;return!this.stores.some((function(n){if(!1===n.trigger("beforeUpdate",{record:t,changes:e}))return!0}))}},{key:"copy",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=this,i=Object.assign({},o.data),a=o.constructor.idField,u=!0;return r&&"object"===Ms(r)?(e=r.deep,t=r.id,delete r.id):t=r,e&&o.children?(u=!1,i.children=o.children.map((function(e){return e.copy(r)}))):(delete i.children,delete i.expanded),t?i[a]=t:null==t&&(i[a]=o.generateId(o.firstStore)),n=u?new o.constructor(i):i,n.originalInternalId=o.internalId,n}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=this.parent;n?n.removeChild(t):t.stores.length&&(t.meta.specialRow||t.stores.forEach((function(n){return n.remove(t,e,!1,!0)})))}},{key:"getRelationConfig",value:function(e){return this.firstStore&&this.firstStore.modelRelations&&this.firstStore.modelRelations.find((function(t){return t.fieldName===e}))}},{key:"joinStore",value:function(e){var n=this,r=n.stores,o=n.unjoinedStores;r.includes(e)||(Hs(Bs(t.prototype),"joinStore",this)&&Hs(Bs(t.prototype),"joinStore",this).call(this,e),e.register(n),r.push(e),o.includes(e)&&o.splice(o.indexOf(e),1),n.isLoaded&&n.children.forEach((function(t){return t.joinStore(e)})),n.initRelations(),e.tree&&!n.isRoot&&(n.instanceMeta(e.id).collapsed=!n.expanded))}},{key:"unJoinStore",value:function(e){var n=this,r=n.stores,o=n.unjoinedStores;r.includes(e)&&(e.unregister(n),n.children&&n.children.forEach((function(t){return t.unJoinStore(e)})),r.splice(r.indexOf(e),1),o.push(e),Hs(Bs(t.prototype),"unJoinStore",this)&&Hs(Bs(t.prototype),"unJoinStore",this).call(this,e),e.uncacheRelatedRecord(n)),r.length||(n.meta.removed=!0)}},{key:"isPartOfStore",value:function(e){return e?e.indexOf(this)>=0:this.stores.length>0}},{key:"instanceMeta",value:function(e){var t=this.meta,n=e.id||e;return t.map||(t.map={}),t.map[n]||(t.map[n]={})}},{key:"indexPath",get:function(){for(var e=[],t=this;t&&!t.isRoot;t=t.parent)e.unshift(t.parentIndex+1);return e}},{key:"subclass",get:function(){return new this.constructor(Object.setPrototypeOf({id:void 0},this.data),this.stores[0],null,!0)}},{key:"fields",get:function(){return this.constructor.internalFields||this.constructor.fields}},{key:"fieldNames",get:function(){return Object.keys(this.data)}},{key:"isPersistable",get:function(){return!0}},{key:"isModified",get:function(){return Boolean(this.meta.modified&&Object.keys(this.meta.modified).length>0)}},{key:"modifications",get:function(){var e=this;if(!e.isModified)return null;var t={};return Object.keys(e.meta.modified).forEach((function(n){var r=e.getFieldPersistentValue(n);void 0!==r&&(t[n]=r)})),t[e.constructor.idField]=e.id,t}},{key:"modificationData",get:function(){var e=this,t=e.constructor,n=t.fieldMap,r=t.idField;if(!e.isModified)return null;var o={};return Object.keys(e.meta.modified).forEach((function(t){var r=n[t];if(r){var i=e.getFieldPersistentValue(t);void 0!==i&&Mt.setPath(o,r.dataSource,i)}})),Object.keys(o).length&&Mt.setPath(o,e.constructor.getFieldDefinition(r).dataSource,e.id),o}},{key:"persistableData",get:function(){var e=this,t={};return e.fields.forEach((function(n){var r=e.getFieldPersistentValue(n.name);void 0!==r&&Mt.setPath(t,n.dataSource,r)})),t}},{key:"isCommitting",get:function(){return Boolean(this.meta.committing)}},{key:"internalId",get:function(){return this._internalId}},{key:"isPhantom",get:function(){return""===this.id||null==this.id||this.hasGeneratedId}},{key:"isModel",get:function(){return!0}},{key:"hasGeneratedId",get:function(){return this.id&&"string"==typeof this.id&&this.id.startsWith("_generated")}},{key:"json",get:function(){return JSON.stringify(this.data)}},{key:"isBatchUpdating",get:function(){return Boolean(this.batching)}},{key:"firstStore",get:function(){return this.stores.length>0&&this.stores[0]}},{key:"isValid",get:function(){return!0}}])&&Ls(n.prototype,r),o&&Ls(n,o),t}(function(e){return function(e){function t(){return Ds(this,t),Ps(this,Ts(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&As(e,t)}(t,e),n=t,o=[{key:"convertEmptyParentToLeaf",set:function(e){!0===e?e={onLoad:!0,onRemove:!0}:!1===e&&(e={onLoad:!1,onRemove:!1}),this._convertEmptyParentToLeaf=e},get:function(){return this._convertEmptyParentToLeaf||{onLoad:!1,onRemove:!1}}},{key:"parentIdField",set:function(e){this._parentIdField=e,Object.defineProperty(this.prototype,e,{set:function(e){this.parentId=e},get:function(){return this.parentId}})},get:function(){return this._parentIdField||"parentId"}}],(r=[{key:"ingestChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.stores,n=this.inProcessChildren,r=this.constructor,o=t[0];if(!0===e)return!!n||[];if(e){Array.isArray(e)||(e=[e]);for(var i,a=e.length,u=[],c=0;c<a;c++)i=(i=e[c])instanceof qs?i:o?o.createRecord(i):new r(i,null,null,!0),u.push(i);return u}}},{key:"processChildren",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stores,t=this,n=t.meta;t.inProcessChildren=!0;var r=t.ingestChildren(t.data[t.constructor.childrenField],e);r&&(r.length?(n.isLeaf=!1,!0===t.children&&(t.children=[]),t.appendChild(r)):!0===r?(n.isLeaf=!1,t.children=!0):t.isRoot||(n.isLeaf=t.constructor.convertEmptyParentToLeaf.onLoad)),t.inProcessChildren=!1}},{key:"ancestorsExpanded",value:function(e){var t=this.parent;return!t||t.isExpanded(e)&&t.ancestorsExpanded(e)}},{key:"isExpanded",value:function(e){var t=this.instanceMeta(e.id);return Object.prototype.hasOwnProperty.call(t,"collapsed")||(t.collapsed=!this.expanded),!t.collapsed}},{key:"getDescendantCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.firstStore,n=this.children;return!n||!Array.isArray(n)||e&&!this.isExpanded(t)?0:n.reduce((function(t,n){return t+n.getDescendantCount(e)}),n.length)}},{key:"traverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.children;t||e.call(this,this);for(var r=0,o=n&&n.length;r<o;r++)n[r].traverse(e)}},{key:"traverseBefore",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.children,r=0,o=n&&n.length;r<o;r++)n[r].traverse(e);t||e.call(this,this)}},{key:"traverseWhile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=!0;return t||(r=!1!==e.call(n,n)),r&&n.isLoaded&&(r=n.children.every((function(t){return t.traverseWhile(e)}))),r}},{key:"bubble",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;for(t||e.call(n,n);n.parent;)n=n.parent,e.call(n,n)}},{key:"bubbleWhile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=!0;for(t||(r=e.call(n,n));r&&n.parent;)n=n.parent,r=e.call(n,n);return r}},{key:"contains",value:function(e){return e&&"object"===js(e)&&(e=e.id),!this.traverseWhile((function(t){return t.id!=e}))}},{key:"getTopParent",value:function(e){var t;return e?(t=[],this.bubbleWhile((function(e){return t.push(e),e.parent&&!e.parent.isRoot}))):(t=null,this.bubbleWhile((function(e){return e.parent||(t=e),e.parent&&!e.parent.isRoot}))),t}},{key:"appendChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.insertChild(e,null,t)}},{key:"insertChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"==typeof e){var r=e;e=t,t=this.children[r]}var o=this,i=o.isLeaf,a=Array.isArray(e);if(Array.isArray(e)||(e=[e]),!n&&!o.stores.every((function(t){return!1!==t.trigger("beforeAdd",{records:e,parent:o})})))return null;e=o.ingestChildren(e);var u=t?t.parentIndex:o.children?o.children.length:0,c=o.beforeInsertChild?o.beforeInsertChild(e):void 0,s=o.internalAppendInsert(e,t,n);return i&&s.length&&(o.meta.isLeaf=!1),o.isLeaf===i||o.root.isLoading||n||o.stores.forEach((function(e){var t={isLeaf:{value:!1,oldValue:!0}};e.trigger("update",{record:o,changes:t}),e.trigger("change",{action:"update",record:o,changes:t})})),o.afterInsertChild&&o.afterInsertChild(u,e,c,s),a||!s?s:s[0]}},{key:"tryInsertChild",value:function(){return this.insertChild.apply(this,arguments)}},{key:"internalAppendInsert",value:function(e,t,n){var r,o,i,a,u,c,s,l=this,f=l.stores,d=l.root,p=d.firstStore,h={};if(t&&t.parent!==l&&(t=null),l.children){var y=l.children,g=t?t.parentIndex:y.length;if(y[o=g]===e[0]||y[o=g-1]===e[0])for(r=!0,i=0;r&&i<e.length;i++)e[i]!==y[o+i]&&(r=!1)}if(r)return e;for(i=0;i<e.length;i++){var v=e[i],m=v.parent;if(h[v.id]=v.root===d,p&&v.traverse((function(e){e.root===d&&(h[e.id]=!0)})),m&&!1===m.removeChild(v,h[v.id]))a||(e=e.slice(),a=!0),e.splice(i--,1);else{var b=v.constructor.parentIdField,w=l.isAutoRoot?null:l.id;if(v.parent=l,v.data[b]=w,!l.inProcessChildren&&!l.isLoading){var k={parentId:w},S=v.meta.modified,O=m?m.id:null,E=(u={},c=b,s={value:l.id,oldValue:O},c in u?Object.defineProperty(u,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):u[c]=s,u);S[b]===l.id?delete S[b]:"parentId"in S||(S[b]=O),v.afterChange(k,E)}}}if(e.length){var C=l.addToChildren(l.children||(l.children=[]),t,e);l.addToChildren(l.unfilteredChildren,t,e,!0),f.forEach((function(t){t.isChained||(e.forEach((function(e){e.joinStore(t)})),t.onNodeAddChild(l,e,C,h,n))}))}return e}},{key:"removeChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.isLeaf,i=r.children,a=r.stores;if(Array.isArray(e)||(e=[e]),e=e.filter((function(e){return e.parent===r})),!n){var u=!0,c=!1,s=void 0;try{for(var l,f=a[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var d=l.value;if(!d.isChained&&!1===d.trigger("beforeRemove",{parent:r,records:e,isMove:t}))return!1}}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}}var p=r.beforeRemoveChild?r.beforeRemoveChild(e,t):void 0,h=!0,y=!1,g=void 0;try{for(var v,m=function(){var e=v.value,o=r.removeFromChildren(i,e);r.removeFromChildren(r.unfilteredChildren,e,!0),a.forEach((function(i){i.isChained||i.onNodeRemoveChild(r,[e],o,{isMove:t,silent:n})})),e.parent=e.parentIndex=e.unfilteredIndex=e.nextSibling=e.previousSibling=null},b=e[Symbol.iterator]();!(h=(v=b.next()).done);h=!0)m()}catch(e){y=!0,g=e}finally{try{h||null==b.return||b.return()}finally{if(y)throw g}}i.length||!r.constructor.convertEmptyParentToLeaf.onRemove||r.isRoot||(r.meta.isLeaf=!0),r.isLeaf===o||n||r.stores.forEach((function(e){var t={isLeaf:{value:!0,oldValue:!1}};e.trigger("update",{record:r,changes:t}),e.trigger("change",{action:"update",record:r,changes:t})})),r.afterRemoveChild&&r.afterRemoveChild(e,p,t)}},{key:"clearChildren",value:function(){var e=this,t=e.children,n=e.stores;t&&(e.children=[],n.forEach((function(n){n.isChained||n.onNodeRemoveChild(e,t,0,{unfiltered:!0})})),e.unfilteredChildren&&(e.unfilteredChildren=[]))}},{key:"clear",value:function(){var e=this,t=e.stores,n=e.children&&e.children.slice();if(e.isRoot&&n){var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;if(!c.isChained&&!1===c.trigger("beforeRemove",{parent:e,records:n,isMove:!1,removingAll:!0}))return!1}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}e.children.length=0,t.forEach((function(e){n.forEach((function(t){t.stores.includes(e)&&t.unJoinStore(e),t.parent=t.parentIndex=t.nextSibling=t.previousSibling=null})),e.storage.suspendEvents(),e.storage.clear(),e.storage.resumeEvents(),e.added.clear(),e.modified.clear(),e.trigger("removeAll"),e.trigger("change",{action:"removeall"})}))}}},{key:"updateChildrenIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"unfilteredIndex":"parentIndex",r=null,o=0;o<e.length;o++){var i=e[o];i[n]=o,t||(i.previousSibling=r,r&&(r.nextSibling=i),o===e.length-1&&(i.nextSibling=null),r=i)}}},{key:"addToChildren",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var o=r?"unfilteredIndex":"parentIndex",i=t?t[o]:e.length;return e.splice.apply(e,[i,0].concat(_s(n))),this.updateChildrenIndex(e,r),i}}},{key:"removeFromChildren",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var r=n?"unfilteredIndex":"parentIndex",o=t[r];return o>-1&&(e.splice(o,1),this.updateChildrenIndex(e,n)),o}}},{key:"expanded",get:function(){return this.data.expanded}},{key:"childLevel",get:function(){return this.parent?this.parent.childLevel+1:this.isRoot?-1:0}},{key:"isLeaf",get:function(){return!1!==this.meta.isLeaf&&!this.isRoot}},{key:"isParent",get:function(){return!this.isLeaf}},{key:"isLoaded",get:function(){return this.isParent&&Array.isArray(this.children)}},{key:"descendantCount",get:function(){return this.getDescendantCount()}},{key:"visibleDescendantCount",get:function(){return this.getDescendantCount(!0)}},{key:"allChildren",get:function(){var e=this.children;return e?e.reduce((function(e,t){return e.push(t),e.push.apply(e,t.allChildren),e}),[]):[]}},{key:"firstChild",get:function(){var e=this.children;return e&&e.length&&e[0]||null}},{key:"lastChild",get:function(){var e=this.children;return e&&e.length&&e[e.length-1]||null}},{key:"previousSiblingsTotalCount",get:function(){for(var e=this.previousSibling,t=this.parentIndex;e;)t+=e.descendantCount,e=e.previousSibling;return t}},{key:"root",get:function(){return this.parent&&this.parent.root||this}},{key:"parentId",get:function(){return this.parent&&!this.parent.isRoot?this.parent.id:null},set:function(e){var t=this,n=t.parent,r=e&&t.firstStore.getById(e);r!==n&&(n||r)&&(t.isBatchUpdating?t.meta.batchChanges.parentId=e:r?r.appendChild(t):t.parent.removeChild(t))}}])&&Rs(n.prototype,r),o&&Rs(n,o),t}(e||Y)}(function(e){function t(){return bs(this,t),ks(this,Os(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Es(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{stm:null}}}],(r=[{key:"joinStore",value:function(e){Ss(Os(t.prototype),"joinStore",this)&&Ss(Os(t.prototype),"joinStore",this).call(this,e),this.stm||(this.stm=e.stm)}},{key:"unJoinStore",value:function(e){this.stm===e.stm&&(this.stm=null),Ss(Os(t.prototype),"unJoinStore",this)&&Ss(Os(t.prototype),"unJoinStore",this).call(this,e)}},{key:"beforeSet",value:function(e,n,r,o){var i=this,a=Ss(Os(t.prototype),"beforeSet",this)?Ss(Os(t.prototype),"beforeSet",this).call(this,e,n,r,o):[],u=this.stm;if(u&&!u.disabled&&!xs[e]){var c,s;if("object"==ms(e)){var l=vs(Object.keys(e).reduce((function(t,n){return t[0][n]=e[n],t[1][n]=i.get(n),t}),[{},{}]),2);c=l[0],s=l[1]}else c=gs({},e,n),s=gs({},e,this.get(e));a.push([c,s])}return a}},{key:"afterSet",value:function(e,n,r,o,i,a){var u=this.stm;if(u&&!u.disabled&&!xs[e]){var c=i.pop();if(a){var s=vs(c,2),l=s[0],f=s[1],d=vs(Object.keys(a).reduce((function(e,t){return e[0][t]=l[t],e[1][t]=f[t],e}),[{},{}]),2),p=d[0],h=d[1];u.onModelUpdate(this,p,h)}}Ss(Os(t.prototype),"afterSet",this)&&Ss(Os(t.prototype),"afterSet",this).call(this,e,n,r,o,i,a)}},{key:"beforeInsertChild",value:function(e){var n=this,r=Ss(Os(t.prototype),"beforeInsertChild",this)?Ss(Os(t.prototype),"beforeInsertChild",this).call(this,e):[],o=this.stm;return o&&!o.disabled&&r.push(e.reduce((function(e,t){return t.root===n.root&&e.set(t,{parent:t.parent,index:t.parent?t.parentIndex:void 0}),e}),new Map)),r}},{key:"afterInsertChild",value:function(e,n,r,o){var i=this.stm;if(i&&!i.disabled){var a=r.pop();o&&i.onModelInsertChild(this,e,o,a)}Ss(Os(t.prototype),"afterInsertChild",this)&&Ss(Os(t.prototype),"afterInsertChild",this).call(this,e,n,r,o)}},{key:"beforeRemoveChild",value:function(e,n){var r=Ss(Os(t.prototype),"beforeRemoveChild",this)?Ss(Os(t.prototype),"beforeRemoveChild",this).call(this,e,n):[],o=this.stm;return!o||o.disabled||n||r.push(e.reduce((function(e,t){return e.set(t,t.parentIndex),e}),new Map)),r}},{key:"afterRemoveChild",value:function(e,n,r){var o=this.stm;if(o&&!o.disabled&&!r){var i=n.pop();e&&e.length&&o.onModelRemoveChild(this,e,i)}Ss(Os(t.prototype),"afterRemoveChild",this)&&Ss(Os(t.prototype),"afterRemoveChild",this).call(this,e,n,r)}},{key:"stm",get:function(){return this[Cs]},set:function(e){this[Cs]=e}}])&&ws(n.prototype,r),o&&ws(n,o),t}(Vs||Y)));qs._idField="id",qs._internalIdCounter=1,qs._assignedIdField=!1,qs.exposeProperties(),qs._$name="Model";var Xs=function(e){return{mixes:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(e,t){return t(e)}),e||Y)}}};function Ks(e){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zs(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Js(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function el(e,t){return!t||"object"!==Ks(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tl(e,t,n){return(tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function nl(e){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rl(e,t){return(rl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ol=function(e){function t(){return Js(this,t),el(this,nl(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rl(e,t)}(t,e),n=t,(r=[{key:"add",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return 1===r.length&&Array.isArray(r[0])&&(r=r[0]),(e=tl(nl(t.prototype),"add",this)).call.apply(e,[this].concat(Zs(r.filter((function(e){return e.isPersistable})))))}}])&&Qs(n.prototype,r),o&&Qs(n,o),t}(na);function il(e){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function al(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ul(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sl(e,t){return!t||"object"!==il(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ll(e){return(ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fl(e,t){return(fl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ol._$name="StoreBag";function dl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pl(e){return(pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gl(e,t){return!t||"object"!==pl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vl(e){return(vl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ml(e,t){return(ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bl(e){return(bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function kl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ol(e,t){return!t||"object"!==bl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function El(e,t,n){return(El="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Cl(e){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xl(e,t){return(xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _l={add:1,replace:1};function jl(e){return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Rl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tl(e,t){return!t||"object"!==jl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Al(e){return(Al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ml(e,t){return(Ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Il(e){return(Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ll(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nl(e,t){return!t||"object"!==Il(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hl(e){return(Hl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bl(e,t){return(Bl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zl(e){return(zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $l(e,t){return!t||"object"!==zl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yl(e){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gl(e,t){return(Gl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ul=function(e,t){return-1!==String(e).toLowerCase().indexOf(t)},ql={string:Ul,number:Ul,boolean:Ul,date:function(e,t){return e instanceof Date&&t instanceof Date?String(e)===String(t):-1!==String(e.getMonth()+1).indexOf(t)||-1!==String(e.getDate()).indexOf(t)||-1!==String(e.getFullYear()).indexOf(t)}};function Xl(e){return(Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jl(e,t){return!t||"object"!==Xl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ql(e){return(Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ef(e,t){return(ef=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tf(e){return(tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nf(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function of(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function af(e,t){return!t||"object"!==tf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uf(e,t,n){return(uf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function cf(e){return(cf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sf(e,t){return(sf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lf=function(){return!0};function ff(e){return(ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function df(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hf(e,t){return!t||"object"!==ff(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yf(e){return(yf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gf(e,t){return(gf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(21);function vf(e){return(vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mf(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function bf(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function wf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){bf(i,r,o,a,u,"next",e)}function u(e){bf(i,r,o,a,u,"throw",e)}a(void 0)}))}}function kf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Of(e,t){return!t||"object"!==vf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ef(e){return(Ef=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cf(e,t){return(Cf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xf=Object.freeze([]);function _f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function jf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Df=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"preWalk",value:function(e,t,n){for(var r,o,i=[e];i.length;)n(r=i.pop()),(o=t(r))&&i.push.apply(i,o.slice().reverse())}},{key:"preWalkWithParent",value:function(e,t,n){for(var r=[{node:e,parent:null}],o=function(){var e=r.pop(),o=e.parent,i=e.node;n(o,i);var a=t(i);a&&r.push.apply(r,_f(a.slice().reverse().map((function(e){return{node:e,parent:i}}))))};r.length;)o()}},{key:"preWalkUnordered",value:function(e,t,n){for(var r,o,i=[e];i.length;)n(r=i[i.length-1]),(o=t(r))?i.splice.apply(i,[i.length-1,1].concat(_f(o))):i.length=i.length-1}},{key:"postWalk",value:function(e,t,n){for(var r,o,i=new Map,a=[e];a.length;)r=a[a.length-1],i.has(r)?(n(r),a.pop()):((o=t(r))&&(a=a.concat(o.slice().reverse())),i.set(r,r))}},{key:"prePostWalk",value:function(e,t,n,r){for(var o,i,a=new Map,u=[e];u.length;)o=u[u.length-1],a.has(o)?(r(o),u.pop()):(n(o),(i=t(o))&&(u=u.concat(i.slice().reverse())),a.set(o,o))}}],(n=null)&&jf(t.prototype,n),r&&jf(t,r),e}();function Rf(e){return(Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Af(e,t){return!t||"object"!==Rf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mf(e){return(Mf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function If(e,t){return(If=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Df._$name="WalkHelper";function Ff(e){return(Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hf(e,t){return!t||"object"!==Ff(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bf(e,t,n){return(Bf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function zf(e){return(zf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vf(e,t){return(Vf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wf=Symbol("STM_PROP");function $f(e){return($f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Gf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qf(e,t,n){return t&&Uf(e.prototype,t),n&&Uf(e,n),e}function Xf(e,t){return!t||"object"!==$f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kf(e,t,n){return(Kf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Zf(e){return(Zf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jf(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qf(e,t)}function Qf(e,t){return(Qf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ed=function(e){function t(){return Gf(this,t),Xf(this,Zf(t).apply(this,arguments))}return Jf(t,e),qf(t,[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;Object.assign(n,{added:new ol,removed:new ol,modified:new ol,idRegister:{},internalIdRegister:{}}),Kf(Zf(t.prototype),"construct",this).call(this,e),n.initRelations()}},{key:"doDestroy",value:function(){for(var e,n=this,r=n.registeredRecords,o=r.length-1;o>=0;o--)(e=r[o])&&!e.isDestroyed&&e.unJoinStore(n);n.storage.destroy(),delete t.storeMap[n.id],n.stm&&n.stm.removeStore(n),Kf(Zf(t.prototype),"doDestroy",this).call(this)}},{key:"beginBatch",value:function(){this.suspendEvents()}},{key:"endBatch",value:function(){this.resumeEvents()&&this.trigger("refresh",{action:"batch",data:this.storage.values,records:this.storage.values})}},{key:"onDataChange",value:function(e){var n,r,o=e.source,i=e.action,a=e.added,u=e.removed,c=e.replaced,s=e.oldCount,l=e.item,f=e.from,d=e.to,p=this,h=a&&a.length,y=u&&u.length;if(p._idMap=null,h&&a.forEach((function(e){e.joinStore(p)})),c&&c.forEach((function(e){var t=Yf(e,2),n=t[0],r=t[1];n.unJoinStore(p),r.joinStore(p)})),Kf(Zf(t.prototype),"onDataChange",this).apply(this,arguments),!p.isTree){if(h){var g=!0,v=!1,m=void 0;try{for(var b,w=a[Symbol.iterator]();!(g=(b=w.next()).done);g=!0)(n=b.value).joinStore(p)}catch(e){v=!0,m=e}finally{try{g||null==w.return||w.return()}finally{if(v)throw m}}p.added.add(a),p.removed.remove(a),(r=!p.filterParamName&&p.filtered&&p.reapplyFilterOnAdd)&&p.filter({silent:!0})}if(y){var k=!0,S=!1,O=void 0;try{for(var E,C=u[Symbol.iterator]();!(k=(E=C.next()).done);k=!0)(n=E.value).unJoinStore(p),p.added.includes(n)?p.added.remove(n):p.removed.add(n)}catch(e){S=!0,O=e}finally{try{k||null==C.return||C.return()}finally{if(S)throw O}}p.modified.remove(u),(r=!p.filterParamName&&p.filtered)&&p.filter({silent:!0})}}switch(i){case"clear":p.relationCache={},p.updateDependentStores("removeall"),p.trigger("removeAll"),p.trigger("change",{action:"removeall"});break;case"splice":if(h){p.updateDependentStores("add",a);var x=a.reduce((function(e,t){var n=t.meta.previousIndex;return n>-1&&n<e&&(e=n),e}),a[0].meta.previousIndex),_=o.indexOf(a[0],!o.autoFilter),j={records:a,index:_};x>-1&&(j.oldIndex=x),p.trigger("add",j),p.trigger("change",Object.assign({action:"add"},j)),r&&p.triggerFilterEvent({action:"filter",filters:p.filters,oldCount:s,records:p.storage.allValues})}u.length&&(p.updateDependentStores("remove",u),p.trigger("remove",{records:u}),p.trigger("change",{action:"remove",records:u})),c.length&&(p.trigger("replace",{records:c,all:p.records.length===c.length}),p.trigger("change",{action:"replace",replaced:c,all:p.records.length===c.length}));break;case"filter":p.isGrouped?p.group(null,null,null,null,!0):p.isSorted&&p.performSort(!0);break;case"move":for(var D=p.storage.allValues,R=Math.min(f,d);R<=Math.max(f,d);R++)D[R].parentIndex=R;p.trigger("move",{record:l,from:f,to:d}),p.trigger("change",{action:i,record:l,from:f,to:d})}}},{key:"onModelChange",value:function(e,t,n,r,o){var i=this,a=e.constructor.idField,u={record:e,changes:n,batch:null!=e.batching,fromRelationUpdate:o};if(e.isModified?i.modified.includes(e)||i.added.includes(e)||(i.modified.add(e),i.autoCommit&&i.commit()):i.modified.remove(e),!r){if(a in n){var c=t[a],s=c.oldValue,l=c.value;i.updateDependentRecordIds(s,l),i.onRecordIdChange(e,s,l),i.trigger("idChange",{store:i,record:e,oldValue:s,value:l})}i.onUpdateRecord(e,n),i.trigger("update",u),i.trigger("change",Object.assign({action:"update"},u))}}},{key:"buildRootNode",value:function(){return{}}},{key:"loadData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dataset",n=this,r=n.storage,o=n.allowNoId,i=n.modelClass.fieldMap.id.dataSource;if(n.allCount&&n.clear(!1),n._idMap=null,e){n.storeCollapsedGroups();var a=!(e[0]instanceof qs);if(a){n.modelClass.exposeProperties(e[0]);for(var u=e.length,c=new Array(u),s=0;s<u;s++){var l=e[s];if(!o&&null==l[i])throw new Error("Id required but not found on row ".concat(s));c[s]=n.createRecord(l,!0),c[s].parentIndex=s}r.replaceValues(c,!0,!0)}else r.replaceValues(e.slice(),!0,!0);if(n.storage.allValues.forEach((function(e){e.joinStore(n)})),n.prepareGroupRecords(),n.restoreCollapsedGroups(),!n.filterParamName&&n.isFiltered&&n.filter({silent:!0}),n.isGrouped&&n.group(null,null,!1,!n.sorters.length,!0),!n.sortParamName&&n.sorters.length&&n.sort(null,null,!1,!0),!n.useRawData.disableDuplicateIdCheck){var f=n.idMap;if(Object.keys(f).length<n.storage.values.length){var d=[];throw n.storage.values.forEach((function(e){return f[e.id]?delete f[e.id]:d.push(e)})),new Error("Id collision on ".concat(d.map((function(e){return e.id}))))}}var p={action:t,data:e,records:n.storage.values};n.updateDependentStores(p.action,p.records),n.trigger("refresh",p),n.trigger("change",p)}else n._data=null}},{key:"getRange",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n?this.storage.allValues:this.storage.values).slice(e,t)}},{key:"createRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new this.modelClass(e,this,null,t)}},{key:"refreshData",value:function(){this.filter(),this.sort()}},{key:"onRecordIdChange",value:function(e,t,n){var r=this,o=r._idMap,i=r.idRegister;r.storage._indicesInvalid=!0,o&&(delete o[t],o[n]=e),r.added.changeId(t,n),r.removed.changeId(t,n),r.modified.changeId(t,n),delete i[t],i[n]=e,e.index=r.storage.indexOf(e)}},{key:"onUpdateRecord",value:function(e,t){var n=t.internalId,r=this.internalIdRegister;n&&(this.storage._indicesInvalid=!0,delete r[n.oldValue],r[n.value]=e),this.reapplyFilterOnUpdate&&this.isFiltered&&this.filter()}},{key:"getCount",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?this.count:this.originalCount}},{key:"getAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.storage.getAt(e,t)}},{key:"register",value:function(e){var t=this.isTree&&this.idRegister[e.id];if(t&&t!==e)throw new Error("Id collision on ".concat(e.id));this.idRegister[e.id]=e,this.internalIdRegister[e.internalId]=e}},{key:"unregister",value:function(e){delete this.idRegister[e.id],delete this.internalIdRegister[e.internalId]}},{key:"getById",value:function(e){return e&&e.isModel?e:this.idRegister[e]}},{key:"isVisible",value:function(e){return this.isAvailable(e)}},{key:"isAvailable",value:function(e){var t=this.getById(e);return t&&this.storage.includes(t)||!1}},{key:"getByInternalId",value:function(e){return this.internalIdRegister[e]}},{key:"includes",value:function(e){return this.isTree?null!=this.idRegister[qs.asId(e)]:this.indexOf(e)>-1}},{key:"indexOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=qs.asId(e);if(null==n)return-1;if(this.isTree)return this.storage.indexOf(n);var r=this.idMap[n];return r?r[t?"visibleIndex":"index"]:-1}},{key:"allIndexOf",value:function(e){var t=this;if(this.isTree){var n=this.getById(e),r=-1;return n&&n.bubble((function(e){e.parent?r+=e.parentIndex+1:e===t.rootNode&&t.rootVisible&&(r+=1)})),r}return this.storage.indexOf(e,!0)}},{key:"getDistinctValues",value:function(e){var t,n=[],r={};return this.forEach((function(o){o.meta.specialRow||o.isRoot||(t=o.get(e),r[t]||(n.push(t),r[t]=1))})),n}},{key:"getValueCount",value:function(e,t){var n=0;return this.forEach((function(r){Mt.isEqual(r.get(e),t)&&n++})),n}},{key:"toJSON",value:function(){return(this.isTree?this.rootNode.children:this).map((function(e){return e.toJSON()}))}},{key:"forEach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=function(n,r){if(!n.isRoot&&!n.meta.specialRow)return e.call(t,n,r)};if(this.isTree)this.rootNode.traverseWhile(n);else for(var r=this.storage.values,o=0;o<r.length;o++)if(!1===n(r[o],o))return}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return this.storage.values.map(e,t)}},{key:"reduce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;return n!==this&&(e=e.bind(n)),this.storage.values.reduce(e,t,n)}},{key:Symbol.iterator,value:function(){return this.storage.values[Symbol.iterator]()}},{key:"traverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootNode,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t===this.rootNode,r=this;if(r.isTree){if("boolean"==typeof t&&(n=t,t=r.rootNode),r.isChained){var o=e;e=function(e){r.chainedFilterFn(e)&&o(e)}}t.traverse(e,n)}else{var i=!0,a=!1,u=void 0;try{for(var c,s=r.storage[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var l=c.value;l.traverse(e)}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}}}},{key:"traverseWhile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootNode,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t===this.rootNode,r=this;if(r.isTree){if("boolean"==typeof t&&(n=t,t=r.rootNode),r.isChained){var o=e;e=function(e){r.chainedFilterFn(e)&&o(e)}}t.traverseWhile(e,n)}else{var i=!0,a=!1,u=void 0;try{for(var c,s=r.storage[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var l=c.value;if(!1===l.traverse(e))break}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}}}},{key:"getNext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.storage.values,i=r.indexOf(e);if(i>=o.length-1){if(!t)return null;i=-1}var a=o[i+1];return n&&a&&a.meta.specialRow?r.getNext(o[i+1],t,!0):a}},{key:"getPrev",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.storage.values,i=r.indexOf(e);if(0===i){if(!t)return null;i=o.length}var a=o[i-1];return n&&a&&a.meta.specialRow?r.getNext(o[i+1],t,!0):a}},{key:"getAdjacent",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?this.getNext(e,n,r):this.getPrev(e,n,r)}},{key:"getNextLeaf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n.leaves,o=n.getById(e),i=r.indexOf(o);if(i>=r.length-1){if(!t)return null;i=-1}return r[i+1]}},{key:"getPrevLeaf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n.leaves,o=n.getById(e),i=r.indexOf(o);if(0===i){if(!t)return null;i=r.length}return r[i-1]}},{key:"getAdjacentLeaf",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?this.getNextLeaf(e,n):this.getPrevLeaf(e,n)}},{key:"makeChained",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return new this.constructor(Object.assign(n||{},{tree:!1,autoTree:!1,masterStore:this,chainedFilterFn:e,chainedFields:t}))}},{key:"chain",value:function(){return this.makeChained.apply(this,arguments)}},{key:"storage",set:function(e){var t=this;e&&e.isCollection?t._storage=e:t._storage=new Eo(e),t._storage.autoFilter=t.reapplyFilterOnAdd;var n=!0,r=!1,o=void 0;try{for(var i,a=t._storage[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){i.value.joinStore(t)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}t._storage.on({change:"onDataChange",thisObj:t})},get:function(){return this._storage||(this.storage={}),this._storage}},{key:"allRecords",get:function(){var e=this;if(e.isTree){var t=e.collectDescendants(e.rootNode).all;return e.rootVisible&&t.unshift(e.rootNode),t}return e.isGrouped?e.collectGroupRecords():e.storage.allValues}},{key:"idMap",get:function(){var e=this.storage.values,t=!this._idMap,n=this._idMap||(this._idMap={});if(t)for(var r,o=0,i=0;o<e.length;o++)n[(r=e[o]).id]={index:o,visibleIndex:i,record:r},r.meta.specialRow||i++;return n}},{key:"modelClass",get:function(){return this._modelClass},set:function(e){var t=this.fields,n=null;t&&t.length?(n=function(e){function n(){return Gf(this,n),Xf(this,Zf(n).apply(this,arguments))}return Jf(n,e),qf(n,null,[{key:"fields",get:function(){return t}}]),n}(e)).exposeProperties():n=this.preventSubClassingModel?e:function(e){function t(){return Gf(this,t),Xf(this,Zf(t).apply(this,arguments))}return Jf(t,e),t}(e),n.exposeRelations(),this._modelClass=n}},{key:"storeId",set:function(e){this.id=e},get:function(){return this.id}},{key:"id",set:function(e){this._id&&delete t.storeMap[this._id],this._id=!0===e?ye.generateId("store-"):e,e&&(t.storeMap[e]=this)},get:function(){return this._id}},{key:"tree",get:function(){return this._tree},set:function(e){this._tree=e,e&&!this.rootNode&&(this.rootNode=this.buildRootNode())}},{key:"rootNode",get:function(){return this.masterStore?this.masterStore.rootNode:this._rootNode},set:function(e){var t,n,r,o=this,i=o._rootNode;e!==i&&(i&&o.clear(!1),e instanceof qs?(e.instanceMeta(o).collapsed=!1,o._rootNode=e):(o._rootNode=e=new o.modelClass(Object.assign((t={expanded:!0},n=o.modelClass.idField,r="".concat(o.id,"-rootNode"),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t),e),o,null,!0),e.isAutoRoot=!0),o._tree=!0,e.isRoot=!0,e.joinStore(o),(e.children&&e.children.length||o.rootVisible)&&(e.isLoading=!0,o.onNodeAddChild(e,e.children||[],0),e.isLoading=!1),o.trigger("rootChange",{oldRoot:i,rootNode:e}))}},{key:"data",set:function(e){var t=this;if(t._thisIsAUsedExpression(t.plugins),t.processConfiguredListeners(),t.tree=!t.isChained&&(t.tree||Boolean(t.autoTree&&e&&e.some((function(e){return e[t.modelClass.childrenField]})))),t.syncDataOnLoad&&t._data)t.syncDataset(e);else{if(t._data=e,t.tree){var n=t.rootNode;n.clearChildren(),n.isLoading=!0,n.appendChild(e),t.updateDependentStores("dataset",[n]),n.isLoading=!1,t.isFiltered&&t.filter()}else t.loadData(e);t.added.clear(),t.removed.clear(),t.modified.clear()}},get:function(){return this._data}},{key:"useRawData",get:function(){return this._useRawData},set:function(e){this._useRawData=!0===e?{enabled:!0,disableDuplicateIdCheck:!0,disableTypeConversion:!0,disableDefaultValue:!1}:e?Object.assign(e,{enabled:!0}):{enabled:!1}}},{key:"originalCount",get:function(){return this.storage.totalCount}},{key:"count",get:function(){return this.storage.count}},{key:"allCount",get:function(){return this.isTree?this.rootNode.descendantCount:this.storage.totalCount}},{key:"records",get:function(){return this.storage.values}},{key:"first",get:function(){return this.storage.values[0]}},{key:"last",get:function(){return this.storage.values[this.storage.values.length-1]}},{key:"registeredRecords",get:function(){return Object.values(this.idRegister)}},{key:"json",get:function(){return JSON.stringify(this,null,4)}}],[{key:"getStore",value:function(e,n){if(e instanceof t)return e;if(this.storeMap[e])return this.storeMap[e];if(Array.isArray(e)){var r,o=e.map((function(e){return e instanceof qs?r=e.constructor:"string"==typeof e&&(e={text:e}),e}));e={autoCreated:!0,data:o,modelClass:r||function(e){function t(){return Gf(this,t),Xf(this,Zf(t).apply(this,arguments))}return Jf(t,e),t}(qs),allowNoId:!0},n||(n=t)}return n?new n(e):void 0}},{key:"properties",get:function(){return{relationCache:{},dependentStoreConfigs:new Map}}},{key:"defaultConfig",get:function(){return{storeId:null,id:!0,fields:null,autoTree:!0,modelClass:qs,data:null,tree:!1,callOnFunctions:!0,storage:null,useRawData:!1,allowNoId:!0,preventSubClassingModel:null}}},{key:"stores",get:function(){return Object.values(this.storeMap)}}]),t}(Xs(Y).mixes(ae,cs,ys,(function(e){return function(e){function t(){return hl(this,t),gl(this,vl(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ml(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{filters:null,reapplyFilterOnAdd:!1,reapplyFilterOnUpdate:!1}}}],(r=[{key:"traverseFilter",value:function(e){var t=this,n=!e.isRoot&&t.filtersFunction(e),r=e.unfilteredChildren||e.children;return r&&r.length?(e.unfilteredChildren||(e.unfilteredChildren=e.children.slice()),e.children=e.unfilteredChildren.filter((function(e){return t.traverseFilter(e)})),n||Boolean(e.children.length)):n}},{key:"traverseClearFilter",value:function(e){var t=this;e.unfilteredChildren&&(e.children=e.unfilteredChildren.slice(),e.unfilteredChildren=null),e.children&&e.children.forEach((function(e){return t.traverseClearFilter(e)}))}},{key:"processFieldFilter",value:function(e,t){"string"==typeof e&&(e={property:e,value:t}),(e=e instanceof Zr?e:new Zr(e)).owner=this,this.filters.add(e)}},{key:"filter",value:function(e){var t=this,n=t.filters,r=!1;if(e){var o=pl(e);if("object"===o&&("silent"in e||"replace"in e)&&(r=e.silent,e.replace&&n.clear(),o=pl(e=e.filters)),e&&(t.isConfiguring=!0,Array.isArray(e)?e.forEach(t.processFieldFilter,t):"function"===o?n.add(new Zr(e)):"string"===o?t.processFieldFilter(e,arguments[1]):t.processFieldFilter(e),t.isConfiguring=!1,!t.isFiltered))return}t.filtersFunction=null,t.performFilter(r)}},{key:"performFilter",value:function(e){var t=this,n=t.storage,r=t.filters,o=t.rootNode,i=t.count;t.tree?(t.isFiltered?t.traverseFilter(o):t.traverseClearFilter(o),n.replaceValues(t.collectDescendants(o).visible,!0)):t.isFiltered?n.addFilter({id:"primary-filter",filterBy:t.filtersFunction}):n.filters.clear(),t.afterPerformFilter(e?null:{action:"filter",filters:r,oldCount:i,records:t.storage.values})}},{key:"afterPerformFilter",value:function(e){this.resetRelationCache(),e&&this.triggerFilterEvent(e)}},{key:"triggerFilterEvent",value:function(e){this.trigger("filter",e),this.filterParamName||(this.trigger("refresh",e),this.trigger("change",e))}},{key:"filterBy",value:function(e){this.filter(e)}},{key:"removeFieldFilter",value:function(e,t){var n=this.filters.getBy("property",e);n&&(this.filters.remove(n),this._filtersFunction=null,t||this.filter())}},{key:"removeFilter",value:function(e,t){var n=e instanceof Zr?e:this.filters.get(e);n&&(this.filters.remove(n),this._filtersFunction=null,t||this.filter())}},{key:"clearFilters",value:function(e){this.filters.clear(),this.filter(void 0,void 0,e)}},{key:"convertFilterToString",value:function(e){var t=this.filters.getBy("property",e);return t&&!t.filterBy?String(t):""}},{key:"filters",set:function(e){var t=this,n=t.filters;if(n.clear(),t._filtersFunction=null,e){if("Object"===e.constructor.name)for(var r=0,o=Object.entries(e);r<o.length;r++){var i=o[r];"filterBy"===i[0]&&"function"==typeof i[1]?n.add(new Zr({filterBy:i[1]})):n.add(new Zr("Object"===i[1].constructor.name?Object.assign({property:i[0]},i[1]):{property:i[0],value:i[1]}))}else Array.isArray(e)?n.add.apply(n,dl(e.map((function(e){return e instanceof Zr?e:new Zr(e)})))):e.isCollection?n.add.apply(n,dl(e.values)):n.add(new Zr({filterBy:e}));n.forEach((function(e){return e.owner=t}))}},get:function(){return this._filters||(this._filters=new Eo({extraKeys:["property"]}))}},{key:"filtersFunction",set:function(e){this._filtersFunction=e},get:function(){var e=this,t=e.filters,n=e.isGrouped;if(!e._filtersFunction)if(t.count){var r=Zr.generateFiltersFunction(t);e._filtersFunction=function(e){return n&&e.meta.specialRow?e.groupChildren.some(r):r(e)}}else e._filtersFunction=lr.returnTrue;return e._filtersFunction}},{key:"isFiltered",get:function(){return this.filters.values.some((function(e){return!e.disabled}))}},{key:"latestFilterField",get:function(){return this.filters.last?this.filters.last.property:null}},{key:"filtered",get:function(){return this.storage.isFiltered}},{key:"filterState",get:function(){return this.filters.values.map((function(e){return Mt.cleanupProperties(e.config)}))}}])&&yl(n.prototype,r),o&&yl(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return ul(this,t),sl(this,ll(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fl(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{autoCommit:!1}}}],(r=[{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(arguments.length>2&&arguments[2],this),r=n.storage;if((e=(Array.isArray(e)?e:[e]).reduce((function(e,t){return(t=n.getById(t))&&e.push(t),e}),[])).length){if(n.tree){for(var o=e.reduce((function(e,t){var n=t.parent;return n&&(e[n.id]||(e[n.id]=[n,[]]),e[n.id][1].push(t)),e}),{}),i=0,a=Object.values(o);i<a.length;i++){var u=a[i];u[0].removeChild(u[1],!1,t)}return e}if(n.isGrouped){var c=r.count,s=[],l=new Set,f=!0,d=!1,p=void 0;try{for(var h,y=e[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var g=h.value,v=g.instanceMeta(n),m=v.groupParent;m&&m.meta.collapsed&&s.push(g),U.remove(m.groupChildren,g),m.meta.childCount--,l.add(m)}}catch(e){d=!0,p=e}finally{try{f||null==y.return||y.return()}finally{if(d)throw p}}var b=!0,w=!1,k=void 0;try{for(var S,O=l[Symbol.iterator]();!(b=(S=O.next()).done);b=!0){var E=S.value;n.onModelChange(E,{},{})}}catch(e){w=!0,k=e}finally{try{b||null==O.return||O.return()}finally{if(w)throw k}}s.length&&r.trigger("change",{action:"splice",removed:s,added:[],replaced:[],oldCount:c})}if(!e.length||!t&&!1===n.trigger("beforeRemove",{records:e}))return null;t&&n.suspendEvents(),r.remove(e),t&&n.resumeEvents(),n.autoCommit&&n.commit()}return e}},{key:"clear",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this,n=t.storage;if(t.storage.totalCount){if(e&&!1===t.trigger("beforeRemove",{records:n.allValues,removingAll:!0}))return null;if(!e){for(var r,o=t.registeredRecords,i=o.length-1;i>=0;i--)(r=o[i])&&!r.isDestroyed&&r.unJoinStore(t);t.removed.clear()}e||n.suspendEvents(),n.clear(),e||n.resumeEvents(),t.added.clear(),t.modified.clear()}}},{key:"removeAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.storage;if(e){n.suspendEvents();for(var r,o=t.registeredRecords,i=o.length-1;i>=0;i--)(r=o[i])&&!r.isDestroyed&&r.unJoinStore(t)}t.tree?t.rootNode.clear():t.clear(),e&&n.resumeEvents()}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n.storage,o=[];if(Array.isArray(e)){if(!e.length)return}else e=[e];if(n.tree=n.tree||Boolean(n.autoTree&&e[0].children),n.tree){var i=new Map,a=[];return e.forEach((function(e){var t=e[n.modelClass.parentIdField];i.has(t)||i.set(t,[]),i.get(t).push(e)})),i.forEach((function(e,r){var o=null==r?n.rootNode:n.getById(r);if(!o)throw new Error("Parent node with id ".concat(r," not found, cannot add children."));a.push.apply(a,al(o.appendChild(e,t)))})),a}return t||!1!==n.trigger("beforeAdd",{records:e})?(n.tree=n.tree||Boolean(n.autoTree&&e[0].children),n.tree?n.rootNode.appendChild(e):(e.forEach((function(e){o.push(e instanceof qs?e:n.createRecord(e))})),t&&n.suspendEvents(),r.add(o),t&&n.resumeEvents(),n.autoCommit&&n.commit(),o)):null}},{key:"insert",value:function(e,t){var n,r,o,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this,u=a.storage,c=[],s=a.getAt(e),l=u.values,f=[];if(Array.isArray(t)||(t=[t]),!1===a.trigger("beforeAdd",{records:t}))return null;if(l[r=e]===t[0]||l[r=e-1]===t[0])for(n=!0,o=0;n&&o<t.length;o++)t[o]!==l[r+o]&&(n=!1);if(n)return null;if(t.forEach((function(t){var n=t instanceof qs?t:a.createRecord(t),r=u.indexOf(n);n.children&&n.children.length&&a.autoTree&&(a.tree=!0),c.push(n),r>-1&&(r<e&&s&&e--,f.push(r)),n.meta.previousIndex=r})),a.tree){var d=a.rootNode;return d.insertChild(t,d.children&&d.children[e])}return a.suspendEvents(),a.storage.remove(f),a.resumeEvents(),i&&a.suspendEvents(),u.splice.apply(u,[e,0].concat(c)),i&&a.resumeEvents(),a.autoCommit&&a.commit(),c}},{key:"move",value:function(e,t){this.storage.move(e,t)}},{key:"setMultiple",value:function(e,t,n){var r=this,o=[],i=[];r.forEach((function(r){e(r)&&(i.push(r.set(t,n,!0)),o.push(r))})),r.trigger("updateMultiple",{records:o,all:r.records.length===o.length}),r.trigger("change",{action:"updatemultiple",records:o,all:r.records.length===o.length}),r.reapplyFilterOnUpdate&&r.isFiltered&&r.filter()}},{key:"setAll",value:function(e,t){var n=this,r=[];n.forEach((function(n){r.push(n.set(e,t,!0))})),n.trigger("updateMultiple",{records:n.records,all:!0}),n.trigger("change",{action:"updatemultiple",records:n.records,all:!0}),n.reapplyFilterOnUpdate&&n.isFiltered&&n.filter()}},{key:"acceptChanges",value:function(){var e=this;e.added.forEach((function(e){return e.clearChanges(!1)})),e.modified.forEach((function(e){return e.clearChanges(!1)})),e.added.clear(),e.modified.clear(),e.removed.clear()}},{key:"commit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.changes;return this.callPreventable("commit",{changes:n},(function(){return e.acceptChanges(),n}),[],t)}},{key:"clearChanges",value:function(){var e=this;e.remove(e.added.values,!0),e.modified.forEach((function(e){return e.clearChanges(!1)})),e.added.clear(),e.modified.clear(),e.removed.clear(),e.trigger("change",{action:"clearchanges"})}},{key:"applyChangesFromStore",value:function(e){var t=this,n=e.changes;n&&(n.added&&t.add(n.added),n.removed&&t.remove(n.removed.map((function(e){return e.id}))),n.modified&&n.modified.forEach((function(e){t.getById(e.id).set(e.modifications)})))}},{key:"changes",get:function(){var e=this;return e.added.count||e.modified.count||e.removed.count?{added:e.added.values.slice(),modified:e.modified.values.slice(),removed:e.removed.values.slice()}:null}},{key:"autoCommit",get:function(){return this._autoCommit},set:function(e){this._autoCommit=e,e&&this.changes&&this.commit()}}])&&cl(n.prototype,r),o&&cl(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return Rl(this,t),Tl(this,Al(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ml(e,t)}(t,e),n=t,(r=[{key:"initRelations",value:function(e){var t=this,n=t.modelClass.relations;e&&t.modelRelations&&t.modelRelations.forEach((function(e){e.storeDetacher&&e.storeDetacher()})),t.modelRelations&&0!==t.modelRelations.length&&!e||!n||(t.modelRelations=[],n&&n.forEach((function(e){var n=Object.assign({},e),r="string"==typeof n.store?t[n.store]:n.store;if(n.dependentStore=t,t.modelRelations.push(n),r){n.storeProperty=n.store,n.store=r;var o=r.dependentStoreConfigs;o.has(t)?o.get(t).push(n):o.set(t,[n]),n.collectionName&&r.initRelationCollection(n,t),r.count>0&&r.updateDependentStores("dataset",r.records)}})))}},{key:"initRelationCollection",value:function(e,t){var n=this,r=e.collectionName;n.collectionStores||(n.collectionStores={}),n.collectionStores[r]={store:t,config:e},n[r+"Store"]||(n[r+"Store"]=t),n.count>0&&n.initModelRelationCollection(r,n.records)}},{key:"initModelRelationCollection",value:function(e,t){var n=this;t.forEach((function(t){t.traverse((function(t){!(e in t)&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n.getCollection(this,e)},set:function(t){return n.setCollection(this,e,t)}})}))}))}},{key:"resetRelationCache",value:function(){this.relationCache={},this.forEach((function(e){return e.initRelations()}))}},{key:"updateRecordRelationCache",value:function(e,t){var n=this;t&&t.forEach((function(t){var r=t.related?t.related.id:e.get(t.config.fieldName);void 0!==r&&n.cacheRelatedRecord(e,r,t.config.relationName,r)}))}},{key:"getCollection",value:function(e,t){var n=this.collectionStores[t],r=n.config,o=n.store;return o.relationCache[r.relationName]&&o.relationCache[r.relationName][e.id]||[]}},{key:"setCollection",value:function(e,t,n){var r=this.collectionStores[t],o=r.config,i=r.store;i.relationCache[o.relationName]||(i.relationCache[o.relationName]={});var a=(i.relationCache[o.relationName][e.id]||[]).slice(),u=[],c=[];i.suspendEvents(),a.forEach((function(e){n.includes(e)||(e[o.fieldName]=null,i.remove(e),c.push(e))})),n.forEach((function(t){t instanceof qs?t.stores.includes(i)||(i.add(t),u.push(t)):(t=Dl(i.add(t),1)[0],u.push(t)),t[o.fieldName]=e.id})),i.resumeEvents(),c.length&&(i.trigger("remove",{records:c}),i.trigger("change",{action:"remove",records:c})),u.length&&(i.trigger("add",{records:u}),i.trigger("change",{action:"add",records:u}))}},{key:"cacheRelatedRecord",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this,i=o.relationCache[n]||(o.relationCache[n]={});null!==r&&o.uncacheRelatedRecord(e,n,r),null!=t&&U.include(i[t]||(i[t]=[]),e)}},{key:"uncacheRelatedRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this;function o(t,n){var o=r.relationCache[t],i=o&&o[n];if(i){var a=i.indexOf(e);a>=0&&i.splice(a,1),0===i.length&&delete o[n]}}null!=n?o(t,n):e.meta.relationCache&&Object.entries(e.meta.relationCache).forEach((function(e){var t=Dl(e,2),n=t[0],r=t[1];o(n,r&&r.id)}))}},{key:"updateDependentStores",value:function(e,t){var n=this;this.dependentStoreConfigs.forEach((function(r){r.forEach((function(r){var o=r.dependentStore,i=o.relationCache[r.relationName];return"dataset"===e?(r.collectionName&&n.initModelRelationCollection(r.collectionName,t),void o.forEach((function(e){var t=e.initRelation(r);t&&o.cacheRelatedRecord(e,t.id,r.relationName,t.id)}))):"removeall"===e?(o.forEach((function(e){e.removeRelation(r)})),void delete o.relationCache[r.relationName]):("add"===e&&r.collectionName&&n.initModelRelationCollection(r.collectionName,t),void("add"!==e&&"remove"!==e||t.forEach((function(t){var n=i&&i[t.id];switch(e){case"remove":n&&n.forEach((function(e){return e.removeRelation(r)}));break;case"add":o.forEach((function(e){e.get(r.fieldName)==t.id&&(e.initRelation(r),o.cacheRelatedRecord(e,t.id,r.relationName))}))}}))))}))}))}},{key:"updateDependentRecordIds",value:function(e,t){this.dependentStoreConfigs&&this.dependentStoreConfigs.forEach((function(n){n.forEach((function(n){var r=n.dependentStore,o=r.relationCache[n.relationName],i=o&&o[e]&&o[e].slice();i&&i.forEach((function(o){o.set(n.fieldName,t,!1,!0),r.cacheRelatedRecord(o,t,n.relationName,e)}))}))}))}}])&&Pl(n.prototype,r),o&&Pl(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return Fl(this,t),Nl(this,Hl(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bl(e,t)}(t,e),n=t,(r=[{key:"sum",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.storage.values;return t?t.reduce((function(t,n){if(n.meta.specialRow)return t;var r=Number(n[e]);return isNaN(r)?t:t+r}),0):0}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.storage.values;return t&&t.length?t.reduce((function(t,n){return n[e]<t&&(t=n[e]),t}),t[0][e]):0}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.storage.values;return t&&t.length?t.reduce((function(t,n){return n[e]>t&&(t=n[e]),t}),t[0][e]):0}},{key:"average",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.storage.values;if(!t||!t.length)return 0;var n=0,r=t.reduce((function(t,r){if(r.meta.specialRow)return t;var o=parseFloat(r[e]);return isNaN(o)?t:(n++,t+o)}),0);return r/n}},{key:"groupSum",value:function(e,t){return this.sum(t,this.getGroupRecords(e))}}])&&Ll(n.prototype,r),o&&Ll(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return Vl(this,t),$l(this,Yl(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gl(e,t)}(t,e),n=t,(r=[{key:"search",value:function(e){var t,n,r,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=this.storage.values,c=u.length,s=[];if(null==e)return null;for("string"==typeof e&&(e=String(e).toLowerCase()),t=0;t<c;t++){n=u[t];var l=!0,f=!1,d=void 0;try{for(var p,h=(a||n.fieldNames)[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var y=p.value;o=(r=n[y])instanceof Date?"date":zl(r),i=ql[o],r&&i&&i(r,e)&&s.push({index:t,data:n,field:y,id:n.id})}}catch(e){f=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(f)throw d}}}return s}},{key:"findByField",value:function(e,t){var n,r,o,i=this.storage.values,a=i.length,u=[];for(null!=t&&(t=String(t).toLowerCase()),n=0;n<a;n++){r=i[n];var c=(o=r[e])instanceof Date?"date":zl(o),s={date:function(){return Boolean(o)&&o.toLocaleString().includes(t)},string:function(){return Boolean(o)&&o.toLowerCase().includes(t)},number:function(){return"number"==typeof o&&o.toString().includes(t)},object:function(){return o===t},undefined:function(){return o===t}};(null==t&&o===t||t&&s[c]())&&u.push({id:r.id,index:n,data:r})}return u}},{key:"find",value:function(e){return this.storage.values.find(e)}},{key:"findRecord",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(n){return Mt.isEqual(n[e],t)};return this.tree?this.query(r)[0]:(n?this.storage.allValues:this.storage.values).find(r)}},{key:"query",value:function(e){if(this.isTree){var t=[];return this.traverse((function(n){e(n)&&t.push(n)})),t}return this.storage.values.filter(e)}},{key:"some",value:function(e){return this.storage.values.some(e)}}])&&Wl(n.prototype,r),o&&Wl(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return Kl(this,t),Jl(this,Ql(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ef(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{sorters:[],useLocaleSort:null}}}],(r=[{key:"sort",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this,a=i.allRecords,u=i.sorters?i.sorters.slice():[],c=null;if(e)if(Array.isArray(e))i.sorters=e.map((function(e){return"string"==typeof e?{field:e}:e}));else{var s="object"===Xl(e)?e.field:e;if(n=i.sorters.find((function(e){return e.field===s})),null==t){var l=n&&("string"==typeof e&&n.field===e||"object"===Xl(e)&&n.field===e.field);t=!l||!n.ascending}var f={field:s,ascending:t};"object"===Xl(e)&&(f.fn=e.fn,f.useLocaleSort=e.useLocaleSort),r?n?(c=n.ascending,n.ascending=t):i.sorters.push(f):i.sorters=[f]}return o||!1!==i.trigger("beforeSort",{sorters:i.sorters,records:a,currentSorters:u})?i.performSort(o):(i.sorters=u,void(null!==c&&(n.ascending=c)))}},{key:"addSorter",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.sort(e,t,!0)}},{key:"removeSorter",value:function(e){var t=this.sorters.findIndex((function(t){return t.field==e}));t>-1&&(this.sorters.splice(t,1),this.sort())}},{key:"clearSorters",value:function(){this.sorters.length=0,this.sort()}},{key:"createSorterFn",value:function(e){var t=this.useLocaleSort;return function(n,r){for(var o=0;o<e.length;o++){var i=e[o],a=i.field,u=i.ascending,c=void 0===u||u,s=i.fn,l=void 0===s?null:s,f=i.useLocaleSort,d=void 0===f?t:f,p=c?1:-1;if(l){var h=l(n,r);if(null!==h)return h*p}var y=n[a],g=r[a];if(null==y)return-p;if(null==g)return p;if(d){if(!0===d)return String(y).localeCompare(g)*p;if("string"==typeof d)return String(y).localeCompare(g,d)*p;if("object"===Xl(d))return String(y).localeCompare(g,d.locale,d)*p}if(y>g)return p;if(y<g)return-p}return 0}}},{key:"performSort",value:function(e){var t=this,n=t.rootNode,r=t.storage,o=t.sorters,i=t.createSorterFn(t.isGrouped?t.groupers.concat(o):o);t.isGrouped&&t.storeCollapsedGroups()&&r.replaceValues(t.removeHeadersAndFooters(r.values),!0),t.tree?(n.traverse((function(e){e.isLoaded&&e.isParent&&(e.children=e.children.sort(i),e.updateChildrenIndex(e.children))})),r.replaceValues(t.collectDescendants(n).visible,!0)):r.replaceValues(r.values.sort(i),!0),t.afterPerformSort(e)}},{key:"afterPerformSort",value:function(e){var t=this,n=t.storage;if(t._idMap=null,t.isGrouped&&(n.replaceValues(t.prepareGroupRecords(n.values),!0),t.restoreCollapsedGroups()),!e){var r={action:"sort",sorters:t.sorters,records:t.allRecords};t.trigger("sort",r),t.sortParamName||t.trigger("refresh",r)}}},{key:"isSorted",get:function(){return Boolean(this.sorters.length)||this.isGrouped}}])&&Zl(n.prototype,r),o&&Zl(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return kl(this,t),Ol(this,Cl(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xl(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{groupers:null}}}],(r=[{key:"construct",value:function(e){El(Cl(t.prototype),"construct",this).call(this,e),this.on("change",this.onDataChanged)}},{key:"storeCollapsedGroups",value:function(){var e=this;return e.collapsedGroupsHash={},!(!e.groupRecords||!e.groupRecords.length||(e.groupRecords.forEach((function(t){e.expand(t)&&(e.collapsedGroupsHash[t.id]=!0)})),0))}},{key:"restoreCollapsedGroups",value:function(){var e=this;Object.keys(e.collapsedGroupsHash).forEach((function(t){return e.collapse(e.getById(t))}))}},{key:"onDataChange",value:function(e){var n=e.source,r=e.action,o=e.removed,i=this,a=i.groupers;if(a){var u=n.values;a.length?"splice"===r&&o&&o.length&&(i.storeCollapsedGroups()&&i.storage.replaceValues(i.removeHeadersAndFooters(u),!0),i.storage.replaceValues(i.prepareGroupRecords(u),!0),i.restoreCollapsedGroups()):n.replaceValues(i.removeHeadersAndFooters(u),!0)}El(Cl(t.prototype),"onDataChange",this)&&El(Cl(t.prototype),"onDataChange",this).apply(this,arguments)}},{key:"collapse",value:function(e){return!(!e||e.meta.collapsed||(this.excludeGroupRecords(e),e.meta.collapsed=!0,0))}},{key:"expand",value:function(e){return!(!e||!e.meta.collapsed||(this.includeGroupRecords(e),e.meta.collapsed=!1,0))}},{key:"removeHeadersAndFooters",value:function(e){var t=this;return e.filter((function(e){return!e.meta.specialRow||(t.unregister(e),!1)}),!0)}},{key:"prepareGroupRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.registeredRecords,t=this;if(e=t.removeHeadersAndFooters(e),!t.isGrouped)return e;var n=[],r=t.groupers[0].field,o=[],i=null,a=null,u=0;function c(){var e=a.meta.groupRowFor,r="group-footer-".concat("number"==typeof e?e:A.createId(e)),i=t.getById(r)||new t.modelClass({id:r},t,{specialRow:!0,groupFooterFor:e,groupRecord:a});return t.register(i),i.groupChildren=a.groupChildren,o.push(i),n.push(i),t.allRecords.push(i),a.groupChildren.push(i),u++,i}return e.forEach((function(e){var s=e[r],l="group-header-".concat("number"==typeof s?s:A.createId(s));!e.groupChildren||e.groupChildren.length?(Mt.isEqual(s,i)||(a&&(t.useGroupFooters&&c(),a.meta.childCount=u),a=t.getById(l)||new t.modelClass({id:l},t,{specialRow:!0,groupRowFor:s,groupField:r}),t.register(a),a.groupChildren=[],n.push(a),t.allRecords.push(a),o.push(a),i=s,u=0),e.instanceMeta(t.id).groupParent=a,n.push(e),a.groupChildren.push(e),u++):t.unregister(e)})),a&&(a.meta.childCount=u,t.useGroupFooters&&c()),t.groupRecords=o,n}},{key:"group",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this;if(r?a.groupers.push(n={field:e,ascending:t,complexMapping:e.includes(".")}):e&&(null==t&&(t=!a.groupInfo||a.groupInfo.field!==e||!a.groupInfo.ascending),a.groupInfo=n={field:e,ascending:t,complexMapping:e.includes(".")},a.groupers=[a.groupInfo]),n){var u=a.modelClass.prototype;n.complexMapping&&!u.hasOwnProperty(e)&&Object.defineProperty(u,e,{get:function(){return Mt.getPath(this,e)}})}!1!==o&&a.sort(null,null,!1,!0),i||(a.trigger("group",{isGrouped:a.isGrouped,groupers:a.groupers,records:a.storage.values}),a.trigger("refresh",{action:"group",isGrouped:a.isGrouped,groupers:a.groupers,records:a.storage.values}))}},{key:"addGrouper",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.group(e,t,!0)}},{key:"removeGrouper",value:function(e){var t=this.groupers.findIndex((function(t){return t.field===e}));t>-1&&(this.groupers.splice(t,1),this.group())}},{key:"clearGroupers",value:function(){this.groupers=null}},{key:"isRecordInGroup",value:function(e,t){return this.isGrouped?e[this.groupers[0]&&this.groupers[0].field]===t&&!e.meta.specialRow:null}},{key:"isInCollapsedGroup",value:function(e){var t=e.instanceMeta(this).groupParent;return t&&t.meta.collapsed}},{key:"getGroupRecords",value:function(e){var t=this;return t.isGrouped?t.storage.values.filter((function(n){return t.isRecordInGroup(n,e)})):null}},{key:"getGroupTitles",value:function(){return this.isGrouped?this.getDistinctValues(this.groupers[0]&&this.groupers[0].field):null}},{key:"onDataChanged",value:function(e){this.isGrouped&&(!e.changes&&_l[e.action]||e.changes&&this.groupers.some((function(t){return t.field in e.changes})))&&this.sort()}},{key:"internalIncludeExcludeGroupRecords",value:function(e,t){var n=this,r=n.indexOf(e),o=n.id;if(-1!==r&&!(e.meta.collapsed&&!t||!e.meta.collapsed&&t)){if(e.groupChildren.forEach((function(e){return e.instanceMeta(o).hiddenByCollapse=!t})),t){var i,a=e.groupChildren.filter((function(e){return!n.isAvailable(e)}));(i=n.storage.values).splice.apply(i,[r+1,0].concat(wl(a)))}else n.storage.values.splice(r+1,e.groupChildren.length);n.storage._indicesInvalid=!0,n._idMap=null}}},{key:"excludeGroupRecords",value:function(e){this.internalIncludeExcludeGroupRecords(e,!1)}},{key:"includeGroupRecords",value:function(e){this.internalIncludeExcludeGroupRecords(e,!0)}},{key:"collectGroupRecords",value:function(){return this.records.reduce((function(e,t){return t.meta.specialRow&&(e.push(t),"groupRowFor"in t.meta&&e.push.apply(e,t.groupChildren)),e}),[])}},{key:"groupers",get:function(){return this._groupers},set:function(e){var t=this;e&&e.length?t._groupers=e:t.groupers&&(delete t._groupers,t.groupRecords.forEach((function(e){e.meta.collapsed&&t.includeGroupRecords(e)})),t.storage.replaceValues(t.removeHeadersAndFooters(t.registeredRecords),!0),t.group(null,null,null,!1),"groupRecords"in t&&delete t.groupRecords)}},{key:"isGrouped",get:function(){return Boolean(this.groupers&&this.groupers.length)}}])&&Sl(n.prototype,r),o&&Sl(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return rf(this,t),af(this,cf(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sf(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{chainedFilterFn:null,chainedFields:null,masterStore:null,doRelayToMaster:["add","remove","insert","removeAll"],dontRelayToMaster:[],keepUncommittedChanges:!1}}}],(r=[{key:"construct",value:function(e){var n=this;uf(cf(t.prototype),"construct",this).call(this,e),n.masterStore&&(n.methodNamesToRelay.forEach((function(e){return n[e]=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n.relayToMaster(e,r)}})),n.masterStore.on({change:n.onMasterDataChanged,prio:1,thisObj:n}),n.masterStore.chainedStores||(n.masterStore.chainedStores=[]),n.masterStore.chainedStores.push(n),n.fillFromMaster())}},{key:"updateChainedStores",value:function(){this.chainedStores&&this.chainedStores.forEach((function(e){return e.fillFromMaster()}))}},{key:"fillFromMaster",value:function(){var e=this,t=e.masterStore;if(!e.isChained)throw new Error("fillFromMaster only allowed on chained store");if(e.keepUncommittedChanges){if(e.isTree)throw new Error("Cannot use keepUncommittedChanges on a chained tree store");e.data=[].concat(e.added.values.filter((function(t){return!e.removed.includes(t)})),t.allRecords.filter((function(t){return!e.removed.includes(t)&&!e.added.includes(t)&&e.chainedFilterFn(t)})))}else if(t.isTree){e.idRegister={},e.internalIdRegister={},t.allRecords.filter(e.chainedFilterFn).forEach((function(t){t.stores.includes(e)?e.register(t):t.joinStore(e)}));var n=e.getChildren(e.masterStore.rootNode);e.data=e.doIncludeExclude(n,!0)}else e.data=t.allRecords.filter(e.chainedFilterFn)}},{key:"commitToMaster",value:function(){var e=this,t=e.masterStore;if(!e.isChained)throw new Error("commitToMaster only allowed on chained store");return t.beginBatch(),t.remove(e.removed.values),t.add(e.added.values),t.endBatch(),e.commit()}},{key:"relayToMaster",value:function(e,t){var n;if("remove"!==e||4!==t.length||!0!==t[3])return(n=this.masterStore)[e].apply(n,nf(t))}},{key:"onMasterDataChanged",value:function(e){var t=e.action,n=e.changes;("update"!==t||this.chainedFields&&this.chainedFields.some((function(e){return e in n})))&&this.fillFromMaster()}},{key:"isChained",get:function(){return Boolean(this.masterStore)}},{key:"chainedFilterFn",set:function(e){this._chainedFilterFn=this.thisObj?e.bind(this.thisObj):e},get:function(){return this._chainedFilterFn||lf}},{key:"methodNamesToRelay",get:function(){var e=this,t=Array.isArray(this.doRelayToMaster),n=Array.isArray(this.dontRelayToMaster);return t&&this.doRelayToMaster.filter((function(t){return!n||!e.dontRelayToMaster.includes(t)}))||[]}}])&&of(n.prototype,r),o&&of(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return df(this,t),hf(this,yf(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gf(e,t)}(t,e),n=t,(r=[{key:"getState",value:function(){var e=this,t={};return e.sorters&&e.sorters.length&&(t.sorters=e.sorters.slice()),e.groupers&&e.groupers.length&&(t.groupers=e.groupers.slice()),e.filters&&e.filters.values.length&&(t.filters=e.filterState),t}},{key:"applyState",value:function(e){var t=this;"sorters"in e&&(t.sorters=e.sorters.slice()),"groupers"in e&&(t.groupers=e.groupers.slice()),("sorters"in e||"groupers"in e)&&t.sort(),"filters"in e&&(t.filters=e.filters.slice(),t.filter())}}])&&pf(n.prototype,r),o&&pf(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return kf(this,t),Of(this,Ef(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cf(e,t)}(t,e),n=t,(r=[{key:"loadChildren",value:(a=wf(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"onNodeAddChild",value:function(e,t,n,r){var o,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this,u=e===a.rootNode&&e.isLoading,c=a.storage,s=[],l=[],f=t[0].previousSibling;if(a.collectDescendants(t,s,l,{inCollapsedBranch:!(e.isExpanded(a)&&e.ancestorsExpanded(a))}),!u&&l.length){var d=!0,p=!1,h=void 0;try{for(var y,g=l[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var v=y.value;a.modified.includes(v)||r[v.id]||(a.added.add(v),a.removed.remove(v))}}catch(e){p=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}}if(u&&a.rootVisible&&(s.unshift(e),l.unshift(e)),s.length&&(o=0!==n&&f?c.indexOf(f)+f.getDescendantCount(!0,a):c.indexOf(e),c.suspendEvents(),a.storage.splice(++o,0,s),c.resumeEvents()),a.updateDependentStores("add",t),u&&s.length){if(a.sorters.length&&a.sort(null,null,!1,!0),!i){var m={action:"dataset",data:a._data,records:s};a.trigger("refresh",m),a.trigger("change",m)}}else if(!i){var b={action:"add",parent:e,isChild:!0,isMove:r,records:t,allRecords:l,index:o};a.trigger("add",b),a.trigger("change",b)}}},{key:"onNodeRemoveChild",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isMove:!1,silent:!1,unfiltered:!1},o=this,i=o.storage,a=[],u=[],c=r.isMove,s=r.silent,l=r.unfiltered,f=l&&o.isFiltered,d=f&&e.unfilteredChildren?e.unfilteredChildren:t;if(o.collectDescendants(d,a,u,{inCollapsedBranch:!(e.isExpanded(o)&&e.ancestorsExpanded(o)),unfiltered:f}),!c){var p=!0,h=!1,y=void 0;try{for(var g,v=t[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var m=g.value;m.unJoinStore(o)}}catch(e){h=!0,y=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw y}}if(u.length){var b=!0,w=!1,k=void 0;try{for(var S,O=u[Symbol.iterator]();!(b=(S=O.next()).done);b=!0){var E=S.value;E.stores.includes(o)&&E.unJoinStore(o),o.added.includes(E)?o.added.remove(E):o.removed.add(E)}}catch(e){w=!0,k=e}finally{try{b||null==O.return||O.return()}finally{if(w)throw k}}o.modified.remove(u)}}if(a.length?(n=i.indexOf(a[0]))>-1&&(i.suspendEvents(),i.splice(n,a.length),i.resumeEvents()):n=-1,!s){var C={action:"remove",parent:e,isChild:!0,isMove:c,records:t,allRecords:u,index:n};o.trigger("remove",C),o.trigger("change",C)}}},{key:"collectDescendants",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{inCollapsedBranch:!1,unfiltered:!1},o=this,i=r.inCollapsedBranch,a=r.unfiltered,u=Array.isArray(e)?e:a?e&&e.unfilteredChildren:o.getChildren(e);if(u)for(var c,s=0,l=u.length;s<l;s++)c=u[s],i||t.push(c),n.push(c),o.collectDescendants(c,t,n,{inCollapsedBranch:i||!c.isExpanded(o),unfiltered:a});return{visible:t,all:n}}},{key:"getChildren",value:function(e){return e.children&&e.children.length?this.isChained?e.children.filter(this.chainedFilterFn):e.children:xf}},{key:"internalToggleTreeSubRecords",value:function(e,t){var n=this,r=n.storage,o=r.indexOf(e),i=n.doIncludeExclude(n.getChildren(e),t);if(i.length&&!1!==o){if(r.suspendEvents(),t){r.splice.apply(r,[o+1,0].concat(mf(i)));var a={action:"add",isExpand:!0,records:i,index:o+1};n.trigger("add",a),n.trigger("change",a)}else{r.splice(o+1,i.length);var u={action:"remove",isCollapse:!0,records:i,index:o+1};n.trigger("remove",u),n.trigger("change",u)}r.resumeEvents()}}},{key:"doIncludeExclude",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this,o=e&&e.length,i=0;i<o;i++){var a=e[i];if(!r.isChained||r.chainedFilterFn(a)){var u=a.instanceMeta(r.id);t?n.push(a):u.hidden||n.push(a),u.hidden=!t,a.isExpanded(r)&&r.doIncludeExclude(r.getChildren(a),t,n)}}return n}},{key:"toggleCollapse",value:(i=wf(regeneratorRuntime.mark((function e(t,n){var r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(r=this).getById(t),i=o.instanceMeta(r),void 0===n&&(n=!i.collapsed),i.isLoadingChildren||o.isLeaf||o.isExpanded(r)!==n){e.next=28;break}if(r.trigger("beforeToggleNode",{record:o,collapse:n}),i.collapsed=n,!i.collapsed){e.next=10;break}return r.onNodeCollapse(o),e.abrupt("return",!0);case 10:if(r.onNodeExpand(o),a=!0,o.isLoaded){e.next=27;break}return i.isLoadingChildren=!0,e.prev=14,e.next=17,r.loadChildren(o);case 17:e.next=24;break;case 19:e.prev=19,e.t0=e.catch(14),i.collapsed=!0,a=!1,r.trigger("loadChildrenException",{record:o,exception:e.t0});case 24:return e.prev=24,i.isLoadingChildren=!1,e.finish(24);case 27:return e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,this,[[14,19,24,27]])}))),function(e,t){return i.apply(this,arguments)})},{key:"onNodeCollapse",value:function(e){if(e.ancestorsExpanded(this))return this.internalToggleTreeSubRecords(e,!1)}},{key:"onNodeExpand",value:function(e){if(e.ancestorsExpanded(this))return this.internalToggleTreeSubRecords(e,!0)}},{key:"isTree",get:function(){return this.tree||this.masterStore&&this.masterStore.tree}},{key:"leaves",get:function(){var e=[];return this.isTree?(this.traverse((function(t){t.isLeaf&&e.push(t)})),e):(this.allRecords.forEach((function(t){t.isLeaf&&e.push(t),t.traverse((function(t){t.isLeaf&&e.push(t)}),!0)})),e)}}])&&Sf(n.prototype,r),o&&Sf(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return Lf(this,t),Hf(this,zf(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vf(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{stm:null}}}],(r=[{key:"add",value:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.stm;return this.tree||!o||o.disabled?n=Bf(zf(t.prototype),"add",this).call(this,e,r):(n=Bf(zf(t.prototype),"add",this).call(this,e,r))&&n.length&&o.onStoreModelAdd(this,n,r),n}},{key:"insert",value:function(e,n){var r,o=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.stm;if(this.tree||!a||a.disabled)r=Bf(zf(t.prototype),"insert",this).call(this,e,n,i);else{var u=(Array.isArray(n)?n:[n]).reduce((function(e,t){var n=t instanceof qs?o.indexOf(t):void 0;return void 0!==n&&-1!==n&&e.set(t,n),e}),new Map);(r=Bf(zf(t.prototype),"insert",this).call(this,e,n))&&r.length&&(e=this.indexOf(r[0]),a.onStoreModelInsert(this,e,r,u,i))}return r}},{key:"remove",value:function(e){var n,r=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,a=this.stm;if(this.tree||!a||a.disabled)n=Bf(zf(t.prototype),"remove",this).call(this,e,o,i);else{var u=(Array.isArray(e)?e:[e]).map((function(e){return r.getById(e)})).filter((function(e){return!!e})),c=u.reduce((function(e,t){var n=r.indexOf(t);return void 0!==n&&-1!=n&&e.set(t,n),e}),new Map);(n=Bf(zf(t.prototype),"remove",this).call(this,e,o,i))&&n.length&&a.onStoreModelRemove(this,n,c,o)}return n}},{key:"removeAll",value:function(e){var n=this.stm;if(n&&!n.disabled){var r=this.tree,o=this.rootNode,i=this.allRecords,a=i.length,u=r?o.children.slice():i.slice();Bf(zf(t.prototype),"removeAll",this).call(this,e),a&&0===this.count&&n.onStoreRemoveAll(this,u,e)}else Bf(zf(t.prototype),"removeAll",this).call(this,e)}},{key:"stm",get:function(){return this[Wf]},set:function(e){var t=this;t.stm!=e&&(t.stm&&t.stm.hasStore(t)&&t.stm.removeStore(t),t[Wf]=e,t.stm&&!t.stm.hasStore(t)&&t.stm.addStore(t))}}])&&Nf(n.prototype,r),o&&Nf(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return Pf(this,t),Af(this,Mf(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&If(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{syncDataOnLoad:null}}}],(r=[{key:"syncDataset",value:function(e){var t=this,n=t.storage,r=t.tree?t.syncTreeDataset(e):t.syncFlatDataset(e),o=r.toAdd,i=r.toRemove,a=r.updated,u=t.syncDataOnLoad.threshold,c=!1;u&&("string"==typeof u&&(u=parseInt(u,10)/100*t.count),c=o.length+i.length+a.length>u),t.tree?(o.length&&t.add(o,c).forEach((function(e){delete e.data.parentId,delete e.originalData.parentId,e.meta.modified&&delete e.meta.modified.parentId})),t.remove(i,c)):(c&&n.suspendEvents(),n.splice(t.count-i.length,i,o),c&&n.resumeEvents()),u&&!c&&a.forEach((function(e){var n=e.record,r=e.toSet,o=e.wasSet;return t.onModelChange(n,r,o)})),t.acceptChanges();var s={added:o,removed:i,updated:a,thresholdSurpassed:c};c&&this.trigger("refresh",{action:"batch",data:e,records:n.values,syncInfo:s}),t.isFiltered&&t.filter(),t.isGrouped?t.group():t.isSorted&&t.sort(),t.trigger("loadSync",s)}},{key:"syncFlatDataset",value:function(e){if(e){var t=this,n=t.modelClass.idField,r=[],o=[],i=[],a={},u=t.syncDataOnLoad.threshold,c=0;return e.forEach((function(e){var r=e[n],s=t.getById(r);if(s){var l=s.set(e,null,Boolean(u));l&&i.push({record:s,wasSet:l,toSet:e}),c++}else o.push(t.createRecord(e));a[r]=1})),c<t.allCount&&t.forEach((function(e){a[e.id]||r.push(e)})),{toAdd:o,toRemove:r,updated:i}}}},{key:"syncTreeDataset",value:function(e){if(e){var t=this,n=t.modelClass,r=n.idField,o=n.parentIdField,i=[],a=[],u=[],c={},s=t.syncDataOnLoad.threshold;return Df.preWalkWithParent({isRoot:!0,children:e},(function(e){return e.children}),(function(e,n){if(e){var i=n[r],l=t.getById(i);if(l){var f=l.set(n,null,Boolean(s));f&&u.push({record:l,wasSet:f,toSet:n})}else n[o]=e[r],a.push(n);c[i]=1}})),t.traverse((function(e){c[e.id]||i.push(e)})),{toAdd:a,toRemove:i,updated:u}}}}])&&Tf(n.prototype,r),o&&Tf(n,o),t}(e||Y)})));function td(e){return(td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nd(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function od(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function id(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){od(i,r,o,a,u,"next",e)}function u(e){od(i,r,o,a,u,"throw",e)}a(void 0)}))}}function ad(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ud(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cd(e,t){return!t||"object"!==td(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sd(e,t,n){return(sd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ld(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ld(e){return(ld=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fd(e,t){return(fd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ed.storeMap={},ed._$name="Store";var dd=function(e,t){return Array.isArray(t[1])?t[1].forEach((function(n){return e.push(t[0]+"="+n)})):e.push(t[0]+"="+t[1]),e},pd=new Promise((function(e){return e()})),hd=function(e){function t(){return ad(this,t),cd(this,ld(t).apply(this,arguments))}var n,r,o,i,a,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fd(e,t)}(t,e),n=t,r=[{key:"afterConstruct",value:function(e){sd(ld(t.prototype),"afterConstruct",this).call(this,e),this.autoLoad&&this.load().catch((function(){}))}},{key:"buildQueryString",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Object.entries(Object.assign.apply(Object,[{}].concat(t))).reduce(dd,[]).join("&");return r?"?"+r:""}},{key:"performSort",value:function(e){var n=this;if(n.sortParamName){var r=n.groupRecords,o={};return n.isGrouped&&r&&r.length&&r.forEach((function(e){e.meta.collapsed&&(n.includeGroupRecords(e),o[e.id]=!0)})),n.internalLoad({},"",(function(t){n.data=t.data,n.afterPerformSort(e,o)}))}sd(ld(t.prototype),"performSort",this).call(this,e)}},{key:"performFilter",value:function(e){var n=this;if(n.filterParamName){var r=n.count,o=n.filters;return n.currentPage=1,n.internalLoad({},"",(function(t){n.data=t.data,n.afterPerformFilter(e?null:{action:"filter",filters:o,oldCount:r,records:n.storage.values})}))}sd(ld(t.prototype),"performFilter",this).call(this)}},{key:"encodeFilterParams",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value,c=u.property,s=u.operator,l=u.value,f=u.caseSensitive;t.push({field:c,operator:s,value:l,caseSensitive:f})}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return JSON.stringify(t)}},{key:"encodeSorterParams",value:function(e){return JSON.stringify(e.map((function(e){return e})))}},{key:"internalLoad",value:function(e,t,n){var r=this,o=Object.assign({},r.params,e),i={action:"read"+t,params:o};return r.readUrl?new Promise((function(e,a){if(!1===r.trigger("beforeLoad"+t,i))return a(!1);if(r._isLoading=!0,r.trigger("load".concat(t,"Start"),i),r.trigger("beforeRequest",i),r.filterParamName&&r.isFiltered&&(o[r.filterParamName]=r.encodeFilterParams(r.filters.values)),r.sortParamName&&r.isSorted&&(o[r.sortParamName]=r.encodeSorterParams(r.groupers?r.groupers.concat(r.sorters):r.sorters)),r.isPaged){if(!o[r.pageParamName]&&!o[r.pageStartParamName]){var u=Math.min(r.currentPage||1,r.allCount?r.lastPage:1/0);r.pageParamName?o[r.pageParamName]=u:o[r.pageStartParamName]=(u-1)*r.pageSize}o[r.pageSizeParamName]=r.pageSize}var c={headers:r.headers,parseJson:!0};r.useRestfulMethods&&(c.method=r.httpMethods.read),Ee.get(r.readUrl+r.buildQueryString(o),Object.assign(c,r.fetchOptions)).then((function(u){var c=u.parsedJson,s=Array.isArray(c),l=s||c&&!1!==c.success;if(r._isLoading=!1,i.response=u,i.json=c,l){if(r.responseTotalProperty in c&&(r.remoteTotal=parseInt(c[r.responseTotalProperty],10)),r.isPaged){if(!(r.remoteTotal>=0))throw new Error("A paged store must receive its responseTotalProperty in each data packet");var f=r.pageParamName?o[r.pageParamName]:o[r.pageStartParamName]/r.pageSize+1;r.currentPage=Math.min(f,r.lastPage)}i.data=s?c:c[r.responseDataProperty],n(i),r.trigger("load"+t,i),e(i)}else i.exception=!0,i.exceptionType="server",r.trigger("exception",i),a(i);r.trigger("afterRequest",i)})).catch((function(e){r._isLoading=!1,i.exception=!0,e instanceof Response?(i.exceptionType=e.ok?"server":"network",i.response=e,i.error=e.error):(i.exceptionType="server",i.error=e),r.trigger("exception",i),a(i),r.trigger("afterRequest",i)}))})):null}},{key:"load",value:function(e){var t=this;return t.isPaged?t.loadPage((t.currentPage||0)+1,e):t.internalLoad(e,"",(function(e){t.data=e.data}))}},{key:"loadChildren",value:(c=id(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.abrupt("return",n.internalLoad(rd({},n.parentIdParamName,t.id),"Children",(function(e){e.parentRecord=t,t.data[t.constructor.childrenField]=e.data,t.processChildren(t.stores)})));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"loadPage",value:(u=id(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.allCount&&(t=Math.min(t,this.lastPage)),(o=(r=this).pageParamName?rd({},r.pageParamName,t):rd({},r.pageStartParamName,(t-1)*r.pageSize))[r.pageSizeParamName]=r.pageSize,e.abrupt("return",r.internalLoad(Object.assign(o,n),"Page",(function(e){r.loadData(e.data,"pageLoad")})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"nextPage",value:(a=id(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.isPaged&&this.currentPage!==this.lastPage?this.loadPage(this.currentPage+1,t):pd);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"previousPage",value:(i=id(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.isPaged&&1!==this.currentPage?this.loadPage(this.currentPage-1,t):pd);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"commit",value:function(){var e=this,t=e.changes,n=[];if(e.commitPromise)return!1;if(!t)return pd;if([].concat(nd(t.added),nd(t.modified),nd(t.removed)).forEach((function(e){return e.meta.committing=!0})),!e.disabled&&!1!==e.trigger("beforeCommit",{changes:t})){var r={action:"commit",exception:!1,changes:t},o=e.commitRemoved(r);return o&&n.push(o),(o=e.commitAdded(r))&&n.push(o),(o=e.commitModified(r))&&n.push(o),n.length?(o=1===n.length?n[0]:Promise.all(n),e.commitPromise=new Promise((function(n,i){o.then((function(){e.commitPromise=null,r.exception?(e.trigger("exception",r),i(r)):(e.trigger("commit",{changes:t}),n(r))})).catch((function(){e.commitPromise=null,i(r)}))}))):(e.modified.forEach((function(e){return e.clearChanges(!1)})),e.modified.clear(),e.added.forEach((function(e){return e.clearChanges(!1)})),e.added.clear(),e.removed.clear(),e.trigger("commit",{changes:t}),pd)}}},{key:"commitAdded",value:function(e){var t=this,n=t.added,r={action:"create",params:t.params};return n.count&&t.createUrl?new Promise((function(o){var i=n.values.map((function(e){return e.persistableData}));e.create=r;var a=r.body={data:i};if(t.trigger("beforeRequest",r),t.sendAsFormData){var u=new FormData;u.append("data",JSON.stringify(i)),a=u}var c={headers:t.headers,parseJson:!0};t.useRestfulMethods&&(c.method=t.httpMethods.create),Ee.post(t.createUrl+t.buildQueryString(t.params),a,Object.assign(c,t.fetchOptions)).then((function(i){var a=i.parsedJson,u=Array.isArray(a),c=u||a&&!1!==a.success;r.json=a,r.response=i,c?(t.processReturnedData(n.values,u?a:a[t.responseDataProperty]),n.clear(),t.trigger("commitAdded"),t.trigger("refresh",r),o(e)):(n.forEach((function(e){return e.meta.committing=!1})),e.exception=r.exception=!0,e.exceptionType=r.exceptionType="server",t.trigger("exception",r),o(e)),t.trigger("afterRequest",r)})).catch((function(i){n.forEach((function(e){return e.meta.committing=!1})),e.exception=r.exception=!0,i instanceof Response?(r.exceptionType=i.ok?"server":"network",r.response=i,r.error=i.error):(r.exceptionType="server",r.error=i),t.trigger("exception",r),o(e),t.trigger("afterRequest",r)}))})):null}},{key:"commitModified",value:function(e){var t=this,n=t.modified,r={action:"update",params:t.params};return n.count&&t.updateUrl?new Promise((function(o){var i=n.map((function(e){return t.writeAllFields?e.persistableData:e.modificationData}));e.update=r;var a=r.body={data:i};if(t.trigger("beforeRequest",r),t.sendAsFormData){var u=new FormData;u.append("data",JSON.stringify(i)),a=u}var c={headers:t.headers,parseJson:!0};t.useRestfulMethods&&(c.method=t.httpMethods.update),Ee.post(t.updateUrl+t.buildQueryString(t.params),a,Object.assign(c,t.fetchOptions)).then((function(i){var a=i.parsedJson,u=Array.isArray(a),c=u||a&&!1!==a.success;r.json=a,r.response=i,c?(t.processReturnedData(t.modified.values,u?a:a[t.responseDataProperty],!0),n.clear(),t.trigger("commitModified"),t.trigger("refresh",r),o(e)):(n.forEach((function(e){return e.meta.committing=!1})),e.exception=r.exception=!0,r.exceptionType="server",t.trigger("exception",r),o(e)),t.trigger("afterRequest",r)})).catch((function(i){n.forEach((function(e){return e.meta.committing=!1})),e.exception=r.exception=!0,i instanceof Response?(r.exceptionType=i.ok?"server":"network",r.response=i,r.error=i.error):(r.exceptionType="server",r.error=i),t.trigger("exception",r),o(e),t.trigger("afterRequest",r)}))})):null}},{key:"processReturnedData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.modelClass,i=o.fieldMap.id.dataSource;t.forEach((function(t,r){var a=e[r];a.clearChanges(!1),a.syncId(t[i]),Object.assign(e[r].data,o.processData(t,n))}))}},{key:"commitRemoved",value:function(e){var t=this,n=t.removed,r={action:"delete",params:t.params};return n.count&&t.deleteUrl?new Promise((function(o){e.delete=r;var i=r.body={ids:n.map((function(e){return e.id}))};if(t.trigger("beforeRequest",r),t.sendAsFormData){var a=new FormData;a.append("id",JSON.stringify(i.ids)),i=a}var u={headers:t.headers,parseJson:!0};t.useRestfulMethods&&(u.method=t.httpMethods.delete),Ee.post(t.deleteUrl+t.buildQueryString(t.params),i,Object.assign(u,t.fetchOptions)).then((function(i){var a=i.parsedJson,u=Array.isArray(a)||a&&!1!==a.success;r.json=a,r.response=i,u?(n.forEach((function(e){return e.meta.committing=!1})),n.clear(),t.trigger("commitRemoved"),t.trigger("refresh",r),o(e)):(n.forEach((function(e){return e.meta.committing=!1})),e.exception=r.exception=!0,r.exceptionType="server",t.trigger("exception",r),o(e)),t.trigger("afterRequest",r)})).catch((function(i){n.forEach((function(e){return e.meta.committing=!1})),e.exception=r.exception=!0,i instanceof Response?(r.exceptionType=i.ok?"server":"network",r.response=i,r.error=i.error):(r.exceptionType="server",r.error=i),t.trigger("exception",r),o(e),t.trigger("afterRequest",r)}))})):null}},{key:"isLoading",get:function(){return this._isLoading}},{key:"isCommitting",get:function(){return Boolean(this.commitPromise)}},{key:"pageParamName",set:function(e){if(this.tree)throw new Error("Paging cannot be supported for tree stores");if(this.pageStartParamName)throw new Error("Configs pageStartParamName and pageParamName are mutually exclusive");this._pageParamName=e},get:function(){return this._pageParamName}},{key:"pageStartParamName",set:function(e){if(this.tree)throw new Error("Paging cannot be supported for tree stores");if(this.pageParamName)throw new Error("Configs pageParamName and pageStartParamName are mutually exclusive");this._pageStartParamName=e},get:function(){return this._pageStartParamName}},{key:"isPaged",get:function(){return this.pageParamName||this.pageStartParamName}},{key:"allCount",get:function(){return"remoteTotal"in this?this.remoteTotal:sd(ld(t.prototype),"allCount",this)}},{key:"lastPage",get:function(){if(this.isPaged)return Math.floor((this.allCount+this.pageSize-1)/this.pageSize)}}],o=[{key:"defaultConfig",get:function(){return{headers:null,fetchOptions:null,sendAsFormData:!1,writeAllFields:null,parentIdParamName:"id",responseDataProperty:"data",responseTotalProperty:"total",filterParamName:null,sortParamName:null,pageParamName:null,pageStartParamName:null,pageSizeParamName:"pageSize",pageSize:50,useRestfulMethods:!1,httpMethods:{create:"POST",read:"GET",update:"PUT",delete:"DELETE"}}}}],r&&ud(n.prototype,r),o&&ud(n,o),t}(ed);function yd(e){return(yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gd(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['<input type="','"\n            reference="input"\n            class="','"\n            name="','"\n            id="','"\n            ',"\n            ","/>"]);return gd=function(){return e},e}function vd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bd(e,t){return!t||"object"!==yd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wd(e,t,n){return(wd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Sd(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kd(e,t,n,r){return(kd="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Sd(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Sd(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Od(e)););return e}function Od(e){return(Od=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ed(e,t){return(Ed=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}hd._$name="AjaxStore";var Cd=function(e){function t(){return vd(this,t),bd(this,Od(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ed(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{attributes:["placeholder","autoComplete","minLength","maxLength","tabIndex"],localizableProperties:["label","title","placeholder"]}}},{key:"$name",get:function(){return"TextField"}}],(r=[{key:"inputTemplate",value:function(){var e=this,t="inputWidth"in e?'style="width:'.concat(xn.setLength(e.inputWidth),'"'):"";return Xa.tpl(gd(),e.inputType||"text",e.inputCls||"",e.name||e.id,e.id+"_input",t,e.attributeString)}},{key:"value",set:function(e){!function(e,t,n,r,o){if(!kd(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Od(t.prototype),"value","TextField"===this.$name&&null==e?"":e,this,!0)},get:function(){return wd(Od(t.prototype),"value",this)}},{key:"placeholder",set:function(e){this._placeholder=e,this.input&&(this.input.placeholder=e)},get:function(){return this._placeholder}}])&&md(n.prototype,r),o&&md(n,o),t}(Ic);function xd(e){return(xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dd(e,t){return!t||"object"!==xd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rd(e,t,n){return(Rd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pd(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Pd(e){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Td(e,t){return(Td=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Cd._$name="TextField",se.register("textfield",Cd),se.register("text",Cd);var Ad=function(e){function t(){return _d(this,t),Dd(this,Pd(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Td(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"PickerField"}},{key:"defaultConfig",get:function(){return{editable:!0,pickerAlignElement:"inputWrap",value:null,triggers:{expand:{cls:"bars"}},autoClose:!0,autoExpand:null,picker:null,inputType:"text",monitorResize:!0}}}],(r=[{key:"doDestroy",value:function(){this.globalTapListener&&this.globalTapListener(),this.picker=null,Rd(Pd(t.prototype),"doDestroy",this).call(this)}},{key:"finalizeInit",value:function(){Rd(Pd(t.prototype),"finalizeInit",this).call(this);var e=this,n=e.element;!1===e.editable?(n.classList.add("b-not-editable"),_r.on({element:e.input,click:"onTriggerClick",thisObj:e})):e.globalTapListener=di.on({globaltap:"showKeyboard",thisObj:e})}},{key:"createPicker",value:function(){throw new Error("createPicker must be implemented in PickerField subclass implementations")}},{key:"onEditComplete",value:function(){Rd(Pd(t.prototype),"onEditComplete",this).call(this),this.autoClosePicker()}},{key:"onElementResize",value:function(e){this.pickerVisible&&this.picker.requestAnimationFrame(this.picker.realign,null,this.picker),Rd(Pd(t.prototype),"onElementResize",this).call(this,e)}},{key:"internalOnKeyPress",value:function(e){var n=this,r=!0;if("keydown"===e.type&&!n.disabled)if(n.pickerVisible){var o=n.picker;"Escape"===e.key?(e.stopImmediatePropagation(),n.hidePicker(),r=!1):o.onInternalKeyDown?o.onInternalKeyDown(e):"ArrowDown"===e.key&&o.focusable&&o.focus()}else"ArrowDown"===e.key&&n.onTriggerClick(e);r&&Rd(Pd(t.prototype),"internalOnKeyPress",this).call(this,e)}},{key:"onFocusIn",value:function(e){Rd(Pd(t.prototype),"onFocusIn",this).call(this,e),this.autoExpand&&(this.minChars=0,this.onTriggerClick(e))}},{key:"onFocusOut",value:function(e){this.autoClosePicker(),Rd(Pd(t.prototype),"onFocusOut",this).call(this,e)}},{key:"onTriggerClick",value:function(e){this.disabled||this.togglePicker("key"in e)}},{key:"showKeyboard",value:function(e){var t=e.event,n=this.input;xn.isTouchEvent&&document.activeElement===n&&t.target===n&&(di.suspendFocusEvents(),n.blur(),n.focus(),di.resumeFocusEvents())}},{key:"togglePicker",value:function(e){this.pickerVisible?this.hidePicker():this.showPicker(e)}},{key:"showPicker",value:function(e){var t=this,n=t.picker;t.pickerHideShowListenersAdded||(n.on({show:"onPickerShow",hide:"onPickerHide",thisObj:t}),t.pickerHideShowListenersAdded=!0),n.autoClose=t.autoClose,n.show(),n.isVisible&&e&&t.focusPicker()}},{key:"onPickerShow",value:function(){var e=this;e.pickerVisible=!0,e.element.classList.add("b-open"),e.trigger("togglePicker",{show:!0}),e.pickerTapOutRemover=di.on({globaltap:"onPickerTapOut",thisObj:e}),e.pickerKeyDownRemover=_r.on({element:e.picker.element,keydown:"onPickerKeyDown",thisObj:e})}},{key:"onPickerHide",value:function(){var e=this;e.pickerVisible=!1,e.element.classList.remove("b-open"),e.trigger("togglePicker",{show:!1}),e.pickerTapOutRemover&&e.pickerTapOutRemover(),e.pickerKeyDownRemover&&e.pickerKeyDownRemover()}},{key:"onPickerTapOut",value:function(e){var t=e.event;this.owns(t.target)||this.autoClosePicker()}},{key:"onPickerKeyDown",value:function(e){if("Tab"===e.key){var t=document.activeElement,n=new KeyboardEvent("keydown",e);this.input.dispatchEvent(n),n.defaultPrevented&&e.preventDefault(),document.activeElement===t?this.input.focus():e.preventDefault(),this.isDestroyed||this.hidePicker()}}},{key:"autoClosePicker",value:function(){this.autoClose&&this.hidePicker()}},{key:"hidePicker",value:function(){this.pickerVisible&&this.picker.hide()}},{key:"focusPicker",value:function(){}},{key:"focus",value:function(){var e=this.input;xn.isTouchEvent&&this.editable&&(e.readOnly=!0,this.setTimeout((function(){return e.readOnly=!1}),500)),Rd(Pd(t.prototype),"focus",this).call(this)}},{key:"picker",get:function(){var e=this._picker;return e instanceof ni||(this.picker=e=this.createPicker(e||{})),e},set:function(e){var t=this._picker;t&&t.destroy&&(t.hide(),t.destroy()),this._picker=e}}])&&jd(n.prototype,r),o&&jd(n,o),t}(Cd);function Md(e){return(Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Id(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ld(e,t){return!t||"object"!==Md(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nd(e){return(Nd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hd(e,t){return(Hd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ad._$name="PickerField";var Bd=function(e){function t(){return Id(this,t),Ld(this,Nd(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hd(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{ownerCmp:null,target:null,keyEventTarget:null,processEvent:null,itemSelector:null,focusCls:"b-active",keys:null,allowCtrlKey:null,allowShiftKey:null,scrollDuration:50,testConfig:{scrollDuration:1}}}}],(r=[{key:"onKeyDown",value:function(e){var t=this,n=t.ownerCmp,r=t.activeItem,o=t.target.querySelector(t.itemSelector),i=(e.key||"").trim()||e.code,a="".concat(e.ctrlKey?"CTRL+":"").concat(e.shiftKey?"SHIFT+":"").concat(e.altKey?"ALT+":"").concat(i);if(o&&t.target.offsetParent){if(null==t.inlineFlow){var u=o.parentNode,c=xn.getStyleValue(o,"position"),s=xn.getStyleValue(o,"display"),l=xn.getStyleValue(o,"float");t.inlineFlow="absolute"===c||"inline"===s||"inline-block"===s||"left"===l||"right"===l||"flex"===xn.getStyleValue(u,"display")&&"row"===xn.getStyleValue(u,"flex-direction"),t.inlineFlow?(t.prevKey="ArrowLeft",t.nextKey="ArrowRight"):(t.prevKey="ArrowUp",t.nextKey="ArrowDown")}if(t.processEvent&&!(e=t.processEvent.call(n,e)))return;if(r)switch(i){case t.prevKey:if(t.disabled||e.ctrlKey&&!t.allowCtrlKey)return;if(e.shiftKey&&!t.allowShiftKey)return;e.preventDefault(),t.navigatePrevious(e);break;case t.nextKey:if(t.disabled||e.ctrlKey&&!t.allowCtrlKey)return;if(e.shiftKey&&!t.allowShiftKey)return;e.preventDefault(),t.navigateNext(e);break;default:var f=t.keys&&t.keys[a];f&&!t.disabled?t.callback(f,t.thisObj||n,[e]):n.onInternalKeyDown&&n.onInternalKeyDown(e)}else t.activeItem=t.previousActiveItem||t.getDefaultNavigationItem(e);t.activeItem!==r&&t.trigger("navigate",{event:e,item:t.activeItem})}}},{key:"getDefaultNavigationItem",value:function(e){var t=this.target,n=this.itemSelector,r=this.prevKey,o=this.nextKey;return 4&t.compareDocumentPosition(e.target)&&e.key===r?t.querySelector("".concat(n,":last-of-type")):2&t.compareDocumentPosition(e.target)&&e.key===o?t.querySelector("".concat(n)):void 0}},{key:"navigatePrevious",value:function(e){var t=this,n=t.previous;e.preventDefault(),n&&t.ownerCmp.scrollable.scrollIntoView(n,{animate:t.scrollDuration}).then((function(){t.activeItem=n,t.trigger("navigate",{event:e,item:t.activeItem})}))}},{key:"navigateNext",value:function(e){var t=this,n=t.next;e.preventDefault(),n&&t.ownerCmp.scrollable.scrollIntoView(n,{animate:t.scrollDuration}).then((function(){t.activeItem=n,t.trigger("navigate",{event:e,item:t.activeItem})}))}},{key:"onTargetFocusIn",value:function(e){e.target.matches(this.itemSelector)&&(this.skipScrollIntoView=!0,this.activeItem=e.target,this.skipScrollIntoView=!1)}},{key:"onTargetFocusOut",value:function(e){e.relatedTarget&&this.target.contains(e.relatedTarget)||(this.activeItem=null)}},{key:"onTargetMouseDown",value:function(e){if(!1===this.ownerCmp.itemsFocusable)this.onFocusGesture(e);else{var t=e.target.closest(this.itemSelector);t&&(e.preventDefault(),xn.focusWithoutScrolling(t))}}},{key:"onTargetClick",value:function(e){var t=this;t.disabled||(t.skipScrollIntoView=!0,t.processEvent&&(e=t.processEvent.call(t.ownerCmp,e)),e&&(t.activeItem=e.target.closest(t.itemSelector),t.trigger("navigate",{event:e,item:t.activeItem})),t.skipScrollIntoView=!1)}},{key:"onFocusGesture",value:function(e){(e.target===this.ownerCmp.contentElement||e.target.closest(this.itemSelector)&&!1===this.ownerCmp.itemsFocusable)&&e.preventDefault()}},{key:"acceptNode",value:function(e){return e.offsetParent&&e.matches&&e.matches(this.itemSelector)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}},{key:"onTargetChildListChange",value:function(){var e=this.activeItem;e&&!this.target.contains(e)&&(this.activeItem=this.target.querySelector("".concat(this.itemSelector,'[data-id="').concat(e.dataset.id,'"]')))}},{key:"itemSelector",set:function(e){this._itemSelector=e},get:function(){return this._itemSelector||".".concat(this.ownerCmp.itemCls)}},{key:"owner",get:function(){return this.ownerCmp}},{key:"previous",get:function(){var e=this.treeWalker;if(e.currentNode=this.activeItem,e.previousNode(),e.currentNode!==this.activeItem)return e.currentNode}},{key:"next",get:function(){var e=this.treeWalker;if(e.currentNode=this.activeItem,e.nextNode(),e.currentNode!==this.activeItem)return e.currentNode}},{key:"activeItem",get:function(){return this._activeItem},set:function(e){var t=this,n=t.ownerCmp,r=t.activeItem,o=r&&t.target.contains(r);if(o&&(t.previousActiveItem=r),null!=e){if(n.getItem&&(e=t.ownerCmp.getItem(e)),!e)return;if(t.skipScrollIntoView||n.scrollable.scrollIntoView(e,{block:"nearest",focus:xn.isFocusable(e)&&e!==document.activeElement,silent:t.scrollSilently}),e===r&&o)return;r&&t.activeItem.classList.remove(t.focusCls),e.classList.add(t.focusCls),t._activeItem=e}else r&&(r.classList.remove(t.focusCls),r===document.activeElement&&t.ownerCmp.revertFocus()),t._activeItem=null}},{key:"target",get:function(){return this._target},set:function(e){var t=this,n={element:e,thisObj:t,focusin:"onTargetFocusIn",focusout:"onTargetFocusOut",mousedown:"onTargetMouseDown",click:"onTargetClick"};t._target=e,t.hasOwnProperty("acceptNode")||(t.acceptNode=t.acceptNode.bind(t),t.acceptNode.acceptNode=t.acceptNode),_r.on(n),t.treeWalker=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,t.acceptNode,!1),t.keyEventTarget||(t.keyEventTarget=e),(t.targetMutationMonitor=new MutationObserver(t.onTargetChildListChange.bind(t))).observe(e,{childList:!0})}},{key:"keyEventTarget",get:function(){return this._keyEventTarget},set:function(e){this._keyEventTarget=e,_r.on({element:e,keydown:"onKeyDown",thisObj:this})}}])&&Fd(n.prototype,r),o&&Fd(n,o),t}(ae(Y));function zd(e){return(zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vd(){var e=Yd(["","",""]);return Vd=function(){return e},e}function Wd(){var e=Yd(['<div class="','" data-index="','" data-id="','" ',">\n            ","\n            </div>"]);return Wd=function(){return e},e}function $d(){var e=Yd(["",""]);return $d=function(){return e},e}function Yd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Gd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ud(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qd(e,t){return!t||"object"!==zd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xd(e,t,n,r){return(Xd="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Jd(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Kd(e,t,n,r,o){if(!Xd(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function Zd(e,t,n){return(Zd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Jd(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Jd(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qd(e)););return e}function Qd(e){return(Qd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ep(e,t){return(ep=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Bd._$name="Navigator";var tp=document.createRange(),np=function(e){function t(){return Gd(this,t),qd(this,Qd(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ep(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"List"}},{key:"defaultConfig",get:function(){return{itemCls:"b-list-item",selectedCls:"b-selected",items:null,store:null,navigator:!0,scrollable:{x:!1,y:!0},itemsFocusable:!0,multiSelect:!1,itemTpl:function(e){return e.text},selected:{},activateOnMouseover:null}}}],(r=[{key:"construct",value:function(e){var n,r=this;Array.isArray(e)&&(e={items:e});for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];(n=Zd(Qd(t.prototype),"construct",this)).call.apply(n,[this,e].concat(i));var u=r.element,c=u.classList;r.multiSelect&&c.add("b-multiselect"),r.store.count?r.refresh():c.add("b-empty"),_r.on({element:u,delegate:r.itemSelector,mouseover:"onMouseOver",click:"onClick",thisObj:r})}},{key:"doDestroy",value:function(){this.detachListeners("store"),Zd(Qd(t.prototype),"doDestroy",this).call(this)}},{key:"contentTpl",value:function(){var e=this;return Xa.tpl($d(),this.store.records.map((function(t,n){return e.itemWrapperTpl(t,n)})))}},{key:"itemWrapperTpl",value:function(e,t){return Xa.tpl(Wd(),this.getItemClasses(e,t),t,e.id,this.itemsFocusable?'tabindex="-1"':"",this.itemContentTpl(e,t))}},{key:"itemContentTpl",value:function(e,t){return Xa.tpl(Vd(),this.multiSelect?'<div class="b-selected-icon b-icon b-icon-check"></div>':"",this.itemTpl(e,t))}},{key:"getItemClasses",value:function(e){var t=this,n=t._navigator&&t._navigator.activeItem,r=n&&n.dataset.id==e.id,o=t.selected.includes(e);return"".concat(t.itemCls," ").concat(e.cls||""," ").concat(o?t.selectedCls:""," ").concat(r?t.navigator.focusCls:"")}},{key:"onBeforeStoreLoad",value:function(){this.mask(this.L("loading"))}},{key:"onAfterStoreRequest",value:function(){this.unmask()}},{key:"onStoreChange",value:function(e){e.source;var t=e.action,n=e.records,r=e.record;switch(t){case"remove":this.selected.remove(n);break;case"clear":this.selected.clear();break;case"update":return void this.refreshItem(r)}this.refresh()}},{key:"onStoreRefresh",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;if(e.isVisible){var t=e.navigator.activeItem;e.paintListener=null,e.clearItems().insertNode(xn.createElementFromTemplate(e.contentTpl(),{fragment:!0})),t&&e.restoreActiveItem(t),e.refreshCount=(e.refreshCount||0)+1,e.element.classList[e.store.count>0?"remove":"add"]("b-empty")}else e.paintListener||(e.paintListener=e.on({paint:"refresh",thisObj:e,once:!0}))}},{key:"clearItems",value:function(){var e=this,t=e.contentElement.querySelector(e.itemSelector),n=e.contentElement.lastChild;if(t){var r=e.contentElement.querySelectorAll("".concat(e.itemSelector,":not(.b-mask)"));tp.setStartBefore(t),tp.setEndAfter(r[r.length-1]),tp.deleteContents()}else n?(tp.setStartAfter(n),tp.setEndAfter(n)):(tp.setStart(e.contentElement,0),tp.setEnd(e.contentElement,0));return tp}},{key:"refreshItem",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var i=o[r],a=this.getItem(i);if(a){var u=this.store.indexOf(i),c=xn.createElementFromTemplate(this.itemWrapperTpl(i,u));xn.sync(c,a)}}}},{key:"getItem",value:function(e){if(null!=e)return"number"==typeof e?this.contentElement.querySelector('[data-index="'.concat(e,'"]')):(1===e.nodeType&&(e=e.dataset.id),null!=e.id&&(e=e.id),this.contentElement.querySelector('[data-id="'.concat(e,'"]')))}},{key:"getRecord",value:function(e){return e.target&&(e=e.target),e=e.closest(this.itemSelector),this.store.getAt(parseInt(e.dataset.index))}},{key:"alignTo",value:function(){var e;Kd(Qd(t.prototype),"minHeight",this.minAlignHeight,this,!0);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=Zd(Qd(t.prototype),"alignTo",this)).call.apply(e,[this].concat(r))}},{key:"hide",value:function(){var e;this.navigator.activeItem=null;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=Zd(Qd(t.prototype),"hide",this)).call.apply(e,[this].concat(r))}},{key:"show",value:function(){var e=this.refreshCount,n=this.navigator.previousActiveItem;Kd(Qd(t.prototype),"minHeight",this._minHeight,this,!0),Zd(Qd(t.prototype),"show",this).call(this),this.refreshCount===e&&this.restoreActiveItem(n,!0)}},{key:"restoreActiveItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.navigator.previousActiveItem,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",n=this,r=n.navigator,o=n.lastAlignSpec;if(null!=e){if("string"!=typeof t){var i=o?o.zone:1;t=1&i?"nearest":i?"start":"end"}(e=n.getItem(e))&&(n.scrollable.scrollIntoView(e,{block:t}),r.activeItem=e)}}},{key:"onMouseOver",value:function(e){var t=e.currentTarget;!xn.isTouchEvent&&t&&this.navigator&&this.activateOnMouseover&&this.setTimeout({fn:"handleMouseOver",delay:30,args:[t],cancelOutstanding:!0})}},{key:"handleMouseOver",value:function(e){this.navigator.activeItem=e}},{key:"onClick",value:function(e){var t=e.target.closest(this.itemSelector);t&&this.onItemClick(t,e)}},{key:"onInternalKeyDown",value:function(e){var t=this.navigator.activeItem;switch(e.key){case" ":if(!e.target.readOnly)break;case"Enter":t&&(this.onItemClick(t,e),e.stopImmediatePropagation(),e.preventDefault())}}},{key:"onItemClick",value:function(e,t){var n=this,r=parseInt(e.dataset.index),o=n.store.getAt(r),i=n.selected,a=i.includes(o);n.trigger("item",{item:e,record:o,index:r,event:t}),e.contains(t.target.closest("[data-noselect]"))||(n.multiSelect?i[a?"remove":"add"](o):i.splice(0,i.count,o)),n.lastClicked=o}},{key:"onSelectionChange",value:function(e){var t,n,r=e.action,o=e.removed,i=e.added,a=(e.replaced,this.selectedCls);if("clear"===r){var u=!0,c=!1,s=void 0;try{for(var l,f=this.element.querySelectorAll(".".concat(a))[Symbol.iterator]();!(u=(l=f.next()).done);u=!0)(n=l.value).classList.remove(a)}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}}else{var d=!0,p=!1,h=void 0;try{for(var y,g=o[Symbol.iterator]();!(d=(y=g.next()).done);d=!0)t=y.value,(n=this.getItem(t))&&n.classList.remove(a)}catch(e){p=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}var v=!0,m=!1,b=void 0;try{for(var w,k=i[Symbol.iterator]();!(v=(w=k.next()).done);v=!0)t=w.value,(n=this.getItem(t))&&n.classList.add(a)}catch(e){m=!0,b=e}finally{try{v||null==k.return||k.return()}finally{if(m)throw b}}}}},{key:"items",set:function(e){this.store&&this.store.autoCreated&&this.store.destroy(),this.store=ed.getStore(e)}},{key:"selected",set:function(e){e&&e instanceof Eo||(e=new Eo(e)),this._selected=e,e.on({change:"onSelectionChange",thisObj:this})},get:function(){return this._selected}},{key:"itemSelector",get:function(){return".".concat(this.itemCls)}},{key:"store",get:function(){return this._thisIsAUsedExpression(this.items),this._store},set:function(e){var t=this;if(e instanceof ed||(e=new ed(e)),t._store=e,t.detachListeners("store"),e){var n={name:"store",change:"onStoreChange",refresh:"onStoreRefresh",thisObj:t};e.readUrl&&(n.beforeLoad="onBeforeStoreLoad",n.afterRequest="onAfterStoreRequest"),t.store.on(n)}t.refresh()}},{key:"navigator",get:function(){return this._navigator},set:function(e){var t=this.element;this._navigator=t?new(e.class||Bd)(Object.assign({ownerCmp:this,target:t,keyEventTarget:t},e)):e}},{key:"minHeight",get:function(){return Zd(Qd(t.prototype),"minHeight",this)},set:function(e){Kd(Qd(t.prototype),"minHeight",this._minHeight=e,this,!0)}},{key:"minAlignHeight",get:function(){var e=this.element.lastElementChild,t=this.minHeight;if(null!=t)return this.store.count?Math.min(e.offsetTop+e.offsetHeight,t):0}}])&&Ud(n.prototype,r),o&&Ud(n,o),t}(ni);function rp(e){return(rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function op(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["","\n            ","\n            ",""]);return op=function(){return e},e}function ip(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ap(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function up(e,t){return!t||"object"!==rp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cp(e,t,n){return(cp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sp(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function sp(e){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lp(e,t){return(lp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}np.prototype.navigatorClass=Bd,np._$name="List",se.register("list",np);var fp=function(e){function t(){return ip(this,t),up(this,sp(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lp(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ChipView"}},{key:"defaultConfig",get:function(){return{itemCls:"b-chip",closable:!0,iconTpl:null,closeHandler:null}}}],(r=[{key:"itemContentTpl",value:function(e,t){return Xa.tpl(op(),this.iconTpl?this.iconTpl(e):"",this.itemTpl(e,t),this.closable?'<div class="b-icon b-close-icon b-icon-clear" data-noselect></div>':"")}},{key:"onInternalKeyDown",value:function(e){"Delete"===e.key||"Backspace"===e.key&&this.selected.count?this.callback(this.closeHandler,this.owner,[this.selected.values,{isKeyEvent:!0}]):cp(sp(t.prototype),"onInternalKeyDown",this).call(this,e)}},{key:"onClick",value:function(e){var n=this,r=e.target.closest(".".concat(n.itemCls));if(n.closable&&e.target.classList.contains("b-close-icon")){var o=n.store.getAt(parseInt(r.dataset.index));n.callback(n.closeHandler,n.owner,[[o]])}else cp(sp(t.prototype),"onClick",this).call(this,e)}}])&&ap(n.prototype,r),o&&ap(n,o),t}(np);function dp(e){return(dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function hp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gp(e,t,n){return t&&yp(e.prototype,t),n&&yp(e,n),e}function vp(e,t){return!t||"object"!==dp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mp(e,t,n,r){return(mp="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Sp(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else wp(r,t,n);return!0})(e,t,n,r)}function bp(e,t,n,r,o){if(!mp(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function wp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kp(e,t,n){return(kp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Sp(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Sp(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Op(e)););return e}function Op(e){return(Op=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ep(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cp(e,t)}function Cp(e,t){return(Cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}fp._$name="ChipView",se.register("chipview",fp);var xp=Symbol("Combo.queryAll"),_p=Symbol("Combo.queryLast"),jp=function(e){function t(){return hp(this,t),vp(this,Op(t).apply(this,arguments))}return Ep(t,e),gp(t,[{key:"afterConfigure",value:function(){kp(Op(t.prototype),"afterConfigure",this).call(this),"_value"in this||(this._value=this.valueField===this.displayField?"":null)}},{key:"encodeFilterParams",value:function(e){return e.map((function(e){return e.value}))}},{key:"eachWidget",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,r=[this.chipView,this._picker];n<r.length;n++){var o=r[n];if(o){if(!1===e(o))return;t&&o.eachWidget&&o.eachWidget(e,t)}}}},{key:"onChipViewMousedown",value:function(e){e.preventDefault(),this.containsFocus||this.focus()}},{key:"onChipClose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(t.isKeyEvent&&""===this.input.value||!t.isKeyEvent)&&this.valueCollection.remove(e)}},{key:"syncInputFieldValue",value:function(e){this.multiSelect||kp(Op(t.prototype),"syncInputFieldValue",this).call(this,e)}},{key:"onEditComplete",value:function(){var e=this,n=e.valueCollection.count;kp(Op(t.prototype),"onEditComplete",this).call(this),n&&(e.clearError("validateFilter"),e.syncInputFieldValue()),e.required&&!n&&e.setError("fieldRequired")}},{key:"onTriggerClick",value:function(){var e=this;if(e.pickerVisible)e.hidePicker();else if(!e.readOnly&&!e.disabled)switch(e.triggerAction){case xp:e.doFilter(null);break;case _p:e.doFilter(e.lastQuery);break;default:e.doFilter(e.input.value)}}},{key:"internalOnInput",value:function(e){var t=this,n=t.input.value,r=n.length;t.editable&&(t.updateEmpty(),t.syncInputWidth(),r>=t.minChars?t.filterList(n):(t.validateFilter&&!t.filterParamName&&t[r?"setError":"clearError"]("validateFilter"),t.hidePicker()),t.trigger("input",{value:n,event:e}))}},{key:"syncInputWidth",value:function(){var e=this;if(e.multiSelect){var t=e.input,n=e._inputPadding||(e._inputPadding=xn.getEdgeSize(t,"padding","lr")),r=t.value||"",o=xn.measureText(r+"W",t,!1,e.element)+n.width;t.style.flex="1 1 ".concat(Math.ceil(o),"px")}}},{key:"filterList",value:function(e){this.doFilter(e)}},{key:"doFilter",value:function(e){var t=this,n=t.store,r=t.filterParamName,o=null==e||""==e;t.lastQuery=e,t.primaryFilter.setConfig({value:e,disabled:o}),r&&n.clear(!0),n.filter(),t.showPicker(),n.count?o||(t.picker.navigator.activeItem=0):r||o||!t.validateFilter||t.setError("validateFilter")}},{key:"onRemoteFilter",value:function(){var e=this,t=e._picker;e.store.count?t&&(t.navigator.activeItem=0):e.validateFilter&&e.setError("validateFilter"),e.filterSelected&&e.valueCollection.count&&(e.store.storage.onFiltersChanged(),t&&t.refresh())}},{key:"onValueCollectionChange",value:function(e){var t=e.source,n=this,r=n.multiSelect,o="hidePickerOnSelect"in n?n.hidePickerOnSelect:!r,i=r?t.values.slice():t.first,a=t.values.slice(),u=n._isUserAction||o&&n.pickerVisible||!1,c=n._value;o&&n.hidePicker(),!t.count&&n.required?n.setError("fieldRequired"):(n.clearError("fieldRequired"),n.clearError("validateFilter")),n.validateFilter&&i&&n.clearError("validateFilter"),n.filterSelected&&(n.filterParamName?(n.store.storage.onFiltersChanged(),n._picker&&n._picker.refresh()):n.store.filter()),n._value=null;var s=n._value=n.value;n.syncInputFieldValue(),n.updateEmpty(),n.isConfiguring||(n.trigger("change",{value:s,oldValue:c,userAction:u,valid:n.isValid}),n.trigger("select",{record:i,records:a,userAction:n.containsFocus}),"select"===n.defaultAction&&n.trigger("action",{value:s,record:i,records:a}))}},{key:"onValueCollectionNoChange",value:function(e){var t=e.toAdd;!this.multiSelect&&t.length&&this.pickerVisible&&this.picker.hide()}},{key:"showPicker",value:function(){var e=this,n=e.picker;kp(Op(t.prototype),"showPicker",this).call(this),e.overlayAnchor&&!n.align.offset&&(n.align.offset=-n.anchorSize[1],n.realign()),!e.multiSelect&&e.selected&&n.restoreActiveItem(e.selected,!0),e.input.focus()}},{key:"createPicker",value:function(e){var t=this,n=t.multiSelect,r=t.pickerWidth||e.width,o=me.createWidget(Mt.merge({type:"list",owner:t,floating:!0,scrollAction:"realign",itemsFocusable:!1,activateOnMouseover:!0,store:t.store,selected:t.valueCollection,multiSelect:n,cls:t.listCls,itemTpl:t.listItemTpl||function(e){return e[t.displayField]},forElement:t[t.pickerAlignElement],align:{align:"t-b",axisLock:!0,matchSize:null==r,anchor:t.overlayAnchor,target:t[t.pickerAlignElement]},width:r,navigator:{keyEventTarget:t.input},maxHeight:324,scrollable:{overflowY:!0},autoShow:!1,focusOnHover:!1},e));return o.element.dataset.emptyText=t.emptyText||t.L("No results"),o}},{key:"onPickerHide",value:function(){kp(Op(t.prototype),"onPickerHide",this).call(this),this.multiSelect&&this.clearTextOnPickerHide&&(this.input.value="")}},{key:"element",set:function(e){var n=this;bp(Op(t.prototype),"element",e,this,!0),n.multiSelect&&(n.element.classList.add("b-multiselect"),n.chipView=new Dp(Mt.assign({parent:n,insertBefore:n.input,store:n.chipStore=new ed({storage:n.valueCollection}),navigator:{class:Rp,keyEventTarget:n.input}},n.chipView)),n.chipView.element.appendChild(n.input),_r.on({element:n.chipView.element,mousedown:"onChipViewMousedown",thisObj:n}))},get:function(){return kp(Op(t.prototype),"element",this)}},{key:"filterParamName",set:function(e){this._filterParamName=e,!1!==this.hideTrigger&&(this.hideTrigger=Boolean(e))},get:function(){return this._filterParamName}},{key:"hideTrigger",set:function(e){this._hideTrigger=e,this.element.classList[e?"add":"remove"]("b-hide-trigger")},get:function(){return this._hideTrigger}},{key:"keyStrokeFilterDelay",set:function(e){e&&(this.filterList=this.buffer(this.doFilter,e)),this._keyStrokeFilterDelay=e},get:function(){return this._keyStrokeFilterDelay}},{key:"minChars",set:function(e){this._minChars=e},get:function(){return"_minChars"in this?this._minChars:this.filterParamName?4:1}},{key:"items",set:function(e){var t=this;if(null==e){if(t.store&&!t.store.isItemStore)return;e=[]}if(e instanceof ed)return t.store=e;var n,r,o=t.displayField,i=t.valueField;if(Array.isArray(e)?r=e.map((function(e){var r,a,u=e;e instanceof qs?(n=e.constructor,i||(t.valueField=i=n.idField)):"string"==typeof e||"number"==typeof e?(i||(t.valueField=i=t.displayField),wp(r={},i,e),wp(r,o,e),u=r):(i||(t.valueField=i="value"),Array.isArray(e)&&(wp(a={},i,e[0]),wp(a,o,e[1]),u=a));return u.selected&&(t.value=u),u})):(i||(t.valueField=i="value"),r=[],Object.entries(e).forEach((function(e){var t,n=pp(e,2),a=n[0],u=n[1];r.push((wp(t={},i,a),wp(t,o,u),t))}))),t.store)t.store.data=r;else{var a=i===o?{name:"value",dataSource:o}:i;t.store=new ed({isItemStore:!0,data:r,idField:i,modelClass:n||function(e){function n(){return hp(this,n),vp(this,Op(n).apply(this,arguments))}return Ep(n,e),gp(n,null,[{key:"idField",get:function(){return t.valueField},set:function(e){bp(Op(n),"idField",e,this,!0)}},{key:"fields",get:function(){return[a,o]}}]),n}(qs)})}},get:function(){return this.store.allRecords}},{key:"value",set:function(e){var t=this;if(e!==t.value){if(!t.multiSelect&&Array.isArray(e)&&e.length>1)throw new Error("Multiple values cannot be set to a non-multiselect Combo");t._thisIsAUsedExpression(t.items);var n,r=t.valueField,o=t.displayField,i=t.store,a=t.valueCollection;if(t.filterParamName){if(null!=e){var u=t.isConfiguring;return t.primaryFilter.setConfig({value:e,disabled:!1}),i.performFilter(!0).then((function(){var e=t.isConfiguring;t.isConfiguring=u,a.splice(0,a.count,i.allRecords),t.isConfiguring=e}))}}else i.filtered&&(t.primaryFilter.disabled=!0,i.filter());if(null!=e){for(var c=Array.isArray(e)?e.slice():[e],s=0,l=c.length;s<l;s++){var f=c[s];if(f instanceof qs)i.storage.includes(f)||i.add(f);else{var d=f instanceof Object;d&&(f=f[r]),(n=i.storage.getBy(o,f)||i.storage.getBy(r,f))?(d&&n.set(c[s]),c[s]=n):(c.splice(s,1),l--,s--)}}var p=a.generation;a.splice(0,a.count,c),a.generation===p&&t.syncInputFieldValue(),c.length||(t._value=e)}else if(a.count)a.clear();else{var h=t._value;t._value=null,t.syncInputFieldValue(),t.updateEmpty(),t.isConfiguring||t.trigger("change",{value:e,oldValue:h,userAction:t._isUserAction,valid:t.isValid})}}else t.syncInputFieldValue(!0)},get:function(){var e=this;return e.multiSelect?e.valueCollection.map((function(t){return t[e.valueField]})):e.valueCollection.count?e.valueCollection.first[e.valueField]:e._value}},{key:"isEmpty",get:function(){return 0===this.valueCollection.count}},{key:"isValid",get:function(){var e=this;return e.isConfiguring||!e.required||e.valueCollection.count?e.clearError("fieldRequired",!0):e.setError("fieldRequired",!0),kp(Op(t.prototype),"isValid",this)}},{key:"inputValue",get:function(){var e=this,t=e.value;return t=e.selected?e.selected[e.displayField]:t,e.displayValueRenderer&&(t=e.displayValueRenderer(e.selected)),null==t?"":t}},{key:"displayValueRenderer",set:function(e){this._displayValueRenderer=e},get:function(){return this._displayValueRenderer}},{key:"valueCollection",get:function(){return this._valueCollection||(this._valueCollection=new Eo({listeners:{noChange:"onValueCollectionNoChange",change:"onValueCollectionChange",prio:-1e3,thisObj:this}})),this._valueCollection}},{key:"store",set:function(e){var t=this,n=t.filterParamName,r=[],o={thisObj:this};if(Array.isArray(e))return t.initialConfig.store=null,t.items=e;if(!e||e instanceof ed||(e=new(e.readUrl?hd:ed)(e)),n&&(e.filterParamName=n,t.encodeFilterParams&&(e.encodeFilterParams=t.encodeFilterParams),o.filter="onRemoteFilter"),t.valueField||(t.valueField=e.modelClass.idField),!t.primaryFilter){t.primaryFilter=new Zr({id:"primary",property:t.displayField,operator:t.filterOperator,disabled:!0,caseSensitive:t.caseSensitive})}r.push(t.primaryFilter),n?t.filterSelected&&(e.storage.autoFilter=!0,e.storage.addFilter({id:"".concat(t.id,"-selected-filter"),filterBy:function(e){return!t.valueCollection.includes(e)}})):t.filterSelected&&(t.selectedItemsFilter=function(e){return!t.valueCollection.includes(e)},r.push(t.selectedItemsFilter),e.reapplyFilterOnAdd=!0),e.filter(r),t._store=e,t._picker&&(t.picker.store=e),e.storage.addIndex(t.displayField),e.storage.addIndex(t.valueField),t.displayValueRenderer&&(o.change="syncInputFieldValue",t.syncInputFieldValue()),e.on(o)},get:function(){return this._store}},{key:"record",get:function(){return this.selected}},{key:"records",get:function(){return this.valueCollection.values.slice()}},{key:"selected",get:function(){return this.valueCollection.first}}],[{key:"$name",get:function(){return"Combo"}},{key:"defaultConfig",get:function(){return{items:null,store:null,valueField:null,displayField:"text",pickerWidth:null,minChars:null,selected:null,listItemTpl:null,displayValueRenderer:null,listCls:null,triggers:{expand:{cls:"b-icon-picker",handler:"onTriggerClick"}},filterParamName:null,encodeFilterParams:null,hideTrigger:null,overlayAnchor:null,keyStrokeFilterDelay:null,defaultAction:"select",triggerAction:xp,filterOperator:"startsWith",caseSensitive:!1,multiSelect:null,hidePickerOnSelect:null,chipView:null,filterSelected:null,emptyText:null,value:null,validateFilter:!0,clearTextOnPickerHide:!0}}}]),t}(Ad);jp.queryAll=xp,jp.queryLast=_p;var Dp=function(e){function t(){return hp(this,t),vp(this,Op(t).apply(this,arguments))}return Ep(t,e),gp(t,null,[{key:"$name",get:function(){return"MultiSelectChipView"}},{key:"defaultConfig",get:function(){return{itemsFocusable:!1,multiSelect:!0,closeHandler:"up.onChipClose",itemTpl:function(e){return e[this.owner.displayField]}}}}]),t}(fp),Rp=function(e){function t(){return hp(this,t),vp(this,Op(t).apply(this,arguments))}return Ep(t,e),gp(t,[{key:"onTargetClick",value:function(e){var n=e.target.closest(this.itemSelector);!n||e.shiftKey||n.contains(e.target.closest("[data-noselect]"))||this.ownerCmp.selected.clear(),bp(Op(t.prototype),"activeItem",n,this,!0)}},{key:"onKeyDown",value:function(e){"Enter"!==e.key&&kp(Op(t.prototype),"onKeyDown",this).call(this,e)}},{key:"navigatePrevious",value:function(e){var n=this.ownerCmp;n.navigator.activeItem&&!e.shiftKey&&n.selected.clear(),this.previous?kp(Op(t.prototype),"navigatePrevious",this).call(this,e):this.activeItem=null}},{key:"navigateNext",value:function(e){var n=this.ownerCmp;n.navigator.activeItem&&!e.shiftKey&&n.selected.clear(),this.next?kp(Op(t.prototype),"navigateNext",this).call(this,e):this.activeItem=null}},{key:"activeItem",set:function(e){var n=this.ownerCmp;e=n.getItem(e),bp(Op(t.prototype),"activeItem",e,this,!0),e&&n.selected.add(n.getRecord(e))},get:function(){return kp(Op(t.prototype),"activeItem",this)}}],[{key:"defaultConfig",get:function(){return{allowShiftKey:!0}}}]),t}(Bd);function Pp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}jp._$name="Combo",se.register("combo",jp),se.register("combobox",jp),se.register("dropdown",jp);var Tp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.date,r=t.weekStartDay,o=t.sixWeeks;this.constructor.updateDayNumbers(r),this.sixWeeks=o,this.date=n}var t,n,r;return t=e,r=[{key:"applyLocale",value:function(){this.updateDayNumbers()}},{key:"updateDayNumbers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt.weekStartDay,t=this.prototype,n=t.dayNumbers=[],r=t.canonicalDayNumbers=[];t.weekStartDay=e;for(var o=0;o<7;o++){var i=(e+o)%7;r[o]=i,n[i]=o}}}],(n=[{key:"eachDay",value:function(e){for(var t=this.startDayOfMonth;t<=this.endDayOfMonth;t++)e(new Date(this.year,this.month,t))}},{key:"eachWeek",value:function(e){for(var t=this,n=t.weekCount,r=t.startDayOfMonth,o=0;o<n;o++){for(var i=[],a=t.getWeekNumber(new Date(t.year,t.month,Math.max(r,1))),u=0;u<7;u++,r++)i.push(new Date(t.year,t.month,r));e(a,i)}}},{key:"getWeekNumber",value:function(t){var n=this,r=n.weekStartDay;if((t=xt.clearTime(t))<n.startDate||t>n.endDate)return new e({date:t,weekStartDay:r}).getWeekNumber(t);var o=Math.floor((t-n.weekBase)/864e5/7),i=t.getFullYear();if(!o){var a=new Date(n.year,0,0);return new e({date:a,weekStartDay:r}).getWeekNumber(a)}return 53!==o||n.has53weeks||(o=1,i++),[i,o]}},{key:"date",set:function(t){var n="string"==typeof t;if(t=new Date(t),n){if(isNaN(t))throw new Error("CalendarPanel date ingestion must be passed a Date, or a valid argument to the Date constructor");t=xt.add(t,t.getTimezoneOffset(),"minute")}var r=this,o=xt.getFirstDateOfMonth(t),i=xt.getLastDateOfMonth(o),a=r.dayNumbers[o.getDay()],u=r.dayNumbers[i.getDay()];if(r._date=t,r.startDayOfMonth=1-a,r.endDayOfMonth=i.getDate()+(6-u),r.sixWeeks)for(;r.weekCount<6;)r.endDayOfMonth+=7;var c=new Date(r.year,0,1),s=new Date(r.year,1,31),l=r.month?new e({date:c,weekStartDay:r.weekStartDay}):r;r.dayNumbers[c.getDay()]>3?r.weekBase=l.startDate:r.weekBase=new Date(r.year,0,l.startDayOfMonth-7),r.has53weeks=s.getDay()<4},get:function(){return this._date}},{key:"year",set:function(e){this.date.setFullYear(e),this.date=this.date},get:function(){return this.date.getFullYear()}},{key:"month",set:function(e){this.date.setMonth(e),this.date=this.date},get:function(){return this.date.getMonth()}},{key:"dayCount",get:function(){return this.endDayOfMonth+1-this.startDayOfMonth}},{key:"weekCount",get:function(){return this.dayCount/7}},{key:"startDate",get:function(){return new Date(this.year,this.month,this.startDayOfMonth)}},{key:"endDate",get:function(){return new Date(this.year,this.month,this.endDayOfMonth)}}])&&Pp(t.prototype,n),r&&Pp(t,r),e}();function Ap(e){return(Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ip(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fp(e,t){return!t||"object"!==Ap(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lp(e,t,n,r){return(Lp="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Hp(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Np(e,t,n){return(Np="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Hp(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Hp(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bp(e)););return e}function Bp(e){return(Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zp(e,t){return(zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Te.on({locale:"applyLocale",thisObj:Tp}),Tp._$name="Month";var Vp=function(e){function t(){return Mp(this,t),Fp(this,Bp(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zp(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"CalendarPanel"}},{key:"defaultConfig",get:function(){return{weekStartDay:null,sixWeeks:!0,showWeekNumber:!1,disabledDates:null,headerRenderer:null,weekRenderer:null,cellRenderer:null,disableWeekends:null,tip:null,cellCls:"b-calendar-cell",disabledCls:"b-disabled-date",otherMonthCls:"b-other-month",weekendCls:"b-weekend",todayCls:"b-today"}}}],(r=[{key:"construct",value:function(e){Te.on({locale:Wp}),Wp(),Np(Bp(t.prototype),"construct",this).call(this,e),this.refresh()}},{key:"doDestroy",value:function(){this.tip&&this.tip.destroy(),Np(Bp(t.prototype),"doDestroy",this).call(this)}},{key:"ingestDate",value:function(e){if(!(e instanceof Date)){if(e=new Date(e),isNaN(e))throw new Error("CalendarPanel date ingestion must be passed a Date, or a valid argument to the Date constructor");var t=e.getTimezoneOffset();t&&(e=xt.add(e,t,"minute"))}return xt.clearTime(e)}},{key:"refresh",value:function(){var e=this,t=xt.clearTime(new Date),n=e.cellElements,r=e.weekElements,o=e.date,i=e.month,a=e.cellCls,u=e.disabledCls,c=e.otherMonthCls,s=e.weekendCls,l=e.todayCls;if(!o)return e.date=t;for(var f=0,d=n.length;f<d;f++)n[f].className=n[f].innerHTML="";for(var p=0;p<7;p++){var h=e.weekdayCells[p];h.className=h.innerHTML="",e.headerRenderer?e.headerRenderer(h,p):h.innerHTML=Yp[e.canonicalDayNumbers[p]],h.classList.add("b-calendar-day-header")}var y=0,g=0;i.eachWeek((function(n,o){var f=r[y].children;f[0].className="b-week-number-cell",e.weekRenderer?e.weekRenderer(f[0],n):f[0].innerHTML=n[1];for(var d=0;d<7;d++){var p=o[d],h=p.getDay(),v=f[d+1],m=v.classList;m.add(a),e.isDisabledDate(p)&&m.add(u),p.getMonth()!==i.month&&m.add(c),0!==h&&6!==h||m.add(s),p.getTime()===t.getTime()&&m.add(l),v.dataset.date=xt.format(p,"YYYY-MM-DD"),v.dataset.cellIndex=g,e.cellRenderer?e.cellRenderer(v,p):v.innerHTML=p.getDate(),g++}y++})),e.floating&&(e.isAligning||e.realign())}},{key:"isDisabledDate",value:function(e){var t=e.getDay(),n=this.disabledDates;if(this.disableWeekends&&(0===t||6===t))return!0;if(n){if("function"==typeof n)return n(e);if(Array.isArray(n))return n.some((function(t){return xt.clearDate(t,!0).getTime()===xt.clearDate(e,!0).getTime()}))}}},{key:"onTipOverCell",value:function(e){var t=e.source,n=e.target;t.date=xt.parse(n.dataset.date,"YYYY-MM-DD")}},{key:"tip",set:function(e){this._tip=new Fu(Object.assign({forElement:this.element,forSelector:".b-calendar-cell"},e)),this._tip.on({pointerOver:"onTipOverCell",thisObj:this})},get:function(){return this._tip}},{key:"element",get:function(){return Np(Bp(t.prototype),"element",this)},set:function(e){!function(e,t,n,r,o){if(!Lp(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Bp(t.prototype),"element",e,this,!0),this.weekElements=Array.from(this.element.querySelectorAll(".b-calendar-week")),this.cellElements=Array.from(this.element.querySelectorAll(".b-calendar-week > div"))}},{key:"date",set:function(e){var t=this;e=t._date=t.ingestDate(e),t.month&&t.month.month===e.getMonth()||(t.month=new Tp({date:e,weekStartDay:t.weekStartDay,sixWeeks:t.sixWeeks})),t.refresh()},get:function(){return this._date}},{key:"month",set:function(e){e instanceof Tp?this._month=e:(this.month.month=e,this.refresh())},get:function(){return this._month}},{key:"year",set:function(e){this.month.year=e,this.refresh()},get:function(){return this.month.year}},{key:"showWeekNumber",set:function(e){this.element.classList[e?"add":"remove"]("b-show-week-number"),this.floating&&(this.isAligning||this.realign())}},{key:"bodyConfig",get:function(){var e=Np(Bp(t.prototype),"bodyConfig",this),n=[];e.children=[{tag:"div",className:"b-calendar-row b-calendar-weekdays",children:this.dayNameCells},{className:"b-weeks-container notranslate",reference:"weeksElement",children:n}];for(var r=0;r<6;r++){for(var o={className:"b-calendar-row b-calendar-week",children:[]},i=0;i<8;i++)o.children.push({});n.push(o)}return e}},{key:"weekStartDay",set:function(e){var t=this;t.dayNames=[],t.dayNumbers=[],t.canonicalDayNumbers=[],t._weekStartDay=null!=e?e:xt.weekStartDay;for(var n=0;n<7;n++){var r=(t._weekStartDay+n)%7;t.canonicalDayNumbers[n]=r,t.dayNumbers[r]=n,t.dayNames[n]=Yp[r]}},get:function(){return this.hasOwnProperty("_weekStartDay")||(this.weekStartDay=void 0),this._weekStartDay}},{key:"dayNameCells",get:function(){var e=document.createElement("div"),t=[e],n=this.weekdayCells=[];e.className="b-week-number-cell",this._thisIsAUsedExpression(this.weekStartDay);for(var r=0;r<7;r++){var o=document.createElement("div");t.push(o),n.push(o)}return t}}])&&Ip(n.prototype,r),o&&Ip(n,o),t}(Ia);function Wp(){Yp.length=0;for(var e=2;e<9;e++)$p.setDate(e),Yp.push(xt.format($p,"ddd"))}var $p=new Date("2000-01-01T00:00:00"),Yp=[];function Gp(e){return(Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Up(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xp(e,t){return!t||"object"!==Gp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kp(e){return(Kp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zp(e,t){return(Zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Vp._$name="CalendarPanel",se.register("calendarpanel",Vp);var Jp=function(e){function t(){return Up(this,t),Xp(this,Kp(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zp(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Fit"}},{key:"defaultConfig",get:function(){return{containerCls:"b-fit-container",itemCls:"b-fit-item"}}}],(r=null)&&qp(n.prototype,r),o&&qp(n,o),t}(zi);function Qp(e){return(Qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eh(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function th(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rh(e,t){return!t||"object"!==Qp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oh(e,t,n){return(oh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ih(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ih(e){return(ih=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ah(e,t){return(ah=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Jp._$name="Fit",zi.registerLayout(Jp);var uh=function(e){function t(){return th(this,t),rh(this,ih(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ah(e,t)}(t,e),n=t,r=[{key:"afterConfigure",value:function(){var e=this;oh(ih(t.prototype),"afterConfigure",this).call(this),(e.completeKey||e.cancelKey)&&_r.on({element:e.element,keydown:"onKeyDown",thisObj:e}),Te.on({locale:"onLocaleChange",thisObj:e})}},{key:"onLocaleChange",value:function(){var e=this.inputField;e&&!e.isDestroyed&&e.syncInputFieldValue&&e.syncInputFieldValue(!0)}},{key:"startEdit",value:function(e){var t=e.target,n=e.align,r=void 0===n?"t0-t0":n,o=e.hideTarget,i=void 0!==o&&o,a=e.matchSize,u=void 0===a||a,c=e.matchFont,s=void 0===c||c,l=e.fitTargetContent,f=void 0!==l&&l,d=e.value,p=e.record,h=e.field,y=void 0===h?this.inputField.name:h,g=e.focus,v=void 0===g||g,m=this,b=m.inputField,w=t instanceof tr?t:tr.inner(t),k=xn.getStyleValue(t,"font-size"),S=xn.getStyleValue(t,"font-family");if(!1!==m.trigger("beforestart",{value:d})){if(p&&y&&void 0===d&&(m.record=p,m.dataField=y,d=p[y]),u&&(m.width=w.width,m.height=w.height),b.input&&(s?(b.input.style.fontSize=k,b.input.style.fontFamily=S):b.input.style.fontSize=b.input.style.fontFamily=""),b.clearError&&b.clearError(),b.value=d,b.initialValue=b.value,m.showBy({target:t,align:r}),f){var O=b.input.scrollWidth-b.input.clientWidth;O>0&&(m.width+=O+xn.scrollBarWidth)}return v&&m.inputField.focus&&m.inputField.focus(),1===t.nodeType&&(t.classList.add("b-editing"),i&&t.classList.add("b-hide-visibility")),m.trigger("start",{value:b.value}),m.oldValue=b.value,Array.isArray(m.oldValue)&&(m.oldValue=m.oldValue.slice()),!0}return!1}},{key:"refreshEdit",value:function(){if(this.isVisible){var e=this.record,t=this.dataField,n=this.inputField;if(e&&t){var r=e[t];Mt.isEqual(n.value,r)||(n.value=r)}}}},{key:"onKeyDown",value:function(e){var t=this;switch(e.key){case t.completeKey:t.completeEdit(),e.stopImmediatePropagation();break;case t.cancelKey:t.cancelEdit(),e.stopImmediatePropagation()}t.trigger("keydown",{event:e})}},{key:"onFocusOut",value:function(e){if(oh(ih(t.prototype),"onFocusOut",this).call(this,e),!this.isFinishing){var n=this["".concat(this.blurAction,"Edit")];n&&n.call(this)}}},{key:"completeEdit",value:(i=regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=this).inputField,o=n.oldValue,i=n.record,a=r.invalidAction||(!1===r.allowInvalid?"block":n.invalidAction),u=r.value,r.isValid){e.next=12;break}if("block"!==a){e.next=7;break}return r.focus&&r.focus(),e.abrupt("return",!1);case 7:if("revert"!==a){e.next=10;break}return n.cancelEdit(),e.abrupt("return",!0);case 10:e.next=33;break;case 12:if(!Mt.isEqual(u,o)){e.next=17;break}return n.cancelEdit(),e.abrupt("return",!0);case 17:if(c={inputField:r,record:i,value:u,oldValue:o},!1!==n.trigger("beforeComplete",c)){e.next=22;break}r.focus&&r.focus(),e.next=33;break;case 22:if(t||(t=c.finalize||c.editorContext&&c.editorContext.finalize),!t){e.next=31;break}return e.next=26,t(c);case 26:return!0===(s=e.sent)?n.onEditComplete():(r.setError&&(l=s||r.L("invalidValue"),f=function(){d(),r.clearError(l)},d=r.on({change:f,input:f}),r.setError(l)),"block"===a?r.focus&&r.focus():"revert"===a&&(r.value=o,s=!0),s=!1),e.abrupt("return",s);case 31:return n.onEditComplete(),e.abrupt("return",!0);case 33:return e.abrupt("return",!1);case 34:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){eh(o,n,r,a,u,"next",e)}function u(e){eh(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"cancelEdit",value:function(){var e=this,t=e.inputField,n=e.oldValue,r=e.lastAlignSpec.target,o=t.value;e.isFinishing||!1===e.trigger("beforeCancel",{value:o,oldValue:n})||(e.isFinishing=!0,e.hide(),e.trigger("cancel",{value:o,oldValue:n}),1===r.nodeType&&(r.classList.remove("b-editing"),r.classList.remove("b-hide-visibility")),e.isFinishing=!1)}},{key:"onEditComplete",value:function(){var e=this,t=e.record,n=e.dataField,r=e.inputField,o=e.oldValue,i=e.lastAlignSpec.target,a=r.value;if(!e.isFinishing){if(e.isFinishing=!0,e.hide(),t){var u="set".concat(A.capitalizeFirstLetter(n));t[u]?t[u](a):t[n]=a}e.trigger("complete",{value:a,oldValue:o}),1===i.nodeType&&(i.classList.remove("b-editing"),i.classList.remove("b-hide-visibility")),e.isFinishing=!1}}},{key:"doDestroy",value:function(){this.createdInputField&&this.inputField.destroy(),oh(ih(t.prototype),"doDestroy",this).call(this)}},{key:"onInputFieldChange",value:function(){this.containsFocus&&this.completeEdit()}},{key:"allowInvalid",set:function(e){this._allowInvalid=e,this.invalidAction=e?"allow":"block"},get:function(){return this._allowInvalid}},{key:"owner",set:function(e){this._owner=e},get:function(){return this._owner||ye.fromElement(this.element.parentNode)}},{key:"inputField",set:function(e){var t=this;t._inputField&&t._inputField.destroy(),"string"==typeof e&&(e={type:e}),e instanceof ni?t._inputField=e:(t._inputField=me.createWidget(e),t.createdInputField=!0),t.completeOnChange&&t._inputField.on({change:"onInputFieldChange",thisObj:t}),t._inputField.parent=t,t.removeAll(),t.add(e)},get:function(){return this.items[0]}}],o=[{key:"$name",get:function(){return"Editor"}},{key:"defaultConfig",get:function(){return{positioned:!0,hidden:!0,layout:"fit",inputField:"textfield",blurAction:"complete",completeKey:"Enter",cancelKey:"Escape",allowInvalid:null,invalidAction:"block",completeOnChange:null}}}],r&&nh(n.prototype,r),o&&nh(n,o),t}(pa);function ch(e){return(ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fh(e,t){return!t||"object"!==ch(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dh(e,t,n){return(dh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ph(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ph(e){return(ph=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hh(e,t){return(hh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}uh._$name="Editor",se.register("editor",uh);var yh=function(e){function t(){return sh(this,t),fh(this,ph(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hh(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"DatePicker"}},{key:"defaultConfig",get:function(){return{focusable:!0,tools:{prevMonth:{align:"start",cls:"b-icon b-icon-angle-left",handler:"gotoPrevMonth"},nextMonth:{align:"end",cls:"b-icon b-icon-angle-right",handler:"gotoNextMonth"}},header:{title:'<div class="b-editable b-datepicker-month" reference="monthElement"></div> <div class="b-editable b-datepicker-year" reference="yearElement"></div>',titleAlign:"center"},minDate:null,maxDate:null,outOfRangeCls:"b-out-of-range",activeCls:"b-active-date",selectedCls:"b-selected-date",focusDisabledDates:null,multiSelect:!1,editOnHover:!0}}}],(r=[{key:"construct",value:function(e){var n=this;Te.on({locale:"onLocaleChange",thisObj:n}),n.selection=[],n.refresh=n.createOnFrame(n.refresh),dh(ph(t.prototype),"construct",this).call(this,e),n.element.setAttribute("aria-activedescendant","".concat(n.id,"-active-day")),_r.on({element:n.element,mouseover:"onPickerMouseover",mousedown:"onPickerMousedown",click:"onPickerClick",keydown:"onPickerKeyDown",thisObj:n})}},{key:"doDestroy",value:function(){this._yearEditor&&this._yearEditor.destroy(),this._monthEditor&&this._monthEditor.destroy(),dh(ph(t.prototype),"doDestroy",this).call(this)}},{key:"eachWidget",value:function(e,t){var n=this.items||[];this._yearEditor&&n.unshift(this._yearEditor),this._monthEditor&&n.unshift(this._monthEditor);for(var r=0;r<n.length;r++){var o=n[r];if(!1===e(o))return;t&&o.eachWidget&&o.eachWidget(e,t)}}},{key:"refresh",value:function(){var e=this,n=xn.scrollBarWidth;dh(ph(t.prototype),"refresh",this).call(this),e.monthElement.style.minWidth="calc(".concat(e.maxMonthLength+1,"ch + ").concat(n,"px)"),e.monthElement.innerHTML=xt.format(e.month.date,"MMMM"),e.yearElement.style.minWidth=n?"calc(3ch + ".concat(n,"px"):"7ch",e.yearElement.innerHTML=xt.format(e.month.date,"YYYY")}},{key:"cellRenderer",value:function(e,t){var n=this,r=n.activeCls,o=n.selectedCls,i=e.classList;e.innerHTML=t.getDate(),e.setAttribute("aria-label",xt.format(t,"MMMM D, YYYY")),n.isActiveDate(t)&&(i.add(r),e.id="".concat(n.id,"-active-day")),n.isSelectedDate(t)&&i.add(o),(n.minDate&&t<n.minDate||n.maxDate&&t>n.maxDate)&&i.add(n.outOfRangeCls)}},{key:"onPickerMousedown",value:function(e){e.preventDefault()}},{key:"onPickerMouseover",value:function(e){if(this.editOnHover&&xn.up(e.target,".b-editable"))return this.onEditGesture(e)}},{key:"onPickerClick",value:function(e){var t=this,n=e.target,r=xn.up(n,".".concat(t.cellCls,":not(.").concat(t.disabledCls,"):not(.").concat(t.outOfRangeCls,")")),o=xn.up(n,".b-editable");return r?t.onCellClick(e):t.editOnHover&&!xn.isTouchEvent||!o?(t._monthEditor&&!t._monthEditor.owns(e)&&t._monthEditor.cancelEdit(),void(t._yearEditor&&!t._yearEditor.owns(e)&&t._yearEditor.cancelEdit())):t.onEditGesture(e)}},{key:"onCellClick",value:function(e){this.onDateActivate(xt.parse(e.target.dataset.date,"YYYY-MM-DD"),e)}},{key:"onEditGesture",value:function(e){var t=this,n=t.month,r=e.target;r===t.monthElement?t.monthEditor.startEdit({target:r,value:n.month,fitTargetContent:!1,hideTarget:!0}):r===t.yearElement&&(t.yearEditor.minWidth="calc(50px + ".concat(xn.scrollBarWidth,"px)"),t.yearEditor.startEdit({target:r,value:n.year,fitTargetContent:!0,hideTarget:!0}))}},{key:"onDateActivate",value:function(e,t){var n=this,r=n.lastClickedDate,o=n.selection;n.activeDate=e,n.lastClickedDate=e,n.multiSelect?n.multiRange||r&&e.getTime()===r.getTime()||(r&&t.shiftKey?(o[1]=e,o.sort()):(o.length=0,o[0]=e),n.trigger("selectionChange",{selection:o})):n.value&&n.value.getTime()===e.getTime()?n.hide():n.value=e}},{key:"onPickerKeyDown",value:function(e){var t=this,n=e.key.trim()||e.code,r=t.activeDate,o=new Date(r);if(r){do{switch(n){case"Escape":t.hide();break;case"ArrowLeft":e.preventDefault(),e.ctrlKey?o.setMonth(o.getMonth()-1):o.setDate(o.getDate()-1);break;case"ArrowUp":e.preventDefault(),o.setDate(o.getDate()-7);break;case"ArrowRight":e.preventDefault(),e.ctrlKey?o.setMonth(o.getMonth()+1):o.setDate(o.getDate()+1);break;case"ArrowDown":e.preventDefault(),o.setDate(o.getDate()+7);break;case"Enter":t.onDateActivate(r,e)}}while(t.isDisabledDate(o)&&!t.focusDisabledDates);if(t.minDate&&o<t.minDate)return;if(t.maxDate&&o>t.maxDate)return;t.activeDate=o}}},{key:"gotoPrevMonth",value:function(){var e=this.date;e.setMonth(e.getMonth()-1),this.date=e}},{key:"gotoNextMonth",value:function(){var e=this.date;e.setMonth(e.getMonth()+1),this.date=e}},{key:"isActiveDate",value:function(e){return this.activeDate&&this.ingestDate(e).getTime()===this.activeDate.getTime()}},{key:"isSelectedDate",value:function(e){return this.selection.some((function(t){return t.getTime()===e.getTime()}))}},{key:"onMonthPicked",value:function(e){var t=e.value;this.month=t}},{key:"onYearPicked",value:function(e){var t=e.value;this.year=t}},{key:"onLocaleChange",value:function(){this._monthEditor&&(this._monthEditor.doDestroy(),this._monthEditor=null),this._yearEditor&&(this._yearEditor.doDestroy(),this._yearEditor=null),this._maxMonthLength=0}},{key:"focusElement",get:function(){return this.element}},{key:"minDate",set:function(e){this._minDate=e?this.ingestDate(e):null,this.refresh()},get:function(){return this._minDate}},{key:"maxDate",set:function(e){this._maxDate=e?this.ingestDate(e):null,this.refresh()},get:function(){return this._maxDate}},{key:"activeDate",set:function(e){var t=this;t._activeDate=e?t.ingestDate(e):xt.clearTime(new Date),t.month.month!==t._activeDate.getMonth()&&(t.month.date=t._activeDate),t.refresh()},get:function(){return this._activeDate}},{key:"value",set:function(e){var t,n=this,r=n.selection;e?(e=n.ingestDate(e),n.value&&e.getTime()===n.value.getTime()||(r.length=0,r[0]=e,t=!0),n.date=e):(t=r.length,r.length=0,n.date=new Date),t&&n.trigger("selectionChange",{selection:r})},get:function(){return this.selection[this.selection.length-1]}},{key:"monthEditor",get:function(){var e=this;return e._monthEditor||(e._monthEditor=new uh({owner:e,appendTo:e.element,inputField:e.monthInput=new jp({editable:!1,autoExpand:!e.editOnHover,items:e.monthItems,highlightExternalChange:!1,picker:{align:{align:"t0-b0"},cls:"b-month-picker-list",scrollable:{overflowX:!1}}}),completeOnChange:!0,listeners:{complete:"onMonthPicked",thisObj:e}})),e._monthEditor}},{key:"yearEditor",get:function(){var e=this;return e._yearEditor||(e._yearEditor=new uh({owner:e,appendTo:e.element,inputField:e.yearInput=new jp({editable:!1,autoExpand:!e.editOnHover,items:e.yearItems,highlightExternalChange:!1,picker:{cls:"b-year-picker-list",scrollable:{overflowX:!1}}}),completeOnChange:!0,listeners:{complete:"onYearPicked",thisObj:e}})),e._yearEditor}},{key:"monthItems",get:function(){return xt.getMonthNames().map((function(e,t){return[t,e]}))}},{key:"yearItems",get:function(){for(var e=[],t=(new Date).getFullYear(),n=t-20;n<t+21;n++)e.push(n);return e}},{key:"maxMonthLength",get:function(){if(!this._maxMonthLength){this._maxMonthLength=0;for(var e=0,t=this.monthItems;e<12;e++)this._maxMonthLength=Math.max(this._maxMonthLength,t[e][1].length)}return this._maxMonthLength}}])&&lh(n.prototype,r),o&&lh(n,o),t}(Vp);function gh(e){return(gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vh(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['<input type="','"\n            reference="input"\n            class="','"\n            min="','"\n            max="','"\n            placeholder="','"\n            name="','"\n            id="','"/>']);return vh=function(){return e},e}function mh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wh(e,t){return!t||"object"!==gh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kh(e,t,n){return(kh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Eh(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Sh(e,t,n,r){return(Sh="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Eh(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Oh(e,t,n,r,o){if(!Sh(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function Eh(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ch(e)););return e}function Ch(e){return(Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xh(e,t){return(xh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yh._$name="DatePicker",se.register("datepicker",yh);var _h=function(e){function t(){return mh(this,t),wh(this,Ch(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xh(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"DateField"}},{key:"defaultConfig",get:function(){return{format:"L",fallbackFormat:"YYYY-MM-DD",timeFormat:"HH:mm:ss:SSS",keepTime:!1,pickerFormat:null,triggers:{expand:{cls:"b-icon-calendar",handler:"onTriggerClick",weight:200}},stepTriggers:{back:{cls:"b-icon-angle-left b-step-trigger",handler:"onBackClick",align:"start",weight:100},forward:{cls:"b-icon-angle-right b-step-trigger",handler:"onForwardClick",align:"end",weight:100}},calendarContainerCls:"",min:null,max:null,step:null,picker:null,value:null}}}],(r=[{key:"inputTemplate",value:function(){var e=this;return Xa.tpl(vh(),e.inputType||"text",e.inputCls||"",e.min,e.max,e.placeholder,e.name||e.id,e.id+"_input")}},{key:"createPicker",value:function(e){var t=this;return e=new yh(Object.assign({owner:t,forElement:t[t.pickerAlignElement],floating:!0,scrollAction:"realign",align:{align:"t0-b0",axisLock:!0,anchor:t.overlayAnchor,target:t[t.pickerAlignElement]},value:t.value,minDate:t.min,maxDate:t.max,onSelectionChange:function(e){var n=e.selection,r=e.source;r.isVisible&&(t._isUserAction=!0,t.value=n[0],t._isUserAction=!1,r.hide())}},e)),t.calendarContainerCls&&e.element.classList.add(t.calendarContainerCls),e}},{key:"onBackClick",value:function(){var e=this,t=e.min;if(!e.readOnly&&e.value){var n=xt.add(e.value,-1*e._step.magnitude,e._step.unit);(!t||t.getTime()<=n)&&(e.value=n)}}},{key:"onForwardClick",value:function(){var e=this,t=e.max;if(!e.readOnly&&e.value){var n=xt.add(e.value,e._step.magnitude,e._step.unit);(!t||t.getTime()>=n)&&(e.value=n)}}},{key:"showPicker",value:function(e){this.picker.value=this.picker.activeDate=this.value,kh(Ch(t.prototype),"showPicker",this).call(this,e)}},{key:"focusPicker",value:function(){this.picker.focus()}},{key:"transformDateValue",value:function(e){return null!=e&&(xt.isDate(e)||(e="string"==typeof e?xt.parse(e,this.format)||xt.parse(e,this.fallbackFormat):new Date(e)),xt.isValidDate(e))?this.transformTimeValue(e):null}},{key:"transformTimeValue",value:function(e){var t=this.keepTime;if(e=xt.clone(e),t){var n=xt.parse(t,this.timeFormat);xt.isValidDate(n)?xt.copyTimeValues(e,n):xt.isValidDate(this.value)&&xt.copyTimeValues(e,this.value)}else xt.clearTime(e,!1);return e}},{key:"hasChanged",value:function(e,n){return e&&e.getTime&&n&&n.getTime?e.getTime()!==n.getTime():kh(Ch(t.prototype),"hasChanged",this).call(this,e,n)}},{key:"updateLocalization",value:function(){kh(Ch(t.prototype),"updateLocalization",this).call(this),this.syncInputFieldValue(!0)}},{key:"internalOnKeyPress",value:function(e){kh(Ch(t.prototype),"internalOnKeyPress",this).call(this,e),"Enter"===e.key&&this.isValid&&this.picker.hide()}},{key:"triggers",set:function(e){Oh(Ch(t.prototype),"triggers",Mt.assign(e,this.stepTriggers),this,!0)},get:function(){return kh(Ch(t.prototype),"triggers",this)}},{key:"isValid",get:function(){var e=this,n=e.min,r=e.max;e.clearError("minimumValueViolation",!0),e.clearError("maximumValueViolation",!0);var o=e.value;if(o){if(o=o.getTime(),n&&n.getTime()>o)return e.setError("minimumValueViolation",!0),!1;if(r&&r.getTime()<o)return e.setError("maximumValueViolation",!0),!1}return kh(Ch(t.prototype),"isValid",this)}},{key:"min",set:function(e){var t=this;t._min=t.transformDateValue(e),t.input&&(t.input.min=t._min),t._picker&&(t._picker.minDate=t._min),t.updateInvalid()},get:function(){return this._min}},{key:"max",set:function(e){var t=this;t._max=t.transformDateValue(e),t.input&&(t.input.max=t._max),t._picker&&(t._picker.maxDate=t._max),t.updateInvalid()},get:function(){return this._max}},{key:"value",set:function(e){var n=this,r=n.value,o=n._picker,i=n.transformDateValue(e);!e||i?(n.clearError("invalidDate"),n.hasChanged(r,i)?(o&&!n.inputting&&(o.value=i),Oh(Ch(t.prototype),"value",i,this,!0)):n.inputting||n.syncInputFieldValue()):n.setError("invalidDate")},get:function(){return kh(Ch(t.prototype),"value",this)}},{key:"step",set:function(e){var t=this;t.element.classList[e?"add":"remove"]("b-show-steppers"),"number"==typeof e?e={magnitude:e,unit:t._step?t._step.unit:"day"}:"object"!==gh(e)&&(e=xt.parseDuration(e)),e&&e.magnitude&&e.unit&&(e.magnitude=Math.abs(e.magnitude),t._step=e,t.updateInvalid())},get:function(){return this._step}},{key:"inputValue",get:function(){var e=this.value;return e?xt.format(e,this.format):""}},{key:"format",set:function(e){this._format=e,this.syncInputFieldValue(!0)},get:function(){return this._format}}])&&bh(n.prototype,r),o&&bh(n,o),t}(Ad);function jh(e){return(jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Rh(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <input type="number"\n                reference="input"\n                value="','"\n                name="','"\n                id="','_input"\n                step="any"\n                ',"\n                ","/>\n            "]);return Rh=function(){return e},e}function Ph(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Th(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ah(e,t){return!t||"object"!==jh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mh(e,t,n,r){return(Mh="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Fh(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Ih(e,t,n){return(Ih="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Fh(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Fh(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lh(e)););return e}function Lh(e){return(Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nh(e,t){return(Nh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_h._$name="DateField",se.register("datefield",_h),se.register("date",_h);var Hh=/[.,]/,Bh=function(e){function t(){return Ph(this,t),Ah(this,Lh(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nh(e,t)}(t,e),n=t,o=[{key:"formatValue",value:function(e,t,n){if("string"!=typeof e)return e;var r=Dh(e.split(Hh),2),o=r[0],i=r[1];return n&&i&&i.length>n&&(i=i.substr(0,n)),t&&o&&o.length<t&&(o=o.padStart(t,"0")),[o,i].filter((function(e){return e})).join(".")}},{key:"$name",get:function(){return"NumberField"}},{key:"defaultConfig",get:function(){return{min:null,max:null,step:1,value:0,decimalPrecision:null,leadingZeroes:null,triggers:{spin:{type:"spintrigger"}},attributes:["placeholder","autoComplete","min","max","tabIndex"],changeOnSpin:!0}}}],(r=[{key:"construct",value:function(e){var n=this;Ih(Lh(t.prototype),"construct",this).call(this,e),n.input.addEventListener("dblclick",(function(){n.select()})),"number"==typeof n.changeOnSpin&&(n.bufferedSpinChange=n.buffer(n.triggerChange,n.changeOnSpin))}},{key:"inputTemplate",value:function(){var e=this,t="inputWidth"in e?'style="width:'.concat(e.inputWidth).concat("number"==typeof e.inputWidth?"px":"",'"'):"";return Xa.tpl(Rh(),e._value,e.name||e.id,e.id,t,e.attributeString)}},{key:"internalOnKeyPress",value:function(e){"keydown"===e.type&&("ArrowUp"===e.key?(this.doSpinUp(),e.preventDefault()):"ArrowDown"===e.key&&(this.doSpinDown(),e.preventDefault())),Ih(Lh(t.prototype),"internalOnKeyPress",this).call(this,e)}},{key:"doSpinUp",value:function(){var e=this,t=e.min,n=e.max,r=(e.value||0)+e.step;!isNaN(t)&&r<t&&(r=t),(isNaN(n)||r<=n)&&e.applySpinChange(r)}},{key:"doSpinDown",value:function(){var e=this,t=e.min,n=e.max,r=(e.value||0)-e.step;!isNaN(n)&&r>n&&(r=n),(isNaN(t)||r>=t)&&e.applySpinChange(r)}},{key:"applySpinChange",value:function(e){var t=this;t._isUserAction=!0,!0!==t.changeOnSpin&&(t.silenceChange=!0,t.bufferedSpinChange&&t.bufferedSpinChange(null,!0)),t.value=e,t._isUserAction=!1,t.silenceChange=!1}},{key:"triggerChange",value:function(){this.silenceChange||Ih(Lh(t.prototype),"triggerChange",this).apply(this,arguments)}},{key:"internalOnInput",value:function(e){var n=this.input,r=this.formatValue(n.value);n.value!==r&&(n.value=r),Ih(Lh(t.prototype),"internalOnInput",this).call(this,e)}},{key:"formatValue",value:function(e){return t.formatValue(e,this.leadingZeroes,this.decimalPrecision)}},{key:"step",set:function(e){this.element.classList[e?"remove":"add"]("b-hide-spinner"),this._step=e},get:function(){return this._step}},{key:"min",set:function(e){this._min=e,this.input&&(this.input.min=e)},get:function(){return this._min}},{key:"max",set:function(e){this._max=e,this.input&&(this.input.max=e)},get:function(){return this._max}},{key:"value",set:function(e){var n,r=this;e||0===e?("number"!=typeof e&&(e="string"==typeof e?parseFloat(e):Number(e),(n=isNaN(e))&&(e="")),n||null==r.decimalPrecision||(e=Mt.round(e,r.decimalPrecision))):e=r.clearable?void 0:0,r.value!==e&&(function(e,t,n,r,o){if(!Mh(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Lh(t.prototype),"value",e,this,!0),r.leadingZeroes&&(r.input.value=r.formatValue(e.toString())))},get:function(){return Ih(Lh(t.prototype),"value",this)}}])&&Th(n.prototype,r),o&&Th(n,o),t}(Ic);function zh(e){return(zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vh(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <div class="','">\n                <input type="range"\n                   reference="input"\n                   id="','_input"\n                   min="','"\n                   max="','"\n                   step="','"\n                   value="','">\n                <label reference="label" for="','_input">',"</label>\n            </div>\n        "]);return Vh=function(){return e},e}function Wh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yh(e,t){return!t||"object"!==zh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gh(e,t,n){return(Gh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uh(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Uh(e){return(Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qh(e,t){return(qh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Bh._$name="NumberField",se.register("numberfield",Bh),se.register("number",Bh);var Xh=function(e){function t(){return Wh(this,t),Yh(this,Uh(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qh(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Slider"}},{key:"defaultConfig",get:function(){return{text:"",showValue:!0,showTooltip:!1,min:0,max:100,step:1,value:null,thumbSize:20,localizableProperties:["text"]}}}],(r=[{key:"construct",value:function(e){var n=this;Gh(Uh(t.prototype),"construct",this).call(this,e),n.updateLabel(),n.showTooltip&&(n.tip=new Fu({forElement:n.input,anchor:!1,align:"b-t",axisLock:!0})),n.input.addEventListener("input",n.onInternalInput.bind(n)),n.input.addEventListener("change",n.onInternalChange.bind(n)),n.input.addEventListener("mouseover",n.onInternalMouseOver.bind(n)),n.input.addEventListener("mouseout",n.onInternalMouseOut.bind(n))}},{key:"template",value:function(e){return Xa.tpl(Vh(),e.text?"b-text b-has-label":"",e.id,e.min,e.max,e.step,e.value,e.id,e.text)}},{key:"onInternalInput",value:function(e){var t=this;t._value=parseInt(t.input.value),t.updateUI(),t.trigger("input",{value:t.value})}},{key:"onInternalChange",value:function(e){this.updateUI(),this.triggerChange(!0),this.trigger("action",{value:this.value})}},{key:"onInternalMouseOver",value:function(e){this.updateLabel(),this.tip&&this.tip.showBy({target:this.calcThumbPosition(),offset:5})}},{key:"onInternalMouseOut",value:function(e){this.tip&&this.tip.hide()}},{key:"triggerChange",value:function(e){this.trigger("change",{value:this.value,userAction:e})}},{key:"updateLabel",value:function(){this.text=this._text}},{key:"updateTooltipPosition",value:function(){this.tip&&this.tip.alignTo({target:this.calcThumbPosition(),offset:5})}},{key:"updateUI",value:function(){this.updateLabel(),this.updateTooltipPosition()}},{key:"calcThumbPosition",value:function(){var e=this,t=tr.from(e.input),n=(t.width-e.thumbSize)*e.calcPercentProgress()/100;return new tr(t.x+n,t.y+t.height/2-e.thumbSize/2,e.thumbSize,e.thumbSize)}},{key:"calcPercentProgress",value:function(){return(this.value-this.min)/(this.max-this.min)*100}},{key:"focusElement",get:function(){return this.input}},{key:"text",get:function(){return this._text},set:function(e){var t=this;t._text=e,t.label&&(t.showValue&&(e=e?"".concat(e," (").concat(t.value,")"):t.value),t.label.innerHTML=e),t.tip&&(t.tip.html=t.value)}},{key:"value",get:function(){return this.input?parseInt(this.input.value):this._value},set:function(e){var t=this;t._value!==e&&(t.input&&(t.input.value=e,t.updateUI(),t.triggerChange(!1)),t._value=e)}},{key:"min",get:function(){return this.input?this.input.min:this._min},set:function(e){var t=this;t.input&&(t.input.min=e,t._value<e&&(t.value=e,t.trigger("input",{value:t.value}))),t._min=e}},{key:"max",get:function(){return this.input?this.input.max:this._max},set:function(e){var t=this;t.input&&(t.input.max=e,t._value>e&&(t.value=e,t.trigger("input",{value:t.value}))),t._max=e}},{key:"step",get:function(){return this.input?this.input.step:this._step},set:function(e){this.input&&(this.input.step=e),this._step=e}}])&&$h(n.prototype,r),o&&$h(n,o),t}(ni);function Kh(e){return(Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qh(e,t){return!t||"object"!==Kh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ey(e,t,n){return(ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ty(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ty(e){return(ty=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ny(e,t){return(ny=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Xh._$name="Slider",se.register("slider",Xh);var ry=["b-slide-out-left","b-slide-out-right","b-slide-in-left","b-slide-in-right"],oy=function(e){function t(){return Zh(this,t),Qh(this,ty(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ny(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Card"}},{key:"defaultConfig",get:function(){return{containerCls:"b-card-container",itemCls:"b-card-item",animateCardChange:!0}}}],(r=[{key:"setActiveItem",value:function(e){var t=this,n=t.owner,r=n.contentElement,o=n.items,i=e instanceof ni,a=parseInt(r.dataset.activeIndex),u=o[a],c=n.items[e=i?e=o.indexOf(e):parseInt(e)],s={prevActiveIndex:a,prevActiveItem:u};if(c&&c!==u){var l=u&&u.element,f=c&&c.element;if(s.activeIndex=e,s.activeItem=c,t.animateDetacher){var d,p=t.animateDetacher.event;t.animateDetacher(),p.prevActiveItem.element.classList.remove(ry),(d=p.activeItem.element.classList).remove.apply(d,["b-active"].concat(ry)),t.animateDetacher=null}s.promise=new Promise((function(o,i){l&&t.animateCardChange?(l.classList.add(e>a?"b-slide-out-left":"b-slide-out-right"),f.classList.add("b-active",e<a?"b-slide-in-left":"b-slide-in-right"),n.isAnimating=!0,c.triggerPaint(),t.animateDetacher=_r.on({element:f,animationend:function(){var i,a;t.animateDetacher=null,n.isAnimating=!1,(i=f.classList).remove.apply(i,ry),l&&(a=l.classList).remove.apply(a,["b-active"].concat(ry)),r.dataset.activeIndex=e,c.focus(),o(s)},once:!0}),t.animateDetacher.reject=i,t.animateDetacher.event=s):(l&&l.classList.remove("b-active"),f.classList.add("b-active"),r.dataset.activeIndex=e,c.focus(),c.triggerPaint(),o(s))}))}return s}},{key:"renderChildren",value:function(){var e=this.owner,n=e.activeIndex;we.isIE11&&(this.animateCardChange=!1),e.items&&null!=n&&e.items[n]&&(e.contentElement.dataset.activeIndex=n,e.items[n].element.classList.add("b-active")),ey(ty(t.prototype),"renderChildren",this).call(this)}},{key:"activeIndex",get:function(){return parseInt(this.owner.contentElement.dataset.activeIndex)}},{key:"activeItem",get:function(){return this.owner.items[parseInt(this.owner.contentElement.dataset.activeIndex)]}}])&&Jh(n.prototype,r),o&&Jh(n,o),t}(zi);function iy(e){return(iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ay(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n                <div>\n                    <div class="b-tabpanel-tabs" reference="tabStrip">\n                        ','\n                    </div>\n                    <div class="b-tabpanel-body" reference="tabPanelBody" data-activeIndex="','">\n                    </div>\n                </div>\n            ']);return ay=function(){return e},e}function uy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sy(e,t){return!t||"object"!==iy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ly(e,t,n,r){return(ly="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=dy(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function fy(e,t,n){return(fy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=dy(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function dy(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=py(e)););return e}function py(e){return(py=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hy(e,t){return(hy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}oy._$name="Card",zi.registerLayout(oy);var yy=function(e){function t(){return uy(this,t),sy(this,py(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hy(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TabPanel"}},{key:"defaultConfig",get:function(){return{template:function(e){return Xa.tpl(ay(),e.items.map((function(t,n){return'\n                        <div tabindex="-1" data-index="'.concat(n,'" class="b-tabpanel-tab ').concat(n===e.activeIndex?"b-active":""," ").concat(t.cls||""," ").concat(t.hidden?"b-hidden":"",'" style="').concat(e.tabMinWidth?"min-width:"+xn.setLength(e.tabMinWidth)+";":""," ").concat(e.tabMaxWidth?"max-width:"+xn.setLength(e.tabMaxWidth)+";":"",'" >\n                            <span class="b-tabpanel-tab-title">').concat(t.title,"</span>\n                        </div>\n                        ")})),e.activeIndex)},itemCls:"b-tabpanel-item",defaultType:"container",activeTab:0,tabMinWidth:null,tabMaxWidth:null,animateTabChange:!0,layout:"card",suppressChildHeaders:!0}}}],(r=[{key:"construct",value:function(e){var n=this;fy(py(t.prototype),"construct",this).call(this,e),n.items.forEach((function(e,t){e.titleElement=n.element.querySelector('div.b-tabpanel-tab[data-index="'.concat(t,'"] span'))})),_r.on({element:n.tabStrip,delegate:".b-tabpanel-tab",click:"onTabElementClick",thisObj:this})}},{key:"createWidget",value:function(e){return(e=fy(py(t.prototype),"createWidget",this).call(this,e)).on({hide:this.onTabVisibilityChange,show:this.onTabVisibilityChange,thisObj:this}),e}},{key:"onTabElementClick",value:function(e){this.activeTab=e.currentTarget.dataset.index}},{key:"onTabVisibilityChange",value:function(e){var t=e.source;this.element.querySelector('div.b-tabpanel-tab[data-index="'.concat(this.items.indexOf(t),'"]')).classList[t.hidden?"add":"remove"]("b-hidden")}},{key:"tabMinWidth",set:function(e){this._tabMinWidth=e,this.element&&xn.forEachSelector(this.element,".b-tabpanel-tab",(function(t){xn.setLength(t,"minWidth",e||null)}))},get:function(){return this._tabMinWidth}},{key:"tabMaxWidth",set:function(e){this._tabMaxWidth=e,this.element&&xn.forEachSelector(this.element,".b-tabpanel-tab",(function(t){xn.setLength(t,"maxWidth",e||null)}))},get:function(){return this._tabMaxWidth}},{key:"layout",set:function(e){!function(e,t,n,r,o){if(!ly(e,t,n,r||e)&&o)throw new Error("failed to set property")}(py(t.prototype),"layout",e,this,!0),this.layout.animateCardChange=this.animateTabChange},get:function(){return fy(py(t.prototype),"layout",this)}},{key:"contentElement",get:function(){return this.tabPanelBody}},{key:"focusElement",get:function(){var e=this.items[this.activeTab||0];return e&&e.focusElement||this.tabStrip.children[this.activeTab]}},{key:"activeTab",set:function(e){var t=this;if(e<0||e>=t.items.length)throw new Error("Invalid tab index: "+e);if(t.isConfiguring)t._activeTab=e;else{var n=t.layout.setActiveItem(e),r=n.promise,o=n.activeIndex;if(n.activeItem){var i=t.tabStrip,a=i.children[t._activeTab];t._activeTab=o,a&&a.classList.remove("b-active"),i.children[o].classList.add("b-active"),r.then((function(){t.trigger("tabchange",n)}))}}},get:function(){return this._activeTab}},{key:"activeIndex",get:function(){return this.activeTab}},{key:"activeItem",get:function(){return this.layout.activeItem}}])&&cy(n.prototype,r),o&&cy(n,o),t}(pa);function gy(e){return(gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vy(){var e=by(['<input type="text"\n                readOnly="readonly"\n                reference="displayElement"\n                placeholder="','"/>']);return vy=function(){return e},e}function my(){var e=by(['<textarea\n                reference="input"\n                class="','"\n                placeholder="','"\n                name="','"\n                style="resize:','"\n                id="','"></textarea>']);return my=function(){return e},e}function by(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function wy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ky(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sy(e,t){return!t||"object"!==gy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oy(e,t,n,r){return(Oy="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=xy(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Ey(e,t,n,r,o){if(!Oy(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function Cy(e,t,n){return(Cy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=xy(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function xy(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_y(e)););return e}function _y(e){return(_y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jy(e,t){return(jy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yy._$name="TabPanel",se.register("tabpanel",yy),se.register("tabs",yy);var Dy=function(e){function t(){return wy(this,t),Sy(this,_y(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jy(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TextAreaField"}},{key:"defaultConfig",get:function(){return{triggers:null,inline:!0,resize:"none"}}}],(r=[{key:"startConfigure",value:function(e){this._thisIsAUsedExpression(this.inline),Cy(_y(t.prototype),"startConfigure",this).call(this,e)}},{key:"inputTemplate",value:function(){var e=this;return e.inline?Xa.tpl(my(),e.inputCls||"",e.placeholder,e.name||e.id,e.resize,e.id+"_input"):Xa.tpl(vy(),e.placeholder)}},{key:"showPicker",value:function(){this.picker.width=this.pickerWidth||this[this.pickerAlignElement].offsetWidth,Cy(_y(t.prototype),"showPicker",this).call(this,!0)}},{key:"focusPicker",value:function(){this.input.focus()}},{key:"onPickerKeyDown",value:function(e){var n=this,r=n.input;switch(e.key.trim()||e.code){case"Escape":return void n.picker.hide();case"Enter":e.ctrlKey&&(n.syncInputFieldValue(),n.picker.hide())}n.input=n.displayElement;var o=Cy(_y(t.prototype),"onPickerKeyDown",this).call(this,e);return n.input=r,o}},{key:"syncInputFieldValue",value:function(e){this.displayElement&&(this.displayElement.value=this.inputValue),Cy(_y(t.prototype),"syncInputFieldValue",this).call(this,e)}},{key:"createPicker",value:function(e){var t=this;e.width&&(t.pickerWidth=e.width),e=new ni(Mt.merge({cls:"b-textareafield-picker",owner:t,floating:!0,scrollAction:"realign",forElement:t[t.pickerAlignElement],align:{align:"t-b",axisLock:!0,anchor:t.overlayAnchor,target:t[t.pickerAlignElement]},html:'<textarea id="'.concat(t.id+"_input",'" style="resize:').concat(t.resize,'">').concat(t.value,"</textarea>"),autoShow:!1},e));var n=t.input=e.element.querySelector("#".concat(t.id,"_input"));return t.inputListenerRemover=_r.on({element:n,thisObj:t,focus:"internalOnInputFocus",change:"internalOnChange",input:"internalOnInput",keydown:"internalOnKeyPress",keypress:"internalOnKeyPress",keyup:"internalOnKeyPress"}),e}},{key:"focusElement",get:function(){return this.inline||this._picker&&this._picker.isVisible?this.input:this.displayElement}},{key:"value",set:function(e){Ey(_y(t.prototype),"value",null==e?"":e,this,!0)},get:function(){return Cy(_y(t.prototype),"value",this)}},{key:"inline",set:function(e){this._inline=e,e||this.triggers||(this.triggers={})},get:function(){return this._inline}},{key:"triggers",set:function(e){this.inline||((e||(e={})).expand={cls:"b-icon-picker",handler:"onTriggerClick"}),Ey(_y(t.prototype),"triggers",e,this,!0)},get:function(){return Cy(_y(t.prototype),"triggers",this)}}])&&ky(n.prototype,r),o&&ky(n,o),t}(Ad);function Ry(e){return(Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Py(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ty(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ay(e,t){return!t||"object"!==Ry(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function My(e,t,n){return(My="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Iy(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Iy(e){return(Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fy(e,t){return(Fy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Dy._$name="TextAreaField",se.register("textareafield",Dy),se.register("textarea",Dy);var Ly=function(e){function t(){return Py(this,t),Ay(this,Iy(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fy(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TimePicker"}},{key:"defaultConfig",get:function(){return{items:[{type:"number",ref:"fieldHours",min:0,max:23,highlightExternalChange:!1},{html:"<label>:</label>"},{type:"number",ref:"fieldMinutes",min:0,max:59,highlightExternalChange:!1},{type:"button",text:"AM",toggleGroup:"am-pm",ref:"buttonAM",cls:"b-blue"},{type:"button",text:"PM",toggleGroup:"am-pm",ref:"buttonPM",cls:"b-blue"}],float:"1",autoShow:!1,trapFocus:!0,value:xt.getTime(0),format:null}}}],(r=[{key:"construct",value:function(e){var n=this;My(Iy(t.prototype),"construct",this).call(this,e),n._pm=!1,n.fieldHours.on("change",n.onFieldChange,n),n.fieldMinutes.on("change",n.onFieldChange,n),n.buttonAM.on("click",n.onButtonAMClick,n),n.buttonPM.on("click",n.onButtonPMClick,n),_r.on({element:n.element,keydown:"onPickerKeyDown",thisObj:n}),_r.on({element:n.fieldHours.element,keydown:"onPickerKeyDown",thisObj:n}),_r.on({element:n.fieldMinutes.element,keydown:"onPickerKeyDown",thisObj:n}),n.refresh()}},{key:"onFieldChange",value:function(){this._time&&(this.value=this.pickerToTime())}},{key:"onButtonAMClick",value:function(){this._pm=!1,this._time&&(this.value=this.pickerToTime())}},{key:"onButtonPMClick",value:function(){this._pm=!0,this._time&&(this.value=this.pickerToTime())}},{key:"onPickerKeyDown",value:function(e){var t=this;switch(e.key&&e.key.trim()||e.code){case"Escape":t.triggerTimeChange(t._initialValue),t.hide(),e.preventDefault();break;case"Enter":t.value=t.pickerToTime(),t.hide(),e.preventDefault()}}},{key:"pickerToTime",value:function(){var e=this,t=e._pm,n=e.fieldHours.value,r=new Date(e._time);return e._is24Hour||(t&&n<12&&(n+=12),t||12!==n||(n=0)),r.setHours(n),r.setMinutes(e.fieldMinutes.value),e._min&&(r=xt.max(e._min,r)),e._max&&(r=xt.min(e._max,r)),r}},{key:"triggerTimeChange",value:function(e){this.trigger("timeChange",{time:e})}},{key:"refresh",value:function(){var e=this;if(!e.isConfiguring){var t=e._time,n=e._is24Hour,r=t.getHours(),o=e._pm=r>=12,i=e.fieldHours;e.element.classList[n?"add":"remove"]("b-24h"),i.min=n?0:1,i.max=n?23:12,i.value=n?r:r%12||12,e.fieldMinutes.value=t.getMinutes(),e.buttonAM.pressed=!o,e.buttonPM.pressed=o,e.buttonAM.hidden=e.buttonPM.hidden=n}}},{key:"value",set:function(e){var n=this,r=!1;e&&n._time?e.getTime()!==n._time.getTime()&&(n._time=e,r=!0):(n._time=t.defaultConfig.value,r=!0),r&&(n.isVisible&&n.triggerTimeChange(n.value),n.refresh())},get:function(){return this._time}},{key:"format",set:function(e){this._format=e,this._is24Hour=xt.is24HourFormat(this._format),this.refresh()},get:function(){return this._format}},{key:"min",set:function(e){this._min=e},get:function(){return this._min}},{key:"max",set:function(e){this._max=e},get:function(){return this._max}},{key:"initialValue",set:function(e){this.value=e,this._initialValue=e},get:function(){return this._initialValue}},{key:"buttonAM",get:function(){return this.widgetMap.buttonAM}},{key:"buttonPM",get:function(){return this.widgetMap.buttonPM}},{key:"fieldHours",get:function(){return this.widgetMap.fieldHours}},{key:"fieldMinutes",get:function(){return this.widgetMap.fieldMinutes}}])&&Ty(n.prototype,r),o&&Ty(n,o),t}(Ya);function Ny(e){return(Ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function By(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zy(e,t){return!t||"object"!==Ny(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vy(e,t,n,r){return(Vy="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=$y(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Wy(e,t,n){return(Wy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=$y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yy(e)););return e}function Yy(e){return(Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gy(e,t){return(Gy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ly._$name="TimePicker",se.register("timepicker",Ly);var Uy=function(e){function t(){return Hy(this,t),zy(this,Yy(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gy(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TimeField"}},{key:"defaultConfig",get:function(){var e=this;return{format:"LT",triggers:{back:{cls:"b-icon b-icon-angle-left",handler:"onBackClick",align:"start"},expand:{template:function(){return'<div class="b-align-'.concat(e.align||"end",'"><div class="b-icon-clock-live"></div></div>')},handler:"onTriggerClick",align:"end"},forward:{cls:"b-icon b-icon-angle-right",handler:"onForwardClick",align:"end"}},min:null,max:null,step:"5m",value:null}}}],(r=[{key:"createPicker",value:function(e){var t=this;return new Ly(Object.assign({owner:t,floating:!0,forElement:t[t.pickerAlignElement],align:{align:"t0-b0",axisLock:!0,anchor:t.overlayAnchor,target:t[t.pickerAlignElement]},value:t.value,format:t.format,onTimeChange:function(e){var n=e.time;t._isUserAction=!0,t.value=n,t._isUserAction=!1}},e))}},{key:"onBackClick",value:function(){var e=this,t=e.min;if(!e.readOnly&&e.value){var n=xt.add(e.value,-1*e.step.magnitude,e.step.unit);(!t||t.getTime()<=n)&&(e._isUserAction=!0,e.value=n,e._isUserAction=!1)}}},{key:"onForwardClick",value:function(){var e=this,t=e.max;if(!e.readOnly&&e.value){var n=xt.add(e.value,e.step.magnitude,e.step.unit);(!t||t.getTime()>=n)&&(e._isUserAction=!0,e.value=n,e._isUserAction=!1)}}},{key:"hasChanged",value:function(e,n){return e&&e.getTime&&n&&n.getTime?e.getTime()!==n.getTime():Wy(Yy(t.prototype),"hasChanged",this).call(this,e,n)}},{key:"showPicker",value:function(e){var n=this,r=n.picker;r.initialValue=n.value,r.format=n.format,r.maxTime=n.max,r.minTime=n.min,n.value=r.value,Wy(Yy(t.prototype),"showPicker",this).call(this,e)}},{key:"onPickerShow",value:function(){Wy(Yy(t.prototype),"onPickerShow",this).call(this),this.pickerKeyDownRemover&&this.pickerKeyDownRemover()}},{key:"focusPicker",value:function(){this.picker.focus()}},{key:"transformTimeValue",value:function(e){return null!=e&&(xt.isDate(e)||(e="string"==typeof e?xt.parse(e,this.format):new Date(e)),xt.isValidDate(e))?((e=xt.clone(e)).setFullYear(1970,0,1),e):null}},{key:"updateLocalization",value:function(){Wy(Yy(t.prototype),"updateLocalization",this).call(this),this.syncInputFieldValue(!0)}},{key:"isValid",get:function(){var e=this;e.clearError("minimumValueViolation",!0),e.clearError("maximumValueViolation",!0);var n=e.value;if(n){if(n=n.getTime(),e._min&&e._min.getTime()>n)return e.setError("minimumValueViolation",!0),!1;if(e._max&&e._max.getTime()<n)return e.setError("maximumValueViolation",!0),!1}return Wy(Yy(t.prototype),"isValid",this)}},{key:"min",set:function(e){var t=this;t._min=t.transformTimeValue(e),t.input&&(t.input.min=t._min),t.updateInvalid()},get:function(){return this._min}},{key:"max",set:function(e){var t=this;t._max=t.transformTimeValue(e),t.input&&(t.input.max=t._max),t.updateInvalid()},get:function(){return this._max}},{key:"value",set:function(e){var n=this,r=n.value,o=n.transformTimeValue(e);e&&!o||""===e?n.setError("invalidTime"):(n.clearError("invalidTime"),n.hasChanged(r,o)?(n.triggers.expand&&o&&(n.triggers.expand.element.firstElementChild.style.animationDelay=-(60*o.getHours()+o.getMinutes())/10+"s"),function(e,t,n,r,o){if(!Vy(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Yy(t.prototype),"value",o,this,!0)):n.inputting||n.syncInputFieldValue())},get:function(){return Wy(Yy(t.prototype),"value",this)}},{key:"step",set:function(e){"number"==typeof e?e={magnitude:e,unit:this._step.unit}:"object"!==Ny(e)&&(e=xt.parseDuration(e)),e&&e.magnitude&&e.unit&&(e.magnitude=Math.abs(e.magnitude),this._step=e,this.updateInvalid())},get:function(){return this._step}},{key:"format",set:function(e){this._format=e,this.syncInputFieldValue(!0)},get:function(){return this._format}},{key:"inputValue",get:function(){return xt.format(this.value,this.format)}}])&&By(n.prototype,r),o&&By(n,o),t}(Ad);function qy(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Xy(e,t,n){return(Xy=qy()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Ky(o,n.prototype),o}).apply(null,arguments)}function Ky(e,t){return(Ky=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zy(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Jy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Uy._$name="TimeField",se.register("timefield",Uy),se.register("time",Uy);var Qy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"createWidget",value:function(e){return se.createWidget(e.type,e)}},{key:"getClass",value:function(e){return se.getClass(e)}},{key:"appendWidget",value:function(e){return this.createWidget(e)}},{key:"appendWidgets",value:function(e,t){var n=this;return e.map((function(e){return n.appendWidget(Mt.assign({},t||{},e))}))}},{key:"openPopup",value:function(e,t){return new Ya(Mt.assign({forElement:e},"string"==typeof t?{html:t}:t))}},{key:"showContextMenu",value:function(e,t){var n=this;return n.currentContextMenu&&n.currentContextMenu.destroy(),e instanceof HTMLElement?t.forElement=e:Array.isArray(e)?t.forElement={target:Xy(cr,Zy(e))}:e instanceof cr&&(t.forElement={target:e}),n.currentContextMenu=new yu(t),n.currentContextMenu.on("destroy",(function(){n.currentContextMenu=null})),n.currentContextMenu}},{key:"attachTooltip",value:function(e,t){return"string"==typeof t&&(t={html:t}),new Fu(Object.assign({forElement:e},t)),e}},{key:"hasTooltipAttached",value:function(e){return Fu.hasTooltipAttached(e)}},{key:"destroyTooltipAttached",value:function(e){return Fu.destroyTooltipAttached(e)}},{key:"mask",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Loading";if(e)return e instanceof HTMLElement&&(e={element:e,text:t}),xi.mask(e,e.element)}},{key:"unmask",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.mask&&(t?e.mask.close():e.mask.hide())}},{key:"toast",value:function(e){return Cu.show(e)}},{key:"defaultStyle",set:function(e){this._defaultStyle=e},get:function(){return this._defaultStyle}}])&&Jy(t.prototype,n),r&&Jy(t,r),e}();function eg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}me._adapter||(me.adapter=Qy),Qy._$name="BryntumWidgetAdapter";var tg=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"get",value:function(e,t){var n=e._domData||(e._domData={});return null!=t?n[t]:n}},{key:"set",value:function(e,t,n){3===arguments.length?(e._domData||(e._domData={}))[t]=n:e._domData=t}},{key:"assign",value:function(e,t){Object.assign(e._domData||(e._domData={}),t)}}],(n=null)&&eg(t.prototype,n),r&&eg(t,r),e}();function ng(e){return(ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}tg._$name="DomDataStore";var og=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"number"==typeof t?(this._magnitude=t,this._unit=n):"object"===ng(t)&&Object.assign(this,t)}var t,n,r;return t=e,(n=[{key:"isEqual",value:function(e){return Boolean(e&&this._magnitude===e.magnitude&&this._unit===e.unit)}},{key:"toString",value:function(e){var t=this,n=t.useAbbreviation?"getShortNameOfUnit":"getLocalizedNameOfUnit";return t.isValid?"".concat(t._magnitude," ").concat(xt[n](t._unit,1!==t._magnitude)):""}},{key:"magnitude",get:function(){return this._magnitude},set:function(e){this._magnitude="number"==typeof e&&e}},{key:"unit",get:function(){return this._unit},set:function(e){this._unit=xt.parseTimeUnit(e)}},{key:"isValid",get:function(){return this._magnitude&&this._unit}},{key:"milliseconds",get:function(){return this.isValid?xt.asMilliseconds(this._magnitude,this._unit):0}}])&&rg(t.prototype,n),r&&rg(t,r),e}();function ig(e){return(ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ag(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ug(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cg(e,t){return!t||"object"!==ig(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sg(e){return(sg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lg(e,t){return(lg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}og._$name="Duration";var fg=function(){throw new Error("Abstract method call!")},dg=function(){throw new Error("Method cannot be called at this state!")},pg=function(e){function t(){return ag(this,t),cg(this,sg(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lg(e,t)}(t,e),n=t,(r=[{key:"canUndo",value:function(e){fg()}},{key:"canRedo",value:function(e){fg()}},{key:"onUndo",value:function(e){fg()}},{key:"onRedo",value:function(e){fg()}},{key:"onStartTransaction",value:function(e){fg()}},{key:"onStopTransaction",value:function(e){fg()}},{key:"onStopTransactionDelayed",value:function(e){fg()}},{key:"onRejectTransaction",value:function(e){fg()}},{key:"onEnable",value:function(e){fg()}},{key:"onDisable",value:function(e){fg()}},{key:"onAutoRecordOn",value:function(e){fg()}},{key:"onAutoRecordOff",value:function(e){fg()}},{key:"onResetQueue",value:function(e){fg()}},{key:"onModelUpdate",value:function(e){fg()}},{key:"onStoreModelAdd",value:function(e){fg()}},{key:"onStoreModelInsert",value:function(e){fg()}},{key:"onStoreModelRemove",value:function(e){fg()}},{key:"onStoreModelRemoveAll",value:function(e){fg()}},{key:"onModelInsertChild",value:function(e){fg()}},{key:"onModelRemoveChild",value:function(e){fg()}}])&&ug(n.prototype,r),o&&ug(n,o),t}(Y);pg._$name="StateBase";var hg=Symbol("STATE_PROP"),yg=Symbol("STORES_PROP"),gg=Symbol("QUEUE_PROP"),vg=Symbol("POS_PROP"),mg=Symbol("TRANSACTION_PROP"),bg=Symbol("TRANSACTION_TIMER_PROP"),wg=Symbol("AUTO_RECORD_PROP"),kg=(Object.freeze([hg,yg,gg,vg,mg,bg,wg]),new Map),Sg=function(e,t){kg.set(e,t)},Og=function(e){return"string"==typeof e&&(e=kg.get(e)),e};function Eg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cg=function(e,t){var n,r,o=t.undo,i=t.redo;if(o&&!i)Eg(r={},gg,e[gg].slice(e.position)),Eg(r,vg,0),n=r;else if(i&&!o)n=Eg({},gg,e[gg].slice(0,e.position));else{var a;Eg(a={},gg,[]),Eg(a,vg,0),n=a}return[n,function(){e.notifyStoresAboutQueueReset(t)}]};function xg(e){return(xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rg(e,t){return!t||"object"!==xg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pg(e){return(Pg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tg(e,t){return(Tg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ag=new(function(e){function t(){return jg(this,t),Rg(this,Pg(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tg(e,t)}(t,e),n=t,(r=[{key:"canUndo",value:function(){return!1}},{key:"canRedo",value:function(){return!1}},{key:"onUndo",value:function(){dg()}},{key:"onRedo",value:function(){dg()}},{key:"onEnable",value:function(e){return e.autoRecord?"autoreadystate":"readystate"}},{key:"onDisable",value:function(){dg()}},{key:"onAutoRecordOn",value:function(){return _g({},wg,!0)}},{key:"onAutoRecordOff",value:function(){return _g({},wg,!1)}},{key:"onStartTransaction",value:function(){dg()}},{key:"onStopTransaction",value:function(){dg()}},{key:"onStopTransactionDelayed",value:function(){dg()}},{key:"onRejectTransaction",value:function(){dg()}},{key:"onResetQueue",value:function(e,t){return Cg(e,t)}},{key:"onModelUpdate",value:function(){}},{key:"onModelInsertChild",value:function(){}},{key:"onModelRemoveChild",value:function(){}},{key:"onStoreModelAdd",value:function(){}},{key:"onStoreModelInsert",value:function(){}},{key:"onStoreModelRemove",value:function(){}},{key:"onStoreRemoveAll",value:function(){}}])&&Dg(n.prototype,r),o&&Dg(n,o),t}(pg)),Mg=Ag;function Ig(e){return(Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ng(e,t){return!t||"object"!==Ig(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hg(e,t,n){return(Hg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Bg(e){return(Bg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zg(e,t){return(zg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Sg("disabledstate",Ag);var Vg=Symbol("ACTION_QUEUE_PROP"),Wg=function(e){function t(){return Fg(this,t),Ng(this,Bg(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zg(e,t)}(t,e),n=t,(r=[{key:"construct",value:function(){var e;this[Vg]=[];for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=Hg(Bg(t.prototype),"construct",this)).call.apply(e,[this].concat(r))}},{key:"addAction",value:function(e){this[Vg].push(e)}},{key:"undo",value:function(){for(var e=this[Vg],t=e.length-1;t>=0;--t)e[t].undo()}},{key:"redo",value:function(){for(var e=this[Vg],t=0,n=e.length;t<n;++t)e[t].redo()}},{key:"defaultConfig",get:function(){return{title:null}}},{key:"queue",get:function(){return this[Vg].slice(0)}},{key:"length",get:function(){return this[Vg].length}}])&&Lg(n.prototype,r),o&&Lg(n,o),t}(Y);function $g(e){return($g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ug(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qg(e,t){return!t||"object"!==$g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xg(e){return(Xg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kg(e,t){return(Kg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Wg._$name="Transaction";var Zg=function(e){function t(){return Gg(this,t),qg(this,Xg(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kg(e,t)}(t,e),n=t,(r=[{key:"canUndo",value:function(e){return 0<e.position&&e.position<=e.length}},{key:"canRedo",value:function(e){return 0<=e.position&&e.position<e.length}},{key:"onUndo",value:function(e,t){var n,r=e[gg],o=e.position,i=Math.max(0,o-t);return[(n={},Yg(n,hg,"restoringstate"),Yg(n,vg,i),n),function(){for(e.notifyStoresAboutStateRestoringStart();o!=i;)r[--o].undo();return[e.autoRecord?"autoreadystate":"readystate",function(){e.notifyStoresAboutStateRestoringStop()}]}]}},{key:"onRedo",value:function(e,t){var n,r=e[gg],o=e.position,i=Math.min(r.length,o+t);return[(n={},Yg(n,hg,"restoringstate"),Yg(n,vg,i),n),function(){e.notifyStoresAboutStateRestoringStart();do{r[o++].redo()}while(o!=i);return[e.autoRecord?"autoreadystate":"readystate",function(){e.notifyStoresAboutStateRestoringStop()}]}]}},{key:"onEnable",value:function(){dg()}},{key:"onDisable",value:function(){return"disabledstate"}},{key:"onAutoRecordOn",value:function(){var e;return Yg(e={},hg,"autoreadystate"),Yg(e,wg,!0),e}},{key:"onAutoRecordOff",value:function(){dg()}},{key:"onStartTransaction",value:function(e,t){var n,r=new Wg({title:t});return[(n={},Yg(n,hg,"recordingstate"),Yg(n,mg,r),n),function(){e.notifyStoresAboutStateRecordingStart(r)}]}},{key:"onStopTransaction",value:function(){dg()}},{key:"onStopTransactionDelayed",value:function(){dg()}},{key:"onRejectTransaction",value:function(){dg()}},{key:"onResetQueue",value:function(e,t){return Cg(e,t)}},{key:"onModelUpdate",value:function(){}},{key:"onModelInsertChild",value:function(){}},{key:"onModelRemoveChild",value:function(){}},{key:"onStoreModelAdd",value:function(){}},{key:"onStoreModelInsert",value:function(){}},{key:"onStoreModelRemove",value:function(){}},{key:"onStoreRemoveAll",value:function(){}}])&&Ug(n.prototype,r),o&&Ug(n,o),t}(pg),Jg=new Zg,Qg=Jg;function ev(e){return(ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ov(e,t){return!t||"object"!==ev(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iv(e){return(iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function av(e,t){return(av=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Sg("readystate",Jg);var uv=function(e){function t(){return nv(this,t),ov(this,iv(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&av(e,t)}(t,e),n=t,(r=[{key:"canUndo",value:function(){return!1}},{key:"canRedo",value:function(){return!1}},{key:"onEnable",value:function(){}},{key:"onDisable",value:function(e){var t,n=e[mg];return e.notifyStoresAboutStateRecordingStop(n,{disabled:!0}),tv(t={},hg,"disabledstate"),tv(t,mg,null),t}},{key:"onAutoRecordOn",value:function(e){var t;return[(t={},tv(t,hg,"autorecordingstate"),tv(t,wg,!0),t),function(){e[hg].onStopTransactionDelayed(e)}]}},{key:"onAutoRecordOff",value:function(){dg()}},{key:"onStartTransaction",value:function(){dg()}},{key:"onStopTransaction",value:function(e,t){var n,r=e[mg],o=e[vg],i=e[gg];return r.length&&(r.title||t||!e.getTransactionTitle?t&&(r.title=t):r.title=e.getTransactionTitle(r),i[o]=r,i.length=++o),[(n={},tv(n,hg,"readystate"),tv(n,vg,o),tv(n,mg,null),n),function(){e.notifyStoresAboutStateRecordingStop(r,{stop:!0})}]}},{key:"onRejectTransaction",value:function(e){var t,n=e[mg];return[(t={},tv(t,hg,"restoringstate"),tv(t,mg,null),t),function(){return n.length&&n.undo(),["readystate",function(){e.notifyStoresAboutStateRecordingStop(n,{rejected:!0})}]}]}},{key:"onStopTransactionDelayed",value:function(){dg()}},{key:"onQueueReset",value:function(){dg()}},{key:"onModelUpdate",value:function(e,t,n,r){e[mg].addAction(e.makeModelUpdateAction(t,n,r))}},{key:"onModelInsertChild",value:function(e,t,n,r,o,i){e[mg].addAction(e.makeModelInsertChildAction(t,n,r,o,i))}},{key:"onModelRemoveChild",value:function(e,t,n,r){e[mg].addAction(e.makeModelRemoveChildAction(t,n,r))}},{key:"onStoreModelAdd",value:function(e,t,n,r){e[mg].addAction(e.makeStoreModelAddAction(t,n,r))}},{key:"onStoreModelInsert",value:function(e,t,n,r,o,i){e[mg].addAction(e.makeStoreModelInsertAction(t,n,r,o,i))}},{key:"onStoreModelRemove",value:function(e,t,n,r,o){e[mg].addAction(e.makeStoreModelRemoveAction(t,n,r,o))}},{key:"onStoreRemoveAll",value:function(e,t,n,r){e[mg].addAction(e.makeStoreRemoveAllAction(t,n,r))}}])&&rv(n.prototype,r),o&&rv(n,o),t}(pg),cv=new uv,sv=cv;function lv(e){return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hv(e,t){return!t||"object"!==lv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yv(e){return(yv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gv(e,t){return(gv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Sg("recordingstate",cv);var vv=new(function(e){function t(){return dv(this,t),hv(this,yv(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gv(e,t)}(t,e),n=t,(r=[{key:"canUndo",value:function(){return!1}},{key:"canRedo",value:function(){return!1}},{key:"onUndo",value:function(){dg()}},{key:"onRedo",value:function(){dg()}},{key:"onEnable",value:function(){dg()}},{key:"onDisable",value:function(){dg()}},{key:"onAutoRecordOn",value:function(){return fv({},wg,!0)}},{key:"onAutoRecordOff",value:function(){return fv({},wg,!1)}},{key:"onStartTransaction",value:function(){dg()}},{key:"onStopTransaction",value:function(){dg()}},{key:"onStopTransactionDelayed",value:function(){dg()}},{key:"onRejectTransaction",value:function(){dg()}},{key:"onQueueReset",value:function(){dg()}},{key:"onModelUpdate",value:function(){}},{key:"onModelInsertChild",value:function(){}},{key:"onModelRemoveChild",value:function(){}},{key:"onStoreModelAdd",value:function(){}},{key:"onStoreModelInsert",value:function(){}},{key:"onStoreModelRemove",value:function(){}},{key:"onStoreRemoveAll",value:function(){}}])&&pv(n.prototype,r),o&&pv(n,o),t}(pg)),mv=vv;function bv(e){return(bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ov(e,t){return!t||"object"!==bv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ev(e){return(Ev=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cv(e,t){return(Cv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Sg("restoringstate",vv);var xv=new(function(e){function t(){return kv(this,t),Ov(this,Ev(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cv(e,t)}(t,e),n=t,(r=[{key:"onAutoRecordOn",value:function(){dg()}},{key:"onAutoRecordOff",value:function(){var e;return wv(e={},hg,"readystate"),wv(e,wg,!1),e}},{key:"onStartTransaction",value:function(e,t){var n,r=new Wg({title:t});return[(n={},wv(n,hg,"autorecordingstate"),wv(n,mg,r),n),function(){e.notifyStoresAboutStateRecordingStart(r),e.stopTransactionDelayed()}]}},{key:"onModelUpdate",value:function(e,t,n,r){e.startTransaction(),e.onModelUpdate(t,n,r)}},{key:"onModelInsertChild",value:function(e,t,n,r,o){e.startTransaction(),e.onModelInsertChild(t,n,r,o)}},{key:"onModelRemoveChild",value:function(e,t,n,r){e.startTransaction(),e.onModelRemoveChild(t,n,r)}},{key:"onStoreModelAdd",value:function(e,t,n,r){e.startTransaction(),e.onStoreModelAdd(t,n,r)}},{key:"onStoreModelInsert",value:function(e,t,n,r,o,i){e.startTransaction(),e.onStoreModelInsert(t,n,r,i)}},{key:"onStoreModelRemove",value:function(e,t,n,r,o){e.startTransaction(),e.onStoreModelRemove(t,n,r,o)}},{key:"onStoreRemoveAll",value:function(e,t,n,r){e.startTransaction(),e.onStoreRemoveAll(t,n,r)}}])&&Sv(n.prototype,r),o&&Sv(n,o),t}(Zg)),_v=xv;function jv(e){return(jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tv(e,t){return!t||"object"!==jv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Av(e,t,n){return(Av="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Mv(e){return(Mv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iv(e,t){return(Iv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Sg("autoreadystate",xv);var Fv=new(function(e){function t(){return Rv(this,t),Tv(this,Mv(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Iv(e,t)}(t,e),n=t,(r=[{key:"onDisable",value:function(e){var t,n=e[mg],r=e[bg];return r&&this.clearTimeout(r),e.notifyStoresAboutStateRecordingStop(n,{disabled:!0}),Dv(t={},hg,"disabledstate"),Dv(t,mg,null),Dv(t,bg,null),t}},{key:"onAutoRecordOn",value:function(e){dg()}},{key:"onAutoRecordOff",value:function(e){var t,n=e[bg];return n&&this.clearTimeout(n),Dv(t={},hg,"recordingstate"),Dv(t,wg,!1),Dv(t,bg,null),t}},{key:"onStopTransaction",value:function(e,t){var n,r=e[mg],o=e[bg],i=e[vg],a=e[gg];return o&&this.clearTimeout(o),r.length&&(r.title||t||!e.getTransactionTitle?t&&(r.title=t):r.title=e.getTransactionTitle(r),a[i]=r,a.length=++i),[(n={},Dv(n,hg,"autoreadystate"),Dv(n,vg,i),Dv(n,mg,null),Dv(n,bg,null),n),function(){e.notifyStoresAboutStateRecordingStop(r,{stop:!0})}]}},{key:"onStopTransactionDelayed",value:function(e){var t,n=e[bg];return n&&this.clearTimeout(n),n=this.setTimeout((function(){e.stopTransaction()}),e.autoRecordTransactionStopTimeout),Dv(t={},hg,Fv),Dv(t,bg,n),t}},{key:"onRejectTransaction",value:function(e){var t,n=e[mg],r=e[bg];return r&&this.clearTimeout(r),[(t={},Dv(t,hg,"restoringstate"),Dv(t,mg,null),Dv(t,bg,null),t),function(){return n.length&&n.undo(),["autoreadystate",function(){e.notifyStoresAboutStateRecordingStop(n,{rejected:!0})}]}]}},{key:"onModelUpdate",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=Av(Mv(t.prototype),"onModelUpdate",this)).call.apply(n,[this,e].concat(o)),e.stopTransactionDelayed()}},{key:"onModelInsertChild",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=Av(Mv(t.prototype),"onModelInsertChild",this)).call.apply(n,[this,e].concat(o)),e.stopTransactionDelayed()}},{key:"onModelRemoveChild",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=Av(Mv(t.prototype),"onModelRemoveChild",this)).call.apply(n,[this,e].concat(o)),e.stopTransactionDelayed()}},{key:"onStoreModelAdd",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=Av(Mv(t.prototype),"onStoreModelAdd",this)).call.apply(n,[this,e].concat(o)),e.stopTransactionDelayed()}},{key:"onStoreModelInsert",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=Av(Mv(t.prototype),"onStoreModelInsert",this)).call.apply(n,[this,e].concat(o)),e.stopTransactionDelayed()}},{key:"onStoreModelRemove",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=Av(Mv(t.prototype),"onStoreModelRemove",this)).call.apply(n,[this,e].concat(o)),e.stopTransactionDelayed()}},{key:"onStoreRemoveAll",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=Av(Mv(t.prototype),"onStoreRemoveAll",this)).call.apply(n,[this,e].concat(o)),e.stopTransactionDelayed()}}])&&Pv(n.prototype,r),o&&Pv(n,o),t}(Wr(uv))),Lv=Fv;function Nv(e){return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zv(e,t){return!t||"object"!==Nv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vv(e){return(Vv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wv(e,t){return(Wv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Sg("autorecordingstate",Fv);var $v=function(){throw new Error("Abstract method call!")},Yv=function(e){function t(){return Hv(this,t),zv(this,Vv(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wv(e,t)}(t,e),n=t,(r=[{key:"undo",value:function(){$v()}},{key:"redo",value:function(){$v()}},{key:"type",get:function(){return this.constructor.name}}])&&Bv(n.prototype,r),o&&Bv(n,o),t}(Y);function Gv(e){return(Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xv(e,t){return!t||"object"!==Gv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kv(e){return(Kv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zv(e,t){return(Zv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Yv._$name="ActionBase";var Jv=Symbol("MODEL_PROP"),Qv=Symbol("NEW_DATA_PROP"),em=Symbol("OLD_DATA_PROP"),tm=function(e){function t(){return Uv(this,t),Xv(this,Kv(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zv(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{model:void 0,newData:void 0,oldData:void 0}}}],(r=[{key:"undo",value:function(){this.model.set(this.oldData)}},{key:"redo",value:function(){this.model.set(this.newData)}},{key:"type",get:function(){return"UpdateAction"}},{key:"model",get:function(){return this[Jv]},set:function(e){this[Jv]=e}},{key:"newData",get:function(){return this[Qv]},set:function(e){this[Qv]=Object.assign({},e)}},{key:"oldData",get:function(){return this[em]},set:function(e){this[em]=Object.assign({},e)}}])&&qv(n.prototype,r),o&&qv(n,o),t}(Yv);function nm(e){return(nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function om(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function im(e,t){return!t||"object"!==nm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function am(e){return(am=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function um(e,t){return(um=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}tm._$name="UpdateAction";var cm=Symbol("PARENT_MODEL_PROP"),sm=Symbol("CHILD_MODELS_PROP"),lm=Symbol("INSERT_INDEX_PROP"),fm=Symbol("CONTEXT_PROP"),dm=function(e){function t(){return rm(this,t),im(this,am(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&um(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{parentModel:void 0,childModels:void 0,insertIndex:void 0,context:void 0}}}],(r=[{key:"undo",value:function(){var e=this.parentModel,t=this.context,n=this.childModels;n.sort((function(e,n){var r=t.get(e)||{},o=r.lhsParent,i=r.lhsIndex,a=t.get(n)||{},u=a.rhsParent,c=a.rhsIndex;return o&&o===u?i-c:0})),n.forEach((function(n){var r=t.get(n)||{},o=r.parent,i=r.index;if(o)if(o===e){var a;a=i>n.parentIndex?i+1:i;var u=null===(a=i===o.children.length-1?null:a)?void 0:o.children[a];o.insertChild(n,u)}else o.insertChild(n,o.children[i]);else e.removeChild(n)}))}},{key:"redo",value:function(){var e=this.parentModel,t=this.insertIndex,n=this.childModels,r=e.children[t];e.insertChild(n,r)}},{key:"type",get:function(){return"InsertChildAction"}},{key:"parentModel",get:function(){return this[cm]},set:function(e){this[cm]=e}},{key:"childModels",get:function(){return this[sm]},set:function(e){this[sm]=e.slice(0)}},{key:"insertIndex",get:function(){return this[lm]},set:function(e){this[lm]=e}},{key:"context",get:function(){return this[fm]},set:function(e){this[fm]=e}}])&&om(n.prototype,r),o&&om(n,o),t}(Yv);function pm(e){return(pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ym(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gm(e,t){return!t||"object"!==pm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vm(e){return(vm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mm(e,t){return(mm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}dm._$name="InsertChildAction";var bm=Symbol("PARENT_MODEL_PROP"),wm=Symbol("CHILD_MODELS_PROP"),km=Symbol("CONTEXT_PROP"),Sm=function(e){function t(){return hm(this,t),gm(this,vm(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mm(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{parentModel:void 0,childModels:void 0,context:void 0}}}],(r=[{key:"undo",value:function(){var e=this.parentModel,t=this.context,n=this.childModels;n.sort((function(e,n){return t.get(e)-t.get(n)})),n.forEach((function(n){e.insertChild(t.get(n),n)}))}},{key:"redo",value:function(){this.parentModel.removeChild(this.childModels)}},{key:"type",get:function(){return"RemoveChildAction"}},{key:"parentModel",get:function(){return this[bm]},set:function(e){this[bm]=e}},{key:"childModels",get:function(){return this[wm]},set:function(e){this[wm]=e.slice(0)}},{key:"context",get:function(){return this[km]},set:function(e){this[km]=e}}])&&ym(n.prototype,r),o&&ym(n,o),t}(Yv);function Om(e){return(Om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Em(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xm(e,t){return!t||"object"!==Om(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _m(e){return(_m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jm(e,t){return(jm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Sm._$name="RemoveChildAction";var Dm=Symbol("STORE_PROP"),Rm=Symbol("MODEL_LIST_PROP"),Pm=function(e){function t(){return Em(this,t),xm(this,_m(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jm(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{store:void 0,modelList:void 0,silent:!1}}}],(r=[{key:"undo",value:function(){this.store.remove(this.modelList,this.silent)}},{key:"redo",value:function(){this.store.add(this.modelList,this.silent)}},{key:"type",get:function(){return"AddAction"}},{key:"store",get:function(){return this[Dm]},set:function(e){this[Dm]=e}},{key:"modelList",get:function(){return this[Rm]},set:function(e){this[Rm]=e.slice(0)}}])&&Cm(n.prototype,r),o&&Cm(n,o),t}(Yv);function Tm(e){return(Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Am(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Im(e,t){return!t||"object"!==Tm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fm(e){return(Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lm(e,t){return(Lm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Pm._$name="AddAction";var Nm=Symbol("STORE_PROP"),Hm=Symbol("MODEL_LIST_PROP"),Bm=Symbol("INSERT_INDEX_PROP"),zm=Symbol("CONTEXT_PROP"),Vm=function(e){function t(){return Am(this,t),Im(this,Fm(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lm(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{store:void 0,modelList:void 0,insertIndex:void 0,context:void 0,silent:!1}}}],(r=[{key:"undo",value:function(){var e=this.store,t=this.modelList,n=this.context,r=this.silent;t.sort((function(e,t){var r=n.get(e),o=n.get(t);return void 0!==r&&void 0!==o?r-o:0})),t.forEach((function(t){var o=n.get(t);void 0!==o?e.insert(o,t,r):e.remove(t,r)}))}},{key:"redo",value:function(){this.store.insert(this.insertIndex,this.modelList,this.silent)}},{key:"type",get:function(){return"InsertAction"}},{key:"store",get:function(){return this[Nm]},set:function(e){this[Nm]=e}},{key:"modelList",get:function(){return this[Hm]},set:function(e){this[Hm]=e.slice(0)}},{key:"insertIndex",get:function(){return this[Bm]},set:function(e){this[Bm]=e}},{key:"context",get:function(){return this[zm]},set:function(e){this[zm]=e}}])&&Mm(n.prototype,r),o&&Mm(n,o),t}(Yv);function Wm(e){return(Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ym(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gm(e,t){return!t||"object"!==Wm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Um(e){return(Um=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qm(e,t){return(qm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Vm._$name="InsertAction";var Xm=Symbol("STORE_PROP"),Km=Symbol("MODEL_LIST_PROP"),Zm=Symbol("CONTEXT_PROP"),Jm=function(e){function t(){return $m(this,t),Gm(this,Um(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qm(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{store:void 0,modelList:void 0,context:void 0,silent:!1}}}],(r=[{key:"undo",value:function(){var e=this.store,t=this.context,n=this.modelList,r=this.silent;n.sort((function(e,n){return t.get(e)-t.get(n)})),n.forEach((function(n){var o=t.get(n);e.insert(o,n,r)}))}},{key:"redo",value:function(){this.store.remove(this.modelList,this.silent)}},{key:"type",get:function(){return"RemoveAction"}},{key:"store",get:function(){return this[Xm]},set:function(e){this[Xm]=e}},{key:"modelList",get:function(){return this[Km]},set:function(e){this[Km]=e.slice(0)}},{key:"context",get:function(){return this[Zm]},set:function(e){this[Zm]=e}}])&&Ym(n.prototype,r),o&&Ym(n,o),t}(Yv);function Qm(e){return(Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nb(e,t){return!t||"object"!==Qm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rb(e){return(rb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ob(e,t){return(ob=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Jm._$name="RemoveAction";var ib=Symbol("STORE_PROP"),ab=Symbol("ALL_RECORDS_PROP"),ub=function(e){function t(){return eb(this,t),nb(this,rb(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ob(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{store:void 0,allRecords:void 0,silent:!1}}}],(r=[{key:"undo",value:function(){var e=this.store,t=this.allRecords,n=this.silent;e.add(t,n)}},{key:"redo",value:function(){this.store.removeAll(this.silent)}},{key:"type",get:function(){return"RemoveAllAction"}},{key:"store",get:function(){return this[ib]},set:function(e){this[ib]=e}},{key:"allRecords",get:function(){return this[ab]},set:function(e){this[ab]=e.slice(0)}}])&&tb(n.prototype,r),o&&tb(n,o),t}(Yv);function cb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fb(e,t){return!t||"object"!==yb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function db(e,t,n){return(db="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pb(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pb(e){return(pb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hb(e,t){return(hb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yb(e){return(yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ub._$name="RemoveAllAction";var vb=function(e,t,n){return new tm({model:e,newData:t,oldData:n})},mb=function(e,t,n,r){return new dm({parentModel:e,childModels:n,insertIndex:t,context:r})},bb=function(e,t,n){return new Sm({parentModel:e,childModels:t,context:n})},wb=function(e,t,n){return new Pm({store:e,modelList:t,silent:n})},kb=function(e,t,n,r,o){return new Vm({store:e,insertIndex:t,modelList:n,context:r,silent:o})},Sb=function(e,t,n,r){return new Jm({store:e,modelList:t,context:n,silent:r})},Ob=function(e,t,n){return new ub({store:e,allRecords:t,silent:n})},Eb=function e(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var a=n.call.apply(n,[t[hg],t].concat(o));if("string"==typeof a)t[hg]=Og(a);else if(a instanceof pg)t[hg]=a;else if(Array.isArray(a)){var u=gb(a,2),c=u[0],s=u[1];"string"==typeof c?t[hg]=Og(c):c instanceof pg?t[hg]=c:c&&"object"===yb(c)&&((t=Object.assign(t,c))[hg]=Og(t[hg])),"function"==typeof s&&e.apply(void 0,[t,s].concat(o))}else a&&"object"===yb(a)&&((t=Object.assign(t,a))[hg]=Og(t[hg]))},Cb=function(e){function t(){return sb(this,t),fb(this,pb(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hb(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{disabled:!0,autoRecord:!1,autoRecordTransactionStopTimeout:100,makeModelUpdateAction:vb,makeModelInsertChildAction:mb,makeModelRemoveChildAction:bb,makeStoreModelAddAction:wb,makeStoreModelInsertAction:kb,makeStoreModelRemoveAction:Sb,makeStoreRemoveAllAction:Ob,getTransactionTitle:null}}}],(r=[{key:"construct",value:function(){var e,n,r=this;Object.assign(r,(cb(e={},hg,Qg),cb(e,yg,[]),cb(e,gg,[]),cb(e,vg,0),cb(e,mg,null),cb(e,bg,null),cb(e,wg,!1),e));for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(n=db(pb(t.prototype),"construct",this)).call.apply(n,[this].concat(i))}},{key:"doDestroy",value:function(){db(pb(t.prototype),"doDestroy",this).call(this),this.destroyProperties(hg)}},{key:"hasStore",value:function(e){return this[yg].includes(e)}},{key:"addStore",value:function(e){this.hasStore(e)||(this[yg].push(e),e.stm=this)}},{key:"removeStore",value:function(e){this.hasStore(e)&&(this[yg]=this[yg].filter((function(t){return t!==e})),e.stm=null)}},{key:"getStoreById",value:function(e){return this[yg].find((function(t){return t.id===e}))}},{key:"forEachStore",value:function(e){this[yg].forEach((function(t){return e(t,t.id)}))}},{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"startTransaction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Eb(this,this.state.onStartTransaction,e)}},{key:"stopTransaction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Eb(this,this.state.onStopTransaction,e)}},{key:"stopTransactionDelayed",value:function(){Eb(this,this.state.onStopTransactionDelayed)}},{key:"rejectTransaction",value:function(){Eb(this,this.state.onRejectTransaction)}},{key:"undo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Eb(this,this.state.onUndo,e)}},{key:"undoAll",value:function(){this.undo(this.length)}},{key:"redo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Eb(this,this.state.onRedo,e)}},{key:"redoAll",value:function(){this.redo(this.length)}},{key:"resetQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{undo:!0,redo:!0};Eb(this,this.state.onResetQueue,e)}},{key:"resetUndoQueue",value:function(){this.resetQueue({undo:!0})}},{key:"resetRedoQueue",value:function(){this.resetQueue({redo:!0})}},{key:"notifyStoresAboutStateRecordingStart",value:function(e){var t=this;this.forEachStore((function(n){n.onStmRecordingStart&&n.onStmRecordingStart(t,e)})),this.trigger("recordingStart",{stm:this,transaction:e})}},{key:"notifyStoresAboutStateRecordingStop",value:function(e,t){var n=this;this.forEachStore((function(r){r.onStmRecordingStop&&r.onStmRecordingStop(n,e,t)})),this.trigger("recordingStop",{stm:this,transaction:e,reason:t})}},{key:"notifyStoresAboutStateRestoringStart",value:function(){var e=this;this.forEachStore((function(t){t.onStmRestoringStart&&t.onStmRestoringStart(e)})),this.trigger("restoringStart",{stm:this})}},{key:"notifyStoresAboutStateRestoringStop",value:function(){var e=this;this.forEachStore((function(t){t.onStmRestoringStop&&t.onStmRestoringStop(e)})),this.trigger("restoringStop",{stm:this})}},{key:"notifyStoresAboutQueueReset",value:function(e){var t=this;this.forEachStore((function(n){n.onStmQueueReset&&n.onStmQueueReset(t,e)})),this.trigger("queueReset",{stm:this,options:e})}},{key:"onModelUpdate",value:function(e,t,n){Eb(this,this.state.onModelUpdate,e,t,n)}},{key:"onModelInsertChild",value:function(e,t,n,r){Eb(this,this.state.onModelInsertChild,e,t,n,r)}},{key:"onModelRemoveChild",value:function(e,t,n){Eb(this,this.state.onModelRemoveChild,e,t,n)}},{key:"onStoreModelAdd",value:function(e,t,n){Eb(this,this.state.onStoreModelAdd,e,t,n)}},{key:"onStoreModelInsert",value:function(e,t,n,r,o){Eb(this,this.state.onStoreModelInsert,e,t,n,r,o)}},{key:"onStoreModelRemove",value:function(e,t,n,r){Eb(this,this.state.onStoreModelRemove,e,t,n,r)}},{key:"onStoreRemoveAll",value:function(e,t,n){Eb(this,this.state.onStoreRemoveAll,e,t,n)}},{key:"state",get:function(){return this[hg]}},{key:"position",get:function(){return this[vg]}},{key:"length",get:function(){return this[gg].length}},{key:"stores",get:function(){return Array.from(this[yg])}},{key:"disabled",get:function(){return this.state===Mg},set:function(e){var t=this;t.disabled!=e&&Eb(t,e?t.state.onDisable:t.state.onEnable,t)}},{key:"isReady",get:function(){return this.state===Qg||this.state===_v}},{key:"isRecording",get:function(){return this.state===sv||this.state===Lv}},{key:"autoRecord",get:function(){return this[wg]},set:function(e){var t=this;t.autoRecord!=e&&Eb(t,e?t.state.onAutoRecordOn:t.state.onAutoRecordOff,t)}},{key:"transaction",get:function(){return this[mg]}},{key:"queue",get:function(){return this[gg].map((function(e){return e.title}))}},{key:"isRestoring",get:function(){return this.state===mv}},{key:"canUndo",get:function(){return this.state.canUndo(this)}},{key:"canRedo",get:function(){return this.state.canRedo(this)}}])&&lb(n.prototype,r),o&&lb(n,o),t}(ae(Y));function xb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Cb._$name="StateTrackingManager";var _b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"insertRule",value:function(e){var t=this.styleSheet,n=t.cssRules.length;if(t.insertRule(e,0),t.cssRules.length>n)return t.cssRules[0]}},{key:"findRule",value:function(e){var t,n="function"==typeof e;return Array.prototype.find.call(document.head.querySelectorAll("link[rel=stylesheet],style[type*=css]"),(function(r){if(t=Array.prototype.find.call(r.sheet.rules||r.sheet.cssRules,(function(t){return n?e(t):t.selectorText===e})))return!0})),t}},{key:"styleSheet",get:function(){return this._stylesheet||(this._stylesheet=xn.createElement({tag:"style",id:"bryntum-private-styles",type:"text/css",parent:document.head}).sheet),this._stylesheet}}],(n=null)&&xb(t.prototype,n),r&&xb(t,r),e}();function jb(e){return(jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}_b._$name="CSSHelper";var Rb=Array.prototype.slice,Pb={ignore:{_element:1,parent:1,elementData:1,ns:1},evaluate:function(e,t,n){if("html"===e&&"string"!=typeof t.value&&"compareHtml"in t.object)return t.object.compareHtml===n.object.compareHtml}},Tb={tag:1,html:1,children:1,tooltip:1,parent:1,nextSibling:1,ns:1,reference:1,_element:1,elementData:1,retainElement:1,compareHtml:1,syncOptions:1,isReleased:1},Ab={class:1,className:1,classname:1},Mb=Object.freeze([]),Ib=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"sync",value:function(e){return this.performSync(e,e.targetElement),e.targetElement}},{key:"performSync",value:function(e,t){var n=e.domConfig,r=e.callback;return(e.configEquality?e.configEquality(n,t.lastDomConfig,Pb):Mt.isDeeplyEqual(n,t.lastDomConfig,Pb))?(this.relinkElements(n,t),r&&r({action:"none",domConfig:n,targetElement:t}),!1):(n?(n.onlyChildren||(this.syncAttributes(n,t),this.syncContent(n,t)),this.syncChildren(e,t),n._element=t):(t.innerHTML=null,t.syncIdMap=null),t.lastDomConfig=n,!0)}},{key:"relinkElements",value:function(e,t){var n=this;e._element=t,e.children&&e.children.forEach((function(e,r){e&&"string"!=typeof e&&n.relinkElements(e,t.lastDomConfig.children[r]._element)}))}},{key:"syncDataset",value:function(e,t){for(var n=t.lastDomConfig,r=e===n,o=Object.keys(e.dataset),i=n&&n.dataset&&Object.keys(n.dataset),a=U.delta(o,i),u=0;u<a.onlyInA.length;u++){var c=a.onlyInA[u];t.setAttribute("data-".concat(A.hyphenate(c)),e.dataset[c])}for(var s=0;s<a.inBoth.length;s++){var l=a.inBoth[s];(r||e.dataset[l]!=n.dataset[l])&&t.setAttribute("data-".concat(A.hyphenate(l)),e.dataset[l])}for(var f=0;f<a.onlyInB.length;f++)t.removeAttribute("data-".concat(A.hyphenate(a.onlyInB[f])))}},{key:"syncClassList",value:function(e,t){var n=e.className||e.class,r="object"===jb(n)?Mt.getTruthyKeys(n).join(" "):n;t.setAttribute("class",r)}},{key:"getSyncAttributes",value:function(e){var t={},n=[];return e&&Object.keys(e).forEach((function(r){if(!Tb[r]){var o=r.toLowerCase();t[o]=e[r],n.push(o)}})),{attributes:t,names:n}}},{key:"syncAttributes",value:function(e,t){for(var n=t.lastDomConfig,r=e===n,o=this.getSyncAttributes(e),i=o.attributes,a=o.names,u=r?o:this.getSyncAttributes(n),c=u.attributes,s=u.names,l=r?{onlyInA:Mb,onlyInB:Mb,inBoth:a}:U.delta(a,s),f=l.onlyInA,d=l.onlyInB,p=l.inBoth,h=0;h<f.length;h++){var y=f[h],g=i[y];"style"===y?xn.applyStyle(t,g,!0):"dataset"===y?this.syncDataset(e,t):Ab[y]?this.syncClassList(e,t):t.setAttribute(y,g)}for(var v=0;v<d.length;v++)t.removeAttribute(d[v]);for(var m=0;m<p.length;m++){var b=p[m],w=i[b],k=c[b];null==w?t.removeAttribute(b):"style"===b?!r&&Mt.isEqual(w,k,!0)||xn.applyStyle(t,w,!0):"dataset"===b?this.syncDataset(e,t):Ab[b]?this.syncClassList(e,t):(r||w!==k)&&t.setAttribute(b,w)}}},{key:"syncContent",value:function(e,t){var n=e.html;e.elementData&&(t.elementData=e.elementData),null!=n&&(n instanceof DocumentFragment?1===t.childNodes.length&&0===t.childElementCount&&1===n.childNodes.length&&0===n.childElementCount?xn.setInnerText(t,n.firstChild.data):(t.innerHTML="",t.appendChild(n)):String(n).includes("<")?t.innerHTML=n:xn.setInnerText(t,n))}},{key:"appendTextNode",value:function(e,t,n){var r=document.createTextNode(e);t.appendChild(r),n&&n({action:"newNode",domConfig:e,targetElement:r})}},{key:"insertElement",value:function(e,t,n,r,o){var i=o.ns?document.createElementNS(o.ns,e.tag||"svg"):document.createElement(e.tag||"div");t.insertBefore(i,n),this.performSync(o,i),null!=r&&(t.syncIdMap[r]=i),o.callback&&o.callback({action:"newElement",domConfig:e,targetElement:i,syncId:r})}},{key:"syncChildren",value:function(e,t){var n=e.domConfig,r=e.syncIdField,o=e.callback,i=e.releaseThreshold,a=e.configEquality,u=e.ns;if(!n.html){var c,s=Rb.call(n.children||[]),l=Rb.call(t.childNodes),f=t.syncIdMap||{},d=n.syncOptions||{};r=d.syncIdField||r,o=d.callback||o,a=d.configEquality||a,i="releaseThreshold"in d?d.releaseThreshold:i,r&&(t.syncIdMap={});for(var p={syncIdField:r,releaseThreshold:i,callback:o,configEquality:a};s.length;){var h=s.shift();if(c=null,h){var y="string"==typeof h;if(p.domConfig=h,p.ns=h.ns||u,!y){if(r&&h.dataset&&null!=(c=h.dataset[r])&&!h.unmatched){var g=f[c];g?(!h.retainElement&&this.performSync(p,g)&&o&&o({action:"reuseOwnElement",domConfig:h,targetElement:g,syncId:c}),h.retainElement?(g.retainElement=!0,h._element=g):g.retainElement&&(g.retainElement=!1),t.syncIdMap[c]=g,U.remove(l,g),g.isReleased=!1):(s.push(h),h.unmatched=!0);continue}h.unmatched&&delete h.unmatched}for(var v=void 0,m=0;m<l.length&&!v;m++)l[m].retainElement||(v=l[m],0===m?l.shift():l.splice(m,1));if(v)if(v.nodeType===Node.ELEMENT_NODE&&(h.tag||"div").toLowerCase()===v.tagName.toLowerCase()){var b=v.lastDomConfig,w=this.performSync(p,v);null!=c&&(t.syncIdMap[c]=v),v.isReleased=!1,w&&o&&o({action:"reuseElement",domConfig:h,lastDomConfig:b,targetElement:v,syncId:c})}else y&&v.nodeType===Node.TEXT_NODE?v.data=h:(y?this.appendTextNode(h,t,o):this.insertElement(h,t,v,c,p),v.remove());else y?this.appendTextNode(h,t,o):this.insertElement(h,t,null,c,p)}}var k=0;l.forEach((function(e){var n=e.lastDomConfig;e.retainElement?r&&e.lastDomConfig&&(t.syncIdMap[e.dataset[r]]=e):r&&(null==i||k<i)?(e.isReleased||(e.className="b-released",e.isReleased=!0,o&&o({action:"releaseElement",domConfig:n,lastDomConfig:n,targetElement:e}),n&&(n.isReleased=!0,n.className&&(n.className="b-released")),e.elementData=e.lastConfig=null),k++):(e.remove(),o&&o({action:"removeElement",domConfig:e.lastDomConfig,lastDomConfig:e.lastDomConfig,targetElement:e}))}))}}}],(n=null)&&Db(t.prototype,n),r&&Db(t,r),e}();function Fb(e){return(Fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hb(e,t){return!t||"object"!==Fb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bb(e){return(Bb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zb(e,t){return(zb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ib._$name="DomSync";function Vb(e){return(Vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gb(e,t){return!t||"object"!==Vb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ub(e){return(Ub=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qb(e,t){return(qb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xb={pageXOffset:0,pageYOffset:0};function Kb(e){return(Kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qb(e,t){return!t||"object"!==Kb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ew(e,t,n){return(ew="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tw(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tw(e){return(tw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nw(e,t){return(nw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rw="onMouseDown",ow="onMouseMove",iw="onMouseUp",aw="onDocumentClick",uw="onTouchStart",cw="onTouchMove",sw="onTouchEnd",lw="onKeyDown",fw=function(e){function t(){return Zb(this,t),Qb(this,tw(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nw(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{dragProxyCls:"b-drag-proxy",invalidCls:"b-drag-invalid",draggingCls:"b-dragging",dropPlaceholderCls:"b-drop-placeholder",dragThreshold:5,outerElement:document.body,dragWithin:null,constrain:!0,minX:null,maxX:null,minY:null,maxY:null,mode:null,isElementDraggable:null,targetSelector:null,dropTargetSelector:null,cloneTarget:!1,hideOriginalElement:!1,containers:null,ignoreSelector:null,startEvent:null,lockX:!1,lockY:!1,touchStartDelay:300,transitionDuration:300,clickSwallowDuration:50,ignoreSamePositionDrop:!0,testConfig:{transitionDuration:10,clickSwallowDuration:we.isEdge?300:50}}}}],(r=[{key:"construct",value:function(e){var n=this;ew(tw(t.prototype),"construct",this).call(this,e),n.initListeners(),"container"===n.mode?n.initContainerDrag():n.mode.startsWith("translate")&&(n.lockY?n.mode="translateX":n.lockX&&(n.mode="translateY"),n.initTranslateDrag())}},{key:"doDestroy",value:function(){this.abort(!0),ew(tw(t.prototype),"doDestroy",this).call(this)}},{key:"initListeners",value:function(){var e={element:this.outerElement,mousedown:rw,thisObj:this};we.isTouchDevice&&(e.touchstart=uw),_r.on(e)}},{key:"onPointerDown",value:function(e){var t=this,n=!1,r="touches"in e;if(t.context)t.context.awaitingFinalization||(t.onMouseUp(e),t.reset());else if(t.startEvent=e,(!t.isElementDraggable||t.isElementDraggable(e.target,e))&&(t.mode&&(n||"container"!==t.mode||(n=t.grabContainerDrag(e)),!n&&t.mode.startsWith("translate")&&(n=t.grabTranslateDrag(e))),n)){var o={element:document,thisObj:t,keydown:lw};if(r?(o.touchmove={handler:cw,passive:!1},o.touchend=o.pointerup=sw):(o.mousemove=ow,o.mouseup=iw),t.removeListeners=_r.on(o),t.dragWithin&&t.dragWithin!==t.outerElement){var i=t.dragWithin.getBoundingClientRect();t.minY=i.top,t.maxY=i.bottom,t.minX=i.left,t.maxX=i.right}}}},{key:"onTouchStart",value:function(e){var t=this;1===e.touches.length&&(t.touchStartTimer=t.setTimeout((function(){t.touchStartTimer=null}),t.touchStartDelay),t.onPointerDown(e))}},{key:"onMouseDown",value:function(e){0===e.button&&this.onPointerDown(e)}},{key:"internalMove",value:function(e){var t=this,n=t.context,r=_r.getDistanceBetween(t.startEvent,e);if(t.touchStartTimer&&r>t.dragThreshold)t.abort(!0);else if(!t.touchStartTimer&&n&&n.element&&e.target&&e.target.nodeType===Node.ELEMENT_NODE&&(n.started||r>=t.dragThreshold)){if(!n.started&&!1===t.callPreventable("dragStart",{context:n,event:e},(function(){var r=t.lockX?"vertical":t.lockY?"horizontal":"both";n.action.startsWith("translate")?t.startTranslateDrag(e):"container"===n.action&&t.startContainerDrag(e),n.started=!0,t.scrollManager&&t.scrollManager.startMonitoring({direction:r,element:t.dragWithin||t.outerElement,callback:function(e){t.context.element&&t.lastMouseMoveEvent&&(t.lastMouseMoveEvent.isScroll=!0,t.update(t.lastMouseMoveEvent,e))},thisObj:t}),document.body.classList.add("b-draghelper-active")})))return t.abort();"touchmove"===e.type&&(e.preventDefault(),e.stopImmediatePropagation()),t.update(e)}}},{key:"onTouchMove",value:function(e){this.internalMove(e)}},{key:"onMouseMove",value:function(e){this.internalMove(e)}},{key:"update",value:function(e,t){var n=this,r=n.context,o=r.dragProxy||r.element,i=e.target,a=document.scrollingElement||document.body;if("touchmove"===e.type){var u=e.changedTouches[0];i=xn.elementFromPoint(u.clientX+a.scrollLeft,u.clientY+a.scrollTop)}r.target=i,n.dropTargetSelector?r.valid=Boolean(i.closest(n.dropTargetSelector)):r.valid=!0,r.action&&("container"===r.action&&n.updateContainerProxy(e,t),r.action.startsWith("translate")&&n.updateTranslateProxy(e,t)),n.trigger("drag",{context:r,event:e}),"container"===r.action&&n.updateContainerDrag(e,t),o.classList[r.valid?"remove":"add"](n.invalidCls),e&&(n.lastMouseMoveEvent=e)}},{key:"abort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.context;t.scrollManager&&t.scrollManager.stopMonitoring(t.dragWithin||t.outerElement),n&&(n.element.getBoundingClientRect(),n.valid=!1,"container"===n.action?t.abortContainerDrag(void 0,void 0,e):t.abortTranslateDrag(void 0,void 0,e)),t.reset()}},{key:"removeListeners",value:function(){}},{key:"reset",value:function(e){document.body.classList.remove("b-draghelper-active"),this.removeListeners(),e||this.trigger("reset"),this.context=this.lastMouseMoveEvent=null}},{key:"onTouchEnd",value:function(e){this.onMouseUp(e)}},{key:"onDocumentClick",value:function(e){e.stopPropagation()}},{key:"onMouseUp",value:function(e){var t=this,n=t.context;t.removeListeners(),n&&(t.scrollManager&&t.scrollManager.stopMonitoring(t.dragWithin||t.outerElement),"container"===n.action?t.finishContainerDrag(e):n.started&&n.action.startsWith("translate")&&t.finishTranslateDrag(e),n.started?_r.on({element:document,thisObj:t,click:aw,capture:!0,expires:t.clickSwallowDuration,once:!0}):t.reset(!0))}},{key:"onKeyDown",value:function(e){"Escape"===e.key&&this.abort()}},{key:"createProxy",value:function(e){var t=e.cloneNode(!0);return t.removeAttribute("id"),t}}])&&Jb(n.prototype,r),o&&Jb(n,o),t}(Xs(Y).mixes(ae,(function(e){return function(e){function t(){return Lb(this,t),Hb(this,Bb(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zb(e,t)}(t,e),n=t,(r=[{key:"initContainerDrag",value:function(){if(this.mode||(this.mode="container"),"container"===this.mode&&!this.containers)throw new Error("Container drag mode must specify containers")}},{key:"grabContainerDrag",value:function(e){var t=this;if(!t.ignoreSelector||!xn.up(e.target,t.ignoreSelector)){var n=xn.getAncestor(e.target,t.containers,t.outerElement);if(n){var r=n.getBoundingClientRect();t.context={element:n,valid:!0,action:"container",offsetX:e.pageX-r.left,offsetY:e.pageY-r.top,originalPosition:{parent:n.parentElement,prev:n.previousElementSibling,next:n.nextElementSibling}}}return!0}return!1}},{key:"startContainerDrag",value:function(e){var t=this.context,n=t.element,r=n.cloneNode(!0),o=n.getBoundingClientRect();r.classList.add(this.dragProxyCls),r.classList.add(this.draggingCls),document.body.appendChild(r),t.dragProxy=r,r.style.width=o.width+"px",r.style.height=o.height+"px",xn.setTranslateXY(t.dragProxy,o.left,o.top),t.dragging=n,n.classList.add(this.dropPlaceholderCls)}},{key:"updateContainerDrag",value:function(e){var t=this.context;if(t.started&&t.targetElement){var n=xn.getAncestor(t.targetElement,this.containers,"b-grid"),r=t.dragging&&t.dragging.contains(document.activeElement);n&&xn.isDescendant(t.element,n)||(r&&di.suspendFocusEvents(),n&&t.valid?this.moveNextTo(n,e):this.revertPosition(),r&&di.resumeFocusEvents(),e.preventDefault())}}},{key:"finishContainerDrag",value:function(e){var t=this,n=this,r=n.context,o=r.dragging,i=r.dragProxy,a=r.valid,u=r.draggedTo,c=r.insertBefore,s=r.originalPosition;o&&(r.valid=a&&u&&(o!==c||s.parent!==u),r.finalize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.valid;!e&&t.context&&n.revertPosition(),o.classList.remove(n.dropPlaceholderCls),i.remove(),n.reset()},r.async=!1,n.trigger("drop",{context:r,event:e}),r.async?r.awaitingFinalization=!0:r.finalize())}},{key:"abortContainerDrag",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.context;o.dragging&&(o.dragging.classList.remove(r.dropPlaceholderCls),o.dragProxy.remove(),r.context={}),n||r.trigger(e?"drop":"abort",{context:o,event:t})}},{key:"updateContainerProxy",value:function(e){var t,n=this,r=n.context,o=r.dragProxy,i=e.pageX-r.offsetX,a=e.pageY-r.offsetY;if("number"==typeof n.minX&&(i=Math.max(n.minX,i)),"number"==typeof n.maxX&&(i=Math.min(n.maxX-o.offsetWidth,i)),"number"==typeof n.minY&&(a=Math.max(n.minY,a)),"number"==typeof n.maxY&&(a=Math.min(n.maxY-o.offsetHeight,a)),n.lockX?xn.setTranslateY(o,a):n.lockY?xn.setTranslateX(o,i):xn.setTranslateXY(o,i,a),"touchmove"===e.type){var u=e.changedTouches[0];t=document.elementFromPoint(u.clientX,u.clientY)}else t=e.target;r.targetElement=t}},{key:"moveNextTo",value:function(e,t){var n=this.context,r=n.dragging,o=e.parentElement;if(e!==r){var i=e.getBoundingClientRect().left+e.offsetWidth/2;t.pageX<i?(o.insertBefore(r,e),n.insertBefore=e):e.nextElementSibling?e.nextElementSibling!==r?(n.insertBefore=e.nextElementSibling,o.insertBefore(r,e.nextElementSibling)):n.insertBefore||r.parentElement.lastElementChild===r||(n.insertBefore=e.nextElementSibling):(o.appendChild(r),n.insertBefore=null),n.draggedTo=o}}},{key:"revertPosition",value:function(){var e=this.context,t=e.originalPosition;t.next?t.next&&t.next.previousSibling===e.dragging||!t.next&&e.dragging===t.parent.lastChild||t.parent.insertBefore(e.dragging,t.next):t.parent.appendChild(e.dragging),e.draggedTo=null}}])&&Nb(n.prototype,r),o&&Nb(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return $b(this,t),Gb(this,Ub(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qb(e,t)}(t,e),n=t,(r=[{key:"initTranslateDrag",value:function(){var e=this;!e.isElementDraggable&&e.targetSelector&&(e.isElementDraggable=function(t){return xn.up(t,e.targetSelector)})}},{key:"grabTranslateDrag",value:function(e){var t=this.getTarget(e);return!!t&&(this.context={valid:!0,action:this.mode,element:t,startPageX:e.pageX,startPageY:e.pageY,startClientX:e.clientX,startClientY:e.clientY},!0)}},{key:"getTarget",value:function(e){return xn.up(e.target,this.targetSelector)}},{key:"startTranslateDrag",value:function(e){var t=this,n=t.context,r=n.relatedElements,o=n.dragProxy||n.element;if(o&&!n.started){var i=o,a=o.parentElement,u=t.dragWithin=t.dragWithin||t.cloneTarget&&document.body,c=t.outerElement;if(t.cloneTarget){var s=xn.getOffsetX(o,u),l=xn.getOffsetY(o,u),f=o.offsetWidth,d=o.offsetHeight;o=this.createProxy(o),xn.setTranslateXY(o,s,l),o.style.width="".concat(f,"px"),o.style.height="".concat(d,"px"),o.classList.add(t.dragProxyCls),u.appendChild(o),i.classList.add("b-drag-original"),t.hideOriginalElement&&i.classList.add("b-hidden")}Object.assign(t.context,{element:o,grabbed:i,grabbedParent:a,grabbedNextSibling:o.nextElementSibling,elementStartX:xn.getTranslateX(o),elementStartY:xn.getTranslateY(o),elementX:xn.getOffsetX(o,u||c),elementY:xn.getOffsetY(o,u||c),scrollX:0,scrollY:0,scrollManagerElementContainsDragProxy:!t.cloneTarget||u===c}),o.classList.add(t.draggingCls),u&&(n.parentElement=o.parentElement,u!==o.parentElement&&u.appendChild(o),t.updateTranslateProxy(e)),r&&r.forEach((function(e){e.classList.add(t.draggingCls)}))}}},{key:"applyConstraints",value:function(e,t,n){var r=this,o=r.dragWithin,i=o===document.body?window:Xb,a=i.pageXOffset,u=i.pageYOffset;return o&&r.constrain&&(t<0&&(t=0),t+e.offsetWidth>o.scrollWidth&&(t=o.scrollWidth-e.offsetWidth),n<0&&(n=0),n+e.offsetHeight>o.scrollHeight&&(n=o.scrollHeight-e.offsetHeight)),"number"==typeof r.minX&&(t=Math.max(r.minX+a,t)),"number"==typeof r.maxX&&(t=Math.min(r.maxX+a,t)),"number"==typeof r.minY&&(n=Math.max(r.minY+u,n)),"number"==typeof r.maxY&&(n=Math.min(r.maxY+u,n)),{constrainedX:t,constrainedY:n}}},{key:"updateTranslateProxy",value:function(e,t){var n=this,r=n.mode,o=n.lockX,i=n.lockY,a=n.context,u=a.dragProxy||a.element,c=a.relatedElements,s=a.relatedElDragFromPos;a.scrollManagerElementContainsDragProxy&&t&&(a.scrollX=t.scrollRelativeLeft,a.scrollY=t.scrollRelativeTop),a.pageX=e.pageX,a.pageY=e.pageY,a.clientX=e.clientX,a.clientY=e.clientY;var l=a.elementStartX+e.pageX-a.startPageX+a.scrollX,f=a.elementStartY+e.pageY-a.startPageY+a.scrollY,d=n.applyConstraints(u,l,f),p=d.constrainedX,h=d.constrainedY;if("translateXY"!==r||o||i?"translateX"===r||i?xn.setTranslateX(u,p):("translateY"===r||o)&&xn.setTranslateY(u,h):xn.setTranslateXY(u,p,h),c){var y=o||"translateY"===r?0:p-a.elementStartX,g=i||"translateX"===r?0:h-a.elementStartY;c.forEach((function(e,t){var n=Wb(s[t],2),r=n[0],o=n[1];xn.setTranslateXY(e,r+y,o+g)}))}a.newX=p,a.newY=h}},{key:"finishTranslateDrag",value:function(e){var t=this,n=t.context,r=n.newX!==n.elementStartX,o=n.newY!==n.elementStartY,i=n.dragProxy||n.element,a=n.relatedElements;function u(){i.classList.remove(t.invalidCls),i.classList.remove(t.draggingCls),a&&a.forEach((function(e){e.classList.remove(t.invalidCls),e.classList.remove(t.draggingCls)})),i.classList.contains("b-aborting")||(t.hideOriginalElement&&n.grabbed.classList.remove("b-hidden"),n.grabbed.classList.remove("b-drag-original"))}if(!t.ignoreSamePositionDrop||"translateY"!==t.mode&&r||"translateX"!==t.mode&&o){if(!1===n.valid)t.abortTranslateDrag(!0,e);else{var c=tr.from(t.dragWithin||t.outerElement);!t.minX&&e.pageX<c.left||!t.maxX&&e.pageX>c.right||!t.minY&&e.pageY<c.top||!t.maxY&&e.pageY>c.bottom?(n.valid=!1,t.abortTranslateDrag(!0,e)):(n.finalize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.valid;n.asyncCleanup&&u(),!e&&t.context?t.abortTranslateDrag(!0,null,!0):(t.cloneTarget||n.dragProxy)&&i.remove(),t.reset()},n.async=!1,t.trigger("drop",{context:n,event:e}),n.async?n.awaitingFinalization=!0:n.finalize())}n.asyncCleanup||u()}else t.abortTranslateDrag(!1,e)}},{key:"abortTranslateDrag",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.context,i=o.relatedElements,a=o.relatedElStartPos,u=o.grabbed,c=o.dragProxy||o.element,s=r.cloneTarget&&r.hideOriginalElement?u:c,l=o.elementStartX,f=o.elementStartY;if(c&&o.started){if(!r.cloneTarget&&r.dragWithin&&r.dragWithin!==o.grabbedParent&&o.grabbedParent.insertBefore(c,o.grabbedNextSibling),u.classList.remove("b-hidden"),r.cloneTarget){if(r.hideOriginalElement){var d=xn.getTranslateXY(u),p=Wb(d,2);l=p[0],f=p[1],xn.alignTo(u,c),s.getBoundingClientRect()}c.remove()}s.classList.add("b-aborting"),"translateXY"!==r.mode||r.lockX||r.lockY||(xn.setTranslateXY(s,l,f),i&&i.forEach((function(e,t){e.classList.add("b-aborting"),xn.setTranslateXY(e,a[t][0],a[t][1])}))),("translateX"===r.mode||r.lockY)&&(xn.setTranslateX(s,l),i&&i.forEach((function(e,t){e.classList.add("b-aborting"),xn.setTranslateX(e,a[t][0])}))),("translateY"===r.mode||r.lockX)&&(xn.setTranslateY(s,f),i&&i.forEach((function(e,t){e.classList.add("b-aborting"),xn.setTranslateY(e,a[t][1])}))),r.setTimeout((function(){s.classList.remove("b-aborting"),u.classList.remove("b-dragging"),u.classList.remove("b-drag-original"),r.cloneTarget||(i&&i.forEach((function(e,t){e.classList.remove("b-aborting")})),c.classList.remove("b-aborting"),c.classList.remove(r.draggingCls),c.classList.remove(r.invalidCls))}),r.transitionDuration,void 0,!0),n||r.trigger(e?"drop":"abort",{context:o,event:t})}r.reset()}}])&&Yb(n.prototype,r),o&&Yb(n,o),t}(Wr(e||Y))})));function dw(e){return(dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yw(e,t){return!t||"object"!==dw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gw(e,t,n){return(gw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vw(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function vw(e){return(vw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mw(e,t){return(mw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}fw._$name="DragHelper";var bw="onMouseDown",ww="onMouseMove",kw="onMouseUp",Sw="onDocumentClick",Ow="onTouchStart",Ew="onTouchMove",Cw="onTouchEnd",xw="onKeyDown",_w=function(e){function t(){return pw(this,t),yw(this,vw(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mw(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{resizingCls:"b-resizing",dragThreshold:5,handleSize:10,dynamicHandleSize:null,reservedSpace:10,touchHandleSize:30,minWidth:1,maxWidth:0,minHeight:1,maxHeight:0,outerElement:document.body,scroller:null,allowResize:null,dragWithin:null,isElementResizable:null,targetSelector:null,leftHandle:!0,rightHandle:!0,topHandle:!0,bottomHandle:!0,handleSelector:null,handleContainerSelector:null,startEvent:null,grab:null,invalidCls:"b-resize-invalid",handleVisibilityThreshold:null,skipTranslate:!1,direction:"horizontal"}}}],(r=[{key:"construct",value:function(e){var n=this;gw(vw(t.prototype),"construct",this).call(this,e),!n.handleSelector&&we.isTouchDevice&&(n.handleSize=n.touchHandleSize),n.handleVisibilityThreshold=n.handleVisibilityThreshold||2*n.handleSize,n.initListeners(),n.initResize()}},{key:"doDestroy",value:function(){this.abort(!0),gw(vw(t.prototype),"doDestroy",this).call(this)}},{key:"initResize",value:function(){var e=this;if(!e.isElementResizable&&e.targetSelector&&(e.isElementResizable=function(t){return xn.up(t,e.targetSelector)}),e.grab){var t=e.grab,n=t.edge,r=t.element,o=t.event;e.startEvent=o,e.context={element:r,edge:n,valid:!0,async:!1,elementStartX:xn.getTranslateX(r)||r.offsetLeft,elementStartY:xn.getTranslateY(r)||r.offsetTop,newX:xn.getTranslateX(r)||r.offsetLeft,newY:xn.getTranslateY(r)||r.offsetTop,elementWidth:r.offsetWidth,elementHeight:r.offsetHeight,startX:o.clientX+e.scrollLeft,startY:o.clientY+e.scrollTop,started:!0,finalize:function(){return e.reset&&e.reset()}},r.classList.add(e.resizingCls),e.internalStartResize(e.isTouch)}}},{key:"initListeners",value:function(){var e=this,t={element:e.outerElement,mousedown:bw,thisObj:e};we.isTouchDevice?t.touchstart=Ow:e.handleSelector||(t.mousemove={handler:ww,delegate:e.targetSelector},t.mouseleave={handler:"onMouseLeaveTarget",delegate:e.targetSelector,capture:!0}),e.removeListeners=_r.on(t)}},{key:"removeListeners",value:function(){}},{key:"internalStartResize",value:function(e){var t=this,n={element:document,keydown:xw,thisObj:t};e?(n.touchmove=Ew,n.touchend=n.pointerup=Cw):(n.mousemove=ww,n.mouseup=kw),t.removeDragListeners=_r.on(n),t.scrollManager&&t.scrollManager.startMonitoring({direction:t.direction,element:t.dragWithin||t.outerElement,callback:function(e){return t.context&&t.context.element&&t.lastMouseMoveEvent&&t.update(t.lastMouseMoveEvent,e)},thisObj:t})}},{key:"removeDragListeners",value:function(){}},{key:"reset",value:function(){this.removeDragListeners(),this.context=null}},{key:"onPointerDown",value:function(e,t){var n=this;n.startEvent=t,n.isElementResizable&&!n.isElementResizable(t.target,t)||n.grabResizeHandle(e,t)&&(t.stopImmediatePropagation(),n.internalStartResize(e))}},{key:"onTouchStart",value:function(e){e.touches.length>1||this.onPointerDown(!0,e)}},{key:"onMouseDown",value:function(e){0===e.button&&this.onPointerDown(!1,e)}},{key:"internalMove",value:function(e,t){var n=this,r=n.context;r&&r.element&&(r.started||_r.getDistanceBetween(n.startEvent,t)>=n.dragThreshold)?(r.started||(n.trigger("resizeStart",{context:r,event:t}),r.started=!0),n.update(t)):e||n.handleSelector||n.checkResizeHandles(t)}},{key:"onTouchMove",value:function(e){this.internalMove(!0,e)}},{key:"onMouseMove",value:function(e){this.internalMove(!1,e)}},{key:"internalEnd",value:function(e,t){var n=this,r=n.context;n.removeDragListeners(),r&&(n.scrollManager&&n.scrollManager.stopMonitoring(n.dragWithin||n.outerElement),n.finishResize(t),!n.context||we.isFirefox||we.isSafari||_r.on({element:document,thisObj:n,click:Sw,capture:!0,once:!0}))}},{key:"onTouchEnd",value:function(e){this.internalEnd(!0,e)}},{key:"onMouseUp",value:function(e){this.internalEnd(!1,e)}},{key:"onDocumentClick",value:function(e){e.stopPropagation()}},{key:"onKeyDown",value:function(e){"Escape"===e.key&&this.abort()}},{key:"update",value:function(e){var t=this,n=t.context,r=tr.from(t.outerElement.parentElement);n.currentX=Math.max(Math.min(e.clientX,r.right-1),r.x)+t.scrollLeft,n.currentY=Math.max(Math.min(e.clientY,r.bottom-1),r.y)+t.scrollTop,t.updateResize(e),t.trigger("resizing",{context:n,event:e}),n.element.classList[!1===n.valid?"add":"remove"](t.invalidCls),e&&(t.lastMouseMoveEvent=e)}},{key:"abort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;t.scrollManager&&t.scrollManager.stopMonitoring(t.dragWithin||t.outerElement),t.context&&t.abortResize(null,e)}},{key:"grabResizeHandle",value:function(e,t){var n=this;if(n.allowResize&&!n.allowResize(t.target,t))return!1;var r=n.handleSelector,o="touchstart"===t.type?t.changedTouches[0]:t,i=o.clientX,a=o.clientY,u=n.targetSelector?xn.up(t.target,n.targetSelector):t.target;if(u){var c;if(r){if(!t.target.matches(r))return!1;c="horizontal"===n.direction?t.pageX<xn.getPageX(u)+u.offsetWidth/2?"left":"right":t.pageY<xn.getPageY(u)+u.offsetHeight/2?"top":"bottom"}else if("horizontal"===n.direction?n.overLeftHandle(t,u)?c="left":n.overRightHandle(t,u)&&(c="right"):n.overTopHandle(t,u)?c="top":n.overBottomHandle(t,u)&&(c="bottom"),!c)return n.context=null,!1;if("touchstart"===t.type&&t.preventDefault(),!1!==n.trigger("beforeResizeStart",{element:u,event:t}))return n.context={element:u,edge:c,valid:!0,async:!1,direction:n.direction,isTouch:e,elementStartX:xn.getTranslateX(u)||u.offsetLeft,elementStartY:xn.getTranslateY(u)||u.offsetTop,newX:xn.getTranslateX(u)||u.offsetLeft,newY:xn.getTranslateY(u)||u.offsetTop,elementWidth:u.offsetWidth,elementHeight:u.offsetHeight,startX:i+n.scrollLeft,startY:a+n.scrollTop,finalize:function(){return n.reset&&n.reset()}},u.classList.add(n.resizingCls),!0}return!1}},{key:"checkResizeHandles",value:function(e){var t=this,n=t.targetSelector?xn.up(e.target,t.targetSelector):e.target;!n||t.allowResize&&!t.allowResize(e.target,e)?t.currentElement&&t.unHighlightHandle():(t.currentElement=t.handleContainerSelector?xn.up(e.target,t.handleContainerSelector):e.target,t.currentElement&&(("horizontal"===t.direction?t.overLeftHandle(e,n)||t.overRightHandle(e,n):t.overTopHandle(e,n)||t.overBottomHandle(e,n))?t.highlightHandle():t.unHighlightHandle()))}},{key:"onMouseLeaveTarget",value:function(e){var t=this;t.currentElement=t.handleContainerSelector?xn.up(e.target,t.handleContainerSelector):e.target,t.currentElement&&t.unHighlightHandle()}},{key:"updateResize",value:function(e){var t=this,n=t.context;t.allowEdgeSwitch&&("horizontal"===t.direction?n.edge=n.currentX>n.startX?"right":"left":n.edge=n.currentY>n.startY?"bottom":"top");var r=n.currentX-n.startX,o=n.currentY-n.startY,i=xn.getExtremalSizePX(n.element,"minWidth")||t.minWidth,a=xn.getExtremalSizePX(n.element,"maxWidth")||t.maxWidth,u=xn.getExtremalSizePX(n.element,"minHeight")||t.minHeight,c=xn.getExtremalSizePX(n.element,"maxHeight")||t.maxHeight,s="right"===n.edge||"bottom"===n.edge?1:-1,l=n.elementWidth+r*s,f=Math.max(i,l),d=n.elementHeight+o*s,p=Math.max(u,d);a>0&&(f=Math.min(f,a)),c>0&&(p=Math.min(p,c)),n.element.style.flex&&(n.element.style.flex=""),"horizontal"===t.direction?(n.element.style.width=Math.abs(f)+"px",n.newWidth=f,"left"===n.edge||f<0?(n.newX=Math.max(Math.min(n.elementStartX+n.elementWidth-t.minWidth,n.elementStartX+r),0),t.skipTranslate||xn.setTranslateX(n.element,n.newX)):"right"===n.edge&&t.allowEdgeSwitch&&!t.skipTranslate&&xn.setTranslateX(n.element,n.elementStartX)):(n.element.style.height=Math.abs(p)+"px",n.newHeight=p,"top"===n.edge||p<0?(n.newY=Math.max(Math.min(n.elementStartY+n.elementHeight-t.minHeight,n.elementStartY+o),0),t.skipTranslate||xn.setTranslateY(n.element,n.newY)):"bottom"===n.edge&&t.allowEdgeSwitch&&!t.skipTranslate&&xn.setTranslateY(n.element,n.elementStartY))}},{key:"finishResize",value:function(e){var t=this.context,n={context:t,event:e};t.element.classList.remove(this.resizingCls);var r=!1;r="horizontal"===this.direction?t.newWidth&&t.newWidth!==t.elementWidth:t.newHeight&&t.newHeight!==t.elementHeight,this.trigger(r?"resize":"cancel",n),t.async||t.finalize()}},{key:"abortResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n.context;r.element.classList.remove(n.resizingCls),"horizontal"===n.direction?(xn.setTranslateX(r.element,r.elementStartX),r.element.style.width=r.elementWidth+"px"):(xn.setTranslateY(r.element,r.elementStartY),r.element.style.height=r.elementHeight+"px"),!t&&n.trigger("cancel",{context:r,event:e}),n.isDestroyed||n.reset()}},{key:"highlightHandle",value:function(){var e=this,t=e.targetSelector?xn.up(e.currentElement,e.targetSelector):e.currentElement;e.currentElement.classList.add("b-resize-handle"),t.classList.add("b-over-resize-handle")}},{key:"unHighlightHandle",value:function(){var e=this,t=e.targetSelector?xn.up(e.currentElement,e.targetSelector):e.currentElement;t&&t.classList.remove("b-over-resize-handle"),e.currentElement.classList.remove("b-resize-handle"),e.currentElement=null}},{key:"overAnyHandle",value:function(e,t){return this.overStartHandle(e,t)||this.overEndHandle(e,t)}},{key:"overStartHandle",value:function(e,t){return"horizontal"===this.direction?this.overLeftHandle(e,t):this.overTopHandle(e,t)}},{key:"overEndHandle",value:function(e,t){return"horizontal"===this.direction?this.overRightHandle(e,t):this.overBottomHandle(e,t)}},{key:"getDynamicHandleSize",value:function(e,t){var n=e?2:1,r=this.handleSize;return this.dynamicHandleSize&&r*n>t-this.reservedSpace?Math.max((t-this.reservedSpace)/n,1):r}},{key:"overLeftHandle",value:function(e,t){var n=this,r=t.offsetWidth;if(n.leftHandle&&(r>=n.handleVisibilityThreshold||n.dynamicHandleSize)){var o=tr.from(t);return o.width=n.getDynamicHandleSize(n.rightHandle,r),o.contains(_r.getPagePoint(e))}return!1}},{key:"overRightHandle",value:function(e,t){var n=this,r=t.offsetWidth;if(n.rightHandle&&(r>=n.handleVisibilityThreshold||n.dynamicHandleSize)){var o=tr.from(t);return o.x=o.right-n.getDynamicHandleSize(n.leftHandle,r),o.contains(_r.getPagePoint(e))}return!1}},{key:"overTopHandle",value:function(e,t){var n=this,r=t.offsetHeight;if(n.topHandle&&(r>=n.handleVisibilityThreshold||n.dynamicHandleSize)){var o=tr.from(t);return o.height=n.getDynamicHandleSize(n.bottomHandle,r),o.contains(_r.getPagePoint(e))}return!1}},{key:"overBottomHandle",value:function(e,t){var n=this,r=t.offsetHeight;if(n.bottomHandle&&(r>=n.handleVisibilityThreshold||n.dynamicHandleSize)){var o=tr.from(t);return o.y=o.bottom-n.getDynamicHandleSize(n.bottomHandle,r),o.contains(_r.getPagePoint(e))}return!1}},{key:"scrollLeft",get:function(){return this.scroller?this.scroller.x:this.outerElement.scrollLeft}},{key:"scrollTop",get:function(){return this.scroller?this.scroller.y:this.outerElement.scrollTop}}])&&hw(n.prototype,r),o&&hw(n,o),t}(ae(Y));function jw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}_w._$name="ResizeHelper";var Dw=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.random100=[46,2,36,46,54,59,18,20,71,55,88,98,13,61,61,40,2,15,3,32,51,45,64,25,81,85,54,13,57,49,64,22,81,94,0,62,17,7,11,2,33,99,85,26,83,83,96,26,20,89,91,38,26,13,11,79,32,30,5,51,70,7,5,56,58,77,37,89,40,80,78,59,26,36,8,51,60,23,86,5,11,96,64,94,87,64,4,78,17,85,35,0,90,86,23,55,53,9,35,59,29,2,64,42,8,49,43,73,6,53,38,9,39,31,32,40,49,13,78,68,20,99,24,78,35,91,73,46,67,76,89,69,30,69,25,3,4,55,1,65,66,76,83,19,67,1,95,24,54,45,56,40,67,92,72,4,69,8,47,50,27,2,38,9,14,83,12,14,62,95,22,47,35,18,38,14,86,64,68,61,52,69,39,93,20,73,32,52,74,6,56,68,99,29,24,92,40,67,6,72,31,41,91,53,80,55,33,97,97,99,18,20,5,27,82,84,61,78,27,67,7,42,75,95,91,25,63,21,70,36,46,0,1,45,84,6,86,15,10,62,96,94,10,23,93,83,94,47,5,29,29,52,51,37,77,96,43,72,43,14,54,14,72,52,4,39,15,26,68,28,25,76,60,50,22,40,72,74,68,58,8,48,40,62,52,24,9,26,47,44,49,96,7,77,90,45,76,47,5,86,1,36,18,42,19,90,34,23,70,32,69,79,0,99,57,80,72,21,19,72,85,68,4,40,86,62,0,63,4,11,69,31,78,31,21,78,29,84,13,53,57,10,26,50,24,30,90,42,51,96,93,21,99,23,81,0,89,43,86,63,93,19,54,71,92,36,4,95,37,99,60,29,23,50,68,95,57,95,77,53,99,78,75,12,92,47,23,14,0,41,98,11,34,64,26,90,50,23,38,31,74,76,16,76,66,23,22,72,48,50,20,36,37,58,5,43,49,64,81,30,8,21,98,75,60,17,50,42,27,38,90,74,45,68,67,27,31,15,58,76,41,99,23,98,53,98,56,19,79,2,4,38,96,24,65,51,43,42,41,60,46,7,90,65,3,27,63,99,51,44,86,1,54,40,15,74,3,81,51,63,87,79,84,72,22,38,96,95,33,41,21,99,21,69,7,49,40,52,41,6,91,19,76,40,54,17,33,11,11,0,1,32,94,33,13,18,45,7,85,61,42,54,45,72,78,96,17,9,80,87,41,96,66,0,8,59,18,21,2,28,64,75,97,32,80,86,97,97,55,2,73,75,11,89,67,58,70,76,12,46,64,17,22,97,25,35,93,57,82,46,57,61,31,74,27,4,32,85,53,86,53,53,42,5,28,50,65,63,70,61,73,37,13,80,7,34,22,3,26,6,62,78,12,56,87,41,58,64,31,27,45,35,18,66,62,43,89,69,94,93,33,74,2,43,85,37,82,41,74,9,15,44,33,42,65,19,1,49,78,12,29,9,78,7,55,12,45,40,33,16,86,14,52,16,73,76,0,98,75,91,78,46,99,95,90,69,78,45,62,55,37,88,49,77,27,83,38,73,39,1,75,40,65,83,54,95,7,73,4,30,26,36,89,21,5,95,11,14,87,45,36,21,77,55,5,66,51,98,48,62,74,58,23,82,30,28,19,53,89,76,98,8,34,70,28,54,16,52,35,93,54,54,72,49,18,93,72,90,71,73,15,60,38,80,76,53,70,39,69,25,5,31,61,46,6,54,34,31,52,33,36,79,76,44,29,28,38,1,66,2,90,91,1,76,78,31,55,37,71,2,3,38,85,0,95,42,2,39,57,87,61,77,98,2,24,80,48,27,47,71,15,7,49,60,86,3,2,29,38,54,36,59,83,27,47,9,36,42,8,73,85,9,16,73,60,39,12,43,25,23,29,28,47,40,77,20,89,22,30,41,59,96,19,56,20,76,73,39,46,72,40,47,37,52,29,79,37,39,50,41,87,66,17,75,31,45,26,88,70,11,90,40,74,9,32,65,72,61,6,93,54,15,84,22,99,47,10,96,4,84,19,85,73,45,25,16,8,94,99,39,28,26,68,87,48,1,65,86,46,86,7,60,82,45,75,38,56,41,35,30,86,91,97,85,45,5,14,69,85,96,37,18,26,16,38,16,1,44,94,85,58,60,20,5,47,52,41,50,71,43,42,67,64,38,65,83,99,78,96,33,20,98,24,6,2,25,16,16,44,63,24,68,56,49,91,15,59,99,27,43,34,28,36,45,1,10,19,54,26,75,17,88,96,63,24,71,93,72,97,66,87,18,86],this.randomCache={},this.rndIndex=0}var t,n,r;return t=e,(n=[{key:"nextRandom",value:function(e){var t,n=this.randomCache;return n[e]?t=n[e]:(t=this.random100.filter((function(t){return t<e})),n[e]=t),t[this.rndIndex++%t.length]}},{key:"reset",value:function(){this.rndIndex=0}},{key:"fromArray",value:function(e){return e[this.nextRandom(e.length)]}}])&&jw(t.prototype,n),r&&jw(t,r),e}();function Rw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Dw._$name="RandomGenerator";var Pw=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"reset",value:function(){this.rnd.reset(),this.rndTime.reset(),this.rndRating.reset()}},{key:"generate",value:regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m,b,w,k,S=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S.length>1&&void 0!==S[1]&&S[1],r=S.length>2&&void 0!==S[2]?S[2]:1,i=(o=this).rnd,a=o.rndTime,u=o.rndRating,c=o.firstNames,s=o.surNames,l=o.teams,f=o.foods,d=o.colors,p=o.cities,h=0;case 4:if(!(h<t)){e.next=12;break}return y=i.fromArray(c),g=i.fromArray(s),v="".concat(y," ").concat(String.fromCharCode(65+h%25)," ").concat(g),m=i.nextRandom(60)+1,b=new Date(2019,0,m),w=new Date(2019,0,m+i.nextRandom(30)+2),k={id:h+r,title:"Row "+h,name:v,firstName:y,surName:g,city:i.fromArray(p),team:i.fromArray(p)+" "+i.fromArray(l),age:10+i.nextRandom(80),food:i.fromArray(f),color:i.fromArray(d),score:10*i.nextRandom(100),rank:i.nextRandom(100)+1,start:b,finish:w,time:xt.getTime(a.nextRandom(24),5*a.nextRandom(12)),percent:i.nextRandom(100),done:i.nextRandom(100)<50,rating:u.nextRandom(5),relatedTo:Math.min(t-1,h+r+i.nextRandom(10))},n&&(k.rowHeight=5*i.nextRandom(!0===n?20:n)+20),e.next=9,k;case 9:h++,e.next=4;break;case 12:case"end":return e.stop()}}),e,this)}))},{key:"generateData",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];o&&this.reset();for(var i=[],a=e.overrideRowCount?e.overrideRowCount:t,u=this.generate(a,n,r),c=0;c<a;c++)i.push(u.next().value);return i}}],n&&Rw(t.prototype,n),r&&Rw(t,r),e}();function Tw(e){return(Tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iw(e,t){return!t||"object"!==Tw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fw(e,t,n){return(Fw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lw(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Lw(e){return(Lw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nw(e,t){return(Nw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.assign(Pw,{rnd:new Dw,rndTime:new Dw,rndRating:new Dw,cities:["Stockholm","Barcelona","Paris","Dubai","New York","San Francisco","Washington","Moscow"],firstNames:["Mike","Linda","Don","Karen","Doug","Jenny","Daniel","Melissa","John","Jane","Theo","Lisa","Adam","Mary","Barbara","James","David"],surNames:["McGregor","Ewans","Scott","Smith","Johnson","Adams","Williams","Brown","Jones","Miller","Davis","More","Wilson","Taylor","Anderson","Thomas","Jackson"],teams:["Lions","Eagles","Tigers","Horses","Dogs","Cats","Panthers","Rats","Ducks","Cougars","Hens","Roosters"],foods:["Pancake","Burger","Fish n chips","Carbonara","Taco","Salad","Bolognese","Mac n cheese","Waffles"],colors:["Blue","Green","Red","Yellow","Pink","Purple","Orange","Teal","Black"]}),Pw._$name="DataGenerator";var Hw=["action","target","to","deltaX","deltaY","x","y","text"],Bw=function(e){function t(){return Aw(this,t),Iw(this,Lw(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nw(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{repeat:!0,outerElement:document.body,callOnFunctions:!0}}}],(r=[{key:"construct",value:function(e){Fw(Lw(t.prototype),"construct",this).call(this,e);var n=this;n.widget&&(n.outerElement=n.widget.element,n.widget.playingDemo=!0),_r.playingDemo=!0,Object.assign(n,{prevTarget:null,currentStep:0,mouse:xn.createElement({parent:n.outerElement,tag:"div",className:"simulated-mouse"}),timeoutId:null,innerIntervalId:null,mouseOutElements:[]}),n.intervalId=n.setInterval(n.nextStep.bind(n),1e3),n.outerElement.classList.add("b-playing-demo"),n.outerElement.addEventListener("click",(function(e){e.isTrusted&&n.abort()}))}},{key:"doDestroy",value:function(){this.abort()}},{key:"abort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;t.mouse.style.top="-100px",t.clearInterval(t.intervalId),t.timeoutId&&t.clearTimeout(t.timeoutId),t.innerIntervalId&&t.clearInterval(t.innerIntervalId),t.outerElement.classList.remove("b-playing-demo"),t.widget&&(t.widget.playingDemo=!1),_r.playingDemo=!1,t.trigger(e?"done":"abort")}},{key:"triggerEvent",value:function(e,t,n){if(!e)return null;var r;if(t.startsWith("mouse")){var o=this.mouse.getBoundingClientRect();r=new MouseEvent(t,Object.assign({view:window,bubbles:!0,cancelable:!0,clientX:o.left,clientY:o.top},n||{}))}else(r=document.createEvent("Event")).initEvent(t,!0,!1);return e.dispatchEvent(r),r}},{key:"handleMouseMove",value:function(e,t){var n=this,r=n.mouse;r.classList.add("quick"),n.mouseDown&&r.classList.add("drag");var o=tr.from(r,n.outerElement),i=o.x,a=o.y,u=0,c=0;if(e.to)if("string"==typeof e.to){var s=n.outerElement.querySelector(e.to);if(s){var l=tr.from(s,n.outerElement),f=l.x+l.width/2,d=l.y+l.height/2;u=(f-i)/10,c=(d-a)/10}}else e.to.x?u=(e.to.x-i)/10:(u=e.to[0]/10,c=e.to[1]/10);else e.deltaX?u=e.deltaX/10:e.x&&(u=(e.x-i)/10);e.deltaY&&(c=e.deltaY/10);var p=0;n.innerIntervalId=n.setInterval((function(){if(!n.shouldPause){9==p++&&(clearInterval(n.innerIntervalId),e.then&&e.then());var t=i+u*p,o=a+c*p;r.style.left=t+"px",r.style.top=o+"px";var s=r.getBoundingClientRect(),l=s.left,f=s.top,d=document.elementFromPoint(l,f);d!==n.prevTarget&&(n.prevTarget&&(n.mouseOutElements.push(n.prevTarget),xn.isDescendant(n.mouseOutElements[0],d)||(n.mouseOutElements.forEach((function(e){return n.triggerEvent(e,"mouseout")})),n.mouseOutElements.length=0)),n.prevTarget=d,n.triggerEvent(d,"mouseover")),n.triggerEvent(d,e.action,{clientX:l,clientY:f})}}),50)}},{key:"getTarget",value:function(e){var t=e.target;return t?"function"==typeof t?t(e):document.querySelector(t):this.prevTarget||this.outerElement}},{key:"normalizeStep",value:function(e){if(e.action)return"function"==typeof e.action?e.action(e):e;if("function"==typeof e)return e(),e;for(var t in e)e.hasOwnProperty(t)&&!Hw.includes(t)&&(e.action=t.toLowerCase(),e.to=e[t]);return e.target||"string"!=typeof e.to&&"function"!=typeof e.to||(e.target=e.to),e}},{key:"nextStep",value:function(){var e=this;if(!e.shouldPause){if(e.currentStep===e.steps.length){if(!e.repeat)return e.abort(!0);e.currentStep=0}0===e.currentStep&&e.trigger("initialize");var t=e.mouse,n=e.normalizeStep(e.steps[e.currentStep++]),r=e.getTarget(n),o=n.action;if(r&&o)if(t.className="simulated-mouse","mousemove"===o)e.handleMouseMove(n,r);else{if(r!==e.prevTarget){var i=tr.from(r,e.outerElement);t.style.left=i.x+i.width/2+"px",t.style.top=i.y+i.height/2+"px"}"mousedown"===o&&(e.mouseDown=!0),"mouseup"===o&&(e.mouseDown=!1),e.timeoutId=e.setTimeout((function(){if(e.prevTarget=r,t.classList.add(o),"type"===o){var i=ye.fromElement(r),a=n.text.split("|");i.value=a[1===a.length||i.value!=a[0]?0:1]}else e.triggerEvent(r,o)}),"type"===o?100:550)}}}},{key:"isScrolling",get:function(){var e=this.outerElement.getBoundingClientRect(),t=this.lastTop&&e.top!==this.lastTop;return this.lastTop=e.top,t}},{key:"isInView",get:function(){var e=this.outerElement.getBoundingClientRect();return e.top<window.innerHeight&&e.bottom>0}},{key:"shouldPause",get:function(){return!this.isInView||this.isScrolling||document.hidden||!document.hasFocus()}}])&&Mw(n.prototype,r),o&&Mw(n,o),t}(ae(Wr()));function zw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Bw._$name="DemoBot";var Vw=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"init",value:function(){var e=["fullscreenEnabled","requestFullscreen","exitFullscreen","fullscreenElement"],t=function(t){return e.map((function(e){var n=t+A.capitalizeFirstLetter(e);return"moz"===t&&(n=n.replace("screen","Screen"),"mozCancelFullScreen"in document&&"exitFullscreen"===e&&(n="mozCancelFullScreen")),n}))};this.functions="fullscreenEnabled"in document&&e||"webkitFullscreenEnabled"in document&&t("webkit")||"mozFullScreenEnabled"in document&&t("moz")||"msFullscreenEnabled"in document&&t("ms")||[];var n=["fullscreenchange","fullscreenerror"],r=function(e){return n.map((function(t){return e+A.capitalizeFirstLetter(t)}))};this.events="fullscreenEnabled"in document&&n||"webkitFullscreenEnabled"in document&&r("webkit")||"mozFullscreenEnabled"in document&&r("moz")||"msFullscreenEnabled"in document&&["MSFullscreenChange","MSFullscreenError"]||[]}},{key:"request",value:function(e){return e[this.functions[1]]()}},{key:"exit",value:function(){return document[this.functions[2]]()}},{key:"onFullscreenChange",value:function(e){document.addEventListener(this.events[0],e)}},{key:"unFullscreenChange",value:function(e){document.removeEventListener(this.events[0],e)}},{key:"enabled",get:function(){return document[this.functions[0]]}},{key:"isFullscreen",get:function(){return!!document[this.functions[3]]}}],(n=null)&&zw(t.prototype,n),r&&zw(t,r),e}();Vw.init(),Vw._$name="Fullscreen";n(234);function Ww(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $w={constructor:1,prototype:1,name:1,length:1,arguments:1,caller:1,callee:1,__proto__:1},Yw=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"apply",value:function(e){if(!e.target)throw new Error("Override must specify what it overrides, using static getter target");if(!e.target.class)throw new Error("Override must specify which class it overrides, using target.class");if(!this.shouldApplyOverride(e))return!1;var t=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(e.prototype);return t.splice(t.indexOf("target"),1),this.internalOverrideAll(e.target.class,t,e),this.internalOverrideAll(e.target.class.prototype,n,e.prototype),!0}},{key:"internalOverrideAll",value:function(e,t,n){var r=this;Reflect.ownKeys(n).forEach((function(o){if(t.includes(o)&&!$w[o]){for(var i=Object.getOwnPropertyDescriptor(n,o),a=e,u=null;!u&&a;)(u=Object.getOwnPropertyDescriptor(a,o))||(a=Object.getPrototypeOf(a));u&&r.internalOverride(a,o,i,u)}}))}},{key:"internalOverride",value:function(e,t,n,r){(e._overridden=e._overridden||{})[t]=e[t],r.get?Object.defineProperty(e,t,{enumerable:!1,configurable:!0,get:n.get}):e[t]=n.value}},{key:"shouldApplyOverride",value:function(e){var t=e.target;if(!t.maxVersion&&!t.minVersion)return!0;if(!t.product)throw new Error("Override must specify product when using versioning");return!(t.maxVersion&&F[t.product].isNewerThan(t.maxVersion)||t.minVersion&&F[t.product].isOlderThan(t.minVersion))}}],(n=null)&&Ww(t.prototype,n),r&&Ww(t,r),e}();function Gw(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Uw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qw(e){return(qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Yw._$name="Override";var Xw=0,Kw=new WeakMap,Zw=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){var t;return e&&"object"==qw(e)||"function"==typeof e?void 0===(t=Kw.get(e))&&(t=++Xw,Kw.set(e,t)):t=String(e),t})).join("-")},Jw=function(e){var t=new Map;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=Zw(r),a=t.get(i);return void 0===a&&(a=e.apply(void 0,r),t.set(i,a)),a}},Qw=function(e){var t=new Map,n=function(e){return e[0]},r=function(e){return e[1]},o=function(e,t){return n(e).push(t)};return function(i,a){var u=function(e){var n=t.get(e);return void 0===n&&(n=[[],[]],t.set(e,n)),n}(i);!function(e){return!r(e).length&&!n(e).length}(u)?(o(u,a),r(u).forEach((function(e){return a(e)}))):(o(u,a),e(i,(function(e){(function(e,t){return r(e).some((function(e){return Mt.isEqual(e,t)}))})(u,e)||(!function(e,t){r(e).push(t)}(u,e),n(u).forEach((function(t){return t(e)})))})))}},ek=Symbol("success"),tk=Symbol("failure"),nk=function(e,t){return[ek,e,t]},rk=function(e){return[tk,e]},ok=function(e){return e.length&&e[0]===ek},ik=function(e){return"function"!=typeof e||e.length?e:e()},ak=Jw((function(e){return Qw((function(t,n){return n(nk(e,t))}))})),uk=Jw((function(e){return Qw((function(t,n){var r=Math.min(e.length,t.length),o=t.substr(0,r),i=t.substr(r);n(o===e?nk(o,i):rk(i))}))})),ck=function(e,t){return function(n,r){return ik(e)(n,(function(e){if(ok(e)){var n=Uw(e,3),o=n[1],i=n[2];t(o)(i,r)}else r(e)}))}},sk=Jw((function(){for(var e=Jw((function(e,t){return Qw(ck(e,(function(e){return ck(t,(function(t){return ak([].concat(e,t))}))})))})),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce(e,ak([]))})),lk=Jw((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qw((function(e,n){return t.forEach((function(t){return ik(t)(e,n)}))}))})),fk=Jw((function(e){return function(t,n){var r=new RegExp("^".concat(e)).exec(t);if(r){var o=r[0],i=t.substr(o.length);n(nk(o,i))}else n(rk(t))}})),dk=Jw((function(e,t){return ck(e,(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ak(t.apply(void 0,Gw([].concat.apply([],n))))}))})),pk=function(e,t){var n=[];return e(t,(function(e){ok(e)&&(""===Uw(e,3)[2]&&n.push(e))})),n},hk={memo:Jw,memoCps:Qw,success:nk,failure:rk,isSuccess:ok,resolveParser:ik,succeed:ak,string:uk,bind:ck,seq:sk,alt:lk,regexp:fk,red:dk,runParser:pk,defineParser:function(e){return function(t,n){return n?ik(e)(t,n):pk(ik(e),t)}}};function yk(e){return(yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mk(e,t){return!t||"object"!==yk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bk(e,t,n,r){return(bk="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wk(e)););return e}(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function wk(e){return(wk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kk(e,t){return(kk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sk=function(e){function t(){return gk(this,t),mk(this,wk(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kk(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"BooleanCombo"}},{key:"type",get:function(){return"booleancombo"}},{key:"defaultConfig",get:function(){return{positiveValue:!0,positiveText:null,negativeValue:!1,negativeText:null,value:!1}}}],(r=[{key:"store",get:function(){return this._store||(this.store=new ed({data:[{id:this.positiveValue,text:this.positiveText||this.L("Yes")},{id:this.negativeValue,text:this.negativeText||this.L("No")}]})),this._store},set:function(e){!function(e,t,n,r,o){if(!bk(e,t,n,r||e)&&o)throw new Error("failed to set property")}(wk(t.prototype),"store",e,this,!0)}}])&&vk(n.prototype,r),o&&vk(n,o),t}(ze(jp));function Ok(e){return(Ok="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ek(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ck(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xk(e,t){return!t||"object"!==Ok(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _k(e){return(_k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jk(e,t){return(jk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Sk._$name="BooleanCombo",se.register(Sk.type,Sk);var Dk=function(e){function t(){return Ek(this,t),xk(this,_k(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jk(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"DisplayField"}},{key:"defaultConfig",get:function(){return{readOnly:!0,editable:!1,cls:"b-display-field"}}}],(r=[{key:"focusElement",get:function(){}},{key:"readOnly",set:function(e){},get:function(){return!0}}])&&Ck(n.prototype,r),o&&Ck(n,o),t}(Cd);function Rk(e){return(Rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ak(e,t){return!t||"object"!==Rk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mk(e,t,n){return(Mk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Lk(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ik(e,t,n,r){return(Ik="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Lk(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Fk(e,t,n,r,o){if(!Ik(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function Lk(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nk(e)););return e}function Nk(e){return(Nk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hk(e,t){return(Hk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Dk._$name="DisplayField",se.register("display",Dk),se.register("displayfield",Dk);var Bk=function(e){function t(){return Pk(this,t),Ak(this,Nk(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hk(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"DurationField"}},{key:"defaultConfig",get:function(){return{value:null,step:1,unit:null,defaultUnit:"day",magnitude:null,useAbbreviation:!1,allowNegative:!1,decimalPrecision:null,triggers:{spin:{type:"spintrigger"}}}}}],(r=[{key:"roundMagnitude",value:function(e){return e&&null!=this.decimalPrecision?Mt.round(e,this.decimalPrecision):e}},{key:"internalOnChange",value:function(e){var t=this,n=t.value,r=t._lastValue;t.hasChanged(r,n)&&(t._lastValue=n,t.trigger("change",{value:n,event:e,userAction:!0,valid:t.isValid}))}},{key:"onFocusOut",value:function(e){return this.syncInputFieldValue(!0),Mk(Nk(t.prototype),"onFocusOut",this).call(this,e)}},{key:"calcValue",value:function(){var e=this;return e._unit&&e._magnitude||!e.clearable?new og(e._magnitude,e._unit||t.defaultConfig.defaultUnit):null}},{key:"hasChanged",value:function(e,t){return t&&!e||!t&&e||t&&e&&!e.isEqual(t)}},{key:"onInternalKeyDown",value:function(e){"ArrowUp"===e.key?this.doSpinUp():"ArrowDown"===e.key&&this.doSpinDown()}},{key:"doSpinUp",value:function(){var e=this;e._isUserAction=!0,e.magnitude=(e.magnitude||0)+e.step,e._isUserAction=!1}},{key:"doSpinDown",value:function(){var e=this;(e.allowNegative||(e.magnitude||0)>0)&&(e._isUserAction=!0,e.magnitude=(e.magnitude||0)-e.step,e._isUserAction=!1)}},{key:"inputValue",get:function(){return null==this.value?"":this.value.toString(this.useAbbreviation)}},{key:"unit",set:function(e){this._unit=e,Fk(Nk(t.prototype),"value",this.calcValue(),this,!0)},get:function(){return this._unit}},{key:"magnitude",set:function(e){this._magnitude=this.roundMagnitude(e),Fk(Nk(t.prototype),"value",this.calcValue(),this,!0)},get:function(){return this._magnitude}},{key:"allowDecimals",get:function(){return 0!==this.decimalPrecision}},{key:"isValid",get:function(){var e=this,t=null==e.value||e.value&&null==e.value.magnitude;return t&&!e.required||!t&&(e.allowNegative||e.value.magnitude>=0)}},{key:"value",set:function(e){var n,r,o=this;if("number"==typeof e)n=o.roundMagnitude(e),r=o._unit;else if("string"==typeof e){var i=xt.parseDuration(e,o.allowDecimals,o._unit||t.defaultConfig.defaultUnit);i&&(r=i.unit,n=o.roundMagnitude(i.magnitude))}else e&&"unit"in e&&"magnitude"in e?(r=e.unit,n=o.roundMagnitude(e.magnitude)):(r=null,n=null);o._magnitude===n&&o._unit===r||(o._magnitude=n,o._unit=r,Fk(Nk(t.prototype),"value",o.calcValue(),this,!0))},get:function(){return Mk(Nk(t.prototype),"value",this)}},{key:"milliseconds",get:function(){return this.value?this.value.milliseconds:0}}])&&Tk(n.prototype,r),o&&Tk(n,o),t}(Cd);function zk(e){return(zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vk(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <input\n             type="file"\n             reference="input"\n             id="','_input"\n             class="','"\n             ',"\n             ","\n            />\n        "]);return Vk=function(){return e},e}function Wk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yk(e,t){return!t||"object"!==zk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gk(e,t,n){return(Gk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uk(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Uk(e){return(Uk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qk(e,t){return(qk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Bk._$name="DurationField",se.register("durationfield",Bk),se.register("duration",Bk);var Xk=function(e){function t(){return Wk(this,t),Yk(this,Uk(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qk(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"FileField"}},{key:"defaultConfig",get:function(){return{multiple:!1,accept:null}}}],(r=[{key:"internalOnChange",value:function(e){Gk(Uk(t.prototype),"internalOnInput",this).call(this,e),Gk(Uk(t.prototype),"internalOnChange",this).call(this,e)}},{key:"internalOnInput",value:function(){}},{key:"inputTemplate",value:function(){var e=this;return Xa.tpl(Vk(),e.id,e.inputCls||"",e.multiple?"multiple":"",e.accept?'accept="'+e.accept+'"':"")}},{key:"pickFile",value:function(){this.input.click()}},{key:"clear",value:function(){this.input.value=null}},{key:"triggerChange",value:function(e){this.trigger("change",{event:e,value:this.input.value,oldValue:this._lastValue,userAction:!0,valid:!0})}},{key:"files",get:function(){return this.input.files}}])&&$k(n.prototype,r),o&&$k(n,o),t}(Ic);function Kk(e){return(Kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qk(e,t){return!t||"object"!==Kk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eS(e,t,n){return(eS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tS(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tS(e){return(tS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nS(e,t){return(nS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Xk._$name="FileField",se.register("filefield",Xk);var rS=function(e){function t(){return Zk(this,t),Qk(this,tS(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nS(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"FilePicker"}},{key:"defaultConfig",get:function(){return{defaultBindProperty:"value",buttonConfig:null,fileFieldConfig:null}}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;e.items=[Object.assign({type:"button",ref:"fileButton",text:"File"},e.buttonConfig),Object.assign({type:"filefield",ref:"fileField",style:"display: none"},e.fileFieldConfig)].concat(e.items||[]),eS(tS(t.prototype),"construct",this).call(this,e),n.button.on({click:n.onButtonClick,thisObj:n}),n.fileField.on({change:n.onFileFieldChange,thisObj:n}),n._thisIsAUsedExpression(n.fileTip)}},{key:"clear",value:function(){this.fileField.clear(),this.button.badge="",this.trigger("clear")}},{key:"onButtonClick",value:function(e){var t=e.event;this.fileField.pickFile(),t.preventDefault()}},{key:"onFileFieldChange",value:function(){this.button.badge=this.files.length||"",this.trigger("change",{files:this.files})}},{key:"button",get:function(){return this.widgetMap.fileButton}},{key:"fileField",get:function(){return this.widgetMap.fileField}},{key:"files",get:function(){return this.fileField.files}},{key:"fileTip",get:function(){var e=this;return e._fileTip||(e._fileTip=new Fu({cls:"b-file-tip",forElement:e.button.element,showOnHover:!0,align:"b-t",scrollAction:"realign",listeners:{beforeshow:function(){var t=e.files;return!(!t||!t.length||(this.html="".concat(Array.from(t).map((function(e){return e.name})).join("<br>")),0))}}}))}}])&&Jk(n.prototype,r),o&&Jk(n,o),t}(pa);function oS(e){return(oS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uS(e,t){return!t||"object"!==oS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cS(e,t,n,r){return(cS="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sS(e)););return e}(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function sS(e){return(sS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lS(e,t){return(lS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rS._$name="FilePicker",se.register("filepicker",rS);var fS=function(e){function t(){return iS(this,t),uS(this,sS(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lS(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"FlagField"}},{key:"type",get:function(){return"flagfield"}},{key:"defaultConfig",get:function(){return{value:""}}}],(r=[{key:"value",get:function(){return this.checked},set:function(e){e=Boolean(e),function(e,t,n,r,o){if(!cS(e,t,n,r||e)&&o)throw new Error("failed to set property")}(sS(t.prototype),"value",e,this,!0),this.inputting||(this.checked=e)}}])&&aS(n.prototype,r),o&&aS(n,o),t}(Gc);function dS(e){return(dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pS(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function hS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gS(e,t){return!t||"object"!==dS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vS(e,t,n){return(vS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mS(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function mS(e){return(mS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bS(e,t){return(bS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}fS._$name="FlagField",se.register(fS.type,fS);var wS=new(function(e){function t(){return hS(this,t),gS(this,mS(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bS(e,t)}(t,e),n=t,r=[{key:"confirm",value:(i=regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,r=t.title,o=void 0===r?" ":r,(i=this).title=o,i.element.classList.remove(i.showClass),n?(i.showClass="b-show-message-yes-no",i.widgetMap.message.html=n):i.showClass="b-show-yes-no",i.element.classList.add(i.showClass),i.show(),e.abrupt("return",i.promise=new Promise((function(e){i.resolve=e})));case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){pS(o,n,r,a,u,"next",e)}function u(e){pS(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"doResolve",value:function(e){var t=this,n=t.resolve;n&&(t.resolve=t.reject=t.promise=null,n(e),t.hide())}},{key:"onInternalKeyDown",value:function(e){"Escape"===e.key&&(e.stopImmediatePropagation(),this.widgetMap.cancelButton.isVisible?this.onCancelClick():this.onNoClick()),vS(mS(t.prototype),"onInternalKeyDown",this).call(this,e)}},{key:"onYesClick",value:function(){this.doResolve(wS.yesButton)}},{key:"onNoClick",value:function(){this.doResolve(wS.noButton)}},{key:"onCancelClick",value:function(){this.doResolve(wS.cancelButton)}}],o=[{key:"$name",get:function(){return"MessageDialog"}},{key:"defaultConfig",get:function(){return{id:"bryntum-msgdialog",centered:!0,modal:!0,hidden:!0,autoShow:!1,closeAction:"hide",title:" ",items:[{type:"widget",id:"bryntum-msgdialog-message",cls:"b-msgdialog-message",ref:"message"},{type:"textfield",id:"bryntum-msgdialog-input",cls:"b-msgdialog-input",ref:"input"}],bbar:{id:"bryntum-msgdialog-bbar",items:[{ref:"yesButton",id:"bryntum-msgdialog-yesbutton",cls:"b-msgdialog-yesbutton",text:"Yes",onClick:"up.onYesClick"},{ref:"noButton",id:"bryntum-msgdialog-nobutton",cls:"b-msgdialog-nobutton",text:"No",onClick:"up.onNoClick"},{ref:"cancelButton",id:"bryntum-msgdialog-cancelbutton",cls:"b-msgdialog-cancelbutton",text:"Cancel",onClick:"up.onCancelClick"}]}}}}],r&&yS(n.prototype,r),o&&yS(n,o),t}(Ya));function kS(e){return(kS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ES(e,t){return!t||"object"!==kS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CS(e,t,n){return(CS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xS(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function xS(e){return(xS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _S(e,t){return(_S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}wS.noButton=0,wS.yesButton=1,wS.cancelButton=3;var jS=function(e){function t(){return SS(this,t),ES(this,xS(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_S(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"PagingToolbar"}},{key:"defaultConfig",get:function(){return{store:null,localeClass:this,namedItems:{firstPageButton:{onClick:"up.onFirstPageClick",icon:"b-fa-angle-double-left"},previousPageButton:{onClick:"up.onPreviousPageClick",icon:"b-fa-angle-left"},pageNumber:{type:"numberfield",label:"L{page}",min:1,max:1,triggers:null,onChange:"up.onPageNumberChange"},pageCount:{type:"widget",cls:"b-pagecount b-toolbar-text"},nextPageButton:{onClick:"up.onNextPageClick",icon:"b-fa-angle-right"},lastPageButton:{onClick:"up.onLastPageClick",icon:"b-fa-angle-double-right"},reloadButton:{onClick:"up.onReloadClick",icon:"b-fa-redo"},dataSummary:{type:"widget",cls:"b-toolbar-text"}},items:{firstPageButton:!0,previousPageButton:!0,pageNumber:!0,pageCount:!0,nextPageButton:!0,lastPageButton:!0,sep:"|",reloadButton:!0,spacer:"->",dataSummary:!0}}}}],(r=[{key:"onStoreBeforeRequest",value:function(){this.eachWidget((function(e){return e.disable()}))}},{key:"updateLocalization",value:function(){var e=this,n=e.widgetMap,r=n.reloadButton,o=n.firstPageButton,i=n.previousPageButton,a=n.nextPageButton,u=n.lastPageButton;o.tooltip=e.L("firstPage"),i.tooltip=e.L("prevPage"),a.tooltip=e.L("nextPage"),u.tooltip=e.L("lastPage"),r.tooltip=e.L("reload"),e.updateSummary(),CS(xS(t.prototype),"updateLocalization",this).call(this)}},{key:"updateSummary",value:function(){var e,t,n,r,o,i=this,a=i.widgetMap,u=a.pageCount,c=a.dataSummary;if(e=t=n=r=o=0,i.store){var s=i.store,l=s.pageSize,f=s.currentPage;e=s.count,t=s.lastPage,o=s.allCount,n=Math.max(0,(f-1)*l+1),r=Math.min(o,n+l-1)}u.html=i.L("pageCountTemplate")({lastPage:t}),c.html=e?i.L("summaryTemplate")({start:n,end:r,allCount:o}):i.L("noRecords")}},{key:"onStoreChange",value:function(){var e=this.widgetMap,t=this.store,n=t.count,r=t.lastPage,o=t.currentPage,i=e.pageNumber,a=e.pageCount,u=e.firstPageButton,c=e.previousPageButton,s=e.nextPageButton,l=e.lastPageButton,f=e.dataSummary;this.eachWidget((function(e){return e.enable()})),i.value=o,i.max=r,f.disabled=i.disabled=a.disabled=!n,u.disabled=c.disabled=o<=1||!n,s.disabled=l.disabled=o>=r||!n,this.updateSummary()}},{key:"onPageNumberChange",value:function(e){var t=e.value;this.store.currentPage!==t&&this.store.loadPage(t)}},{key:"onFirstPageClick",value:function(){this.store.loadPage(1)}},{key:"onPreviousPageClick",value:function(){this.store.previousPage()}},{key:"onNextPageClick",value:function(){this.store.nextPage()}},{key:"onLastPageClick",value:function(){this.store.loadPage(this.store.lastPage)}},{key:"onReloadClick",value:function(){this.store.loadPage(this.store.currentPage)}},{key:"store",set:function(e){var t=this,n={beforerequest:"onStoreBeforeRequest",afterrequest:"onStoreChange",change:"onStoreChange",thisObj:t};t.store&&t.store.un(n),t._store=e,e&&(e.on(n),e.isLoading&&t.onStoreBeforeRequest())},get:function(){return this._store}}])&&OS(n.prototype,r),o&&OS(n,o),t}(ka);function DS(e){return(DS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RS(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <div class="b-splitter"></div>\n        ']);return RS=function(){return e},e}function PS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AS(e,t){return!t||"object"!==DS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MS(e,t,n,r){return(MS="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=FS(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function IS(e,t,n){return(IS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=FS(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function FS(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LS(e)););return e}function LS(e){return(LS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NS(e,t){return(NS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}jS._$name="PagingToolbar",se.register("pagingtoolbar",jS);var HS=function(e){return parseInt(xn.getStyleValue(e,"flex-basis"),10)||parseInt(xn.getStyleValue(e,"flex-grow"),10)},BS=function(e){function t(){return PS(this,t),AS(this,LS(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NS(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{orientation:"auto"}}}],(r=[{key:"doDestroy",value:function(){this.mouseDetacher&&this.mouseDetacher(),IS(LS(t.prototype),"doDestroy",this).call(this)}},{key:"template",value:function(){return Xa.tpl(RS())}},{key:"updateOrientation",value:function(){var e=this,t=this.element;if(e._prevOrientation&&t.classList.remove(e._prevOrientation),!e._currentOrientation&&e.rendered&&t.offsetParent){var n=xn.getStyleValue(t.parentElement,"flex-direction");if(n)e._currentOrientation=n.startsWith("column")?"horizontal":"vertical";else{var r=t.previousElementSibling,o=t.nextElementSibling;if(!r||!o)return;var i=r.getBoundingClientRect(),a=o.getBoundingClientRect(),u=i.top<a.top?i:a,c=u===a?i:a;e._currentOrientation=u.top!==c.top?"horizontal":"vertical"}}e._currentOrientation&&t.classList.add("b-".concat(e._currentOrientation)),e._prevOrientation=e._currentOrientation}},{key:"onMouseDown",value:function(e){var t=this.element,n=t.previousElementSibling,r=t.nextElementSibling,o=HS(n),i=HS(r),a=[],u=!0,c=!1,s=void 0;try{for(var l,f=t.parentElement.children[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var d=l.value;HS(d)&&d!==t&&a.push({element:d,width:d.offsetWidth,height:d.offsetHeight})}}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}this.context={startX:e.pageX,startY:e.pageY,prevWidth:n.offsetWidth,prevHeight:n.offsetHeight,nextWidth:r.offsetWidth,nextHeight:r.offsetHeight,prevHasFlex:o,nextHasFlex:i,flexed:a,prev:n,next:r},this.mouseDetacher=_r.on({element:document,mousemove:"onMouseMove",mouseup:"onMouseUp",thisObj:this})}},{key:"onMouseMove",value:function(e){var t=this,n=t.context,r=e.pageX-n.startX,o=e.pageY-n.startY;if(e.preventDefault(),Object.assign(n,{deltaX:r,deltaY:o}),n.started||(n.started=!0,t.trigger("start",{context:n,event:e}),n.flexed.forEach((function(e){"vertical"===t.currentOrientation?e.element.style.flexGrow=e.width:e.element.style.flexGrow=e.height,e.element.style.flexBasis="0"}))),"vertical"===t.currentOrientation){var i=n.prevWidth+r,a=n.nextWidth-r;n.prevHasFlex?n.prev.style.flexGrow=i:n.prev.style.width="".concat(i,"px"),n.nextHasFlex?n.next.style.flexGrow=a:n.next.style.width="".concat(a,"px")}else{var u=n.prevHeight+o,c=n.nextHeight-o;n.prevHasFlex?n.prev.style.flexGrow=u:n.prev.style.height="".concat(u,"px"),n.nextHasFlex?n.next.style.flexGrow=c:n.next.style.height="".concat(c,"px")}t.trigger("move",{context:n,event:e})}},{key:"onMouseUp",value:function(e){var t=this;t.mouseDetacher&&t.mouseDetacher(),t.mouseDetacher=null,t.context.started&&t.trigger("end",{context:t.context,event:e}),t.context=null}},{key:"render",value:function(){IS(LS(t.prototype),"render",this).apply(this,arguments);var e=this;e._currentOrientation||(e.updateOrientation(),e._currentOrientation||e.requestAnimationFrame((function(){return e.updateOrientation()})))}},{key:"element",get:function(){return IS(LS(t.prototype),"element",this)},set:function(e){!function(e,t,n,r,o){if(!MS(e,t,n,r||e)&&o)throw new Error("failed to set property")}(LS(t.prototype),"element",e,this,!0),_r.on({element:this.element,mousedown:"onMouseDown",thisObj:this})}},{key:"currentOrientation",get:function(){return this._currentOrientation}},{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation=e,this._currentOrientation="auto"===e?null:e,this.updateOrientation()}}])&&TS(n.prototype,r),o&&TS(n,o),t}(ni);function zS(e){return(zS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YS(e,t){return!t||"object"!==zS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GS(e,t,n){return(GS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=US(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function US(e){return(US=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qS(e,t){return(qS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}BS._$name="Splitter",se.register("splitter",BS);var XS=function(e){function t(){return WS(this,t),YS(this,US(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qS(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return["text","field","renderer","width","flex",{name:"editor",defaultValue:{}},"finalizeCellEdit",{name:"revertOnEscape",defaultValue:!0},{name:"invalidAction",defaultValue:"block"},{name:"sortable",defaultValue:!0},{name:"searchable",defaultValue:!0},{name:"filterable",defaultValue:!0},{name:"hideable",defaultValue:!0},{name:"draggable",defaultValue:!0},{name:"groupable",defaultValue:!0},{name:"resizable",defaultValue:!0},"groupRenderer","headerRenderer","tooltipRenderer","cellCls","cls","icon","align",{name:"minWidth",defaultValue:60},{name:"hidden",defaultValue:!1},{name:"locked"},{name:"region"},{name:"showColumnPicker",defaultValue:!0},{name:"enableHeaderContextMenu",defaultValue:!0},{name:"enableCellContextMenu",defaultValue:!0},"headerMenuItems","cellMenuItems","sum","summaries","summaryRenderer","responsiveLevels","tags","touchConfig","tree","filterType",{name:"htmlEncode",defaultValue:!0},{name:"autoSyncHtml",defaultValue:!1},"type",{name:"instantUpdate",defaultValue:!1},{name:"repaintOnResize",defaultValue:!1},"editTargetSelector",{name:"exportable",defaultValue:!0},{name:"exportedType"}]}},{key:"autoExposeFields",get:function(){return!1}},{key:"type",get:function(){return"column"}},{key:"text",get:function(){return this.defaultValues.text}}],(r=[{key:"construct",value:function(e,n){var r=this;r.masterStore=n,n&&(r._grid=Array.isArray(n)?n[0].grid:n.grid),r.localizableProperties=e.localizableProperties||["text"],e.localeClass&&(r.localeClass=e.localeClass),GS(US(t.prototype),"construct",this).call(this,e,n,null,!1),r.processConfiguredListeners(e.listeners),"field"in r.data||(r.field="_"+(r.type||"")+ ++t.emptyCount,r.noFieldSpecified=!0),r.hasComplexMapping=r.field&&r.field.includes("."),r.width||r.flex||r.children||r.set({width:t.defaultWidth,flex:null},null,!0)}},{key:"remove",value:function(){var e=this.subGrid,n=this.grid,r=e&&n&&n.focusedCell;r&&r.columnId===this.id&&(document.activeElement===n?n.navigateRight():r.columnId=e.columns.getAdjacentVisibleLeafColumn(this.id,!0,!0).id),GS(US(t.prototype),"remove",this).call(this)}},{key:"getRawValue",value:function(e){return this.hasComplexMapping?Mt.getPath(e,this.field):e[this.field]||e.get(this.field)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.parent;if(!t.hidden){if(t.hidden=!0,n&&!n.isRoot){var r=n.children.some((function(e){return!0!==e.hidden}));r||n.hidden||(e=!0,n.hide())}t.children&&t.children.forEach((function(e){return e.hide(!0)})),e||t.stores.forEach((function(e){return e.trigger("hideColumn")}))}}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.parent;t.hidden&&(t.hidden=!1,n&&n.hidden&&n.show(),t.children&&t.children.forEach((function(e){return e.show(!0)})),e||t.stores.forEach((function(e){return e.trigger("showColumn")})))}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.hidden&&void 0===e||!0===e?this.show():!this.hidden&&void 0===e||!1===e?this.hide():void 0}},{key:"generateId",value:function(){return t.generatedIdIndex||(t.generatedIdIndex=0),(this.field?this.field.replace(/\./g,"-"):"col")+ ++t.generatedIdIndex}},{key:"measureSize",value:function(e){return xn.measureSize(e,this.subGrid?this.subGrid.element:void 0)}},{key:"calculateMinWidth",value:function(){var e=this,t=e.measureSize(e.width),n=e.measureSize(e.minWidth),r=0;return e.children&&(r=e.children.reduce((function(e,t){return e+t.calculateMinWidth()}),0)),Math.max(t,n,r)}},{key:"resizeToFitContent",value:function(){var e=this,t=e.grid,n=e.renderer,r=e.defaultRenderer,o=e.element,i=t.rowManager,a=t.store,u=a.count,c=n||r;if(!(u<=0)){var s,l,f,d,p,h=t.element.querySelector(".b-grid-cell[data-column-id=".concat(e.id,"]")),y=h.cssText,g=h.className,v=0;if(t.resizeToFitIncludesHeader){var m=window.getComputedStyle(o);v=xn.measureText(o.innerText,o,!1,o.parentElement)+parseInt(m.paddingLeft),o.parentElement.offScreenDiv.parentElement.remove()}for(u>1e3?l=(s=Math.max(Math.min(i.topIndex+i.rowCount/2-500,u-1e3),0))+1e3:(s=0,l=u),f=s;f<l;f++)d=a.getAt(f),p=e.getRawValue(d),c&&(p=null==(p=c.call(e,{cellElement:h,rowElement:h.parentNode,value:p,record:d,column:e,size:{height:d.rowHeight||0},grid:t,row:{},updatingSingleRow:!1}))?h.innerHTML:String(p)),p&&(v=Math.max(v,xn.measureText(p,h,!(e.htmlEncode&&!e.disableHtmlEncode),e.subGrid.element)));return h.className=g,h.cssText=y,e.width=v}}},{key:"getState",value:function(){var e,t=this,n=(VS(e={},t.flex?"flex":"width",t.flex?t.flex:t.width),VS(e,"id",t.id),VS(e,"hidden",t.hidden),VS(e,"index",t.allIndex),VS(e,"region",t.region),VS(e,"filterable",t.filterable),VS(e,"text",t.text),VS(e,"locked",t.locked),e);return t.children&&(n.children=t.children.map((function(e){return e.getState()}))),n}},{key:"applyState",value:function(e){var t=this;t.beginBatch(),"locked"in e&&(t.locked=e.locked),"minWidth"in e&&(t.minWidth=e.minWidth),"width"in e&&(t.width=e.width),"flex"in e&&(t.flex=e.flex),"width"in e&&t.flex?t.flex=void 0:"flex"in e&&t.width&&(t.width=void 0),"text"in e&&(t.text=e.text),"region"in e&&(t.region=e.region),"renderer"in e&&(t.renderer=e.renderer),"filterable"in e&&(t.filterable=e.filterable),t.endBatch(),"hidden"in e&&t.toggle(!0!==e.hidden)}},{key:"clearCell",value:function(e){e.innerHTML=""}},{key:"canEdit",value:function(e){return!0}},{key:"owner",get:function(){return this._owner||this.subGrid},set:function(e){this._owner=e}},{key:"nextVisibleSibling",get:function(){for(var e=this.region,t=this.nextSibling;t&&(t.hidden||t.region!==e);)t=t.nextSibling;return t}},{key:"isLastInSubGrid",get:function(){return!this.nextVisibleSibling&&(!this.parent||this.parent.isLastInSubGrid)}},{key:"element",get:function(){return this.grid.getHeaderElement(this)}},{key:"textWrapper",get:function(){return xn.getChild(this.element,".b-grid-header-text")}},{key:"textElement",get:function(){return xn.down(this.element,".b-grid-header-text-content")}},{key:"contentElement",get:function(){return xn.down(this.element,".b-grid-header-children")}},{key:"editor",get:function(){var e=this.data.editor;if(e&&!(e instanceof ni)){var t=this.grid.processCellEditor({editor:e,field:this.field});t?e=this.data.editor=t.editor:("string"==typeof e&&(e={type:e}),e=this.data.editor=me.createWidget(Object.assign(this.defaultEditor,e,{owner:this.grid})))}return e},set:function(e){this.data.editor=e}},{key:"defaultEditor",get:function(){return{type:"textfield",name:this.field}}},{key:"grid",get:function(){return this._grid||this.parent&&this.parent.grid}},{key:"locked",get:function(){return"locked"===this.data.region},set:function(e){this.region=e?"locked":"normal"}},{key:"sortable",get:function(){return this.isLeaf&&this.data.sortable},set:function(e){this.set("sortable",e)}},{key:"groupable",get:function(){return this.isLeaf&&this.data.groupable},set:function(e){this.set("groupable",e)}},{key:"allIndex",get:function(){return this.masterStore.indexOf(this)}},{key:"width",get:function(){return this.data.width},set:function(e){var t={width:e};e&&"flex"in this.data&&(t.flex=null),this.set(t)}},{key:"subGrid",set:function(e){this._subGrid=e},get:function(){return this._subGrid||(this.grid?this.grid.getSubGridFromColumn(this):void 0)}},{key:"subGridElement",get:function(){return this.subGrid.element}}])&&$S(n.prototype,r),o&&$S(n,o),t}(ae(ze(qs)));function KS(e){return(KS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QS(e,t){return!t||"object"!==KS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eO(e,t,n){return(eO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tO(e){return(tO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nO(e,t){return(nO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}XS.emptyCount=0,XS.defaultWidth=100,XS.exposeProperties(),XS._$name="Column";var rO=function(e){function t(){return ZS(this,t),QS(this,tO(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nO(e,t)}(t,e),n=t,o=[{key:"registerColumnType",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.columnTypes||(t.columnTypes={}),e.simpleRenderer=n,t.columnTypes[e.type]=e}},{key:"getColumnClass",value:function(e){return t.columnTypes&&t.columnTypes[e]}},{key:"defaultConfig",get:function(){return{modelClass:XS,tree:!0,autoAddField:!1}}}],(r=[{key:"construct",value:function(e){var n=this;e.grid&&(e.grid._columnStore=n,n.id="".concat(e.grid.id,"-columns"),e.grid.on({subGridCollapse:"clearSubGridCaches",subGridExpand:"clearSubGridCaches",thisObj:n})),eO(tO(t.prototype),"construct",this).call(this,e),n.on({change:n.clearCaches,thisObj:n,prio:1})}},{key:"doDestroy",value:function(){var e=[];this.traverse((function(t){return e.push(t)})),eO(tO(t.prototype),"doDestroy",this).call(this),e.forEach((function(e){return e.destroy()}))}},{key:"getById",value:function(e){return eO(tO(t.prototype),"getById",this).call(this,e)||this.idRegister[e]}},{key:"forEach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.traverseWhile((function(n,r){return e.call(t,n,r)}),!0)}},{key:"clearSubGridCaches",value:function(e){e.columns.clearCaches(),this.clearCaches()}},{key:"clearCaches",value:function(){this._visibleColumns=null}},{key:"onMasterDataChanged",value:function(e){eO(tO(t.prototype),"onMasterDataChanged",this).call(this,e),this.clearCaches()}},{key:"getAdjacentVisibleLeafColumn",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.visibleColumns,o=e instanceof XS?e:this.getById(e),i=r.indexOf(o)+(t?1:-1);if(!r[i]){if(!n)return null;i=t?0:r.length-1}return r[i]}},{key:"get",value:function(e){return this.findRecord("field",e,!0)}},{key:"createRecord",value:function(e){var n=this.grid,r=void 0===n?{}:n,o=r.store,i=this.modelClass;if(e.type&&!(i=t.getColumnClass(e.type)))throw new Error(this.L("columnTypeNotFound",e));e.locked&&(e.region="locked",delete e.locked);var a=new i(e,this);if(a.data.region||(a.data.region=r.defaultRegion||"normal"),this.autoAddField&&!a.noFieldSpecified&&o&&!o.modelClass.getFieldDefinition(a.field)){var u=a.field;a.constructor.fieldType&&(u={name:a.field,type:a.constructor.fieldType}),o.modelClass.addField(u)}return a}},{key:"indexOf",value:function(e){var n=eO(tO(t.prototype),"indexOf",this).call(this,e);return n>-1?n:this.records.findIndex((function(t){return t.field===e}))}},{key:"modelClass",get:function(){return this._modelClass},set:function(e){this._modelClass=e}},{key:"totalFixedWidth",get:function(){var e=0,t=!0,n=!1,r=void 0;try{for(var o,i=this[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.hidden||(a.flex?e+=a.measureSize(XS.defaultWidth):e+=Math.max(a.measureSize(a.width),a.measureSize(a.minWidth)))}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"topColumns",get:function(){return this.isChained?this.masterStore.rootNode.children.filter(this.chainedFilterFn):this.rootNode.children}},{key:"visibleColumns",get:function(){return this._visibleColumns||(this._visibleColumns=this.leaves.filter((function(e){return!(e.hidden||e.subGrid&&e.subGrid.collapsed)}))),this._visibleColumns}},{key:"bottomColumns",get:function(){return this.leaves}}])&&JS(n.prototype,r),o&&JS(n,o),t}(ze(ed));function oO(e){return(oO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uO(e,t){return!t||"object"!==oO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cO(e,t,n){return(cO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function sO(e){return(sO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lO(e,t){return(lO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(XS,!0),rO._$name="ColumnStore";var fO=function(e){function t(){return iO(this,t),uO(this,sO(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lO(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"aggregate"}},{key:"fields",get:function(){return["function"]}},{key:"defaults",get:function(){return{function:"sum"}}}],(r=[{key:"construct",value:function(e,n){this.configuredAlign="align"in e,this.configuredEditor="editor"in e,cO(sO(t.prototype),"construct",this).apply(this,arguments);var r=n.grid;r&&(this.owner=r,r.on({paint:"onGridPaint",thisObj:this,prio:1e3}))}},{key:"onGridPaint",value:function(e){var t=e.source;this.store=t.store}},{key:"canEdit",value:function(e){return e.isLeaf}},{key:"sum",value:function(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0,i=n.length;o<i;o++)e+=parseInt(n[o],10);return e}},{key:"avg",value:function(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=n.length,i=0;i<o;i++)e+=parseInt(n[i],10);return e/o}},{key:"onRecordUpdate",value:function(e){var t=e.record,n=e.changes,r=this,o=r.grid.rowManager;r.field in n&&t.isLeaf&&t.bubble((function(e){var t=o.getRowFor(e);if(t){var n=t.getCell(r.field);n&&t.renderCell(n,e)}}),!0)}},{key:"getRawValue",value:function(e){var t=0;if(e.children){for(var n=this.function,r="string"==typeof n&&"function"==typeof Math[n]?{handler:Math[n],thisObj:Math}:this.resolveCallback(n),o=r.handler,i=r.thisObj,a=0,u=e.children.length;a<u;a++)t=o.call(i,t,this.getRawValue(e.children[a]));e.setData(this.field,t)}else t=e[this.field];return t}},{key:"store",set:function(e){var t=this,n={update:"onRecordUpdate",thisObj:t,prio:1e3},r=t._store;if(e!==r){r&&r.un(n),t._store=e;var o=e.modelClass.fieldMap[t.field];o&&"number"===o.type&&(t.configuredAlign||(t.align="end"),t.configuredEditor||(t.editor="number")),e.on(n)}},get:function(){return this._store}}])&&aO(n.prototype,r),o&&aO(n,o),t}(XS);function dO(e){return(dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yO(e,t){return!t||"object"!==dO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gO(e,t,n){return(gO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function vO(e){return(vO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mO(e,t){return(mO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(fO,!0),fO.exposeProperties(),fO._$name="AggregateColumn";var bO=function(e){function t(){return pO(this,t),yO(this,vO(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mO(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"widget"}},{key:"fields",get:function(){return["widgets"]}},{key:"defaults",get:function(){return{filterable:!1,sortable:!1,editor:!1,searchable:!1}}}],(r=[{key:"construct",value:function(e,n){this.widgetMap={},this.internalCellCls="b-widget-cell",gO(vO(t.prototype),"construct",this).apply(this,arguments)}},{key:"doDestroy",value:function(){for(var e=0,n=Object.values(this.widgetMap);e<n.length;e++){var r=n[e];r.destroy&&r.destroy()}gO(vO(t.prototype),"doDestroy",this).call(this)}},{key:"renderer",value:function(e){var t=this,n=e.cellElement,r=e.column,o=e.value,i=e.record,a=e.isExport,u=r.widgets;if(!a&&u&&(n.widgets||t.clearCell(n),n.widgets=u.map((function(a,u){var c,s;return n.widgets&&(s=(c=n.widgets[u]).element.nextElementSibling,a.recreate&&c&&(delete t.widgetMap[c.id],c.destroy(),n.widgets[u]=null)),c||(t.onBeforeWidgetCreate(a,e),c=me.append(a,s?{insertBefore:s}:n)[0],t.widgetMap[c.id]=c,t.onAfterWidgetCreate(c,e)),c.cellInfo={cellElement:n,value:o,record:i,column:r},t.grid&&(c.readOnly=t.grid.readOnly),!1!==t.onBeforeWidgetSetValue(c,e)&&(a.noValueOnRender||(a.valueProperty?c[a.valueProperty]=o:c.defaultBindProperty?c[c.defaultBindProperty]=o:c.text=c.value=o)),t.onAfterWidgetSetValue(c,e),c}))),a)return null}},{key:"onBeforeWidgetCreate",value:function(e,t){}},{key:"onAfterWidgetCreate",value:function(e,t){}},{key:"onBeforeWidgetSetValue",value:function(e,t){}},{key:"onAfterWidgetSetValue",value:function(e,t){}},{key:"clearCell",value:function(e){var n=this;e.widgets&&(e.widgets.forEach((function(e){delete n.widgetMap[e.id],e.destroy()})),e.widgets=null),gO(vO(t.prototype),"clearCell",this).call(this,e)}},{key:"resizeToFitContent",value:function(){}}])&&hO(n.prototype,r),o&&hO(n,o),t}(XS);function wO(e){return(wO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SO(e,t){return!t||"object"!==wO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OO(e,t,n){return(OO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function EO(e){return(EO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xO(e,t,n){return t&&CO(e.prototype,t),n&&CO(e,n),e}function _O(e,t){return(_O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(bO),bO.exposeProperties(),bO._$name="WidgetColumn";var jO=function(e){function t(e,n){var r;return kO(this,t),(r=SO(this,EO(t).apply(this,arguments))).internalCellCls="b-check-cell",r.grid&&r.grid.on("destroy",(function(){return r.headerCheckbox&&r.headerCheckbox.destroy()})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_O(e,t)}(t,e),xO(t,null,[{key:"type",get:function(){return"check"}},{key:"fields",get:function(){return["checkCls","showCheckAll"]}},{key:"defaults",get:function(){return{align:"center",checkCls:null,showCheckAll:!1,widgets:[{type:"checkbox",valueProperty:"checked"}]}}}]),xO(t,[{key:"headerRenderer",value:function(e){var t=e.headerElement,n=e.column;if(t.classList.add("b-check-header"),!n.showCheckAll)return n.text;t.classList.add("b-check-header-with-checkbox"),n.headerCheckbox&&n.headerCheckbox.destroy(),n.headerCheckbox=new Gc({appendTo:t,owner:this.grid,listeners:{change:function(e){var t=e.checked;n.trigger("toggleAll",{checked:t})}}})}},{key:"renderer",value:function(e){var n=e.value,r=e.isExport;if(r)return null==n?"":n;OO(EO(t.prototype),"renderer",this).apply(this,arguments)}},{key:"onBeforeWidgetCreate",value:function(e,t){e.cls=this.checkCls}},{key:"onAfterWidgetCreate",value:function(e,t){t.cellElement.widget=e,e.on({beforeChange:"onBeforeCheckboxChange",change:"onCheckboxChange",thisObj:this})}},{key:"onBeforeWidgetSetValue",value:function(e){e.record=e.cellInfo.record,this.isInitialSet=!0}},{key:"onAfterWidgetSetValue",value:function(e){this.isInitialSet=!1}},{key:"onBeforeCheckboxChange",value:function(e){var t=e.source,n=e.checked;if(!this.isInitialSet)return this.trigger("beforeToggle",{record:t.cellInfo.record,checked:n})}},{key:"onCheckboxChange",value:function(e){var t=e.source,n=e.checked;if(!this.isInitialSet){var r=t.cellInfo.record,o=this.field;if(o){var i="set".concat(A.capitalizeFirstLetter(o));r[i]?r[i](n):r.set(o,n)}this.trigger("toggle",{record:r,checked:n})}}}]),t}(bO);function DO(e){return(DO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PO(e,t){return!t||"object"!==DO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TO(e){return(TO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MO(e,t,n){return t&&AO(e.prototype,t),n&&AO(e,n),e}function IO(e,t){return(IO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(jO,!0),jO._$name="CheckColumn";var FO=function(e){function t(e,n){var r;return RO(this,t),(r=PO(this,TO(t).apply(this,arguments))).internalCellCls="b-date-cell",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IO(e,t)}(t,e),MO(t,null,[{key:"type",get:function(){return"date"}},{key:"fieldType",get:function(){return"date"}},{key:"fields",get:function(){return["format","pickerFormat","step"]}},{key:"defaults",get:function(){return{format:"L",step:1,minWidth:85,filterType:"date"}}}]),MO(t,[{key:"defaultRenderer",value:function(e){var t=e.value;return t?this.formatValue(t):""}},{key:"groupRenderer",value:function(e){var t=e.cellElement,n=e.groupRowFor;t.innerHTML=this.formatValue(n)}},{key:"formatValue",value:function(e){return"string"==typeof e&&(e=xt.parse(e,this.format||void 0)),xt.format(e,this.format||void 0)}},{key:"format",set:function(e){var t=this.editor;this.set("format",e),t&&(t.format=this.format)},get:function(){return this.get("format")}},{key:"defaultEditor",get:function(){return{name:this.field,type:"date",calendarContainerCls:"b-grid-cell-editor-related",format:this.format,step:this.step}}}]),t}(XS);function LO(e){return(LO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HO(e,t){return!t||"object"!==LO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BO(e,t,n){return(BO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function zO(e){return(zO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WO(e,t,n){return t&&VO(e.prototype,t),n&&VO(e,n),e}function $O(e,t){return($O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(FO,!0),FO.exposeProperties(),FO._$name="DateColumn";var YO=function(e){function t(e,n){var r;return NO(this,t),(r=HO(this,zO(t).apply(this,arguments))).internalCellCls="b-percent-bar-cell",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$O(e,t)}(t,e),WO(t,null,[{key:"type",get:function(){return"percent"}},{key:"fieldType",get:function(){return"number"}},{key:"fields",get:function(){return["lowThreshold"]}},{key:"defaults",get:function(){return{editor:{type:"number",min:0,max:100},lowThreshold:20,filterType:"number",htmlEncode:!1,searchable:!1,summaryRenderer:function(e){return"".concat(e,"%")}}}}]),WO(t,[{key:"renderer",value:function(e){var t=e.value;return{className:"b-percent-bar-outer",children:[{tag:"div",className:{"b-percent-bar":1,"b-zero":0===(t=t||0),"b-low":t<this.lowThreshold},style:{width:t+"%"},html:t+"%"}]}}},{key:"clearCell",value:function(e){e.percentBarElement&&(e.percentBarElement=null),BO(zO(t.prototype),"clearCell",this).call(this,e)}},{key:"resizeToFitContent",value:function(){}}]),t}(XS);function GO(e){return(GO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qO(e,t){return!t||"object"!==GO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XO(e){return(XO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZO(e,t,n){return t&&KO(e.prototype,t),n&&KO(e,n),e}function JO(e,t){return(JO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}YO.sum="average",rO.registerColumnType(YO,!0),YO._$name="PercentColumn";var QO=function(e){function t(e,n){var r;return UO(this,t),(r=qO(this,XO(t).apply(this,arguments))).internalCellCls="b-number-cell",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JO(e,t)}(t,e),ZO(t,null,[{key:"type",get:function(){return"number"}},{key:"fieldType",get:function(){return"number"}},{key:"fields",get:function(){return["min","max","step","unit"]}},{key:"defaults",get:function(){return{filterType:"number"}}}]),ZO(t,[{key:"defaultRenderer",value:function(e){var t=e.value,n=void 0===t?0:t;return this.unit?"".concat(n).concat(this.unit):n}},{key:"defaultEditor",get:function(){return{name:this.field,type:"numberfield",max:this.max,min:this.min,step:this.step}}}]),t}(XS);function eE(e){return(eE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nE(e,t){return!t||"object"!==eE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rE(e){return(rE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iE(e,t,n){return t&&oE(e.prototype,t),n&&oE(e,n),e}function aE(e,t){return(aE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(QO,!0),QO.exposeProperties(),QO._$name="NumberColumn";var uE=function(e){function t(e,n){var r;return tE(this,t),(r=nE(this,rE(t).apply(this,arguments))).internalCellCls="b-rating-cell",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aE(e,t)}(t,e),iE(t,null,[{key:"type",get:function(){return"rating"}},{key:"fieldType",get:function(){return"number"}},{key:"fields",get:function(){return["emptyIcon","filledIcon","editable"]}},{key:"defaults",get:function(){return{min:0,max:5,emptyIcon:"b-icon b-icon-star",filledIcon:"b-icon b-icon-star",editable:!0,filterType:"number",searchable:!1,width:"11.2em",htmlEncode:!1,autoSyncHtml:!0,minWidth:"11.2em",editor:!1}}}]),iE(t,[{key:"renderer",value:function(e){for(var t=e.value,n='<div class="b-rating-cell-inner '.concat(this.editable?"":"b-not-editable",'">'),r=0;r<this.max;r++){n+='<i class="b-rating-icon '.concat(r<t?"b-filled "+this.filledIcon:"b-empty "+this.emptyIcon,'"></i>')}return n+="</div>"}},{key:"onCellClick",value:function(e){var t=e.grid,n=e.column,r=e.record,o=(e.cellSelector,e.target),i=e.event;if(o.classList.contains("b-rating-icon")&&!t.readOnly&&n.editable){var a=[].indexOf.call(o.parentNode.childNodes,o);o.classList.contains("b-filled")&&(i.metaKey||i.shiftKey)&&(a-=1),1===r.get(n.field)&&0===a&&(a=-1),r.set(n.field,a+1)}}}]),t}(QO);function cE(e){return(cE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fE(e,t){return!t||"object"!==cE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dE(e,t,n){return(dE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pE(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pE(e){return(pE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hE(e,t){return(hE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(uE,!0),uE.exposeProperties(),uE._$name="RatingColumn";var yE=function(e){function t(){return sE(this,t),fE(this,pE(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hE(e,t)}(t,e),n=t,o=[{key:"defaults",get:function(){return{groupable:!1,sortable:!1,filterable:!1,searchable:!1,resizable:!1,minWidth:50,width:50,align:"right",text:"#",editor:!1}}},{key:"type",get:function(){return"rownumber"}}],(r=[{key:"construct",value:function(e,n){var r=this;dE(pE(t.prototype),"construct",this).apply(this,arguments),r.grid&&(r.grid.store.on({change:r.resizeToFitContent,thisObj:r}),r.grid.store.count&&r.grid.on({render:r.resizeToFitContent,thisObj:r,once:!0})),r.internalCellCls="b-row-number-cell"}},{key:"renderer",value:function(e){var t=e.record,n=e.grid;return t.meta.specialRow?"":n.store.indexOf(t,!0)+1}},{key:"resizeToFitContent",value:function(){var e=this.grid,t=e.store.count;if(t&&!this.hidden){var n=e.element.querySelector(".b-grid-cell[data-column-id=".concat(this.id,"]"));if(n){var r=window.getComputedStyle(n),o=parseInt(r["padding-left"]),i=xn.measureText(t,n);this.width=i+2*o}}}},{key:"flex",set:function(e){}}])&&lE(n.prototype,r),o&&lE(n,o),t}(XS);function gE(e){return(gE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mE(e,t){return!t||"object"!==gE(t)&&"function"!=typeof t?wE(e):t}function bE(e){return(bE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SE(e,t,n){return t&&kE(e.prototype,t),n&&kE(e,n),e}function OE(e,t){return(OE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(yE,!0),yE._$name="RowNumberColumn";var EE=function(e){function t(e,n){var r;vE(this,t);var o=wE(r=mE(this,bE(t).apply(this,arguments)));if(!o.template)throw new Error(o.L("noTemplate"));if("function"!=typeof o.template)throw new Error(o.L("noFunction"));return r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OE(e,t)}(t,e),SE(t,null,[{key:"fields",get:function(){return["template"]}},{key:"defaults",get:function(){return{htmlEncode:!1}}}]),SE(t,[{key:"renderer",value:function(e){if(!e.record.meta.specialRow)return this.template({value:e.value,record:e.record,field:e.column.field})}}],[{key:"type",get:function(){return"template"}}]),t}(XS);function CE(e){return(CE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _E(e,t){return!t||"object"!==CE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jE(e){return(jE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RE(e,t,n){return t&&DE(e.prototype,t),n&&DE(e,n),e}function PE(e,t){return(PE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(EE,!0),EE.exposeProperties(),EE._$name="TemplateColumn";var TE=function(e){function t(e,n){var r;return xE(this,t),(r=_E(this,jE(t).apply(this,arguments))).internalCellCls="b-time-cell",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PE(e,t)}(t,e),RE(t,null,[{key:"type",get:function(){return"time"}},{key:"fieldType",get:function(){return"date"}},{key:"fields",get:function(){return["format"]}},{key:"defaults",get:function(){return{format:"LT",minWidth:140,filterType:"time"}}}]),RE(t,[{key:"defaultRenderer",value:function(e){var t=e.value;return t?this.formatValue(t):""}},{key:"groupRenderer",value:function(e){var t=e.cellElement,n=e.groupRowFor;t.innerHTML=this.formatValue(n)}},{key:"formatValue",value:function(e){return"string"==typeof e&&(e=xt.parse(e,this.format)),xt.format(e,this.format)}},{key:"format",set:function(e){var t=this.editor;this.set("format",e),t&&(t.format=this.format)},get:function(){return this.get("format")}},{key:"defaultEditor",get:function(){return{name:this.field,type:"time",format:this.format}}}]),t}(XS);function AE(e){return(AE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ME(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IE(e,t){return!t||"object"!==AE(t)&&"function"!=typeof t?LE(e):t}function FE(e){return(FE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HE(e,t,n){return t&&NE(e.prototype,t),n&&NE(e,n),e}function BE(e,t){return(BE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(TE,!0),TE.exposeProperties(),TE._$name="TimeColumn";var zE=!1,VE=function(e){function t(e,n){var r;ME(this,t);var o=LE(r=IE(this,FE(t).apply(this,arguments)));return o.internalCellCls="b-tree-cell",o.shouldHtmlEncode=o.htmlEncode,o.tempDiv=document.createElement("div"),o.setData("htmlEncode",!1),o.renderer&&(o.originalRenderer=o.renderer),o.renderer=o.treeRenderer.bind(o),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BE(e,t)}(t,e),HE(t,null,[{key:"defaults",get:function(){return{tree:!0,hideable:!1,minWidth:150}}},{key:"fields",get:function(){return[{name:"expandIconCls",defaultValue:"b-icon b-icon-tree-expand"},{name:"collapseIconCls",defaultValue:"b-icon b-icon-tree-collapse"},{name:"collapsedFolderIconCls"},{name:"expandedFolderIconCls"},{name:"leafIconCls",defaultValue:"b-icon b-icon-tree-leaf"},{name:"editTargetSelector",defaultValue:".b-tree-cell-value"}]}},{key:"type",get:function(){return"tree"}}]),HE(t,[{key:"treeRenderer",value:function(e){var t,n,r=this,o=e.cellElement,i=e.row,a=e.record,u=e.isExport,c=a.instanceMeta(e.grid.store),s=a.href?"a":"div",l=e.value,f="",d="";if(r.originalRenderer){var p=r.originalRenderer(e);l=!1===p?o.innerHTML:p}if(u)n=null!=l?l:"";else{a.isLeaf?(o.classList.add("b-tree-leaf-cell"),(t=e.iconCls||a.iconCls||r.leafIconCls)&&(d+=t)):(i.addCls&&i.addCls("b-tree-parent-row"),o.classList.add("b-tree-parent-cell"),c.isLoadingChildren&&i.addCls("b-loading-children"),f+='<div class="b-tree-expander '.concat(c.collapsed?r.expandIconCls+" b-tree-collapsed":r.collapseIconCls+" b-tree-expanded",'"></div>'),zE=t=e.iconCls||a.iconCls||(c.collapsed?r.collapsedFolderIconCls:r.expandedFolderIconCls),t&&(f+='<div class="b-tree-icon '.concat(t,'"></div>'))),l=null!=l?l:"",r.shouldHtmlEncode&&(r.tempDiv.innerText=l,l=r.tempDiv.innerHTML),f+='<div class="b-tree-cell-value">'.concat(l,"</div>");var h=1.7*a.childLevel+(a.isLeaf?zE?1.8:t?.4:.3:0);n="<".concat(s," ").concat(a.href?'href="'.concat(a.href,'"'):""," ").concat("a"===s&&a.target?'target="'.concat(a.target,'"'):"",' class="b-tree-cell-inner ').concat(d,'" style="padding-left:').concat(h,'em">').concat(f,"</").concat(s,">")}return n}}]),t}(XS);function WE(e){return(WE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GE(e,t){return!t||"object"!==WE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UE(e){return(UE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qE(e,t){return(qE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(VE,!0),VE.exposeProperties(),VE._$name="TreeColumn";var XE=function(e){function t(){return $E(this,t),GE(this,UE(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qE(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return["iconCls","expanded","cls","rowHeight","href","target"]}}],(r=null)&&YE(n.prototype,r),o&&YE(n,o),t}(qs);function KE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ZE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}XE.exposeProperties(),XE._$name="GridRowModel";var JE=new Map,QE=new Map,eC={Grid:"GridBase",Scheduler:"SchedulerBase",Gantt:"GanttBase"},tC=/\$\d+$/,nC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r=(r=A.lowercaseFirstLetter(r||e.hasOwnProperty("$name")&&e.$name||e.name)).replace(tC,""),Array.isArray(n)||(n=[n||"Grid"]),n.forEach((function(n){var o=eC[n]||n,i=JE.get(o)||new Map,a=QE.get(o)||new Map;i.set(r,e),a.set(e,t),JE.set(o,i),QE.set(o,a)}))}},{key:"getTypeNameFeatures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Grid",t=eC[e]||e,n=JE.get(t),r={};return n&&n.forEach((function(e,t){return r[t]=e})),r}},{key:"getTypeNameDefaultFeatures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Grid",t=eC[e]||e,n=JE.get(t),r=QE.get(t),o={};return n&&r&&n.forEach((function(e,t){r.get(e)&&(o[t]=e)})),o}},{key:"getInstanceFeatures",value:function(e){var t=this;return e.classNameHierarchy().reduce((function(e,n){return Object.assign(e,t.getTypeNameFeatures(n))}),{})}},{key:"getInstanceDefaultFeatures",value:function(e){var t=this;return e.classNameHierarchy().reduce((function(e,n){return Object.entries(t.getTypeNameFeatures(n)).reduce((function(e,r){var o=KE(r,2),i=o[0],a=o[1];return t.isDefaultFeatureForTypeName(a,n)?e[i]=a:delete e[i],e}),e)}),{})}},{key:"isDefaultFeatureForTypeName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Grid",n=eC[t]||t,r=QE.get(n);return r&&r.get(e)||!1}},{key:"isDefaultFeatureForInstance",value:function(e,t){for(var n=t.classNameHierarchy().reverse(),r=null,o=0,i=n.length;o<i&&null===r;++o){var a=QE.get(n[o]);a&&a.has(e)&&(r=a.get(e))}return r||!1}},{key:"reset",value:function(){JE.clear(),QE.clear()}}],(n=null)&&ZE(t.prototype,n),r&&ZE(t,r),e}();function rC(e){return(rC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aC(e,t){return!t||"object"!==rC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uC(e,t,n){return(uC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function cC(e){return(cC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sC(e,t){return(sC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}nC._$name="GridFeatureManager";var lC=function(e){function t(){return oC(this,t),aC(this,cC(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sC(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"CellTooltip"}},{key:"defaultConfig",get:function(){return{tooltipRenderer:null}}}],(r=[{key:"construct",value:function(e,n){uC(cC(t.prototype),"construct",this).call(this,e,this.processConfig(n))}},{key:"initTip",value:function(){var e=this;e.tip=new Fu(Object.assign({forElement:e.client.element,forSelector:".b-grid-cell",hoverDelay:1e3,trackMouse:!1,cls:"b-celltooltip-tip",getHtml:e.getTooltipContent.bind(e),listeners:{pointerOver:"onPointerOver",thisObj:e}},e.initialConfig)),e.relayEvents(e.tip,["beforeshow","show"])}},{key:"onPointerOver",value:function(e){var t=e.target;return!1!==this.client.getColumnFromElement(t).tooltipRenderer}},{key:"processConfig",value:function(e){return"function"==typeof e?{tooltipRenderer:e}:e}},{key:"setConfig",value:function(e){uC(cC(t.prototype),"setConfig",this).call(this,this.processConfig(e))}},{key:"doDestroy",value:function(){this.tip&&this.tip.destroy(),uC(cC(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){e?this.tip&&(this.tip.destroy(),this.tip=null):this.initTip(),uC(cC(t.prototype),"doDisable",this).call(this,e)}},{key:"getTooltipContent",value:function(e){var t,n=e.tip,r=e.activeTarget,o=e.event,i=this,a=i.client.getRecordFromElement(r),u=i.client.getColumnFromElement(r);return i.forSelector||a!==i.lastRecord||u!==i.lastColumn?(u.tooltipRenderer?!1===(t=u.tooltipRenderer({cellElement:r,record:a,column:u,event:o,tip:n,cellTooltip:i}))&&F.deprecate("Grid","5.0.0","Returning false to indicate loading is deprecated. Please see https://bryntum.com/docs/grid/#guides/upgrades/3.0.1.md for more information"):i.tooltipRenderer&&!1!==u.tooltipRenderer&&!1===(t=i.tooltipRenderer({cellElement:r,record:a,column:u,event:o,tip:n,cellTooltip:i}))&&F.deprecate("Grid","5.0.0","Returning false to indicate loading is deprecated. Please see https://bryntum.com/docs/grid/#guides/upgrades/3.0.1.md for more information"),null!=t&&(i.lastRecord=a,i.lastColumn=u),t):i.tip._html}}])&&iC(n.prototype,r),o&&iC(n,o),t}(es);function fC(e){return(fC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dC(){var e=yC(['\n                        <div class="b-target-button" data-name="','" data-disabled="','">\n                            <i class="','"></i>\n                            ',"\n                        </div>\n                    "]);return dC=function(){return e},e}function pC(){var e=yC(['\n                <div class="b-group">\n                    <div class="b-buttons">\n                    ','\n                    </div>\n                    <div class="b-title">',"</div>\n                </div>\n            "]);return pC=function(){return e},e}function hC(){var e=yC(['\n            <div class="b-columndragtoolbar">     \n            <div class="b-title"></div>          \n            ',"\n            </div>"]);return hC=function(){return e},e}function yC(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function gC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mC(e,t){return!t||"object"!==fC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bC(e,t,n){return(bC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wC(e){return(wC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kC(e,t){return(kC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}lC._$name="CellTooltip",nC.registerFeature(lC);var SC=function(e){function t(){return gC(this,t),mC(this,wC(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kC(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ColumnDragToolbar"}},{key:"pluginConfig",get:function(){return{after:["render"]}}}],(r=[{key:"construct",value:function(e,n){e.features.columnReorder&&e.features.columnReorder.on("beforedestroy",this.onColumnReorderBeforeDestroy,this),this.grid=e,bC(wC(t.prototype),"construct",this).call(this,e,n)}},{key:"doDestroy",value:function(){var e=this;e.grid.features.columnReorder&&!e.grid.features.columnReorder.isDestroyed&&e.detachFromColumnReorder(),e.element&&e.element.remove(),e.element=null,bC(wC(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){this.initialized&&(e?this.detachFromColumnReorder():this.init()),bC(wC(t.prototype),"doDisable",this).call(this,e)}},{key:"init",value:function(){var e=this,t=e.grid;t.features.columnReorder&&(e.reorderDetacher=t.features.columnReorder.on({gridheaderdragstart:function(n){var r=n.context,o=t.columns.getById(r.element.dataset.columnId);e.showToolbar(o)},gridheaderdrag:function(t){var n=t.context;return e.onDrag(n)},gridheaderabort:function(){e.hideToolbar()},gridheaderdrop:function(t){var n=t.context;n.valid?e.hideToolbar():e.onDrop(n)},thisObj:e}),e.initialized=!0)}},{key:"onColumnReorderBeforeDestroy",value:function(){this.detachFromColumnReorder()}},{key:"detachFromColumnReorder",value:function(){var e=this;e.grid.features.columnReorder.un("beforedestroy",e.onColumnReorderBeforeDestroy,e),e.reorderDetacher&&e.reorderDetacher(),e.reorderDetacher=null}},{key:"render",value:function(){this.initialized||this.init()}},{key:"showToolbar",value:function(e){var t=this,n=t.grid.getColumnDragToolbarItems(e,[]),r=[];t.clearTimeout(t.buttonHideTimer),t.clearTimeout(t.toolbarHideTimer),n.forEach((function(e){var t=r.find((function(t){return t.text===e.group}));t||(t={text:e.group,buttons:[]},r.push(t)),t.buttons.push(e)})),t.element=xn.append(t.grid.element,t.template(r)),t.groups=r,t.buttons=n,t.column=e}},{key:"hideToolbar",value:function(){var e=this;return new Promise((function(t){e.element&&!e.toolbarHideTimer&&(e.element.classList.add("b-remove"),e.toolbarHideTimer=e.setTimeout((function(){e.toolbarHideTimer=null,e.element&&e.element.remove(),e.element=null,t()}),200))}))}},{key:"onDrag",value:function(e){var t=this;if(e.dragProxy.getBoundingClientRect().top-t.grid.element.getBoundingClientRect().top>100?t.element.classList.add("b-closer"):t.element.classList.remove("b-closer"),t.hoveringButton&&(t.hoveringButton.classList.remove("b-hover"),t.hoveringButton=null),e.targetElement&&e.targetElement.closest(".b-columndragtoolbar")){t.element.classList.add("b-hover");var n=e.targetElement.closest(".b-columndragtoolbar  .b-target-button:not([data-disabled=true])");n&&(n.classList.add("b-hover"),t.hoveringButton=n)}else t.element.classList.remove("b-hover")}},{key:"onDrop",value:function(e){var t=this;if(e.targetElement&&e.targetElement.matches(".b-columndragtoolbar .b-target-button:not([data-disabled=true])")){var n=e.targetElement,r=t.buttons.find((function(e){return e.name===n.dataset.name}));r&&(n.classList.add("b-activate"),t.buttonHideTimer=t.setTimeout((function(){t.hideToolbar(),r.onDrop({column:t.column})}),100))}else t.hideToolbar()}},{key:"template",value:function(e){return Xa.tpl(hC(),e.map((function(e){return Xa.tpl(pC(),e.buttons.map((function(e){return Xa.tpl(dC(),e.name,e.disabled,e.icon,e.text)})),e.text)})))}}])&&vC(n.prototype,r),o&&vC(n,o),t}(Wr(es));function OC(e){return(OC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xC(e,t){return!t||"object"!==OC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _C(e,t,n){return(_C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function jC(e){return(jC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DC(e,t){return(DC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}SC.featureClass="b-hascolumndragtoolbar",SC._$name="ColumnDragToolbar",nC.registerFeature(SC,we.isTouchDevice);var RC=function(e){function t(){return EC(this,t),xC(this,jC(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DC(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ColumnPicker"}},{key:"defaultConfig",get:function(){return{groupByRegion:!1,groupByTag:!1}}},{key:"pluginConfig",get:function(){return{chain:["getHeaderMenuItems","getColumnDragToolbarItems"]}}}],(r=[{key:"construct",value:function(e,n){this.grid=e,_C(jC(t.prototype),"construct",this).call(this,e,n)}},{key:"getColumnPickerItems",value:function(e){var t=this;if(t.groupByRegion)return t.grid.regions.map((function(e){var n=t.grid.getSubGrid(e).columns.topColumns;return{text:A.capitalizeFirstLetter(e),menu:t.buildColumnMenu(n),disabled:0===n.length,region:e}}));if(t.groupByTag){var n={};return e.topColumns.forEach((function(e){e.tags&&e.hideable&&e.tags.forEach((function(e){n[e]||(n[e]=1)}))})),Object.keys(n).sort().map((function(e){return{text:A.capitalizeFirstLetter(e),menu:t.buildColumnMenu(t.getColumnsForTag(e)),tag:e,onBeforeSubMenu:function(e){var n=e.item,r=e.itemEl;t.refreshTagMenu(n,r)}}}))}return t.buildColumnMenu(e.topColumns)}},{key:"getColumnsForTag",value:function(e){return this.grid.columns.records.filter((function(t){return t.tags&&t.tags.includes(e)&&!1!==t.hideable}))}},{key:"refreshTagMenu",value:function(e,t){this.getColumnsForTag(e.tag).forEach((function(t){var n=e.items.find((function(e){return e.column===t}));n&&(n.checked=!0!==t.hidden)}))}},{key:"buildColumnMenu",value:function(e){var t=this,n=e.length>0&&e[0].region,r=this.grid;return e.reduce((function(e,o){var i=t.grid.columns.visibleColumns.filter((function(e){return e.region===o.region}));if(!1!==o.hideable){var a={grid:r,text:o.text,column:o,name:o.id,checked:!0!==o.hidden,disabled:!0!==o.hidden&&1===i.length,cls:o.region!==n?"b-separator":""};n=o.region,o.children&&(a.menu=t.buildColumnMenu(o.children)),e.push(a)}return e}),[])}},{key:"getHeaderMenuItems",value:function(e,t){var n=this,r=n.grid,o=n.disabled,i=r.columns;if(!1!==e.showColumnPicker&&i.some((function(e){return e.hideable}))&&t.push({text:n.L("columnsMenu"),name:"columnPicker",icon:"b-fw-icon b-icon-columns",cls:"b-separator",weight:100,menu:n.getColumnPickerItems(i),onToggle:n.onColumnToggle,disabled:o}),!1!==e.hideable){var a=i.visibleColumns.filter((function(t){return t.region===e.region}));t.push({text:n.L("hideColumn"),icon:"b-fw-icon b-icon-hide-column",weight:101,name:"hideColumn",disabled:1===a.length||o,onItem:function(){return e.hide()}})}}},{key:"onColumnToggle",value:function(e){var t=e.menu,n=e.item,r=e.checked;if(!!n.column.hidden!=!r){n.column[r?"show":"hide"]();var o=n.grid,i=n.column,a=o.columns,u=t.items,c=a.visibleColumns.filter((function(e){return e.region===n.column.region})),s=o.features.contextMenu.currentMenu.items.find((function(e){return"hideColumn"===e.name}));if(1===c.length){var l=u.find((function(e){return e.name===c[0].id}));l&&(l.disabled=!0),s&&i.region===n.column.region&&(s.disabled=!0)}else c.forEach((function(e){var t=u.find((function(t){return t.column===e}));t&&(t.disabled=!1)})),s&&i.region===n.column.region&&(s.disabled=!1);n.menu&&n.menu.eachWidget((function(e){e.checked=r}));var f=t.owner;if(f&&f.column===i.parent){var d=u.some((function(e){return!0===e.checked}));f.checked=d}}}},{key:"getColumnDragToolbarItems",value:function(e,t){var n=this.grid.columns.visibleColumns.filter((function(t){return t.region===e.region}));return!1!==e.hideable&&n.length>1&&t.push({text:this.L("hideColumnShort"),group:this.L("Column"),icon:"b-fw-icon b-icon-hide-column",weight:101,name:"hideColumn",onDrop:function(e){return e.column.hide()}}),t}}])&&CC(n.prototype,r),o&&CC(n,o),t}(es);function PC(e){return(PC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TC(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function AC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IC(e,t){return!t||"object"!==PC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FC(e,t,n){return(FC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function LC(e){return(LC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NC(e,t){return(NC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}RC._$name="ColumnPicker",nC.registerFeature(RC,!0);var HC=function(e){function t(){return AC(this,t),IC(this,LC(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NC(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ColumnReorder"}},{key:"pluginConfig",get:function(){return{after:["render","renderContents"]}}}],(r=[{key:"construct",value:function(e,n){this.ignoreSelectors=[".b-grid-header-resize-handle",".b-field"],this.grid=e,FC(LC(t.prototype),"construct",this).call(this,e,n)}},{key:"doDestroy",value:function(){this.dragHelper&&this.dragHelper.destroy(),FC(LC(t.prototype),"doDestroy",this).call(this)}},{key:"init",value:function(){var e=this,t=e.grid,n=t.element,r=xn.children(n,".b-grid-headers");r.push.apply(r,TC(xn.children(n,".b-grid-header-children"))),e.dragHelper?e.dragHelper.containers=r:(e.dragHelper=new fw({name:"columnReorder",mode:"container",dragThreshold:10,targetSelector:".b-grid-header",outerElement:n.querySelector("header.b-grid-header-container"),containers:r,isElementDraggable:function(n){if(Boolean(xn.up(n,e.ignoreSelectors.join(",")))||e.disabled)return!1;var r=xn.up(n,this.targetSelector),o=r&&t.columns.getById(r.dataset.columnId),i=o&&0===o.childLevel&&1===t.subGrids[o.region].columns.count;return Boolean(o)&&!1!==o.draggable&&!i},ignoreSelector:".b-filter-icon,.b-grid-header-resize-handle",listeners:{dragstart:e.onDragStart,drag:e.onDrag,drop:e.onDrop,thisObj:e}}),e.relayEvents(e.dragHelper,["dragStart","drag","drop","abort"],"gridHeader"))}},{key:"onDrag",value:function(e){var t=e.context,n=e.event,r=ye.fromElement(n.target,"header");r&&r.subGrid.sealedColumns?t.valid=!1:this.grid.features.columnDragToolbar||(t.valid=Boolean(n.target.closest(".b-grid-headers")))}},{key:"onDragStart",value:function(){if(!this.grid.features.columnDragToolbar){var e=this.grid.element.querySelector(".b-grid-header-container").getBoundingClientRect();this.dragHelper.minY=e.top,this.dragHelper.maxY=e.bottom}this.grid.headerContainer.classList.add("b-dragging-header")}},{key:"onDrop",value:function(e){var t=e.context;if(!t.valid)return this.onInvalidDrop({context:t});var n=this.grid,r=t.dragging,o=xn.up(t.target,".b-grid-header"),i=n.columns.get(o.dataset.column),a=t.draggedTo.dataset.region||i.region,u=t.insertBefore,c=n.columns.getById(r.dataset.columnId),s=u?n.columns.getById(u.dataset.columnId):n.subGrids[a].columns.last.nextSibling,l=s?s.parent:n.columns.rootNode;if(n.headerContainer.classList.remove("b-dragging-header"),a!==c.region||i!==c.previousSibling&&s!==c.nextSibling){var f=c.parent&&1===c.parent.children.length&&c.parent;f&&f.parent.removeChild(f),r.remove(),c.region=a,l.insertChild(c,s)}else this.dragHelper.abort()}},{key:"onInvalidDrop",value:function(){this.grid.headerContainer.classList.remove("b-dragging-header")}},{key:"renderContents",value:function(){this.init()}},{key:"render",value:function(){this.init()}}])&&MC(n.prototype,r),o&&MC(n,o),t}(Wr(es));function BC(e){return(BC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WC(e,t){return!t||"object"!==BC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $C(e,t,n){return($C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function YC(e){return(YC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GC(e,t){return(GC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}HC.featureClass="b-column-reorder",HC._$name="ColumnReorder",nC.registerFeature(HC,!0);var UC=function(e){function t(){return zC(this,t),WC(this,YC(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GC(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ColumnResize"}},{key:"defaultConfig",get:function(){return{liveResize:"auto"}}},{key:"pluginConfig",get:function(){return[]}}],(r=[{key:"construct",value:function(e,n){var r=this;r.grid=e,$C(YC(t.prototype),"construct",this).call(this,e,n),r.resizer=new _w({name:"columnResize",targetSelector:".b-grid-header",handleSelector:".b-grid-header-resize-handle",outerElement:e.element,listeners:{beforeresizestart:r.onBeforeResizeStart,resizestart:r.onResizeStart,resizing:r.onResizing,resize:r.onResize,thisObj:r}})}},{key:"doDestroy",value:function(){this.resizer&&this.resizer.destroy(),$C(YC(t.prototype),"doDestroy",this).call(this)}},{key:"onBeforeResizeStart",value:function(){return!this.disabled}},{key:"onResizeStart",value:function(e){var t=e.context,n=this.grid,r=this.resizer,o=t.column=n.columns.getById(t.element.dataset.columnId);r.minWidth=o.minWidth,t.element.style.minWidth="",n.element.classList.add("b-column-resizing")}},{key:"onResizing",value:function(e){var t=e.context;t.valid&&this.liveResize&&(this.grid.dragResizing=!0,t.column.width=t.newWidth)}},{key:"onResize",value:function(e){var t=e.context,n=this.grid,r=t.column;if(n.element.classList.remove("b-column-resizing"),t.valid&&(this.liveResize?(n.dragResizing=!1,n.afterColumnsResized()):r.width=t.newWidth,we.isIE11&&r.parent&&r.parent.flex)){var o=r.parent;n.getHeaderElement(o.id).style.flexBasis=o.children.reduce((function(e,t){return e+n.getHeaderElement(t.id).offsetWidth}),0)+"px"}}},{key:"liveResize",set:function(e){"auto"===e&&(e=!we.isMobileSafari),this._liveResize=e},get:function(){return this._liveResize}}])&&VC(n.prototype,r),o&&VC(n,o),t}(es);function qC(e){return(qC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XC(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function KC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JC(e,t){return!t||"object"!==qC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QC(e,t,n){return(QC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ex(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ex(e){return(ex=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tx(e,t){return(tx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}UC._$name="ColumnResize",nC.registerFeature(UC,!0);var nx=function(e){function t(){return KC(this,t),JC(this,ex(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tx(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ContextMenu"}},{key:"defaultConfig",get:function(){return{headerItems:[],processHeaderItems:null,cellItems:[],processCellItems:null,triggerEvent:null,disableCellContextMenu:null}}},{key:"pluginConfig",get:function(){return{assign:["showContextMenu"],chain:["onElementContextMenu","onElementClick","onElementDblClick","onElementKeyDown"]}}}],(r=[{key:"construct",value:function(e,n){this.grid=e,QC(ex(t.prototype),"construct",this).call(this,e,n)}},{key:"doDestroy",value:function(){this.currentMenu&&this.currentMenu.destroy(),QC(ex(t.prototype),"doDestroy",this).call(this)}},{key:"onElementContextMenu",value:function(e){"contextmenu"===this.triggerEvent&&this.showContextMenu(e)}},{key:"onElementClick",value:function(e){"click"===this.triggerEvent&&this.showContextMenu(e)}},{key:"onElementDblClick",value:function(e){"dblclick"===this.triggerEvent&&this.showContextMenu(e)}},{key:"onElementKeyDown",value:function(e){if(!e.handled&&e.target.matches(".b-grid-header.b-depth-0"))switch(e.key){case" ":case"ArrowDown":this.showContextMenu(e)}}},{key:"showContextMenu",value:function(e){if(!this.disabled){var t=xn.up(e.target,".b-grid-header"),n=this.grid.getEventData(e);t?this.handleHeaderContextMenu(t,e):n&&!this.disableCellContextMenu&&this.handleCellContextMenu(n,e)}}},{key:"handleHeaderContextMenu",value:function(e,t){if(e.dataset.column){var n=this,r=n.grid,o=r.columns.getById(e.dataset.columnId);if(!1!==o.enableHeaderContextMenu){var i=[].concat(XC(n.headerItems),XC(o.headerMenuItems||[])),a=n.processHeaderItems,u={items:i,column:o,event:t,element:e};r.getHeaderMenuItems(o,i),(!a||!1!==a(u))&&i.length>0&&(t.preventDefault(),i.sort((function(e,t){return(e.weight||150)-(t.weight||150)})),i.forEach((function e(t){t.column||(t.column=o);var n=t.menu;n&&(Array.isArray(n)||(n=n.items||n.widgets),n.forEach(e))})),!1!==r.trigger("headerContextMenuBeforeShow",u)&&(n.currentMenu=me.showContextMenu("keydown"===t.type?e:[t.clientX+1,t.clientY+1],{owner:n.client,constrainTo:document,cls:"b-context-menu",items:i,scrollAction:"hide",onItem:function(e){e.source;var t=e.item,n=e.element;r.trigger("contextMenuItem",{source:r,item:t,column:o,element:n})},onToggle:function(e){e.source;var t=e.item,n=e.checked,i=e.element;r.trigger("contextMenuToggleItem",{source:r,item:t,column:o,checked:n,element:i})},onDestroy:function(){n.currentMenu=null},listeners:{show:function(e){var t=e.source;u.menu=t,r.trigger("headerContextMenuShow",u)}}})))}}}},{key:"handleCellContextMenu",value:function(e,t){var n=this,r=n.grid,o=e.cellElement,i=r.columns.getById(e.columnId);if(!1!==i.enableCellContextMenu){r.focusCell(e.cellSelector,{doSelect:!r.isSelected(e.id),event:t});var a=e.record,u=[].concat(XC(n.cellItems||[]),XC(i.cellMenuItems||[])),c=n.processCellItems,s={items:u,column:i,event:t,record:a,element:o};r.getCellMenuItems(i,a,u),(!c||!1!==c(s))&&u.length>0&&(u.forEach((function(e){e.column=i,e.record=a})),t.preventDefault(),u.sort((function(e,t){return(e.weight||150)-(t.weight||150)})),!1!==r.trigger("cellContextMenuBeforeShow",s)&&(n.currentMenu=me.showContextMenu([t.clientX+1,t.clientY+1],{owner:n.client,items:u,onBeforeItem:function(e){Object.assign(e,s)},onItem:function(e){var t=e.item;r.trigger("contextMenuItem",{source:r,item:t,column:i,record:a,cell:o})},onClose:function(e){"outside"!==e.reason&&r.element.focus()},onDestroy:function(){n.currentMenu=null},listeners:{show:function(e){var t=e.source;s.menu=t,r.trigger("cellContextMenuShow",s)}}})))}}},{key:"hideContextMenu",value:function(e){this.currentMenu&&this.currentMenu.hide(e)}},{key:"triggerEvent",get:function(){return this._triggerEvent||this.client.contextMenuTriggerEvent},set:function(e){this._triggerEvent=e}}])&&ZC(n.prototype,r),o&&ZC(n,o),t}(es);function rx(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ox(e){return(ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ix(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ax(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ux(e,t){return!t||"object"!==ox(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cx(e,t,n){return(cx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function sx(e){return(sx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lx(e,t){return(lx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}nx.featureClass="",nx._$name="ContextMenu",nC.registerFeature(nx,!0);var fx=function(e){function t(){return ix(this,t),ux(this,sx(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lx(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Filter"}},{key:"pluginConfig",get:function(){return{chain:["renderHeader","getCellMenuItems","getHeaderMenuItems","onElementClick"]}}}],(r=[{key:"construct",value:function(e,n){var r=this;r.grid=e,r.store=e.store,r.closeFilterEditor=r.closeFilterEditor.bind(r),cx(sx(t.prototype),"construct",this).call(this,e,n),r.store.on({filter:r.onStoreFilter},r),n&&"object"===ox(n)&&r.store.filter(n,null,r.client.isConfiguring)}},{key:"doDestroy",value:function(){var e=this;e.filterTip&&e.filterTip.destroy(),e.filterEditorPopup&&e.filterEditorPopup.destroy(),e.store.un({sort:e.onStoreFilter},e),cx(sx(t.prototype),"doDestroy",this).call(this)}},{key:"refreshHeaders",value:function(e){var t=this,n=t.grid,r=n.headerContainer;if(r){xn.children(r,".b-filter-icon.b-latest").forEach((function(e){return e.classList.remove("b-latest")})),t.filterTip||(t.filterTip=new Fu({forElement:r,forSelector:".b-filter-icon",getHtml:function(e){return e.activeTarget.dataset.filterText}}));var o=!0,i=!1,a=void 0;try{for(var u,c=n.columns[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;if(!1!==s.filterable){var l=t.store.filters.getBy("property",s.field),f=s.element;if(f){var d=s.textWrapper,p=d&&d.querySelector(".b-filter-icon"),h=void 0;h=l?t.L("filter")+": "+("string"==typeof l?l:"".concat(l.operator," ").concat(l.displayValue||l.value||"")):t.L("applyFilter"),p?p.dataset.filterText=h:(p=xn.createElement({parent:d,tag:"div",className:"b-filter-icon",dataset:{filterText:h}}),f.classList.add("b-filterable")),s.field===t.store.latestFilterField&&p.classList.add("b-latest"),f.classList[l?"add":"remove"]("b-filter")}s.meta.isFiltered=!!l}}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}e&&n.refreshRows()}}},{key:"applyFilter",value:function(e){var t=this.store,n=this.grid.columns.get(e.property);"function"==typeof n.filterable?t.filter({filterBy:function(t){return n.filterable(Object.assign({},e,{record:t}))},value:e.value,property:e.property,operator:e.operator,displayValue:e.displayValue}):t.filter(e)}},{key:"getPopupDateItems",value:function(e,t,n,r,o,i,a){var u=this,c=i,s=a;function l(e){var t=e.source,n=e.value;null==n?a():(u.applyFilter({property:r,operator:t.operator,value:n,displayValue:t._value}),i())}return[{type:"date",ref:"on",placeholder:u.L("on"),clearable:!0,label:'<i class="b-fw-icon b-icon-filter-equal"></i>',value:t&&"="===t.operator?t.value:n,operator:"=",onChange:l,onClose:c,onClear:s},{type:"date",ref:"before",placeholder:u.L("before"),clearable:!0,label:'<i class="b-fw-icon b-icon-filter-before"></i>',value:t&&"<"===t.operator?t.value:null,operator:"<",onChange:l,onClose:c,onClear:s},{type:"date",ref:"after",cls:"b-last-row",placeholder:u.L("after"),clearable:!0,label:'<i class="b-fw-icon b-icon-filter-after"></i>',value:t&&">"===t.operator?t.value:null,operator:">",onChange:l,onClose:c,onClear:s}]}},{key:"getPopupNumberItems",value:function(e,t,n,r,o,i,a){var u=this,c=i,s=a;function l(e){var t=e.source,n=e.value;null==n?a():(u.applyFilter({property:r,operator:t.operator,value:n}),i())}return[{type:"number",placeholder:u.L("equals"),clearable:!0,label:'<i class="b-fw-icon b-icon-filter-equal"></i>',value:t&&"="===t.operator?t.value:n,operator:"=",onChange:l,onEsc:c,onClear:s},{type:"number",placeholder:u.L("lessThan"),clearable:!0,label:'<i class="b-fw-icon b-icon-filter-less"></i>',value:t&&"<"===t.operator?t.value:null,operator:"<",onChange:l,onEsc:c,onClear:s},{type:"number",cls:"b-last-row",placeholder:u.L("moreThan"),clearable:!0,label:'<i class="b-fw-icon b-icon-filter-more"></i>',value:t&&">"===t.operator?t.value:null,operator:">",onChange:l,onEsc:c,onClear:s}]}},{key:"getPopupStringItems",value:function(e,t,n,r,o,i,a){var u=this;return[{type:e,cls:"b-last-row",placeholder:u.L("filter"),clearable:!0,label:'<i class="b-fw-icon b-icon-filter-equal"></i>',value:t?t.value||t:n,onChange:function(e){var t=e.value;""===t?a():(u.applyFilter({property:r,value:t}),i())},onClose:i,onClear:a}]}},{key:"getPopupItems",value:function(e,t,n,r,o,i,a){switch(e){case"date":return this.getPopupDateItems.apply(this,arguments);case"number":return this.getPopupNumberItems.apply(this,arguments);default:return this.getPopupStringItems.apply(this,arguments)}}},{key:"showFilterEditor",value:function(e,t){var n=this,r=n.store,o="string"==typeof e?n.grid.columns.getById(e):e,i=o.element,a=r.modelClass.fieldMap[o.field],u=r.filters.getBy("property",o.field),c={string:"text",number:"number",date:"date"}[a&&a.type||o.filterType||o.type||"string"]||"text";!1!==o.filterable&&(n.closeFilterEditor(),n.filterEditorPopup=me.openPopup(i,{owner:this.grid,width:"16em",cls:"b-filter-popup",scrollAction:"realign",items:n.getPopupItems(c,u,t,o.field,n.store,n.closeFilterEditor,(function(){n.store.removeFieldFilter(o.field),n.closeFilterEditor()}))}))}},{key:"closeFilterEditor",value:function(){this.filterEditorPopup&&this.filterEditorPopup.setTimeout(this.filterEditorPopup.destroy),this.filterEditorPopup=null}},{key:"getMenuDateItems",value:function(e,t){var n=this,r=t[e.field],o=function(t){n.applyFilter({property:e.field,operator:t,value:r,displayValue:e.formatValue?e.formatValue(r):r})};return[{text:n.L("on"),icon:"b-fw-icon b-icon-filter-equal",cls:"b-separator",name:"filterDateEquals",disabled:n.disabled,onItem:function(){return o("=")}},{text:n.L("before"),icon:"b-fw-icon b-icon-filter-before",name:"filterDateBefore",disabled:n.disabled,onItem:function(){return o("<")}},{text:n.L("after"),icon:"b-fw-icon b-icon-filter-after",name:"filterDateAfter",disabled:n.disabled,onItem:function(){return o(">")}}]}},{key:"getMenuNumberItems",value:function(e,t){var n=this,r=function(r){n.applyFilter({property:e.field,operator:r,value:t[e.field]})};return[{text:n.L("equals"),icon:"b-fw-icon b-icon-filter-equal",cls:"b-separator",name:"filterNumberEquals",disabled:n.disabled,onItem:function(){return r("=")}},{text:n.L("lessThan"),icon:"b-fw-icon b-icon-filter-less",name:"filterNumberLess",disabled:n.disabled,onItem:function(){return r("<")}},{text:n.L("moreThan"),icon:"b-fw-icon b-icon-filter-more",name:"filterNumberMore",disabled:n.disabled,onItem:function(){return r(">")}}]}},{key:"getMenuStringItems",value:function(e,t){var n=this;return[{text:this.L("equals"),icon:"b-fw-icon b-icon-filter-equal",cls:"b-separator",name:"filterStringEquals",disabled:this.disabled,onItem:function(){n.applyFilter({property:e.field,value:t[e.field]})}}]}},{key:"getCellMenuItems",value:function(e,t,n){var r=this,o=t.getFieldDefinition(e.field);if(!1!==e.filterable){var i=[];switch(e.meta.isFiltered&&i.push({text:r.L("removeFilter"),icon:"b-fw-icon b-icon-clear",cls:"b-separator",name:"filterRemove",disabled:r.disabled,onItem:function(){r.store.removeFieldFilter(e.field)}}),e.filterType||e.type||o&&o.type){case"date":i.push.apply(i,rx(r.getMenuDateItems.apply(r,arguments)));break;case"number":i.push.apply(i,rx(r.getMenuNumberItems.apply(r,arguments)));break;default:i.push.apply(i,rx(r.getMenuStringItems.apply(r,arguments)))}e.meta.isFiltered&&i.length>1&&(i[1].cls=""),n.push.apply(n,i)}}},{key:"getHeaderMenuItems",value:function(e,t){var n=this;e.meta.isFiltered?(t.push({text:n.L("editFilter"),name:"editFilter",icon:"b-fw-icon b-icon-filter",cls:"b-separator",disabled:n.disabled,onItem:function(){n.showFilterEditor(e)}}),t.push({text:n.L("removeFilter"),name:"removeFilter",icon:"b-fw-icon b-icon-remove",disabled:n.disabled,onItem:function(){n.store.removeFieldFilter(e.field)}})):!1!==e.filterable&&t.push({text:n.L("filter"),name:"filter",icon:"b-fw-icon b-icon-filter",cls:"b-separator",disabled:n.disabled,onItem:function(){n.showFilterEditor(e)}})}},{key:"onStoreFilter",value:function(){this.refreshHeaders(!1)}},{key:"renderHeader",value:function(){this.refreshHeaders(!1)}},{key:"onElementClick",value:function(e){var t=e.target;if(this.filterEditorPopup&&this.closeFilterEditor(),t.classList.contains("b-filter-icon")){var n=xn.up(t,".b-grid-header");return this.showFilterEditor(n.dataset.columnId),!1}}}])&&ax(n.prototype,r),o&&ax(n,o),t}(es);function dx(e){return(dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function px(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yx(e,t){return!t||"object"!==dx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gx(e,t,n){return(gx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function vx(e){return(vx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mx(e,t){return(mx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}fx._$name="Filter",nC.registerFeature(fx);var bx=function(e){function t(){return px(this,t),yx(this,vx(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mx(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"FilterBar"}},{key:"defaultConfig",get:function(){return{keyStrokeFilterDelay:300,clearStoreFiltersOnHide:!0}}},{key:"pluginConfig",get:function(){return{before:["onElementKeyDown"],chain:["renderHeader","getHeaderMenuItems"]}}}],(r=[{key:"construct",value:function(e,n){var r=this;Object.assign(r,{filterFieldCls:"b-filter-bar-field",filterFieldInputCls:"b-filter-bar-field-input",filterableColumnCls:"b-filter-bar-enabled",filterFieldInputSelector:".b-filter-bar-field-input",filterableColumnSelector:".b-filter-bar-enabled",filterParseRegExp:/^\s*([<>=*])?(.*)$/,storeTrackingSupended:0,store:e.store,grid:e}),r.onColumnFilterFieldChange=r.onColumnFilterFieldChange.bind(r),gx(vx(t.prototype),"construct",this).call(this,e,Array.isArray(n)?{filter:n}:n),r.store.on({filter:r.onStoreFilter,thisObj:r}),r.filter&&r.store.filter(r.filter),r.gridDetacher=e.on("beforeelementclick",r.onBeforeElementClick,r)}},{key:"doDestroy",value:function(){this.destroyFilterBar(),this.gridDetacher&&this.gridDetacher(),gx(vx(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){var n=this,r=this.grid.columns;r&&r.forEach((function(t){var r=n.getColumnFilterField(t);r&&(r.disabled=e)})),gx(vx(t.prototype),"doDisable",this).call(this,e)}},{key:"destroyFilterBar",value:function(){this.grid.columns&&this.grid.columns.forEach(this.destroyColumnFilterField,this)}},{key:"hideFilterBar",value:function(){var e=this,t=e.grid.columns;e.clearStoreFiltersOnHide&&e.suspendStoreTracking(),t&&t.forEach((function(t){return e.hideColumnFilterField(t,!0)})),e.grid.store.filter(),e.clearStoreFiltersOnHide&&e.resumeStoreTracking(),e.hidden=!0}},{key:"showFilterBar",value:function(){this.renderFilterBar(),this.hidden=!1}},{key:"toggleFilterBar",value:function(){this.hidden?this.showFilterBar():this.hideFilterBar()}},{key:"renderFilterBar",value:function(){var e=this;this.grid.columns.visibleColumns.forEach((function(t){return e.renderColumnFilterField(t)})),this.rendered=!0}},{key:"renderColumnFilterField",value:function(e){var t=this,n=t.grid,r=t.getColumnFilterable(e);if(r&&!e.hidden){var o=e.element,i=t.getColumnFilterField(e);if(i)t.onColumnFilterFieldChange({source:i,value:i.value}),i.render(o),i.show();else{var a=n.store.filters.getBy("property",e.field),u="".concat(e.filterType||"text","field");i=me.append(Object.assign({type:u,owner:t.grid,clearable:!0,column:e,name:e.field,value:a&&t.buildFilterString(a),cls:t.filterFieldCls,inputCls:t.filterFieldInputCls,keyStrokeChangeDelay:t.keyStrokeFilterDelay,onChange:t.onColumnFilterFieldChange,onClear:t.onColumnFilterFieldChange,disabled:t.disabled},r.filterField),o)[0],t.setColumnFilterField(e,i)}o.classList.add(t.filterableColumnCls)}}},{key:"updateColumnFilterFields",value:function(){var e,t,n=this.grid,r=!0,o=!1,i=void 0;try{for(var a,u=n.columns[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;(e=this.getColumnFilterField(c))&&(t=n.store.filters.getBy("property",c.field),e.value=t&&this.buildFilterString(t)||"")}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}}},{key:"getColumnFilterable",value:function(e){if(!e.isRoot&&!1!==e.filterable&&e.field)return"function"==typeof e.filterable&&(e.filterable={filterFn:e.filterable}),e.filterable}},{key:"destroyColumnFilterField",value:function(e){var t=this.getColumnFilterField(e);t&&(this.hideColumnFilterField(e),t.destroy(),this.setColumnFilterField(e,void 0))}},{key:"hideColumnFilterField",value:function(e,t){var n=this.grid.store,r=e.element,o=this.getColumnFilterField(e);o&&(o.hide(),this.clearStoreFiltersOnHide&&e.field&&n.removeFieldFilter(e.field,t),r.classList.remove(this.filterableColumnCls))}},{key:"getColumnFilterField",value:function(e){return this._columnFilters&&this._columnFilters[e.data.id]}},{key:"setColumnFilterField",value:function(e,t){this._columnFilters=this._columnFilters||{},this._columnFilters[e.data.id]=t}},{key:"parseFilterValue",value:function(e){var t=String(e).match(this.filterParseRegExp);return{operator:t[1]||"*",value:t[2]}}},{key:"buildFilterString",value:function(e){var t;return e&&!e.initialConfig.filterBy&&(t=("*"===e.operator?"":e.operator)+e.value),t}},{key:"onStoreFilter",value:function(){!this.storeTrackingSupended&&this.rendered&&this.updateColumnFilterFields()}},{key:"suspendStoreTracking",value:function(){this.storeTrackingSupended++}},{key:"resumeStoreTracking",value:function(){this.storeTrackingSupended--}},{key:"renderHeader",value:function(){this.renderFilterBar()}},{key:"onElementKeyDown",value:function(e){if(!e.handled&&e.target.matches(this.filterFieldInputSelector))switch(e.key){case"ArrowLeft":case"ArrowRight":e.handled=!0}}},{key:"onBeforeElementClick",value:function(e){if(e.event.target.closest("."+this.filterFieldCls))return!1}},{key:"onColumnFilterFieldChange",value:function(e){var t=e.source,n=e.value,r=this,o=r.grid.store,i=r.getColumnFilterable(t.column);r.suspendStoreTracking(),null==n||""===n||Array.isArray(n)&&0===n.length?o.removeFieldFilter(t.name):i.filterFn?o.filter({filterBy:function(e){return i.filterFn({property:t.name,value:n,record:e})},property:t.name}):o.filter(Object.assign({property:t.name},r.parseFilterValue(n))),r.resumeStoreTracking()}},{key:"getHeaderMenuItems",value:function(e,t){var n=this;t.push({text:n.L(n.hidden?"enableFilterBar":"disableFilterBar"),name:"toggleFilterBar",icon:"b-fw-icon b-icon-filter",cls:"b-separator",onItem:function(){return n.toggleFilterBar()}})}}])&&hx(n.prototype,r),o&&hx(n,o),t}(es);function wx(e){return(wx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kx(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Sx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ox(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ex(e,t){return!t||"object"!==wx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cx(e,t,n){return(Cx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function xx(e){return(xx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _x(e,t){return(_x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}bx.featureClass="b-filter-bar",bx._$name="FilterBar",nC.registerFeature(bx);var jx=function(e){function t(){return Sx(this,t),Ex(this,xx(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_x(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Group"}},{key:"defaultConfig",get:function(){return{field:null,renderer:null}}},{key:"pluginConfig",get:function(){return{assign:["collapseAll","expandAll"],chain:["renderHeader","getHeaderMenuItems","getColumnDragToolbarItems","onElementTouchStart","onElementClick","onElementKeyDown"],override:["onStoreDataChange"]}}}],(r=[{key:"construct",value:function(e,n){var r=this;e.features.tree||(r._thisIsAUsedExpression(e.features.groupSummary),n=r.processConfig(n),Object.assign(r,{grid:e,rowManager:e.rowManager,store:e.store}),Cx(xx(t.prototype),"construct",this).call(this,e,n),r.store.on({group:r.onStoreGroup,groupingoff:r.onStoreGroupingOff,thisObj:r}),r.rowManager.on({rendercell:r.renderCell,thisObj:r}))}},{key:"processConfig",value:function(e){return"string"==typeof e?{field:e,ascending:null}:e}},{key:"setConfig",value:function(e){null===e?this.store.clearGroupers():Cx(xx(t.prototype),"setConfig",this).call(this,this.processConfig(e))}},{key:"doDestroy",value:function(){Cx(xx(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){var n=this.store;if(e&&n.isGrouped){var r=n.sorters;r.unshift.apply(r,kx(n.groupers)),n.clearGroupers(),n.sort(r)}Cx(xx(t.prototype),"doDisable",this).call(this,e)}},{key:"toggleCollapse",value:function(e,t){this.internalToggleCollapse(e,t)}},{key:"internalToggleCollapse",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.store,i=o.getById(e),a=i.meta;void 0!==a.groupRowFor&&((t=void 0===t?!a.collapsed:t)?o.excludeGroupRecords(i):o.includeGroupRecords(i),a.collapsed=t,r.grid.trigger("toggleGroup",{groupRecord:i,collapse:t}),n||r.rowManager.renderFromRecord(i))}},{key:"collapseAll",value:function(){var e=this;e.store.isGrouped&&!e.disabled&&(e.store.groupRecords.forEach((function(t){return e.internalToggleCollapse(t,!0,!0)})),e.grid.refreshRows(!0))}},{key:"expandAll",value:function(){var e=this;e.store.isGrouped&&!e.disabled&&(e.store.groupRecords.forEach((function(t){return e.internalToggleCollapse(t,!1,!0)})),e.grid.refreshRows())}},{key:"renderCell",value:function(e){if(this.store.isGrouped&&!this.disabled){var t=e.cellElement,n=e.rowElement,r=e.column,o=this.grid,i=e.record.meta,a=o.columns.visibleColumns[0],u=o.subGrids[o.regions[0]].columns.visibleColumns;i.hasOwnProperty("groupRowFor")?(r.clearCell(t),n.classList[i.collapsed?"add":"remove"]("b-grid-group-collapsed"),n.classList.add("b-group-row"),("rownumber"===a.type&&r===u[1]||"rownumber"!==a.type&&r===u[0])&&t.classList.add("b-group-title"),this.buildGroupHeader(e)):t===n.firstElementChild&&(n.classList.remove("b-group-row"),n.classList.remove("b-grid-group-collapsed"),t.classList.remove("b-group-title"))}}},{key:"buildGroupHeader",value:function(e){var t=this,n=e.record,r=e.cellElement,o=e.column,i=e.persist,a=t.grid,u=n.meta,c=u.childCount-(a.features.groupSummary?1:0),s=a.columns.visibleColumns[0],l=o&&a.subGrids[a.regions[0]].columns.visibleColumns,f="rownumber"===s.type&&o===l[1]||"rownumber"!==s.type&&o===l[0],d=null,p=!0;if(i||o){var h=a.columns.get(u.groupField);h&&h.groupRenderer?f&&(d=h.groupRenderer(Object.assign({},e,{groupRowFor:u.groupRowFor,groupRecords:n.groupChildren,groupColumn:h,count:c})),p=!1):t.groupRenderer&&(d=t.groupRenderer(Object.assign({},e,{groupRowFor:u.groupRowFor,groupRecords:n.groupChildren,groupColumn:h,count:c,isFirstColumn:f}))),f&&null==d&&p&&(d="".concat(null==u.groupRowFor?"":u.groupRowFor," (").concat(c,")"))}else t.groupRenderer&&(d=t.groupRenderer(e));return"string"==typeof d&&(r.innerHTML=d),r.childElementCount>0&&(r._hasHtml=!0),r.innerHTML}},{key:"renderHeader",value:function(e){var t=this.store,n=this.grid;if(t.isGrouped){var r=!0,o=!1,i=void 0;try{for(var a,u=t.groupers[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value,s=n.columns.get(c.field),l=s&&n.getHeaderElement(s.id);l&&(l.classList.add("b-group"),l.classList.add(c.ascending?"b-asc":"b-desc"))}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}}}},{key:"getHeaderMenuItems",value:function(e,t){var n=this,r=n.store;!1!==e.groupable&&t.push({text:n.L("groupAscending"),icon:"b-fw-icon b-icon-group-asc",name:"groupAsc",cls:"b-separator",weight:110,disabled:n.disabled,onItem:function(e){var t=e.item.column;return r.group(t.field,!0)}},{text:n.L("groupDescending"),icon:"b-fw-icon b-icon-group-desc",name:"groupDesc",weight:110,disabled:n.disabled,onItem:function(e){var t=e.item.column;return r.group(t.field,!1)}}),r.isGrouped&&t.push({text:n.L("stopGrouping"),icon:"b-fw-icon b-icon-clear",name:"groupRemove",cls:e.groupable?"":"b-separator",weight:110,disabled:n.disabled,onItem:function(e){return e.item.column,r.clearGroupers()}})}},{key:"getColumnDragToolbarItems",value:function(e,t){var n=this,r=n.store;t.push({text:n.L("groupAscendingShort"),group:n.L("Group"),icon:"b-icon b-icon-group-asc",name:"groupAsc",cls:"b-separator",weight:110,disabled:n.disabled,onDrop:function(e){var t=e.column;return r.group(t.field,!0)}}),t.push({text:n.L("groupDescendingShort"),group:n.L("Group"),icon:"b-icon b-icon-group-desc",name:"groupDesc",weight:110,disabled:n.disabled,onDrop:function(e){var t=e.column;return r.group(t.field,!1)}});var o=r.groupers&&r.groupers.some((function(t){return t.field===e.field}))&&!n.disabled;return t.push({text:n.L("stopGroupingShort"),group:n.L("Group"),icon:"b-icon b-icon-clear",name:"groupRemove",disabled:!o,weight:110,onDrop:function(e){var t=e.column;return r.removeGrouper(t.field)}}),t}},{key:"onStoreGroup",value:function(e){var t=e.groupers,n=this.grid,r=n.element,o=r&&xn.children(r,".b-grid-header.b-group");if(r){var i=!0,a=!1,u=void 0;try{for(var c,s=o[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var l=c.value;xn.removeClasses(l,["b-group","b-asc","b-desc"])}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}if(t){var f=!0,d=!1,p=void 0;try{for(var h,y=t[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var g=h.value,v=n.getHeaderElementByField(g.field);v&&xn.addClasses(v,["b-group",g.ascending?"b-asc":"b-desc"])}}catch(e){d=!0,p=e}finally{try{f||null==y.return||y.return()}finally{if(d)throw p}}}}}},{key:"onStoreGroupingOff",value:function(){var e=xn.children(this.grid.element,".b-grid-header.b-group"),t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;xn.removeClasses(a,["b-group","b-asc","b-desc"])}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.grid.refreshRows()}},{key:"onElementTouchStart",value:function(e){var t=e.target,n=xn.up(t,".b-grid-header"),r=n&&this.grid.getColumnFromElement(n);e.touches.length>1&&r&&!1!==r.groupable&&!this.disabled&&this.store.group(r.field)}},{key:"onElementClick",value:function(e){var t=this.store,n=e.target,r=xn.up(n,".b-group-row"),o=xn.up(n,".b-grid-header"),i=o&&o.dataset.column;if(!n.classList.contains("b-resizer")&&!this.disabled){if(o&&i){var a=t.groupers&&t.groupers.find((function(e){return e.field===i}));if(a&&!e.shiftKey)return t.group(i,!a.ascending),!1;e.shiftKey&&!1!==this.grid.columns.get(i).groupable&&(e.altKey?t.removeGrouper(i):t.group(i)),e.preventDefault()}return r?(this.internalToggleCollapse(tg.get(r).id),!1):void 0}}},{key:"onElementKeyDown",value:function(e){var t=this;!t.disabled&&t.store.isGrouped&&e.target===t.client.element&&" "===e.key&&t.grid.focusedCell&&(e.preventDefault(),t.internalToggleCollapse(t.grid.focusedCell.id))}},{key:"onStoreDataChange",value:function(e){var t=e.source;t.isGrouped&&t.count>0||this.overridden.onStoreDataChange(e)}},{key:"renderer",set:function(e){this.groupRenderer=e}},{key:"field",set:function(e){this._field=e,this.store.group(e,this.ascending)},get:function(){return this._field}}])&&Ox(n.prototype,r),o&&Ox(n,o),t}(es);function Dx(e){return(Dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Px(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tx(e,t){return!t||"object"!==Dx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ax(e){return(Ax=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mx(e,t){return(Mx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}jx._$name="Group",nC.registerFeature(jx,!0,["Grid","Scheduler"]);var Ix=function(e){return function(e){function t(){return Rx(this,t),Tx(this,Ax(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mx(e,t)}(t,e),n=t,(r=[{key:"generateHtml",value:function(e,t,n){var r=this.store,o=e.summaries||(e.sum?[{sum:e.sum,renderer:e.summaryRenderer}]:[]),i='<table class="'.concat(n,'">');return o.forEach((function(n){var o=n.sum,a=null;switch(!0===o&&(o="sum"),o){case"sum":case"add":a=r.sum(e.field,t);break;case"max":a=r.max(e.field,t);break;case"min":a=r.min(e.field,t);break;case"average":case"avg":a=r.average(e.field,t);break;case"count":a=t.length;break;case"countNotEmpty":a=t.reduce((function(t,n){var r=n[e.field];return t+(null!=r?1:0)}),0)}if("function"==typeof o&&(a=t.reduce(o,"seed"in n?n.seed:0)),null!==a){var u,c=n.renderer?n.renderer({config:n,sum:a}):a,s=n.label?'<td class="b-grid-summary-label">'.concat(n.label,"</td>"):"";u=String(c).includes("<td>")?c:s?"".concat(s,'<td class="').concat("b-grid-summary-value",'">').concat(c,"</td>"):'<td colspan="2" class="'.concat("b-grid-summary-value",'">').concat(c,"</td>"),i+="<tr>".concat(u,"</tr>")}})),i+"</table>"}}])&&Px(n.prototype,r),o&&Px(n,o),t}(e||Y)};function Fx(e){return(Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hx(e,t){return!t||"object"!==Fx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bx(e,t,n){return(Bx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function zx(e){return(zx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vx(e,t){return(Vx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wx=function(e){function t(){return Lx(this,t),Hx(this,zx(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vx(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"GroupSummary"}}],(r=[{key:"construct",value:function(e,n){var r=this;if(Object.assign(r,{grid:e,store:e.store}),Bx(zx(t.prototype),"construct",this).call(this,e,n),!e.features.group)throw new Error("Requires Group feature to work, please enable");r.store.on({update:r.onStoreUpdate,prio:1,thisObj:r}),r.grid.rowManager.on({beforerenderrow:r.onBeforeRenderRow,rendercell:r.renderCell,thisObj:r})}},{key:"doDisable",value:function(e){this.store.useGroupFooters=!e,this.isConfiguring||this.store.group(),Bx(zx(t.prototype),"doDisable",this).call(this,e)}},{key:"onBeforeRenderRow",value:function(e){var t=e.row,n=e.record;t.isGroupFooter&&!n.meta.hasOwnProperty("groupFooterFor")&&(t.isGroupFooter=!1,t.removeCls("b-group-footer"),t.forceInnerHTML=!0)}},{key:"renderCell",value:function(e){var t=e.column,n=e.cellElement,r=e.rowElement,o=e.row,i=e.record,a=e.size;if(this.store.isGrouped&&i.meta.hasOwnProperty("groupFooterFor")){r.classList.add("b-group-footer"),o.isGroupFooter=!0;var u=this.updateSummaryHtml(n,t,i.meta.groupRecord.groupChildren),c="number"==typeof u?u:u.count;c>1&&(a.height=this.grid.rowHeight+c*this.grid.rowHeight*.1),u.height&&(a.height+=u.height)}}},{key:"updateSummaryHtml",value:function(e,t,n){(n=n.slice()).pop();var r=this.generateHtml(t,n,"b-grid-group-summary");return e.children.length?xn.sync(r,e.firstElementChild):e.innerHTML=r,t.summaries?t.summaries.length:t.sum?1:0}},{key:"onStoreUpdate",value:function(e){var t=this,n=e.source,r=e.changes;if(!this.disabled&&n.isGrouped){if(r&&n.groupers.find((function(e){return e.field in r})))return;Object.keys(r).some((function(e){var n=t.grid.columns.get(e);return Boolean(n)&&(Boolean(n.sum)||Boolean(n.summaries))}))&&(this.grid.forceFullRefresh=!0)}}}])&&Nx(n.prototype,r),o&&Nx(n,o),t}(Ix(es));function $x(e){return($x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Gx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ux(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qx(e,t){return!t||"object"!==$x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xx(e,t,n){return(Xx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Kx(e){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zx(e,t){return(Zx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Wx.featureClass="b-group-summary",Wx._$name="GroupSummary",nC.registerFeature(Wx);var Jx=function(e){function t(){return Gx(this,t),qx(this,Kx(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zx(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"QuickFind"}},{key:"defaultConfig",get:function(){return{mode:"header",find:""}}},{key:"pluginConfig",get:function(){return{chain:["onElementKeyDown","onElementKeyPress","onCellNavigate"]}}}],(r=[{key:"construct",value:function(e,n){this.grid=e,this.store=e.store,Xx(Kx(t.prototype),"construct",this).call(this,e,n)}},{key:"doDisable",value:function(e){e&&this.clear(),Xx(Kx(t.prototype),"doDisable",this).call(this,e)}},{key:"showQuickFind",value:function(){var e=this,t=e.grid.getHeaderElement(e.columnId);if(t){if(!e.headerField){var n=Yx(xn.createElement({tag:"div",className:"b-quick-hit-header",children:[{tag:"div",className:"b-quick-hit-field"},{tag:"div",className:"b-quick-hit-badge"}]},!0),3),r=n[0],o=n[1],i=n[2];"header"===e.mode?t.appendChild(r):(r.className+=" b-quick-hit-mode-grid",e.grid.element.appendChild(r)),e.headerField={header:r,field:o,badge:i,colHeader:t}}e.headerField.field.innerHTML=e.find,e.headerField.badge.innerHTML=e.found.length,t.classList.add("b-quick-find-header"),e.renderListenerInitialized||(e.grid.rowManager.on({rendercell:e.renderCell,thisObj:e}),e.renderListenerInitialized=!0)}}},{key:"hideQuickFind",value:function(){var e=this,t=!0,n=!1,r=void 0;try{for(var o,i=(e.prevFound||e.found)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,u=e.grid.getRowById(a.id);u&&u.renderCell(u.getCell(e.columnId),a.data)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}e.headerField&&(e.headerField.header.parentNode.removeChild(e.headerField.header),e.headerField.colHeader.classList.remove("b-quick-find-header"),e.headerField=null),e.renderListenerInitialized&&(e.grid.rowManager.un({rendercell:e.renderCell},e),e.renderListenerInitialized=!1),e.grid.trigger("hideQuickFind")}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.columnId,n=this,r=n.grid.columns.getById(t)||n.grid.columns.get(t),o=n.store.findByField(r.field,e),i=1,a=n.grid;Object.assign(n,{foundMap:{},prevFound:n.found,found:o,find:e,columnId:r.id}),e?n.showQuickFind():n.hideQuickFind(),n.currentColumn&&n.currentColumn!==r&&(n.currentColumn.disableHtmlEncode=!1);var u=!0,c=!1,s=void 0;try{for(var l,f=xn.children(a.element,".b-quick-hit")[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var d=l.value;d.classList.remove("b-quick-hit"),d.classList.remove("b-quick-hit-cell");var p=tg.get(d).row;p.renderCell(d)}}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}if(r.disableHtmlEncode=!0,n.currentColumn=r,o){o.length>0&&n.gotoClosestHit(a.focusedCell,o);var h=!0,y=!1,g=void 0;try{for(var v,m=o[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var b=v.value;n.foundMap[b.id]=i++;var w=a.getRowById(b.data.id);if(w&&w.renderCell(w.getCell(r.id)),i>1e3)break}}catch(e){y=!0,g=e}finally{try{h||null==m.return||m.return()}finally{if(y)throw g}}n.grid.trigger("quickFind",{find:e,found:o})}}},{key:"clear",value:function(){this.found&&this.found.length&&this.search("")}},{key:"gotoHit",value:function(e){var t=this.grid,n=this.found[e];return n&&t.focusCell({columnId:this.columnId,id:n.id}),!!n}},{key:"gotoClosestHit",value:function(e,t){var n=e?this.grid.store.indexOf(e.id):0,r=t.slice().sort((function(e,t){return Math.abs(e.index-n)-Math.abs(t.index-n)}));this.gotoHit(t.indexOf(r[0]))}},{key:"gotoFirstHit",value:function(){this.gotoHit(0)}},{key:"gotoLastHit",value:function(){this.gotoHit(this.found.length-1)}},{key:"gotoNextHit",value:function(){var e=this.grid,t=e._focusedCell?e._focusedCell.id:e.lastFocusedCell.id,n=e.store.indexOf(t)||0,r=this.found.find((function(e){return e.index>n}));r?e.focusCell({columnId:this.columnId,id:r.id}):this.gotoFirstHit()}},{key:"gotoPrevHit",value:function(){var e,t=this.grid,n=t._focusedCell?t._focusedCell.id:t.lastFocusedCell.id,r=t.store.indexOf(n)||0,o=this.found;if(o.length){for(var i=o.length-1;i--;i>=0)if(o[i].index<r){e=o[i];break}e?t.focusCell({columnId:this.columnId,id:e.id}):this.gotoLastHit()}}},{key:"renderCell",value:function(e){var t=this,n=e.cellElement,r=t.foundMap&&t.columnId===e.column.id&&t.foundMap[e.record.id];if(r){var o=e.column.htmlEncode||e.column.shouldHtmlEncode;if(n.classList.add("b-quick-hit"),o){var i=xn.down(n,".b-grid-cell-value,.b-tree-cell-value")||n,a=i.innerText,u=a&&a.toLowerCase().indexOf(t.find.toLowerCase());if(u>-1){var c=u+t.find.length,s=a.slice(u,c),l="";" "===a[u-1]&&(l="&nbsp;"),a=a.slice(0,u)+'<span class="b-quick-hit-text">'.concat(l).concat(s,"</span>")+a.slice(c),i.innerHTML=a+'<div class="b-quick-hit-cell-badge">'.concat(r,"</div>")}else n.classList.add("b-quick-hit-cell")}else n.classList.add("b-quick-hit-cell")}}},{key:"onElementKeyDown",value:function(e){var t=this,n=this.grid.features.filter;t.disabled||xn.up(e.target,we.isIE11?".b-widget:not(.b-grid-subgrid):not(.b-grid)":".b-widget:not(.b-grid)")||t.find.length>0&&("Backspace"===e.key?(e.preventDefault(),t.find=t.find.substr(0,t.find.length-1),t.search(t.find)):"Escape"===e.key?(e.preventDefault(),t.find="",t.search(t.find)):"F3"===e.key||"g"===e.key.toLowerCase()&&(e.ctrlKey||e.metaKey)?(e.preventDefault(),e.shiftKey?t.gotoPrevHit():t.gotoNextHit()):n&&t.columnId&&t.foundCount&&e.ctrlKey&&e.shiftKey&&"F"===e.key&&n.showFilterEditor(t.grid.columns.getById(t.columnId),t.find))}},{key:"onElementKeyPress",value:function(e){var t=this;if(!t.disabled&&!xn.up(e.target,we.isIE11?".b-widget:not(.b-grid-subgrid):not(.b-grid)":".b-widget:not(.b-grid)")&&"Enter"!==e.key&&t.grid._focusedCell){var n=t.grid.columns.getById(t.grid._focusedCell.columnId);n&&!1!==n.searchable&&(t.columnId=t.grid._focusedCell.columnId,e.key&&1===e.key.length&&(t.find+=e.key,t.search(t.find)))}}},{key:"onCellNavigate",value:function(e,t,n,r){!this.prevFound&&!this.found||n&&n.columnId===this.columnId||this.clear()}},{key:"foundCount",get:function(){return this.found?this.found.length:0}}])&&Ux(n.prototype,r),o&&Ux(n,o),t}(es);function Qx(e){return(Qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n_(e,t){return!t||"object"!==Qx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r_(e,t,n){return(r_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function o_(e){return(o_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i_(e,t){return(i_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Jx._$name="QuickFind",nC.registerFeature(Jx);var a_=function(e){function t(){return e_(this,t),n_(this,o_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i_(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RegionResize"}},{key:"pluginConfig",get:function(){return{chain:["onElementTouchStart","onElementTouchMove","onElementTouchEnd","onElementMouseDown","onElementMouseMove","onElementDblClick","onElementMouseUp","onSubGridCollapse","onSubGridExpand","render"]}}}],(r=[{key:"construct",value:function(e,n){this.grid=e,r_(o_(t.prototype),"construct",this).call(this,e,n)}},{key:"doDestroy",value:function(){r_(o_(t.prototype),"doDestroy",this).call(this)}},{key:"onElementDblClick",value:function(e){var t=this,n=t.grid,r=xn.up(e.target,".b-grid-splitter-collapsed");if(r&&!t.expanding){t.expanding=!0;var o=r.dataset.region,i=n.getSubGrid(o);i.collapsed||(o=n.getLastRegions()[1],i=n.getSubGrid(o)),i.expand().then((function(){return t.expanding=!1}))}}},{key:"startMove",value:function(e,t){var n=this.grid,r=e.dataset.region,o=n.element,i=n.getSubGrid(r),a=n.regions[n.regions.indexOf(r)+1],u=n.getSubGrid(a),c=1;if(null!=i.flex&&null==u.flex&&(i=u,c=-1),!e.classList.contains("b-grid-splitter-collapsed")){var s=i.element.offsetWidth+u.element.offsetWidth;this.dragContext={element:e,headerEl:i.header.element,subGridEl:i.element,subGrid:i,originalWidth:i.element.offsetWidth,originalX:t,minWidth:i.minWidth||0,maxWidth:Math.min(s,i.maxWidth||s),flip:c},o.classList.add("b-moving-splitter"),e.classList.add("b-moving")}}},{key:"onCollapseClick",value:function(e,t){var n=this.grid,r=t.dataset.region,o=n.getLastRegions();if(o[0]===r){var i=n.getSubGrid(o[1]);if(i.collapsed)return void i.expand()}e.collapse()}},{key:"onExpandClick",value:function(e,t){var n=this.grid,r=t.dataset.region,o=n.getLastRegions();o[0]!==r||e.collapsed?e.expand():n.getSubGrid(o[1]).collapse()}},{key:"updateMove",value:function(e){var t=this.dragContext;if(t){var n=e-t.originalX,r=Math.min(t.maxWidth,t.originalWidth+n*t.flip);t.subGrid.width=Math.max(r,t.minWidth)}}},{key:"endMove",value:function(){var e=this.dragContext;e&&(this.grid.element.classList.remove("b-moving-splitter"),e.element.classList.remove("b-moving"),this.dragContext=null)}},{key:"onElementTouchStart",value:function(e){var t=e.target;t.classList.contains("b-grid-splitter")&&this.startMove(t,e.touches[0].clientX)}},{key:"onElementTouchMove",value:function(e){this.dragContext&&(this.updateMove(e.touches[0].clientX),e.preventDefault())}},{key:"onElementTouchEnd",value:function(e){this.dragContext&&(this.endMove(),e.preventDefault())}},{key:"onElementMouseDown",value:function(e){var t=e.target,n=e.target.closest(":not(.b-row-reordering):not(.b-dragging-event):not(.b-dragging-task):not(.b-dragging-header):not(.b-dragselecting) .b-grid-splitter"),r=n&&this.grid.getSubGrid(n.dataset.region);0===e.button&&(t.classList.contains("b-grid-splitter")||t.classList.contains("b-grid-splitter-inner")?this.startMove(n,e.clientX):t.classList.contains("b-icon-collapse-gridregion")?this.onCollapseClick(r,n):t.classList.contains("b-icon-expand-gridregion")&&this.onExpandClick(r,n))}},{key:"onElementMouseMove",value:function(e){this.dragContext&&(this.updateMove(e.clientX),e.preventDefault())}},{key:"onElementMouseUp",value:function(e){this.dragContext&&(this.endMove(),e.preventDefault())}},{key:"onSubGridCollapse",value:function(e){var t=this.grid.resolveSplitter(e);this.grid.getLastRegions()[1]===e.region&&t.classList.add("b-grid-splitter-allow-collapse")}},{key:"onSubGridExpand",value:function(e){this.grid.resolveSplitter(e).classList.remove("b-grid-splitter-allow-collapse")}},{key:"render",value:function(){var e=this.grid,t=e.regions,n=e.subGrids;t.length>2&&(n[t[0]].splitterElement.classList.add("b-left-only"),n[t[1]].splitterElement.classList.add("b-right-only"))}}])&&t_(n.prototype,r),o&&t_(n,o),t}(es);function u_(e){return(u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c_(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function s_(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c_(i,r,o,a,u,"next",e)}function u(e){c_(i,r,o,a,u,"throw",e)}a(void 0)}))}}function l_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d_(e,t){return!t||"object"!==u_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p_(e,t,n){return(p_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h_(e){return(h_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y_(e,t){return(y_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}a_.featureClass="b-split",a_._$name="RegionResize",nC.registerFeature(a_);var g_=function(e){function t(){return l_(this,t),d_(this,h_(t).apply(this,arguments))}var n,r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y_(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e,n){this.grid=e,p_(h_(t.prototype),"construct",this).apply(this,arguments)}},{key:"doDestroy",value:function(){this.dragHelper&&this.dragHelper.destroy(),p_(h_(t.prototype),"doDestroy",this).call(this)}},{key:"init",value:function(){var e=this,t=e.grid;e.dragHelper=new fw({name:"rowReorder",mode:"translateXY",cloneTarget:!0,dragThreshold:10,targetSelector:".b-grid-row",lockX:!0,transitionDuration:t.transitionDuration,scrollManager:t.scrollManager,dragWithin:t.verticalScroller,outerElement:t.verticalScroller,ignoreSamePositionDrop:!1,createProxy:function(e){var t=e.cloneNode(!0),n=document.createElement("div");return t.removeAttribute("id"),t.style.transform="",n.appendChild(t),n},listeners:{beforedragstart:e.onBeforeDragStart,dragstart:e.onDragStart,drag:e.onDrag,drop:e.onDrop,reset:e.onReset,prio:1e4,thisObj:e}}),e.dropIndicator=xn.createElement({parent:t.bodyContainer,className:"b-row-drop-indicator"}),e.relayEvents(e.dragHelper,["beforeDragStart","dragStart","drag","drop","abort"],"gridRow")}},{key:"onBeforeDragStart",value:function(e){var t=e.context,n=this.grid,r=n.regions[0],o=n.subGrids[r].element;return!(this.disabled||n.readOnly||xn.isTouchEvent||!o.contains(t.element)||(t.record=this.grid.getRecordFromElement(t.element)).meta.specialRow)}},{key:"onDragStart",value:function(e){var t=e.context,n=this,r=n.grid.features.cellEdit,o=n.grid.getRecordFromElement(t.grabbed);if(!o)throw new Error("Failed to find record for dragged element");r&&(n.cellEditDisabledState=r.disabled,r.disabled=!0),n.grid.features.contextMenu&&n.grid.features.contextMenu.hideContextMenu(!1),n.grid.element.classList.add("b-row-reordering");var i=t.element.querySelector(".b-focused");i&&i.classList.remove("b-focused"),xn.removeClasses(t.element.firstElementChild,["b-selected","b-hover"]),n.record=o}},{key:"onDrag",value:function(e){var t=e.context,n=e.event,r=this,o=r.grid,i=o.store,a=o.rowManager;if(r.dragHelper.outerElement.contains(n.target)&&n.target.closest(".b-grid-subgrid")){var u,c,s,l,f=t.valid,d=r.grid.rowManager.getRowAt(n.clientY);if(d){var p=d.top+r.grid._bodyRectangle.y-r.grid.scrollable.y+d.height/2;c=d.dataIndex,u=d&&i.getAt(c),s=n.clientY>p}else c=i.count-1,u=i.last,d=r.grid.rowManager.getRow(c),s=!0;if(u===r.record&&(f=!1),i.tree){if(xn.removeClsGlobally(r.grid.element,"b-row-reordering-target-parent"),l=s?u.nextSibling:u,r.record.contains(u)&&(f=!1),t.parent=u.parent,!t.parent.isRoot){var h=a.getRowById(t.parent);h&&h.addCls("b-row-reordering-target-parent")}r.clearTimeout(r.hoverTimer),u&&u.isParent&&!u.isExpanded(i)&&(r.hoverTimer=r.setTimeout((function(){return r.grid.expand(u)}),r.hoverExpandTimeout))}else l=s?i.getAt(c+1):u;xn.setTranslateY(r.dropIndicator,d.top+(s?d.height:0)),t.insertBefore=l,t.valid=f}else t.valid=!1}},{key:"onDrop",value:(i=s_(regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.context,o=(r=this).grid,i=o.store,n.asyncCleanup=n.async=!0,n.element.classList.add("b-dropping"),r.setTimeout(s_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.valid){e.next=11;break}if(!i.tree){e.next=8;break}return e.next=4,n.parent.tryInsertChild(r.record,n.insertBefore);case 4:t=e.sent,n.valid=n.valid&&!1!==t,e.next=9;break;case 8:i.insert(n.insertBefore?i.indexOf(n.insertBefore):i.count,r.record);case 9:i.clearSorters(),n.finalize(n.valid);case 11:o.element.classList.remove("b-row-reordering");case 12:case"end":return e.stop()}}),e)}))),300);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"onReset",value:function(){var e=this.grid.features.cellEdit;this.grid.element.classList.remove("b-row-reordering"),e&&(e.disabled=this.cellEditDisabledState),xn.removeClsGlobally(this.grid.element,"b-row-reordering-target-parent")}},{key:"render",value:function(){this.init()}}],o=[{key:"$name",get:function(){return"RowReorder"}},{key:"defaultConfig",get:function(){return{hoverExpandTimeout:1e3}}},{key:"pluginConfig",get:function(){return{after:["render"]}}}],r&&f_(n.prototype,r),o&&f_(n,o),t}(Wr(es));function v_(e){return(v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w_(e,t){return!t||"object"!==v_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k_(e,t,n){return(k_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function S_(e){return(S_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O_(e,t){return(O_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}g_.featureClass="",g_._$name="RowReorder",nC.registerFeature(g_,!1),nC.registerFeature(g_,!0,"Gantt");var E_=function(e){function t(){return m_(this,t),w_(this,S_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O_(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Search"}},{key:"pluginConfig",get:function(){return{chain:["getCellMenuItems","onElementKeyDown"]}}}],(r=[{key:"construct",value:function(e,n){k_(S_(t.prototype),"construct",this).call(this,e,n),Object.assign(this,{store:e.store,grid:e,find:"",hitEls:[]})}},{key:"doDestroy",value:function(){this.clear(!0),k_(S_(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){e&&this.clear(),k_(S_(t.prototype),"doDisable",this).call(this,e)}},{key:"search",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;if(!e)return r.clear();if((n||e!==r.find)&&!r.disabled){var o=r.grid,i=o.columns.visibleColumns.filter((function(e){return!1!==e.searchable})),a=i.map((function(e){return e.field})),u=r.store.search(e,a),c=1;Object.assign(r,{foundMap:{},prevFound:r.found,found:u,find:e});var s=!0,l=!1,f=void 0;try{for(var d,p=xn.children(o.element,".b-search-hit")[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var h=d.value;h.classList.remove("b-search-hit"),h.classList.remove("b-search-hit-cell");var y=tg.get(h).row;y.renderCell(h)}}catch(e){l=!0,f=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw f}}if(u){r.hitColumns&&r.hitColumns.forEach((function(e){return e.disableHtmlEncode=!1})),r.hitColumns=[];var g=!0,v=!1,m=void 0;try{for(var b,w=u[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var k=b.value;r.foundMap[k.field+"-"+k.id]=c++;var S=r.grid.columns.get(k.field);if(S&&(S.disableHtmlEncode=!0,r.hitColumns.push(S)),c>1e3)break}}catch(e){v=!0,m=e}finally{try{g||null==w.return||w.return()}finally{if(v)throw m}}return r.listenersInitialized||(r.grid.rowManager.on({rendercell:r.renderCell},r),r.store.on({refresh:r.onStoreRefresh},r),r.listenersInitialized=!0),o.refreshRows(),r.grid.trigger("search",{grid:o,find:e,found:u}),t&&!r.isHitFocused&&r.gotoNextHit(!0),u}}}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.grid;t.foundMap&&delete t.foundMap,delete t.find,xn.forEachSelector(n.element,".b-search-hit",(function(e){return xn.removeClasses(e,["b-search-hit","b-search-hit-cell"])})),xn.removeEachSelector(n.element,".b-search-hit-cell-badge,.b-search-hit-text"),t.listenersInitialized&&(n.rowManager.un({rendercell:t.renderCell},t),t.store.un({refresh:t.onStoreRefresh},t),t.listenersInitialized=!1),e||(n.refreshRows(),t.grid.trigger("clearSearch",{grid:n}))}},{key:"gotoNextHit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(t.found&&t.found.length){var n=t.grid,r=n.focusedCell||n.lastFocusedCell,o=r&&!e?n.store.indexOf(r.id):-1,i=t.found.findIndex((function(e){return e.index>o}));-1!==i&&t.gotoHit(i)}}},{key:"gotoPrevHit",value:function(){var e=this;if(e.found&&e.found.length)for(var t=e.grid,n=t.focusedCell||t.lastFocusedCell,r=n?t.store.indexOf(n.id):0,o=e.found,i=o.length-1;i--;i>=0)if(o[i].index<r){e.gotoHit(i);break}}},{key:"gotoHit",value:function(e){var t=this.grid,n=this.found[e];return n&&t.focusCell({field:n.field,id:n.id}),!!n}},{key:"gotoFirstHit",value:function(){this.gotoHit(0)}},{key:"gotoLastHit",value:function(){this.gotoHit(this.found.length-1)}},{key:"renderCell",value:function(e){var t=e.cellElement,n=e.column,r=e.record,o=e.value,i=e.cellContent,a=this,u=a.foundMap&&a.foundMap[n.field+"-"+r.id];if(u){t.classList.add("b-search-hit");var c=xn.down(t,".b-grid-cell-value")||t,s=String(a.find).toLowerCase();if(String(o).toLowerCase()===s)c.innerHTML='<span class="b-search-hit-text">'.concat(i,'</span><div class="b-search-hit-cell-badge">').concat(u,"</div>");else{var l=String(a.find).toLowerCase(),f=i&&i.toLowerCase().indexOf(l);if(f>-1){var d=f+l.length,p=i.slice(f,d);c.innerHTML="".concat(i.slice(0,f),'<span class="b-search-hit-text">').concat(p,"</span>").concat(i.slice(d),'<div class="b-search-hit-cell-badge">').concat(u,"</div>")}else t.classList.add("b-search-hit-cell")}a.hitEls.push(t)}}},{key:"getCellMenuItems",value:function(e,t,n){var r=this;return e.searchable&&n.push({text:r.L("searchForValue"),icon:"b-fw-icon b-icon-search",cls:"b-separator",name:"search",disabled:r.disabled,onItem:function(e){var t=e.item,n=t.column,o=t.record,i=window.getSelection().toString();i||(i=o[n.field]),r.search(i)}}),n}},{key:"onElementKeyDown",value:function(e){this.find&&""!==this.find&&("F3"===e.key||"g"===e.key.toLowerCase()&&(e.ctrlKey||e.metaKey))&&(e.preventDefault(),e.shiftKey?this.gotoPrevHit():this.gotoNextHit())}},{key:"onStoreRefresh",value:function(){this.search(this.find,!1,!0)}},{key:"foundCount",get:function(){return this.found&&this.found.length||0}},{key:"isHitFocused",get:function(){var e=this.grid,t=e.focusedCell?e.store.indexOf(e.focusedCell.id):-1,n=e.focusedCell?e.columns.getById(e.focusedCell.columnId):null;return-1!==t&&this.found.some((function(e){return e.index===t&&n&&e.field===n.field}))}}])&&b_(n.prototype,r),o&&b_(n,o),t}(es);function C_(e){return(C_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function __(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j_(e,t){return!t||"object"!==C_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D_(e,t,n){return(D_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function R_(e){return(R_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P_(e,t){return(P_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}E_.featureClass="b-search",E_._$name="Search",nC.registerFeature(E_);var T_=function(e){function t(){return x_(this,t),j_(this,R_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P_(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Sort"}},{key:"defaultConfig",get:function(){return{multiSort:!0,ignoreRe:new RegExp(["b-grid-header-resize-handle","b-filter-icon"].join("|")),sortableCls:"b-sortable",sortedCls:"b-sort",sortedAscCls:"b-asc",sortedDescCls:"b-desc"}}},{key:"pluginConfig",get:function(){return{chain:["onElementClick","getHeaderMenuItems","getColumnDragToolbarItems","renderHeader"]}}}],(r=[{key:"construct",value:function(e,n){var r=this;n=r.processConfig(n),r.store=e.store,r.grid=e,r.store.on({sort:r.syncHeaderSortState,thisObj:r}),D_(R_(t.prototype),"construct",this).call(this,e,n)}},{key:"processConfig",value:function(e){return"string"==typeof e||Array.isArray(e)?{field:e,ascending:null}:e}},{key:"setConfig",value:function(e){D_(R_(t.prototype),"setConfig",this).call(this,this.processConfig(e))}},{key:"doDestroy",value:function(){D_(R_(t.prototype),"doDestroy",this).call(this)}},{key:"syncHeaderSortState",value:function(){var e=this,t={};if(!e.grid.isConfiguring){for(var n,r=e.store.sorters,o=r.length,i=new Nt,a=0;a<o;a++){var u=r[a];u.field&&(t[u.field]={ascending:u.ascending,sortIndex:a+1})}var c=!0,s=!1,l=void 0;try{for(var f,d=e.grid.columns.bottomColumns[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var p=f.value,h=p.element;if(h){var y=p.textWrapper&&p.textWrapper.dataset;y&&y.sortIndex&&delete y.sortIndex,i.value=h.classList,!1!==p.sortable?(i.add(e.sortableCls),(n=t[p.field])?(o>1&&y&&(y.sortIndex=n.sortIndex),i.add(e.sortedCls),n.ascending?(i.add(e.sortedAscCls),i.remove(e.sortedDescCls)):(i.add(e.sortedDescCls),i.remove(e.sortedAscCls))):(i.remove(e.sortedCls),i["b-group"]||(i.remove(e.sortedAscCls),i.remove(e.sortedDescCls)))):i.remove(e.sortableCls),xn.syncClassList(h,i)}}}catch(e){s=!0,l=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw l}}}}},{key:"getHeaderMenuItems",value:function(e,t){var n=this,r=n.disabled;if(!1!==e.sortable&&(t.push({text:n.L("sortAscending"),icon:"b-fw-icon b-icon-sort-asc",name:"sortAsc",cls:"b-separator",weight:105,disabled:r,onItem:function(e){var t=e.item.column;return n.store.sort(t.field,!0)}}),t.push({text:n.L("sortDescending"),icon:"b-fw-icon b-icon-sort-desc",name:"sortDesc",weight:105,disabled:r,onItem:function(e){var t=e.item.column;return n.store.sort(t.field,!1)}}),n.multiSort&&n.grid.columns.records.filter((function(e){return e.sortable})).length>1)){var o=this.grid.store.sorters.find((function(t){return t.field===e.field}));t.push({text:n.L("multiSort"),icon:"b-fw-icon b-icon-sort",name:"multiSort",weight:105,disabled:r,menu:[{text:o?n.L("toggleSortAscending"):n.L("addSortAscending"),icon:"b-fw-icon b-icon-sort-asc",name:"addSortAsc",disabled:o&&o.ascending,weight:105,onItem:function(e){var t=e.item.column;return n.store.addSorter(t.field,!0)}},{text:o?n.L("toggleSortDescending"):n.L("addSortDescending"),icon:"b-fw-icon b-icon-sort-desc",name:"addSortDesc",disabled:o&&!o.ascending,weight:105,onItem:function(e){var t=e.item.column;return n.store.addSorter(t.field,!1)}},{text:n.L("removeSorter"),icon:"b-fw-icon b-icon-remove",name:"remove-sorter",weight:105,disabled:!o,onItem:function(e){var t=e.item.column;return n.store.removeSorter(t.field)}}]})}return t}},{key:"getColumnDragToolbarItems",value:function(e,t){var n=this,r=n.store,o=n.disabled;if(!1!==e.sortable){t.push({text:n.L("sortAscendingShort"),group:n.L("Sort"),icon:"b-icon b-icon-sort-asc",name:"sortAsc",cls:"b-separator",weight:105,disabled:o,onDrop:function(e){var t=e.column;return r.sort(t.field,!0)}}),t.push({text:n.L("sortDescendingShort"),group:n.L("Sort"),icon:"b-icon b-icon-sort-desc",name:"sortDesc",weight:105,disabled:o,onDrop:function(e){var t=e.column;return r.sort(t.field,!1)}});var i=r.sorters.find((function(t){return t.field===e.field}));Array.prototype.push.apply(t,[{text:n.L("addSortAscendingShort"),group:n.L("Multisort"),icon:"b-icon b-icon-sort-asc",name:"multisortAddAsc",disabled:o||i&&i.ascending,weight:105,onDrop:function(e){var t=e.column;return r.addSorter(t.field,!0)}},{text:n.L("addSortDescendingShort"),group:n.L("Multisort"),icon:"b-icon b-icon-sort-desc",name:"multisortAddDesc",disabled:o||i&&!i.ascending,weight:105,onDrop:function(e){var t=e.column;return r.addSorter(t.field,!1)}},{text:n.L("removeSorterShort"),group:n.L("Multisort"),icon:"b-icon b-icon-remove",name:"multisortRemove",weight:105,disabled:o||!i,onDrop:function(e){var t=e.column;return r.removeSorter(t.field)}}])}return t}},{key:"onElementClick",value:function(e){var t=this.store,n=e.target,r=xn.up(n,".b-grid-header.b-sortable"),o=r&&r.dataset.column;if(!this.ignoreRe.test(n.className)&&!this.disabled&&r&&o){var i=this.grid.columns.getById(r.dataset.columnId);if(t.isGrouped&&t.groupers.find((function(e){return e.field===o}))&&!e.shiftKey)return;if(i.sortable&&!e.shiftKey)if(e.ctrlKey&&e.altKey)t.removeSorter(i.field);else{var a=i.field;"function"==typeof i.sortable?a={field:i.field,fn:i.sortable}:"object"===C_(i.sortable)&&((a=i.sortable).field||(a.field=a.property||i.field)),t.sort(a,null,e.ctrlKey)}}}},{key:"renderHeader",value:function(){this.syncHeaderSortState()}},{key:"field",set:function(e){var t=this.grid.columns.get(e);t&&"object"===C_(t.sortable)&&(t.sortable.field=t.sortable.property||e,e=t.sortable),this.store.sort(e,this.ascending)}}])&&__(n.prototype,r),o&&__(n,o),t}(es);function A_(e){return(A_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F_(e,t){return!t||"object"!==A_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L_(e,t,n){return(L_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function N_(e){return(N_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H_(e,t){return(H_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}T_.featureClass="b-sort",T_._$name="Sort",nC.registerFeature(T_,!0);var B_=function(e){function t(){return M_(this,t),F_(this,N_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H_(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Stripe"}}],(r=[{key:"construct",value:function(e,n){L_(N_(t.prototype),"construct",this).call(this,e,n),e.rowManager.on({renderrow:"onRenderRow",thisObj:this})}},{key:"doDisable",value:function(e){this.client.refreshRows(),L_(N_(t.prototype),"doDisable",this).call(this,e)}},{key:"onRenderRow",value:function(e){var t=e.row;this.disabled||t.addCls(t.dataIndex%2==0?"b-even":"b-odd")}}])&&I_(n.prototype,r),o&&I_(n,o),t}(es);function z_(e){return(z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $_(e,t){return!t||"object"!==z_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y_(e){return(Y_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G_(e,t){return(G_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}B_._$name="Stripe",nC.registerFeature(B_);var U_=function(e){function t(){return V_(this,t),$_(this,Y_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G_(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Bar"}},{key:"defaultConfig",get:function(){return{scrollable:{}}}}],(r=[{key:"fixCellWidths",value:function(){var e,t=this,n=!1;t.columns.traverse((function(r){var o=t.getBarCellElement(r.id),i=xn.setLength(r.width),a=xn.setLength(r.minWidth);if(o){if(e=we.isIE11?"calc(".concat(i," - ").concat(t.getLrPadding(o),"px)"):i,n=n||Boolean(r.flex),r.isParent&&null==r.width&&null==r.flex){var u=r.children.reduce((function(e,t){return e+(!t.hidden&&t.flex||0)}),0);o.style.flex=u>0?"".concat(u," 0 auto"):"",u>0&&r.traverse((function(e){return e.data.minWidth=null}))}else if(parseInt(r.minWidth)>=0&&(o.style.minWidth=a),o.style.flex=o.style.flexBasis=o.style.width="",r.flex)!isNaN(parseInt(r.flex))&&r.children?o.style.flex="".concat(r.flex," 0 auto"):o.style.flex=r.flex;else if(parseInt(r.width)>=0){var c=r.parent;!t.isHeader||c.isRoot||c.width?o.style.flexBasis=e:o.style.width=i}r.height>=0&&(o.style.height=xn.setLength(r.height))}})),t.element.classList[n?"add":"remove"]("b-has-flex")}},{key:"getLrPadding",value:function(e){if(!this.cellLrPadding){var t=e.ownerDocument.defaultView.getComputedStyle(e);this.cellLrPadding=parseInt(t.getPropertyValue("padding-left"))+parseInt(t.getPropertyValue("padding-right"))+parseInt(t.getPropertyValue("border-left-width"))+parseInt(t.getPropertyValue("border-right-width"))}return this.cellLrPadding}},{key:"getBarCellElement",value:function(e){return this.element.querySelector('[data-column-id="'.concat(e,'"]'))}},{key:"columns",get:function(){return this._columns||this.subGrid.columns},set:function(e){this._columns=e}}])&&W_(n.prototype,r),o&&W_(n,o),t}(ni);function q_(e){return(q_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X_(){var e=Z_(['\n                <div\n                    class="b-grid-footer '," ",'"\n                    data-column="','" data-column-id="','" data-all-index="','"\n                    >\n                    ',"\n                </div>"]);return X_=function(){return e},e}function K_(){var e=Z_(['\n            <div class="b-grid-footer-scroller b-grid-footer-scroller-','">\n                <div reference="footersElement" class="b-grid-footers b-grid-footers-','" data-region="','"></div>\n            </div>\n        ']);return K_=function(){return e},e}function Z_(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function J_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ej(e,t){return!t||"object"!==q_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tj(e,t,n){return(tj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function nj(e){return(nj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rj(e,t){return(rj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}U_._$name="Bar";var oj=function(e){function t(){return J_(this,t),ej(this,nj(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rj(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Footer"}},{key:"defaultConfig",get:function(){return{isFooter:!0}}}],(r=[{key:"startConfigure",value:function(e){e.scrollable.overflowX="hidden-scroll",tj(nj(t.prototype),"startConfigure",this).call(this,e)}},{key:"refreshContent",value:function(){this.element.firstElementChild.innerHTML=this.contentTemplate(),this.fixFooterWidths()}},{key:"onPaint",value:function(e){e.firstPaint&&this.refreshContent()}},{key:"template",value:function(){var e=this.subGrid.region;return Xa.tpl(K_(),e,e,e)}},{key:"getFooter",value:function(e){return this.getBarCellElement(e)}},{key:"contentTemplate",value:function(){return this.columns.visibleColumns.map((function(e){return e.hidden?"":Xa.tpl(X_(),e.align?"b-grid-footer-align-".concat(e.align):"",e.cls||"",e.field||"",e.id,e.allIndex,e.footerText||"")})).join("")}},{key:"fixFooterWidths",value:function(){this.fixCellWidths()}},{key:"subGrid",get:function(){return this._subGrid},set:function(e){this._subGrid=this.owner=e}},{key:"overflowElement",get:function(){return this.footersElement}}])&&Q_(n.prototype,r),o&&Q_(n,o),t}(U_);function ij(e){return(ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cj(e,t){return!t||"object"!==ij(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sj(e,t,n){return(sj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function lj(e){return(lj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fj(e,t){return(fj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}oj._$name="Footer";var dj=function(e){function t(){return aj(this,t),cj(this,lj(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fj(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Summary"}},{key:"pluginConfig",get:function(){return{chain:["renderRows"]}}}],(r=[{key:"construct",value:function(e,n){var r=this;Object.assign(r,{grid:e,store:e.store}),sj(lj(t.prototype),"construct",this).call(this,e,n),r.store.on({change:r.onStoreChanged,thisObj:r}),r.grid.eachSubGrid((function(e){e.footer||(e.footer=new oj({subGrid:e,parent:e}))}))}},{key:"doDestroy",value:function(){sj(lj(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){sj(lj(t.prototype),"doDisable",this).call(this,e),e?this.grid.element.classList.add("b-summary-disabled"):(this.updateSummaries(),this.grid.element.classList.remove("b-summary-disabled"))}},{key:"renderRows",value:function(){this.updateSummaries()}},{key:"updateSummaries",value:function(){var e=this,t=e.grid,n=e.store,r=xn.children(t.element,".b-grid-footer"),o=n.storage.values.filter((function(e){return!e.meta.specialRow}));t.columns.forEach((function(e){e.summaries&&e.summaries.forEach((function(e){"seed"in e&&("initialSeed"in e||(e.initialSeed=e.seed),["number","string","date"].includes(ij(e.initialSeed))?e.seed=e.initialSeed:e.seed=Object.assign({},e.initialSeed))}))})),r.forEach((function(n){var r=t.columns.get(n.dataset.column),i=e.generateHtml(r,o,"b-grid-footer-summary");(r.summaries?r.summaries.length:r.sum)&&(n.children.length?xn.sync(i,n.firstElementChild):n.innerHTML=i)}))}},{key:"onStoreChanged",value:function(e){var t=this,n=e.action,r=e.changes,o=!0;this.disabled||("update"===n&&(o=Object.keys(r).some((function(e){var n=t.grid.columns.get(e);return Boolean(n)&&(Boolean(n.sum)||Boolean(n.summaries))}))),o&&this.updateSummaries())}}])&&uj(n.prototype,r),o&&uj(n,o),t}(Ix(es));function pj(e){return(pj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hj(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function yj(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){hj(i,r,o,a,u,"next",e)}function u(e){hj(i,r,o,a,u,"throw",e)}a(void 0)}))}}function gj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mj(e,t){return!t||"object"!==pj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bj(e,t,n){return(bj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wj(e){return(wj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kj(e,t){return(kj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}dj.featureClass="b-summary",dj._$name="Summary",nC.registerFeature(dj);var Sj=new Promise((function(e){return e()})),Oj=function(e){function t(){return gj(this,t),mj(this,wj(t).apply(this,arguments))}var n,r,o,i,a,u,c,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kj(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e,n){bj(wj(t.prototype),"construct",this).call(this,e,n);var r=e.columns.find((function(e){return e instanceof VE}));Object.assign(this,{grid:e,store:e.store,rowManager:e.rowManager,treeColumn:r}),this.store.on({beforeLoadChildren:"onBeforeLoadChildren",loadChildren:"onLoadChildren",loadChildrenException:"onLoadChildrenException",beforeToggleNode:"onBeforeToggleNode",thisObj:this})}},{key:"doDisable",value:function(e){}},{key:"toggleCollapse",value:(l=yj(regeneratorRuntime.mark((function e(t,n){var r,o,i,a,u,c,s,l,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>2&&void 0!==f[2]&&f[2],o=(r=this).store,i=r.grid,a=i.rowManager,u=o.getById(t),c=u.instanceMeta(o),e.next=4,o.toggleCollapse(u,n);case 4:if(!e.sent){e.next=10;break}(s=a.getRowFor(u))&&(l=s.getCell(r.treeColumn.id),s.renderCell(l,u)),r.isTogglingNode||(i.element.classList.add("b-toggling-node"),r.isTogglingNode=!0,r.requestAnimationFrame((function(){i.element.classList.remove("b-toggling-node"),r.isTogglingNode=!1}))),i.trigger(c.collapsed?"collapseNode":"expandNode",{source:i,record:u}),i.trigger("toggleNode",{source:i,record:u,collapse:n});case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"collapse",value:(s=yj(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.toggleCollapse(t,!0));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"expand",value:(c=yj(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.toggleCollapse(t,!1));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"onBeforeToggleNode",value:function(e){var t=e.record,n=e.collapse;this.grid.trigger("beforeToggleNode",{record:t,collapse:n})}},{key:"onBeforeLoadChildren",value:function(e){var t=e.source,n=e.params,r=t.getById(n[t.modelClass.idField]),o=this.grid.rowManager.getRowFor(r);o&&o.addCls("b-loading-children")}},{key:"onLoadChildren",value:function(e){var t=e.source,n=e.params,r=t.getById(n[t.modelClass.idField]),o=this.grid.rowManager.getRowFor(r);o&&o.removeCls("b-loading-children")}},{key:"onLoadChildrenException",value:function(e){var t=e.record,n=this.grid.rowManager.getRowFor(t);n&&n.removeCls("b-loading-children")}},{key:"expandOrCollapseAll",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.store.rootNode,r=this.grid,o=this.store,i=[];return r.trigger("beforeToggleAllNodes",{source:r,collapse:t}),o.suspendEvents(),o.traverse((function(n){var r=n.instanceMeta(o);n.isLeaf||(t&&!r.collapsed?e.toggleCollapse(n,!0,!0):!t&&r.collapsed&&i.push(e.toggleCollapse(n,!1,!0)))}),n,n===o.rootNode),o.resumeEvents(),(t?Sj:Promise.all(i)).then((function(){r.refreshRows(t),r.trigger("toggleAllNodes",{source:r,collapse:t})}))}},{key:"collapseAll",value:(u=yj(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.expandOrCollapseAll(!0));case 1:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"expandAll",value:(a=yj(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.expandOrCollapseAll(!1));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"expandTo",value:(i=yj(regeneratorRuntime.mark((function e(t){var n,r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(r=(n=this).store.getById(t)).instanceMeta(n.store).hiddenByCollapse){e.next=3;break}return e.abrupt("return");case 3:for(o=!1,i=r.parent,a=[];i&&!i.isRoot;)a.push(i),i=i.parent;return e.next=7,a.reverse().forEach(function(){var e=yj(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.instanceMeta(n.store).collapsed&&(o=!0),e.next=3,n.toggleCollapse(t,!1,!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return o&&n.grid.refreshRows(),e.next=10,n.grid.scrollRowIntoView(r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"onElementClick",value:function(e){var t=e.target,n=this.grid.getEventData(e);(t.classList.contains("b-tree-expander")||this.expandOnCellClick&&n&&n.record.isParent)&&this.toggleCollapse(n.record)}},{key:"onElementKeyDown",value:function(e){e.target===this.client.element&&" "===e.key&&(e.preventDefault(),this.toggleCollapse(this.grid.focusedCell.id))}},{key:"navigateRight",value:function(e){var t=this.grid,n=t.focusedCell;if(n){var r=t.store.getById(n.id);if(t.columns.getById(n.columnId).tree&&(e.shiftKey||1===t.columns.count))return r.isParent&&r.instanceMeta(t.store).collapsed?this.expand(r):t.navigateDown(e),!1}}},{key:"navigateLeft",value:function(e){var t=this.grid,n=t.focusedCell;if(n){var r=t.store.getById(n.id);if(t.columns.getById(n.columnId).tree&&(e.shiftKey||1===t.columns.count))return r.isParent&&!r.instanceMeta(t.store).collapsed?this.collapse(r):r.parent&&t.focusCell({id:r.parent.id,columnId:n.columnId}),!1}}}],o=[{key:"$name",get:function(){return"Tree"}},{key:"defaultConfig",get:function(){return{expandOnCellClick:!1}}},{key:"pluginConfig",get:function(){return{assign:["collapseAll","expandAll","collapse","expand","expandTo","toggleCollapse"],before:["navigateRight","navigateLeft"],chain:["onElementClick","onElementKeyDown"]}}}],r&&vj(n.prototype,r),o&&vj(n,o),t}(Wr(es));Oj.featureClass="b-tree",Oj._$name="Tree",nC.registerFeature(Oj,!1,"Grid"),nC.registerFeature(Oj,!0,"TreeGrid");var Ej={all:"all",visible:"visible"},Cj={A6:{width:4.13,height:5.81},A5:{width:5.81,height:8.25},A4:{width:8.25,height:11.69},A3:{width:11.69,height:16.49},Legal:{width:8.5,height:14},Letter:{width:8.5,height:11}},xj={portrait:"portrait",landscape:"landscape"},_j={pdf:"pdf",png:"png"};function jj(e){return(jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pj(e,t){return!t||"object"!==jj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tj(e,t,n){return(Tj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Mj(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Aj(e,t,n,r){return(Aj="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Mj(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function Mj(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ij(e)););return e}function Ij(e){return(Ij=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fj(e,t){return(Fj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lj=function(e){return function(e){function t(){return Dj(this,t),Pj(this,Ij(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fj(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"LocalizableComboItems"}},{key:"defaultConfig",get:function(){return{items:!0}}}],(r=[{key:"construct",value:function(){var e;this.inConstruct=!0;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=Tj(Ij(t.prototype),"construct",this)).call.apply(e,[this].concat(r)),this.inConstruct=!1}},{key:"buildLocalizedItems",value:function(){return[]}},{key:"updateLocalizedItems",value:function(){var e=this;if(e.store&&!e.inConstruct){var t=e.value;e.store.data=e.buildLocalizedItems(),e.value=null,e.value=t,e.syncInputFieldValue(!0)}}},{key:"updateLocalization",value:function(){this.updateLocalizedItems(),Tj(Ij(t.prototype),"updateLocalization",this).call(this)}},{key:"items",set:function(e){!0===e&&(e=this.buildLocalizedItems()),function(e,t,n,r,o){if(!Aj(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Ij(t.prototype),"items",e,this,!0)},get:function(){return Tj(Ij(t.prototype),"items",this)}}])&&Rj(n.prototype,r),o&&Rj(n,o),t}(e||jp)};function Nj(e){return(Nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bj(e,t){return!t||"object"!==Nj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zj(e){return(zj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vj(e,t){return(Vj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wj=function(e){function t(){return Hj(this,t),Bj(this,zj(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vj(e,t)}(t,e),t}(Lj(jp));function $j(e){return($j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uj(e,t){return!t||"object"!==$j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qj(e){return(qj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xj(e,t){return(Xj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Wj._$name="LocalizableCombo",se.register("localizablecombo",Wj);var Kj=function(e){function t(){return Yj(this,t),Uj(this,qj(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xj(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ExportRowsCombo"}},{key:"defaultConfig",get:function(){return{editable:!1}}}],(r=[{key:"buildLocalizedItems",value:function(){return[{id:Ej.all,text:this.L(Ej.all)},{id:Ej.visible,text:this.L(Ej.visible)}]}}])&&Gj(n.prototype,r),o&&Gj(n,o),t}(Wj);function Zj(e){return(Zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eD(e,t){return!t||"object"!==Zj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tD(e){return(tD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nD(e,t){return(nD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Kj._$name="ExportRowsCombo",se.register(Kj.$name,Kj);var rD=function(e){function t(){return Jj(this,t),eD(this,tD(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nD(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ExportOrientationCombo"}},{key:"defaultConfig",get:function(){return{editable:!1}}}],(r=[{key:"buildLocalizedItems",value:function(){return[{id:xj.portrait,text:this.L(xj.portrait)},{id:xj.landscape,text:this.L(xj.landscape)}]}}])&&Qj(n.prototype,r),o&&Qj(n,o),t}(Wj);function oD(e){return(oD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iD(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function aD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cD(e,t){return!t||"object"!==oD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sD(e,t,n){return(sD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lD(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function lD(e){return(lD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fD(e,t){return(fD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rD._$name="ExportOrientationCombo",se.register(rD.$name,rD);var dD=function(e){function t(){return aD(this,t),cD(this,lD(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fD(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ExportDialog"}},{key:"defaultConfig",get:function(){return{autoShow:!1,autoClose:!1,closable:!0,centered:!0,client:null,hidePNGMultipageOption:!0,title:"L{exportSettings}",bbar:[{type:"button",ref:"exportButton",color:"b-green",localeClass:this,text:"L{export}"},{type:"button",ref:"cancelButton",color:"b-gray",localeClass:this,text:"L{cancel}"}]}}}],(r=[{key:"buildDialogItems",value:function(e){var t=this,n=e.exporters,r=e.client,o=t.L("labelWidth");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return Object.keys(e).map((function(e){return{id:e,text:t(e)}}))}return t.columnsStore=r.columns.chain((function(e){return e.isLeaf})),[{labelWidth:o,type:"combo",ref:"columnsField",label:"L{columns}",localeClass:this,store:t.columnsStore,value:t.columnsStore.allRecords,valueField:"id",displayField:"text",multiSelect:!0},{labelWidth:o,type:"exportrowscombo",ref:"rowsRangeField",label:"L{rows}",localeClass:this,value:Ej.all},{labelWidth:o,type:"localizablecombo",ref:"exporterTypeField",label:"L{exporterType}",localeClass:this,editable:!1,value:n[0].type,buildLocalizedItems:function(){return n.map((function(e){return{id:e.type,text:e.title}}))},onChange:function(e){var t=e.value;this.owner.widgetMap.alignRowsField.hidden="multipage"!==t}},{labelWidth:o,type:"checkbox",ref:"alignRowsField",label:"L{alignRows}",localeClass:this,checked:!0,hidden:"multipage"!==n[0].type},{labelWidth:o,type:"combo",ref:"fileFormatField",label:"L{fileFormat}",localeClass:this,editable:!1,value:_j.pdf,items:i(_j,(function(e){return e.toUpperCase()})),onChange:function(e){var n=e.value,r=e.oldValue;if(t.hidePNGMultipageOption){var o=t.widgetMap.exporterTypeField,i=o.store.find((function(e){return"singlepage"===e.id}));n===_j.png&&i?(this._previousDisabled=o.disabled,o.disabled=!0,this._previousValue=o.value,o.value="singlepage"):r===_j.png&&this._previousValue&&(o.disabled=this._previousDisabled,o.value=this._previousValue)}}},{labelWidth:o,type:"combo",ref:"paperFormatField",label:"L{paperFormat}",localeClass:this,editable:!1,value:"A4",items:i(Cj)},{labelWidth:o,type:"exportorientationcombo",ref:"orientationField",label:"L{orientation}",localeClass:this,value:xj.portrait}]}},{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,r=e.client;if(!r)throw new Error("`client` config is required");var o,i=n.buildDialogItems(e);e.items?Array.isArray(e.items)?(o=e.items).push.apply(o,iD(i)):i.forEach((function(t){e.items[t.ref]=t,delete t.ref})):e.items=i,e.width=e.width||n.L("width"),sD(lD(t.prototype),"construct",this).call(this,e),n.widgetMap.exportButton.on("click",n.onExportClick,n),n.widgetMap.cancelButton.on("click",n.onCancelClick,n),Te.on({locale:"onLocaleChange",prio:-1,thisObj:n})}},{key:"onLocaleChange",value:function(){var e=this.L("labelWidth");this.width=this.L("width"),this.eachWidget((function(t){t instanceof Ic&&(t.labelWidth=e)}))}},{key:"onExportClick",value:function(){var e=this.values;this.trigger("export",{values:e})}},{key:"onCancelClick",value:function(){this.trigger("cancel"),this.hide()}},{key:"values",get:function(){var e=/field/i,t={};return this.eachWidget((function(n){e.test(n.ref)&&(t[n.ref.replace(e,"")]=n instanceof Gc?n.checked:n.value)})),t}}])&&uD(n.prototype,r),o&&uD(n,o),t}(Ya);dD._$name="ExportDialog";n(167),n(235);function pD(e){return(pD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hD(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function yD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){hD(i,r,o,a,u,"next",e)}function u(e){hD(i,r,o,a,u,"throw",e)}a(void 0)}))}}function gD(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <!DOCTYPE html>\n            <html class="','" style="width: ',"in; height: ",'in;">\n                <head>\n                    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />\n                    <title>',"</title>\n                    ",'\n                </head>\n                <body class="b-export ','" style="width: ',"in; height: ","in; ",'">\n                    <div class="b-export-content">\n                        ','\n                        <div class="b-export-body"><div class="b-export-viewport">',"</div></div>\n                        ","\n                    </div>\n                </body>\n            </html>"]);return gD=function(){return e},e}function vD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bD(e,t){return!t||"object"!==pD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wD(e){return(wD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kD(e,t){return(kD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SD(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,u=a instanceof OD;Promise.resolve(u?a.wrapped:a).then((function(e){u?r("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(i,a){var u={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=u:(t=n=u,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function OD(e){this.wrapped=e}"function"==typeof Symbol&&Symbol.asyncIterator&&(SD.prototype[Symbol.asyncIterator]=function(){return this}),SD.prototype.next=function(e){return this._invoke("next",e)},SD.prototype.throw=function(e){return this._invoke("throw",e)},SD.prototype.return=function(e){return this._invoke("return",e)};var ED=function(e){function t(){return vD(this,t),bD(this,wD(t).apply(this,arguments))}var n,r,o,i,a,u,c,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kD(e,t)}(t,e),n=t,r=[{key:"pageTpl",value:function(e){var t=e.title,n=e.header,r=e.footer,o=e.styles,i=e.htmlClasses,a=e.bodyStyle,u=e.bodyClasses,c=void 0===u?[]:u,s=e.paperHeight,l=e.paperWidth,f=e.html;return c.push("b-".concat(this.constructor.type)),Xa.tpl(gD(),i,l,s,t,o.join(""),c.join(" "),l,s,a,n&&'<div class="b-export-header" style="width: 100%">'.concat(n,"</div>"),f,r&&'<div class="b-export-footer" style="width: 100%">'.concat(r,"</div>"))}},{key:"getStyleTagURLConverter",value:function(e){return function(t,n){var r;try{var o;/^#/.test(n)?r=t:(o=!0===e?window.location.href:this.keepPathName?window.location.href.replace(window.location.origin,e):e,r="url('".concat(new URL(n,o).href,"')"))}catch(e){r=t}return r}.bind(this)}},{key:"saveState",value:function(e){var t=e.client;this.state=t.state}},{key:"restoreState",value:(l=yD(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=!1,n.scrollable.y!==this.state.scroll.scrollTop&&(r=!0),n.state=this.state,!r){e.next=7;break}return e.next=7,new Promise((function(e){n.scrollable.on({scrollEnd:function(){e()},once:!0})}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"beforeExport",value:function(){this.element=document.createElement("div")}},{key:"cloneElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.element,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n&&(t.innerHTML=""),we.isChrome?t.appendChild(e.cloneNode(!0)):t.innerHTML=e.outerHTML,xn.removeEachSelector(t,".b-grid-row"),t.querySelector(".b-gridbase > .b-mask").remove()}},{key:"measureElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e instanceof HTMLElement&&(e=e.outerHTML);var t=xn.createElement({parent:document.body,style:{visibility:"hidden",position:"absolute"},html:'<div style="height: 1px"></div>'.concat(e,'<div style="height: 1px"></div>')}),n=t.offsetHeight-2;return t.remove(),n}},{key:"prepareHTML",value:function(e){e instanceof HTMLElement&&(e=e.outerHTML);for(var t=xn.createElement({parent:document.body,style:{visibility:"hidden",position:"absolute"},html:e}),n=t.querySelectorAll("img"),r=0,o=n.length;r<o;r++)n[r].setAttribute("src",n[r].src);var i=t.innerHTML;return t.remove(),i}},{key:"createPlaceholder",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t&&(e.innerHTML=""),xn.createElement({parent:e,id:ye.generateId("export")})}},{key:"getVirtualScrollerHeight",value:function(e){var t=0;return e.eachSubGrid((function(e){e.overflowingHorizontally&&(t=xn.scrollBarWidth)})),0===t?t:t+1}},{key:"inchToPx",value:function(e){return 96*e}},{key:"getScaleValue",value:function(e,t){return Math.floor(1e4*e/t)/1e4}},{key:"export",value:(s=yD(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this).beforeExport(),n.saveState(t),e.next=5,n.prepareComponent(t);case 5:return e.prev=5,e.next=8,n.getPages(t);case 8:r=e.sent;case 9:return e.prev=9,e.next=12,n.restoreComponent(t);case 12:return n.stylesheets=null,e.next=15,new Promise((function(e){return n.requestAnimationFrame(e)}));case 15:return e.next=17,n.restoreState(t);case 17:return e.finish(9);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this,[[5,,9,18]])}))),function(e){return s.apply(this,arguments)})},{key:"getPages",value:(c=yD(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.pagesExtractor(t),r=[];case 1:return e.next=3,n.next();case 3:if(e.t0=o=e.sent,!e.t0){e.next=6;break}e.t0=!o.done;case 6:if(!e.t0){e.next=10;break}r.push(o.value),e.next=1;break;case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"prepareComponent",value:(u=yD(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,r=t.client,o=t.columns,i=t.rowsRange,a=n.exportMeta={totalWidth:0,totalHeight:0-n.getVirtualScrollerHeight(r),subGrids:{}},r.columns.forEach((function(e){o.includes(e.id)?e.show():e.hide()})),!(r.rowManager.rowCount>0)){e.next=13;break}if(i!==Ej.all){e.next=9;break}return a.firstVisibleDataIndex=r.rowManager.rows[0].dataIndex,e.next=7,r.scrollable.scrollTo(0,0);case 7:e.next=13;break;case 9:return u=a.firstVisibleDataIndex=r.rowManager.rows.find((function(e){return e.bottom>r.scrollable.y})).dataIndex,e.next=12,r.scrollRowIntoView(r.store.getAt(u),{block:"start"});case 12:t.alignRows=!0;case 13:this.cloneElement(r.element),c=n.element,r.eachSubGrid((function(e){var t=n.createPlaceholder(c.querySelector('[id="'.concat(e.id,'"]')),!1),o=e.columns.visibleColumns.reduce((function(e,t){return"number"==typeof t.width?e+=t.width:e+=r.getHeaderElement(t.id).offsetWidth,e}),0);a.totalWidth+=o;var i=e.splitterElement;i&&(a.totalWidth+=i.offsetWidth),a.subGrids[e.region]={id:e.id,headerId:e.header&&e.header.id||null,footerId:e.footer&&e.footer.id||null,rows:[],placeHolder:t,width:o}}));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"prepareExportElement",value:function(){var e=this.element,t=this.exportMeta;return Object.values(t.subGrids).forEach((function(t){var n=t.width;[t.id,t.headerId,t.footerId].forEach((function(t){t&&(e.querySelector('[id="'.concat(t,'"]')).style.width="".concat(n,"px"))}))})),e.innerHTML}},{key:"restoreComponent",value:(a=yD(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"scrollRowIntoView",value:(i=yD(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scrollRowIntoView(t.store.getAt(n),{block:"start"});case 2:return e.next=4,new Promise((function(e){return r.requestAnimationFrame(e)}));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"stylesheets",get:function(){var e=this,t=this;if(t._stylesheets)return t._stylesheets;var n=t.translateURLsToAbsolute,r=window.origin,o=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')),i=[];return o.forEach((function(o){var a,u;if(o=o.cloneNode(!0),n&&o.href&&(a=!0===n?o.href:e.keepPathName?o.href.replace(r,n):new URL(o.getAttribute("href"),n),o.setAttribute("href",a)),u=we.isIE11&&o.styleSheet&&/style/i.test(o.tagName)?'<style type="text/css">'.concat(o.styleSheet.cssText,"</style>"):o.outerHTML,n&&/style/i.test(o.tagName)){var c=t.getStyleTagURLConverter(n);u=u.replace(/url\(['"]?(.+?)['"]?\)/g,c)}i.push(u)})),i.push("<style>\n                body, html {\n                    overflow: auto;\n                }\n                \n                body {\n                    position: relative;\n                    margin: 0;\n                }\n            </style>"),t._stylesheets=i},set:function(e){this._stylesheets=e}}],o=[{key:"defaultConfig",get:function(){return{translateURLsToAbsolute:!0,keepPathName:!0}}}],r&&mD(n.prototype,r),o&&mD(n,o),t}(Wr(ae(ze(Y))));function CD(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xD(e){return(xD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function jD(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function DD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){jD(i,r,o,a,u,"next",e)}function u(e){jD(i,r,o,a,u,"throw",e)}a(void 0)}))}}function RD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TD(e,t){return!t||"object"!==xD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AD(e,t,n){return(AD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MD(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function MD(e){return(MD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ID(e,t){return(ID=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FD(e){return new ND(e)}function LD(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,u=a instanceof ND;Promise.resolve(u?a.wrapped:a).then((function(e){u?r("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(i,a){var u={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=u:(t=n=u,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function ND(e){this.wrapped=e}ED.prototype.pagesExtractor=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,"";case 2:case"end":return e.stop()}}),e)})),function(){return new SD(e.apply(this,arguments))});return function(){return t.apply(this,arguments)}}(),ED._$name="Exporter","function"==typeof Symbol&&Symbol.asyncIterator&&(LD.prototype[Symbol.asyncIterator]=function(){return this}),LD.prototype.next=function(e){return this._invoke("next",e)},LD.prototype.throw=function(e){return this._invoke("throw",e)},LD.prototype.return=function(e){return this._invoke("return",e)};var HD=function(e){function t(){return RD(this,t),TD(this,MD(t).apply(this,arguments))}var n,r,o,i,a,u,c,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ID(e,t)}(t,e),n=t,r=[{key:"stateNextPage",value:(s=DD(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,++(r=this.exportMeta).currentPage,++r.verticalPosition,delete r.lastExportedRowBottom,!(r.verticalPosition>=r.verticalPages)){e.next=10;break}return r.verticalPosition=r.currentPageTopMargin=0,++r.horizontalPosition,e.next=10,this.scrollRowIntoView(n,r.firstVisibleDataIndex,{block:"start"});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"prepareComponent",value:(c=DD(regeneratorRuntime.mark((function e(n){var r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m,b,w,k,S,O,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AD(MD(t.prototype),"prepareComponent",this).call(this,n);case 2:o=(r=this).exportMeta,i=n.client,a=n.headerTpl,u=n.footerTpl,c=n.alignRows,s=Cj[n.paperFormat],l=n.orientation===xj.portrait,f=l?s.width:s.height,d=l?s.height:s.width,p=r.inchToPx(f),h=r.inchToPx(d),y=Math.ceil(o.totalWidth/p),g=o.totalHeight+i.height-i.bodyHeight+i.scrollable.scrollHeight,v=h,a&&(v-=r.measureElement(a({totalWidth:o.totalWidth,totalPages:-1,currentPage:-1}))),u&&(v-=r.measureElement(u({totalWidth:o.totalWidth,totalPages:-1,currentPage:-1}))),b=i.store.count,n.rowsRange===Ej.visible&&(b=i.rowManager.visibleRowCount,w=i.rowManager.rows[b-1].bottom,g=g-i.scrollable.scrollHeight+w),c?(k=i.rowManager.rowOffsetHeight,S=Math.floor((v-i.headerHeight)/k),O=Math.floor(v/k),E=b-S,m=1+Math.ceil(E/O)):m=Math.ceil(g/v),Object.assign(o,{paperWidth:f,paperHeight:d,pageWidth:p,pageHeight:h,horizontalPages:y,verticalPages:m,totalHeight:g,contentHeight:v,totalRows:b,totalPages:y*m,currentPage:0,verticalPosition:0,horizontalPosition:0,currentPageTopMargin:0}),this.adjustRowBuffer(i);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"restoreComponent",value:(u=DD(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AD(MD(t.prototype),"restoreComponent",this).call(this,n);case 2:this.restoreRowBuffer(n.client);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"adjustRowBuffer",value:function(e){var t=this.exportMeta.contentHeight,n=e.rowManager;this.oldRowManagerConfig={prependRowBuffer:n.prependRowBuffer,appendRowBuffer:n.appendRowBuffer};var r=Math.ceil(t/n.rowOffsetHeight);n.prependRowBuffer=r,n.appendRowBuffer=r,e.renderRows()}},{key:"restoreRowBuffer",value:function(e){e.rowManager.prependRowBuffer=this.oldRowManagerConfig.prependRowBuffer,e.rowManager.appendRowBuffer=this.oldRowManagerConfig.appendRowBuffer}},{key:"buildPage",value:(a=DD(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m,b,w,k,S,O,E,C,x,_,j,D;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=(n=this).exportMeta,o=t.client,i=t.headerTpl,a=t.footerTpl,u=t.alignRows,c=r.totalWidth,s=r.totalPages,l=r.currentPage,f=r.subGrids,d=r.currentPageTopMargin,p=r.verticalPosition,h=r.totalRows,y=o.rowManager,g=y.rows,Object.values(f).forEach((function(e){return e.rows=[]})),t.rowsRange===Ej.all&&(r.totalHeight=o.height-o.bodyHeight+o.scrollable.scrollHeight-n.getVirtualScrollerHeight(o)),v=0,m=0,b=t.rowsRange===Ej.visible?g.findIndex((function(e){return e.bottom>o.scrollable.y})):g.findIndex((function(e){return e.bottom+d+o.headerHeight>0})),O=b,E=0===p?0:g[b].top+d+o.headerHeight,i&&(k=n.prepareHTML(i({totalWidth:c,totalPages:s,currentPage:l})),v=n.measureElement(k)),a&&(S=n.prepareHTML(a({totalWidth:c,totalPages:s,currentPage:l})),m=n.measureElement(S)),w=r.pageHeight-v-m-E,0===p&&(w-=o.headerHeight),x=0;w>0;)_=g[b],u&&w<_.offsetHeight?(x=-w,w=0,n.exportMeta.lastExportedRowBottom=g[b-1].bottom):(n.collectRow(_),w-=_.offsetHeight,C=_.dataIndex,++b===g.length&&w>0?C+1===o.store.count&&(w=0):t.rowsRange===Ej.visible&&b-O===h&&(w=0));return e.next=13,n.onRowsCollected(g.slice(O,b),t);case 13:if(t.rowsRange!==Ej.visible){e.next=17;break}r.scrollableTopMargin=o.scrollable.y,e.next=21;break;case 17:return j=y.on("offsetrows",(function(e){var t=e.offset;return x+=t})),e.next=20,n.scrollRowIntoView(o,C+1);case 20:j();case 21:return D=n.buildPageHtml(),e.abrupt("return",{html:D,header:k,footer:S,offset:x});case 23:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"onRowsCollected",value:(i=DD(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"collectRow",value:function(e){var t=this.exportMeta.subGrids;Object.entries(e.elements).forEach((function(e){var n=_D(e,2),r=n[0],o=n[1];t[r].rows.push(o.outerHTML)}))}},{key:"buildPageHtml",value:function(){var e=this.exportMeta.subGrids,t=this.prepareExportElement();return Object.values(e).forEach((function(e){var n=e.placeHolder,r=e.rows,o=n.outerHTML;t=t.replace(o,r.join(""))})),t}},{key:"prepareExportElement",value:function(){var e=this.element,n=this.exportMeta;return n.scrollableTopMargin&&(e.querySelector(".b-grid-vertical-scroller").style.marginTop="-".concat(n.scrollableTopMargin,"px")),AD(MD(t.prototype),"prepareExportElement",this).call(this)}}],o=[{key:"type",get:function(){return"multipage"}},{key:"title",get:function(){return this.L("multipage")}}],r&&PD(n.prototype,r),o&&PD(n,o),t}(ED);function BD(e){return(BD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function VD(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function WD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){VD(i,r,o,a,u,"next",e)}function u(e){VD(i,r,o,a,u,"throw",e)}a(void 0)}))}}function $D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GD(e,t){return!t||"object"!==BD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UD(e,t,n){return(UD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qD(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function qD(e){return(qD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XD(e,t){return(XD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KD(e){return new JD(e)}function ZD(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,u=a instanceof JD;Promise.resolve(u?a.wrapped:a).then((function(e){u?r("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(i,a){var u={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=u:(t=n=u,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function JD(e){this.wrapped=e}HD.prototype.pagesExtractor=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(n=this).exportMeta,o=n.stylesheets,i=r.totalWidth,a=r.totalPages,u=r.paperWidth,c=r.paperHeight,s=r.contentHeight;case 1:if(!((l=r.currentPage)<a)){e.next=18;break}return n.trigger("exportStep",{text:n.L("exportingPage",{currentPage:l,totalPages:a}),progress:Math.round((l+1)/a*90)}),e.next=5,FD(n.buildPage(t));case 5:return f=e.sent,d=f.html,p=f.header,h=f.footer,y=f.offset,g=[].concat(CD(o),["\n                <style>\n                    #".concat(t.client.id," {\n                        height: ").concat(r.totalHeight,"px !important;\n                        width: ").concat(i,"px !important;\n                    }\n                    \n                    .b-export-body .b-export-viewport {\n                        margin-left : ").concat(-u*r.horizontalPosition,"in;\n                        margin-top  : ").concat(r.currentPageTopMargin,"px;\n                    }\n                </style>\n            ")]),r.currentPageTopMargin-=s+y,e.next=14,FD(n.stateNextPage(t));case 14:return e.next=16,{html:n.pageTpl({html:d,header:p,footer:h,styles:g,paperWidth:u,paperHeight:c})};case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this)})),function(){return new LD(e.apply(this,arguments))});return function(e){return t.apply(this,arguments)}}(),HD._$name="MultiPageExporter","function"==typeof Symbol&&Symbol.asyncIterator&&(ZD.prototype[Symbol.asyncIterator]=function(){return this}),ZD.prototype.next=function(e){return this._invoke("next",e)},ZD.prototype.throw=function(e){return this._invoke("throw",e)},ZD.prototype.return=function(e){return this._invoke("return",e)};var QD=function(e){function t(){return $D(this,t),GD(this,qD(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XD(e,t)}(t,e),n=t,r=[{key:"prepareComponent",value:(a=WD(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UD(qD(t.prototype),"prepareComponent",this).call(this,n);case 2:Object.assign(this.exportMeta,{verticalPages:1,horizontalPages:1,totalPages:1,currentPage:0,verticalPosition:0,horizontalPosition:0});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"onRowsCollected",value:(i=WD(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"positionRows",value:function(e){var t=0;return e.map((function(e){var n=zD(e,2),r=n[0],o=n[1],i=r.replace(/translate\(\d+px, \d+px\)/,"translate(0px, ".concat(t,"px)"));return t+=o,i}))}},{key:"collectRow",value:function(e){var t=this.exportMeta.subGrids;Object.entries(e.elements).forEach((function(n){var r=zD(n,2),o=r[0],i=r[1];t[o].rows.push([i.outerHTML,e.offsetHeight])}))}},{key:"buildPageHtml",value:function(){var e=this,t=e.exportMeta.subGrids,n=e.prepareExportElement();return Object.values(t).forEach((function(t){var r=t.placeHolder,o=t.rows,i=r.outerHTML;n=n.replace(i,e.positionRows(o).join(""))})),n}}],o=[{key:"type",get:function(){return"singlepage"}},{key:"title",get:function(){return this.L("singlepage")}},{key:"defaultConfig",get:function(){return{centerContentHorizontally:!1}}}],r&&YD(n.prototype,r),o&&YD(n,o),t}(ED);function eR(e){return(eR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tR(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function nR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oR(e,t){return!t||"object"!==eR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iR(e){return(iR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aR(e,t){return(aR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}QD.prototype.pagesExtractor=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m,b,w,k,S,O,E,C,x,_,j,D,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,r=t.client,o=r.rowManager,i=r.store,a=n.stylesheets,u=t.orientation===xj.portrait,c=Cj[t.paperFormat],s=u?c.width:c.height,l=u?c.height:c.width,f=t.rowsRange===Ej.visible&&i.count?o.visibleRowCount:i.count,d=n.exportMeta,p=d.totalHeight,h=d.totalWidth,y=0,g=-1,!(o.rows.length>0)){e.next=16;break}t.rowsRange===Ej.visible&&(g=o.rows.find((function(e){return e.bottom>r.scrollable.y})).dataIndex-1);case 4:if(!(y<f)){e.next=16;break}return b=o.rows,w=b[b.length-1],k=y,b.forEach((function(e){e.dataIndex>g&&y<f&&(++y,p+=e.offsetHeight,n.collectRow(e))})),S=b.findIndex((function(e){return e.dataIndex===g+1})),O=S+(y-k),e.next=10,KD(n.onRowsCollected(b.slice(S,O),t));case 10:if(!(y<f)){e.next=14;break}return g=w.dataIndex,e.next=14,KD(n.scrollRowIntoView(r,g+1));case 14:e.next=4;break;case 16:return E=n.buildPageHtml(),p+=r.height-r.bodyHeight,C=p,t.headerTpl&&(v=n.prepareHTML(t.headerTpl({totalWidth:h})),x=n.measureElement(v),p+=x),t.footerTpl&&(m=n.prepareHTML(t.footerTpl({totalWidth:h})),_=n.measureElement(m),p+=_),j=Math.min(1,n.getScaleValue(n.inchToPx(s),h)),D=Math.min(1,n.getScaleValue(n.inchToPx(l),p)),R=Math.min(j,D),a.push("<style>\n                #".concat(r.id," {\n                    height: ").concat(C,"px !important;\n                    width: ").concat(h,"px !important;\n                }\n                \n                .b-export-content {\n                    ").concat(n.centerContentHorizontally?"left: 50%;":"","\n                    transform: scale(").concat(R,") ").concat(n.centerContentHorizontally?"translateX(-50%)":"",";\n                    transform-origin: top left;\n                    height: ").concat(1===R?"inherit":"auto !important",";\n                }\n            </style>")),e.next=25,{html:n.pageTpl({html:E,header:v,footer:m,styles:a,paperWidth:s,paperHeight:l})};case 25:case"end":return e.stop()}}),e,this)})),function(){return new ZD(e.apply(this,arguments))});return function(e){return t.apply(this,arguments)}}(),QD._$name="SinglePageExporter";var uR=function(e){function t(){return nR(this,t),oR(this,iR(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aR(e,t)}(t,e),n=t,r=[{key:"getExporter",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,r=n.exportersMap,o=t,i=o.type;if(r.has(i))e=r.get(i);else{var a=this.exporters.find((function(e){return e.type===i}));if(!a)throw new Error("Exporter type ".concat(i," is not found. Make sure you've configured it"));delete(t=Mt.clone(t)).type,(e=new a(t)).relayAll(n),r.set(i,e)}return e}},{key:"buildRequest",value:function(e,t){return{html:JSON.stringify(e),fileFormat:t.fileFormat,format:t.paperFormat,orientation:t.orientation}}},{key:"buildExportConfig",value:function(e){var t=this,n=t.client,r=t.exportServer,o=t.clientURL,i=t.fileFormat,a=t.paperFormat,u=t.rowsRange,c=t.alignRows,s=t.orientation,l=t.exporters,f=t.translateURLsToAbsolute,d=t.keepPathName,p=t.headerTpl,h=t.footerTpl;return Mt.assign({client:n,exportServer:r,clientURL:o,fileFormat:i,paperFormat:a,rowsRange:u,alignRows:c,orientation:s,translateURLsToAbsolute:f,keepPathName:d,headerTpl:p,footerTpl:h,exporterType:l[0].type,fileName:n.$name},e)}},{key:"export",value:(i=regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s,l,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:{},r=(n=this).client,o=n.pagesPerRequest,(t=n.buildExportConfig(t)).exporterConfig=Mt.assign({type:t.exporterType,translateURLsToAbsolute:t.translateURLsToAbsolute,keepPathName:t.keepPathName},t.exporterConfig||{}),!1===r.trigger("beforeExport",t)){e.next=33;break}if(r.ignoreViewBox=!0,r.mask(r.loadMask),e.prev=7,a=n.getExporter(t.exporterConfig),0!==o){e.next=19;break}return e.next=12,a.export(t);case 12:return u=e.sent,n.trigger("exportStep",{progress:90,text:n.L("Waiting for response from server...")}),e.next=16,Ee.fetch(t.exportServer,{method:"POST",body:JSON.stringify({html:u,orientation:t.orientation,format:t.paperFormat,fileFormat:t.fileFormat,fileName:t.fileName,clientURL:t.clientURL}),credentials:"omit",headers:{"Content-Type":"application/json"},parseJson:!0});case 16:c=e.sent,i={response:c},c.ok&&(s=c.parsedJson,n.openAfterExport&&(s.success?we.isIE11?window.open(s.url,"ExportedPanel"):((l=document.createElement("a")).download=t.fileName,l.href=s.url,n.openInNewTab&&(l.target="_blank"),document.body.appendChild(l),l.click(),document.body.removeChild(l)):me.toast(s.msg)));case 19:e.next=25;break;case 21:throw e.prev=21,e.t0=e.catch(7),i=e.t0 instanceof Response?{response:e.t0}:{error:e.t0},e.t0;case 25:return e.prev=25,n.exportDialog&&n.exportDialog.close(),r.unmask(),r.ignoreViewBox=!1,n.trigger("export",i),i.error?me.toast(n.L("Export failed")):i.response.ok||me.toast(n.L("Server error")),r.trigger("export",i),e.finish(25);case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,this,[[7,21,25,33]])})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){tR(o,n,r,a,u,"next",e)}function u(e){tR(o,n,r,a,u,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"showExportDialog",value:function(){var e=this;e.exportDialog||(e.exportDialog=new dD({client:e.client,exporters:e.exporters,listeners:{export:e.onExportDialogExport,thisObj:e}})),e.exportDialog.show()}},{key:"onExportDialogExport",value:function(e){var t=e.values,n=this;n.mask=new xi({progress:0,maxProgress:100,text:"Generating pages...",element:n.exportDialog.element});var r=n.on({export:function(){n.mask.close(),r()},exportstep:function(e){var t=e.progress,r=e.text;n.mask.progress=t,n.mask.text=r}});n.currentExportPromise=n.export(t),n.currentExportPromise.then((function(){return n.currentExportPromise=null}))}},{key:"currentExportPromise",get:function(){return this._currentExportPromise},set:function(e){this._currentExportPromise=e}},{key:"exportersMap",get:function(){return this._exportersMap||(this._exportersMap=new Map)}}],o=[{key:"$name",get:function(){return"PdfExport"}},{key:"defaultConfig",get:function(){return{exportServer:void 0,fileName:null,fileFormat:"pdf",clientURL:null,paperFormat:"A4",orientation:"portrait",rowsRange:"all",alignRows:!1,pagesPerRequest:0,exporterConfig:null,exporterType:"singlepage",exporters:[QD,HD],translateURLsToAbsolute:!0,keepPathName:!0,openAfterExport:!0,openInNewTab:!1,headerTpl:null,footerTpl:null}}}],r&&rR(n.prototype,r),o&&rR(n,o),t}(ze(es));function cR(e){return(cR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fR(e,t){return!t||"object"!==cR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dR(e){return(dR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pR(e,t){return(pR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}uR._$name="PdfExport",nC.registerFeature(uR,!1,"Grid");var hR=function(e){function t(){return sR(this,t),fR(this,dR(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pR(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{target:null,defaultColumnWidth:100,exportDateAsInstance:!0,showGroupHeader:!0,columns:null,indent:!0,indentationSymbol:"    "}}}],(r=[{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return e=Mt.assign({},t.config,e),t.normalizeColumns(e),t.generateExportData(e)}},{key:"generateExportData",value:function(e){var t=this.generateColumns(e);return{rows:this.generateRows(e),columns:t}}},{key:"normalizeColumns",value:function(e){var t=this,n=e.columns||this.target.columns.visibleColumns.filter((function(e){return!1!==e.exportable}));e.columns=n.map((function(e){return"string"==typeof e?t.target.columns.find((function(t){return t.field===e}))||{field:e}:e}))}},{key:"generateColumns",value:function(e){var t=this;return e.columns.map((function(n){return t.processColumn(n,e)}))}},{key:"generateRows",value:function(e){var t=e.columns;if(!t.length)return[];var n=this;return n.target.store.map((function(r){return n.processRecord(r,t,e)})).filter((function(e){return e.length}))}},{key:"getColumnType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.target.store,n=e.exportedType||"object";if(void 0===e.exportedType&&e.field){var r=t.modelClass.getFieldDefinition(e.field);r&&r.type&&(n=r.type)}return n}},{key:"processColumn",value:function(e,t){var n=this.target,r=t.defaultColumnWidth,o=e.field,i=e.text,a=e.width,u=e.minWidth;if(o in n.store.modelClass.fieldMap||(o=""),!i||!a){var c=n.columns.find((function(e){return e.field===o}));i||(i=c&&c.text||o),null==a&&(a=c&&c.width||r)}return a=Math.max(a||r,u||r),{field:o,value:i,width:a,type:this.getColumnType(e)}}},{key:"processRecord",value:function(e,t,n){var r,o=this.target,i=n.showGroupHeader,a=n.indent,u=n.indentationSymbol;return e?e.meta.specialRow?i&&e.meta.groupRowFor&&(r=t.map((function(t){return o.features.group.buildGroupHeader({cellElement:xn.createElement(),grid:o,record:e,column:t})}))):r=t.map((function(t){var r=e[t.field],i=t.renderer||t.defaultRenderer;return!i||r&&t instanceof FO&&n.exportDateAsInstance||(r=i.call(t,{value:r,record:e,column:t,grid:o,isExport:!0})),a&&t.tree&&(r="".concat(u.repeat(e.childLevel)).concat(r)),r})):r=t.map((function(){return""})),r}}])&&lR(n.prototype,r),o&&lR(n,o),t}(Y);function yR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}hR._$name="TableExporter";var gR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._value=t}var t,n,r;return t=e,(n=[{key:"toString",value:function(){return Boolean(this.value)?"✓":""}},{key:"value",get:function(){return this._value}}])&&yR(t.prototype,n),r&&yR(t,r),e}();function vR(e){return(vR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wR(e,t){return!t||"object"!==vR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kR(e,t,n){return(kR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function SR(e){return(SR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OR(e,t){return(OR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}gR._$name="BooleanUnicodeSymbol";var ER=function(e){function t(){return mR(this,t),wR(this,SR(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OR(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ExcelExporter"}},{key:"defaultConfig",get:function(){return{filename:null,dateFormat:"YYYY-MM-DD",exporterClass:hR,exporterConfig:null,zipcelx:null,convertEmptyValueToEmptyString:!0}}}],(r=[{key:"processValue",value:function(e){return null==e||Number.isNaN(e)||"function"==typeof e||"object"===vR(e)&&"[object Object]"===String(e)?"":e}},{key:"generateExportData",value:function(e){var t=this,n=t.exporter.export(e.exporterConfig),r=n.rows,o=n.columns;return{rows:r.map((function(n){return n.map((function(n,r){return n instanceof Date?n=xt.format(n,e.dateFormat):"boolean"==typeof n&&(n=new gR(n)),t.convertEmptyValueToEmptyString&&(n=t.processValue(n)),{value:n,type:"string"}}))})),columns:o.map((function(e){var t=e.field,n=e.value,r=e.width;return e.type,{field:t,value:n,width:r,type:"string"}}))}}},{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(!t.zipcelx)throw new Error('ExcelExporter: "zipcelx" library is required');if(!t.disabled){(e=Mt.assign({},t.config,e)).filename||(e.filename=t.client.$name);var n=e,r=n.filename,o=t.generateExportData(e),i=o.rows,a=o.columns;t.zipcelx({filename:r,sheet:{data:[a].concat(i),cols:a}})}}},{key:"construct",value:function(e,n){kR(SR(t.prototype),"construct",this).call(this,e,n),this.zipcelx||"undefined"!=typeof zipcelx&&(this.zipcelx=zipcelx)}},{key:"exporter",get:function(){return this._exporter||(this._exporter=new this.exporterClass(Object.assign({target:this.client},this.exporterConfig)))}}])&&bR(n.prototype,r),o&&bR(n,o),t}(es);function CR(e){return(CR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jR(e,t){return!t||"object"!==CR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DR(e){return(DR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RR(e,t){return(RR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ER._$name="ExcelExporter",nC.registerFeature(ER,!1,"Grid");var PR=function(e){function t(){return xR(this,t),jR(this,DR(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RR(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{zoneWidth:50,scrollSpeed:5,verticalElement:null,direction:"both",monitoring:[],startScrollDelay:500,testConfig:{scrollSpeed:2,startScrollDelay:0}}}}],(r=[{key:"startMonitoring",value:function(e){var t=this,n=e instanceof HTMLElement?{element:e}:e,r=n.element,o=n.verticalElement||t.verticalElement||r;if(r&&(r.scrollWidth>r.offsetWidth||o.scrollHeight>o.offsetHeight)){if(t.monitoring.find((function(e){return e.element===r})))return;n.direction=n.direction||t.direction,Object.assign(n,{verticalElement:o,scrollManager:t,startScrollLeft:r.scrollLeft,startScrollTop:o.scrollTop,scrollLeft:r.scrollLeft,scrollTop:o.scrollTop,scrollRelativeLeft:0,scrollRelativeTop:0});var i=t.onMouseMove.bind(n);t.mouseMoveDetacher=_r.on({mousemove:i,touchmove:i,mouseleave:function(){return t.clearTimeout(t.scrollTimeout)},element:r}),n.scrollWidth=r.scrollWidth,t.monitoring.push(n)}}},{key:"stopMonitoring",value:function(e){var t=this,n=t.monitoring.find((function(t){return t.element===e}));n&&(t.stopScroll(n),t.mouseMoveDetacher&&t.mouseMoveDetacher(),t.monitoring.splice(t.monitoring.indexOf(n),1))}},{key:"startScroll",value:function(e){e.scrolling=!0,this.performScroll(e)}},{key:"stopScroll",value:function(e){e.scrolling=!1,e.scrollRequested&&(this.cancelAnimationFrame(e.frameId),e.scrollRequested=!1),this.clearTimeout(this.scrollTimeout),this.scrollTimeout=null}},{key:"performScroll",value:function(e){var t=this;if(e.scrolling&&!e.scrollRequested){var n=e.element,r=e.verticalElement;0!==e.scrollDeltaX&&(e.scrollLeft+=e.scrollDeltaX,e.scrollLeft=Math.max(Math.min(e.scrollLeft,e.scrollWidth-n.clientWidth),0),e.scrollRelativeLeft=e.scrollLeft-e.startScrollLeft,n.scrollLeft=e.scrollLeft),0!==e.scrollDeltaY&&(e.scrollTop+=e.scrollDeltaY,e.scrollTop=Math.max(Math.min(e.scrollTop,r.scrollHeight-r.clientHeight),0),e.scrollRelativeTop=e.scrollTop-e.startScrollTop,r.scrollTop=e.scrollTop),0===e.scrollRelativeLeft&&0===e.scrollRelativeTop||!e.callback||e.callback.call(e.thisObj||this,e),e.scrollRequested=!0,e.frameId=this.requestAnimationFrame((function(){e.scrollRequested=!1,t.performScroll(e)}))}}},{key:"onMouseMove",value:function(e){var t=this,n=t.scrollManager,r=t.element,o=t.verticalElement,i=r.getBoundingClientRect(),a=o.getBoundingClientRect(),u=n.zoneWidth,c=n.scrollSpeed;t.scrollDeltaX=0,"vertical"!==t.direction&&(e.clientX>i.right-u?t.scrollDeltaX=Math.round((u-(i.right-e.clientX))/c)+1:e.clientX<i.left+u&&(t.scrollDeltaX=-Math.round((u+(i.left-e.clientX))/c)-1)),t.scrollDeltaY=0,"horizontal"!==t.direction&&(e.clientY>a.bottom-u?t.scrollDeltaY=Math.round((u-(a.bottom-e.clientY))/c)+1:e.clientY<a.top+u&&(t.scrollDeltaY=-Math.round((u+(a.top-e.clientY))/c)-1)),0===t.scrollDeltaX&&0===t.scrollDeltaY?n.stopScroll(t):n.scrollTimeout||(n.scrollTimeout=n.setTimeout((function(){return n.startScroll(t)}),n.startScrollDelay))}}])&&_R(n.prototype,r),o&&_R(n,o),t}(Wr(Y));function TR(e){return(TR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FR(e,t){return!t||"object"!==TR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LR(e,t,n){return(LR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function NR(e){return(NR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HR(e,t){return(HR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}PR._$name="ScrollManager";var BR=function(e){function t(){return MR(this,t),FR(this,NR(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HR(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{cls:"b-grid-row"}}}],(r=[{key:"construct",value:function(e){Object.assign(this,{_elements:{},_elementsArray:[],_cells:{},_allCells:[],_regions:[],lastHeight:0,lastTop:-1,_dataIndex:0,_top:0,_height:0,_id:null,forceInnerHTML:!1,isGroupFooter:!1},e),LR(NR(t.prototype),"construct",this).call(this)}},{key:"doDestroy",value:function(){var e=this;e.rowManager.isDestroying||(e.removeElements(),e.rowManager.idMap[e.id]===e&&delete e.rowManager.idMap[e.id]),LR(NR(t.prototype),"doDestroy",this).call(this)}},{key:"addElement",value:function(e,t){var n=this,r=t.firstElementChild;for(n._elements[e]=t,n._elementsArray.push(t),n._regions.push(e),tg.assign(t,{index:n.index}),n._cells[e]=[];r;)n._cells[e].push(r),n._allCells.push(r),tg.set(r,{column:r.dataset.column,columnId:r.dataset.columnId,rowElement:r.parentNode,row:n}),r=r.nextElementSibling;t.dataset.index=n.index}},{key:"getElement",value:function(e){return this._elements[e]}},{key:"eachElement",value:function(e){for(var t=0;t<this._elementsArray.length;t++)e(this._elementsArray[t],t)}},{key:"eachCell",value:function(e){this._allCells.forEach(e)}},{key:"getCells",value:function(e){return this._cells[e]}},{key:"getCell",value:function(e){return this._allCells.find((function(t){var n=tg.get(t);return n.columnId===e||n.column===e}))}},{key:"removeElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;t.rowManager.trigger("removeRow",{row:t}),e||t._elementsArray.forEach((function(e){return e.remove()})),t._elements={},t._cells={},t._elementsArray.length=t._regions.length=t._allCells.length=t.lastHeight=t.height=0,t.lastTop=-1}},{key:"setHeightIfBigger",value:function(e){e>this.height&&(this.height=e)}},{key:"updateElementsHeight",value:function(){var e=this;if(e.lastHeight!==e.height){for(var t=e._elementsArray,n=0;n<t.length;n++)t[n].style.height="".concat(e.offsetHeight,"px");e.lastHeight=e.height}}},{key:"addCls",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.eachElement((function(e){return xn.addClasses(e,t)}))}},{key:"removeCls",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.eachElement((function(e){return xn.removeClasses(e,t)}))}},{key:"setTop",value:function(e){this._top!==e&&(this._top=e,this.translateElements())}},{key:"setBottom",value:function(e){this.setTop(e-this.offsetHeight)}},{key:"translateElements",value:function(){var e=this,t=e.grid.positionMode;if(e.lastTop!==e.top){for(var n=e._elementsArray,r=0;r<n.length;r++){var o=n[r].style;"translate"===t?o.transform="translate(0,".concat(e.top,"px)"):"translate3d"===t?o.transform="translate3d(0,".concat(e.top,"px,0)"):"position"===t&&(o.top="".concat(e.top,"px"))}e.rowManager.trigger("translateRow",{row:e}),e.lastTop=e.top}}},{key:"offset",value:function(e){var t=this._top+e;return t<0&&(e-=t,t=0),this.setTop(t),e}},{key:"render",value:function(e,t){var n,r,o,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=this,c=u.cells,s=u.grid,l=u._id,f=u._elementsArray,d=tg.get(f[0]),p=u.rowManager,h=p._rowHeight,y=u.height,g=i&&s.transitionDuration?"".concat(u.cls," b-grid-row-updating"):u.cls,v=0;t||!1===t||(t=s.store.getById(d.id),e=s.store.indexOf(t));var m=t&&s.isSelected(t.id);for(p.trigger("beforeRenderRow",{row:u,record:t,oldId:l});v<f.length;v++)(n=f[v]).className=g,m&&n.classList.add("b-selected"),t?(t.cls&&t.cls.split(" ").forEach((function(e){return n.classList.add(e)})),d.displayed=!0):(d.displayed=!1,n.classList.add("b-grid-row-not-displayed"));for(i&&s.transitionDuration&&u.setTimeout((function(){f.forEach((function(e){e.classList.remove("b-grid-row-updating")}))}),s.transitionDuration),u.height=0,t?(u.id=t.id,u.dataIndex=e):(u.id=null,u.dataIndex=null),v=0;v<c.length;v++)r=c[v],o=u.renderCell(r,t,v,i),u.setHeightIfBigger(o&&o.height||h);u.updateElementsHeight(),i&&(y!==u.height&&p.translateFromRow(u,a),p.trigger("updateRow",{row:u,record:t,oldId:l}),p.trigger("renderDone")),p.trigger("renderRow",{row:u,record:t,oldId:l}),u.forceInnerHTML=!1}},{key:"renderCell",value:function(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this,a=tg.get(e),u=i.grid.columns.getById(a.columnId),c=a.rowElement,s=tg.get(c),l=u.internalCellCls,f=u.cellCls,d=u.align,p=u.renderer,h=u.defaultRenderer,y=u.id,g={columnId:y,id:s.id},v=p||h;if(!t){if(null===s.id)return void(e.className="b-grid-cell");if(!(t=i.grid.store.getById(s.id)))return}var m=(AR(r={"b-grid-cell":1},l,l),AR(r,f,t.meta.specialRow&&"b-check-cell"===u.internalCellCls?void 0:f),AR(r,"b-cell-dirty",t.isFieldModified(u.field)),AR(r,"b-grid-cell-align-".concat(d),d),AR(r,"b-selected",i.grid.isSelected(g)),AR(r,"b-focused",i.grid.isFocused(g)),r);xn.syncClassList(e,m);var b={height:t.get("rowHeight")||0},w=u.getRawValue(t),k=!0,S={cellElement:e,rowElement:c,value:w,record:t,column:u,size:b,grid:i.grid,row:a.row,updatingSingleRow:o};v&&void 0===(w=v.call(u,S))&&(k=!1),i.grid.processCellContent&&(k=i.grid.processCellContent({cellContent:w,cellElement:e,record:t,cellElementData:a,rendererData:S}));var O=S.cellContent=null==w?"":String(w);if(k)if(i.forceInnerHTML)e.innerHTML=O;else if(u.htmlEncode&&!u.disableHtmlEncode)if(we.isLinux||e._hasHtml)e.innerText=O,e._hasHtml=!1;else{var E=e.firstChild;E?E.data=O:e.innerText=O}else{var C="string"==typeof w,x="object"===TR(w);!u.autoSyncHtml||C&&!e.childElementCount?x?Ib.sync({targetElement:e,domConfig:{onlyChildren:!0,children:[w]}}):e.innerHTML=O:C?xn.sync(O,e.firstElementChild):Ib.sync({domConfig:w,targetElement:e})}return i.rowManager.trigger("renderCell",S),b}},{key:"index",get:function(){return this._index},set:function(e){this._index=e}},{key:"dataIndex",get:function(){return this._dataIndex},set:function(e){if(this._dataIndex!==e){var t=this._elementsArray;this._dataIndex=e;for(var n=0;n<t.length;n++)t[n].dataset.index=e}}},{key:"id",get:function(){return this._id},set:function(e){var t=this,n={id:e},r=t.rowManager.idMap,o=t._elementsArray,i=t._allCells;if(t._id!=e||r[e]!==t){r[t._id]===t&&delete r[t._id],r[e]=t,t._id=e;for(var a=0;a<o.length;a++)tg.assign(o[a],n);for(var u=0;u<i.length;u++)tg.assign(i[u],n);for(var c=0;c<o.length;c++)o[c].dataset.id=e}}},{key:"elements",get:function(){return this._elements}},{key:"cells",get:function(){return this._allCells}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"offsetHeight",get:function(){return this.height+this.grid._rowBorderHeight}},{key:"isFirst",get:function(){return 0===this.dataIndex}},{key:"top",get:function(){return this._top}},{key:"bottom",get:function(){return this._top+this._height+this.grid._rowBorderHeight}}])&&IR(n.prototype,r),o&&IR(n,o),t}(Wr(Y));function zR(e){return(zR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $R(e,t){return!t||"object"!==zR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function YR(e,t,n){return(YR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function GR(e){return(GR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UR(e,t){return(UR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}BR._$name="Row";var qR=function(e){function t(){return VR(this,t),$R(this,GR(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UR(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e){e.grid._rowManager=this,this.scrollTargetRecordId=null,this.refreshDetails={topRowIndex:0,topRowTop:0},YR(GR(t.prototype),"construct",this).call(this,e.grid,e)}},{key:"doDestroy",value:function(){this._rows.forEach((function(e){return e.destroy()})),YR(GR(t.prototype),"doDestroy",this).call(this)}},{key:"initWithHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return n.autoHeight&&(e=n.store.allCount*n.rowOffsetHeight),n.viewHeight=e,n.calculateRowCount(t),e}},{key:"reinitialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;t.calculateRowCount(!1,!0,!0),t.topIndex+t.rowCount-1>t.store.count&&(e=!0);var n=t.topRow&&!e?t.topRow.top:0;t.scrollTargetRecordId=null,e&&(t.topIndex=t.lastScrollTop=0);var r=t.topRow;r&&(r.dataIndex=t.topIndex,r.setTop(n)),t.estimateTotalHeight(),t.renderFromRow(r)}},{key:"matchRowCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t._rows,r=n.length,o=r-t.rowCount,i=t.grid;if(o)if(o<0){for(var a=[],u=r,c=r?n[r-1].dataIndex+1:0;u<t.rowCount;u++,c++)a.push(new BR({rowManager:t,grid:i,index:u,dataIndex:c}));n.push.apply(n,a),t.trigger("addRows",{rows:a}),e||t.renderFromRow(n[Math.max(0,r-1)])}else{var s=n.splice(r-o,o);t.trigger("removeRows",{rows:s}),s.forEach((function(e){return e.destroy()}))}}},{key:"calculateRowCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.store,i=Math.ceil(r.viewHeight/r.rowOffsetHeight),a=i+r.prependRowBuffer+r.appendRowBuffer;return!r.grid.columns.count||isNaN(i)?(r.rowCount=0,0):(a<r.rowCount&&!t||(r.visibleRowCount=i,r.rowCount=Math.min(o.count,a),"all"===r.rowScrollMode&&(r.rowCount=o.allCount),e||(r._rows&&r.rowCount!==r._rows.length?r.matchRowCount(n):r.rowCount||r.trigger("changeTotalHeight",{totalHeight:r.totalHeight}),r.grid.toggleEmptyText())),r.rowCount)}},{key:"removeAllRows",value:function(){var e=this,t=e.topRow,n=t?e.refreshDetails={topRowIndex:t.dataIndex,topRowTop:t.top}:e.refreshDetails,r=e._rows.slice();return e.trigger("removeRows",{rows:r}),e._rows.forEach((function(e){return e.destroy()})),e._rows.length=0,e.idMap={},n}},{key:"setPosition",value:function(e){var t=this.topRow,n=e.topRowIndex,r=e.topRowTop;t.setTop(r),t.dataIndex=n}},{key:"getRow",value:function(e){return this.rowCount&&this.rows[e-this.topIndex]}},{key:"getRowById",value:function(e){return e.isModel&&(e=e.id),this.idMap[e]}},{key:"getRowFromElement",value:function(e){return(e=e.closest(".b-grid-row"))&&this.getRow(e.dataset.index)}},{key:"getRowAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t||(e-=tr.from(this.grid.bodyContainer,null,!0).round(1).top,e+=this.grid.scrollable.y),e=kn(e),this.rows.find((function(t){return e>=t.top&&e<t.bottom}))}},{key:"getRowFor",value:function(e){return e instanceof HTMLElement?this.getRowFromElement(e):this.getRowById(e)}},{key:"getNextRow",value:function(e){var t="number"==typeof e?e:e.index;return this.getRow((t+1)%this.rowCount)}},{key:"offsetRows",value:function(e){if(0!==e)for(var t=this.rows,n=t.length,r=0;r<n;r++)t[r].offset(e);this.trigger("offsetRows",{offset:e})}},{key:"getRecordCoords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r="string"==typeof e||"number"==typeof e?e:e.id,o=n.getRowById(e),i=n.client._bodyRectangle;return t||(i=n.client._bodyRectangle=tr.client(n.client.bodyContainer)),o?new tr(i.x,t?Math.round(o.top):Math.round(o.top+i.y-n.client.scrollable.y),i.width,o.offsetHeight):n.getRecordCoordsByIndex(n.store.indexOf(r),t)}},{key:"getRecordCoordsByIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n.client._bodyRectangle,o=n.averageRowHeight||n._rowHeight+n.grid._rowBorderHeight,i=n.topRow.dataIndex,a=n.bottomRow.dataIndex,u=e>a?{index:e-a-1,y:n.bottomRow.bottom,from:"bottomRow"}:e>i/2?{index:e-i,y:n.topRow.top,from:"topRow"}:{index:e,y:0,from:"top"},c=Math.floor(u.y+u.index*o),s=new tr(r.x,t?c:c+r.y-n.client.scrollable.y,r.width,o);return s.virtual=!0,s.block=s.bottom<r.y?"start":s.y>r.bottom?"end":"nearest",s}},{key:"forEach",value:function(e){this.rows.forEach(e)}},{key:Symbol.iterator,value:function(){return this.rows[Symbol.iterator]()}},{key:"resetAverageRowHeight",value:function(){this.averageRowHeight=this.rowCount?(this.bottomRow.bottom-this.topRow.top)/this.rowCount:this.rowHeight}},{key:"returnToTop",value:function(){var e=this;e.topIndex=0,e.lastScrollTop=0,e.topRow.dataIndex=0,e.topRow.setTop(0),e.refresh(),e.grid.scrollable.y=0}},{key:"renderFromRecord",value:function(e){var t=this.getRowById(e.id);t&&this.renderFromRow(t)}},{key:"renderFromRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=t._rows,r=t.store,o=r.count;if(0!==t.calculateRowCount(!1,o<n.length,!0)){for(var i,a=e?n.indexOf(e):0,u=e?e.dataIndex:n[0].dataIndex,c=o-u-1,s=Math.min(n.length-1,a+c),l=n.length-s-1,f=a>0?n[a-1].bottom:n[a].top,d=a;d<=s;d++)(i=n[d]).dataIndex=u,i.setTop(f),i.render(u,r.getAt(u++),!1),f+=i.offsetHeight;for(;l-- >0;)t.displayRecordAtTop();t.averageRowHeight?t.averageRowHeight=(t.averageRowHeight*(o-t.rowCount)+(f-t.topRow.top))/o:t.averageRowHeight=(f-t.topRow.top)/t.rowCount,t.estimateTotalHeight(),t.trigger("renderDone")}}},{key:"renderRows",value:function(e){var t,n=!1;e=Array.from(e);var r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;t=c.height,c.render(null,null,!1),n|=c.height!==t}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}n&&(this.translateFromRow(e[0],!0),this.estimateTotalHeight()),this.trigger("renderDone")}},{key:"translateFromRow",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this,i=e.bottom,a=o.store.count;for(n=e.dataIndex+1,t=o.getRow(n);t;t=o.getRow(++n))t.setTop(i),i+=t.offsetHeight;o.averageRowHeight=(o.averageRowHeight*(a-o.rowCount)+(o.bottomRow.bottom-o.topRow.top))/a,r||o.estimateTotalHeight()}},{key:"refresh",value:function(){var e=this.topRow;e&&(this.idMap={},this.renderFromRow(e),this.trigger("refresh"))}},{key:"jumpToPosition",value:function(e,t){var n=this,r=n.rowOffsetHeight,o=n.store.count,i=null==t?Math.floor(e/r)-n.prependRowBuffer:t-Math.floor(n.rowCount/2),a=Math.max(Math.min(i,o-n.rowCount),0),u=n.client.scrollable.y,c=Math.min(n.client._bodyRectangle.height+u+n.appendBufferHeight,n.totalHeight);if(n.lastScrollTop=e,n.topRow.dataIndex=n.topIndex=a,n.topRow.setTop(a*r,!1),n.refresh(),n.bottomRow.bottom<c){for(;n.bottomRow.bottom<c&&n._rows[n.prependRowBuffer].top<u&&n.bottomRow.dataIndex<o-1;)n.displayRecordAtBottom();var s=n.bottomRow.bottom-n.topRow.top;n.averageRowHeight=(n.averageRowHeight*(o-n.rowCount)+s)/o}if(n.estimateTotalHeight(),null!=t){var l=n.getRow(t),f=l&&tr.from(l._elementsArray[0]).center.y,d=n.grid.scrollable.viewport.center.y;l&&(n.grid.scrollable.y=e=Math.floor(n.grid.scrollable.y+(f-d)))}return e}},{key:"warpIfNeeded",value:function(e){var t,n=this,r={newScrollTop:e,deltaTop:e-n.lastScrollTop};return Math.abs(r.deltaTop)>n.rowCount*n.rowOffsetHeight*3&&(n.scrollTargetRecordId&&(t=n.store.indexOf(n.scrollTargetRecordId)),r.newScrollTop=n.jumpToPosition(e,t),r.deltaTop=0),r}},{key:"updateRenderedRows",value:function(e,t,n){var r=this,o=r.client._bodyRectangle;if(0===r.rowCount)return 0;var i=r.estimatedTotalHeight;if(t||Math.abs(e-r.lastScrollTop)>r.rowOffsetHeight||r.topRow.top>e||r.bottomRow.bottom<e+o.height){var a=r.warpIfNeeded(e);if(r.scrollTargetRecordId=null,r.lastScrollTop=a.newScrollTop,a.deltaTop>0?r.fillBelow(a.newScrollTop):a.deltaTop<0&&r.fillAbove(a.newScrollTop),i=r.estimateTotalHeight(),!n&&(a.deltaTop<0&&e<2*o.height||a.deltaTop>0&&e>r.estimatedTotalHeight-2*o.height-3)){var u=r.topRow.top-r.topIndex*r.rowOffsetHeight;u&&(r.offsetRows(-u),r.grid.scrollable.y=r.lastScrollTop=r.grid.scrollable.y-u)}}return i}},{key:"fillAbove",value:function(e){for(var t=this,n=e-t.topRow.top-t.prependBufferHeight,r=0;r>n&&t.topIndex>0;)r-=t.displayRecordAtTop();t.trigger("renderDone")}},{key:"fillBelow",value:function(e){for(var t=this,n=e-t.topRow.top-t.prependBufferHeight,r=t.store.count,o=t.rowCount,i=0;i<n&&t.topIndex+o<r&&t.topRow.top+t.topRow.offsetHeight<e;)i+=t.displayRecordAtBottom();t.trigger("renderDone")}},{key:"estimateTotalHeight",value:function(){var e=this,t=e.store.count,n=Math.floor(t*(e.averageRowHeight||e.rowOffsetHeight)),r=e.bottomRow;if(!e.grid.renderingRows){if(r){var o=r.bottom;(o>n||e.topIndex+e.rowCount>=t&&n>o)&&(n=o,r.dataIndex<t-1&&(n+=(t-1-r.dataIndex)*e.rowOffsetHeight))}return n!=e.estimatedTotalHeight&&!1!==e.trigger("changeTotalHeight",{totalHeight:n})&&(e.estimatedTotalHeight=n),n}}},{key:"displayRecordAtTop",value:function(){var e=this,t=e.topIndex-1,n=e.store.getAt(t),r=e.store.count,o=e.bottomRow,i=o.top;return e.trigger("beforeTranslateRow",{row:o,newRecord:n}),o._top=e.topRow.top-e.rowOffsetHeight,o.estimatedTop=!0,o.render(t,n,!1),o._top=i,o.setBottom(e.topRow.top),o.estimatedTop=!1,e.topIndex--,e._rows.unshift(e._rows.pop()),e.averageRowHeight=(e.averageRowHeight*(r-1)+o.offsetHeight)/r,o.offsetHeight}},{key:"displayRecordAtBottom",value:function(){var e=this,t=e.topIndex+e.rowCount,n=e.store.getAt(t),r=e.store.count,o=e.topRow;return e.trigger("beforeTranslateRow",{row:o,newRecord:n}),o.dataIndex=t,o.setTop(e.bottomRow.bottom),o.render(t,n,!1),e.topIndex++,e._rows.push(e._rows.shift()),e.averageRowHeight=(e.averageRowHeight*(r-1)+o.offsetHeight)/r,o.offsetHeight}},{key:"store",get:function(){return this.client.store}},{key:"rows",get:function(){return this._rows}},{key:"topRow",get:function(){return this._rows[0]}},{key:"bottomRow",get:function(){var e=Math.min(this.rowCount,this.store.count);return this.rows[e-1]}},{key:"rowHeight",get:function(){return this._rowHeight},set:function(e){var t=this,n=t.grid,r=t._rowHeight;if(Mt.assertNumber(e,"rowHeight"),e<10&&(console.warn("The rowHeight of ".concat(e," was increased to 10 which is the minimum.")),e=10),t.trigger("beforeRowHeight",{height:e}),t._rowHeight=e,t.prependBufferHeight=t.prependRowBuffer*t.rowOffsetHeight,t.appendBufferHeight=t.appendRowBuffer*t.rowOffsetHeight,t.rows.length){var o=t.averageRowHeight,i=o,a=n.scrollable.y,u=t.getRowAt(a,!0),c=u.top-a;o-=n._rowBorderHeight,o*=e/r,t.averageRowHeight=o+=n._rowBorderHeight,t.calculateRowCount(!1,!0,!0),t.topRow.setTop(t.topRow.dataIndex*o),t.refresh(),a*(o/i)!==a&&n.scrollRowIntoView(u.id,{block:"start",edgeOffset:c})}t.trigger("rowHeight",{height:e})}},{key:"rowOffsetHeight",get:function(){return Math.floor(this.averageRowHeight)||this._rowHeight+this.grid._rowBorderHeight}},{key:"totalHeight",get:function(){return Math.floor(this.store.count*this.rowOffsetHeight)}}],o=[{key:"pluginConfig",get:function(){return{chain:["getRowById","topRow","bottomRow","getRecordCoords","getRow","getRowFor","getRowFromElement","destroy"],assign:["rowHeight"]}}},{key:"defaultConfig",get:function(){return{prependRowBuffer:5,appendRowBuffer:5,rowHeight:null,idMap:{},rowScrollMode:"move",autoHeight:!1,topIndex:0,lastScrollTop:0,_rows:[]}}}],r&&WR(n.prototype,r),o&&WR(n,o),t}(es);function XR(e){return(XR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QR(e,t){return!t||"object"!==XR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eP(e,t,n){return(eP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tP(e){return(tP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nP(e,t){return(nP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}qR._$name="RowManager";var rP={x:1},oP=function(e){function t(){return ZR(this,t),QR(this,tP(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nP(e,t)}(t,e),n=t,(r=[{key:"addScroller",value:function(e){(this.xScrollers||(this.xScrollers=[])).push(e)}},{key:"addPartner",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rP;if("string"==typeof n&&(n=KR({},n,1)),n.x)for(var r=0;r<this.xScrollers.length;r++)this.xScrollers[r].addPartner(e.xScrollers[r],"x");n.y&&eP(tP(t.prototype),"addPartner",this).call(this,e,"y")}},{key:"updateOverflowX",value:function(e){this.xScrollers&&this.xScrollers.forEach((function(t){return t.overflowX=e})),this.widget.virtualScrollers.classList[!1===e?"add":"remove"]("b-hide-display")}},{key:"scrollIntoView",value:function(e,n){if(1!==e.nodeType)return eP(tP(t.prototype),"scrollIntoView",this).call(this,e,n);var r=!0,o=!1,i=void 0;try{for(var a,u=this.xScrollers[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;if(c.element.contains(e))return c.scrollIntoView(e,n)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}}},{key:"x",set:function(e){this.xScrollers&&(this.xScrollers[0].x=e)},get:function(){return this.xScrollers?this.xScrollers[0].x:0}}])&&JR(n.prototype,r),o&&JR(n,o),t}(Ho);function iP(e){return(iP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aP(){var e=cP(['\n                <div class="b-grid-header" data-column="','" data-column-id="','" ','>\n                    <div class="b-grid-header-text">\n                        <div class="b-grid-header-text-content"></div>\n                    </div>\n                    ','\n                    <div class="b-grid-header-resize-handle"></div>\n                </div>\n            ']);return aP=function(){return e},e}function uP(){var e=cP(['\n            <div class="b-grid-header-scroller b-grid-header-scroller-','">\n                <div reference="headersElement" class="b-grid-headers b-grid-headers-','" data-region="','" data-max-depth="','" reference="headersElement"></div>\n            </div>\n        ']);return uP=function(){return e},e}function cP(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function sP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fP(e,t){return!t||"object"!==iP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dP(e,t,n,r){return(dP="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=yP(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else pP(r,t,n);return!0})(e,t,n,r)}function pP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hP(e,t,n){return(hP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=yP(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yP(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gP(e)););return e}function gP(e){return(gP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vP(e,t){return(vP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}oP._$name="GridScroller";var mP=function(e){function t(){return sP(this,t),fP(this,gP(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vP(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Header"}},{key:"defaultConfig",get:function(){return{isHeader:!0}}}],(r=[{key:"startConfigure",value:function(e){e.scrollable.overflowX="hidden-scroll",hP(gP(t.prototype),"startConfigure",this).call(this,e)}},{key:"template",value:function(){var e=this.region;return Xa.tpl(uP(),e,e,e,this.maxDepth)}},{key:"contentTemplate",value:function(e){var t=this;return e.hidden?"":Xa.tpl(aP(),e.field||"",e.id,e.isLeaf?'tabindex="0"':"",e.children?'\n                    <div class="b-grid-header-children">\n                            '.concat(e.children.map((function(e){return t.contentTemplate(e)})).join(""),"\n                    </div>\n                    "):"")}},{key:"calculateMinWidthForSafari",value:function(){var e=0;return this.columns.visibleColumns.forEach((function(t){e+=t.calculateMinWidth()})),e}},{key:"fixHeaderWidths",value:function(){this.fixCellWidths()}},{key:"refreshHeaders",value:function(){var e=this;e.columns.traverse((function(t){var n=e.getBarCellElement(t.id);if(n){var r,o=new Nt((pP(r={"b-grid-header":1,"b-grid-header-parent":t.isParent},"b-level-".concat(t.childLevel),1),pP(r,"b-depth-".concat(t.meta.depth),1),pP(r,"b-grid-header-align-".concat(t.align),t.align),pP(r,"b-grid-header-resizable",t.resizable&&t.isLeaf),pP(r,t.cls,t.cls),pP(r,"b-last-parent",t.isParent&&t.isLastInSubGrid),pP(r,"b-last-leaf",t.isLeaf&&t.isLastInSubGrid),r)),i=t.text;n.className=o,t.headerRenderer&&(i=t.headerRenderer.call(t.thisObj||e,{column:t,headerElement:n})),t.icon&&(i='<i class="'.concat(t.icon,'"></i>')+(i||""));var a=n.querySelector(".b-grid-header-text-content");a&&(a.innerHTML=i||"")}})),e.fixHeaderWidths()}},{key:"initDepths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.columns.topColumns,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=0;t&&t.meta&&t.meta.depth++;var o=!0,i=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;s.meta.depth=0,s.children&&(n.initDepths(s.children.filter(n.columns.chainedFilterFn),s),s.meta.depth&&t&&(t.meta.depth+=s.meta.depth)),s.meta.depth>r&&(r=s.meta.depth)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return t||(n.maxDepth=r),r}},{key:"getHeader",value:function(e){return this.getBarCellElement(e)}},{key:"refreshContent",value:function(){var e=this;e.content=e.columns.topColumns.map((function(t){return e.contentTemplate(t)})).join(""),e.refreshHeaders()}},{key:"onPaint",value:function(e){e.firstPaint&&this.refreshContent()}},{key:"subGrid",get:function(){return this._subGrid},set:function(e){this._subGrid=e,this.id=e.id+"-header"}},{key:"region",get:function(){return this.subGrid&&this.subGrid.region}},{key:"overflowElement",get:function(){return this.headersElement}},{key:"columns",get:function(){var e=this,n=hP(gP(t.prototype),"columns",this);return e.columnsDetacher||(e.columnsDetacher=n.on({change:function(){e.initDepths()},thisObj:e}),e.initDepths()),n},set:function(e){!function(e,t,n,r,o){if(!dP(e,t,n,r||e)&&o)throw new Error("failed to set property")}(gP(t.prototype),"columns",e,this,!0)}},{key:"contentElement",get:function(){return this.element.firstElementChild}}])&&lP(n.prototype,r),o&&lP(n,o),t}(U_);function bP(e){return(bP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SP(e,t){return!t||"object"!==bP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OP(e,t,n){return(OP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function EP(e){return(EP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CP(e,t){return(CP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}mP._$name="Header";var xP={touchstart:"onElementTouchStart",touchmove:"onElementTouchMove",touchend:"onElementTouchEnd",mouseover:"onElementMouseOver",mouseout:"onElementMouseOut",mousedown:"onElementMouseDown",mousemove:"onElementMouseMove",mouseup:"onElementMouseUp",click:"onHandleElementClick",dblclick:"onElementDblClick",keydown:"onElementKeyDown",keyup:"onElementKeyUp",keypress:"onElementKeyPress",contextmenu:"onElementContextMenu",focus:"onGridElementFocus"};function _P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function jP(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function DP(e,t,n){return(DP=jP()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&IP(o,n.prototype),o}).apply(null,arguments)}function RP(e){return(RP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AP(e,t){return!t||"object"!==RP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MP(e){return(MP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IP(e,t){return(IP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var FP={string:1,object:1,function:1};function LP(e){return(LP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BP(e,t){return!t||"object"!==LP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zP(e,t,n){return(zP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function VP(e){return(VP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WP(e,t){return(WP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $P=Object.freeze({doSelect:!0}),YP=Object.freeze({x:!1,y:!1});function GP(e){return(GP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XP(e,t){return!t||"object"!==GP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KP(e){return(KP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZP(e,t){return(ZP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JP(e){return(JP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tT(e,t){return!t||"object"!==JP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nT(e,t,n){return(nT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rT(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function rT(e){return(rT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oT(e,t){return(oT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var iT={string:1,number:1},aT={dataset:1,batch:1};function uT(e){return(uT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lT(e,t){return!t||"object"!==uT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fT(e){return(fT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dT(e,t){return(dT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pT=function(e){return e.columns.suspendEvents()},hT=function(e){return e.columns.resumeEvents()},yT=function(e){e.columns.clearCaches(),e.columns.fillFromMaster()},gT=function(e,t){return e.stateSortIndex-t.stateSortIndex};function vT(e){return(vT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wT(e,t){return!t||"object"!==vT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kT(e,t,n){return(kT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ST(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ST(e){return(ST=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OT(e,t){return(OT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ET=new Promise((function(e){return e()})),CT={block:"nearest"},xT=function(e){function t(){return mT(this,t),wT(this,ST(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OT(e,t)}(t,e),n=t,(r=[{key:"scrollIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CT,n=this,r=n.getDeltaTo(e,t),o=r.xDelta,i=r.yDelta,a=o||i?n.scrollBy(o,i,t):ET;return(t.highlight||t.focus)&&a.then((function(){t.highlight&&(e instanceof tr?e.translate(-o,-i).highlight():xn.highlight(e)),t.focus&&e.focus&&e.focus()})),a}},{key:"scrollBy",value:function(e,n,r){var o=n&&this.yScroller.scrollBy(0,n,r),i=e&&kT(ST(t.prototype),"scrollBy",this).call(this,e,0,r);if(i&&i.cancel&&o&&o.cancel){var a=i.cancel,u=o.cancel;return i.cancel=o.cancel=function(){a(),u()},Promise.all([i,o])}return i||o}},{key:"scrollTo",value:function(e,n,r){var o=null!=n&&this.yScroller.scrollTo(null,n,r),i=null!=e&&kT(ST(t.prototype),"scrollTo",this).call(this,e,null,r);if(r&&r.animate||this.syncPartners(),i&&i.cancel&&o&&o.cancel){var a=i.cancel,u=o.cancel;return i.cancel=o.cancel=function(){a(),u()},Promise.all([i,o])}return i||o}},{key:"viewport",get:function(){return tr.from(this.element).intersect(tr.from(this.yScroller.element))}},{key:"y",set:function(e){this.yScroller&&(this.yScroller.y=e)},get:function(){return this.yScroller?this.yScroller.y:0}},{key:"maxY",get:function(){return this.yScroller?this.yScroller.maxY:0}},{key:"scrollHeight",get:function(){return this.yScroller?this.yScroller.scrollHeight:0}},{key:"clientHeight",get:function(){return this.yScroller?this.yScroller.clientHeight:0}}])&&bT(n.prototype,r),o&&bT(n,o),t}(Ho);function _T(e){return(_T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jT(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function DT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){jT(i,r,o,a,u,"next",e)}function u(e){jT(i,r,o,a,u,"throw",e)}a(void 0)}))}}function RT(){var e=TT(['\n                <div reference="splitterElement" data-region="','" class="b-grid-splitter ','">\n                    <div class="b-grid-splitter-inner">\n                        <div class="b-grid-splitter-buttons" reference="splitterButtons">\n                            <i class="b-icon b-icon-collapse-gridregion"></i>\n                            <i class="b-icon b-icon-expand-gridregion"></i>\n                        </div>\n                    </div>\n                </div>']);return RT=function(){return e},e}function PT(){var e=TT(['\n            <div class="b-grid-subgrid b-grid-subgrid-'," b-grid-horizontal-scroller ",'" data-region="','">\n                <div reference="virtualScrollerElement" class="b-virtual-scroller" data-region="','">\n                    <div reference="virtualScrollerWidth" class="b-virtual-width"></div>\n                </div>\n                ',"\n            </div>\n        "]);return PT=function(){return e},e}function TT(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function AT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IT(e,t){return!t||"object"!==_T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FT(e,t,n,r){return(FT="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=HT(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function LT(e,t,n,r,o){if(!FT(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function NT(e,t,n){return(NT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=HT(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function HT(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BT(e)););return e}function BT(e){return(BT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zT(e,t){return(zT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}xT._$name="SubGridScroller";var VT=function(e){function t(){return AT(this,t),IT(this,BT(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zT(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e){NT(BT(t.prototype),"construct",this).call(this,e),this.initHeader(),this.rowManager.on("addrows",this.onAddRow,this)}},{key:"doDestroy",value:function(){var e=this;e.header&&e.header.destroy(),e.footer&&e.footer.destroy(),e.fakeScroller&&e.fakeScroller.destroy(),e.virtualScrollerElement&&e.virtualScrollerElement.remove(),e.splitterElement&&e.splitterElement.remove(),NT(BT(t.prototype),"doDestroy",this).call(this)}},{key:"initHeader",value:function(){var e=this,t=e.element.style,n=t.width,r=t.flex,o=Object.assign({subGrid:e,hidden:e.hideHeaders,parent:e},e.headerConfig);r?o.flex=r:n&&(o.width=n),e.header=new e.headerClass(o)}},{key:"initElements",value:function(){this.footerElement=xn.down(this.grid.element,".b-grid-footer-scroller-"+this.region),this.updateHasFlex()}},{key:"template",value:function(){var e=this.grid,t=this.region,n=!e||t===e.regions[e.regions.length-1];return Xa.tpl(PT(),t,this.collapsed?"b-grid-subgrid-collapsed":"",t,t,n?"":Xa.tpl(RT(),t,this.collapsed?"b-grid-splitter-collapsed":""))}},{key:"rowTemplate",value:function(){return'<div class="b-grid-row">'.concat(this.columns.visibleColumns.map(this.cellTemplate).join(""),"</div>")}},{key:"cellTemplate",value:function(e){return'<div class="b-grid-cell" data-column="'.concat(e.field||"",'" data-column-id="').concat(e.id,'"></div>')}},{key:"render",value:function(){var e=this,n=e.grid,r=e.region,o=[{className:"b-grid-splitter-inner"}],i={region:r};if(n&&(n.virtualScrollers.appendChild(e.virtualScrollerElement),e.renderHeader(n.headerContainer),e.renderFooter(n.footerContainer),e.initElements()),NT(BT(t.prototype),"render",this).apply(this,arguments),e.splitterElement){var a=e.splitterElement.className.trim();e.element.parentNode.insertBefore(e.splitterElement,e.element.nextElementSibling),e.header&&(e.headerSplitter=xn.createElement({className:a,children:o,dataset:i,parent:e.header.element.parentNode,nextSibling:e.header.element.nextSibling}),_r.on({element:e.headerSplitter,mouseenter:"onSplitterMouseOver",mouseleave:"onSplitterMouseOut",thisObj:e})),e.footer&&(e.footerSplitter=xn.createElement({className:a,children:o,dataset:i,parent:e.footer.element.parentNode,nextSibling:e.footer.element.nextSibling}),_r.on({element:e.footerSplitter,mouseenter:"onSplitterMouseOver",mouseleave:"onSplitterMouseOut",thisObj:e})),e.scrollerSplitter=xn.createElement({className:a,children:o,dataset:i,parent:e.virtualScrollerElement.parentNode,nextSibling:e.virtualScrollerElement.nextSibling}),_r.on({element:e.splitterElement,mouseenter:"onSplitterMouseOver",mouseleave:"onSplitterMouseOut",thisObj:e})}e._collapsed&&e.collapse()}},{key:"renderHeader",value:function(e){this.header&&this.header.render(e,!1)}},{key:"renderFooter",value:function(e){this.footer&&(this.footer.render(e,!1),this.grid.footerContainer.classList.remove("b-hidden"))}},{key:"refreshHeader",value:function(){this.header.refreshContent()}},{key:"refreshFooter",value:function(){this.footer&&this.footer.refreshContent()}},{key:"eachWidget",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[];n.header&&r.unshift(n.header),n.footer&&r.push(n.footer);for(var o=0;o<r.length;o++){var i=r[o];if(!1===e(i))return;t&&i.eachWidget&&i.eachWidget(e,t)}}},{key:"fixCellWidths",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=this.columns.bottomColumns.filter((function(e){return!e.hidden})));for(var n=e.firstElementChild,r=0;n;){var o=t[r];o.minWidth&&xn.setLength(n,"minWidth",o.minWidth),o.flex?(n.style.flex=o.flex,n.style.width=""):o.width?(n.style.flex="",n.style.width=xn.setLength(o.width),we.isIE11&&(n.style.minWidth=n.style.width)):n.style.flex=n.style.width=n.style.minWidth="",n=n.nextElementSibling,r++}}},{key:"fixWidths",value:function(){var e=this,t=e.element,n=e.header,r=e.footer;if(!e.collapsed){if(e.flex)n.flex=e.flex,r&&(r.flex=e.flex),t.style.flex=e.flex;else{if(e.hasCalculatedWidth&&!e.columns.some((function(e){return!e.hidden&&e.flex}))&&e.totalFixedWidth!==e.width)return e.width=e.totalFixedWidth,void(e.hasCalculatedWidth=!0);var o=e.width;if(!o){o=0;var i=!0,a=!1,u=void 0;try{for(var c,s=e.columns[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var l=c.value;l.flex||l.hidden||(o+=l.width)}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}}t.style.width="".concat(o,"px"),n.width=o,r&&(r.width=o)}e.syncScrollingPartners(!1)}}},{key:"fixRowWidthsInSafariEdge",value:function(){if(we.isSafari||we.isEdge){var e=this.region,t=this.header,n=t.calculateMinWidthForSafari();this.rowManager.forEach((function(t){var r=t.getElement(e);r&&(r.style.width="".concat(n,"px"))})),t.headersElement.style.width="".concat(n,"px")}}},{key:"onInternalResize",value:function(e,n,r,o,i){var a=this,u=a.grid;NT(BT(t.prototype),"onInternalResize",this).call(this,e,n,r,o,i),a.splitterElement&&a.syncSplitterButtonPosition(),u&&(n!==o&&(u.trigger("horizontalScroll",{subGrid:a,grid:u,scrollLeft:a.scrollable.x}),a.refreshFakeScroll(),a.fixRowWidthsInSafariEdge()),a.trigger("afterInternalResize",a))}},{key:"syncParallelSplitters",value:function(e){var t=this,n=t.grid,r=e?"add":"remove";if(t.splitterElement)t.splitterElement.classList[r]("b-grid-splitter-collapsed"),t.headerSplitter&&t.headerSplitter.classList[r]("b-grid-splitter-collapsed"),t.footerSplitter&&t.footerSplitter.classList[r]("b-grid-splitter-collapsed"),t.scrollerSplitter&&t.scrollerSplitter.classList[r]("b-grid-splitter-collapsed");else{var o=n.getSubGrid(n.getPreviousRegion(t.region));o&&o.splitterElement&&o.syncParallelSplitters(e)}}},{key:"onSplitterMouseOver",value:function(){var e=this,t=e.nextSibling;e.collapsed||t&&t.collapsed||(e.splitterElement.classList.add("b-hover"),e.headerSplitter&&e.headerSplitter.classList.add("b-hover"),e.footerSplitter&&e.footerSplitter.classList.add("b-hover"),e.scrollerSplitter.classList.add("b-hover")),e.startSplitterButtonSyncing()}},{key:"onSplitterMouseOut",value:function(){var e=this,t=e.nextSibling;e.splitterElement.classList.remove("b-hover"),e.headerSplitter&&e.headerSplitter.classList.remove("b-hover"),e.footerSplitter&&e.footerSplitter.classList.remove("b-hover"),e.scrollerSplitter.classList.remove("b-hover"),e.collapsed||t&&t.collapsed||e.stopSplitterButtonSyncing()}},{key:"startSplitterButtonSyncing",value:function(){var e=this;e.splitterElement&&(e.syncSplitterButtonPosition(),e.splitterSyncScrollListener||(e.splitterSyncScrollListener=e.grid.scrollable.on({scroll:"syncSplitterButtonPosition",thisObj:e})))}},{key:"stopSplitterButtonSyncing",value:function(){this.splitterSyncScrollListener&&(this.splitterSyncScrollListener(),this.splitterSyncScrollListener=null)}},{key:"syncSplitterButtonPosition",value:function(){this.splitterButtons.style.transform="translateY(".concat(this.grid.scrollable.y+this.grid.bodyHeight/2-(this.headerSplitter?this.grid.headerHeight:0),"px)")}},{key:"updateHasFlex",value:function(){var e=this.columns.visibleColumns.some((function(e){return e.flex}));xn.toggleClasses(this.element,["b-has-flex"],e)}},{key:"refreshFakeScroll",value:function(){var e=this,t=e.element,n=e.virtualScrollerElement,r=e.virtualScrollerWidth,o=e.totalFixedWidth,i=e.store,a=e.scrollable;a.scrollWidth=i&&i.count?null:o,n.style.width="".concat(t.offsetWidth,"px"),o>a.clientWidth?t.classList.add("b-overflowing-horizontally"):t.classList.remove("b-overflowing-horizontally"),e.collapsed||(a.scrollWidth>a.clientWidth+(we.isEdge?1:0)?(r.style.width="".concat(a.scrollWidth,"px"),e.header.element.classList.add("b-overflowing"),e.footer&&e.footer.element.classList.add("b-overflowing"),e.overflowingHorizontally=!0,e.grid.virtualScrollers.classList.remove("b-hide-display")):(r.style.width=0,e.header.element.classList.remove("b-overflowing"),e.footer&&e.footer.element.classList.remove("b-overflowing"),e.overflowingHorizontally=!1))}},{key:"initScroll",value:function(){var e=this,t=e.scrollable,n=e.virtualScrollerElement;e.syncPartnersOnFrame=e.createOnFrame(e.syncScrollingPartners),we.isFirefox&&t.element.addEventListener("wheel",(function(e){e.deltaX&&(t.x+=e.deltaX,e.preventDefault())})),t.yScroller=e.grid.scrollable,t.yScroller.addScroller(t),e.fakeScroller=new Ho({element:n,overflowX:!0}),t.on({scroll:"onSubGridScroll",scrollend:"onSubGridScrollEnd",thisObj:e}),t.addPartner(e.fakeScroller,"x"),e.header&&t.addPartner(e.header.scrollable,"x"),e.footer&&t.addPartner(e.footer.scrollable,"x")}},{key:"onSubGridScrollEnd",value:function(){this.forceScrollUpdate||this.syncScrollingPartners(),this.scrolling=!1}},{key:"onSubGridScroll",value:function(){this.forceScrollUpdate?(this.syncScrollingPartners(),this.forceScrollUpdate=!1):this.syncPartnersOnFrame()}},{key:"syncScrollingPartners",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this,n=t.grid;!t.scrolling&&e&&(t.scrolling=!0),n.trigger("horizontalScroll",{subGrid:t,grid:n,scrollLeft:t.scrollable.x})}},{key:"scrollColumnIntoView",value:function(e,t){var n=this,r=n.header.scrollable;if(e=e instanceof XS?e:n.columns.get(e)||n.columns.getById(e)||n.columns.getAt(e)){var o=n.header.getHeader(e.id);if(o)return r.scrollIntoView(tr.from(o,null,!0),t)}}},{key:"onAddRow",value:function(e){var t=e.rows,n=this,r=n.rowTemplate(),o=n.columns.bottomColumns.filter((function(e){return!e.hidden})),i=document.createDocumentFragment();t.forEach((function(e){var t=xn.createElementFromTemplate(r);i.appendChild(t),e.addElement(n.region,t),n.fixCellWidths(t,o)})),n.fixRowWidthsInSafariEdge(),n.element.insertBefore(i,n.insertRowsBefore)}},{key:"clearRows",value:function(){this.emptyCache();var e=this.element.querySelectorAll(".b-grid-row"),t=document.createRange();e.length&&(t.setStartBefore(e[0]),t.setEndAfter(e[e.length-1]),t.deleteContents())}},{key:"addNewRowElement",value:function(){var e=xn.append(this.element,this.rowTemplate());return this.fixCellWidths(e),e}},{key:"toggleTransitionClasses",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.grid,r=n.getSubGrid(n.getNextRegion(t.region)),o=n.resolveSplitter(r);r.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),r.header.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),t.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),t.header.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),o.classList[e?"remove":"add"]("b-grid-splitter-animate")}},{key:"collapse",value:(a=DT(regeneratorRuntime.mark((function e(){var t,n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this).grid,r=n.getSubGrid(n.getNextRegion(t.region)),o=t.splitterElement?t:t.previousSibling,i=0,n.eachSubGrid((function(e){e!==t&&!e._collapsed&&++i})),0!==i){e.next=6;break}return e.next=6,r.expand();case 6:return e.abrupt("return",new Promise((function(e){if(!t._beforeCollapseState){t._beforeCollapseState={};var n=!1;t.width&&(n=!0,t.on({afterinternalresize:function(){e(t)},thisObj:t,once:!0})),t._beforeCollapseState.width=t.width,t._beforeCollapseState.elementWidth=t.element.style.width,""===r.element.style.flex&&(t._beforeCollapseState.nextRegionWidth=r.width,r.width+=t._beforeCollapseState.width),""!==t.element.style.flex&&(t._beforeCollapseState.flex=t.element.style.flex,t.header.element.style.flex=t.element.style.flex=""),t.element.classList.add("b-grid-subgrid-collapsed"),t.virtualScrollerElement.classList.add("b-collapsed"),t.header.element.classList.add("b-collapsed"),t.footer&&t.footer.element.classList.add("b-collapsed"),t.width="",t._collapsed=!0,n||e(!1)}})).then((function(e){t.isDestroyed||!1===e||(t.syncParallelSplitters(!0),t.grid.trigger("subGridCollapse",t),o.startSplitterButtonSyncing&&o.startSplitterButtonSyncing())})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"expand",value:(i=DT(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=this).grid,r=n.getSubGrid(n.getNextRegion(t.region)),o=t.splitterElement?t:t.previousSibling,e.abrupt("return",new Promise((function(e){if(null!=t._beforeCollapseState){var n=!1;t.width!==t._beforeCollapseState.elementWidth&&(n=!0,t.on({afterinternalresize:function(){t.setTimeout((function(){return e(t)}),10)},thisObj:t,once:!0})),""===r.element.style.flex&&(r.width=t._beforeCollapseState.nextRegionWidth),t.element.classList.remove("b-grid-subgrid-collapsed"),t._collapsed=!1,t.virtualScrollerElement.classList.remove("b-collapsed"),t.header.element.classList.remove("b-collapsed"),t.footer&&t.footer.element.classList.remove("b-collapsed"),t._beforeCollapseState.flex?(t.width=t._beforeCollapseState.width,t.header.flex=t.flex=t._beforeCollapseState.flex,t.footer&&(t.footer.flex=t._beforeCollapseState.flex),t._width=null):t.width=t._beforeCollapseState.elementWidth,t.element.classList.remove("b-grid-subgrid-collapsed"),t._collapsed=!1,n||e(!1),delete t._beforeCollapseState}})).then((function(e){!1!==e&&(o.stopSplitterButtonSyncing(),t.syncParallelSplitters(!1),t.grid.trigger("subGridExpand",t))})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"totalFixedWidth",get:function(){return this.columns.totalFixedWidth}},{key:"width",set:function(e){var n=this;n.hasCalculatedWidth=!1,LT(BT(t.prototype),"width",e,this,!0),n.header&&(n.header.width=e),n.footer&&(n.footer.width=e),n.isPainted&&n.onElementResize()},get:function(){return NT(BT(t.prototype),"width",this)}},{key:"flex",set:function(e){var n=this;n.hasCalculatedWidth=!1,n.header&&(n.header.flex=e),n.footer&&(n.footer.flex=e),LT(BT(t.prototype),"flex",e,this,!0),n.isPainted&&n.onElementResize()},get:function(){return NT(BT(t.prototype),"flex",this)}},{key:"viewRectangle",get:function(){return new tr(this.scrollable.x,this.scrollable.y,this._width,this.rowManager.viewHeight)}},{key:"scrolling",set:function(e){this._scrolling=e},get:function(){return this._scrolling}},{key:"rowElements",get:function(){return this.fromCache(".b-grid-row",!0)}},{key:"emptyText",get:function(){return this._emptyText},set:function(e){this._emptyText=e,this.element.dataset.emptyText=e}},{key:"collapsed",get:function(){return this._collapsed},set:function(e){this.isConfiguring?this._collapsed=e:e?this.collapse():this.expand()}}],o=[{key:"$name",get:function(){return"SubGrid"}},{key:"defaultConfig",get:function(){return{localizableProperties:["emptyText"],localeClass:"Grid",insertRowsBefore:null,appendTo:null,hideHeaders:null,monitorResize:!0,collapsed:null,scrollable:{overflowX:!0},scrollerClass:xT,hasCalculatedWidth:null,sealedColumns:null,emptyText:null}}}],r&&MT(n.prototype,r),o&&MT(n,o),t}(ni);function WT(e){return(WT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GT(e,t){return!t||"object"!==WT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UT(e){return(UT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qT(e,t){return(qT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}VT._$name="SubGrid";var XT={TemplateColumn:{noTemplate:"TemplateColumn needs a template",noFunction:"TemplateColumn.template must be a function"},ColumnStore:{columnTypeNotFound:function(e){return"Column type '".concat(e.type,"' not registered")}},ColumnPicker:{columnsMenu:"Columns",hideColumn:"Hide column",hideColumnShort:"Hide"},Filter:{applyFilter:"Apply filter",filter:"Filter",editFilter:"Edit filter",on:"On",before:"Before",after:"After",equals:"Equals",lessThan:"Less than",moreThan:"More than",removeFilter:"Remove filter"},FilterBar:{enableFilterBar:"Show filter bar",disableFilterBar:"Hide filter bar"},Group:{groupAscending:"Group ascending",groupDescending:"Group descending",groupAscendingShort:"Ascending",groupDescendingShort:"Descending",stopGrouping:"Stop grouping",stopGroupingShort:"Stop"},Search:{searchForValue:"Search for value"},Sort:{sortAscending:"Sort ascending",sortDescending:"Sort descending",multiSort:"Multi sort",removeSorter:"Remove sorter",addSortAscending:"Add ascending sorter",addSortDescending:"Add descending sorter",toggleSortAscending:"Change to ascending",toggleSortDescending:"Change to descending",sortAscendingShort:"Ascending",sortDescendingShort:"Descending",removeSorterShort:"Remove",addSortAscendingShort:"+ Ascending",addSortDescendingShort:"+ Descending"},Tree:{noTreeColumn:"To use the tree feature one column must be configured with tree: true"},Grid:{featureNotFound:function(e){return"Feature '".concat(e,"' not available, make sure you have imported it")},invalidFeatureNameFormat:function(e){return"Invalid feature name '".concat(e,"', must start with a lowercase letter")},removeRow:"Delete record",removeRows:"Delete records",loadFailedMessage:"Data loading failed.",moveColumnLeft:"Move to left section",moveColumnRight:"Move to right section"},GridBase:{loadMask:"Loading...",syncMask:"Saving changes, please wait...",noRows:"No records to display"},PdfExport:{"Waiting for response from server...":"Waiting for response from server...","Export failed":"Export failed","Server error":"Server error"},ExportDialog:{width:"40em",labelWidth:"12em",exportSettings:"Export settings",export:"Export",exporterType:"Control pagination",cancel:"Cancel",fileFormat:"File format",rows:"Rows",alignRows:"Align rows",columns:"Columns",paperFormat:"Paper format",orientation:"Orientation"},ExportRowsCombo:{all:"All rows",visible:"Visible rows"},ExportOrientationCombo:{portrait:"Portrait",landscape:"Landscape"},SinglePageExporter:{singlepage:"Single page"},MultiPageExporter:{multipage:"Multiple pages",exportingPage:function(e){var t=e.currentPage,n=e.totalPages;return"Exporting page ".concat(t,"/").concat(n)}}};for(var KT in zo)XT[KT]=zo[KT];var ZT=XT;function JT(e){return(JT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function eA(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n            <div tabindex="-1">\n                <header reference="headerContainer" class="b-grid-header-container ','"></header>\n                <div reference="bodyContainer" class="b-grid-body-container">\n                    <div reference="verticalScroller" class="b-grid-vertical-scroller"></div>\n                </div>\n                <div reference="virtualScrollers" class="b-virtual-scrollers ','" style="','"></div>\n                <footer reference="footerContainer" class="b-grid-footer-container b-hidden"></footer>\n            </div>\n        ']);return eA=function(){return e},e}function tA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rA(e,t){return!t||"object"!==JT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oA(e,t,n){return(oA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iA(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function iA(e){return(iA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aA(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uA(e,t)}function uA(e,t){return(uA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Te.registerLocale("En",{desc:"English",locale:XT});var cA=new Promise((function(e){return e()})),sA={block:"nearest",inline:"nearest"},lA={dataset:1,filter:1},fA=function(e){function t(){return tA(this,t),rA(this,iA(t).apply(this,arguments))}var n,r,o;return aA(t,e),n=t,o=[{key:"getLKey",value:function(){return"5ba3a32a-5174-11ea-83f7-d094663d5c88"}},{key:"$name",get:function(){return"GridBase"}},{key:"defaultConfig",get:function(){return{rowHeight:null,defaultRowHeight:45,emptyText:"L{noRows}",fullRowRefresh:!0,readOnly:null,hideHeaders:null,showRemoveRowInContextMenu:!0,autoHeight:null,store:{},data:null,columns:[],defaultRegion:"normal",destroyStore:null,enableTextSelection:null,loadMask:"L{loadMask}",syncMask:"L{syncMask}",columnLines:!0,fillLastColumn:!0,resizeToFitIncludesHeader:!0,animateRemovingRows:!we.isIE11,disableGridRowModelWarning:null,loadMaskErrorIcon:"b-icon b-icon-warning",headerClass:mP,testPerformance:!1,positionMode:"translate",rowScrollMode:"move",monitorResize:!0,features:!0,subGridConfigs:{normal:{flex:1}},scrollable:{overflowY:!0},scrollerClass:oP,showDirty:null,loadMaskHideTimeout:3e3,transitionDurationTimeout:500,refreshSuspended:0,transitionDuration:500,contextMenuTriggerEvent:"contextmenu",localizableProperties:["emptyText","loadMask","syncMask"],localeClass:"Grid"}}},{key:"properties",get:function(){return{_selectedRecords:[],_verticalScrollHeight:0,virtualScrollHeight:0,_scrollTop:null}}}],(r=[{key:"finishConfigure",value:function(e){var n=this;oA(iA(t.prototype),"finishConfigure",this).call(this,e),n.scrollManager=new PR({grid:n,verticalElement:n.scrollable.element}),Te.on({locale:"onBeforeLocaleChange",prio:1,thisObj:n}),Te.on({locale:"onLocaleChange",prio:-1,thisObj:n}),di.on({theme:"onThemeChange",thisObj:n}),n.on({subGridExpand:"onSubGridExpand",prio:-1,thisObj:n}),n.setGridClassList(n.element.classList)}},{key:"onSubGridExpand",value:function(){this.renderContents()}},{key:"onBeforeLocaleChange",value:function(){this._suspendRenderContentsOnColumnsChanged=!0}},{key:"onLocaleChange",value:function(){this._suspendRenderContentsOnColumnsChanged=!1,this.isPainted&&this.renderContents()}},{key:"finalizeInit",value:function(){oA(iA(t.prototype),"finalizeInit",this).call(this),this.store.isLoading&&this.onStoreBeforeRequest()}},{key:"doDestroy",value:function(){var e=this;e.storeDetacher&&e.storeDetacher();for(var n=0,r=Object.values(e.features);n<r.length;n++){var o=r[n];o.destroy&&o.destroy()}e.columns&&(e.columns=null),e.store&&(e.store=null),oA(iA(t.prototype),"doDestroy",this).call(this)}},{key:"setGridClassList",value:function(e){var t=this;for(var n in e.add("b-grid-".concat(t.positionMode)),t.enableTextSelection||e.add("b-grid-notextselection"),t.autoHeight&&e.add("b-autoheight"),t.readOnly&&e.add("b-readonly"),t.fillLastColumn&&e.add("b-fill-last-column"),t.showDirty&&e.add("b-show-dirty"),t.features){var r=t.features[n],o=void 0;(o=Object.prototype.hasOwnProperty.call(r.constructor,"featureClass")?r.constructor.featureClass:"b-".concat(r instanceof Y?r.$name:r.constructor.name))&&e.add(o.toLowerCase())}}},{key:"template",value:function(e){var t=we.isFirefox?"height:".concat(xn.scrollBarWidth,"px"):"";return Xa.tpl(eA(),this.hideHeaders?"b-hidden":"",xn.scrollBarWidth?"":"b-overlay-scrollbar",t)}},{key:"onColumnsChanged",value:function(e){var t=e.action,n=e.changes,r=e.record,o=this;if(o.isPainted){if("update"===t){if("width"in n||"minWidth"in n||"flex"in n){if(o.isPainted){var i=r.region;o.columns.visibleColumns.forEach((function(e){e.region===i&&e.repaintOnResize&&o.refreshColumn(e)}))}return}if("hidden"in n){var a=o.getSubGridFromColumn(r.id);a.header.fixHeaderWidths(),a.footer&&a.footer.fixFooterWidths(),a.updateHasFlex()}}("dataset"===t||n&&"region"in n&&!o.regions.includes(n.region.value))&&(o.initSubGrids(),o.eachSubGrid((function(e){e.render(o.verticalScroller),e.initScroll()}))),o._suspendRenderContentsOnColumnsChanged||o.renderContents()}}},{key:"onColumnsResized",value:function(e){var t=e.changes,n=e.record,r=this,o=t.width&&null==n.flex,i=t.minWidth&&null==n.flex,a=t.flex&&null==n.width,u=xn.setLength(n.width),c=xn.setLength(n.minWidth),s=r.getSubGridFromColumn(n.id);s.header.fixHeaderWidths(),s.footer&&s.footer.fixFooterWidths(),s.updateHasFlex(),r.cellEls&&n===r.lastColumnResized||(r.cellEls=xn.children(r.element,".b-grid-cell[data-column-id=".concat(n.id,"]")),r.lastColumnResized=n);var l=!0,f=!1,d=void 0;try{for(var p,h=r.cellEls[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var y=p.value;o?(y.style.width=u,y.style.flex="",we.isIE11&&(y.style.minWidth=u)):i?y.style.minWidth=c:a?(y.style.flex=n.flex,y.style.width=""):y.style.flex=y.style.width=y.style.minWidth=""}}catch(e){f=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(f)throw d}}r.dragResizing||r.afterColumnsResized()}},{key:"afterColumnsResized",value:function(){var e=this;e.refreshVirtualScrollbars(),e.eachSubGrid((function(e){e.collapsed||(e.fixWidths(),e.fixRowWidthsInSafariEdge(),e.refreshFakeScroll())})),e.onHeightChange(),e.lastColumnResized=e.cellEls=null}},{key:"processCellEditor",value:function(e){}},{key:"toggleEmptyText",value:function(){this.bodyContainer&&this.bodyContainer.classList[this.rowManager.rowCount||this.store.isLoading?"remove":"add"]("b-grid-empty")}},{key:"bindStore",value:function(e){if(e){var t=this;t.storeDetacher=e.on({refresh:t.onStoreDataChange,update:t.onStoreUpdateRecord,add:t.onStoreAdd,remove:t.onStoreRemove,move:t.onStoreMove,replace:t.onStoreReplace,removeall:t.onStoreRemoveAll,beforerequest:t.onStoreBeforeRequest,afterrequest:t.onStoreAfterRequest,clearchanges:t.onStoreDataChange,exception:t.onStoreException,commit:t.onStoreCommit},t)}}},{key:"onStoreUpdateRecord",value:function(e){var t=e.source,n=e.record,r=e.changes,o=this;if(o.forceFullRefresh)o.rowManager.refresh(),o.forceFullRefresh=!1;else{var i;if(n.isFieldModified("id")&&(i=o.getRowFor(n.meta.modified.id)),!(i=i||o.getRowFor(n)))return;if(o.fullRowRefresh||n.meta.specialRow){var a=t.indexOf(n);-1!==a&&i.render(a,n)}else o.columns.visibleColumns.forEach((function(e){var t=e.field;if(!e.constructor.simpleRenderer||Object.prototype.hasOwnProperty.call(e.data,"renderer")||r[t]){var o=i.getCell(t);o&&i.renderCell(o,n)}}))}}},{key:"refreshFromRowOnStoreAdd",value:function(e,t){var n=this.rowManager;n.renderFromRow(e),n.trigger("changeTotalHeight",{totalHeight:n.totalHeight}),1===this.store.count&&this.callEachSubGrid("refreshFakeScroll")}},{key:"onStoreAdd",value:function(e){var t=e.source,n=e.records,r=e.index,o=e.oldIndex,i=e.isChild,a=e.oldParent,u=e.isMove;if(this.isPainted&&(!i||n[0].ancestorsExpanded(t))){this.rowManager.calculateRowCount(!1,!0,!0);var c=this,s=c.rowManager,l=s.topIndex,f=s.rows,d=s.rowCount,p=s.topIndex+s.rowCount-1,h=r,y=r+n.length-1,g=p>=t.count-n.length-1;a||o>-1||i&&u?s.refresh():h>=l&&h<l+d?c.refreshFromRowOnStoreAdd.apply(c,[f[h-l]].concat(Array.prototype.slice.call(arguments))):y>=l&&y<l+d?s.refresh():(g&&r>p&&s.fillBelow(c._scrollTop),s.trigger("changeTotalHeight",{totalHeight:s.totalHeight}))}}},{key:"onStoreException",value:function(e){var t,n=this;switch(e.type){case"server":t=e.response.message||"Unspecified failure";break;case"exception":t="network"===e.exceptionType?"Network error":e.error&&e.error.message||"Failed to parse server response";break;default:t=e.response.status+" - "+e.response.statusText||"Unknown error"}var r='<div class="b-grid-load-failure">\n                <div class="b-grid-load-fail">'.concat(n.L("loadFailedMessage"),'</div>\n                <div class="b-grid-load-fail">').concat(e.response&&e.response.url?e.response.url+" responded with":"",'</div>\n                <div class="b-grid-load-fail">').concat(t,"</div>\n            </div>");n.activeMask&&(n.activeMask.icon=n.loadMaskErrorIcon,n.activeMask.text=r,n.loadmaskHideTimer=n.setTimeout((function(){n.unmaskBody()}),n.loadMaskHideTimeout))}},{key:"onStoreDataChange",value:function(e){var n=e.action,r=e.changes,o=e.source;oA(iA(t.prototype),"onStoreDataChange",this)&&oA(iA(t.prototype),"onStoreDataChange",this).apply(this,arguments);var i=this,a=o.isGrouped&&r&&o.groupers.some((function(e){return e.field in r}));"dataset"===n&&(i.rowManager.averageRowHeight=null),i.isPainted&&!a&&i.renderRows(null,lA[n]),i.toggleEmptyText()}},{key:"onStoreBeforeRequest",value:function(){this.loadMask&&this.maskBody(this.loadMask)}},{key:"onStoreAfterRequest",value:function(e){this.activeMask&&!e.exception&&(this.unmaskBody(),this.toggleEmptyText())}},{key:"onStoreRemove",value:function(e){var n=e.records,r=e.isCollapse,o=e.isChild,i=e.isMove;if(this.isPainted&&!i){oA(iA(t.prototype),"onStoreRemove",this)&&oA(iA(t.prototype),"onStoreRemove",this).apply(this,arguments);var a=Math.pow(2,53)-1,u=this,c=this.rowManager,s=n.reduce((function(e,t){var n=c.getRowById(t.id);return n&&(e.push(n),a=Math.min(a,c.rows.indexOf(n))),e}),[]);if(u.animateRemovingRows&&s.length&&!r&&!o){var l=s[0];u.isAnimating=!0,_r.onTransitionEnd({element:l._elementsArray[0],property:"left",timeout:u.transitionDurationTimeout,thisObj:u,handler:function(){u.isAnimating=!1,s.forEach((function(e){return!e.isDestroyed&&e.removeCls("b-removing")})),c.refresh(),u.trigger("rowRemove")}}),s.forEach((function(e){return e.addCls("b-removing")}))}else c.calculateRowCount(!1,!0,!0),c.rows[a]?c.renderFromRow(c.rows[a]):c.trigger("changeTotalHeight",{totalHeight:c.totalHeight}),u.trigger("rowRemove",{isCollapse:r})}}},{key:"onStoreMove",value:function(e){var t=e.from,n=e.to,r=this.rowManager,o=r.topIndex,i=r.rowCount,a=QT([t,n].sort(),2),u=a[0],c=a[1];u>=o&&u<o+i?r.renderFromRow(r.rows[u-o]):c>=o&&c<o+i&&r.refresh()}},{key:"onStoreReplace",value:function(e){var t=this,n=e.records;if(e.all)this.rowManager.refresh();else{var r=n.reduce((function(e,n){var r=QT(n,2)[1],o=t.getRowFor(r);return o&&e.push(o),e}),[]);this.rowManager.renderRows(r)}}},{key:"onStoreRemoveAll",value:function(){oA(iA(t.prototype),"onStoreRemoveAll",this)&&oA(iA(t.prototype),"onStoreRemoveAll",this).apply(this,arguments),this.isPainted&&(this.renderRows(),this.toggleEmptyText())}},{key:"onStoreCommit",value:function(e){var t=this,n=e.changes;if(this.showDirty&&n.modified.length){var r=[];n.modified.forEach((function(e){var n=t.rowManager.getRowFor(e);n&&r.push(n)})),this.rowManager.renderRows(r)}}},{key:"getHeaderMenuItems",value:function(e,t){var n=this,r=n.subGrids,o=n.regions,i=!0;Object.entries(r).forEach((function(a){var u=QT(a,2),c=u[0],s=u[1];if(!s.sealedColumns&&e.draggable&&c!==e.region&&(!e.parent&&r[e.region].columns.count>1||e.parent&&e.parent.children.length>1)){var l=s.element.compareDocumentPosition(r[e.region].element)===document.DOCUMENT_POSITION_PRECEDING,f=o.length>2?n.L("Move column to ")+c:n.L(l?"moveColumnRight":"moveColumnLeft");t.push({targetSubGrid:c,text:f,icon:"b-fw-icon "+(l?"b-icon-column-move-right":"b-icon-column-move-left"),name:"moveColumn",cls:i?"b-separator":"",onItem:function(e){var t=e.item,o=t.column;o.traverse((function(e){return e.region=c})),n.columns.insert(n.columns.indexOf(r[t.targetSubGrid].columns.last)+1,o),n.scrollColumnIntoView(o)}}),i=!1}}))}},{key:"getCellMenuItems",value:function(e,t,n){var r=this;r.showRemoveRowInContextMenu&&!r.readOnly&&t&&!t.meta.specialRow&&(r.selectedRecords.length>1?n.push({text:r.L("removeRows"),icon:"b-fw-icon b-icon-trash",name:"removeRows",onItem:function(){return r.store.remove(r.selectedRecords)}}):n.push({text:r.L("removeRow"),icon:"b-fw-icon b-icon-trash",name:"removeRow",onItem:function(){return r.store.remove(t)}}))}},{key:"getColumnDragToolbarItems",value:function(e,t){return t}},{key:"normalizeCellContext",value:function(e){var t=this.columns,n=this.store;if(e instanceof n.modelClass)return{record:e,id:e.id,columnId:t.bottomColumns[0].id};if(!("columnId"in e)){if("field"in e){var r=t.get(e.field);e.columnId=r&&r.id}else if("column"in e){var o="number"==typeof e.column?t.bottomColumns[e.column]:e.column;e.columnId=o&&o.id}"columnId"in e||(e.columnId=t.bottomColumns[0].id)}if("id"in e){if(e.element&&!n.getById(e.id)){var i=this.getRecordFromElement(e.element);i&&(e.id=i.id)}}else"row"in e?e.id=n.getAt(e.row).id:"record"in e&&(e.id=e.record.id);return e}},{key:"getCell",value:function(e){var t,n=null;return"id"in(e=this.normalizeCellContext(e))&&(t=this.getRowById(e.id)),t&&"columnId"in e&&(n=t.getCell(e.columnId)),n}},{key:"getHeaderElement",value:function(e){return"string"!=typeof e&&(e=e.id),this.fromCache('.b-grid-header[data-column-id="'.concat(e,'"]'))}},{key:"getHeaderElementByField",value:function(e){var t=this.columns.get(e);return t?this.getHeaderElement(t):null}},{key:"getRecordFromElement",value:function(e){var t=e.closest(".b-grid-row");return t?this.store.getAt(t.dataset.index):null}},{key:"getColumnFromElement",value:function(e){var t=xn.up(e,".b-grid-cell, .b-grid-header");if(!t)return null;if(t.matches(".b-grid-header"))return this.columns.getById(t.dataset.columnId);var n=tg.get(t);return this.columns.getById(n.columnId)}},{key:"fixSizes",value:function(){this.callEachSubGrid("fixWidths")}},{key:"onRowManagerChangeTotalHeight",value:function(e){var t=e.totalHeight;return this.refreshTotalHeight(t)}},{key:"refreshTotalHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rowManager.totalHeight,t=this;if(t.renderingRows||!t.isVisible)return!1;t.rowManager.bottomRow&&(e=Math.max(e,t.rowManager.bottomRow.bottom));var n=t.scrollable,r=Math.abs(t.virtualScrollHeight-e),o=t._bodyRectangle.height,i=e-o;if(r){var a=i-t._scrollTop<2*o||t._verticalScrollHeight&&t._verticalScrollHeight-o<t._scrollTop;n.scrollHeight=t.virtualScrollHeight=e,t.scrolling&&!a?t.virtualScrollHeightDirty||(t.virtualScrollHeightDirty=n.on({scrollend:t.fixElementHeights,thisObj:t,once:!0})):(t.virtualScrollHeightDirty&&t.virtualScrollHeightDirty(),t.fixElementHeights(e))}}},{key:"fixElementHeights",value:function(){var e=this,t=e.virtualScrollHeight,n="".concat(t,"px");e._verticalScrollHeight=t,e.verticalScroller.style.height=n,e.virtualScrollHeightDirty=!1,e.autoHeight&&(e.bodyContainer.style.height=n,e._bodyHeight=t,e._bodyRectangle=tr.client(e.bodyContainer)),e.refreshVirtualScrollbars()}},{key:"enableScrollingCloseToEdges",value:function(e){"string"==typeof e&&(e=this.subGrids[e]),this.scrollManager.startMonitoring({element:e.element})}},{key:"disableScrollingCloseToEdges",value:function(e){"string"==typeof e&&(e=this.subGrids[e]),this.scrollManager.stopMonitoring(e.element)}},{key:"onRowManagerRequestScrollChange",value:function(e){var t=e.bottom;this.scrollable.y=t-this.bodyHeight}},{key:"initScroll",value:function(){var e=this;if(!e.scrollInitialized){var t,n=e.createOnFrame((function(){(t=e.scrollable.y)!==e._scrollTop&&(e._scrollTop=t,e.scrolling||(e.scrolling=!0,e.eachSubGrid((function(e){return e.suspendResizeMonitor=!0}))),e.rowManager.updateRenderedRows(t),e.trigger("scroll",{scrollTop:t}))}));e.scrollInitialized=!0,e.scrollable.on({scroll:n,scrollend:function(){e.scrolling=!1,e.eachSubGrid((function(e){return e.suspendResizeMonitor=!1}))}}),e.callEachSubGrid("initScroll")}}},{key:"scrollRowIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sA,n=this,r=t.block||"nearest",o=n.rowManager;if(e=n.store.getById(e)){if(-1===n.store.indexOf(e))return cA;var i=n.scrollable,a=n.getRecordCoords(e),u=tr.from(i.element);if(a.virtual){var c=a.block;if(i.scrollIntoView(a,{block:"center"}),o.scrollTargetRecordId=e,o.updateRenderedRows(i.y,!0),a=n.getRecordCoords(e),o.lastScrollTop=i.y,a.virtual)return cA;var s="nearest"!==r?t:{block:c};if(t.animate){i.suspendEvents(),"end"===r||"nearest"===r&&"end"===c?i.y-=u.bottom-a.bottom:("start"===r||"nearest"===r&&"start"===c)&&(i.y+=a.y-u.y),o.updateRenderedRows(i.y,!1,!0),"end"===c?i.y-=o.appendRowBuffer*o.rowHeight-1:i.y+=o.prependRowBuffer*o.rowHeight-1;var l=i.scrollIntoView(n.getRecordCoords(e),Object.assign({},t,s));return l.then((function(){return i.resumeEvents()}))}return n.scrollRowIntoView(e,Object.assign({},t,s))}var f=t.column;if(f){if("string"==typeof f&&(f=n.columns.getById(f)||n.columns.get(f)),f){i=n.getSubGridFromColumn(f).scrollable;var d=tr.from(o.getRowFor(e).getCell(f.id));a.x=d.x,a.width=d.width}}else t.x=!1;return i.scrollIntoView(a,t)}}},{key:"scrollColumnIntoView",value:function(e,t){return e=e instanceof XS?e:this.columns.get(e)||this.columns.getById(e)||this.columns.getAt(e),this.getSubGridFromColumn(e).scrollColumnIntoView(e,t)}},{key:"scrollCellIntoView",value:function(e,t){return this.scrollRowIntoView(e.id,Object.assign({column:e.columnId},"boolean"==typeof t?{animate:t}:t))}},{key:"scrollToBottom",value:function(e){return this.scrollRowIntoView(this.store.last,e)}},{key:"scrollToTop",value:function(e){return this.scrollable.scrollBy(0,-this.scrollable.y,e)}},{key:"storeScroll",value:function(){var e=this.storedScrollState={scrollTop:this.scrollable.y,scrollLeft:{}};return this.eachSubGrid((function(t){e.scrollLeft[t.region]=t.scrollable.x})),e}},{key:"restoreScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.storedScrollState,t=this;t.eachSubGrid((function(t){t.scrollable.x=e.scrollLeft[t.region]})),t.scrollable.y=e.scrollTop}},{key:"measureRowHeight",value:function(){var e=this,t=xn.createElement({tag:"div",className:"b-grid "+(e.features.stripe?"b-stripe":""),style:"position: absolute; visibility: hidden",html:'<div class="b-grid-subgrid"><div class="b-grid-row"></div></div>',parent:document.getElementById(e.appendTo)||document.body}),n=t.firstElementChild.firstElementChild,r=parseInt(xn.getStyleValue(n,"height")),o=parseInt(xn.getStyleValue(n,"border-top-width")),i=parseInt(xn.getStyleValue(n,"border-bottom-width"));null!=e.rowHeight&&e.rowHeight!==e._rowHeightFromStyle||(e.rowHeight=!isNaN(r)&&r?r:e.defaultRowHeight,e._rowHeightFromStyle=e.rowHeight),e._rowBorderHeight=o+i,e._isRowMeasured=!0,t.remove()}},{key:"onThemeChange",value:function(e){var t=e.theme;this.measureRowHeight(),this.trigger("theme",{theme:t})}},{key:"refreshRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.element.classList.add("b-notransition"),e?this.rowManager.returnToTop():this.rowManager.refresh(),this.element.classList.remove("b-notransition")}},{key:"refreshColumn",value:function(e){var t=e.field;this.rowManager.forEach((function(e){var n=e.getCell(t);e.renderCell(n)}))}},{key:"refreshVirtualScrollbars",value:function(){var e=this,t=e.headerContainer,n=e.footerContainer,r=e.virtualScrollers,o=e.scrollable,i=we.isEdge||we.isIE11?Math.abs(o.scrollHeight-o.clientHeight)>1:o.scrollHeight>o.clientHeight,a=i?"add":"remove";Object.values(e.subGrids).some((function(e){return e.overflowingHorizontally}))?r.classList.remove("b-hide-display"):r.classList.add("b-hide-display"),t.classList[a]("b-grid-vertical-overflow"),n.classList[a]("b-grid-vertical-overflow"),r.classList[a]("b-grid-vertical-overflow"),e.onHeightChange(),xn.scrollBarWidth&&(t.style.marginRight=n.style.paddingRight=i?"".concat(xn.scrollBarWidth-1,"px"):0)}},{key:"onContentChange",value:function(){var e=this,t=e.rowManager;e.isVisible?(t.estimateTotalHeight(),e.paintListener=null,e.refreshTotalHeight(e.contentHeight),e.callEachSubGrid("refreshFakeScroll"),e.onHeightChange()):e.paintListener||(e.paintListener=e.on({paint:"onContentChange",once:!0,thisObj:e}))}},{key:"onHeightChange",value:function(){var e=this;e._bodyRectangle=tr.client(e.bodyContainer),e._bodyHeight=e.autoHeight?e.contentHeight:e.bodyContainer.offsetHeight}},{key:"renderHeader",value:function(e,t){}},{key:"renderFooter",value:function(e,t){}},{key:"suspendRefresh",value:function(){this.refreshSuspended++}},{key:"resumeRefresh",value:function(e){this.refreshSuspended&&!--this.refreshSuspended&&e&&this.refreshRows()}},{key:"renderRows",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=e&&n.storeScroll();n.refreshSuspended||(n.trigger("beforeRenderRows"),n.renderingRows=!0,n.element.classList.add("b-grid-refreshing"),t&&(n.scrollable.y=n._scrollTop=0),n.rowManager.reinitialize(t),n.trigger("renderRows"),n.renderingRows=!1,n.onContentChange(),e&&n.restoreScroll(r),n.element.classList.remove("b-grid-refreshing"))}},{key:"renderContents",value:function(){var e=this,t=e.element,n=e.headerContainer,r=e.footerContainer,o=e.rowManager;if(e.emptyCache(),e.isPainted){e._headerHeight=null,e.callEachSubGrid("refreshHeader",n),e.callEachSubGrid("refreshFooter",r),e.renderHeader(n,t),e.renderFooter(r,t),e.fixSizes();var i=o.removeAllRows();o.calculateRowCount(!1,!0,!0),o.rowCount&&(o.setPosition(i),e.renderRows())}}},{key:"onPaint",value:function(){var e=this,t=e.rowManager,n=e.store,r=e.element,o=e.headerContainer,i=e.bodyContainer,a=e.footerContainer;if(!e.isPainted){var u,c=0;e.columns.on({change:function(){return u=!0},single:!0}),e._bodyRectangle=tr.client(e.bodyContainer);var s=e.bodyContainer.offsetHeight;e.updateResponsive(e.width,0),u&&(e.callEachSubGrid("refreshHeader",o),e.callEachSubGrid("refreshFooter",a)),e.renderHeader(o,r),e.renderFooter(a,r),e.autoHeight?(e._bodyHeight=t.initWithHeight(r.offsetHeight-o.offsetHeight-a.offsetHeight,!0),i.style.height=e.bodyHeight+"px"):(e._bodyHeight=s,t.initWithHeight(e._bodyHeight,!0)),e.eachSubGrid((function(e){e.header.maxDepth>c&&(c=e.header.maxDepth)})),o.dataset.maxDepth=c,e.fixSizes(),!n.count&&n.isLoading||e.renderRows(!1,!1),e.initScroll(),e.initInternalEvents()}}},{key:"render",value:function(){var e=this;e.requireSize=Boolean(e.owner),oA(iA(t.prototype),"render",this).apply(this,arguments),e.autoHeight||!e.headerContainer.offsetHeight||e.bodyContainer.offsetHeight||console.warn("Grid element not sized correctly, please check your CSS styles and review how you size the widget")}},{key:"maskBody",value:function(e){var t=this;if(t.bodyContainer){t.unmaskBody();var n=(t.activeMask=xi.mask(e,t.element)).maskElement;return n.style.marginTop="".concat(t.bodyContainer.offsetTop,"px"),n.style.height="".concat(t.virtualScrollers.offsetTop+t.virtualScrollers.offsetHeight-t.bodyContainer.offsetTop,"px"),t.activeMask}}},{key:"unmaskBody",value:function(){var e=this;e.loadmaskHideTimer&&e.clearTimeout(e.loadmaskHideTimer),e.loadmaskHideTimer=null,e.activeMask&&e.activeMask.destroy(),e.activeMask=null}},{key:"contentElement",get:function(){return this.verticalScroller}},{key:"overflowElement",get:function(){return this.bodyContainer}},{key:"focusElement",get:function(){return this.element}},{key:"columns",set:function(e){var t,n,r=this;r._columnStore?e?r._columnStore.data=e:r._columnStore.destroy():(e instanceof rO?(e.grid||(e.grid=r),r._columnStore=e):Array.isArray(e)?r._columnStore=new rO({grid:r,data:e}):e&&(r._columnStore=new rO(Object.assign({grid:r},e))),r._columnStore.on("change",r.onColumnsChanged,r),r._columnStore.on((t=r.onColumnsResized,n=r,{update:function(e){var r=e.store,o=e.record,i=e.changes,a=!0;return("width"in i||"minWidth"in i||"flex"in i)&&(a=t.call(n,{store:r,record:o,changes:i})),a}})),we.isTouchDevice&&(r.touch=!0,r._columnStore.forEach((function(e){var t=e.touchConfig;t&&e.applyState(t)}))))},get:function(){return this._columnStore}},{key:"rowManager",get:function(){var e=this;return e._isRowMeasured||e.measureRowHeight(),e._rowManager||(e._rowManager=new qR({grid:e,rowHeight:e.rowHeight,rowScrollMode:e.rowScrollMode||"move",autoHeight:e.autoHeight,listeners:{changetotalheight:e.onRowManagerChangeTotalHeight,requestscrollchange:e.onRowManagerRequestScrollChange,thisObj:e}}))}},{key:"store",get:function(){return this._store},set:function(e){var t=this,n=t.rowManager,r=t.initialConfig.features;if(e!==t._store)if(t.storeDetacher&&(t.storeDetacher(),t.storeDetacher=null),e){if(e instanceof ed);else{var o={};t.data&&(o.data=t.data),r&&r.tree&&(o.tree=!0),e.modelClass||(o.modelClass=function(e){function t(){return tA(this,t),rA(this,iA(t).apply(this,arguments))}return aA(t,e),t}(XE)),e=new(e.readUrl?hd:ed)(Object.assign(o,e))}t._store=e,t.bindStore(e),t.isPainted&&n.reinitialize()}else t.destroyStore&&t._store.destroy(),t._store=null}},{key:"data",get:function(){return this._store?this._store.records:this._data},set:function(e){this._store?this._store.data=e:this._data=e}},{key:"emptyText",get:function(){return this._emptyText},set:function(e){this._emptyText=e,this.eachSubGrid((function(t){return t.emptyText=e}))}},{key:"bodyHeight",get:function(){return this._bodyHeight}},{key:"headerHeight",get:function(){var e=this;return e.isPainted&&!e._headerHeight&&(e._headerHeight=e.headerContainer.offsetHeight),e._headerHeight}},{key:"autoHeight",get:function(){return this._autoHeight},set:function(e){Mt.assertBoolean(e,"autoHeight"),this._autoHeight=e}},{key:"columnLines",get:function(){return this._columnLines},set:function(e){Mt.assertBoolean(e,"columnLines"),xn.toggleClasses(this.element,"b-no-column-lines",!e),this._columnLines=e}},{key:"readOnly",set:function(e){var t=this;t._readOnly=e,t.isPainted&&(t.trigger("readOnly",{readOnly:e}),e?t.element.classList.add("b-readonly"):t.element.classList.remove("b-readonly"))},get:function(){return this._readOnly}},{key:"scrolling",set:function(e){this._scrolling=e},get:function(){return this._scrolling}},{key:"contentHeight",get:function(){var e=this.rowManager;return Math.max(e.totalHeight,e.bottomRow?e.bottomRow.bottom:0)}}])&&nA(n.prototype,r),o&&nA(n,o),t}(Xs(pa).mixes(cs,ys,(function(e){return function(e){function t(){return wP(this,t),SP(this,EP(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CP(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{longPressTime:400}}}],(r=[{key:"initInternalEvents",value:function(){for(var e=Object.keys(xP),t=e.length,n={element:this.element,thisObj:this},r=0;r<t;r++)n[e[r]]="handleEvent";_r.on(n)}},{key:"getEventData",value:function(e){var t=xn.up(e.target,".b-grid-cell");if(t){var n=tg.get(t),r=n.id,o=n.columnId,i=this.store.getById(r);return i?{cellElement:t,cellData:n,columnId:o,id:r,record:i,cellSelector:{id:r,columnId:o}}:null}}},{key:"handleEvent",value:function(e){this.disabled||(this.event=e,xP[e.type]&&this[xP[e.type]](e))}},{key:"onElementTouchStart",value:function(e){var t=this;xn.isTouchEvent=!0,1===e.touches.length&&(t.longPressTimeout=setTimeout((function(){t.onElementLongPress(e),e.preventDefault(),t.longPressPerformed=!0}),t.longPressTime))}},{key:"onElementTouchMove",value:function(e){this.longPressTimeout&&(clearTimeout(this.longPressTimeout),this.longPressTimeout=null)}},{key:"onElementTouchEnd",value:function(e){var t=this;t.longPressPerformed&&(e.cancelable&&e.preventDefault(),t.longPressPerformed=!1),t.longPressTimeout&&(clearTimeout(t.longPressTimeout),t.longPressTimeout=null)}},{key:"onElementLongPress",value:function(e){}},{key:"triggerCellMouseEvent",value:function(e,t){var n=this.getEventData(t);if(n){var r=this.columns.getById(n.columnId);this.trigger("cell"+A.capitalizeFirstLetter(e),{grid:this,record:n.record,column:r,cellSelector:n.cellSelector,cellElement:n.cellElement,target:t.target,event:t})}}},{key:"onElementMouseDown",value:function(e){var t=this.getEventData(e);this.skipFocusSelection=!0,this.triggerCellMouseEvent("mousedown",e),t&&!e.defaultPrevented&&this.onFocusGesture(t,e)}},{key:"onElementMouseMove",value:function(e){this.mouseMoveEvent=e}},{key:"onElementMouseUp",value:function(e){}},{key:"onHandleElementClick",value:function(e){!1!==this.trigger("beforeElementClick",{event:e})&&this.onElementClick(e)}},{key:"onElementClick",value:function(e){var t=this.getEventData(e);t&&(this.triggerCellMouseEvent("click",e),tg.get(t.cellElement).row.removeCls("b-hover"))}},{key:"onFocusGesture",value:function(e,t){e&&this.focusCell(e.cellSelector,{scroll:!1,doSelect:!0,event:t})}},{key:"onElementDblClick",value:function(e){var t=e.target;if(this.triggerCellMouseEvent("dblClick",e),t.classList.contains("b-grid-header-resize-handle")){var n=xn.up(t,".b-grid-header");this.columns.getById(n.dataset.columnId).resizeToFitContent()}}},{key:"onElementMouseOver",value:function(e){if(!this.scrolling){var t=xn.up(e.target,".b-grid-cell");if(t){var n=tg.get(t).row;!n||"number"==typeof e.buttons&&0!==e.buttons||(this.hoveredRow=n),this.triggerCellMouseEvent("mouseOver",e)}this.trigger("mouseOver",{event:e})}}},{key:"onElementMouseOut",value:function(e){this.hoveredRow=null,this.scrolling||(xn.up(e.target,".b-grid-cell")&&this.triggerCellMouseEvent("mouseOut",e),this.trigger("mouseOut",{event:e}))}},{key:"onElementKeyDown",value:function(e){var t=this;if(!e.handled)if(e.target.matches(".b-grid-header.b-depth-0"))t.handleHeaderKeyDown(e);else if(e.target===this.element||we.isIE11&&e.currentTarget===this.element)t.handleViewKeyDown(e);else if("Escape"===e.key&&t.isActionableLocation){var n=Mt.clone(t.focusedCell);n.element=null,t.focusCell(n),xn.focusWithoutScrolling(t.element)}}},{key:"handleViewKeyDown",value:function(e){switch(e.key){case"ArrowLeft":return e.preventDefault(),this.navigateLeft(e);case"ArrowRight":return e.preventDefault(),this.navigateRight(e);case"ArrowUp":return e.preventDefault(),this.navigateUp(e);case"ArrowDown":return e.preventDefault(),this.navigateDown(e)}}},{key:"handleHeaderKeyDown",value:function(e){var t=this,n=t.columns.getById(e.target.dataset.columnId);switch(n.onKeyDown&&n.onKeyDown(e),e.key){case"ArrowLeft":var r=t.columns.getAdjacentVisibleLeafColumn(n,!1);r&&t.getHeaderElement(r.id).focus();break;case"ArrowRight":var o=t.columns.getAdjacentVisibleLeafColumn(n,!0);o&&t.getHeaderElement(o.id).focus();break;case"Enter":t.getHeaderElement(n.id).click()}}},{key:"onElementKeyPress",value:function(e){}},{key:"onElementKeyUp",value:function(e){}},{key:"onElementContextMenu",value:function(e){var t=this.getEventData(e);t&&(this.triggerCellMouseEvent("contextMenu",e),xn.isTouchEvent&&this.onFocusGesture(t,e))}},{key:"onInternalResize",value:function(e,n,r,o,i){var a=this;a._devicePixelRatio&&a._devicePixelRatio!==window.devicePixelRatio&&xn.resetScrollBarWidth(),a._devicePixelRatio=window.devicePixelRatio,a._bodyRectangle=tr.client(a.bodyContainer),OP(EP(t.prototype),"onInternalResize",this).apply(this,arguments),r!==i&&(a._bodyHeight=a.bodyContainer.offsetHeight,a.isPainted&&a.rowManager.initWithHeight(a._bodyHeight)),a.refreshVirtualScrollbars(),n!==o&&a.setTimeout((function(){a.isDestroyed||a.updateResponsive(n,o)}),0)}},{key:"hoveredRow",set:function(e){var t=this;t._hoveredRow&&!t._hoveredRow.isDestroyed&&(t._hoveredRow.removeCls("b-hover"),t._hoveredRow=null),e&&!t.scrolling&&(t._hoveredRow=e,e.addCls("b-hover"))}},{key:"widgetClass",get:function(){}}])&&kP(n.prototype,r),o&&kP(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return PP(this,t),AP(this,MP(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IP(e,t)}(t,e),n=t,(r=[{key:"createFeatureInitializer",value:function(e,t,n,r){var o=[this],i=n.prototype.construct;return FP[RP(r)]&&(o[1]=r),{configurable:!0,get:function(){return delete e[t],n.prototype.construct=function(){e[t]=this;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];i.apply(this,o),n.prototype.construct=i},DP(n,o)}}}},{key:"hasFeature",value:function(e){return!(!this.features||!this.features[e])}},{key:"features",set:function(e){var t,n,r,o=nC.getInstanceDefaultFeatures(this);e=this._features=Mt.assign({},e),o&&Object.entries(o).forEach((function(t){var n=_P(t,2),r=n[0];n[1],r in e||(e[r]=!0)}));for(var i=nC.getInstanceFeatures(this),a=0,u=Object.keys(e);a<u.length;a++)if(t=u[a],n=e[t]){if(A.lowercaseFirstLetter(t)!==t)throw new Error(this.L("invalidFeatureNameFormat",t));if(!(r=i[t]))throw new Error(this.L("featureNotFound",t));Reflect.defineProperty(e,t,this.createFeatureInitializer(e,t,r,n))}},get:function(){return this._features}},{key:"widgetClass",get:function(){}}])&&TP(n.prototype,r),o&&TP(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return NP(this,t),BP(this,VP(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WP(e,t)}(t,e),n=t,(r=[{key:"onGridElementFocus",value:function(e){var t=this,n={doSelect:!1,event:e};if(t._focusedCell)t.focusCell(t._focusedCell,n);else{var r=t.element.contains(e.relatedTarget)?null:t.lastFocusedCell;if(r){var o=t.getCell(r);if(!o||!xn.isVisible(o)||!t.store.getById(r.id))return void t.revertFocus();t.returningFocus=!0,t.focusCell(r,n),t.returningFocus=!1}else if(!t.scrolling&&!t.skipFocusSelection&&t.store.first){var i=t.mouseMoveEvent,a=t.rowManager,u=t._bodyRectangle,c=i?Math.min(Math.max(i.clientY,u.y),u.bottom):u.center.y,s=a.getRowAt(c)||a.rows[Math.floor(a.rowCount/2)],l=i&&t.getEventData(i)||{id:s.id,columnId:t.columns.visibleColumns[0].id};t.getCell(l)&&t.focusCell(l,n)}}t.skipFocusSelection=!1}},{key:"onFocusOut",value:function(e){zP(VP(t.prototype),"onFocusOut",this).call(this,e),this.clearFocus()}},{key:"isFocused",value:function(e){return Boolean(this._focusedCell)&&this.isLocationEqual(e,this._focusedCell)}},{key:"focusCell",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$P;e=this.normalizeCellContext(e===Object?Object.assign({},e):e);var n=this,r=!1!==t.doSelect,o=t,i=o.event,a=o.scroll,u=n.lastFocusedCell=n._focusedCell,c=n.isLocationEqual(e,u),s=u&&n.getCell(u),l=n.getSubGridFromColumn(e.columnId),f=n.getCell(e);if(i&&"mousedown"===i.type)for(var d=i.target;d!==f;d=d.parentElement)if(xn.isFocusable(d))return void(e.element=d);if(c)return i&&n.onCellNavigate&&n.onCellNavigate(n,null,n._focusedCell,i,r),e;s&&s.classList.remove("b-focused");var p=f||n.getCell({row:n.rowManager.topIndex,columnId:e.columnId}),h=tr.from(l.element),y=tr.from(n.bodyContainer),g=tr.from(p).moveTo(null,h.y);return!1===a?t=Object.assign({},t,YP):(t=Object.assign({},t,a),g.width>h.width||g.height>y.height?t.x=t.y=!1:t.column=e.columnId,n.scrollRowIntoView(e.id,t)),(f=n.getCell(e))&&(e.element=f,f.classList.add("b-focused")),n._focusedCell=e,n.onCellNavigate&&n.onCellNavigate(n,u,n._focusedCell,i,r),n.trigger("navigate",{lastFocusedCell:u,focusedCell:n._focusedCell,event:i}),e}},{key:"isLocationEqual",value:function(e,t){return e&&t&&e.id===t.id&&e.columnId===t.columnId&&(!e.element||!t.element||e.element===t.element)}},{key:"blurCell",value:function(e){var t=this.getCell(e);t&&t.classList.remove("b-focused")}},{key:"clearFocus",value:function(){var e=this;e._focusedCell&&(e.lastFocusedCell=e._focusedCell,e.blurCell(e._focusedCell),e._focusedCell=null)}},{key:"internalNextPrevCell",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,r=n._focusedCell;return r?n.focusCell({id:r.id,columnId:n.columns.getAdjacentVisibleLeafColumn(r.columnId,e,!0).id},{doSelect:!0,event:t}):null}},{key:"navigateRight",value:function(e){return this.internalNextPrevCell(!0,e)}},{key:"navigateLeft",value:function(e){return this.internalNextPrevCell(!1,e)}},{key:"internalNextPrevRow",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this,o=r._focusedCell;if(!o)return!1;var i=r.store["get".concat(e?"Next":"Prev")](o.id,!1,t);return!!i&&r.focusCell({id:i.id,columnId:o.columnId,scroll:{x:!1}},{doSelect:!0,event:n})}},{key:"navigateDown",value:function(e){return this.internalNextPrevRow(!0,!1,e)}},{key:"navigateUp",value:function(e){return this.internalNextPrevRow(!1,!1,e)}},{key:"focusedCell",get:function(){var e=this._focusedCell;if(e&&this.getCell(e))return e;this.clearFocus()},set:function(e){this.focusCell(e,{doSelect:!1})}},{key:"isActionableLocation",get:function(){var e=this._focusedCell;return Boolean(e&&e.element&&this.getCell(e).contains(e.element))}},{key:"focusedRecord",get:function(){if(this._focusedCell)return this.store.getById(this._focusedCell.id)}},{key:"cellCSSSelector",get:function(){var e=this._focusedCell,t=e&&this.getRowById(e.id);return e&&t?"[data-index=".concat(t.index,"] [data-column-id=").concat(e.columnId,"]"):""}},{key:"widgetClass",get:function(){}}])&&HP(n.prototype,r),o&&HP(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return UP(this,t),XP(this,KP(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZP(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{responsiveLevels:Object.freeze({small:400,medium:600,large:"*"})}}}],(r=[{key:"getClosestBiggerLevel",value:function(e){var t=this,n=Object.keys(t.responsiveLevels),r=null,o=99995,i=null;return n.forEach((function(n){var a=t.responsiveLevels[n];if(["number","string"].includes(GP(a))||(a=a.levelWidth),"*"===a)i=n;else if(e<a){var u=a-e;u<o&&(o=u,r=n)}})),r||i}},{key:"updateResponsive",value:function(e,t){var n=this,r=n.getClosestBiggerLevel(t),o=n.getClosestBiggerLevel(e);if(r!==o){var i=n.responsiveLevels[o];["number","string"].includes(GP(i))||n.applyState(i),n.columns.forEach((function(e){var t=e.responsiveLevels;t&&(t[o]?e.applyState(t[o]):t["*"]&&e.applyState(t["*"]))})),n.element.classList.remove("b-responsive-"+r),n.element.classList.add("b-responsive-"+o),n.trigger("responsive",{level:o,width:e,oldLevel:r,oldWidth:t})}}},{key:"responsiveLevel",get:function(){return this.getClosestBiggerLevel(this.width)}},{key:"widgetClass",get:function(){}}])&&qP(n.prototype,r),o&&qP(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return QP(this,t),tT(this,rT(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oT(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{selectionMode:{row:!0,cell:!0,rowCheckboxSelection:!1,multiSelect:!0,checkbox:!1,showCheckAll:!1},selectedRecordCollection:{}}}}],(r=[{key:"afterConfigure",value:function(){var e=this;if(e.selectionMode.checkbox){var n=rO.getColumnClass("check");if(!n)throw new Error("CheckColumn must be imported for checkbox selection mode to work");var r=e.checkboxColumn=new n({id:"".concat(e.id,"-selection-column"),width:"4em",minWidth:"4em",field:null,cellCls:"b-checkbox-selection",region:Object.keys(e.subGridConfigs).sort()[0],showCheckAll:e.selectionMode.showCheckAll},e.columns);r.meta.depth=0,r._grid=e;var o=r.renderer;r.renderer=function(t){t.value=e.isSelected(t.record),o.call(r,t)},r.on({toggle:"onCheckChange",toggleAll:"onCheckAllChange",thisObj:e});var i=e.columns.indexOf(e.columns.findRecord("type","rownumber"))+1;e.columns.insert(i,r)}nT(rT(t.prototype),"afterConfigure",this).call(this),e.store.on("idChange",e.onRecordIdChange,e)}},{key:"onRecordIdChange",value:function(e){var t=e.record,n=e.oldValue,r=(e.value,this.selectedRecordCollection);r.get(n)===t&&r.rebuildIndices()}},{key:"onSelectedRecordCollectionChange",value:function(e){e.source,e.action;var t=e.added,n=void 0===t?[]:t,r=e.removed,o=this;o._selectedCell&&!o.isSelectable(o._selectedCell)&&o.deselectCell(o._selectedCell),n=n.filter((function(e){return o.isSelectable(e)})),o.triggerChangeEvent({mode:"row",action:n.length?"select":"deselect",selection:o.selectedRecords,selected:n,deselected:r},o.silent)}},{key:"onCheckChange",value:function(e){var t=e.source,n=e.checked,r=e.record;n?(this.selectRow({record:r,column:t,addToSelection:!1!==this.selectionMode.multiSelect,scrollIntoView:!1}),t.headerCheckbox&&this.selectedRecords.length===this.store.count-(this.store.groupRecords?this.store.groupRecords.length:0)&&(t.suspendEvents(),t.headerCheckbox.checked=!0,t.resumeEvents())):(this.deselectRow(r),t.headerCheckbox&&(t.suspendEvents(),t.headerCheckbox.checked=!1,t.resumeEvents()))}},{key:"onCheckAllChange",value:function(e){this[e.checked?"selectAll":"deselectAll"]()}},{key:"onElementKeyDown",value:function(e){var n=this.focusedCell,r=this.checkboxColumn;if(nT(rT(t.prototype),"onElementKeyDown",this).call(this,e),n&&" "===e.key&&r&&this.columns.getById(n.columnId)===r){var o=this.getCell(n).widget;o&&o.toggle()}}},{key:"spliceSelectedRecords",value:function(e,t,n){this._selectedRecordCollection.splice(e,t,n)}},{key:"isSelected",value:function(e){return e instanceof qs&&(e=e.id),iT[JP(e)]?this.selectedRecordCollection.includes(e):this._selectedCell&&this._selectedCell.id==e.id&&this._selectedCell.columnId===e.columnId}},{key:"isSelectable",value:function(e){if(!e)return!1;var t=this.store.getById(e.id||e);return t&&!(t.meta&&t.meta.specialRow)}},{key:"selectRow",value:function(e){var t=e.record,n=e.column,r=void 0===n?this.columns.bottomColumns[0]:n,o=e.scrollIntoView,i=void 0===o||o,a=e.addToSelection,u=void 0!==a&&a;if("object"!==JP(arguments[0])){var c=arguments;t=c[0],i=!(c.length>1)||c[1],u=c[2]||!1}var s=this,l=s.store.getById(t);t?s.selectCell({id:l.id,column:r},i,u):s.deselectAll()}},{key:"selectCell",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this,i=o.selectedRecordCollection,a=o.selectionMode,u=o.normalizeCellContext(e),c=u.record||o.store.getById(u.id);if(o.isSelectable(c)){if(t&&o.scrollRowIntoView(u.id,{column:u.columnId}),a.row&&(r&&(o.silent=(o.silent||0)+1),n?i.add(c):i.splice(0,i.count,c),r&&o.silent--,1===o.selectedRecordCollection.count&&(o.startCell=u,o.lastRange=null)),a.cell&&(u.columnId||u.column)&&!o.isSelected(u)){var s=o._selectedCell?[o._selectedCell]:[];o._selectedCell=u,o.triggerChangeEvent({mode:"cell",action:"select",selected:[u],deselected:s,selection:[u]},r)}return u}this.deselectAll()}},{key:"selectAll",value:function(){this.selectedRecords=this.store.getRange().filter((function(e){return!e.meta.specialRow}))}},{key:"deselectAll",value:function(){this.selectedRecordCollection.clear(),this._selectedCell&&this.deselectCell(this._selectedCell)}},{key:"deselectRow",value:function(e){var t=e instanceof qs?e:this.store.getById(e);t&&this.selectedRecordCollection.remove(t)}},{key:"deselectCell",value:function(e){var t=this,n=t.normalizeCellContext(e),r=t.selectionMode,o=n.record||t.store.getById(n.id),i=t._selectedCell;return r.row&&t.selectedRecordCollection.remove(o),r.cell&&n.columnId&&i&&i.id===n.id&&i.columnId===n.columnId&&(t._selectedCell=null,t.triggerChangeEvent({mode:"cell",action:"deselect",selected:[],deselected:[n],selection:[]})),n}},{key:"selectRange",value:function(e,t){var n=this.store,r=this.selectedRecordCollection,o=n.indexOf(e),i=n.indexOf(t),a=Math.min(o,i),u=Math.max(o,i);if(-1===a||-1===u)throw new Error("Record not found in selectRange");r.splice(0,r.count,n.getRange(a,u+1,!1))}},{key:"onStoreRemove",value:function(e){nT(rT(t.prototype),"onStoreRemove",this)&&nT(rT(t.prototype),"onStoreRemove",this).call(this,e),this.selectedRecordCollection.remove(e.records)}},{key:"onStoreDataChange",value:function(e){var n=e.action,r=e.source;if(nT(rT(t.prototype),"onStoreDataChange",this)&&nT(rT(t.prototype),"onStoreDataChange",this).apply(this,arguments),aT[n]){var o=this.selectedRecordCollection,i=[];o.forEach((function(e){r.includes(e)||i.push(e)})),o.remove(i)}}},{key:"onStoreRemoveAll",value:function(){nT(rT(t.prototype),"onStoreRemoveAll",this)&&nT(rT(t.prototype),"onStoreRemoveAll",this).call(this),this.deselectAll()}},{key:"handleMouseMultiSelect",value:function(e,t){var n=this,r=e.id;(t.metaKey||t.ctrlKey)&&n.isSelected(r)?n.deselectRow(r):n.selectionMode.multiSelect&&(t.shiftKey&&n.startCell?function(e,t){var r=n.store,o=n.selectedRecordCollection,i=r.indexOf(e),a=r.indexOf(t),u=Math.min(i,a),c=Math.max(i,a);if(-1===u||-1===c)throw new Error("Record not found in selectRange");var s=r.getRange(u,c+1,!1).filter((function(e){return n.isSelectable(e)}));o.splice(0,n.lastRange||0,s),n.lastRange=s}(n.startCell.id,r):(t.ctrlKey||t.metaKey)&&n.selectRow({record:r,scrollIntoView:!1,addToSelection:!0}))}},{key:"onCellNavigate",value:function(e,t,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(e.columns.getById(n.columnId)!==e.checkboxColumn&&!e.selectionMode.rowCheckboxSelection&&!(!o||e.returningFocus||r&&r.target.classList.contains("b-tree-expander"))){var i=t&&n.id===t.id,a=r&&"mousedown"===r.type,u=a&&r.ctrlKey;!r||r.button&&2!==r.button||!r.shiftKey&&!u?e.selectCell(n,!1,i&&(!r||r.shiftKey||r.ctrlKey)||r&&(u||2===r.button&&e.isSelected(n.id))):e.handleMouseMultiSelect(n,r),e.startCell&&!u||(e.startCell=n,e.lastRange=null)}}},{key:"triggerChangeEvent",value:function(e,t){var n,r,o,i,a=this,u=e.mode,c=e.selected,s=e.deselected;if("row"===u){for(n=0,r=c.length;n<r;n++)(o=a.getRowFor(c[n]))&&(o.addCls("b-selected"),!a.checkboxColumn||a.checkboxColumn.hidden||c[n].meta.specialRow||(o.getCell(a.checkboxColumn.id).widget.checked=!0));for(n=0,r=s.length;n<r;n++)(o=a.getRowFor(s[n]))&&(o.removeCls("b-selected"),!a.checkboxColumn||a.checkboxColumn.hidden||s[n].meta.specialRow||(o.getCell(a.checkboxColumn.id).widget.checked=!1))}else if("cell"===u){for(n=0,r=c.length;n<r;n++)(i=a.getCell(c[n]))&&i.classList.add("b-selected");for(n=0,r=s.length;n<r;n++)(i=a.getCell(s[n]))&&i.classList.remove("b-selected")}t||a.trigger("selectionChange",e)}},{key:"selectedRecordCollection",set:function(e){e instanceof Eo||(e=new Eo(e)),this._selectedRecordCollection=e,e.on({change:"onSelectedRecordCollectionChange",thisObj:this})},get:function(){return this._selectedRecordCollection}},{key:"selectedCell",get:function(){return this._selectedCell},set:function(e){this.selectCell(e)}},{key:"selectionMode",set:function(e){e&&e.rowCheckboxSelection&&(e.row=e.checkbox=!0,e.cell=!1),this._selectionMode=e},get:function(){return this._selectionMode}},{key:"selectedRecord",get:function(){return this.selectedRecordCollection.last||null},set:function(e){this.selectRow({record:e})}},{key:"selectedRecords",get:function(){return this.selectedRecordCollection.values},set:function(e){var t=this.selectedRecordCollection,n=this.store,r=[];if(e){var o=!0,i=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;(s=n.getById(s))&&r.push(s)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}t.splice(0,t.count,r)}},{key:"selectedCellCSSSelector",get:function(){var e=this._selectedCell,t=e&&this.getRowById(e.id);return e&&t?"[data-index=".concat(t.dataIndex,"] [data-column-id=").concat(e.columnId,"]"):""}},{key:"widgetClass",get:function(){}}])&&eT(n.prototype,r),o&&eT(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return cT(this,t),lT(this,fT(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dT(e,t)}(t,e),n=t,(r=[{key:"getState",value:function(){var e=this,t=e.element.style.cssText,n={rowHeight:e.rowHeight,readOnly:e.readOnly};if(t&&(n.style=t),e.selectedCell){var r=e.selectedCell,o=r.id,i=r.columnId;n.selectedCell={id:o,columnId:i}}return n.selectedRecords=e.selectedRecords.map((function(e){return e.id})),n.columns=e.columns.map((function(e){return e.getState()})),n.store=e.store.state,n.scroll=e.storeScroll(),n.width={},n.collapsed={},e.eachSubGrid((function(e){null==e.flex&&(n.width[e.region]=e.width),n.collapsed[e.region]=e.collapsed})),n}},{key:"applyState",value:function(e){var t=this;if("readOnly"in e&&(t.readOnly=e.readOnly),"rowHeight"in e&&(t.rowHeight=e.rowHeight),"style"in e&&(t.style=e.style),"selectedCell"in e&&(t.selectedCell=e.selectedCell),"store"in e&&(t.store.state=e.store),"selectedRecords"in e&&(t.selectedRecords=e.selectedRecords),"columns"in e){var n=!1,r=!1;t.columns.suspendEvents(),t.eachSubGrid(pT),e.columns.forEach((function(e,o){var i=t.columns.getById(e.id);if(i){var a=i.generation;i.applyState(e),n=n||i.generation!==a,i.stateSortIndex=o,i.allIndex!==o&&(r=n=!0)}})),n&&t.eachSubGrid(yT),r&&(t.eachSubGrid((function(e){e.columns.records.sort(gT),e.columns.allRecords.sort(gT)})),t.columns.sort({fn:gT},!0)),t.isPainted&&n&&t.renderContents(),t.columns.resumeEvents(),t.eachSubGrid(hT)}"width"in e&&t.eachSubGrid((function(t){t.region in e.width&&(t.width=e.width[t.region])})),"collapsed"in e&&t.eachSubGrid((function(t){t.collapsed=e.collapsed[t.region]})),"scroll"in e&&t.restoreScroll(e.scroll)}},{key:"widgetClass",get:function(){}}])&&sT(n.prototype,r),o&&sT(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return $T(this,t),GT(this,UT(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qT(e,t)}(t,e),n=t,(r=[{key:"initSubGrids",value:function(){var e,t,n,r=this,o=r._regions,i=new Set,a=!0,u=!0,c=!1,s=void 0;try{for(var l,f=r.columns.records[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var d=l.value;d.region&&!r.subGridConfigs[d.region]&&(r.subGridConfigs[d.region]={}),i.add(d.region)}}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}o&&o.forEach((function(e){return r.subGrids[e].destroy()})),r.subGrids={},r._regions=Array.from(i),r._regions.sort(),r.subGridConfigs.normal&&0===Object.keys(r.subGridConfigs.normal).length&&(r.subGridConfigs.normal=fA.defaultConfig.subGridConfigs.normal);var p=!0,h=!1,y=void 0;try{for(var g,v=function(){var o=g.value;n=r.columns.makeChained((function(e){return e.region===o}),["region"]),t=Mt.assign({parent:r,grid:r,store:r.store,rowManager:r.rowManager,region:o,headerClass:r.subGridConfigs[o].headerClass||r.headerClass,columns:n,hideHeaders:r.hideHeaders},r.subGridConfigs[o]),e=!1,t.flex||t.width||(t.width=n.totalFixedWidth,e=!0),r.subGrids[o]=new VT(t),r.subGrids[o].hasCalculatedWidth=e,a&&(r.subGrids[o].isFirstRegion=!0,a=!1)},m=r._regions[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)v()}catch(e){h=!0,y=e}finally{try{p||null==m.return||m.return()}finally{if(h)throw y}}}},{key:"eachSubGrid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;n.regions.forEach((function(r,o){var i=n.subGrids[r];e.call(t||i,i,o++)}))}},{key:"eachWidget",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;n.regions.forEach((function(r){var o=n.subGrids[r];!1!==e(o)&&t&&o.eachWidget&&o.eachWidget(e,t)}))}},{key:"callEachSubGrid",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this,i=null;return o.regions.forEach((function(t,r){var a=o.subGrids[t];if(a[e]){var u=a[e].apply(a,n);0===r&&(i=u)}})),i}},{key:"getLastRegions",value:function(){var e=this.regions.slice(-2);return 2===e.length?e:[e[0],e[0]]}},{key:"getNextRegion",value:function(e){var t=this.regions;return t[t.indexOf(e)+1]||t[t.length-2]}},{key:"getPreviousRegion",value:function(e){return this.regions[this.regions.indexOf(e)-1]}},{key:"getSubGrid",value:function(e){return this.subGrids[e]}},{key:"getSubGridFromColumn",value:function(e){return e=e instanceof XS?e:this.columns.get(e)||this.columns.getById(e),this.getSubGrid(e.region)}},{key:"resolveSplitter",value:function(e){var t=this.getLastRegions(),n=e instanceof VT?e.region:e;return t[1]===n&&(n=t[0]),this.subGrids[n].splitterElement}},{key:"items",get:function(){var e=this;return this.regions.map((function(t){return e.subGrids[t]}))}},{key:"regions",get:function(){return this._regions||this.initSubGrids(),this._regions}},{key:"widgetClass",get:function(){}}])&&YT(n.prototype,r),o&&YT(n,o),t}(e||Y)})));function dA(e){return(dA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pA(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function hA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){pA(i,r,o,a,u,"next",e)}function u(e){pA(i,r,o,a,u,"throw",e)}a(void 0)}))}}function yA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vA(e,t){return!t||"object"!==dA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mA(e,t,n,r){return(mA="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=wA(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function bA(e,t,n){return(bA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=wA(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wA(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kA(e)););return e}function kA(e){return(kA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SA(e,t){return(SA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}fA.localeClass="Grid",fA._$name="GridBase",se.register("gridbase",fA);var OA={Enter:1,F2:1},EA={ArrowUp:1,ArrowDown:1,ArrowLeft:1,ArrowRight:1},CA=function(e){function t(){return yA(this,t),vA(this,kA(t).apply(this,arguments))}var n,r,o,i,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SA(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e,n){var r=this;r.grid=e,bA(kA(t.prototype),"construct",this).call(this,e,n),r.storeListenerDetacher=e.store.on({update:"onStoreUpdate",thisObj:r}),r.listenerDetacher=e.on({cellclick:"onCellClick",celldblclick:"onCellDblClick",beforerenderrows:"onGridBeforeRenderRows",thisObj:r})}},{key:"confirm",value:(u=hA(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!0,!this.editorContext){e.next=7;break}return wS.owner=this.editorContext.editor.inputField,e.next=5,wS.confirm(t);case 5:n=e.sent,wS.owner=null;case 7:return e.abrupt("return",n===wS.yesButton);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"doDestroy",value:function(){this.cancelEditing(!0),this.listenerDetacher(),this.storeListenerDetacher(),this.grid.columns.allRecords.forEach((function(e){e._cellEditor&&e._cellEditor.destroy()})),bA(kA(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){e&&this.cancelEditing(!0),bA(kA(t.prototype),"doDisable",this).call(this,e)}},{key:"getEditorForCell",value:function(e){var t=e.column,n=e.selector,r=e.editor,o=this,i=o.grid,a=t._cellEditor;return r.autoSelect=o.autoSelect,a?a.inputField!==r&&(a.remove(a.items[0]),a.add(r)):a=t._cellEditor=new o.editorClass({cls:"b-cell-editor",inputField:r,blurAction:"none",invalidAction:t.invalidAction,completeKey:!1,cancelKey:!1,owner:i,listeners:o.getEditorListeners()}),t.instantUpdate&&!r.cellEditValueSetter&&(Mt.wrapProperty(r,"value",null,(function(e){var t=o.editorContext;t&&!Mt.isEqual(t.record[t.column.field],e)&&(t.record[t.column.field]=e)})),r.cellEditValueSetter=!0),Object.assign(a.element.dataset,{rowId:n.id,columnId:n.columnId,field:t.field}),a.inputField.revertOnEscape=t.revertOnEscape,o.editor=a}},{key:"getEditorListeners",value:function(){return{focusout:"onEditorFocusOut",focusin:"onEditorFocusIn",start:"onEditorStart",beforecomplete:"onEditorBeforeComplete",complete:"onEditorComplete",cancel:"onEditorCancel",thisObj:this}}},{key:"onEditorStart",value:function(e){var t=e.source,n=this,r=n.editorContext=t.cellEditorContext;if(r){var o=n.grid,i=r.cell,a=r.editor,u=r.column;if(u.editTargetSelector){var c=i.querySelector(u.editTargetSelector);c&&(a.width-=c.offsetLeft,xn.addTranslateX(a.element,c.offsetLeft))}i.classList.add("b-editing"),n.grid.on({cellclick:"onCellClickWhileEditing",viewportResize:"onViewportResizeWhileEditing"},n),n.removeEditingListeners=di.addListener({globaltap:"onTapOut",thisObj:n}),o.trigger("startCellEdit",{grid:o,editorContext:r})}}},{key:"onEditorBeforeComplete",value:function(e){var t=this.grid,n=e.source.cellEditorContext;return e.grid=t,e.editorContext=n,t.trigger("beforeFinishCellEdit",e)}},{key:"onEditorComplete",value:function(e){var t=e.source,n=this.grid,r=t.cellEditorContext;r.value=t.inputField.value,n.trigger("finishCellEdit",{grid:n,editorContext:r}),this.cleanupAfterEdit(r)}},{key:"onEditorCancel",value:function(){var e=this.editorContext,t=this.muteEvents,n=this.grid;e&&this.cleanupAfterEdit(e),t||n.trigger("cancelCellEdit",{grid:n})}},{key:"cleanupAfterEdit",value:function(e){var t=e.editor;e.cell.classList.remove("b-editing"),t.cellEditorContext=this.editorContext=null,this.grid.un({cellclick:"onCellClickWhileEditing",viewportResize:"onViewportResizeWhileEditing"},this),this.removeEditingListeners(),di.suspendFocusEvents(),t.element.remove(),di.resumeFocusEvents()}},{key:"getAdjacentEditableCell",value:function(e,t){for(var n=this.addNewAtEnd,r=this.grid,o=r.store,i=r.rowManager,a=e.id,u=e.columnId,c=r.columns,s=c.getAdjacentLeaf(u,t);a;){var l=o.getById(a);if(s){if(u=s.id,!s.hidden&&s.editor&&s.canEdit(l))return{id:a,columnId:s.id};s=c.getAdjacentLeaf(u,t)}else{var f=o.getAdjacent(e.id,t,!1,!0);!f&&t&&n&&(f=o.add("object"===dA(n)?Mt.clone(n):{})[0],i.getRowFor(f)||i.displayRecordAtBottom()),a=f&&f.id,f&&(s=t?c.first:c.leaves[c.leaves.length-1])}}return null}},{key:"getEditingContext",value:function(e){e=this.grid.normalizeCellContext(e);var t=this.grid,n=t.columns.getById(e.columnId),r=t.store.getById(e.id),o=t.getCell(e);if(o&&n&&!n.hidden&&n.editor&&r&&!r.meta.specialRow&&n.canEdit(r)){var i=r&&r[n.field];return{column:n,record:r,cell:o,value:void 0===i?null:i,selector:e,editor:n.editor}}return!1}},{key:"startEditing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(!t.editorContext&&!t.disabled){var n=t.grid,r=n.normalizeCellContext(e);n.focusCell(e);var o=t.getEditingContext(r);if(!o||!1===n.trigger("beforeCellEditStart",{grid:n,editorContext:o}))return!1;if(o){xn.focusWithoutScrolling(n.element);var i=o.editor=t.getEditorForCell(o),a=o.cell,u=o.record,c=o.column;return i.inputField.highlightExternalChange=!1,i.cellEditorContext=o,i.render(t.grid.getSubGridFromColumn(c).element),i.startEdit({target:a,record:u,field:i.inputField.name||o.column.field}),!0}}return!1}},{key:"cancelEditing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.editorContext,r=t.editor,o=t.grid;n&&(r.containsFocus&&(t.editorContext=null,r.inputField.owns(xn.activeElement)&&xn.focusWithoutScrolling(o.element),t.editorContext=n),t.muteEvents=e,r.cancelEdit(),t.muteEvents=!1)}},{key:"finishEditing",value:(a=hA(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.editorContext,n=!1,!t){e.next=7;break}return r=t.column,e.next=6,t.editor.completeEdit(r.bindCallback(r.finalizeCellEdit));case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onCellClickWhileEditing",value:function(e){var t=e.event,n=e.cellSelector,r=this;r.editorContext.editor.owns(t.target)||(r.getEditingContext(n)?r.finishEditing()?r.startEditing(n):(r.grid.focusCell(r.editorContext.selector),r.editor.inputField.focus()):r.finishEditing())}},{key:"onViewportResizeWhileEditing",value:function(){var e=this.editorContext,t=e.editor,n=e.column;t.width=n.element.offsetWidth}},{key:"onCellClick",value:function(e){var t=e.source,n=e.record,r=e.cellSelector,o=e.cellElement,i=e.target,a=e.event,u=t.focusedCell||{},c=t.columns.getById(r.columnId);if(c.onCellClick)c.onCellClick({grid:t,column:c,record:n,cellSelector:r,cellElement:o,target:i,event:a});else{if(i.matches(".b-tree-expander"))return this.cancelEditing(),!1;xn.isTouchEvent&&r.id==u.id&&r.columnId==u.columnId&&this.startEditing(r)}}},{key:"onCellDblClick",value:function(e){var t=e.cellSelector;this.editorContext&&!this.finishEditing()||this.startEditing(t)}},{key:"onStoreUpdate",value:function(e){var t=e.changes,n=e.record,r=this.editorContext;r&&r.editor.isVisible&&n===r.record&&r.editor.dataField in t&&r.editor.refreshEdit()}},{key:"onGridBeforeRenderRows",value:function(){this.editorContext&&this.editorContext.editor.isVisible&&this.cancelEditing()}},{key:"onElementKeyDown",value:(i=hA(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,!t.handled){e.next=3;break}return e.abrupt("return");case 3:if(n.editorContext){e.next=13;break}if(r=t.key,!(o=n.autoEdit&&(1===r.length||"Backspace"===r))&&!OA[r]||!n.grid.focusedCell){e.next=11;break}if(t.preventDefault(),n.startEditing(n.grid.focusedCell)){e.next=9;break}return e.abrupt("return");case 9:i=n.editor.inputField,a=i.input,o&&a&&(a.value="Backspace"===r?"":r,i.internalOnInput(t),i.moveCaretToEnd());case 11:e.next=39;break;case 13:if("Enter"!==t.key){e.next=25;break}return t.preventDefault(),t.stopPropagation(),e.next=18,n.finishEditing();case 18:if(!e.sent){e.next=25;break}if(n.isEditing){e.next=25;break}if(!(t.ctrlKey||t.metaKey||t.altKey||n.grid.touch)){e.next=24;break}return e.abrupt("return");case 24:t.shiftKey?n.grid.navigateUp()&&n.startEditing(n.grid.focusedCell):n.grid.navigateDown()&&n.startEditing(n.grid.focusedCell);case 25:if("F2"===t.key&&(t.preventDefault(),n.finishEditing()),"Escape"===t.key&&(t.stopPropagation(),t.preventDefault(),n.cancelEditing()),"Tab"!==t.key){e.next=38;break}if(t.preventDefault(),!(u=n.grid.focusedCell)){e.next=38;break}if(!(c=n.getAdjacentEditableCell(u,!t.shiftKey))){e.next=38;break}return e.next=35,n.finishEditing();case 35:if(!e.sent){e.next=38;break}n.grid.focusCell(c,{animate:100}),n.startEditing(c);case 38:EA[t.key]&&(t.handled=!0);case 39:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"onElementMouseDown",value:function(e){2===e.button&&this.editorContext&&e.preventDefault()}},{key:"onEditorFocusOut",value:function(e){var t=this,n=t.grid;t.editorContext&&!t.editor.isFinishing&&t.editor.inputField.owns(e.target)&&(e.toWidget!==n||n.isLocationEqual(t.grid.focusedCell,t.editorContext.selector))&&("cancel"===t.blurAction?t.cancelEditing():t.finishEditing())}},{key:"onEditorFocusIn",value:function(e){var t=e.toWidget;t===this.editor.inputField&&this.autoSelect&&t.selectAll&&!t.readOnly&&!t.disabled&&t.selectAll()}},{key:"onTapOut",value:function(e){var t=e.event,n=this;n.grid.bodyContainer.contains(t.target)||n.editor.owns(t.target)||("cancel"===n.blurAction?n.cancelEditing():n.finishEditing())}},{key:"onElementClick",value:function(e){e.target.classList.contains("b-grid-body-container")&&this.editorContext&&this.finishEditing()}},{key:"disabled",set:function(e){!function(e,t,n,r,o){if(!mA(e,t,n,r||e)&&o)throw new Error("failed to set property")}(kA(t.prototype),"disabled",e,this,!0)},get:function(){var e=this.grid;return Boolean(bA(kA(t.prototype),"disabled",this)||e.disabled||e.readOnly)}},{key:"isEditing",get:function(){return Boolean(this.editorContext)}},{key:"activeRecord",get:function(){return this.editorContext&&this.editorContext.record||null}}],o=[{key:"$name",get:function(){return"CellEdit"}},{key:"defaultConfig",get:function(){return{autoSelect:!0,blurAction:"complete",addNewAtEnd:null,autoEdit:!1,editorClass:uh}}},{key:"pluginConfig",get:function(){return{assign:["startEditing"],before:["onElementKeyDown","onElementMouseDown"],chain:["onElementClick"]}}}],r&&gA(n.prototype,r),o&&gA(n,o),t}(Wr(es));function xA(e){return(xA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DA(e,t){return!t||"object"!==xA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RA(e){return(RA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PA(e,t){return(PA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}CA._$name="CellEdit",nC.registerFeature(CA,!0);var TA=function(e){function t(){return _A(this,t),DA(this,RA(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PA(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Grid"}}],(r=null)&&jA(n.prototype,r),o&&jA(n,o),t}(fA);function AA(e){return(AA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FA(e,t){return!t||"object"!==AA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LA(e,t,n){return(LA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=HA(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function NA(e,t,n,r){return(NA="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=HA(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function HA(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BA(e)););return e}function BA(e){return(BA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zA(e,t){return(zA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}TA._$name="Grid",se.register("grid",TA),F.setVersion("grid","3.1.0");var VA=function(e){function t(){return MA(this,t),FA(this,BA(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zA(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TreeGrid"}}],(r=[{key:"store",set:function(e){if(e&&!e.tree){if(e instanceof ed)throw new Error("TreeGrid requires a Store configured with tree : true");e.tree=!0}!function(e,t,n,r,o){if(!NA(e,t,n,r||e)&&o)throw new Error("failed to set property")}(BA(t.prototype),"store",e,this,!0)},get:function(){return LA(BA(t.prototype),"store",this)}}])&&IA(n.prototype,r),o&&IA(n,o),t}(TA);function WA(e){return(WA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GA(e,t){return!t||"object"!==WA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UA(e){return(UA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qA(e,t){return(qA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}VA._$name="TreeGrid",se.register("treegrid",VA);var XA=function(e){return function(e){function t(){return $A(this,t),GA(this,UA(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qA(e,t)}(t,e),n=t,o=[{key:"defaultMethod",get:function(){return{load:"GET",sync:"POST"}}}],(r=[{key:"cancelRequest",value:function(e){e.abort()}},{key:"sendRequest",value:function(e){var n=this,r=e.data,o=n.transport[e.type]||{},i=o.paramName,a=Object.assign({},o.params),u=o.method||t.defaultMethod[e.type],c=Object.assign({url:o.url,method:u,params:a},o.requestConfig);i?(c.params=c.params||{},c.params[i]=r):c.jsonData=r,n.trigger("beforeSend",{params:a,type:e.type,requestConfig:c,config:e});var s=Object.assign({method:u,headers:c.headers,queryParams:a,body:"HEAD"===u||"GET"===u?void 0:c.jsonData},c.fetchOptions),l=Ee.fetch(c.url,s);return l.catch((function(e){s.signal||s.signal.aborted||console.warn(e)})).then((function(t){t&&t.ok?e.success&&e.success.call(e.thisObj||n,t,s):e.failure&&e.failure.call(e.thisObj||n,t,s)})),l}}])&&YA(n.prototype,r),o&&YA(n,o),t}(e||Y)};function KA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZA(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function JA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ZA(i,r,o,a,u,"next",e)}function u(e){ZA(i,r,o,a,u,"throw",e)}a(void 0)}))}}function QA(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function eM(e){return(eM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rM(e,t){return!t||"object"!==eM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oM(e,t,n){return(oM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iM(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function iM(e){return(iM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aM(e,t){return(aM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uM=function(e,t,n){return e.store&&(e=e.store),t.store&&(t=t.store),(e=e[n]||0)<(t=t[n]||0)?-1:e>t?1:0},cM=function(e,t){return uM(e,t,"loadPriority")},sM=function(e,t){return uM(e,t,"syncPriority")},lM=function(){},fM=function(e){return function(e){function t(){return tM(this,t),rM(this,iM(t).apply(this,arguments))}var n,r,o,i,a,u,c,s,l,f,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aM(e,t)}(t,e),n=t,r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._requestId=0,this.activeRequests={},this.crudStoresIndex={},oM(iM(t.prototype),"construct",this).call(this,e)}},{key:"afterConstruct",value:function(){oM(iM(t.prototype),"afterConstruct",this).call(this),this.autoLoad&&this.load().catch((function(e){}))}},{key:"getStoreDescriptor",value:function(e){return e?e instanceof ed?this.crudStores.find((function(t){return t.store===e})):"object"===eM(e)?this.crudStoresIndex[e.storeId]:this.crudStoresIndex[e]||this.getStoreDescriptor(ed.getStore(e)):null}},{key:"fillStoreDescriptor",value:function(e){var t=e.store,n=t.storeIdProperty,r=void 0===n?this.storeIdProperty:n,o=t.modelClass;return e.storeId||(e.storeId=t[r]),e.idField||(e.idField=o.idField),e.phantomIdField||(e.phantomIdField=o.phantomIdField),"writeAllFields"in e||(e.writeAllFields=t.writeAllFields),e}},{key:"updateCrudStoreIndex",value:function(){var e=this.crudStoresIndex={};this.crudStores.forEach((function(t){return t.storeId&&(e[t.storeId]=t)}))}},{key:"getCrudStore",value:function(e){var t=this.getStoreDescriptor(e);return t&&t.store}},{key:"forEachCrudStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;e&&this.crudStores.every((function(n){return!1!==e.call(t,n.store,n.storeId,n)}))}},{key:"internalAddCrudStore",value:function(e){var t,n=this;return e instanceof ed?t={store:e}:"object"===eM(e)?(e.stores&&(Array.isArray(e.stores)||(e.stores=[e.stores]),e.stores.forEach((function(t,n){var r=t;"string"==typeof t&&(r={storeId:t}),r.masterStoreInfo=e,e.stores[n]=r}))),t=e):t={store:ed.getStore(e)},n.fillStoreDescriptor(t),(e=t.store).setCrudManager?e.setCrudManager(n):e.crudManager=n,e.pageSize=null,n.overrideCrudStoreLoad&&e.load&&(e.load=e.commit=function(){}),n.bindCrudStoreListeners(e),t}},{key:"addCrudStore",value:function(e,t,n){var r;if(e&&(Array.isArray(e)||(e=[e]),e.length)){var o=this,i=e.map(o.internalAddCrudStore,o);if(void 0===t){var a;(a=o.crudStores).push.apply(a,QA(i))}else{var u,c=t;n&&((n instanceof ed||"object"!==eM(n))&&(n=o.getStoreDescriptor(n)),c+=o.crudStores.indexOf(n)),(u=o.crudStores).splice.apply(u,[c,0].concat(QA(i)))}(r=o.orderedCrudStores).push.apply(r,QA(i)),o.updateCrudStoreIndex()}}},{key:"addPrioritizedStore",value:function(e){this.hasCrudStore(e)||this.addCrudStore(e,U.findInsertionIndex(e,this.crudStores,cM)),this.hasApplySequenceStore(e)||this.addStoreToApplySequence(e,U.findInsertionIndex(e,this.syncApplySequence,sM))}},{key:"hasCrudStore",value:function(e){return this.crudStores.some((function(t){return t===e||t.store===e||t.storeId===e}))}},{key:"removeCrudStore",value:function(e){for(var t=this,n=t.crudStores,r=0,o=n.length;r<o;r++){var i=n[r];if(i===e||i.store===e||i.storeId===e){t.unbindCrudStoreListeners(i.store),delete t.crudStoresIndex[i.storeId],n.splice(r,1),t.syncApplySequence&&t.removeStoreFromApplySequence(e);break}}}},{key:"bindCrudStoreListeners",value:function(e,t){var n=this,r={update:n.onCrudStoreChange,removeall:n.onCrudStoreChange,detachable:!0,thisObj:n};Object.assign(r,{add:n.onCrudStoreChange,remove:n.onCrudStoreChange}),e.crudDetatcher=e.on(r)}},{key:"unbindCrudStoreListeners",value:function(e){e.crudDetatcher&&e.crudDetatcher()}},{key:"addStoreToApplySequence",value:function(e,t,n){if(e){Array.isArray(e)||(e=[e]);var r=this,o=e.reduce((function(e,t){var n=r.getStoreDescriptor(t);return n&&e.push(n),e}),[]);if(void 0===t){var i;(i=r.syncApplySequence).push.apply(i,QA(o))}else{var a,u=t;n&&((n instanceof ed||"object"!==eM(n))&&(n=r.getStoreDescriptor(n)),u+=r.syncApplySequence.indexOf(n)),(a=r.syncApplySequence).splice.apply(a,[u,0].concat(QA(o)))}var c=r.syncApplySequence.map((function(e){return e.storeId}));r.orderedCrudStores=QA(r.syncApplySequence),r.crudStores.forEach((function(e){c.includes(e.storeId)||r.orderedCrudStores.push(e)}))}}},{key:"removeStoreFromApplySequence",value:function(e){var t=this.syncApplySequence.findIndex((function(t){return t===e||t.store===e||t.storeId===e}));t>-1&&(this.syncApplySequence.splice(t,1),this.orderedCrudStores.splice(t,1))}},{key:"hasApplySequenceStore",value:function(e){return this.syncApplySequence.some((function(t){return t===e||t.store===e||t.storeId===e}))}},{key:"onCrudStoreChange",value:function(){var e=this;e.crudIgnoreUpdates||(e.crudStoreHasChanges()?(e.trigger("hasChanges"),e.autoSync&&(e.autoSyncTimerId||(e.autoSyncTimerId=e.setTimeout((function(){e.autoSyncTimerId=null,e.sync()}),e.autoSyncTimeout)))):e.trigger("noChanges"))}},{key:"internalOnResponse",value:(d=JA(regeneratorRuntime.mark((function e(t,n,r,o){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this).activeRequests[t]=null,(a=n?i.decode(n):null)&&a.success){e.next=8;break}return i.trigger("requestFail",{requestType:t,response:a,responseText:n,responseOptions:r}),i.trigger(t+"Fail",{response:a,responseOptions:r,responseText:n,options:o}),i.warn("CrudManager: "+t+" failed, please inspect the server response"),e.abrupt("return",a);case 8:if(!1===i.trigger("beforeResponseApply",{requestType:t,response:a})||!1===i.trigger("before"+A.capitalizeFirstLetter(t)+"Apply",{response:a,options:o})){e.next=15;break}return i.crudRevision=a.revision,e.next=12,i.applyResponse(t,a,o);case 12:i.trigger("requestDone",{requestType:t,response:a,responseOptions:r}),i.trigger(t,{response:a,responseOptions:r,options:o}),"load"!==t&&i.crudStoreHasChanges()||i.trigger("noChanges");case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return d.apply(this,arguments)})},{key:"internalOnLoad",value:(f=JA(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.crudLoaded=!0,e.abrupt("return",this.internalOnResponse("load",t,n,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return f.apply(this,arguments)})},{key:"internalOnSync",value:(l=JA(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.internalOnResponse("sync",t,n,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return l.apply(this,arguments)})},{key:"suspendChangesTracking",value:function(){this.crudIgnoreUpdates++}},{key:"resumeChangesTracking",value:function(e){this.crudIgnoreUpdates&&!--this.crudIgnoreUpdates&&e&&this.onCrudStoreChange()}},{key:"crudStoreHasChanges",value:function(e){if(e){var t=this.getCrudStore(e);return t&&this.isCrudStoreDirty(t)}return this.crudStores.some(this.isCrudStoreDirty)}},{key:"isCrudStoreDirty",value:function(e){return null!=e.store.changes}},{key:"emitCrudStoreEvents",value:function(e,t){var n={action:"read"+t},r=!0,o=!1,i=void 0;try{for(var a,u=this.crudStores[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;e.includes(c.storeId)&&c.store.trigger(t,n)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}}},{key:"getLoadPackage",value:function(e){var t={type:"load",requestId:this.requestId},n=this.crudStores,r=Object.assign({},e);return t.stores=n.map((function(e){var t=r&&r[e.storeId],n=e.pageSize||e.store&&e.store.pageSize;if(t||n){var o=Object.assign({storeId:e.storeId,page:1,pageSize:n},t);return e.currentPage=o.page,t&&delete r[e.storeId],o}return e.storeId})),Object.assign(t,r),t}},{key:"loadCrudStore",value:function(e,t,n,r){var o=t&&t.rows;n&&n.append||t.append?e.add(o):e.data=o,e.trigger("load",{source:e,data:o})}},{key:"loadDataToCrudStore",value:function(e,t,n){var r,o=this,i=e.store,a=e.stores,u=e.idField||"id",c=i.tree,s=t&&t.rows;i.__loading=!0,s&&(a&&(r=o.getSubStoresData(s,a,u,c)),o.loadCrudStore(i,t,n,e),r&&r.forEach((function(e){o.loadDataToCrudStore(Object.assign({store:i.getById(e.id).get(e.storeDesc.storeId)},e.storeDesc),e.data)}))),i.__loading=!1}},{key:"loadCrudManagerData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.suspendChangesTracking(),this.crudStores.forEach((function(r){var o=r.storeId,i=e[o];i&&t.loadDataToCrudStore(r,i,n[o])})),this.resumeChangesTracking()}},{key:"load",value:function(e){var t=this,n=t.getLoadPackage(e);return new Promise((function(r,o){!1!==t.trigger("beforeLoad",{pack:n})?(t.activeRequests.load&&(t.cancelRequest(t.activeRequests.load.desc),t.trigger("loadCanceled",{pack:n})),t.trigger("loadStart",{pack:n}),t.emitCrudStoreEvents(n.stores,"loadStart"),t.activeRequests.load={options:e,pack:n,resolve:r,reject:o,id:n.requestId,desc:t.sendRequest({data:t.encode(n),type:"load",success:t.onLoadSuccess,failure:t.onLoadFailure,thisObj:t})}):(t.trigger("loadCanceled",{pack:n}),o({cancelled:!0}))}))}},{key:"onLoadSuccess",value:(s=JA(regeneratorRuntime.mark((function e(t,n){var r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",o=this.activeRequests.load,i=o.options,e.next=4,t.text().then((function(e){return r=e})).catch(lM);case 4:return e.next=6,this.internalOnLoad(r,n,i);case 6:a=e.sent,this.emitCrudStoreEvents(o.pack.stores,"afterRequest"),a&&a.success?o.resolve({response:a,rawResponse:t,responseText:r,options:i}):o.reject({cancelled:!1,response:a,rawResponse:t,responseText:r,options:i});case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"onLoadFailure",value:(c=JA(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},r=this.activeRequests.load,o=r.options,i=Boolean(n.signal&&n.signal.aborted)){e.next=11;break}return a="",e.next=6,t.text().then((function(e){return a=e})).catch(lM);case 6:return e.next=8,this.internalOnLoad(a,n,o);case 8:u=e.sent,this.emitCrudStoreEvents(r.pack.stores,"afterRequest"),r.reject({cancelled:i,response:u,rawResponse:t,responseText:a,options:o});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getSubStoresData",value:function(e,t,n,r){var o=this;if(e){var i=[];return r?e.forEach((function(e){a(e,t);var r=o.getSubStoresData(e.children,t,n,!0);r&&i.push.apply(i,QA(r))})):e.forEach((function(e){return a(e,t)})),i}function a(e,t){t.forEach((function(t){var r=t.storeId;e[r]&&(i.push({id:e[n],storeDesc:t,data:e[r]}),delete e[r])}))}}},{key:"prepareAdded",value:function(e,t,n){var r=this;return e.filter((function(e){return e.isValid})).map((function(e){var o=e.constructor,i=Object.assign(e.persistableData,KA({},t,e.id));return r.resetIdsBeforeSync&&Mt.deletePath(i,o.getFieldDataSource(o.idField)),n&&r.processSubStores(e,i,n),i}))}},{key:"prepareUpdated",value:function(e,t,n){var r=this,o=n.writeAllFields||!1!==n.writeAllFields&&this.writeAllFields;if(n.store.tree){var i=n.store.rootNode;e=e.filter((function(e){return e!==i}))}return e.filter((function(e){return e.isValid})).reduce((function(e,n){var i;return i=o?n.persistableData:n.modificationData,t&&r.processSubStores(n,i,t),Mt.isEmpty(i)||e.push(i),e}),[])}},{key:"prepareRemoved",value:function(e){return e.map((function(e){var t=e.constructor;return Mt.setPath({},t.getFieldDataSource(t.idField),e.id)}))}},{key:"processSubStores",value:function(e,t,n){var r=this;n.forEach((function(n){var o=n.storeId,i=e.get(o);if(i){var a=r.getCrudStoreChanges(Object.assign({store:i},n));a?t[o]=Object.assign(a,{$store:!0}):delete t[o]}else delete t[o]}))}},{key:"getCrudStoreChanges",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.phantomIdField||this.phantomIdField,r=e.store,o=e.stores,i=r.added.values,a=r.modified.values,u=r.removed.values;return i.length&&(i=this.prepareAdded(i,n,o)),a.length&&(a=this.prepareUpdated(a,o,e)),u.length&&(u=this.prepareRemoved(u)),(i.length||a.length||u.length)&&(t={},i.length&&(t.added=i),a.length&&(t.updated=a),u.length&&(t.removed=u)),t}},{key:"getChangeSetPackage",value:function(){var e=this,t={type:"sync",requestId:this.requestId,revision:this.crudRevision},n=0;return this.crudStores.forEach((function(r){var o=e.getCrudStoreChanges(r);o&&(n++,t[r.storeId]=o)})),n?t:null}},{key:"applyChangesToRecord",value:function(e,t,n,r){var o,i=this,a=e.constructor,u=a.fieldDataSourceMap,c=a.prototype,s={},l=e.data,f=KA({},i.phantomIdField,!0);for(var d in n&&n.forEach((function(n){var r=n.storeId;if(Object.prototype.hasOwnProperty.call(t,r)){f[r]=!0;var o=e.get(r);o?i.applyChangesToStore(Object.assign({store:o},n),t[r]):console.log("Can't find store for the response sub-package")}})),t)if(Object.prototype.hasOwnProperty.call(t,d)&&!f[d]){var p=u[d],h=p?p.name:d,y=a.processField(h,t[d]),g=d in c?e[h]:Mt.getPath(l,d);Mt.isEqual(g,y)||(o=!0,s[h]=y)}if(o){for(var v in i.suspendChangesTracking(),s)e[v]=s[v];i.resumeChangesTracking()}e.clearChanges(!0,!1)}},{key:"applyRemovals",value:function(e,t,n){var r=this,o=e.removed,i=e.modelClass,a=n.findByIdFn,u=n.removeRecordFn,c=i.getFieldDataSource(i.idField),s=0;return t.forEach((function(e){var t=e[c],n=!1;if(o.includes(t)&&(o.remove(t),n=!0,s++),!n){var i=a(t);i?(r.suspendChangesTracking(),u(i),o.remove(i),s++,r.resumeChangesTracking()):console.log("Can't find record to remove from the response package")}})),s}},{key:"getApplyChangesToStoreHelpers",value:function(e){return e.tree?{findByPhantomFn:function(t){return e.getById(t)},findByIdFn:function(t){return e.getById(t)},addRecordFn:function(t){return(t.parentId&&e.getById(t.parentId)||e.rootNode).appendChild(t)},removeRecordFn:function(e){return e.remove()}}:{findByPhantomFn:function(t){return e.getById(t)},findByIdFn:function(t){return e.getById(t)},addRecordFn:function(t){return e.add(t)[0]},removeRecordFn:function(t){return e.remove(t)}}}},{key:"applyChangesToStore",value:function(e,t){var n=this,r=e.phantomIdField||n.phantomIdField,o=e.store,i=o.modelClass,a=i.getFieldDataSource(i.idField),u=n.getApplyChangesToStoreHelpers(o),c=u.findByPhantomFn,s=u.findByIdFn,l=u.addRecordFn,f=u.removeRecordFn,d=t.rows,p=t.removed;if(d){var h=e.stores;d.forEach((function(e){var t=e[r],i=Mt.getPath(e,a),u=null;null!=t?u=c(t):null!=i&&(u=s(i)),u?n.applyChangesToRecord(u,e,h,o):(n.suspendChangesTracking(),u=l(e),n.resumeChangesTracking(),u.clearChanges())}))}p&&n.applyRemovals(o,p,{findByIdFn:s,removeRecordFn:f})&&o.trigger("dataChanged",{source:o})}},{key:"applySyncResponse",value:function(e){var t=this.orderedCrudStores;this.applyingSyncResponse=!0;var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value,c=e[u.storeId];c&&this.applyChangesToStore(u,c)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}this.applyingSyncResponse=!1}},{key:"applyLoadResponse",value:function(e,t){this.applyingLoadResponse=!0,this.loadCrudManagerData(e,t),this.applyingLoadResponse=!1}},{key:"applyResponse",value:(u=JA(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.trackResponseType&&(t=n.type||t),e.t0=t,e.next="load"===e.t0?4:"sync"===e.t0?6:8;break;case 4:return this.applyLoadResponse(n,r),e.abrupt("break",8);case 6:return this.applySyncResponse(n),e.abrupt("break",8);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"sync",value:function(){var e=this;return e.activeRequests.sync?(e.trigger("syncDelayed"),e.activeSyncPromise=e.activeSyncPromise.then((function(){return e.sync()}),(function(){return e.sync()}))):e.activeSyncPromise=new Promise((function(t,n){var r=e.getChangeSetPackage();r?!1!==e.trigger("beforeSync",{pack:r})?(e.trigger("syncStart",{pack:r}),e.activeRequests.sync={pack:r,resolve:t,reject:n,id:r.requestId,desc:e.sendRequest({data:e.encode(r),type:"sync",success:e.onSyncSuccess,failure:e.onSyncFailure,thisObj:e})}):(e.trigger("syncCanceled",{pack:r}),n({cancelled:!0})):t(null)}))}},{key:"onSyncSuccess",value:(a=JA(regeneratorRuntime.mark((function e(t,n){var r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,t.text().then((function(e){return r=e})).catch(lM);case 3:return o=this.activeRequests.sync,e.next=6,this.internalOnSync(r,n);case 6:(i=e.sent)&&i.success?o.resolve({response:i,rawResponse:t,responseText:r,request:o}):o.reject({cancelled:!1,response:i,rawResponse:t,responseText:r,request:o});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"onSyncFailure",value:(i=JA(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:{},r="",o=null,i=this.activeRequests.sync,a=Boolean(n.signal&&n.signal.aborted)){e.next=9;break}return e.next=6,t.text().then((function(e){return r=e})).catch(lM);case 6:return e.next=8,this.internalOnSync(r,n);case 8:o=e.sent;case 9:a||i.reject({cancelled:a,response:o,rawResponse:t,responseText:r,request:i});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"commitCrudStores",value:function(){this.crudStores.forEach((function(e){return e.store.commit()}))}},{key:"rejectCrudStores",value:function(){this.orderedCrudStores.forEach((function(e){return e.store.clearChanges()}))}},{key:"warn",value:function(){if("console"in window){var e=console;e.log&&e.log.apply&&e.log.apply(e,arguments)}}},{key:"doDestroy",value:function(){var e=this;for(e.activeRequests.load&&e.cancelRequest(e.activeRequests.load.desc),e.activeRequests.sync&&e.cancelRequest(e.activeRequests.sync.desc);e.crudStores.length>0;)e.removeCrudStore(e.crudStores[0]);clearTimeout(e.autoSyncTimerId),e.destroyed=!0,oM(iM(t.prototype),"doDestroy",this)&&oM(iM(t.prototype),"doDestroy",this).call(this)}},{key:"isCrudManager",get:function(){return!0}},{key:"crudStores",set:function(e){this._crudStores=[],this.addCrudStore(e);var t=!0,n=!1,r=void 0;try{for(var o,i=this._crudStores[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.loadPriority=a.syncPriority=0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},get:function(){return this._crudStores}},{key:"orderedCrudStores",get:function(){return this._orderedCrudStores},set:function(e){return this._orderedCrudStores=e}},{key:"syncApplySequence",set:function(e){this._syncApplySequence=[],this.addStoreToApplySequence(e)},get:function(){return this._syncApplySequence}},{key:"isCrudManagerLoading",get:function(){return Boolean(this.activeRequests.load||this.applyingLoadResponse)}},{key:"requestId",get:function(){return Date.now()+""+this._requestId++}}],o=[{key:"defaultConfig",get:function(){return{crudRevision:null,crudStores:[],storeIdProperty:"storeId",crudFilterParam:"filter",transport:{},trackResponseType:!1,phantomIdField:"$PhantomId",autoLoad:!1,autoSyncTimeout:100,autoSync:!1,resetIdsBeforeSync:!0,syncApplySequence:[],orderedCrudStores:[],writeAllFields:!1,crudIgnoreUpdates:0,crudLoaded:!1,createMissingRecords:!1,autoSyncTimerId:null,applyingLoadResponse:!1,applyingSyncResponse:!1,callOnFunctions:!0}}}],r&&nM(n.prototype,r),o&&nM(n,o),t}(Wr(e))};function dM(e){return(dM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yM(e,t){return!t||"object"!==dM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gM(e,t,n){return(gM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vM(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function vM(e){return(vM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mM(e,t){return(mM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bM=function(e){function t(){return pM(this,t),yM(this,vM(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mM(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return Object.assign({},this.crudManagerDefaultConfig,{overrideCrudStoreLoad:!0,stores:null})}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.stores&&(e.crudStores=e.stores,delete e.stores),gM(vM(t.prototype),"construct",this).call(this,e)}},{key:"commit",value:function(){this.commitCrudStores()}},{key:"reject",value:function(){this.rejectCrudStores()}},{key:"addStore",value:function(){return this.addCrudStore.apply(this,arguments)}},{key:"removeStore",value:function(){return this.removeCrudStore.apply(this,arguments)}},{key:"getStore",value:function(){return this.getCrudStore.apply(this,arguments)}},{key:"hasChanges",value:function(){return this.crudStoreHasChanges.apply(this,arguments)}},{key:"loadData",value:function(){return this.loadCrudManagerData.apply(this,arguments)}},{key:"revision",get:function(){return this.crudRevision},set:function(e){this.crudRevision=e}},{key:"stores",set:function(e){e!==this.crudStores&&(this.crudStores=e)},get:function(){return this.crudStores}},{key:"isLoading",get:function(){return this.isCrudManagerLoading}}])&&hM(n.prototype,r),o&&hM(n,o),t}(fM(ae(Y)));function wM(e){return(wM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OM(e,t){return!t||"object"!==wM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EM(e){return(EM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CM(e,t){return(CM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}bM._$name="AbstractCrudManager";var xM=function(e){return function(e){function t(){return kM(this,t),OM(this,EM(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CM(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"CrudManagerView"}},{key:"defaultConfig",get:function(){return{crudManagerClass:null,crudManager:null}}}],(r=[{key:"afterConstruct",value:function(){var e=this;e.crudManager&&e.loadMask&&e.crudManager.isCrudManagerLoading&&e.maskBody(e.loadMask)}},{key:"onCrudManagerLoadStart",value:function(){this.loadMask&&this.maskBody(this.loadMask)}},{key:"onCrudManagerSyncStart",value:function(){this.syncMask&&this.maskBody(this.syncMask)}},{key:"onCrudManagerRequestFinalize",value:function(){this.activeMask&&(this.unmaskBody(),this.toggleEmptyText())}},{key:"onCrudManagerLoadCanceled",value:function(){this.onCrudManagerRequestFinalize()}},{key:"onCrudManagerSyncCanceled",value:function(){this.onCrudManagerRequestFinalize()}},{key:"onCrudManagerLoad",value:function(){this.onCrudManagerRequestFinalize()}},{key:"onCrudManagerSync",value:function(){this.onCrudManagerRequestFinalize()}},{key:"bindCrudManager",value:function(e){this.detachListeners("crudManager"),e&&e.on({name:"crudManager",loadStart:"onCrudManagerLoadStart",load:"onCrudManagerLoad",loadCanceled:"onCrudManagerLoadCanceled",syncStart:"onCrudManagerSyncStart",sync:"onCrudManagerSync",syncCanceled:"onCrudManagerSyncCanceled",thisObj:this})}},{key:"crudManager",get:function(){return this._crudManager},set:function(e){var t=this;e&&e.isCrudManager?t._crudManager=e:e&&t.crudManagerClass?e=new t.crudManagerClass(Object.assign({scheduler:t},e)):t._crudManager=null,t.bindCrudManager(t._crudManager)}}])&&SM(n.prototype,r),o&&SM(n,o),t}(e)};function _M(e){return(_M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RM(e,t){return!t||"object"!==_M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function PM(e){return(PM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TM(e,t){return(TM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var AM=function(e){function t(){return jM(this,t),RM(this,PM(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TM(e,t)}(t,e),n=t,(r=[{key:"onEventStoreBeforeSync",value:function(e){var t=e.changes;return this.removeNonPersistableRecordsToCreate(t),this.shallContinueSync(t)}},{key:"onResourceStoreBeforeSync",value:function(e){var t=e.changes;return this.removeNonPersistableRecordsToCreate(t),this.shallContinueSync(t)}},{key:"onAssignmentStoreBeforeSync",value:function(e){var t=e.changes;return this.removeNonPersistableRecordsToCreate(t),this.shallContinueSync(t)}},{key:"onDependencyStoreBeforeSync",value:function(e){var t=e.changes;return this.removeNonPersistableRecordsToCreate(t),this.shallContinueSync(t)}},{key:"removeNonPersistableRecordsToCreate",value:function(e){var t,n,r=e.added||[];for(n=r.length-1;n>=0;--n)(t=r[n]).isPersistable||r.splice(r.indexOf(t),1);0===r.length&&(e.added.length=0)}},{key:"shallContinueSync",value:function(e){return Boolean(e.added&&e.added.length>0||e.modified&&e.modified.length>0||e.removed&&e.removed.length>0)}},{key:"eventStore",set:function(e){var t=this;t.eventStoreDetacher&&t.eventStoreDetacher(),t._eventStore=e,e&&e.autoCommit&&(t.eventStoreDetacher=e.on({beforecommit:t.onEventStoreBeforeSync,thisObj:t,detachable:!0,prio:100}))},get:function(){return this._eventStore}},{key:"resourceStore",set:function(e){var t=this;t.resourceStoreDetacher&&t.resourceStoreDetacher(),t._resourceStore=e,e&&e.autoCommit&&(t.resourceStoreDetacher=e.on({beforecommit:t.onResourceStoreBeforeSync,thisObj:t,detachable:!0,prio:100}))},get:function(){return this._resourceStore}},{key:"assignmentStore",set:function(e){var t=this;t.assignmentStoreDetacher&&t.assignmentStoreDetacher(),t._assignmentStore=e,e&&e.autoSync&&(t.assignmentStoreDetacher=e.on({beforecommit:t.onAssignmentStoreBeforeSync,thisObj:t,detachable:!0,prio:100}))},get:function(){return this._assignmentStore}},{key:"dependencyStore",set:function(e){var t=this;t.dependencyStoreDetacher&&t.dependencyStoreDetacher(),t._dependencyStore=e,e&&e.autoSync&&(t.dependencyStoreDetacher=e.on({beforecommit:t.onDependencyStoreBeforeSync,thisObj:t,detachable:!0,prio:100}))},get:function(){return this._dependencyStore}}])&&DM(n.prototype,r),o&&DM(n,o),t}(Y);function MM(e){return(MM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LM(e,t){return!t||"object"!==MM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NM(e){return(NM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HM(e,t){return(HM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}AM._$name="ModelPersistencyManager";var BM=function(e){function t(){return IM(this,t),LM(this,NM(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HM(e,t)}(t,e),n=t,o=[{key:"makeAssignmentEventResourceCompositeKey",value:function(e,t){return"event(".concat(e,")-resource(").concat(t,")")}},{key:"fields",get:function(){return[{name:"resourceId"},{name:"eventId"}]}},{key:"relationConfig",get:function(){return[{relationName:"resource",fieldName:"resourceId",store:"resourceStore",collectionName:"assignments"},{relationName:"event",fieldName:"eventId",store:"eventStore",collectionName:"assignments"}]}}],(r=[{key:"getResource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.resourceStore;return e&&e.getById(this.resourceId)}},{key:"fullCopy",value:function(){throw new Error("Not implemented")}},{key:"eventResourceKey",get:function(){return"".concat(this.event?this.eventId:this.data.eventId||this.internalId,"-").concat(this.resource?this.resourceId:this.data.resourceId||this.internalId)}},{key:"assignmentStore",get:function(){return this.stores&&this.stores[0]}},{key:"eventStore",get:function(){var e=this.assignmentStore;return e&&e.eventStore}},{key:"resourceStore",get:function(){var e=this.eventStore;return e&&e.resourceStore}},{key:"eventName",get:function(){return this.event&&this.event.name}},{key:"resourceName",get:function(){return this.resource&&this.resource.name}},{key:"isAssignment",get:function(){return!0}},{key:"isPersistable",get:function(){var e,t=this.event,n=this.resource,r=this.stores,o=this.unjoinedStores,i=r[0];return e=i?this.isValid&&(i.crudManager||!t.hasGeneratedId&&!n.hasGeneratedId):o[0],Boolean(e)}},{key:"isValid",get:function(){return null!=this.resource&&null!=this.event}},{key:"eventResourceCompositeKey",get:function(){return t.makeAssignmentEventResourceCompositeKey(this.eventId,this.resourceId)}}])&&FM(n.prototype,r),o&&FM(n,o),t}(qs);function zM(e){return(zM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $M(e,t){return!t||"object"!==zM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function YM(e,t,n){return(YM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GM(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function GM(e){return(GM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UM(e,t){return(UM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}BM.exposeProperties(),BM._$name="AssignmentModel";var qM=function(e){return function(e){function t(){return VM(this,t),$M(this,GM(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UM(e,t)}(t,e),n=t,(r=[{key:"construct",value:function(e){YM(GM(t.prototype),"construct",this).call(this,e),Object.assign(this,{isEventStore:!0,autoTree:!0,modelPersistencyManager:this.createModelPersistencyManager()})}},{key:"createModelPersistencyManager",value:function(){return new AM({eventStore:this,resourceStore:this.resourceStore,assignmentStore:this.assignmentStore,dependencyStore:this.dependencyStore})}},{key:"getEventsInTimeSpan",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[];return this.forEachScheduledEvent((function(i,a,u){(n&&xt.intersectSpans(a,u,e,t)||!n&&a-e>=0&&t-u>=0)&&(!r||i.resources.length>0)&&o.push(i)})),o}},{key:"getEventsByStartDate",value:function(e){var t=[];return this.forEachScheduledEvent((function(n,r,o){xt.isEqual(r,e,"day")&&t.push(n)})),t}},{key:"forEachScheduledEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.forEach((function(n){var r=n.startDate,o=n.endDate;if(r&&o)return e.call(t,n,r,o)}))}},{key:"getTotalTimeSpan",value:function(){var e=new Date(9999,0,1),t=new Date(0);return this.forEach((function(n){n.startDate&&(e=xt.min(n.startDate,e)),n.endDate&&(t=xt.max(n.endDate,t))})),e=e<new Date(9999,0,1)?e:null,t=t>new Date(0)?t:null,this.lastTotalTimeSpan={startDate:e||null,endDate:t||e||null}}},{key:"isEventPersistable",value:function(e){var t=!0;if(!this.assignmentStore){var n=e.stores[0],r=n&&n.crudManager;t=!n||r||!e.resource||!e.resource.hasGeneratedId}return t}},{key:"isDateRangeAvailable",value:function(e,t,n,r){if(n instanceof BM){var o=n.event,i=o.resources,a=new Set(r.events);return i.forEach((function(e){e.events.forEach((function(e){return a.add(e)}))})),a.delete(o),!Array.from(a).some((function(n){return xt.intersectSpans(e,t,n.startDate,n.endDate)}))}return!this.getEventsForResource(r).some((function(r){return!(n===r||!xt.intersectSpans(e,t,r.startDate,r.endDate))}))}},{key:"filterEventsForResource",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;return e.getEvents(this).filter(t.bind(n))}},{key:"getResourcesForEvent",value:function(e){return this.assignmentStore?this.assignmentStore.getResourcesForEvent(e):(e=this.getById(e)).resource&&!e.resource.placeHolder?[e.resource]:[]}},{key:"getEventsForResource",value:function(e){if(this.assignmentStore)return this.assignmentStore.getEventsForResource(e);e=qs.asId(e);var t=this.relationCache.resource&&this.relationCache.resource[e];return t?t.slice():[]}},{key:"getAssignmentsForEvent",value:function(e){return this.assignmentStore&&this.assignmentStore.getAssignmentsForEvent(e)||[]}},{key:"getAssignmentsForResource",value:function(e){return this.assignmentStore&&this.assignmentStore.getAssignmentsForResource(e)||[]}},{key:"assignEventToResource",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.assignmentStore?this.assignmentStore.assignEventToResource(e,t,void 0,n):(e=this.getById(e),Array.isArray(t)&&(t=t[0]),e&&(e.resourceId=qs.asId(t)))}},{key:"unassignEventFromResource",value:function(e,t){this.assignmentStore?this.assignmentStore.unassignEventFromResource(e,t):(e=this.getById(e),t=qs.asId(t),e&&e.resourceId==t&&(e.resourceId=null))}},{key:"reassignEventFromResourceToResource",value:function(e,t,n){var r=this.assignmentStore,o=qs.asId(n),i=qs.asId(t);if(r){var a=r.getAssignmentForEventAndResource(e,t);a?a.resourceId=o:r.assignEventToResource(e,n)}else(e=this.getById(e)).resourceId==i&&(e.resourceId=o)}},{key:"isEventAssignedToResource",value:function(e,t){return this.assignmentStore?this.assignmentStore.isEventAssignedToResource(e,t):(e=this.getById(e),t=qs.asId(t),e&&e.resourceId==t||!1)}},{key:"removeAssignmentsForEvent",value:function(e){this.assignmentStore?this.assignmentStore.removeAssignmentsForEvent(e):(e=this.getById(e))&&(e.resourceId=null)}},{key:"removeAssignmentsForResource",value:function(e){var t=this.assignmentStore,n=this.resourceStore;t?t.removeAssignmentsForResource(e):n?e=n.getById(e):(e=qs.asId(e),this.forEach((function(t){return t.resourceId==e&&(t.resourceId=null)})))}},{key:"resourceStore",get:function(){return this._resourceStore},set:function(e){var t=this,n=t._resourceStore;n&&(n.eventStore=null,t.modelPersistencyManager&&(t.modelPersistencyManager.resourceStore=null)),t._resourceStore=e||null,e&&(t.modelPersistencyManager&&(t.modelPersistencyManager.resourceStore=t._resourceStore),e.eventStore=t),t.isConfiguring||t.initRelations(!0),(n||e)&&n!==e&&t.trigger("resourceStoreChange",{newResourceStore:e,oldResourceStore:n})}},{key:"assignmentStore",get:function(){return this._assignmentStore},set:function(e){var t=this,n=t._assignmentStore;n&&(n.eventStore=null,t.modelPersistencyManager&&(t.modelPersistencyManager.assignmentStore=null)),t._assignmentStore=e||null,e&&(t.modelPersistencyManager&&(t.modelPersistencyManager.assignmentStore=t._assignmentStore),e.eventStore=t),t.isConfiguring||t.initRelations(!0),(n||e)&&n!==e&&t.trigger("assignmentStoreChange",{newAssignmentStore:e,oldAssignmentStore:n})}},{key:"dependencyStore",get:function(){return this._dependencyStore},set:function(e){var t=this,n=t._dependencyStore;n&&(n.eventStore=null,t.modelPersistencyManager&&(t.modelPersistencyManager.dependencyStore=null)),t._dependencyStore=e||null,t._dependencyStore&&(t.modelPersistencyManager&&(t.modelPersistencyManager.dependencyStore=t._dependencyStore),t._dependencyStore.eventStore=t),(n||e)&&n!==e&&t.trigger("dependencyStoreChange",{newDependencyStore:e,oldDependencyStore:n})}}])&&WM(n.prototype,r),o&&WM(n,o),t}(e||Y)};function XM(e){return(XM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KM(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ZM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QM(e,t){return!t||"object"!==XM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eI(e){return(eI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tI(e,t){return(tI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nI=function(e){function t(){return ZM(this,t),QM(this,eI(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tI(e,t)}(t,e),n=t,(r=[{key:"cancel",value:function(){var e=this.delayedCalls;if(e){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=n.length?n:Object.keys(e),i=o.length-1;i>=0;i--){var a=o[i],u=e[a];u&&u.timer&&(this.clearTimeout(u.timer),u.timer=null)}}}},{key:"invoke",value:function(e){var t=e.id,n=e.scope,r=e.beforeFn,o=A.capitalizeFirstLetter(t);this.trigger("delayed".concat(o,"Start"),e),r&&r.call(n,e);for(var i,a=e.afterFn,u=e.fn,c=e.entries,s=[];i=c.shift();)s.push(u.call.apply(u,[n,e].concat(KM(i))));return a&&a.call(n,e),this.trigger("delayed".concat(o,"End"),e),e.delete(),s}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){var o=e;o.delayedCalls=o.delayedCalls||{};var i=t.id,a=t.args,u=t.timeout;o.delayedCalls[i]||(o.delayedCalls[i]=Object.assign({delete:function(){return delete o.delayedCalls[i]},entries:[],scope:e,id:i},t),delete o.delayedCalls[i].args);var c=o.delayedCalls[i];o.cancel(i),c.entries.push(a||[]),c.timer=o.setTimeout((function(){c.results=o.invoke(c),n(c)}),u||o.delayedCallTimeout)}))}},{key:"delayedCallTimeout",get:function(){return isNaN(this._delayedCallTimeout)?100:this._delayedCallTimeout},set:function(e){this._delayedCallTimeout=e}}])&&JM(n.prototype,r),o&&JM(n,o),t}(Wr(ae()));function rI(e){return(rI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aI(e,t){return!t||"object"!==rI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uI(e){return(uI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cI(e,t){return(cI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}nI._$name="DelayedCallsManager";var sI=function(e){function t(){return oI(this,t),aI(this,uI(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cI(e,t)}(t,e),n=t,o=[{key:"getNthDayInPeriod",value:function(e,t,n,r){var o,i,a;if(r){r>0?(i=1,a=e):(i=-1,a=t);var u=n-a.getDay();i*u<0&&(r+=i),((o=new Date(a.getTime()+6048e5*(r-i)+864e5*u))<e||o>t)&&(o=null)}return o}},{key:"buildDate",value:function(e,t,n){var r=new Date(e,t,n);if(r.getFullYear()==e&&r.getMonth()==t&&r.getDate()==n)return r}},{key:"isValidPosition",value:function(e){return Boolean(e)}},{key:"forEachDateAtPositions",value:function(e,t,n,r){for(var o=e.length,i={},a=0;a<t.length;a++){var u=t[a];if(this.isValidPosition(u)){var c=u>0?e[u-1]:e[o+u];if(c&&!i[c.getTime()]&&(i[c.getTime()]=!0,!1===n.call(r,c)))return!1}}}},{key:"frequency",get:function(){return"NONE"}},{key:"MAX_OCCURRENCES_COUNT",get:function(){return 1e6}}],(r=null)&&iI(n.prototype,r),o&&iI(n,o),t}(Y);function lI(e){return(lI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pI(e,t){return!t||"object"!==lI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hI(e){return(hI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yI(e,t){return(yI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}sI._$name="AbstractRecurrenceIterator";var gI=function(e){function t(){return fI(this,t),pI(this,hI(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yI(e,t)}(t,e),n=t,o=[{key:"forEachDate",value:function(e){var t=e.recurrence,n=e.fn,r=e.scope,o=void 0===r?this:r,i=t.timeSpan,a=t.endDate,u=t.interval,c=i.startDate,s=e.startDate||c,l=e.endDate||a,f=t.count,d=0;a&&l&&l>a&&(l=a),c>s&&(s=c);var p=s-c,h=864e5*u,y=Math.floor(p/h);l||f||(f=this.MAX_OCCURRENCES_COUNT);for(var g=xt.add(c,y,"day");(!l||g<=l)&&(d++,!(g>=s&&(l&&g>l||!1===n.call(o,g,d)||f&&d>=f)));)g=xt.add(g,u,"day")}},{key:"frequency",get:function(){return"DAILY"}}],(r=null)&&dI(n.prototype,r),o&&dI(n,o),t}(sI);function vI(e){return(vI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function bI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kI(e,t){return!t||"object"!==vI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function SI(e){return(SI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OI(e,t){return(OI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}gI._$name="DailyRecurrenceIterator";var EI=/^([+-]?[0-9])?(SU|MO|TU|WE|TH|FR|SA)$/,CI=["SU","MO","TU","WE","TH","FR","SA"],xI=function(e){function t(){return bI(this,t),kI(this,SI(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OI(e,t)}(t,e),n=t,o=[{key:"decodeDay",value:function(e){var t,n;return(t=EI.exec(e))&&(n=[CI.indexOf(t[2])],t[1]&&(t[1]=parseInt(t[1],10),n.push(t[1]))),n}},{key:"encodeDay",value:function(e){var t;if(Array.isArray(e)){var n=mI(e,2);e=n[0],t=n[1]}return(t?t.toString():"")+CI[e]}},{key:"decode",value:function(e){var t,n=[];if(e)for(var r=0;r<e.length;r++)(t=this.decodeDay(e[r]))&&n.push(t);return n}},{key:"encode",value:function(e){var t,n=[];if(e)for(var r=0;r<e.length;r++)(t=this.encodeDay(e[r]))&&n.push(t);return n}}],(r=null)&&wI(n.prototype,r),o&&wI(n,o),t}(Y);function _I(e){return(_I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RI(e,t){return!t||"object"!==_I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function PI(e){return(PI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TI(e,t){return(TI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}xI._$name="RecurrenceDayRuleEncoder";var AI=function(e){function t(){return jI(this,t),RI(this,PI(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TI(e,t)}(t,e),n=t,o=[{key:"forEachDate",value:function(e){var t,n,r=e.fn,o=e.recurrence,i=e.scope,a=void 0===i?this:i,u=o.timeSpan,c=o.interval,s=o.days,l=o.endDate,f=u.startDate,d=0,p=e.startDate||f,h=e.endDate||l,y=o.count,g=xI.decode(s);for(l&&h&&h>l&&(h=l),g&&g.length?g.sort((function(e,t){return e[0]-t[0]})):g=[[f.getDay()]],f>p&&(p=f),t=xt.getNext(y?f:p,"week",0,0),h||y||(y=this.MAX_OCCURRENCES_COUNT);!h||t<=h;){for(var v=0;v<g.length;v++)if((n=xt.copyTimeValues(xt.add(t,g[v][0],"day"),f))>=f&&(d++,n>=p&&(h&&n>h||!1===r.call(a,n,d)||y&&d>=y)))return;t=xt.getNext(t,"week",c,0)}}},{key:"frequency",get:function(){return"WEEKLY"}}],(r=null)&&DI(n.prototype,r),o&&DI(n,o),t}(sI);function MI(e){return(MI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function II(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LI(e,t){return!t||"object"!==MI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NI(e){return(NI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HI(e,t){return(HI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}AI._$name="WeeklyRecurrenceIterator";var BI=function(e){function t(){return II(this,t),LI(this,NI(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HI(e,t)}(t,e),n=t,o=[{key:"getNthDayOfMonth",value:function(e,t){var n=xt.daysInMonth(e),r=null;return t&&Math.abs(t)<=n&&(r=new Date(e.getFullYear(),e.getMonth(),t<0?n+t+1:t)),r}},{key:"isValidPosition",value:function(e){return e&&Math.abs(e)>0&&Math.abs(e)<=31}},{key:"forEachDate",value:function(e){var t,n,r,o,i,a,u=this,c=e.fn,s=e.recurrence,l=e.scope,f=void 0===l?u:l,d=s.timeSpan,p=s.interval,h=s.days,y=s.endDate,g=s.count,v=s.positions,m=d.startDate,b=xI.decode(h),w=v&&v.length,k={},S=e.startDate||m,O=e.endDate||y,E=s.monthDays,C=0;for(y&&O&&O>y&&(O=y),m>S&&(S=m),n=xt.startOf(g?m:S,"month"),r=new Date(xt.getNext(n,"month",1)-1),E&&E.length||b&&b.length||(E=[m.getDate()]),b&&b.length&&b.forEach((function(e){e[1]&&((t=t||{})[e[0]]=e[1])}));(!O||O>=n)&&(!g||C<g);){if(o=[],b&&b.length){if(b.forEach((function(e){var t=e[0],c=1,s=53;for(e[1]&&(c=s=e[1]),a=c;a<=s;a++)(i=u.getNthDayInPeriod(n,r,t,a))&&(i=xt.copyTimeValues(i,m),k[i.getTime()]||(k[i.getTime()]=!0,o.push(i)))})),o.sort((function(e,t){return e-t})),!w)for(a=0;a<o.length;a++)if((i=o[a])>=m&&(C++,i>=S&&(O&&i>O||!1===c.call(f,i,C)||g&&C>=g)))return!1}else{var x=[];for(a=0;a<E.length;a++)(i=u.getNthDayOfMonth(n,E[a]))&&!k[i.getTime()]&&(k[i.getTime()]=!0,x.push(i));for(x.sort((function(e,t){return e-t})),a=0;a<x.length;a++)if(i=xt.copyTimeValues(x[a],m),w)o.push(i);else if(i>=m&&(C++,i>=S&&(O&&i>O||!1===c.call(f,i,C)||g&&C>=g)))return}w&&o.length&&u.forEachDateAtPositions(o,v,(function(e){if(e>=m&&(C++,e>=S&&(!O||e<=O)&&(!1===c.call(f,e,C)||g&&C>=g)))return!1})),n=xt.getNext(n,"month",p),r=new Date(xt.getNext(n,"month",1)-1)}}},{key:"frequency",get:function(){return"MONTHLY"}}],(r=null)&&FI(n.prototype,r),o&&FI(n,o),t}(sI);function zI(e){return(zI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $I(e,t){return!t||"object"!==zI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function YI(e){return(YI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GI(e,t){return(GI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}BI._$name="MonthlyRecurrenceIterator";var UI=function(e){function t(){return VI(this,t),$I(this,YI(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GI(e,t)}(t,e),n=t,o=[{key:"forEachDate",value:function(e){var t,n,r,o,i,a,u=this,c=e.fn,s=e.recurrence,l=e.scope,f=void 0===l?u:l,d=s.timeSpan,p=s.interval,h=s.days,y=s.count,g=s.positions,v=s.endDate,m=d.startDate,b=xI.decode(h),w=g&&g.length,k={},S=e.startDate||m,O=e.endDate||v,E=s.months,C=0;for(v&&O&&O>v&&(O=v),m>S&&(S=m),o=xt.startOf(y?m:S,"year"),i=new Date(xt.getNext(o,"year",1)-1),E&&E.sort((function(e,t){return e-t})),E&&E.length||b&&b.length||(E=[m.getMonth()+1]),b&&b.length&&b.forEach((function(e){e[1]&&((a=a||{})[e[0]]=e[1])}));(!O||O>=o)&&(!y||C<y);){if(r=[],b&&b.length){if(b.forEach((function(e){var a=e[0],c=1,s=53;for(e[1]&&(c=s=e[1]),t=c;t<=s;t++)(n=u.getNthDayInPeriod(o,i,a,t))&&(n=xt.copyTimeValues(n,m),k[n.getTime()]||(k[n.getTime()]=!0,r.push(n)))})),r.sort((function(e,t){return e-t})),!w)for(t=0;t<r.length;t++)if((n=r[t])>=m&&(C++,n>=S&&(O&&n>O||!1===c.call(f,n,C)||y&&C>=y)))return}else for(t=0;t<E.length;t++)if((n=u.buildDate(o.getFullYear(),E[t]-1,m.getDate()))&&(n=xt.copyTimeValues(n,m),!k[n.getTime()]))if(k[n.getTime()]=!0,w)r.push(n);else if(n>=m&&(C++,n>=S&&(O&&n>O||!1===c.call(f,n,C)||y&&C>=y)))return;w&&r.length&&u.forEachDateAtPositions(r,g,(function(e){if(e>=m&&(C++,e>=S&&(!O||e<=O)&&(!1===c.call(f,e,C)||y&&C>=y)))return!1})),o=xt.getNext(o,"year",p),i=new Date(xt.getNext(o,"year",1)-1)}}},{key:"frequency",get:function(){return"YEARLY"}}],(r=null)&&WI(n.prototype,r),o&&WI(n,o),t}(sI);function qI(e){return(qI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XI(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function KI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){XI(i,r,o,a,u,"next",e)}function u(e){XI(i,r,o,a,u,"throw",e)}a(void 0)}))}}function ZI(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function JI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function QI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tF(e,t){return!t||"object"!==qI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nF(e){return(nF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rF(e,t){return(rF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}UI._$name="YearlyRecurrenceIterator";var oF=function(e){return function(e){function t(){return QI(this,t),tF(this,nF(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rF(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurringTimeSpansMixin"}}],(r=[{key:"setupRecurringTimeSpans",value:function(){var e=this;e.recurrenceIterators=e.recurrenceIterators||[],e.addRecurrenceIterators(gI,AI,BI,UI),e.relayEvents(e.delayedCallsManager,["delayedRegenerateOccurrencesStart","delayedRegenerateOccurrencesEnd","delayedGenerateOccurrencesStart","delayedGenerateOccurrencesEnd"]),e.delayedCallsManager.on({delayedRegenerateOccurrencesEnd:e.onDelayedRegenerateOccurrencesFinish,delayedGenerateOccurrencesEnd:e.onDelayedGenerateOccurrencesFinish,thisObj:e})}},{key:"doDestroy",value:function(){this.delayedCallsManager.destroy()}},{key:"addRecurrenceIterators",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){return e.recurrenceIterators[t.frequency]=t}))}},{key:"getRecurrenceIteratorForTimeSpan",value:function(e){return this.recurrenceIterators[e.recurrence.frequency]}},{key:"buildOccurrencesForTimeSpan",value:function(e,t,n,r){var o=[];if(e.isRecurring&&e.startDate){var i=e.recurrence,a=this.getRecurrenceIteratorForTimeSpan(e),u=e.exceptionDates?e.exceptionDates.reduce((function(e,t){return e[t.getTime()]=!0,e}),{}):{};a.forEachDate({recurrence:i,startDate:t,endDate:n,fn:function(t){u[t.getTime()]||r&&e.getOccurrenceByStartDate(t)||o.push(e.buildOccurrence(t))}})}return o}},{key:"mergeDelayedCallEntries",value:function(e){for(var t,n,r,o,i,a=e.entries,u={},c=0;c<a.length;c++){var s=JI(i=a[c],3);r=s[0],t=s[1],n=s[2];for(var l=0;l<r.length;l++){var f=u[(o=r[l]).id];f?(f[1]>t&&(f[1]=t),f[2]<n&&(f[2]=n)):u[o.id]=[[o]].concat(ZI(i.slice(1)))}}a=Object.values(u);for(var d={},p=0;p<a.length;p++){var h=JI(i=a[p],3);o=h[0],t=h[1],n=h[2];var y=(t?t.getTime():"")+"-"+(n?n.getTime():"");d[y]?d[y][0]=d[y][0].concat(o):d[y]=i}e.entries=Object.values(d)}},{key:"regenerateOccurrencesForTimeSpansBuffered",value:function(e,t,n){var r=this;return Array.isArray(e)||(e=[e]),(e=e.filter((function(e){return e.isRecurring}))).length?new Promise(function(){var o=KI(regeneratorRuntime.mark((function o(i,a){var u;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.delayedCallsManager.execute({id:"regenerateOccurrences",beforeFn:r.mergeDelayedCallEntries,args:[e,t,n],fn:function(e,t,n,o){var i=e.toRemove=e.toRemove||[];i.push.apply(i,ZI(r.getOccurrencesForTimeSpans(t))),e.added=r.generateOccurrencesForTimeSpans(t,n,o,!1)},afterFn:function(e){var t=e.toRemove;t.length&&(e.removed=r.remove(t))}});case 2:u=o.sent,i({added:u.added,removed:u.removed});case 4:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}()):Promise.resolve()}},{key:"generateOccurrencesForTimeSpansBuffered",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this;return Array.isArray(e)||(e=[e]),(e=e.filter((function(e){return e.isRecurring}))).length?new Promise(function(){var i=KI(regeneratorRuntime.mark((function i(a){var u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o.delayedCallsManager.execute({id:"generateOccurrences",beforeFn:o.mergeDelayedCallEntries,args:[e,t,n,r],fn:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.added=o.generateOccurrencesForTimeSpans.apply(o,n)}});case 2:u=i.sent,a({added:u.added});case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()):Promise.resolve()}},{key:"generateOccurrencesForTimeSpans",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=[];if(e){var i=this,a=[];if(Array.isArray(e)||(e=[e]),e.length){for(var u=0;u<e.length;u++){var c=e[u],s=void 0,l=void 0,f=void 0;(a=i.buildOccurrencesForTimeSpan(c,t,n,r))&&(t<=(f=c.startDate)&&(l=a.shift())&&(s=l.startDate)-f&&(c.setStartEndDate(s,l.endDate),c.recurrence.sanitize()),o.push.apply(o,ZI(a)))}o.length&&i.add(o)}}return o}},{key:"generateOccurrencesForAll",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.getRecurringTimeSpans(),i=[];return o.length&&(r.trigger("generateOccurrencesAllStart",{timeSpans:o,startDate:e,endDate:t,preserveExisting:n}),i=r.generateOccurrencesForTimeSpans(o,e,t,n),r.trigger("generateOccurrencesAllEnd",{timeSpans:o,startDate:e,endDate:t,preserveExisting:n})),i}},{key:"getRecurringTimeSpans",value:function(){return this.query((function(e){return e.supportsRecurring&&e.isRecurring}))}},{key:"getOccurrencesForTimeSpans",value:function(e){var t=this,n=[];if(Array.isArray(e)||(e=[e]),e.length)for(var r=function(r){var o=e[r].id;n.push.apply(n,ZI(t.query((function(e){return e.supportsRecurring&&e.recurringTimeSpanId==o}))))},o=0;o<e.length;o++)r(o);return n}},{key:"getOccurrencesForAll",value:function(){return this.query((function(e){return e.supportsRecurring&&e.isOccurrence}))}},{key:"removeOccurrencesForTimeSpans",value:function(e){return this.remove(this.getOccurrencesForTimeSpans(e))}},{key:"removeOccurrencesForAll",value:function(){return this.remove(this.getOccurrencesForAll())}},{key:"onDelayedRegenerateOccurrencesFinish",value:function(){this.trigger("occurrencesReady")}},{key:"onDelayedGenerateOccurrencesFinish",value:function(){this.trigger("occurrencesReady")}},{key:"supportsRecurringTimeSpans",get:function(){return!0}},{key:"delayedCallTimeout",get:function(){return isNaN(this._delayedCallTimeout)?100:this._delayedCallTimeout},set:function(e){this._delayedCallTimeout=e}},{key:"delayedCallsManager",get:function(){return this._delayedCallsManager=this._delayedCallsManager||new nI({delayedCallTimeout:this.delayedCallTimeout}),this._delayedCallsManager}}])&&eF(n.prototype,r),o&&eF(n,o),t}(e||Y)};function iF(e){return(iF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cF(e,t){return!t||"object"!==iF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sF(e,t,n){return(sF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lF(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function lF(e){return(lF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fF(e,t){return(fF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dF(e){return(dF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yF(e,t){return!t||"object"!==dF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gF(e,t,n){return(gF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vF(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function vF(e){return(vF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mF(e,t){return(mF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bF=function(e){function t(){return pF(this,t),yF(this,vF(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mF(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[{name:"startDate",type:"date"},{name:"endDate",type:"date"},{name:"duration",type:"number",allowNull:!0},{name:"durationUnit",type:"string",defaultValue:"d"},{name:"fullDuration",persist:!1},{name:"cls",defaultValue:""},"iconCls",{name:"style",type:"object"},{name:"name",type:"string"}]}}],(r=[{key:"afterConstruct",value:function(){gF(vF(t.prototype),"afterConstruct",this).call(this),this.normalize()}},{key:"normalize",value:function(){var e=this,t=e.startDate,n=e.endDate,r=e.duration,o=e.durationUnit,i=null!=r;t&&n&&!i?e.setData("duration",xt.diff(t,n,o,!0)):t&&!n&&i?e.setData("endDate",xt.add(t,r,o)):!t&&n&&i&&e.setData("startDate",xt.add(n,-r,o)),this.clearCachedValues()}},{key:"setDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.durationUnit,n={duration:e=parseFloat(e),durationUnit:t};this.startDate?n.endDate=xt.add(this.startDate,e,t):this.endDate&&(n.startDate=xt.add(this.endDate,-e,t)),this.set(n)}},{key:"setStartDate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r={startDate:e};if(e){var o;if(t)o=null!=n.duration;else if(n.endDate){if(r.duration=xt.diff(e,n.endDate,n.durationUnit,!0),r.duration<0)throw new Error("Negative duration")}else o=null!=this.duration;o&&(r.endDate=xt.add(e,n.duration,n.durationUnit))}else r.duration=null;n.set(r)}},{key:"setEndDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r={endDate:e};if(e){var o;if(!0===t)o=null!=n.duration;else if(n.startDate){if(r.duration=xt.diff(n.startDate,e,n.durationUnit,!0),r.duration<0)throw new Error("Negative duration")}else o=null!=this.duration;o&&(r.startDate=xt.add(e,-n.duration,n.durationUnit))}n.set(r)}},{key:"setStartEndDate",value:function(e,t){this.set({startDate:e,endDate:t})}},{key:"clearCachedValues",value:function(){this._startDateMS=null,this._endDateMS=null,this._isMilestone=null}},{key:"inSetNormalize",value:function(e){if("string"!=typeof e)return"duration"in(e=Object.assign({},e))?(e.startDate&&!e.endDate&&(e.endDate=xt.add(e.startDate,e.duration,e.durationUnit||this.durationUnit,!0,!0)),!e.startDate&&e.endDate&&(e.startDate=xt.add(e.endDate,-e.duration,e.durationUnit||this.durationUnit,!0,!0))):e.startDate&&e.endDate&&(e.duration=xt.diff(e.startDate,e.endDate,e.durationUnit||this.durationUnit,!0)),e}},{key:"inSet",value:function(e,n,r,o){return this.clearCachedValues(),e=this.inSetNormalize(e)||e,gF(vF(t.prototype),"inSet",this).call(this,e,n,r,o)}},{key:"forEachDate",value:function(e,t){return this.dates.forEach(e.bind(t))}},{key:"shift",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.durationUnit;if("string"==typeof e){var n=e;e=t,t=n}this.setStartDate(xt.add(this.startDate,e,t,!0),!0)}},{key:"fullCopy",value:function(){return this.copy.apply(this,arguments)}},{key:"intersects",value:function(e){return this.intersectsRange(e.startDate,e.endDate)}},{key:"intersectsRange",value:function(e,t){var n=this.startDate,r=this.endDate;return n&&r&&xt.intersectSpans(n,r,e,t)}},{key:"split",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=this,n=this.copy(),r=t.firstStore,o=r&&r.assignmentStore,i=t.duration*e,a=t.duration-i;if(e<=0||e>=1)throw new Error("Split point must be > 0 and < 1");return t.duration=i,n.startDate=t.endDate,n.duration=a,r&&r.add(n),o&&o.add(t.assignments.map((function(e){var t=Object.assign({},e.data,{eventId:n.id});return delete t.id,t}))),n}},{key:"cls",get:function(){return this._cls||(this._cls=new Nt(gF(vF(t.prototype),"get",this).call(this,"cls"))),this._cls},set:function(e){var t=this;t._cls?t._cls.value=e:t._cls=new Nt(e),t.set("cls",t._cls.value)}},{key:"startDate",get:function(){return this.get("startDate")},set:function(e){this.setStartDate(e)}},{key:"endDate",get:function(){return this.get("endDate")},set:function(e){this.setEndDate(e)}},{key:"duration",get:function(){return this.get("duration")},set:function(e){this.setDuration(e,this.durationUnit)}},{key:"durationUnit",get:function(){return this.get("durationUnit")}},{key:"fullDuration",get:function(){return new og({unit:this.durationUnit,magnitude:this.duration})},set:function(e){"string"==typeof e&&(e=xt.parseDuration(e,!0,this.durationUnit)),this.setDuration(e.magnitude,e.unit)}},{key:"dates",get:function(){for(var e=[],t=xt.startOf(this.startDate,"day"),n=this.endDate,r=t;r<n;r=xt.add(r,1,"day"))e.push(r);return e}},{key:"durationMS",get:function(){return this.endDate&&this.startDate?this.endDateMS-this.startDateMS:xt.asMilliseconds(this.duration||0,this.durationUnit)}},{key:"endDateMS",get:function(){var e=this;return null==e._endDateMS&&(e._endDateMS=e.endDate&&e.endDate.getTime()),e._endDateMS}},{key:"startDateMS",get:function(){var e=this;return null==e._startDateMS&&(e._startDateMS=e.startDate&&e.startDate.getTime()),e._startDateMS}},{key:"isMilestone",get:function(){return null==this._isMilestone&&(this._isMilestone=0===this.durationMS),this._isMilestone}},{key:"isScheduled",get:function(){return Boolean(this.startDate&&this.endDate&&this.hasValidDates)}},{key:"isValid",get:function(){var e=!0;if(e){var t=this.startDate,n=this.endDate;e=!t||!n||n-t>=0}return e}},{key:"hasValidDates",get:function(){var e=this.startDateMS,t=this.endDateMS;return!e||!t||t-e>=0}},{key:"wbsCode",get:function(){return this.indexPath.join(".")}}])&&hF(n.prototype,r),o&&hF(n,o),t}(qs);function wF(e){return(wF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OF(e,t){return!t||"object"!==wF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EF(e,t,n){return(EF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CF(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function CF(e){return(CF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xF(e,t){return(xF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}bF._$name="TimeSpan";function _F(e){return e?"string"==typeof e&&(e=e.split(",").map((function(e){return parseInt(e,10)}))):e=null,e}function jF(e){return e?"string"==typeof e&&(e=e.split(",")):e=null,e}function DF(e,t){return String(e)===String(t)}function RF(e){return this.defaultValue&&void 0===e?this.defaultValue:this.allowNull&&null==e?null:(e=parseInt(e),isNaN(e)&&(e=void 0),e)}var PF=function(e){function t(){return kF(this,t),OF(this,CF(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xF(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[{name:"frequency",defaultValue:"DAILY"},{name:"interval",defaultValue:1,convert:RF},{name:"endDate",type:"date"},{name:"count",allowNull:!0,convert:RF},{name:"days",convert:jF,isEqual:DF},{name:"monthDays",convert:_F,isEqual:DF},{name:"months",convert:_F,isEqual:DF},{name:"positions",convert:_F,isEqual:DF}]}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,r=e.rule,o=e.timeSpan;n._suspendedTimeSpanNotifying=0,delete e.timeSpan,delete e.rule,EF(CF(t.prototype),"construct",this).apply(this,arguments),r&&(n.suspendTimeSpanNotifying(),n.rule=r,n.resumeTimeSpanNotifying()),n.timeSpan=o}},{key:"sanitize",value:function(){var e=this,t=e.timeSpan,n=t&&t.startDate;switch(e.beginBatch(),e.isSanitizing=!0,e.frequency){case"DAILY":e.positions=null,e.days=null,e.monthDays=null,e.months=null;break;case"WEEKLY":e.positions=null,e.monthDays=null,e.months=null;var r=e.days;n&&r&&1==r.length&&r[0]==xI.encodeDay(n.getDay())&&(e.days=null);break;case"MONTHLY":e.monthDays&&e.monthDays.length&&(e.positions=null,e.days=null),e.months=null;var o=e.monthDays;n&&o&&1==o.length&&o[0]==n.getDate()&&(e.monthDays=null);break;case"YEARLY":e.monthDays=null;var i=e.months;n&&i&&1==i.length&&i[0]==n.getMonth()+1&&(e.months=null)}e.isSanitizing=!1,e.endBatch()}},{key:"copy",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=(e=EF(CF(t.prototype),"copy",this)).call.apply(e,[this].concat(r));return i.dateFormat=this.dateFormat,i.timeSpan=this.timeSpan,i}},{key:"afterChange",value:function(e,n,r){var o=EF(CF(t.prototype),"afterChange",this).call(this,e,n,r);this.isSanitizing||this.sanitize();var i=this.timeSpan;return i&&!this.isTimeSpanNotifyingSuspended&&i.onRecurrenceChanged(),o}},{key:"suspendTimeSpanNotifying",value:function(){this._suspendedTimeSpanNotifying++}},{key:"resumeTimeSpanNotifying",value:function(){this._suspendedTimeSpanNotifying&&this._suspendedTimeSpanNotifying--}},{key:"isRecurrenceModel",get:function(){return!0}},{key:"dateFormat",get:function(){return this._dateFormat||"YYYYMMDDTHHmmss"},set:function(e){this._dateFormat=e}},{key:"timeSpan",get:function(){return this._timeSpan},set:function(e){this._timeSpan=e}},{key:"rule",get:function(){var e=this,t=[];return e.frequency&&(t.push("FREQ=".concat(e.frequency)),e.interval>1&&t.push("INTERVAL=".concat(e.interval)),e.days&&e.days.length&&t.push("BYDAY="+e.days.join(",")),e.monthDays&&e.monthDays.length&&t.push("BYMONTHDAY="+e.monthDays.join(",")),e.months&&e.months.length&&t.push("BYMONTH="+e.months.join(",")),e.count&&t.push("COUNT=".concat(e.count)),e.endDate&&t.push("UNTIL="+xt.format(e.endDate,e.dateFormat)),e.positions&&e.positions.length&&t.push("BYSETPOS="+e.positions.join(","))),t.join(";")},set:function(e){var t=this;if(t.beginBatch(),e){for(var n=e.split(";"),r=0,o=n.length;r<o;r++){var i=n[r].split("="),a=i[1];switch(i[0]){case"FREQ":t.frequency=a;break;case"INTERVAL":t.interval=a;break;case"COUNT":t.count=a,t.until=null;break;case"UNTIL":t.endDate=a?xt.parse(a,t.dateFormat):null,t.count=null;break;case"BYDAY":t.days=a;break;case"BYMONTHDAY":t.monthDays=a;break;case"BYMONTH":t.months=a;break;case"BYSETPOS":t.positions=a}}t.sanitize()}else t.set({frequency:null,interval:null,count:null,endDate:null,days:null,monthDays:null,months:null,positions:null});t.endBatch()}},{key:"count",get:function(){return this.get("count")},set:function(e){e&&(this.endDate=null),this.set("count",e)}},{key:"endDate",get:function(){return this.get("endDate")},set:function(e){e&&(this.count=null),this.set("endDate",e)}},{key:"isTimeSpanNotifyingSuspended",get:function(){return Boolean(this._suspendedTimeSpanNotifying)}}])&&SF(n.prototype,r),o&&SF(n,o),t}(qs);function TF(e){return(TF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IF(e,t){return!t||"object"!==TF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FF(e,t,n){return(FF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LF(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function LF(e){return(LF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NF(e,t){return(NF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}PF._$name="RecurrenceModel";function HF(e){if(e){var t=this.dateFormat;e=(e="string"==typeof e?e.split(","):e).map((function(e){return"string"==typeof e&&(e=xt.parse(e,t)),e}))}return e}function BF(e){return(BF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WF(e,t){return!t||"object"!==BF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $F(e){return($F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YF(e,t){return(YF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var GF=function(e){function t(){return zF(this,t),WF(this,$F(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YF(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[{name:"resourceId"},{name:"draggable",type:"boolean",persist:!1,defaultValue:!0},{name:"resizable",persist:!1,defaultValue:!0},"eventStyle","eventColor","milestoneWidth"]}},{key:"relationConfig",get:function(){return[{relationName:"resource",fieldName:"resourceId",store:"resourceStore",collectionName:"events"}]}}],(r=[{key:"forEachResource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=!0,r=!1,o=void 0;try{for(var i,a=this.resources[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;if(!1===e.call(t,u))return}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}},{key:"getResource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.resourceId,t=this,n=t.eventStore,r=n&&n.resourceStore;if(n&&e){var o=n.getResourcesForEvent(t);if(1==o.length)return o[0];if(o.length>1)throw new Error("Event::getResource() is not applicable for events with multiple assignments, please use Event::resources instead.");return null}if(r)return r?r.getById(e):null}},{key:"assign",value:function(e){var t=this.eventStore;e=qs.asId(e),t?t.assignEventToResource(this,e):this.resourceId=e}},{key:"unassign",value:function(e,t){var n=this,r=n.eventStore;e=qs.asId(e),n.meta.removingResource=t,r?r.unassignEventFromResource(n,e):n.resourceId==e&&(n.resourceId=null),n.meta.removingResource=null}},{key:"reassign",value:function(e,t){var n=this.eventStore;e=qs.asId(e),t=qs.asId(t),n?n.reassignEventFromResourceToResource(this,e,t):this.resourceId=t}},{key:"isAssignedTo",value:function(e){var t=this.eventStore;return e=qs.asId(e),t?t.isEventAssignedToResource(this,e):this.resourceId==e}},{key:"eventStore",get:function(){var e=this;return e._eventStore||(e._eventStore=e.stores&&e.stores.find((function(e){return e.isEventStore}))),e._eventStore}},{key:"resourceStore",get:function(){var e=this.eventStore;return e&&e.resourceStore}},{key:"assignmentStore",get:function(){var e=this.eventStore;return e&&e.assignmentStore}},{key:"resources",get:function(){return this.eventStore&&this.eventStore.getResourcesForEvent(this)||[]}},{key:"isEvent",get:function(){return!0}},{key:"isDraggable",get:function(){return this.draggable}},{key:"isResizable",get:function(){return!this.isMilestone&&this.resizable}},{key:"isPersistable",get:function(){var e=this.eventStore;return e&&e.isEventPersistable(this)}},{key:"recurringEvent",get:function(){return this.recurringTimeSpan}}])&&VF(n.prototype,r),o&&VF(n,o),t}(function(e){return function(e){function t(){return AF(this,t),IF(this,LF(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NF(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[{name:"recurringTimeSpanId"},{name:"recurrenceRule"},{name:"exceptionDates",convert:HF}]}}],(r=[{key:"setRecurrence",value:function(e,t,n){var r,o;e&&(e.isRecurrenceModel?r=e:"string"==typeof e?((r=new this.recurrenceModel).frequency=e,t&&(r.interval=t),n&&(n instanceof Date?r.endDate=n:r.count=n)):r=new this.recurrenceModel(e),r.timeSpan=this,o=r.rule),this.recurrence=r,this.recurrenceRule=o}},{key:"getOccurrenceByStartDate",value:function(e){var t,n;if(e){n=this.occurrences;for(var r=0;r<n.length;r++)if(n[r].startDate-e==0){t=n[r];break}}return t}},{key:"removeOccurrences",value:function(){var e=this.stores[0];return e&&e.removeOccurrencesForTimeSpans&&e.removeOccurrencesForTimeSpans(this)}},{key:"onRecurrenceChanged",value:function(){this.recurrenceRule=this.recurrence&&this.recurrence.rule||null}},{key:"buildOccurrence",value:function(e){var t=this.copy(null);return t.beginBatch(),t.setStartDate(e),t.recurringTimeSpanId=this.id,t.endBatch(),t}},{key:"afterChange",value:function(e,n,r){var o;"recurrenceRule"in n&&(this._recurrence=null);for(var i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];return(o=FF(LF(t.prototype),"afterChange",this)).call.apply(o,[this,e,n,r].concat(a))}},{key:"addExceptionDate",value:function(e){var t=this.exceptionDates||[];e&&(this.exceptionDates=t.concat(e))}},{key:"beforeStartDateChange",value:function(){this._startDateValue=this.startDate}},{key:"afterStartDateChange",value:function(){this._startDateValue-this.startDate&&this.exceptionDates&&(this.exceptionDates=null)}},{key:"supportsRecurring",get:function(){return!0}},{key:"recurrenceModel",get:function(){return this._recurrenceModel||PF},set:function(e){this._recurrenceModel=e}},{key:"recurrence",get:function(){var e=this,t=e.recurrenceRule;return!e._recurrence&&t&&(e._recurrence=new e.recurrenceModel({rule:t,timeSpan:e})),e._recurrence},set:function(e){var t,n=this;if(n.isOccurrence){var r=n.recurringTimeSpan;t=r&&r.recurrence,n.recurringTimeSpanId=null}e&&t&&(t.endDate=new Date(n.startDate-1)),n._recurrence=e,e?(e.timeSpan=n,n.recurrenceRule=e.rule):n.recurrenceRule=null}},{key:"isRecurring",get:function(){return this.recurrence&&!this.isOccurrence}},{key:"isOccurrence",get:function(){return Boolean(this.recurringTimeSpanId)}},{key:"recurringTimeSpan",get:function(){var e=this.recurringTimeSpanId,t=this.stores[0];return e&&t&&t.getById(e)}},{key:"occurrences",get:function(){var e=this.stores[0];return e&&e.getOccurrencesForTimeSpans&&e.getOccurrencesForTimeSpans(this)}}])&&MF(n.prototype,r),o&&MF(n,o),t}(e||bF)}());function UF(e){return(UF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KF(e,t){return!t||"object"!==UF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZF(e,t,n){return(ZF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=JF(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function JF(e){return(JF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QF(e,t){return(QF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}GF.exposeProperties(),GF._$name="EventModel";var eL=function(e){function t(){return qF(this,t),KF(this,JF(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QF(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{loadPriority:100,syncPriority:200,modelClass:GF,storeId:"events"}}}],(r=[{key:"construct",value:function(e){if(ZF(JF(t.prototype),"construct",this).call(this,e,!0),this.setupRecurringEvents(),this.modelClass!==GF&&!(this.modelClass.prototype instanceof GF))throw new Error("The model for the EventStore must subclass EventModel")}},{key:"append",value:function(e){this.add(e)}}])&&XF(n.prototype,r),o&&XF(n,o),t}(function(e){return function(e){function t(){return aF(this,t),cF(this,lF(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fF(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurringEventsMixin"}}],(r=[{key:"setupRecurringEvents",value:function(){return this.setupRecurringTimeSpans.apply(this,arguments)}},{key:"generateOccurrencesForEvents",value:function(){return this.generateOccurrencesForTimeSpans.apply(this,arguments)}},{key:"generateOccurrencesForEventsBuffered",value:function(){return this.generateOccurrencesForTimeSpansBuffered.apply(this,arguments)}},{key:"regenerateOccurrencesForEvents",value:function(){return this.regenerateOccurrencesForTimeSpans.apply(this,arguments)}},{key:"regenerateOccurrencesForEventsBuffered",value:function(){return this.regenerateOccurrencesForTimeSpansBuffered.apply(this,arguments)}},{key:"getRecurringEvents",value:function(){return this.getRecurringTimeSpans()}},{key:"getOccurrencesForEvents",value:function(e){return this.getOccurrencesForTimeSpans(e)}},{key:"removeOccurrencesForEvents",value:function(e){return this.removeOccurrencesForTimeSpans(e)}},{key:"isEventPersistable",value:function(e){return sF(lF(t.prototype),"isEventPersistable",this).call(this,e)&&(!e.supportsRecurring||!e.isOccurrence)}},{key:"supportsRecurringEvents",get:function(){return!0}}])&&uF(n.prototype,r),o&&uF(n,o),t}(oF(e||Y))}(qM(hd)));function tL(e){return(tL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oL(e,t){return!t||"object"!==tL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iL(e,t,n){return(iL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aL(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function aL(e){return(aL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uL(e,t){return(uL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}eL._$name="EventStore";var cL=function(e){function t(){return nL(this,t),oL(this,aL(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uL(e,t)}(t,e),n=t,o=[{key:"processData",value:function(e){var n;e.headerConfig&&(F.deprecate("Scheduler","4.0.0","ViewPreset headerConfig config replaced by headers config. See https://www.bryntum.com/docs/scheduler/#guides/upgrades/3.0.md"),e=Mt.assign({},e),this.normalizeHeaderConfig(e));for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(n=iL(aL(t),"processData",this)).call.apply(n,[this,e].concat(o))}},{key:"normalizeHeaderConfig",value:function(e){var t=e.headerConfig,n=e.columnLinesFor,r=e.mainHeaderLevel,o=e.headers=[];if(t.top&&("top"==n&&(e.columnLinesFor=0),"top"==r&&(e.mainHeaderLevel=0),o[0]=t.top),!t.middle)throw new Error("ViewPreset.headerConfig must be configured with a middle");"middle"==n&&(e.columnLinesFor=o.length),"middle"==r&&(e.mainHeaderLevel=o.length),o.push(t.middle),t.bottom&&(e.mainHeaderLevel=o.length-1,null==n?e.columnLinesFor=o.length-1:"bottom"==n&&(e.columnLinesFor=o.length),null==r&&(e.mainHeaderLevel=o.length-1),"bottom"==r&&(e.mainHeaderLevel=o.length),o.push(t.bottom))}},{key:"fields",get:function(){return[{name:"name",type:"string"},{name:"rowHeight",defaultValue:24},{name:"tickWidth",defaultValue:50},{name:"tickHeight",defaultValue:50},{name:"displayDateFormat",defaultValue:"HH:mm"},{name:"shiftUnit",defaultValue:"hour"},{name:"shiftIncrement",defaultValue:1},{name:"defaultSpan",defaultValue:12},"timeResolution","headers","mainHeaderLevel","columnLinesFor"]}}],(r=[{key:"construct",value:function(e){iL(aL(t.prototype),"construct",this).apply(this,arguments),this.normalizeUnits()}},{key:"generateId",value:function(e){var t=this,n=t.headers,r=[],o=Object.getPrototypeOf(t.data).id;if(!o){for(var i=n.length-1;i>=0;i--)r.push(i?n[i].unit:A.capitalizeFirstLetter(n[i].unit));o=r.join("And")}return e.includes(o)&&(o+="-".concat(t.tickWidth,"by").concat(t.tickHeight||t.tickWidth),e.includes(o)&&(o+="-".concat(t.bottomHeader.increment),e.includes(o)&&(o=ye.generateId("".concat(o,"-"))))),o}},{key:"normalizeUnits",value:function(){for(var e=this,t=e.timeResolution,n=e.headers,r=0,o=n.length;r<o;r++){var i=n[r];i.unit=xt.normalizeUnit(i.unit),i.splitUnit&&(i.splitUnit=xt.normalizeUnit(i.splitUnit)),"increment"in i||(n[r]=Object.assign({increment:1},i))}t&&(t.unit=xt.normalizeUnit(t.unit)),e.shiftUnit&&(e.shiftUnit=xt.normalizeUnit(e.shiftUnit))}},{key:"set",value:function(){}},{key:"inSet",value:function(){}},{key:"columnLinesFor",get:function(){return"columnLinesFor"in this.data?this.data.columnLinesFor:this.headers.length-1}},{key:"tickSize",get:function(){return this._tickSize||this.tickWidth}},{key:"tickWidth",get:function(){return"tickWidth"in this.data?this.data.tickWidth:50}},{key:"tickHeight",get:function(){return"tickHeight"in this.data?this.data.tickHeight:50}},{key:"headerConfig",get:function(){if(this.data.headerConfig)return this.data.headerConfig;var e={},t=this.headers;switch(t.length){case 1:e.middle=t[0];break;case 2:0===this.mainHeaderLevel?(e.middle=t[0],e.bottom=t[1]):(e.top=t[0],e.middle=t[1]);break;case 3:e.top=t[0],e.middle=t[1],e.bottom=t[2];break;default:throw new Error("headerConfig object not supported for >3 header levels")}return e}},{key:"mainHeaderLevel",set:function(e){this.data.mainHeaderLevel=e},get:function(){return"mainHeaderLevel"in this.data?this.data.mainHeaderLevel:3===this.data.headers.length?1:this.headers.length-1}},{key:"mainHeader",get:function(){return this.headers[this.mainHeaderLevel]}},{key:"bottomHeader",get:function(){return this.headers[this.headers.length-1]}},{key:"leafUnit",get:function(){return this.bottomHeader.unit}},{key:"mainUnit",get:function(){return this.mainHeader}},{key:"msPerPixel",get:function(){var e=this.bottomHeader;return Math.round(xt.asMilliseconds(e.increment||1,e.unit)/this.tickWidth)}},{key:"isValid",get:function(){var e=this,t=!0,n=!0,r=!1,o=void 0;try{for(var i,a=e.headers[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;t=t&&Boolean(xt.normalizeUnit(u.unit))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e.timeResolution&&(t=t&&xt.normalizeUnit(e.timeResolution.unit)),e.shiftUnit&&(t=t&&xt.normalizeUnit(e.shiftUnit)),t}}])&&rL(n.prototype,r),o&&rL(n,o),t}(qs);function sL(e){return(sL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dL(e,t){return!t||"object"!==sL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pL(e,t,n){return(pL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=yL(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function hL(e,t,n,r){return(hL="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=yL(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function yL(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gL(e)););return e}function gL(e){return(gL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vL(e,t){return(vL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}cL._$name="ViewPreset";var mL=function(e){function t(){return lL(this,t),dL(this,gL(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vL(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{useRawData:!0,modelClass:cL,zoomOrder:1}}}],(r=[{key:"createRecord",value:function(e){if(e.preset&&!e.base&&(F.deprecate("Scheduler","4.0.0","ViewPreset preset config replaced by base config. See https://www.bryntum.com/docs/scheduler/#guides/upgrades/3.0.md"),e.base=e.preset),e.base){var n=this.getById(e.base)||xL.getById(e.base);e=Object.setPrototypeOf(e,n.data)}return pL(gL(t.prototype),"createRecord",this).apply(this,arguments)}},{key:"updateLocalization",value:function(){var e=this;pL(gL(t.prototype),"updateLocalization",this).call(this),this.forEach((function(t){var n=e.L(t.id);n&&(n.displayDateFormat&&(t.displayDateFormat=n.displayDateFormat),n.middleDateFormat&&t.headerConfig.middle&&(t.headerConfig.middle.dateFormat=n.middleDateFormat),n.topDateFormat&&t.headerConfig.top&&(t.headerConfig.top.dateFormat=n.topDateFormat),n.bottomDateFormat&&t.headerConfig.bottom&&(t.headerConfig.bottom.dateFormat=n.bottomDateFormat))}))}},{key:"storage",set:function(e){var n=this;!function(e,t,n,r,o){if(!hL(e,t,n,r||e)&&o)throw new Error("failed to set property")}(gL(t.prototype),"storage",e,this,!0),this.storage.addSorter((function(e,t){var r=e.bottomHeader,o=t.bottomHeader;return(t.msPerPixel-e.msPerPixel||Ct[r.unit]-Ct[o.unit]||r.increment-o.increment)*n.zoomOrder}))},get:function(){return pL(gL(t.prototype),"storage",this)}}])&&fL(n.prototype,r),o&&fL(n,o),t}(ze(ed));function bL(e){return(bL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SL(e,t){return!t||"object"!==bL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OL(e,t,n){return(OL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EL(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function EL(e){return(EL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CL(e,t){return(CL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}mL._$name="PresetStore";var xL=new(function(e){function t(){return wL(this,t),SL(this,EL(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CL(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{preventSubClassingModel:!0,basePresets:{secondAndMinute:{name:"Seconds",tickWidth:30,tickHeight:40,displayDateFormat:"ll LTS",shiftIncrement:10,shiftUnit:"minute",defaultSpan:24,timeResolution:{unit:"second",increment:5},headers:[{unit:"minute",dateFormat:"llll"},{unit:"second",increment:10,dateFormat:"ss"}]},minuteAndHour:{name:"Minutes",tickWidth:60,tickHeight:60,displayDateFormat:"ll LT",shiftIncrement:1,shiftUnit:"hour",defaultSpan:24,timeResolution:{unit:"minute",increment:30},headers:[{unit:"hour",dateFormat:"ddd MM/DD, hA"},{unit:"minute",increment:30,dateFormat:"mm"}]},hourAndDay:{name:"Hours",tickWidth:70,tickHeight:40,displayDateFormat:"ll LT",shiftIncrement:1,shiftUnit:"day",defaultSpan:24,timeResolution:{unit:"minute",increment:30},headers:[{unit:"day",dateFormat:"ddd DD/MM"},{unit:"hour",dateFormat:"LT"}]},day:{name:"Hours 2",displayDateFormat:"LT",shiftIncrement:1,shiftUnit:"day",defaultSpan:1,timeResolution:{unit:"minute",increment:30},mainHeaderLevel:0,headers:[{unit:"day",dateFormat:"ddd DD/MM",splitUnit:"day"},{unit:"hour",renderer:function(e){return'\n                                    <div class="b-sch-calendarcolumn-ct"><span class="b-sch-calendarcolumn-hours">'.concat(xt.format(e,"HH"),'</span>\n                                    <span class="b-sch-calendarcolumn-minutes">').concat(xt.format(e,"mm"),"</span></div>\n                                ")}}]},week:{name:"Week/hours",displayDateFormat:"LT",shiftIncrement:1,shiftUnit:"week",defaultSpan:24,timeResolution:{unit:"minute",increment:30},mainHeaderLevel:0,headers:[{unit:"week",dateFormat:"D d",splitUnit:"day"},{unit:"hour",dateFormat:"LT",renderer:function(e){return'\n                                    <div class="sch-calendarcolumn-ct">\n                                    <span class="sch-calendarcolumn-hours">'.concat(xt.format(e,"HH"),'</span>\n                                    <span class="sch-calendarcolumn-minutes">').concat(xt.format(e,"mm"),"</span>\n                                    </div>\n                                ")}}]},dayAndWeek:{name:"Days 2",tickWidth:100,tickHeight:80,displayDateFormat:"ll LT",shiftUnit:"day",shiftIncrement:1,defaultSpan:5,timeResolution:{unit:"hour",increment:1},headers:[{unit:"week",renderer:function(e){return xt.getShortNameOfUnit("week")+"."+xt.format(e,"WW MMM YYYY")}},{unit:"day",dateFormat:"dd DD"}]},weekAndDay:{name:"Days",tickWidth:100,tickHeight:80,displayDateFormat:"ll hh:mm A",shiftUnit:"week",shiftIncrement:1,defaultSpan:1,timeResolution:{unit:"day",increment:1},mainHeaderLevel:0,headers:[{unit:"week",dateFormat:"YYYY MMMM DD"},{unit:"day",increment:1,dateFormat:"DD MMM"}]},weekAndMonth:{name:"Weeks",tickWidth:100,tickHeight:105,displayDateFormat:"ll",shiftUnit:"week",shiftIncrement:5,defaultSpan:6,timeResolution:{unit:"day",increment:1},headers:[{unit:"month",dateFormat:"MMM YYYY"},{unit:"week",dateFormat:"DD MMM"}]},weekAndDayLetter:{name:"Weeks 2",tickWidth:20,tickHeight:50,displayDateFormat:"ll",shiftUnit:"week",shiftIncrement:1,defaultSpan:10,timeResolution:{unit:"day",increment:1},mainHeaderLevel:0,headers:[{unit:"week",dateFormat:"ddd DD MMM YYYY",verticalColumnWidth:115},{unit:"day",dateFormat:"d1",verticalColumnWidth:25}]},weekDateAndMonth:{name:"Weeks 3",tickWidth:30,tickHeight:40,displayDateFormat:"ll",shiftUnit:"week",shiftIncrement:1,defaultSpan:10,timeResolution:{unit:"day",increment:1},headers:[{unit:"month",dateFormat:"YYYY MMMM"},{unit:"week",dateFormat:"DD"}]},monthAndYear:{name:"Months",tickWidth:110,tickHeight:110,displayDateFormat:"ll",shiftIncrement:3,shiftUnit:"month",defaultSpan:12,timeResolution:{unit:"day",increment:1},headers:[{unit:"year",dateFormat:"YYYY"},{unit:"month",dateFormat:"MMM YYYY"}]},year:{name:"Years",tickWidth:100,tickHeight:100,resourceColumnWidth:100,displayDateFormat:"ll",shiftUnit:"year",shiftIncrement:1,defaultSpan:1,timeResolution:{unit:"month",increment:1},headers:[{unit:"year",dateFormat:"YYYY"},{unit:"quarter",renderer:function(e,t,n){return xt.getShortNameOfUnit("quarter").toUpperCase()+(Math.floor(e.getMonth()/3)+1)}}]},manyYears:{name:"Years 2",tickWidth:40,tickHeight:50,displayDateFormat:"ll",shiftUnit:"year",shiftIncrement:1,defaultSpan:1,timeResolution:{unit:"year",increment:1},mainHeaderLevel:0,headers:[{unit:"year",dateFormat:"YYYY",increment:5},{unit:"year",dateFormat:"YY",increment:1}]}},defaultPresets:["manyYears",{width:80,increment:1,resolution:1,preset:"manyYears",resolutionUnit:"YEAR"},"year",{width:30,increment:1,resolution:1,preset:"year",resolutionUnit:"MONTH"},{width:50,increment:1,resolution:1,preset:"year",resolutionUnit:"MONTH"},{width:200,increment:1,resolution:1,preset:"year",resolutionUnit:"MONTH"},"monthAndYear","weekDateAndMonth","weekAndMonth","weekAndDayLetter","weekAndDay",{width:54,increment:1,resolution:1,preset:"weekAndDay",resolutionUnit:"HOUR"},"hourAndDay",{width:64,increment:6,resolution:30,preset:"hourAndDay",resolutionUnit:"MINUTE"},{width:100,increment:6,resolution:30,preset:"hourAndDay",resolutionUnit:"MINUTE"},{width:64,increment:2,resolution:30,preset:"hourAndDay",resolutionUnit:"MINUTE"},"minuteAndHour",{width:30,increment:15,resolution:5,preset:"minuteAndHour"},{width:130,increment:15,resolution:5,preset:"minuteAndHour"},{width:60,increment:5,resolution:5,preset:"minuteAndHour"},{width:100,increment:5,resolution:5,preset:"minuteAndHour"},"secondAndMinute",{width:60,increment:10,resolution:5,preset:"secondAndMinute"},{width:130,increment:5,resolution:5,preset:"secondAndMinute"}],listeners:{locale:"updateLocalization"}}}}],(r=[{key:"getById",value:function(e){return OL(EL(t.prototype),"getById",this).call(this,e)||this.basePresets[e]}},{key:"registerPreset",value:function(e,t){var n=this.createRecord(Object.assign({id:e},t)),r=this.find((function(e){return e.equals(n)}));if(r)return r;if(!n.isValid)throw new Error("Invalid preset, please check your configuration");return this.add(n),n}},{key:"getPreset",value:function(e){return"number"==typeof e&&(e=this.getAt(e)),"string"==typeof e?e=this.getById(e):e instanceof cL||(e=this.createRecord(e)),e}},{key:"normalizePreset",value:function(e){if(!(e instanceof cL))if("string"==typeof e){if(!(e=this.getPreset(e)))throw new Error("You must define a valid view preset. See PresetManager for reference")}else if("object"===bL(e)){if(e.base){var t=this.getById(e.base);if(!t)throw new Error("ViewPreset base '".concat(e.base,"' does not exist"));e=Mt.merge(Mt.clone(t.data),e)}e.id?e=this.createRecord(e):(e=this.createRecord(Mt.assign({},e))).id=e.generateId(e)}return e}},{key:"deletePreset",value:function(e){"string"==typeof e?e=this.getById(e):"number"==typeof e&&(e=this.getAt(e)),e&&(this.remove(e),delete this.basePresets[e.id])}},{key:"basePresets",set:function(e){var t=this._basePresets={};for(var n in e)e[n].id=n,t[n]=this.createRecord(e[n])},get:function(){return this._basePresets}},{key:"defaultPresets",set:function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],o="string"==typeof r,i=o?r:r.preset,a=void 0;if(o)a=this.basePresets[i];else{var u=Object.setPrototypeOf(Mt.clone(this.basePresets[i].data),{id:i}),c=u.timeResolution,s=u.headers[u.headers.length-1];u.id=void 0,"width"in r&&(u.tickWidth=r.width),"height"in r&&(u.tickHeight=r.height),"increment"in r&&(s.increment=r.increment),"resolution"in r&&(c.increment=r.resolution),"resolutionUnit"in r&&(c.unit=xt.getUnitByName(r.resolutionUnit)),a=this.createRecord(u)}this.add(a)}}}])&&kL(n.prototype,r),o&&kL(n,o),t}(mL));function _L(e){return(_L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function RL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TL(e,t){return!t||"object"!==_L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AL(e,t,n){return(AL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ML(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ML(e){return(ML=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IL(e,t){return(IL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var FL=function(e){function t(){return RL(this,t),TL(this,ML(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IL(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:bF,continuous:!0,originalContinuous:null,include:null,autoAdjust:!0,unit:null,increment:null,resolutionUnit:null,resolutionIncrement:null,weekStartDay:null,mainUnit:null,shiftUnit:null,shiftIncrement:1,adjustedStart:null,adjustedEnd:null,visibleTickStart:null,visibleTickEnd:null,defaultSpan:1,tickCache:{},viewPreset:null}}}],(r=[{key:"construct",value:function(e){var n=this;if(n.generateTicksValidatorFn=function(){return!0},AL(ML(t.prototype),"construct",this).call(this,e),n.originalContinuous=n.continuous,n.on({change:function(e){"filter"!==e.action&&n.trigger("reconfigure",{supressRefresh:!1})},refresh:function(){return n.trigger("reconfigure",{supressRefresh:!1})},endreconfigure:function(e){return n.trigger("reconfigure",e)}}),n.startDate)n.internalOnReconfigure(),n.trigger("reconfigure");else if(n.viewPreset){var r=n.getAdjustedDates(new Date);n.startDate=r.startDate,n.endDate=r.endDate}}},{key:"reconfigure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.getAdjustedDates(e.startDate,e.endDate);if(!1!==r.trigger("beforeReconfigure",{startDate:o.startDate,endDate:o.endDate,config:e})){if(r.trigger("beginReconfigure"),r._configuredStartDate=e.startDate,r._configuredEndDate=e.endDate,Object.assign(r,e),!1===r.internalOnReconfigure(n))return!1;r.trigger("endReconfigure",{suppressRefresh:t,config:e})}}},{key:"internalOnReconfigure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;t.isConfigured=!0;var n=t.getAdjustedDates(t.startDate,t.endDate,!0),r=t.getAdjustedDates(t.startDate,t.endDate),o=r.startDate,i=r.endDate;if(o>=i)throw new Error("Invalid start/end dates. Start date must less than end date. Start date: ".concat(o,". End date: ").concat(i,"."));var a=t.unit,u=t.increment||1,c=t.generateTicks(o,i,a,u);t.suspendEvents(),t.data=c;var s=t.count;if(0===s){if(e)return t.resumeEvents(),!1;throw new Error("Invalid time axis configuration or filter, please check your input data.")}t.startDate=t.first.startDate,t.resumeEvents();var l=t.last.endDate;t.isContinuous?(t.adjustedStart=n.startDate,t.adjustedEnd=xt.getNext(s>1?c[s-1].startDate:n.startDate,a,u,t.weekStartDay)):(t.adjustedStart=t.startDate,t.adjustedEnd=l);do{t.visibleTickStart=(t.startDate-t.adjustedStart)/(xt.asMilliseconds(a)*u),t.autoAdjust&&(t.visibleTickStart=Math.floor(t.visibleTickStart)),t.visibleTickStart>=1&&(t.adjustedStart=xt.getNext(t.adjustedStart,a,u,t.weekStartDay))}while(t.visibleTickStart>=1);do{t.visibleTickEnd=s-(t.adjustedEnd-l)/(xt.asMilliseconds(a)*u),s-t.visibleTickEnd>=1&&(t.adjustedEnd=xt.getNext(t.adjustedEnd,a,-1,t.weekStartDay))}while(s-t.visibleTickEnd>=1);t.updateTickCache(!0)}},{key:"setTimeSpan",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.getAdjustedDates(e,t),i=o.startDate,a=o.endDate;if(r.startDate-i!=0||r.endDate-a!=0)return r.reconfigure({startDate:i,endDate:a},!1,n)}},{key:"shift",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shiftUnit,n=this,r=n.startDate,o=n.endDate;n.isFiltered&&(r=n.allRecords[0].startDate,o=n.allRecords[n.allCount-1].endDate);var i=0;do{r=xt.add(r,e,t),o=xt.add(o,e,t)}while(i++<100&&!1===n.setTimeSpan(r,o,!0))}},{key:"shiftNext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shiftIncrement;this.shift(e)}},{key:"shiftPrevious",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shiftIncrement;this.shift(-e)}},{key:"filterBy",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,r=this;r.filters.clear(),AL(ML(t.prototype),"filterBy",this).call(this,(function(t,r){return e.call(n,t.data,r)})),0===r.count&&(r.trigger("invalidFilter"),r.clearFilters())}},{key:"triggerFilterEvent",value:function(e){e.filters.count?this.continuous=!1:this.continuous=this.originalContinuous,this.updateTickCache(),AL(ML(t.prototype),"triggerFilterEvent",this).call(this,e)}},{key:"getAdjustedDates",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;return e=e||r.startDate,t=t||xt.add(e,r.defaultSpan,r.mainUnit),r.autoAdjust||n?{startDate:r.floorDate(e,!1,r.autoAdjust?r.mainUnit:r.unit,1),endDate:r.ceilDate(t,!1,r.autoAdjust?r.mainUnit:r.unit,1)}:{startDate:e,endDate:t}}},{key:"floorDate",value:function(e,t,n,r){var o=this,i=(t=!1!==t)?xt.clone(o.startDate):null,a=r||o.resolutionIncrement,u=n||(t?o.resolutionUnit:o.mainUnit),c=function(e,t){return Math.floor(e/t)*t};if(t){var s=c(xt.diff(i,e,u),a);return xt.add(i,s,u)}var l=xt.clone(e);if("week"===u){var f=l.getDay()||7,d=o.weekStartDay||7;(l=xt.add(xt.startOf(l,"day"),f>=d?d-f:-(7-d+f),"day")).getDay()!==d&&23===l.getHours()&&(l=xt.add(l,1,"hour"))}else{l=xt.startOf(l,u);var p=["day","year"].includes(u)?1:0,h="day"===u?"date":u,y=c(xt.get(l,h)-p,a)+p;l=xt.set(l,h,y)}return l}},{key:"roundDate",value:function(e,t){var n=this,r=xt.clone(e),o=n.resolutionIncrement||1;switch(t=xt.clone(t||n.startDate),n.resolutionUnit){case"week":xt.startOf(r,"day");var i,a=r.getDay()-n.weekStartDay;return a<0&&(a=7+a),i=1===Math.round(a/7)?7-a:-a,xt.add(r,i,"day");case"month":var u=xt.diff(t,r,"month")+xt.as("month",r.getDay()/xt.daysInMonth(r)),c=Math.round(u/o)*o;return xt.add(t,c,"month");case"quarter":return xt.startOf(r,"month"),xt.add(r,"month",3-r.getMonth()%3);default:var s=xt.as(n.resolutionUnit,xt.diff(t,r)),l=xt.as(n.resolutionUnit,t.getTimezoneOffset()-r.getTimezoneOffset(),"minute"),f=Math.round((s+l)/o)*o;return xt.add(t,f-l,n.resolutionUnit)}}},{key:"ceilDate",value:function(e,t,n,r){t=!1!==t,r=r||(t?this.resolutionIncrement:1);var o=xt.clone(e),i=!1,a=n||(t?this.resolutionUnit:this.mainUnit);switch(a){case"minute":i=!xt.isStartOf(o,"minute");break;case"hour":i=!xt.isStartOf(o,"hour");break;case"day":case"date":i=!xt.isStartOf(o,"day");break;case"week":i=(o=xt.startOf(o,"day")).getDay()!==this.weekStartDay||!xt.isEqual(o,e);break;case"month":i=1!==(o=xt.startOf(o,"day")).getDate()||!xt.isEqual(o,e);break;case"quarter":i=(o=xt.startOf(o,"day")).getMonth()%3!=0||1!==o.getDate()||!xt.isEqual(o,e);break;case"year":i=0!==(o=xt.startOf(o,"day")).getMonth()||1!==o.getDate()||!xt.isEqual(o,e)}return i?xt.getNext(o,a,r,this.weekStartDay):o}},{key:"processExclusion",value:function(e,t,n){var r=this.include;return!!r&&Object.entries(r).some((function(r){var o=DL(r,2),i=o[0],a=o[1];if(!a)return!1;var u=a.from,c=a.to;if(xt.compareUnits("day",n)>=0&&xt.getLargerUnit(i)===n&&(u&&xt.set(e,i,u),c)){var s,l=n;"day"===n&&(l="date"),xt.set(t,(jL(s={},l,xt.get(t,l)-1),jL(s,i,c),s))}if(xt.compareUnits(i,n)>=0){var f="day"===i?e.getDay():xt.get(e,i);if(u&&f<u||c&&f>=c)return!0}}))}},{key:"initExclusion",value:function(){Object.entries(this.include).forEach((function(e){var t=DL(e,2),n=t[0],r=t[1];if(r){var o=r.from,i=r.to;r.lengthFactor=xt.getUnitToBaseUnitRatio(n,xt.getLargerUnit(n))/(i-o),r.lengthFactorExcl=xt.getUnitToBaseUnitRatio(n,xt.getLargerUnit(n))/(i-o-1),r.center=o+o/(r.lengthFactor-1)}}))}},{key:"generateTicks",value:function(e,t){var n,r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.unit,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.increment,u=this,c=[],s=Boolean(u.include),l=0,f=u.getAdjustedDates(e,t),d=f.startDate,p=f.endDate;for(u.tickCache={},s&&u.initExclusion();d<p;){if(n=xt.getNext(d,i,a,u.weekStartDay),!u.autoAdjust&&n>p&&(n=p),"hour"===i&&a>1&&c.length>0&&0===l){var h=c[c.length-1];0!=(l=(h.startDate.getHours()+a)%24-h.endDate.getHours())&&(n=xt.add(n,l,"hour"))}o=!1,s?(r=new Date(n.getTime()),o=u.processExclusion(d,n,i)):r=n,u.generateTicksValidatorFn(d)&&!o&&(c.push({id:c.length+1,startDate:d,endDate:n}),u.tickCache[d.getTime()]=c.length-1),d=r}return c}},{key:"getTickFromDate",value:function(e){var t,n,r,o,i=this.records,a=0,u=i.length-1;if(!i.length||e<i[0].startDate||e>i[u].endDate)return-1;if(this.isContinuous){for(;a<u;)e>i[t=a+u+1>>1].endDate?a=t+1:e<i[t].startDate?u=t-1:a=t;return r=(n=i[a]).startDate,o=n.endDate,e>r&&(a+=(e-r)/(o-r)),Math.min(Math.max(a,this.visibleTickStart),this.visibleTickEnd)}for(var c=0;c<=u;c++)if(e<=(o=i[c].endDate))return n=c+(e>(r=i[c].startDate)?(e-r)/(o-r):0)}},{key:"getDateFromTick",value:function(e,t){var n=this;if(e===n.visibleTickEnd)return n.endDate;var r=Math.floor(e),o=e-r,i=n.getAt(r);if(!i)return null;var a=0===r?n.adjustedStart:i.startDate,u=r===n.count-1&&n.isContinuous?n.adjustedEnd:i.endDate,c=xt.add(a,o*(u-a),"millisecond");return t&&(c=n[t+"Date"](c)),c}},{key:"updateTickCache",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;t.count?(t._start=t.first.startDate,t._end=t.last.endDate,t._startMS=t.startDate.getTime(),t._endMS=t.endDate.getTime()):t._start=t._end=t._startMs=t._endMS=null,e||(t.tickCache={},t.forEach((function(e,n){return t.tickCache[e.startDate.getTime()]=n})))}},{key:"dateInAxis",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n.startDate,o=n.endDate;if(n.isContinuous)return t?xt.betweenLesserEqual(e,r,o):xt.betweenLesser(e,r,o);for(var i,a,u,c=n.getCount(),s=0;s<c;s++)if(i=(u=n.getAt(s)).startDate,a=u.endDate,t&&e<=a||!t&&e<a)return e>=i;return!1}},{key:"timeSpanInAxis",value:function(e,t){var n=this;return t.getTime()===e.getTime()?this.dateInAxis(e,!0):n.isContinuous?xt.intersectSpans(e,t,n.startDate,n.endDate):e<n.startDate&&t>n.endDate||n.getTickFromDate(e)!==n.getTickFromDate(t)}},{key:"isTimeSpanInAxis",value:function(e){var t=this,n=e.startDateMS,r=e.endDateMS;return!(!n||!r)&&(r===n?this.dateInAxis(e.startDate,!0):t.isContinuous?r>t.startMS&&n<t.endMS:n<t.startMS&&r>t.endMS||t.getTickFromDate(e.startDate)!==t.getTickFromDate(e.endDate))}},{key:"forEachAuxInterval",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this,i=this.endDate,a=this.startDate,u=0;if(a>i)throw new Error("Invalid time axis configuration");for(;a<i;)t=xt.min(xt.getNext(a,e,n,this.weekStartDay),i),r.call(o,a,t,u),a=t,u++}},{key:"isTimeAxis",get:function(){return!0}},{key:"viewPreset",get:function(){return this._viewPreset},set:function(e){if(!((e=xL.getPreset(e))instanceof cL))throw new Error("TimeAxis must be configured with the ViewPreset instance that the Scheduler is using");this._viewPreset=e,Object.assign(this,{unit:e.bottomHeader.unit,increment:e.bottomHeader.increment||1,resolutionUnit:e.timeResolution.unit,resolutionIncrement:e.timeResolution.increment,mainUnit:e.mainHeader.unit,shiftUnit:e.shiftUnit,shiftIncrement:e.shiftIncrement||1,defaultSpan:e.defaultSpan||1,presetName:e.id,headers:e.headers})}},{key:"weekStartDay",set:function(e){this._weekStartDay=e},get:function(){return null==this._weekStartDay?xt.weekStartDay:this._weekStartDay}},{key:"resolution",get:function(){return{unit:this.resolutionUnit,increment:this.resolutionIncrement}},set:function(e){this.resolutionUnit=e.unit,this.resolutionIncrement=e.increment}},{key:"resolutionUnit",get:function(){return this._resolutionUnit},set:function(e){this._resolutionUnit=e}},{key:"resolutionIncrement",get:function(){return this._resolutionIncrement},set:function(e){this._resolutionIncrement=e||1}},{key:"mainUnit",set:function(e){this._mainUnit=e},get:function(){return this._mainUnit}},{key:"shiftUnit",set:function(e){this._shiftUnit=e},get:function(){return this._shiftUnit||this._mainUnit}},{key:"shiftIncrement",set:function(e){this._shiftIncrement=e},get:function(){return this._shiftIncrement||1}},{key:"unit",set:function(e){this._unit=e},get:function(){return this._unit}},{key:"increment",set:function(e){this._increment=e},get:function(){return this._increment}},{key:"defaultSpan",get:function(){return this._defaultSpan},set:function(e){this._defaultSpan=e}},{key:"isContinuous",get:function(){return!1!==this.continuous&&!this.filtered}},{key:"startDate",get:function(){return this._start||(this.first?new Date(this.first.startDate):null)},set:function(e){this._start=xt.parse(e)}},{key:"endDate",get:function(){return this._end||(this.last?new Date(this.last.endDate):null)},set:function(e){e&&(this._end=xt.parse(e))}},{key:"startMS",get:function(){return this._startMS}},{key:"endMS",get:function(){return this._endMS}},{key:"include",get:function(){return this._include},set:function(e){var t=this;t._include=e,t.continuous=!e,t.isConfiguring||(t.startDate=t._configuredStartDate,t.endDate=t._configuredEndDate,t.internalOnReconfigure(),t.trigger("includeChange"))}},{key:"visibleTickTimeSpan",get:function(){return this.isContinuous?this.visibleTickEnd-this.visibleTickStart:this.count}},{key:"ticks",get:function(){return this.records}}])&&PL(n.prototype,r),o&&PL(n,o),t}(ed);function LL(e){return(LL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NL(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function HL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zL(e,t){return!t||"object"!==LL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VL(e,t,n,r){return(VL="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=$L(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function WL(e,t,n){return(WL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=$L(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $L(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YL(e)););return e}function YL(e){return(YL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GL(e,t){return(GL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}FL._$name="TimeAxis";var UL=function(e){function t(){return HL(this,t),zL(this,YL(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GL(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{loadPriority:300,syncPriority:300,modelClass:BM}}}],(r=[{key:"add",value:function(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof qs||(e[n]=r=this.createRecord(r)),-1!==this.storage.findIndex("eventResourceKey",r.eventResourceKey,!0))throw new Error("Duplicate assignment Event: ".concat(r.eventId," to resource: ").concat(r.resourceId))}return WL(YL(t.prototype),"add",this).call(this,e)}},{key:"doDestroy",value:function(){this.eventStoreDetacher&&this.eventStoreDetacher(),this.resourceStoreDetacher&&this.resourceStoreDetacher(),WL(YL(t.prototype),"doDestroy",this).call(this)}},{key:"attachToEventStore",value:function(e){var t=this;t.eventStoreDetacher&&t.eventStoreDetacher(),e&&(t.eventStoreDetacher=e.on({remove:t.onEventRemove,resourcestorechange:t.onEventStoreResourceStoreChange,thisObj:t,prio:200})),t.isConfiguring||t.initRelations(!0),t.attachToResourceStore(e&&e.resourceStore)}},{key:"attachToResourceStore",value:function(e){var t=this;t.resourceStore=e,t.resourceStoreDetacher&&t.resourceStoreDetacher(),e&&(t.resourceStoreDetacher=e.on({remove:t.onResourceRemove,removeAll:t.onResourceRemoveAll,thisObj:t,prio:200}),t.isConfiguring||t.initRelations(!0))}},{key:"onEventStoreResourceStoreChange",value:function(e){var t=e.newResourceStore;this.attachToResourceStore(t)}},{key:"onEventRemove",value:function(e){var t=e.records,n=e.isMove,r=e.isCollapse;if(!n&&!r){var o=[];t.forEach((function(e){e.traverse((function(e){o.push.apply(o,NL(e.assignments))}))})),this.isRemovingEvent=!0,o.length&&this.remove(o),this.isRemovingEvent=!1}}},{key:"onResourceRemove",value:function(e){var t=e.records,n=e.isMove,r=e.isCollapse;if(!n&&!r){var o=[];t.forEach((function(e){e.traverse((function(e){o.push.apply(o,NL(e.assignments))}))})),o.length&&this.remove(o)}}},{key:"onResourceRemoveAll",value:function(){this.removeAll()}},{key:"mapAssignmentsForEvent",value:function(e,t,n){var r=Boolean(t),o=Boolean(n),i=qs.asId(e),a=this.relationCache.event&&this.relationCache.event[i];return a?(t=t||function(e){return e},n=n||function(){return!0},r||o?a.reduce((function(e,r){var o=t(r);return n(o)&&e.push(o),e}),[]):a):[]}},{key:"mapAssignmentsForResource",value:function(e,t,n){var r=Boolean(t),o=Boolean(n),i=qs.asId(e),a=this.relationCache.resource&&this.relationCache.resource[i];return a?(t=t||function(e){return e},n=n||function(){return!0},r||o?a.reduce((function(e,r){var o=t(r);return n(o)&&e.push(o),e}),[]):a):[]}},{key:"getAssignmentsForEvent",value:function(e){return e.assignments}},{key:"removeAssignmentsForEvent",value:function(e){return this.remove(e.assignments)}},{key:"getAssignmentsForResource",value:function(e){return this.mapAssignmentsForResource(e)}},{key:"removeAssignmentsForResource",value:function(e){this.remove(this.getAssignmentsForResource(e))}},{key:"getResourcesForEvent",value:function(e){return this.mapAssignmentsForEvent(e,(function(e){return e.resource}),(function(e){return Boolean(e)}))}},{key:"getEventsForResource",value:function(e){return this.mapAssignmentsForResource(e,(function(e){return e.event}),(function(e){return!!e}))}},{key:"assignEventToResource",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this,i=o.autoCommit;t=Array.isArray(t)?t:[t];var a=[];return o.autoCommit=!1,r&&e.resources&&e.resources.forEach((function(n){t.includes(n)||o.unassignEventFromResource(e,n)})),t.forEach((function(t){if(!o.isEventAssignedToResource(e,t)){var r=new o.modelClass({eventId:qs.asId(e),resourceId:qs.asId(t)});r=n(r),a.push(r)}})),a=o.add(a),o.autoCommit=i,a}},{key:"unassignEventFromResource",value:function(e,t){var n=[];if(!t)return this.removeAssignmentsForEvent(e);Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++)this.isEventAssignedToResource(e,t[r])&&n.push(this.getAssignmentForEventAndResource(e,t[r]));return this.remove(n)}},{key:"isEventAssignedToResource",value:function(e,t){var n=this.getResourcesForEvent(e),r=qs.asId(t);return n.some((function(e){return e.id==r}))}},{key:"getAssignmentForEventAndResource",value:function(e,t){return e=this.eventStore.getById(e),t=this.resourceStore.getById(t),this.records.find((function(n){return n.event==e&&n.resource==t}))}},{key:"storage",set:function(e){!function(e,t,n,r,o){if(!VL(e,t,n,r||e)&&o)throw new Error("failed to set property")}(YL(t.prototype),"storage",e,this,!0),this.storage.addIndex("eventResourceKey")},get:function(){return WL(YL(t.prototype),"storage",this)}},{key:"eventStore",get:function(){return this._eventStore},set:function(e){var t=this,n=t._eventStore;t._eventStore=e||null,t.attachToEventStore(t._eventStore),(n||e)&&n!==e&&t.trigger("eventStoreChange",{newEventStore:e,oldEventStore:n})}}])&&BL(n.prototype,r),o&&BL(n,o),t}(hd);function qL(e){return(qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZL(e,t){return!t||"object"!==qL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JL(e){return(JL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QL(e,t){return(QL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}UL._$name="AssignmentStore";var eN=function(e){function t(){return XL(this,t),ZL(this,JL(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QL(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[{name:"date",type:"date",format:"YYYY-MM-DD",persist:!0},{name:"weekday",type:"int"},{name:"overrideStartDate",type:"date",dateFormat:"YYYY-MM-DD"},{name:"overrideEndDate",type:"date",dateFormat:"YYYY-MM-DD"},{name:"type",defaultValue:"DAY"},{name:"isWorkingDay",type:"boolean",defaultValue:!1},{name:"cls"},{name:"name"},{name:"availability",persist:!0}]}}],(r=[{key:"clearDate",value:function(){this.set("date",null)}},{key:"getAvailability",value:function(e){var t=this;if(e)return t.get("availability");if(t.availabilityCache)return t.availabilityCache;var n=t.get("availability").map((function(e){return"string"==typeof e?t.parseInterval(e):e}));return t.verifyAvailability(n),t.availabilityCache=n}},{key:"verifyAvailability",value:function(e){var t=this;e.sort((function(e,t){return e.startTime-t.startTime})),e.forEach((function(n,r){if(n.startTime>n.endTime)throw new Error("Start time ".concat(xt.format(n.startTime,"HH:mm")," is greater than end time ").concat(xt.format(n.endTime,"HH:mm")));if(r>0&&e[r-1].endTime>n.startTime)throw new Error("Availability intervals should not intersect: [".concat(t.stringifyInterval(e[r-1]),"] and [").concat(t.stringifyInterval(n),"]"))}))}},{key:"stringifyInterval",value:function(e){var t=e.startTime,n=e.endTime;return xt.format(t,"HH:mm")+"-"+xt.format(n,"HH:mm")}},{key:"stringifyIntervals",value:function(e){var t=this;return e.map((function(e){return"string"==typeof e?e:t.stringifyInterval(e)}))}},{key:"parseInterval",value:function(e){var t=/(\d\d):(\d\d)-(\d\d):(\d\d)/.exec(e);if(!t)throw new Error("Invalid format for availability string: ".concat(String,". It should have exact format: hh:mm-hh:mm"));return{startTime:new Date(0,0,0,t[1],t[2]),endTime:new Date(0,0,0,t[3],t[4])}}},{key:"addAvailabilityInterval",value:function(e,t){var n;n=e instanceof Date?{startTime:e,endTime:t}:this.parseInterval(e+(t?"-"+t:""));var r=this.getAvailability().concat(n);this.verifyAvailability(r),this.setAvailability(r)}},{key:"removeAvailabilityInterval",value:function(e){var t=this.getAvailability();t.splice(e,1),this.setAvailability(t)}},{key:"getAvailabilityIntervalsFor",value:function(e){var t=(e="number"==typeof e?new Date(e):e).getFullYear(),n=e.getMonth(),r=e.getDate();return this.getAvailability().map((function(e){var o=e.endTime.getDate();return{startDate:new Date(t,n,r,e.startTime.getHours(),e.startTime.getMinutes()),endDate:new Date(t,n,r+(1==o?1:0),e.endTime.getHours(),e.endTime.getMinutes())}}))}},{key:"getAvailabilityStartFor",value:function(e){var t=this.getAvailabilityIntervalsFor(e);return t.length?t[0].startDate:null}},{key:"getAvailabilityEndFor",value:function(e){var t=this.getAvailabilityIntervalsFor(e);return t.length?t[t.length-1].endDate:null}},{key:"date",set:function(e){e&&(e=xt.startOf(e,"day")),this.set("date",e)},get:function(){return this.get("date")}},{key:"availability",get:function(){return this.get("availability")},set:function(e){this.availabilityCache=null,this.set("availability",this.stringifyIntervals(e)),this.getAvailability()}},{key:"totalHours",get:function(){return this.getTotalMS()/1e3/60/60}},{key:"totalMS",get:function(){return this.getAvailability().reduce((function(e,t){return e+(t.endTime-t.startTime)}),0)}}])&&KL(n.prototype,r),o&&KL(n,o),t}(qs);function tN(e){return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oN(e,t){return!t||"object"!==tN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iN(e,t,n){return(iN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aN(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function aN(e){return(aN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uN(e,t){return(uN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}eN._$name="CalendarDayModel";var cN=function(e){function t(){return nN(this,t),oN(this,aN(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uN(e,t)}(t,e),n=t,o=[{key:"getCalendar",value:function(e){return e instanceof t?e:ed.getStore(e)}},{key:"defaultConfig",get:function(){return{modelClass:eN,daysPerMonth:30,daysPerWeek:7,hoursPerDay:24,unitsInMs:null,defaultNonWorkingTimeCssCls:"b-nonworkingtime",weekendsAreWorkdays:!1,weekendFirstDay:6,weekendSecondDay:0,holidaysCache:null,availabilityIntervalsCache:null,daysIndex:null,weekAvailability:null,defaultWeekAvailability:null,nonStandardWeeksByStartDate:null,nonStandardWeeksStartDates:null,calendarId:null,parent:null,defaultAvailability:["00:00-24:00"],name:null,suspendCacheUpdate:0,availabilitySearchLimit:1825}}},{key:"allCalendars",get:function(){return(ed.stores||[]).filter((function(e){return e instanceof t}))}}],(r=[{key:"construct",value:function(e){var n=this;iN(aN(t.prototype),"construct",this).call(this,e),n.unitsInMs={MILLI:1,SECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:60*n.hoursPerDay*60*1e3,WEEK:n.daysPerWeek*n.hoursPerDay*60*60*1e3,MONTH:n.daysPerMonth*n.hoursPerDay*60*60*1e3,QUARTER:3*n.daysPerMonth*24*60*60*1e3,YEAR:12*n.daysPerMonth*24*60*60*1e3},n.defaultWeekAvailability=n.getDefaultWeekAvailability(),n.on({change:n.clearCache,thisObj:n}),n.clearCache()}},{key:"getDefaultWeekAvailability",value:function(){for(var e=this.defaultAvailability,t=this.weekendFirstDay,n=this.weekendSecondDay,r=[],o=0;o<7;o++)r.push(this.weekendsAreWorkdays||o!=t&&o!=n?new this.modelClass({type:"WEEKDAY",weekday:o,availability:e&&e.slice()||[],isWorkingDay:!0}):new this.modelClass({type:"WEEKDAY",weekday:o,availability:[]}));return r}},{key:"removeAll",value:function(){t.allCalendars.forEach((function(e){e.storeId=null,e.destroy()}))}},{key:"intersectsWithCurrentWeeks",value:function(e,t){var n=!1;return this.forEachNonStandardWeek((function(r){var o=r.startDate,i=r.endDate;if(o<=e&&e<i||o<t&&t<=i)return n=!0,!1})),n}},{key:"clearCache",value:function(){var e=this;if(!(e.suspendCacheUpdate>0)){e.holidaysCache={},e.availabilityIntervalsCache={};var t=e.daysIndex={},n=e.weekAvailability=[],r=e.nonStandardWeeksStartDates=[],o=e.nonStandardWeeksByStartDate={};e.forEach((function(e){var i,a,u=e.id,c=/^(\d)-(\d\d\d\d\/\d\d\/\d\d)-(\d\d\d\d\/\d\d\/\d\d)$/.exec(u),s=/^WEEKDAY:(\d+)$/.exec(u),l=e.type,f=e.weekday;if("WEEKDAYOVERRIDE"==l||c){if("WEEKDAYOVERRIDE"==l&&(i=e.overrideStartDate,a=e.overrideEndDate),c&&(i=xt.parse(c[2],"YYYY/MM/DD"),a=xt.parse(c[3],"YYYY/MM/DD"),f=c[1]),i&&a&&null!=f){var d=i-0;o[d]||(o[d]={startDate:new Date(i),endDate:new Date(a),name:e.getName(),weekAvailability:[],mainDay:null},r.push(d)),f>=0?o[d].weekAvailability[f]=e:o[d].mainDay=e}}else if("WEEKDAY"==l||s){if(s&&(f=s[1]),null!=f){if(f<0||f>6)throw new Error("Incorrect week day index");n[f]=e}}else{var p=e.date;p&&(t[p-0]=e)}})),r.sort((function(e,t){return e-t})),e.trigger("calendarChange")}}},{key:"addNonStandardWeek",value:function(e,t,n,r){if(e=xt.clearTime(e),t=xt.clearTime(t),this.intersectsWithCurrentWeeks(e,t))throw new Error("Can not add intersecting week");var o=this.modelClass,i=[];n.forEach((function(n,a){if(n instanceof eN)n.type="WEEKDAYOVERRIDE",n.overrideStartDate=e,n.overrideEndDate=t,n.weekday=a,n.name=r||"Week override",i.push(n);else if(Array.isArray(n)){var u=new o;u.type="WEEKDAYOVERRIDE",u.overrideStartDate=e,u.overrideEndDate=t,u.weekday=a,u.name=r||"Week override",u.setAvailability(n),i.push(u)}}));var a=new o;a.type="WEEKDAYOVERRIDE",a.overrideStartDate=e,a.overrideEndDate=t,a.weekday=-1,a.name=r||"Week override",i.push(a),this.add(i)}},{key:"getNonStandardWeekByStartDate",value:function(e){return this.nonStandardWeeksByStartDate[xt.clearTime(e)-0]||null}},{key:"removeNonStandardWeek",value:function(e){e=xt.clearTime(e)-0;var t=this.getNonStandardWeekByStartDate(e);t&&this.remove(U.clean(t.weekAvailability).concat(t.mainDay))}},{key:"getNonStandardWeekByDate",value:function(e){e=xt.clearTime(e)-0;for(var t=this.nonStandardWeeksStartDates,n=this.nonStandardWeeksByStartDate,r=0;r<t.length;r++){var o=n[t[r]];if(o.startDate>e)break;if(o.startDate<=e&&e<=o.endDate)return o}return null}},{key:"setWeekendsAreWorkDays",value:function(e){var t=this;e!==t.weekendsAreWorkdays&&(t.weekendsAreWorkdays=e,t.defaultWeekAvailability=t.getDefaultWeekAvailability(),t.clearCache())}},{key:"areWeekendsWorkDays",value:function(){return this.weekendsAreWorkdays}},{key:"forEachNonStandardWeek",value:function(e,t){for(var n=this.nonStandardWeeksStartDates,r=this.nonStandardWeeksByStartDate,o=0;o<n.length;o++)if(!1===e.call(t||this,r[n[o]]))return!1}},{key:"getCalendarDay",value:function(e){return e="number"==typeof e?new Date(e):e,this.getOverrideDay(e)||this.getWeekDay(e.getDay(),e)||this.getDefaultCalendarDay(e.getDay())}},{key:"getOverrideDay",value:function(e){return this.getOwnCalendarDay(e)||this.parent&&this.parent.getOverrideDay(e)||null}},{key:"getOwnCalendarDay",value:function(e){return e="number"==typeof e?new Date(e):e,this.daysIndex[xt.clearTime(e)-0]}},{key:"getWeekDay",value:function(e,t){if(t){var n=this.getNonStandardWeekByDate(t);if(n&&n.weekAvailability[e])return n.weekAvailability[e]}return this.weekAvailability[e]||this.parent&&this.parent.getWeekDay(e,t)||null}},{key:"isHoliday",value:function(e){var t=e-0,n=this.holidaysCache;if(null!=n[t])return n[t];e="number"==typeof e?new Date(e):e;var r=this.getCalendarDay(e);if(!r)throw new Error("Can't find day for "+e);return n[t]=!r.isWorkingDay}},{key:"getDefaultCalendarDay",value:function(e){return this.hasOwnProperty("defaultAvailability")||this.hasOwnProperty("weekendsAreWorkdays")||!this.parent?this.defaultWeekAvailability[e]:this.parent.getDefaultCalendarDay(e)}},{key:"isWorkingDay",value:function(e){return!this.isHoliday(e)}},{key:"isWeekend",value:function(e){var t=e.getDay();return t===this.weekendFirstDay||t===this.weekendSecondDay}},{key:"convertMSDurationToUnit",value:function(e,t){return e/this.unitsInMs[xt.getUnitByName(t)]}},{key:"convertDurationToMs",value:function(e,t){return e*this.unitsInMs[xt.getUnitByName(t)]}},{key:"forEachAvailabilityInterval",value:function(e,t,n){n=n||this;var r=e.startDate,o=e.endDate,i=!1!==e.isForward;if(i?!r:!o)throw new Error("At least `startDate` or `endDate` is required, depending from the `isForward` option");var a=new Date(i?r:o),u=xt;i?o||(o=u.add(r,e.availabilitySearchLimit||this.availabilitySearchLimit||1825,"day")):r||(r=u.add(o,-(e.availabilitySearchLimit||this.availabilitySearchLimit||1825),"day"));for(var c=!1;i?a<o:a>r;){for(var s=this.getAvailabilityIntervalsFor(a-(i?0:1),!!i&&c),l=i?0:s.length-1;i?l<s.length:l>=0;i?l++:l--){var f=s[l],d=f.startDate,p=f.endDate;if(!(d>=o||p<=r)){var h=d<r?r:d,y=p>o?o:p;if(!1===t.call(n,h,y))return!1}}a=i?u.getStartOfNextDay(a,!1,c):u.getEndOfPreviousDay(a,c),c=!0}}},{key:"calculateDuration",value:function(e,t,n){var r=0;return this.forEachAvailabilityInterval({startDate:e,endDate:t},(function(e,t){var n=e.getTimezoneOffset()-t.getTimezoneOffset();r+=t-e+60*n*1e3})),this.convertMSDurationToUnit(r,n)}},{key:"getHolidaysRanges",value:function(e,t,n){if(e>t)throw new Error("startDate can't be bigger than endDate");e=xt.clearTime(e),t=xt.clearTime(t);var r,o,i=[];for(o=e;o<t;o=xt.getNext(o,"day",1))if(this.isHoliday(o)||this.weekendsAreWorkdays&&n&&this.isWeekend(o)){var a=this.getCalendarDay(o),u=a&&a.cls||this.defaultNonWorkingTimeCssCls,c=xt.getNext(o,"day",1);r?r.cls.isEqual(u)?r.endDate=c:(i.push(r),r=new bF({startDate:o,endDate:c,cls:u})):r=new bF({startDate:o,endDate:c,cls:u})}else r&&(i.push(r),r=null);return r&&i.push(r),i}},{key:"calculateEndDate",value:function(e,t,n){if(!t)return new Date(e);var r,o=xt,i=0===(t=this.convertDurationToMs(t,n))&&o.clearTime(e,!0)-e==0?o.add(e,-1,"day"):e;return this.forEachAvailabilityInterval({startDate:i},(function(e,n){var o=n-e,i=e.getTimezoneOffset()-n.getTimezoneOffset();if(o>=t)return r=new Date(e-0+t),!1;t-=o+60*i*1e3})),r}},{key:"skipNonWorkingTime",value:function(e,t){var n=!1;if(this.forEachAvailabilityInterval(t?{startDate:e}:{endDate:e,isForward:!1},(function(r,o){return e=t?r:o,n=!0,!1})),!n)throw new Error("skipNonWorkingTime: Cannot skip non-working time, please ensure that this calendar has any working period of time specified");return new Date(e)}},{key:"calculateStartDate",value:function(e,t,n){return t?(t=this.convertDurationToMs(t,n),this.forEachAvailabilityInterval({endDate:e,isForward:!1},(function(e,n){var o=n-e;if(o>=t)return r=new Date(n-t),!1;t-=o})),r):new Date(e);var r}},{key:"skipWorkingTime",value:function(e,t,n){return t>=0?this.calculateEndDate(e,t,n):this.calculateStartDate(e,-t,n)}},{key:"isChildOf",value:function(e){for(var t=this,n=!1;t&&!n;)n=t===e,t=t.parent;return n}},{key:"getParentableCalendars",value:function(){var e=this;return t.getAllCalendars().reduce((function(t,n){return n===e||n.isChildOf(e)||t.push({id:n.calendarId,name:n.name||n.calendarId}),t}),[])}},{key:"getAvailabilityIntervalsFor",value:function(e,t){return e=t?e.valueOf():e instanceof Date?new Date(e.getFullYear(),e.getMonth(),e.getDate()).valueOf():xt.clearTime(new Date(e)).valueOf(),this.availabilityIntervalsCache[e]=this.availabilityIntervalsCache[e]||this.getCalendarDay(e).getAvailabilityIntervalsFor(e)}},{key:"onParentDestroy",value:function(){this.parent=null}},{key:"isAvailabilityIntersected",value:function(e,t,n){for(var r,o,i,a,u=0;u<7;u++)if(r=this.getWeekDay(u)||this.getDefaultCalendarDay(u),i=e.getWeekDay(u)||e.getDefaultCalendarDay(u),r&&i){o=r.getAvailability(),a=i.getAvailability();for(var c=0,s=o.length;c<s;c++)for(var l=0,f=a.length;l<f;l++)if(a[l].startTime<o[c].endTime&&a[l].endTime>o[c].startTime)return!0}var d=!1;return this.forEachNonStandardWeek((function(e){return!(e.startDate>=n)&&(t<e.endDate?(d=!0,!1):void 0)})),d}},{key:"calendarId",get:function(){return this._calendarId},set:function(e){var t=this;t._calendarId=e,t.storeId=null!=e?"GNT_CALENDAR:"+e:null,t.params=Object.assign(t.params||{},{calendarId:e})}},{key:"parent",set:function(e){var n=this,r=t.getCalendar(e);if(e&&!r)throw new Error("Invalid parent specified for the calendar");if(n.parent!=r){var o={calendarchange:n.clearCache,destroy:n.onParentDestroy,thisObj:n},i=n.parent;i&&i.un(o),n._parent=r,r&&r.on(o),n.params=Object.assign(n.params||{},{parentId:r?r.calendarId:null}),n.clearCache(),n.trigger("parentChange",{newParent:r,oldParent:i})}},get:function(){return this._parent}}])&&rN(n.prototype,r),o&&rN(n,o),t}(hd);function sN(e){return(sN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dN(e,t){return!t||"object"!==sN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pN(e){return(pN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hN(e,t){return(hN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}cN._$name="Calendar";var yN=function(e){return function(e){function t(){return lN(this,t),dN(this,pN(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hN(e,t)}(t,e),n=t,(r=[{key:"encode",value:function(e){return A.safeJsonStringify(e)}},{key:"decode",value:function(e){return A.safeJsonParse(e)}}])&&fN(n.prototype,r),o&&fN(n,o),t}(e||Y)};function gN(e){return(gN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bN(e,t){return!t||"object"!==gN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wN(e){return(wN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kN(e,t){return(kN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SN(e){return(SN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ON(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CN(e,t){return!t||"object"!==SN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xN(e){return(xN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _N(e,t){return(_N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jN=function(e){function t(){return ON(this,t),CN(this,xN(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_N(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[{name:"name",type:"string",persist:!0},"eventColor","eventStyle","imageUrl","image"]}}],(r=[{key:"getEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.eventStore;return e&&e.getEventsForResource(this)||[]}},{key:"isAbove",value:function(e){var t,n,r,o,i,a=this,u=a.resourceStore;if(a===e)return!1;if(u.tree){for(t=a,n=[];t;)n.push(t),t=t.parentNode;for(t=e,r=[];t;)r.push(t),t=t.parentNode;for(o=0;o<n.length-1&&o<r.length-1&&n[o]==r[o];)++o;return i=n[o],a=n[o+1],e=r[o+1],i.indexOf(a)<i.indexOf(e)}return u.indexOf(a)<u.indexOf(e)}},{key:"unassignAll",value:function(e){var t=this;this.events&&this.events.slice().forEach((function(n){return n.unassign(t,e)}))}},{key:"resourceStore",get:function(){return this.stores&&this.stores[0]}},{key:"eventStore",get:function(){var e=this.resourceStore;return e&&e.eventStore||this.parentNode&&this.parentNode.eventStore}},{key:"assignmentStore",get:function(){var e=this.eventStore;return e&&e.assignmentStore}},{key:"events",get:function(){return this.eventStore&&this.eventStore.getEventsForResource(this)}},{key:"isPersistable",get:function(){var e=this.parentNode;return!e||!e.phantom||e.isRoot&&e.isRoot()}}])&&EN(n.prototype,r),o&&EN(n,o),t}(XE);function DN(e){return(DN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TN(e,t){return!t||"object"!==DN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AN(e,t,n){return(AN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MN(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function MN(e){return(MN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IN(e,t){return(IN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}jN.exposeProperties(),jN._$name="ResourceModel";var FN=function(e){function t(){return RN(this,t),TN(this,MN(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IN(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{loadPriority:200,syncPriority:100,modelClass:jN,storeId:"resources",autoTree:!0}}}],(r=[{key:"construct",value:function(e){if(AN(MN(t.prototype),"construct",this).call(this,e),this.modelClass!==jN&&!(this.modelClass.prototype instanceof jN))throw new Error("Model for ResourceStore must subclass ResourceModel")}},{key:"remove",value:function(e){e=Array.isArray(e)?e:[e];var n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;this.getById(u).unassignAll(!0)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}AN(MN(t.prototype),"remove",this).call(this,e)}},{key:"removeAll",value:function(){this.traverse((function(e){return e.unassignAll(!0)})),AN(MN(t.prototype),"removeAll",this).call(this)}}])&&PN(n.prototype,r),o&&PN(n,o),t}(function(e){return function(e){function t(){return vN(this,t),bN(this,wN(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kN(e,t)}(t,e),n=t,(r=[{key:"getScheduledEventsInTimeSpan",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.eventStore;return this.reduce((function(r,o){r.concat(n.getEventsForResource(o).reduce((function(n,r){r.intersectsRange(e,t)&&n.push(r)})))}))}},{key:"eventStore",get:function(){return this._eventStore},set:function(e){var t=this;if(t._eventStore!==e){var n=t._eventStore;t._eventStore=e||null,e&&!e.resourceStore&&(e.resourceStore=t),t.trigger("eventStoreChange",{newEventStore:e,oldEventStore:n})}}}])&&mN(n.prototype,r),o&&mN(n,o),t}(e||Y)}(hd));function LN(e){return(LN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BN(e,t){return!t||"object"!==LN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zN(e,t,n){return(zN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VN(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function VN(e){return(VN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WN(e,t){return(WN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}FN._$name="ResourceStore";var $N=["SS","SF","FS","FF"],YN=function(e){function t(){return NN(this,t),BN(this,VN(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WN(e,t)}(t,e),n=t,o=[{key:"Type",get:function(){return{StartToStart:0,StartToEnd:1,EndToStart:2,EndToEnd:3}}},{key:"fields",get:function(){return[{name:"from"},{name:"to"},{name:"type",type:"int",defaultValue:2},{name:"cls",defaultValue:""},{name:"bidirectional",type:"boolean"},{name:"fromSide",type:"string"},{name:"toSide",type:"string"},{name:"lag",type:"number",allowNull:!0,defaultValue:0},{name:"lagUnit",type:"string",defaultValue:"d"}]}},{key:"relationConfig",get:function(){return[{relationName:"sourceEvent",fieldName:"from",store:"eventStore",collectionName:"successors"},{relationName:"targetEvent",fieldName:"to",store:"eventStore",collectionName:"predecessors"}]}}],(r=[{key:"construct",value:function(e){zN(VN(t.prototype),"construct",this).apply(this,arguments),e&&(e.from&&e.from instanceof bF&&(this.setSourceEvent(e.from),delete e.from),e.to&&e.to instanceof bF&&(this.setTargetEvent(e.to),delete e.to))}},{key:"getHardType",value:function(){return this.get("type")}},{key:"setHardType",value:function(e){var t;return e!==this.getHardType()&&(t=this.set({type:e,fromSide:null,toSide:null})),t}},{key:"setLag",value:function(e,t){1!==arguments.length?(e=parseFloat(e),this.set({lag:e,lagUnit:t})):"number"==typeof e?this.lag=e:(e=xt.parseDuration(e),this.set({lag:e.magnitude,lagUnit:e.unit}))}},{key:"getLag",value:function(){return this.lag?"".concat(this.lag<0?"-":"+").concat(Math.abs(this.lag)).concat(xt.getShortNameOfUnit(this.lagUnit)):""}},{key:"getSourceEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.eventStore;return!e&&this.unjoinedStores.length&&(e=this.leftProjectEventStore),e&&e.getById(this.from)}},{key:"getTargetEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.eventStore;return!e&&this.unjoinedStores.length&&(e=this.leftProjectEventStore),e&&e.getById(this.to)}},{key:"getDateRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.sourceEvent,r=this.targetEvent;if(n&&r&&n.isScheduled&&r.isScheduled){var o,i,a=t.Type;switch(this.type){case a.StartToStart:o=n.startDate,i=r.startDate;break;case a.StartToEnd:o=n.startDate,i=r.endDate;break;case a.EndToEnd:o=n.endDate,i=r.endDate;break;case a.EndToStart:o=n.endDate,i=r.startDate}return{start:e?o:xt.min(o,i),end:e?i:xt.max(o,i)}}return null}},{key:"highlight",value:function(e){var t=this.highlighted?this.highlighted.split(" "):[];t.includes(e)||(this.highlighted=t.concat(e).join(" "))}},{key:"unhighlight",value:function(e){var t=this.highlighted;if(t){var n=t.split(" "),r=n.findIndex((function(t){return t===e}));r>=0&&(n.splice(r,1),this.highlighted=n.join(" "))}}},{key:"isHighlightedWith",value:function(e){var t=this.highlighted;return t&&t.split(" ").includes(e)}},{key:"getConnectorString",value:function(e){var n=$N[this.type];if(e)return n;if(this.type===t.Type.EndToStart)return"";var r=Te.locale;if(r){var o=r.Scheduler&&r.Scheduler[n];if(o)return o}return n}},{key:"toString",value:function(){return"".concat(this.from).concat(this.getConnectorString()).concat(this.getLag())}},{key:"isValid",value:function(e){var t=this.from,n=this.to;return"number"==typeof this.type&&t&&""!==t&&null!=n&&""!==n&&t!==n}},{key:"eventStore",get:function(){var e=this.stores,t=this.unjoinedStores;return e[0]&&e[0].eventStore||t[0]&&t[0].eventStore}},{key:"hardType",get:function(){return this.getHardType()},set:function(e){this.setHardType(e)}},{key:"lag",get:function(){return this.get("lag")},set:function(e){"number"==typeof e?this.set({lag:e}):this.setLag(e)}},{key:"fullLag",get:function(){return{unit:this.lagUnit,magnitude:this.lag}},set:function(e){"string"==typeof e?this.setLag(e):this.setLag(e.magnitude,e.unit)}},{key:"sourceEvent",set:function(e){this.from=e.id}},{key:"targetEvent",set:function(e){this.to=e.id}},{key:"isPersistable",get:function(){var e,t=this.stores,n=this.unjoinedStores,r=t[0];if(r){var o=this.getSourceEvent(),i=this.getTargetEvent(),a=r.crudManager;e=o&&(a||!o.hasGeneratedId)&&i&&(a||!i.hasGeneratedId)}else e=Boolean(n[0]);return e}}])&&HN(n.prototype,r),o&&HN(n,o),t}(qs);function GN(e){return(GN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XN(e,t){return!t||"object"!==GN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KN(e){return(KN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZN(e,t){return(ZN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}YN.exposeProperties(),YN._$name="DependencyBaseModel";var JN=function(e){function t(){return UN(this,t),XN(this,KN(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZN(e,t)}(t,e),n=t,(r=[{key:"getTypeFromSides",value:function(e,t,n){var r=YN.Type,o=n?"right":"left",i=n?"left":"right";return e===o?t===o?r.StartToStart:r.StartToEnd:t===i?r.EndToEnd:r.EndToStart}}])&&qN(n.prototype,r),o&&qN(n,o),t}(YN);function QN(e){return(QN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eH(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function tH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rH(e,t){return!t||"object"!==QN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oH(e,t,n){return(oH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iH(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function iH(e){return(iH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aH(e,t){return(aH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}JN.exposeProperties(),JN._$name="DependencyModel";var uH=function(e){function t(){return tH(this,t),rH(this,iH(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aH(e,t)}(t,e),n=t,o=[{key:"makeDependencySourceTargetCompositeKey",value:function(e,t){return"source(".concat(e,")-target(").concat(t,")")}},{key:"defaultConfig",get:function(){return{loadPriority:400,syncPriority:400,modelClass:JN,storeId:"dependencies"}}}],(r=[{key:"doDestroy",value:function(){this.eventStoreDetacher&&this.eventStoreDetacher(),oH(iH(t.prototype),"doDestroy",this).call(this)}},{key:"attachToEventStore",value:function(e){var t=this;t.eventStoreDetacher&&t.eventStoreDetacher(),t.eventStoreDetacher=e.on({remove:t.onEventRemove,thisObj:t,detachable:!0})}},{key:"onEventRemove",value:function(e){var t=this,n=e.records,r=e.isMove,o=void 0!==r&&r,i=e.isCollapse;o||void 0!==i&&i||n.forEach((function(e){e.traverse((function(e){return t.removeEventDependencies(e,!1)}))}))}},{key:"reduceEventDependencies",value:function(e,t,n){var r=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0;return i=i||function(e){return r.getEventDependencies(e)},(e=Array.isArray(e)?e:[e]).reduce((function(e,n){n.children&&!o?n.traverse((function(n){e=i(n).reduce(t,e)})):e=i(n).reduce(t,e)}),n),n}},{key:"reduceEventPredecessors",value:function(e,t,n,r){return this.reduceEventDependencies(e,t,n,r,(function(e){}))}},{key:"reduceEventSuccessors",value:function(e,t,n,r){return this.reduceEventDependencies(e,t,n,r,(function(e){}))}},{key:"mapEventDependencies",value:function(e,t,n,r,o){return this.reduceEventDependencies(e,(function(e,t){return n(t)&&e.push(t),e}),[],r,o)}},{key:"mapEventPredecessors",value:function(e,t,n,r){return this.reduceEventPredecessors(e,(function(e,t){return n(t)&&e.push(t),e}),[],r)}},{key:"mapEventSuccessors",value:function(e,t,n,r){return this.reduceEventSuccessors(e,(function(e,t){return n(t)&&e.push(t),e}),[],r)}},{key:"getEventDependencies",value:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],[].concat(e.predecessors||[],e.successors||[])}},{key:"getEventPredecessors",value:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.predecessors}},{key:"getEventSuccessors",value:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.successors}},{key:"getUnique",value:function(e){return eH(new Set(e))}},{key:"removeEventDependencies",value:function(e,t){var n=this.getEventDependencies(e,t);n.length&&this.remove(this.getUnique(n))}},{key:"removeEventPredecessors",value:function(e,t){var n=this.getEventPredecessors(e,t);n.length&&this.remove(this.getUnique(n))}},{key:"removeEventSuccessors",value:function(e,t){var n=this.getEventSuccessors(e,t);n.length&&this.remove(this.getUnique(n))}},{key:"getBySourceTargetId",value:function(e){return this.records.find((function(n){return e==t.makeDependencySourceTargetCompositeKey(n.from,n.to)}))}},{key:"getDependencyForSourceAndTargetEvents",value:function(e,n){return e=qs.asId(e),n=qs.asId(n),this.getBySourceTargetId(t.makeDependencySourceTargetCompositeKey(e,n))}},{key:"getEventsLinkingDependency",value:function(e,t){return this.getDependencyForSourceAndTargetEvents(e,t)||this.getDependencyForSourceAndTargetEvents(t,e)}},{key:"isValidDependency",value:function(e,t,n){return 1===arguments.length&&(n=e.type,t=e.to,e=e.from),null!=e&&null!=t&&e!==t}},{key:"isValidDependencyToCreate",value:function(e,t,n){return this.isValidDependency(e,t,n)}},{key:"getHighlightedDependencies",value:function(e){return this.records.reduce((function(t,n){return n.isHighlightedWith(e)&&t.push(n),t}),[])}},{key:"getTimeSpanDependencies",value:function(e){return this.getEventDependencies(e)}},{key:"eventStore",get:function(){return this._eventStore},set:function(e){var t=this,n=t._eventStore;t._eventStore=e,e&&(t.attachToEventStore(e),t.isConfiguring||t.initRelations(!0)),(n||e)&&n!==e&&t.trigger("eventStoreChange",{newEventStore:e,oldEventStore:n})}}])&&nH(n.prototype,r),o&&nH(n,o),t}(hd);function cH(e){return(cH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fH(e,t){return!t||"object"!==cH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dH(e,t,n){return(dH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pH(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pH(e){return(pH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hH(e,t){return(hH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}uH._$name="DependencyStore";var yH=function(e){function t(){return sH(this,t),fH(this,pH(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hH(e,t)}(t,e),n=t,o=[{key:"getEventStoreInfo",value:function(e,t){e instanceof eL||(e="string"==typeof e?ed.getStore(e):e.store);var n={},r=t.assignmentStore,o=t.resourceStore,i=t.dependencyStore;return!r&&(n.assignmentStore=e.assignmentStore),!o&&(n.resourceStore=e.resourceStore),!i&&(n.dependencyStore=e.dependencyStore),n}},{key:"defaultConfig",get:function(){return{resourceStoreClass:FN,eventStoreClass:eL,assignmentStoreClass:UL,dependencyStoreClass:uH,resourceStore:{},eventStore:{},assignmentStore:null,dependencyStore:null,addRelatedStores:!0}}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.scheduler&&(this.scheduler=e.scheduler,this.scheduler._crudManager=this),dH(pH(t.prototype),"construct",this).call(this,e)}},{key:"afterConstruct",value:function(){var e=this,n=e.scheduler;if(n){(n.isVertical||n.isHorizontal&&!n.store)&&(n.resourceStore=e.resourceStore,n.eventStore=e.eventStore);var r=n.features,o=r.dependencies,i=r.timeRanges,a=r.resourceTimeRanges;o&&(e.dependencyStore=o.dependencyStore),i&&(e.addCrudStore(i.store),e._timeRangesStore=i.store),a&&(e.addCrudStore(a.store),e._resourceTimeRangesStore=a.store)}dH(pH(t.prototype),"afterConstruct",this).call(this)}},{key:"addFeaturedStore",value:function(e){this.addPrioritizedStore(e)}},{key:"setFeaturedStore",value:function(e,t,n){var r=this,o=r[e];return t=ed.getStore(t,t&&t.storeClass||n),o&&r.removeStore(o),r[e]=t&&{store:t}||null,r.addFeaturedStore(r[e]),r[e]}},{key:"timeRangesStore",get:function(){return this._timeRangesStore}},{key:"resourceStore",get:function(){return this._resourceStore&&this._resourceStore.store},set:function(e){var t=this;t.setFeaturedStore("_resourceStore",e,t.resourceStoreClass),t.eventStore.resourceStore=t._resourceStore&&t._resourceStore.store}},{key:"eventStore",get:function(){return this._eventStore&&this._eventStore.store},set:function(e){var n=this;if(n.setFeaturedStore("_eventStore",e,n.eventStoreClass),e=n._eventStore&&n._eventStore.store,n.isConfiguring&&e&&!1!==n.addRelatedStores){var r=t.getEventStoreInfo(e,n.initialConfig),o=r.assignmentStore,i=r.resourceStore,a=r.dependencyStore;o&&(n.assignmentStore=o),i&&(n.resourceStore=i),a&&(n.dependencyStore=a)}}},{key:"assignmentStore",get:function(){return this._assignmentStore&&this._assignmentStore.store},set:function(e){this.setFeaturedStore("_assignmentStore",e,this.assignmentStoreClass)}},{key:"dependencyStore",get:function(){return this._dependencyStore&&this._dependencyStore.store},set:function(e){this.setFeaturedStore("_dependencyStore",e,this.dependencyStoreClass)}}])&&lH(n.prototype,r),o&&lH(n,o),t}(yN(XA(bM)));function gH(e){return(gH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bH(e,t){return!t||"object"!==gH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wH(e,t,n){return(wH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kH(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kH(e){return(kH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SH(e,t){return(SH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yH._$name="CrudManager";var OH=function(e){function t(){return vH(this,t),bH(this,kH(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SH(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ColumnLines"}},{key:"properties",get:function(){return{tickColor:"#e6e6e6",majorTickColor:"#999",tickStyle:"solid",majorTickStyle:"solid"}}},{key:"pluginConfig",get:function(){return{after:["render","updateCanvasSize"]}}}],(r=[{key:"construct",value:function(e,n){e.useBackgroundCanvas=!0,wH(kH(t.prototype),"construct",this).call(this,e,n),this.timeAxisViewModel=e.timeAxisViewModel,e.on({theme:"onThemeChange",thisObj:this})}},{key:"doDestroy",value:function(){this.timeAxisViewModelDetatcher&&this.timeAxisViewModelDetatcher(),wH(kH(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){this.isConfiguring||(e?(xn.removeEachSelector(this.client.backgroundCanvas,".b-column-line-major"),this.client.backgroundCanvas.style.backgroundImage="none"):this.drawLines()),wH(kH(t.prototype),"doDisable",this).call(this,e)}},{key:"getColorsFromCSS",value:function(){var e=this;if(!e.GotColors){var t=xn.createElement({style:"position: absolute; visibility: hidden",html:'<div class="b-column-line"></div><div class="b-column-line-major"></div>',parent:document.body}),n=xn.getStyleValue(t.firstElementChild,"border-left-color"),r=xn.getStyleValue(t.lastElementChild,"border-left-color"),o=xn.getStyleValue(t.firstElementChild,"border-left-style"),i=xn.getStyleValue(t.lastElementChild,"border-left-style");n&&(e.tickColor=n),r&&(e.majorTickColor=r),o&&(e.tickStyle=o),i&&(e.majorTickStyle=i),t.remove(),e.GotColors=!0}}},{key:"onThemeChange",value:function(){this.GotColors=!1,this.render()}},{key:"render",value:function(){this.getColorsFromCSS(),this.drawLines()}},{key:"drawLines",value:function(){if(this.client.timeAxis.startDate){var e=this,t=e.client,n=t.timeAxis,r=n.startDate,o=t.timeAxisViewModel,i=o.tickSize,a=t.backgroundCanvas,u=document.createElement("canvas"),c=u.getContext("2d"),s=o.columnLinesFor,l=o.headers[s],f=o.headers,d=f[f.indexOf(l)-1]||f[0],p=f[f.length-1],h=n.floorDate(r,!1,d.unit,"year"===d.unit?1:d.increment||1),y=xt.getNext(h,d.unit,d.increment||1,n.weekStartDay),g=Math.round(xt.getDurationInUnit(h,y,p.unit))/(p.increment||1),v=Math.round(xt.getDurationInUnit(h,y,l.unit))/(l.increment||1),m=g/v;if(t.isHorizontal){if(r){var b=f.length>1&&xt.doesUnitsAlign(d.unit,l.unit),w=b?h:n.floorDate(r,!1,l.unit,l.increment),k=n.isContinuous?xt.getDurationInUnit(w,r,p.unit,!0)/n.increment*i:0;xn.removeEachSelector(a,".b-column-line-major");var S=!1,O=!0;l!==d&&b&&"day"===p.unit&&-1!==xt.compareUnits(d.unit,"month")&&(O=!1,n.forEachAuxInterval(d.unit,d.increment,(function(e,t){xn.append(a,{tag:"div",className:"b-column-line-major",style:"left:".concat(o.getPositionFromDate(t)-1,"px;")})}))),u.width=Math.min(2*g*i,32767),u.height=20,c.translate(-.5,-.5),c.lineWidth=2;for(var E=0;E<v;E++){var C=(S=0===E&&d!==l&&b&&O&&n.isContinuous)&&e.majorTickStyle||!S&&e.tickStyle;if("solid"!==C)switch(C){case"dashed":c.setLineDash([6,4]);break;case"dotted":c.setLineDash([2,3])}c.beginPath(),c.strokeStyle=S?e.majorTickColor:e.tickColor,c.moveTo(E*m*i*2+10-1,0),c.lineTo(E*m*i*2+10-1,22),c.stroke()}a.style.backgroundImage="url(".concat(u.toDataURL(),")"),a.style.backgroundSize="".concat(u.width/2,"px"),a.style.backgroundPositionX="".concat(-(5+k),"px")}}else{if(u.width=2*t.timeAxisColumn.resourceColumns.columnWidth,u.height=2,c.translate(-.5,-.5),c.lineWidth=2,r){if(xn.removeEachSelector(a,".b-column-line-major"),l!==d&&n.forEachAuxInterval(d.unit,d.increment,(function(e,t){xn.append(a,{tag:"div",className:"b-column-line-major",style:"top:".concat(o.getPositionFromDate(t)-1,"px;")})})),"solid"!==e.tickStyle)switch(e.tickStyle){case"dashed":c.setLineDash([6,4]);break;case"dotted":c.setLineDash([2,3])}var x=m*i*2;u.height=x,c.beginPath(),c.strokeStyle=e.tickColor,c.lineWidth=2,c.moveTo(0,x-1),c.lineTo(u.width+2,x-1),c.stroke()}c.beginPath(),c.strokeStyle=e.tickColor,c.moveTo(u.width-1,0),c.lineTo(u.width-1,u.height+2),c.stroke(),a.style.backgroundImage="url(".concat(u.toDataURL(),")"),a.style.backgroundSize="".concat(u.width/2,"px"),a.style.backgroundPositionX="0"}}}},{key:"updateCanvasSize",value:function(){this.disabled||this.drawLines()}}])&&mH(n.prototype,r),o&&mH(n,o),t}(es);function EH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xH(e,t){return!t||"object"!==DH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _H(e){return(_H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jH(e,t){return(jH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DH(e){return(DH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}OH._$name="ColumnLines",nC.registerFeature(OH,!0,["Scheduler","Gantt"]);var RH=function(e){function t(){return EH(this,t),xH(this,_H(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jH(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{defaultItems:null,items:null,processItems:null,triggerEvent:null}}},{key:"pluginConfig",get:function(){return{assign:["showEventContextMenu"],chain:["onElementContextMenu","onElementClick","onElementDblClick","onEventSpaceKey"]}}}],(r=[{key:"doDestroy",value:function(){this.menu&&this.menu.destroy()}},{key:"onElementContextMenu",value:function(e){"contextmenu"===this.triggerEvent&&this.showEventContextMenu(e)}},{key:"onElementClick",value:function(e){"click"===this.triggerEvent&&this.showEventContextMenu(e)}},{key:"onElementDblClick",value:function(e){"dblclick"===this.triggerEvent&&this.showEventContextMenu(e)}},{key:"onEventSpaceKey",value:function(e){var t=tr.from(e.target).center,n=new MouseEvent("contextmenu",Object.assign({clientX:t.x,clientY:t.y},e));Object.defineProperty(n,"target",{get:function(){return e.target}}),this.showEventContextMenu(n)}},{key:"showEventContextMenu",value:function(e){var t=this.client,n=e.target,r=xn.up(n,t.eventSelector)||n;if(r){var o=this.resolveRecord(r);o&&(e.preventDefault(),this.showContextMenuFor(o,{targetElement:r,event:e}))}}},{key:"showContextMenuFor",value:function(e,t){}},{key:"beforeContextMenuShow",value:function(){}},{key:"showContextMenu",value:function(e){if(!this.disabled){var t=this,n=e.event,r=e.menuType.toLowerCase(),o=A.lowercaseFirstLetter(r),i="get".concat(A.capitalizeFirstLetter(r),"MenuItems"),a=t.client,u=t.processItems,c=t.defaultItems,s=t.namedItems,l=n?[n.clientX+1,n.clientY+1]:tr.from(e.targetElement).center,f=e.items=Mt.isEmpty(t.items)?Mt.clone(c):Mt.merge(Mt.clone(c),t.items);e.namedItems=s,e.selection=a.selectedRecords;var d=a.getColumnFromElement(e.targetElement),p=[];if(d){a.getCellMenuItems(d,e.taskRecord,p);var h=p.reduce((function(e,t){return e[t.name]=t,e}),{});f=e.items=Mt.copyPropertiesIf(f,h,Object.keys(h))}!function e(t,n){for(var r in t){var o=t[r];if(o){r in n&&(o=t[r]="object"===DH(o)?Mt.merge(Mt.clone(n[r]),o):n[r]);var i=o.menu;i&&e("items"in i?i.items:i,n)}}}(f,s),a[i]&&a[i](e,f),u&&!1===u(e)||Mt.isEmpty(e.items)||!1!==t.beforeContextMenuShow(e)&&!1!==a.trigger("".concat(o,"ContextMenuBeforeShow"),e)&&(t.menu=me.showContextMenu(l,{owner:a,scrollAction:"hide",clippedBy:[a.timeAxisSubGridElement,a.bodyContainer],constrainTo:window,items:f,onDestroy:function(){t.menu=null},onBeforeItem:function(t){Object.assign(t,e)},onItem:function(e){return a.trigger("".concat(o,"ContextMenuItem"),e)},listeners:{show:function(t){var n=t.source;e.menu=n,a.trigger("".concat(o,"ContextMenuShow"),e)}}}))}}},{key:"hideContextMenu",value:function(e){this.menu&&this.menu.hide(e)}},{key:"defaultItems",set:function(e){this._defaultItems=e},get:function(){var e=Mt.clone(this._defaultItems);if(this.client.readOnly)for(var t in e)e[t]=!1;return e}},{key:"triggerEvent",get:function(){return this._triggerEvent||this.client.contextMenuTriggerEvent},set:function(e){this._triggerEvent=e}}])&&CH(n.prototype,r),o&&CH(n,o),t}(es);function PH(e){return(PH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MH(e,t){return!t||"object"!==PH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function IH(e,t,n){return(IH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FH(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function FH(e){return(FH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LH(e,t){return(LH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}RH._$name="TimeSpanRecordContextMenuBase";var NH=function(e){function t(){return TH(this,t),MH(this,FH(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LH(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EventContextMenu"}},{key:"defaultConfig",get:function(){return{items:null,processItems:null,defaultItems:{deleteEvent:!0,unassignEvent:!0}}}}],(r=[{key:"resolveRecord",value:function(e){return this.client.resolveEventRecord(e)}},{key:"showContextMenuFor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.targetElement,r=t.event,o=this,i=o.client;(n||(n=i.getElementsFromEventRecord(e)[0]))&&o.showContextMenu({menuType:"event",eventElement:n,targetElement:n,eventRecord:e,resourceRecord:i.resolveResourceRecord(n),assignmentRecord:i.resolveAssignmentRecord(n),event:r})}},{key:"defaultItems",set:function(e){this._defaultItems=e},get:function(){var e=IH(FH(t.prototype),"defaultItems",this);return this.client.assignmentStore||(e.unassignEvent=!1),e}},{key:"namedItems",get:function(){var e=this.client;return this._namedItems||(this._namedItems={deleteEvent:{text:e.L("Delete event"),icon:"b-icon b-icon-trash",weight:-160,onItem:function(t){var n=t.menu,r=t.eventRecord,o=n.focusInEvent&&n.focusInEvent.relatedTarget;o&&(o.focus(),e.navigator.activeItem=o),e.removeRecords([r])}},unassignEvent:{text:e.L("Unassign event"),icon:"b-icon b-icon-unassign",weight:-150,name:"unassignEvent",onItem:function(t){var n=t.menu,r=t.eventRecord,o=t.resourceRecord,i=n.focusInEvent&&n.focusInEvent.relatedTarget;i&&(i.focus(),e.navigator.activeItem=i),r.unassign(o)}}}),this._namedItems}}])&&AH(n.prototype,r),o&&AH(n,o),t}(RH);function HH(e){return(HH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VH(e,t){return!t||"object"!==HH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WH(e,t,n){return(WH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$H(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $H(e){return($H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YH(e,t){return(YH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}NH.featureClass="",NH._$name="EventContextMenu",nC.registerFeature(NH,!0,"Scheduler");var GH=function(e){function t(){return BH(this,t),VH(this,$H(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YH(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{minuteHeight:8,minuteTop:2,hourHeight:8,hourTop:2,handLeft:10,div:document.createElement("div"),scheduler:null,template:function(e){return'<div class="b-sch-clockwrap b-sch-clock-'.concat(this.mode," ").concat(e.cls||"",'">\n                    <div class="b-sch-clock">\n                        <div class="b-sch-hour-indicator">').concat(xt.format(e.date,"MMM"),'</div>\n                        <div class="b-sch-minute-indicator">').concat(xt.format(e.date,"D"),'</div>\n                        <div class="b-sch-clock-dot"></div>\n                    </div>\n                    <span class="b-sch-clock-text">').concat(e.text,"</span>\n                </div>")}}}}],(r=[{key:"construct",value:function(e){WH($H(t.prototype),"construct",this).call(this,e)}},{key:"generateContent",value:function(e){var t=e.date,n=this.template(e),r=this.div;return r.innerHTML=n,this.updateDateIndicator(r,t),r.innerHTML}},{key:"updateDateIndicator",value:function(e,t){var n=e.querySelector(".b-sch-hour-indicator"),r=e.querySelector(".b-sch-minute-indicator");t&&n&&r&&("hour"===this.mode?(n.style.transform="rotate(".concat(t.getHours()%12*30,"deg)"),r.style.transform="rotate(".concat(6*t.getMinutes(),"deg)")):(n.style.transform="none",r.style.transform="none"))}},{key:"mode",get:function(){var e=xt.compareUnits(this.scheduler.timeAxisViewModel.timeResolution.unit,"day")<0,t=xt.formatContainsHourInfo(this.scheduler.displayDateFormat);return e&&t?"hour":"day"}},{key:"template",set:function(e){this._template=e},get:function(){return this._template}}])&&zH(n.prototype,r),o&&zH(n,o),t}(Y);function UH(e){return(UH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function XH(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function KH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QH(e,t){return!t||"object"!==UH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eB(e,t,n){return(eB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tB(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tB(e){return(tB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nB(e,t){return(nB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}GH._$name="ClockTemplate";var rB=function(e){function t(){return ZH(this,t),QH(this,tB(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nB(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this,t=e.client;e.drag&&e.drag.destroy(),e.drag=new fw(Object.assign({name:e.constructor.name,mode:"translateXY",lockY:e.constrainDragToResource,minX:!0,maxX:!0,constrain:!1,cloneTarget:!e.constrainDragToTimeline,dragWithin:e.constrainDragToTimeline?null:document.body,hideOriginalElement:!0,outerElement:t.timeAxisSubGridElement,targetSelector:t.eventSelector,isElementDraggable:function(n,r){return!t.readOnly&&e.isElementDraggable(n,r)},scrollManager:e.constrainDragToTimeline?t.scrollManager:null,transitionDuration:t.transitionDuration,listeners:{beforedragstart:"onBeforeDragStart",dragstart:"onDragStart",drag:"onDrag",drop:"onDrop",abort:"onDragAbort",reset:"onDragReset",thisObj:e}},e.dragHelperConfig)),t.rowManager.on({changeTotalHeight:"updateYConstraint",thisObj:e}),e.showTooltip&&(e.clockTemplate=new GH({scheduler:t}))}},{key:"doDestroy",value:function(){var e=this;e.drag&&e.drag.destroy(),e.clockTemplate&&e.clockTemplate.destroy(),e.tip&&e.tip.destroy(),eB(tB(t.prototype),"doDestroy",this).call(this)}},{key:"onBeforeDragStart",value:function(e){var t=e.context,n=(e.event,this),r=n.client,o=r.scheduledEventName,i=r.resolveEventRecord(t.element),a=n.isHorizontal?"lockY":"lockX";if(n.disabled||!i||!i.isDraggable)return!1;t.pointerStartDate=r.getDateFromXY([t.startClientX,t.startPageY],null,!1);var u=!1!==r.trigger("before".concat(o,"Drag"),{eventRecord:i,context:n.dragData});return!1!==u&&n.constrainDragToResource?n[a]=!0:n[a]=n.config[a],!1!==u&&n.updateYConstraint(i),u}},{key:"onDragStart",value:function(e){var t,n=e.context,r=e.event,o=this,i=o.client,a=i.scheduledEventName;o.currentOverClient=i,o.scrollClients={},o.onMouseOverNewTimeline(i);var u=o.dragData=o.getDragData(n,r);if(o.showTooltip){var c=u.context.dragProxy?u.context.dragProxy.firstChild:n.element;o.tip?o.tip.showBy(c):(o.tip=new Fu({id:"".concat(i.id,"-event-drag-tip"),align:"b-t",autoShow:!0,updateContentOnMouseMove:!0,clippedBy:o.constrainDragToTimeline?[i.timeAxisSubGridElement,i.bodyContainer]:null,forElement:c,getHtml:o.getTipHtml.bind(o),style:"pointer-events:none",cls:o.tooltipCls}),o.tip.on("innerhtmlupdate",o.updateDateIndicator,o))}i.trigger("".concat(a,"DragStart"),(KH(t={},"".concat(a,"Records"),u.draggedRecords),KH(t,"context",u),t))}},{key:"updateDateIndicator",value:function(){var e=this.dragData,t=e.startDate,n=e.endDate,r=this.tip,o=r.element.querySelector(".b-sch-tooltip-enddate");this.clockTemplate.updateDateIndicator(r.element,t),o&&this.clockTemplate.updateDateIndicator(o,n)}},{key:"onDrag",value:function(e){var t,n=e.context,r=e.event,o=this,i=o.dragData,a=i.startDate;if(o.constrainToTimeline)t=o.client;else{var u=r.target;if(/^touch/.test(r.type)){var c=tr.from(i.context.element,null,!0).center;u=xn.elementFromPoint(c.x,c.y)}t=ye.fromElement(u,"timelinebase")}var s=o.client.features.dependencies,l=n.newX,f=n.newY;if(t){if(t!==o.currentOverClient&&o.onMouseOverNewTimeline(t),o.updateDragContext(n,r),o.constrainDragToTimeline&&(o.showExactDropPosition||o.client.timeAxisViewModel.snap)){var d=t.getDateFromCoordinate(o.getCoordinate(i.draggedRecords[0],n.element,[l,f]))-i.sourceDate,p=new Date(i.origStart-0+d),h=t.timeAxisViewModel.getDistanceBetweenDates(p,i.startDate);i.startDate>=t.timeAxis.startDate&&null!=h&&xn.addTranslateX(n.element,h)}o.triggerEventDrag(i,a);var y=o.checkDragValidity(i,r);y&&"boolean"!=typeof y&&(n.message=y.message||"",y=y.valid),n.valid=!1!==y,o.showTooltip&&o.tip.realign(),s&&s.updateDependenciesForTimeSpan(i.draggedRecords[0],i.context.element.querySelector(t.eventInnerSelector))}else s&&s.updateDependenciesForTimeSpan(i.draggedRecords[0],i.context.element)}},{key:"onMouseOverNewTimeline",value:function(e){var t=this.scrollClients;this.currentOverClient.element.classList.remove("b-dragging-"+this.currentOverClient.scheduledEventName),e.element.classList.add("b-dragging-"+e.scheduledEventName),e.id in t||(e.scrollManager.startMonitoring({element:e.timeAxisSubGridElement}),t[e.id]=e),this.currentOverClient=e}},{key:"onDrop",value:function(e){var t=e.context,n=e.event,r=this,o=r.currentOverClient,i=r.dragData;if(!t.valid)return r.onInvalidDrop({context:t,event:n});var a=!1;r.updateDragContext(t,n),r.tip&&r.tip.hide(),t.valid&&i.startDate&&i.endDate&&(i.finalize=function(){r.finalize.apply(r,arguments),t.finalize.apply(t,arguments)},o.trigger("before".concat(o.capitalizedEventName,"DropFinalize"),{context:i,event:n}),t.async=i.async,!t.async&&r.isValidDrop(i)&&(a=i.startDate-i.origStart!=0||i.newResource!==i.resourceRecord)),t.async||r.finalize(i.valid&&t.valid&&a)}},{key:"onDragAbort",value:function(e){var t,n=e.context,r=this,o=r.dragData,i=r.client,a=o.draggedRecords;i.currentOrientation.onDragAbort(n),r.dragData.record.instanceMeta(i).retainElement=!1,r.tip&&r.tip.hide(),i.trigger("".concat(i.capitalizedEventName,"DragAbort"),(KH(t={},"".concat(i.scheduledEventName,"Records"),a),KH(t,"context",o),t))}},{key:"onInvalidDrop",value:function(){var e=this;e.dragData.draggedRecords.forEach((function(t){return e.resumeElementRedrawing(t)})),e.tip&&e.tip.hide()}},{key:"onDragReset",value:function(e){var t=e.source,n=this;for(var r in n.scrollClients||{})n.scrollClients[r].scrollManager.stopMonitoring(n.scrollClients[r].timeAxisSubGridElement);if(t.context&&t.context.started&&n.dragData.eventBarEls[0].classList.remove("b-drag-main"),n.scrollClients=null,n.currentOverClient&&n.currentOverClient.element.classList.remove("b-dragging-"+n.currentOverClient.scheduledEventName),n.dragData&&!n.dragData.context.valid){var o=n.currentOverClient.features.dependencies;o&&o.scheduleDraw(!0)}}},{key:"onInternalInvalidDrop",value:function(){var e,t=this,n=t.currentOverClient;t.tip&&t.tip.hide(),t.drag.abort(),n.trigger("after".concat(n.capitalizedEventName,"Drop"),(KH(e={},n.scheduledEventName+"Records",t.dragData.draggedRecords),KH(e,"valid",!1),KH(e,"context",t.dragData),e))}},{key:"finalize",value:(i=regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=this).currentOverClient,o=n.dragData,i=o.context,(a=o.draggedRecords).forEach((function(e,t){n.resumeElementRedrawing(e),o.eventBarEls[t].classList.remove(n.drag.draggingCls)})),!t){e.next=11;break}if(!((u=n.updateRecords(o))instanceof Promise)){e.next=8;break}return i.async=!0,e.next=8,u;case 8:o.valid?(n.drag.reset(),r.trigger("after".concat(r.capitalizedEventName,"Drop"),(KH(c={},"".concat(r.scheduledEventName,"Records"),a),KH(c,"valid",!0),KH(c,"context",o),c))):n.onInternalInvalidDrop(),e.next=12;break;case 11:n.onInternalInvalidDrop();case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){XH(o,n,r,a,u,"next",e)}function u(e){XH(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"updateDragContext",value:function(e,t){var n=this,r=n.drag,o=n.dragData,i=n.currentOverClient,a=i.isHorizontal,u=e.element,c=tr.from(u,i.timeAxisSubGridElement),s=o.draggedRecords[0],l=s.isAssignment?s.event:s,f=n.constrainDragToTimeSlot||(a?r.lockX:r.lockY);if(o.browserEvent=t,f)o.timeDiff=0;else{if(i.timeAxis.isContinuous){var d=o.dateConstraints,p=i.timeAxisSubGrid.scrollable,h=p.viewport,y=i.isHorizontal?e.clientX-h.x+p.x:e.clientY-h.y+p.y,g=i.timeAxisViewModel.getDateFromPosition(y,null,!0),v=o.timeDiff=g-e.pointerStartDate;o.startDate=n.adjustStartDate(o.origStart,v),d&&(o.startDate=xt.constrain(o.startDate,d.start,new Date(d.end-l.durationMS))),o.endDate=new Date(o.startDate-0+o.duration)}else{var m=n.resolveStartEndDates(c);o.startDate=m.startDate,o.endDate=m.endDate}o.timeDiff=o.startDate-o.origStart}if(Object.assign(o,n.getProductDragContext(o)),o.valid)if(o.endDate<=i.timeAxis.startDate||o.startDate>=i.timeAxis.endDate)o.context.valid=!1,o.context.message=n.L("noDropOutsideTimeline");else{var b=!t||n.checkDragValidity(o,t);b&&"boolean"!=typeof b?(o.context.valid=!1!==b.valid,o.context.message=b.message):(o.context.valid=!1!==b,o.context.message="")}else o.context.valid=!1}},{key:"suspendElementRedrawing",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.instanceMeta(this.client).retainElement=t}},{key:"resumeElementRedrawing",value:function(e){this.suspendElementRedrawing(e,!1)}},{key:"getDragData",value:function(e,t){var n=this,r=n.client,o=n.setupProductDragData(e),i=o.record,a=o.dateConstraints,u=o.eventBarEls,c=o.draggedRecords,s=i.startDate,l=i.endDate,f=r.timeAxis,d=s<f.startDate,p=l>f.endDate,h=n.getCoordinate(i,e.element,[e.elementStartX,e.elementStartY]),y=n.getCoordinate(i,e.element,[e.startClientX,e.startClientY]);c.forEach((function(e){return n.suspendElementRedrawing(e)})),n.drag.startEvent.ctrlKey&&n.client.selectEvent(c[0],!0),n.drag[r.isHorizontal?"lockX":"lockY"]=n.constrainDragToTimeSlot;var g={context:e,dateConstraints:a,eventBarEls:u,record:i,draggedRecords:c,sourceDate:d?s:r.getDateFromCoordinate(h),screenSourceDate:r.getDateFromCoordinate(y,null,!1),origStart:s,origEnd:l,startDate:s,endDate:l,timeDiff:0,startsOutsideView:d,endsOutsideView:p,duration:l-s,browserEvent:t};if(u.forEach((function(e,t){e.classList.add(n.drag.draggingCls),e.classList.remove("b-sch-event-hover"),e.classList.remove("b-active"),e.classList.remove("b-first-render")})),u.length>1)if(e.relatedElements=u.slice(1),e.relatedElStartPos=[],e.relatedElDragFromPos=[],n.unifiedDrag){n.client.isAnimating=!0,_r.on({element:u[1],transitionend:function(e){n.client.isAnimating=!1},once:!0}),u[0].classList.add("b-drag-main");var v=qH(xn.getTranslateXY(e.element),2),m=v[0],b=v[1];e.relatedElements.forEach((function(t,n){e.relatedElStartPos[n]=xn.getTranslateXY(t),m+=10,b+=10,xn.setTranslateXY(t,m,b),e.relatedElDragFromPos[n]=[m,b]}))}else e.relatedElements.forEach((function(t,n){e.relatedElStartPos[n]=e.relatedElDragFromPos[n]=xn.getTranslateXY(t)}));return g}},{key:"getRelatedRecords",value:function(e){return[]}},{key:"setupConstraints",value:function(e,t,n,r){var o=!this.showExactDropPosition&&n>1?n:0;r?this.setXConstraint(e.left,e.right-t.width,o):this.setXConstraint(!0,!0,o),this.setYConstraint(e.top,e.bottom-t.height,0)}},{key:"updateYConstraint",value:function(e){var t=this,n=t.client,r=t.drag.context,o=n.timeAxisViewModel.snapPixelAmount;if(r&&!t.drag.lockY){var i;if(!t.constrainDragToTimeline)return void t.setYConstraint(null,null,o);i=n.getScheduleRegion(null,e),t.setYConstraint(i.top,i.bottom-r.element.offsetHeight,o)}else t.setYConstraint(null,null,o)}},{key:"setXConstraint",value:function(e,t,n){var r=this.drag;r.leftConstraint=e,r.rightConstraint=t,r.minX=e,r.maxX=t}},{key:"setYConstraint",value:function(e,t,n){var r=this.drag;r.topConstraint=e,r.bottomConstraint=t,r.minY=e,r.maxY=t}},{key:"adjustStartDate",value:function(e,t){return this.client.timeAxis.roundDate(new Date(e-0+t),!!this.client.snapRelativeToEventStartDate&&e)}},{key:"resolveStartEndDates",value:function(e){var t=this.client.getStartEndDatesFromRectangle(e,"round",this.dragData.duration);return{startDate:t.start,endDate:t.end}}},{key:"getTipHtml",value:function(){var e,t=this,n=t.dragData,r=n.startDate,o=n.endDate,i=n.draggedRecords,a=t.client.getFormattedDate(r),u=t.client.getFormattedEndDate(o,r),c=t.dragData.context,s=c.valid,l=c.message;return t.dragTipTemplate((KH(e={valid:s,startDate:r,endDate:o,startText:a,endText:u,message:l||""},t.client.scheduledEventName+"Record",i[0]),KH(e,"dragData",t.dragData),KH(e,"startClockHtml",t.clockTemplate.template({date:r,text:a,cls:"b-sch-tooltip-startdate"})),KH(e,"endClockHtml",i[0].isMilestone?"":t.clockTemplate.template({date:o,text:u,cls:"b-sch-tooltip-enddate"})),e))}},{key:"isValidDrop",value:function(e){throw new Error("Implement in subclass")}},{key:"checkDragValidity",value:function(e){throw new Error("Implement in subclass")}},{key:"updateRecords",value:function(e){throw new Error("Implement in subclass")}},{key:"isElementDraggable",value:function(e,t){throw new Error("Implement in subclass")}},{key:"getCoordinate",value:function(e,t,n){throw new Error("Implement in subclass")}},{key:"setupProductDragData",value:function(e){throw new Error("Implement in subclass")}},{key:"getProductDragContext",value:function(e){throw new Error("Implement in subclass")}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e}}],o=[{key:"defaultConfig",get:function(){return{dragTipTemplate:function(e){return'\n                <div class="b-sch-tip-'.concat(e.valid?"valid":"invalid",'">\n                    ').concat(e.startClockHtml,"\n                    ").concat(e.endClockHtml,'\n                    <div class="b-sch-tip-message">').concat(e.message,"</div>\n                </div>\n            ")},constrainDragToResource:!0,showTooltip:!0,showExactDropPosition:!1,constrainDragToTimeline:!0,store:null,dragHelperConfig:null,tooltipCls:null}}},{key:"pluginConfig",get:function(){return{chain:["render"]}}}],r&&JH(n.prototype,r),o&&JH(n,o),t}(es);rB._$name="DragBase";n(238),n(210);function oB(e){return(oB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uB(e,t){return!t||"object"!==oB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cB(e,t,n){return(cB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sB(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function sB(e){return(sB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lB(e,t){return(lB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fB=function(e){return function(e){function t(){return iB(this,t),uB(this,sB(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lB(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{dataLayerStores:["store"]}}}],(r=[{key:"startConfigure",value:function(e){this.configDataLayer(this.client,e),cB(sB(t.prototype),"startConfigure",this).call(this,e)}},{key:"doDestroy",value:function(){var e=this;return(this.dataLayerStores||[]).forEach((function(t){"columns"===t&&(t="columnStore"),e[t]=null})),cB(sB(t.prototype),"doDestroy",this).call(this)}},{key:"configDataLayer",value:function(e,t){var n=this;return(t.dataLayerStores||[]).reduce((function(t,r){if("columnStore"===r||"columns"===r)r="columnStore",t.columnStore=t.columnStore||t.columns||n.obtainColumnStore(e,t);else{var o="obtain".concat(A.capitalizeFirstLetter(r)),i=n[o];t[r]=t[r]||i&&i.call(n,e,t)}return Reflect.has(n,r)||!Object.isExtensible(n)||Object.isSealed(n)||Object.isFrozen(n)||Object.defineProperty(n,r,{get:function(){return this["_".concat(r)]},set:function(e){this.setDataLayerStore(r,e)}}),t}),t)}},{key:"attachToDataLayer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.dataLayerStores||[]).forEach((function(n){"columns"===n&&(n="columnStore");var r="obtain".concat(A.capitalizeFirstLetter(n)),o=e[r];e[n]&&!t||!o||(e[n]=o.call(e,e.client))}))}},{key:"setDataLayerStore",value:function(e,t){var n="_".concat(e),r="_".concat(e,"Detacher"),o="on".concat(A.capitalizeFirstLetter(e),"Change"),i="get".concat(A.capitalizeFirstLetter(e),"ListenersConfig");if(this[n]!==t&&(this[r]&&(this[r](),this[r]=null),this[o]&&this[o](t,this[n]),this[n]=t,t&&this[i])){var a=this[i]();a&&(this[r]=t.on(Object.assign({thisObj:this,detachable:!0},a)))}}},{key:"obtainStore",value:function(e,t){return e.store}},{key:"obtainColumnStore",value:function(e,t){return e.columns}}])&&aB(n.prototype,r),o&&aB(n,o),t}(e||Y)};function dB(e){return(dB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yB(e,t){return!t||"object"!==dB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gB(e){return(gB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vB(e,t){return(vB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mB=function(e){return function(e){function t(){return pB(this,t),yB(this,gB(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vB(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{dataLayerStores:["resourceStore","dependencyStore","assignmentStore","eventStore"]}}}],(r=[{key:"obtainResourceStore",value:function(e,t){return e.store}},{key:"obtainDependencyStore",value:function(e,t){return e.dependencyStore}},{key:"obtainAssignmentStore",value:function(e,t){return e.assignmentStore}},{key:"obtainEventStore",value:function(e,t){return e.eventStore}}])&&hB(n.prototype,r),o&&hB(n,o),t}(fB(e||Y))};function bB(e){return(bB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SB(e,t){return!t||"object"!==bB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OB(e){return(OB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EB(e,t){return(EB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var CB=function(e){return function(e){function t(){return wB(this,t),SB(this,OB(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EB(e,t)}(t,e),n=t,(r=[{key:"addEventToResource",value:function(e){var t=e.event,n=e.resource,r=e.eventStore,o=e.assignmentStore;t=r.add(t)[0];var i=this.addAssignment({event:t,resource:n,assignmentStore:o}).assignment;return{event:t,assignment:i!==t?i:null}}},{key:"getEventDependencies",value:function(e){var t=e.event;return e.dependencyStore.getEventDependencies(t)}},{key:"getEventAssignments",value:function(e){var t=e.event;return e.assignmentStore,t.assignments||[]}},{key:"getEventResource",value:function(e){var t=e.event;return e.resourceStore,t.resource}},{key:"isEventAssignedToResource",value:function(e){var t=this,n=e.event,r=e.resource,o=e.resourceStore,i=e.assignmentStore;return i?this.getEventAssignments({event:n,assignmentStore:i}).some((function(e){return t.isAssignmentForResource({assignment:e,resource:r,resourceStore:o})})):n.resource===r}},{key:"assignEventToResource",value:function(e){var t,n=e.event,r=e.resource,o=e.assignmentStore;return o?t=o.add({eventId:n.id,resourceId:r.id})[0]:n.resourceId=r.id,t||n}}])&&kB(n.prototype,r),o&&kB(n,o),t}(e||Y)};function xB(e){return(xB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DB(e,t){return!t||"object"!==xB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RB(e){return(RB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PB(e,t){return(PB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var TB=function(e){return function(e){function t(){return _B(this,t),DB(this,RB(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PB(e,t)}(t,e),n=t,(r=[{key:"isAssignmentEventAssigned",value:function(e){return!!e.assignment.event}},{key:"isAssignmentResourceAssigned",value:function(e){return!!e.assignment.resource}},{key:"isAssignmentAssigned",value:function(e){var t=e.assignment;return!!t.event&&!!t.resource}},{key:"isAssignmentForResource",value:function(e){var t=e.assignment,n=e.resource;return e.resourceStore,t.resource===n}},{key:"getAssignmentResource",value:function(e){var t=e.assignment;return e.resourceStore,t.resource}},{key:"getAssignmentEvent",value:function(e){var t=e.assignment;return e.eventStore,t.event}},{key:"getAssignmentDependencies",value:function(e){var t=e.assignment,n=e.dependencyStore,r=t.event;return r?this.getEventDependencies({event:r,dependencyStore:n}):[]}},{key:"addAssignment",value:function(e){var t=e.event,n=e.resource,r=e.assignmentStore,o=e.assignmentConfig;return{assignment:r.add(Object.assign({},o,{eventId:t.id,resourceId:n.id}))[0]}}}])&&jB(n.prototype,r),o&&jB(n,o),t}(e||Y)};function AB(e){return(AB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FB(e,t){return!t||"object"!==AB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LB(e){return(LB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NB(e,t){return(NB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var HB=function(e){return function(e){function t(){return MB(this,t),FB(this,LB(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NB(e,t)}(t,e),n=t,(r=[{key:"getDependencySourceEvent",value:function(e){var t=e.dependency;return e.eventStore,t.sourceEvent}},{key:"getDependencyTargetEvent",value:function(e){var t=e.dependency;return e.eventStore,t.targetEvent}},{key:"getDependencySourceAssignments",value:function(e){var t=e.dependency,n=e.assignmentStore,r=t.sourceEvent;return r?this.getEventAssignments({event:r,assignmentStore:n}):[]}},{key:"getDependencyTargetAssignments",value:function(e){var t=e.dependency,n=e.assignmentStore,r=t.targetEvent;return r?this.getEventAssignments({event:r,assignmentStore:n}):[]}},{key:"getDependencyAssignments",value:function(e){var t=e.dependency,n=e.assignmentStore;[].concat(this.getDependencySourceAssignments({dependency:t,assignmentStore:n}),this.getDependencyTargetAssignments({dependency:t,assignmentStore:n}))}},{key:"getDependencyAssignmentsAsFromToArray",value:function(e){var t=e.dependency,n=e.assignmentStore,r=this.getDependencySourceAssignments({dependency:t,assignmentStore:n}),o=this.getDependencyTargetAssignments({dependency:t,assignmentStore:n});return r.reduce((function(e,t){return o.reduce((function(e,n){return e.push({from:t,to:n}),e}),e)}),[])}},{key:"isDependencySourceAssignment",value:function(e){var t=e.dependency,n=e.assignment;return t.from===n.eventId}},{key:"isDependnecyTargetAssignment",value:function(e){var t=e.dependency,n=e.assignment;return t.to===n.eventId}},{key:"isValidDependency",value:function(e){var t=e.sourceEvent,n=e.targetEvent,r=e.type;return e.dependencyStore.isValidDependency(t.id,n.id,r)}},{key:"isValidDependencyToCreate",value:function(e){var t=e.sourceEvent,n=e.targetEvent,r=e.type;return e.dependencyStore.isValidDependencyToCreate(t.id,n.id,r)}},{key:"createDependency",value:function(e){var t=e.sourceEvent,n=e.targetEvent,r=e.type,o=e.fromSide,i=e.toSide;return e.dependencyStore.add({from:t.id,to:n.id,type:r,fromSide:o,toSide:i})[0]}}])&&IB(n.prototype,r),o&&IB(n,o),t}(e||Y)};function BB(e){return(BB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VB(e,t){return!t||"object"!==BB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WB(e){return(WB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $B(e,t){return($B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var YB=function(e){return function(e){function t(){return zB(this,t),VB(this,WB(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$B(e,t)}(t,e),t}(e||Y)};function GB(e){return(GB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XB(e,t){return!t||"object"!==GB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KB(e){return(KB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZB(e,t){return(ZB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var JB=function(e){var t,n=[TB,HB,CB,YB],r=(t=Xs(Y)).mixes.apply(t,n);return function(e){function t(){return UB(this,t),XB(this,KB(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZB(e,t)}(t,e),n=t,(o=[{key:"dataApi",get:function(){return this._dataApi||(this._dataApi=new r({host:this.dataApiHost||this})),this._dataApi}}])&&qB(n.prototype,o),i&&qB(n,i),t}(e||Y)};function QB(e){return(QB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ez(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nz(e,t){return!t||"object"!==QB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rz(e,t,n){return(rz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oz(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function oz(e){return(oz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iz(e,t){return(iz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var az=[null],uz=function(e){function t(){return ez(this,t),nz(this,oz(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iz(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EventDrag"}},{key:"defaultConfig",get:function(){return{constrainDragToResource:!1,constrainDragToTimeSlot:!1,validatorFn:function(){},validatorFnThisObj:null,unifiedDrag:null}}}],(r=[{key:"isElementDraggable",value:function(e,t){var n=this.scheduler,r=xn.up(e,n.eventSelector),o=n.features.eventResize;if(!r||this.disabled)return!1;if(e.matches('[class$="-handle"]'))return!1;var i=n.resolveEventRecord(r);return!(o&&!i.isMilestone&&o.resize.overAnyHandle(t,r))}},{key:"triggerEventDrag",value:function(e,t){e.startDate-t==0&&e.newResource===e.resourceRecord||this.scheduler.trigger("eventDrag",{eventRecords:e.draggedRecords,startDate:e.startDate,endDate:e.endDate,newResource:e.newResource,context:e})}},{key:"onDragStart",value:function(e){var n=e.context,r=e.event,o=this.client.features.eventContextMenu;rz(oz(t.prototype),"onDragStart",this).call(this,{context:n,event:r}),o&&o.hideContextMenu(!1)}},{key:"isValidDrop",value:function(e){var t=e.newResource,n=e.resourceRecord,r=e.draggedRecords[0];return!(t.meta.specialRow||n!==t&&(r instanceof BM?(r=this.dataApi.getAssignmentEvent({assignment:r,eventStore:this.eventStore}),this.dataApi.isAssignmentForResource({assignment:r,resource:t,resourceStore:this.resourceStore})):this.dataApi.isEventAssignedToResource({event:r,resource:t,resourceStore:this.resourceStore,assignmentStore:this.assignmentStore})))}},{key:"checkDragValidity",value:function(e,t){var n=this,r=this.currentOverClient,o=n.dragData.context.valid;return o&&(o=r.allowOverlap||r.isDateRangeAvailable(e.startDate,e.endDate,e.draggedRecords[0],e.newResource)?n.validatorFn.call(n.validatorFnThisObj||n,e,t):{valid:!1,message:n.L("eventOverlapsExisting")}),o}},{key:"updateRecords",value:function(e){var t,n=this.scheduler,r=this.currentOverClient,o=n.assignmentStore,i=n.eventStore,a=e.draggedRecords;if(i!==r.eventStore&&(i.remove(a),r.eventStore.add(a)),o){if(r!==n)throw new Error("Assignments cannot be dragged cross-scheduler");t=this.updateRecordsMultipleAssignmentMode(n,r,e,!1)}else t=this.updateRecordsSingleAssignmentMode(n,r,e,!1);return r.trigger("eventDrop",{eventRecords:a,isCopy:!1,event:e.browserEvent,targetEventRecord:e.targetEventRecord,targetResourceRecord:e.newResource,context:e}),t}},{key:"updateRecordsSingleAssignmentMode",value:function(e,t,n,r){var o,i=this,a=e!==t,u=e.eventStore,c=e.resourceStore,s=n.draggedRecords,l=n.timeDiff,f=n.resourceRecord,d=n.newResource,p=i.unifiedDrag||a&&s.length>1,h=[],y=i.constrainDragToResource?0:c.indexOf(f)-c.indexOf(d),g=i.adjustStartDate(s[0].startDate,l);if(s.forEach((function(f,v){var m=n.eventBarEls[v],b=f.generation,w=a?az:f.resources;m.querySelector(e.eventInnerSelector).classList.add(e.committingCls),r?(f=f.fullCopy(null),h.push(f)):u!==t.eventStore&&(u.remove(s),t.eventStore.add(s),f.instanceMeta(t).fromDragProxy=!0),f.beginBatch();var k=p?g:i.adjustStartDate(f.startDate,l);(0!==y||p||a)&&w.length&&w.forEach((function(e){var r=d;if(!p&&!a){var o=c.indexOf(e)-y;o<0?o=0:o>=c.getCount()&&(o=c.getCount()-1),r=c.getAt(o)}if(e?f.reassign(e,r):f.assign(r),"vertical"!==t.mode){var i=t.rowManager.getRowFor(r)&&t.isInTimeAxis(f)?t.getEventRenderId(f,r):null;if(i)if(a){var u=tr.from(n.context.element,t.foregroundCanvas,!0),s=n.context.element.cloneNode(!0);xn.setTranslateXY(s,u.x,u.y),s.classList.remove("b-first-render"),s.classList.remove("b-active"),s.classList.remove("b-drag-proxy"),s.classList.remove("b-dragging"),t.currentOrientation.cacheTimeSpanElement(f,r,s)}else t.currentOrientation.releaseTimeSpanDiv(m,!0),t.currentOrientation.updateElementId(m,i);else m.remove()}})),f.setStartDate(k,!0,u.skipWeekendsDuringDragDrop),f.endBatch(),f.generation!==b&&(o=!0)})),h.length){var v=u.count;u.add(h),u.count!==v&&(o=!0)}o||(n.valid=!1)}},{key:"updateRecordsMultipleAssignmentMode",value:function(e,t,n,r){var o,i=this,a=e!==t,u=e.eventStore,c=n.draggedRecords,s=n.timeDiff,l=n.resourceRecord,f=n.newResource,d={};c.forEach((function(c,p){var h=c.event,y=n.eventBarEls[p],g=h.generation,v=e.getEventRenderId(c.event,f);d[h.id]||(d[h.id]=!0,v&&(a?t.currentOrientation.cacheTimeSpanElement(h,y):t.currentOrientation.updateElementId(y,v)),h.setStartDate(i.adjustStartDate(h.startDate,s),!0,u.skipWeekendsDuringDragDrop),l!==f&&(r?h.assign(f):h.isAssignedTo(f)?h.unassign(c.resource):h.reassign(c.resource,f)),o=o||c.resource!==l||h.generation!==g)})),o||(n.valid=!1)}},{key:"getProductDragContext",value:function(e){var t,n=this.scheduler.resolveEventRecord(e.browserEvent.target);return t=this.constrainDragToResource?e.resourceRecord:this.constrainDragToTimeline?this.resolveResource()||e.newResource||e.resourceRecord:this.resolveResource(),{valid:Boolean(t),newResource:t,targetEventRecord:n}}},{key:"setupProductDragData",value:function(e){var t=this,n=t.scheduler,r=e.grabbed,o=n.resolveEventRecord(r),i=n.resolveResourceRecord(r),a=n.resolveAssignmentRecord(r),u=tr.from(r),c=[a||o],s=[];if(t.constrainDragToResource&&!i)throw new Error("Resource could not be resolved for event: "+o.id);var l=n.getDateConstraints(t.constrainDragToResource?i:null,o);return t.constrainDragToTimeline&&t.setupConstraints(n.getScheduleRegion(t.constrainDragToResource?i:null,o),u,n.timeAxisViewModel.snapPixelAmount,Boolean(l)),n.multiEventSelect&&(n.isEventSelected(c[0])||t.drag.startEvent.ctrlKey)&&c.push.apply(c,t.getRelatedRecords(a||o)),c.forEach((function(e){var t;if(!(t=e instanceof BM?n.getElementFromEventRecord(e.event,e.resource):n.getElementFromEventRecord(e,e.resource))){var r=n.generateTplData(e,e.resource,{timeAxis:!0,viewport:!0});r.top=r.row?r.top+r.row.top:n.getResourceEventBox(e,e.resource,!0).top,t=n.currentOrientation.renderTimeSpan(r,{},null,!0),n.currentOrientation.availableDivs.add(t),t=t.innerElement}s.push(t)})),s.forEach((function(e,t){return s[t]=e.parentNode})),{record:o,dateConstraints:l,eventBarEls:s,draggedRecords:c}}},{key:"getDragData",value:function(e,n){return Object.assign(rz(oz(t.prototype),"getDragData",this).call(this,e,n),{resourceRecord:this.scheduler.resolveResourceRecord(e.grabbed)})}},{key:"getRelatedRecords",value:function(e){return this.scheduler.selectedEvents.filter((function(t){return t!==e&&t.isDraggable}))}},{key:"getCoordinate",value:function(e,t,n){var r=this.currentOverClient;if(r.isHorizontal){var o=n[0];if("default"!==r.milestoneLayoutMode&&e.isMilestone)switch(r.milestoneAlign){case"center":o+=t.offsetWidth/2;break;case"end":o+=t.offsetWidth}return o}var i=n[1];if("default"!==r.milestoneLayoutMode&&e.isMilestone)switch(r.milestoneAlign){case"center":i+=t.offsetHeight/2;break;case"end":i+=t.offsetHeight}return i}},{key:"resolveResource",value:function(){var e=this.currentOverClient,t=e.isHorizontal,n=this.dragData.context,r=n.dragProxy||n.element,o=tr.from(r,null,!0),i=e.isVertical||this.unifiedDrag?n.clientY:o.center.y,a=tr.from(r,this.currentOverClient.timeAxisSubGridElement,!0).center,u=a.x,c=a.y;if(t){var s=e.rowManager.getRowAt(i);return s&&e.resourceStore.getAt(s.dataIndex)}return e.resolveResourceRecord(e.timeAxisSubGridElement.querySelector(".b-sch-timeaxis-cell"),[u,c])}},{key:"adjustStartDate",value:function(e,t){var n=this.currentOverClient;return n.timeAxis.roundDate(new Date(e-0+t),!!n.snapRelativeToEventStartDate&&e)}},{key:"resolveStartEndDates",value:function(e){var t=this.currentOverClient,n=this.dragData,r=t.getStartEndDatesFromRectangle(e,"round",n.duration),o=r.start,i=r.end;if(n.startsOutsideView)n.endsOutsideView||(o=xt.add(i,-n.duration,"ms"));else{if(o&&!t.timeAxis.dateInAxis(o,!1)){var a=t.timeAxis.getTickFromDate(o);a>=0&&(o=t.timeAxis.getDateFromTick(a))}i=xt.add(o,n.duration,"ms")}return{startDate:o,endDate:i}}},{key:"scheduler",get:function(){return this.client}},{key:"store",get:function(){return this.eventStore}}])&&tz(n.prototype,r),o&&tz(n,o),t}(Xs(rB).mixes(mB,JB));function cz(e){return(cz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fz(e,t){return!t||"object"!==cz(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dz(e,t,n){return(dz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pz(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pz(e){return(pz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hz(e,t){return(hz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}uz._$name="EventDrag",nC.registerFeature(uz,!0,"Scheduler");var yz=function(e){function t(){return sz(this,t),fz(this,pz(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hz(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{showTooltip:!0,dragTolerance:2,preventMultiple:!1,validatorFn:function(){},validatorFnThisObj:null,proxyCls:"b-sch-dragcreator-proxy",tipTemplate:function(e){return'\n                <div class="b-sch-tip-'.concat(e.valid?"valid":"invalid",'">\n                    ').concat(e.startClockHtml,"\n                    ").concat(e.endClockHtml,'\n                    <div class="b-sch-tip-message">').concat(e.message,"</div>\n                </div>\n            ")}}}},{key:"pluginConfig",get:function(){return{chain:["onElementMouseDown","onElementMouseMove"],before:["onElementContextMenu"]}}}],(r=[{key:"doDestroy",value:function(){this.tip&&this.tip.destroy(),this.resize&&this.resize.destroy(),dz(pz(t.prototype),"doDestroy",this).call(this)}},{key:"addProxy",value:function(e){var t,n,r,o,i=this,a=i.client,u=a.barMargin,c=a.currentOrientation.getRowRegion(e.rowRecord);return a.isHorizontal?(r="currentX"in e?Math.min(e.startX,e.currentX+1):e.startX,o=c.y+u,t=e.width||i.dragTolerance,n=c.height-2*u):(r=c.x+u,o="currentY"in e?Math.min(e.startY,e.currentY+1):e.startY,t=c.width-2*u,n=e.height||i.dragTolerance),a.element.classList.add("b-dragcreating"),a.element.classList.add("b-dragcreating-proxy-sizing"),i.proxy=xn.createElement({parent:a.foregroundCanvas,className:i.proxyCls,style:"transform:translate(".concat(r,"px, ").concat(o,"px);width:").concat(t,"px;height:").concat(n,"px"),retainElement:!0})}},{key:"removeProxy",value:function(){var e=this;e.proxy&&(e.proxy.remove(),e.resize.destroy(),e.proxy=e.resize=null,e.client.element.classList.remove("b-dragcreating"),e.client.element.classList.remove("b-dragcreating-proxy-sizing"),e.tip&&e.tip.hide())}},{key:"initResizer",value:function(e,t){var n,r=this;n=r.client.isHorizontal?t.currentX>t.startX?"right":"left":t.currentY>t.startY?"bottom":"top",r.resize&&r.resize.destroy(),r.resize=new _w({name:r.constructor.name,direction:r.client.isVertical?"vertical":"horizontal",isTouch:e.type.startsWith("touch"),grab:{element:r.proxy,edge:n,event:t.startEvent},allowEdgeSwitch:!0,outerElement:r.client.timeAxisSubGridElement,scrollManager:r.client.scrollManager,scroller:r.client.timeAxisSubGrid.scrollable,listeners:{resizing:r.onResizing,resize:r.onResize,cancel:r.onCancel,thisObj:r}}),r.resize.context.resource=t.resource}},{key:"initTooltip",value:function(){var e=this,t=e.client;e.showTooltip&&(e.tip?e.tip.showBy(e.getTooltipTarget()):(e.clockTemplate=new GH({scheduler:t}),e.tip=new Fu({id:"".concat(t.id,"-drag-create-tip"),autoShow:!0,trackMouse:!1,updateContentOnMouseMove:!0,getHtml:e.getTipHtml.bind(e),align:t.isVertical?"t-b":"b100-t100",hideDelay:0,axisLock:!0}),e.tip.on("innerhtmlupdate",e.updateDateIndicator,e)))}},{key:"updateDateIndicator",value:function(){var e=this.createContext,t=e.startDate,n=e.endDate,r=this.tip,o=r.element.querySelector(".b-sch-tooltip-enddate");t&&n&&(this.clockTemplate.updateDateIndicator(r.element,t),o&&this.clockTemplate.updateDateIndicator(o,n))}},{key:"getTipHtml",value:function(){if(this.resize.context){var e,t,n=this,r=n.client,o=n.resize.context,i=o.edge,a=o.newX,u=o.newY,c=o.elementStartX,s=o.elementStartY,l=o.elementWidth,f=o.elementHeight,d=o.newWidth,p=o.newHeight,h=o.valid,y=o.message;if(r.isHorizontal){var g="left"===i?a:c,v=Math.min(Math.max(g+(d||l)-1,0),r.timeAxisViewModel.totalSize-1);e=r.getDateFromCoordinate(g,"round",!0),t=r.getDateFromCoordinate(v,"round",!0)}else{var m="top"===i?u:s,b=Math.min(Math.max(m+(p||f)-1,0),r.timeAxisViewModel.totalSize-1);e=r.getDateFromCoordinate(m,"round",!0),t=r.getDateFromCoordinate(b,"round",!0)}var w=xt.min(e,t),k=xt.max(e,t),S=w&&r.getFormattedDate(w),O=k&&t&&r.getFormattedEndDate(k,w);return n.tipTemplate({valid:h,startDate:w,endDate:k,startText:S,endText:O,message:y,startClockHtml:n.clockTemplate.template({date:w,text:S,cls:"b-sch-tooltip-startdate"}),endClockHtml:n.clockTemplate.template({date:r.getDisplayEndDate(k,w),text:O,cls:"b-sch-tooltip-enddate"})})}}},{key:"finalize",value:function(e){var t=this,n=function(){t.proxy.retainElement=!1,t.reset()},r=function(){t.client.trigger("afterDragCreate",{proxyElement:t.proxy}),n()};if(e){var o=t.finalizeDragCreate(t.createContext);o instanceof Promise?o.then(r,n):r()}else r()}},{key:"onElementMouseDown",value:function(e){var t=this,n=t.client;if(0===e.button&&e.target.matches(".b-sch-timeaxis-cell")&&!t.disabled&&!n.readOnly){var r=n.isVertical?n.resolveResourceRecord(e):n.getRecordFromElement(e.target);if(r.meta.specialRow)return;if(t.preventMultiple&&!t.isRowEmpty(r))return;t.monitorMove=!0,t.createContext={startEvent:e,startScreenX:e.screenX,startScreenY:e.screenY,startX:e.offsetX,startY:e.offsetY,cellElement:e.target,rowRecord:r},t.mouseUpDetacher=_r.on({element:document.body,mouseup:"onMouseUp",once:!0,thisObj:this})}}},{key:"onElementMouseMove",value:function(e){var t=this;if(t.monitorMove){var n=t.createContext,r=t.client,o=t.client.isVertical?n.startScreenY-e.screenY:n.startScreenX-e.screenX;if(Math.abs(o)>t.dragTolerance){var i=r.getDateFromDomEvent(e),a=tr.from(r.timeAxisSubGridElement,null,!0);if(!1===t.handleBeforeDragCreate(i,e))return void(t.monitorMove=!1);n.currentX=Math.max(e.clientX-a.x+r.timeAxisSubGrid.scrollable.x,0),n.currentY=Math.max(e.clientY-a.y+r.timeAxisSubGrid.scrollable.y,0),t.addProxy(t.createContext),t.initResizer(e,t.createContext),t.initTooltip(),t.monitorMove=!1,r.trigger("dragCreateStart",{proxyElement:t.proxy})}}t.proxy&&t.showTooltip&&t.resize.context&&t.tip.alignTo(t.getTooltipTarget())}},{key:"getTooltipTarget",value:function(){var e=this,t=tr.from(e.proxy,null,!0);return e.client.isVertical?("bottom"===e.resize.context.edge&&(t.y=t.bottom-1),t.height=e.tip.anchorSize[1]/2):("right"===e.resize.context.edge&&(t.x=t.right-1),t.width=e.tip.anchorSize[0]/2),{target:t}}},{key:"onMouseUp",value:function(){this.client.element.classList.remove("b-dragcreating-proxy-sizing"),this.monitorMove=!1}},{key:"onElementContextMenu",value:function(){if(this.proxy)return!1}},{key:"onResizing",value:function(e){var t=e.context,n=e.event,r=this,o=r.client,i="left"===t.edge?t.newX:t.elementStartX,a="top"===t.edge?t.newY:t.elementStartY,u=Math.min(i+Math.max((t.newWidth||t.elementWidth)-1,0),o.timeAxisViewModel.totalSize-1),c=Math.min(a+Math.max((t.newHeight||t.elementHeight)-1,0),o.timeAxisViewModel.totalSize-1),s=o.isVertical?a:i,l=o.isVertical?c:u,f=o.getDateFromCoordinate(s,"round",!0),d=o.getDateFromCoordinate(l,"round",!0),p=r.dateConstraints,h=xt.min(f,d),y=xt.max(f,d);p&&(y=xt.constrain(y,p.start,p.end),h=xt.constrain(h,p.start,p.end)),Object.assign(r.createContext,{startDate:h,endDate:y}),t.valid=r.checkValidity(r.createContext,n),t.message="",t.valid&&"boolean"!=typeof t.valid&&(t.message=t.valid.message,t.valid=t.valid.valid),t.valid=!1!==t.valid}},{key:"onResize",value:function(e){var t=e.context.valid,n=e.event,r=this,o=r.createContext,i=o.startDate,a=o.endDate;(!i||!a||a-i<=0)&&(t=!1),r.createContext=r.prepareCreateContextForFinalization(r.createContext,n,r.finalize.bind(r)),t&&r.client.trigger("beforeDragCreateFinalize",{context:r.createContext,event:n,proxyElement:r.proxy}),r.createContext&&(r.resize.context.async=r.createContext.async,r.createContext.async?r.resize.removeListeners():r.finalize(t))}},{key:"prepareCreateContextForFinalization",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.assign({},e,{async:r,event:t,finalize:n})}},{key:"onCancel",value:function(){this.cancel()}},{key:"cancel",value:function(){this.reset(),this.mouseUpDetacher&&this.mouseUpDetacher()}},{key:"reset",value:function(){this.removeProxy(),this.createContext=null,this.monitorMove=!1}},{key:"checkValidity",value:function(e,t){throw new Error("Implement in subclass")}},{key:"triggerDragCreateEnd",value:function(e,t){throw new Error("Implement in subclass")}},{key:"handleBeforeDragCreate",value:function(e,t){throw new Error("Implement in subclass")}},{key:"isRowEmpty",value:function(e){throw new Error("Implement in subclass")}},{key:"dragging",get:function(){return this.resize}}])&&lz(n.prototype,r),o&&lz(n,o),t}(es);function gz(e){return(gz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bz(e,t){return!t||"object"!==gz(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wz(e,t,n){return(wz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kz(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kz(e){return(kz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sz(e,t){return(Sz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yz._$name="DragCreateBase";var Oz=function(e){function t(){return vz(this,t),bz(this,kz(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sz(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EventDragCreate"}},{key:"defaultConfig",get:function(){return{validatorFn:function(){}}}}],(r=[{key:"construct",value:function(e,n){this.scheduler=e,this.store=e.eventStore,wz(kz(t.prototype),"construct",this).call(this,e,n)}},{key:"finalizeDragCreate",value:function(e){var t=new this.store.modelClass({startDate:e.startDate,endDate:e.endDate});this.proxy.dataset.eventId=t.id,this.scheduler.trigger("dragCreateEnd",{newEventRecord:t,resourceRecord:e.rowRecord,event:e.event,proxyElement:this.proxy})}},{key:"handleBeforeDragCreate",value:function(e,t){var n=this,r=n.scheduler.trigger("beforeDragCreate",{resourceRecord:n.createContext.rowRecord,date:e,event:t});if(r){var o=n.scheduler.features.scheduleTooltip;o&&o.hoverTip&&o.hoverTip.hide()}return n.dateConstraints=n.scheduler.getDateConstraints(n.createContext.rowRecord,e),r}},{key:"checkValidity",value:function(e,t){var n=this.client;return e.resourceRecord=e.rowRecord,(n.allowOverlap||n.isDateRangeAvailable(e.startDate,e.endDate,null,e.resourceRecord))&&this.validatorFn.call(this.validatorFnThisObj||this,e,t)}},{key:"isRowEmpty",value:function(e){var t=this.store.getEventsForResource(e);return!t||!t.length}}])&&mz(n.prototype,r),o&&mz(n,o),t}(yz);function Ez(e){return(Ez="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cz(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function xz(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Cz(i,r,o,a,u,"next",e)}function u(e){Cz(i,r,o,a,u,"throw",e)}a(void 0)}))}}function _z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rz(e,t){return!t||"object"!==Ez(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pz(e,t,n){return(Pz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tz(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Tz(e){return(Tz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Az(e,t){return(Az=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mz(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Oz._$name="EventDragCreate",nC.registerFeature(Oz,!0,"Scheduler");var Iz=xt,Fz=function(e){if(1===e.length)return e[0].value;if(2===e.length){var t=Mz(e[0]instanceof _h?e:e.reverse(),2),n=t[0],r=t[1],o=Iz.parse(n.value);return o.setHours(r.value.getHours(),r.value.getMinutes(),r.value.getSeconds(),r.value.getMilliseconds()),o}return null},Lz=function(e,t,n){if(e&&t){var r=Iz.add((o=n.startDateField.value,i=n.startTimeField.value,(a=new Date(o.getTime())).setHours(i.getHours(),i.getMinutes()),a),n.eventRecord.durationMS,"milliseconds");n.endDateField.value=r,n.endTimeField.value=Iz.clone(r)}var o,i,a},Nz=function(e){function t(){return jz(this,t),Rz(this,Tz(t).apply(this,arguments))}var n,r,o,i,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Az(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e,n){var r,o=this;e.eventEdit=o,Pz(Tz(t.prototype),"construct",this).call(this,e,n),o.clientListenersDetacher=e.on((_z(r={},o.triggerEvent,o.onActivateEditor),_z(r,"dragcreateend",o.onDragCreateEnd),_z(r,"thisObj",o),r))}},{key:"doDestroy",value:function(){this.clientListenersDetacher(),this.editor&&this.editor.destroy(),Pz(Tz(t.prototype),"doDestroy",this).call(this)}},{key:"insertExtraWidgetsIntoDefaultWidgets",value:function(e){if(this.extraItems&&this.extraItems.length){var t,n=e.items.findIndex((function(e){return"extraItems"===e.type}));n>-1&&(e.items.splice(n,1),t=e.items.splice(n));var r=this.extraItems.filter((function(e){return e.index>=0})),o=this.extraItems.filter((function(e){return!(e.index>=0)}));e.items=e.items.concat(o),r.sort((function(e,t){return e.index-t.index})),r.forEach((function(t){return e.items.splice(t.index,0,t)})),t&&t.length&&(e.items=e.items.concat(t))}}},{key:"onDatesChange",value:function(e){var t=this,n=e.source,r=e.value;switch(n.ref){case"startDateField":t.startTimeField&&Lz(r,t.startTimeField.value,t);break;case"startTimeField":t.startDateField&&Lz(t.startDateField.value,r,t)}t.endTimeField&&(Iz.isEqual(Iz.clearTime(t.startDateField.value),Iz.clearTime(t.endDateField.value))?t.endTimeField.min=t.startTimeField.value:t.endTimeField.min=null)}},{key:"save",value:(u=xz(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Implement in subclass");case 1:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"onBeforeSave",value:function(e){}},{key:"onAfterSave",value:function(e){}},{key:"updateRecord",value:function(e){var t=this.values;this.scheduler.assignmentStore&&delete t.resource,e.set(t)}},{key:"resetEditingContext",value:function(){var e=this;e.isEditing=!1,e.client.element.classList.remove("b-eventeditor-editing"),e.phantomEventElement&&e.phantomEventElement.remove(),e.phantomEventElement=null}},{key:"onPopupKeyDown",value:function(e){var t=e.event;"Enter"===t.key&&this.saveAndCloseOnEnter&&"input"===t.target.tagName.toLowerCase()&&(t.preventDefault(),"startDate"===t.target.name&&Lz(this.startDateField.value,this.startTimeField.value,this),this.onSaveClick())}},{key:"onSaveClick",value:(a=xz(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.save();case 2:e.sent&&this.editor.close();case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onDeleteClick",value:(i=xz(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deleteEvent();case 2:e.sent&&(this.editor.autoClose&&!this.editor.containsFocus||this.editor.close());case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"onCancelClick",value:function(){this.editor.close()}},{key:"editorConfig",get:function(){return this._editorConfig},set:function(e){var t=this.getDefaultConfiguration().editorConfig;(e=Mt.assign({},t,e)).items=e.items||[],this.insertExtraWidgetsIntoDefaultWidgets(e),this._editorConfig=e}},{key:"extraWidgets",get:function(){return this._skipWarn||console.warn("`extraWidgets` was deprecated in 2.1, please change your code to use `extraItems`"),this._extraItems},set:function(e){console.warn("`extraWidgets` was deprecated in 2.1, please change your code to use `extraItems`"),this._extraItems=e}},{key:"extraItems",get:function(){var e=this;return e._skipWarn=!0,e._thisIsAUsedExpression(e.extraWidgets),e._skipWarn=!1,e._extraItems},set:function(e){this._extraItems=e}},{key:"isValid",get:function(){return Object.values(this.editor.widgetMap).every((function(e){return!(e.name&&!e.hidden)||!1!==e.isValid}))}},{key:"values",get:function(){var e=[],t=[],n={};return this.editor.eachWidget((function(r){var o=r.name;if(o&&!r.hidden)switch(o){case"startDate":e.push(r);break;case"endDate":t.push(r);break;case"resource":n[o]=r.record;break;default:n[o]=r.value}}),!0),n.startDate=Fz(e),n.endDate=Fz(t),n.duration=Iz.diff(n.startDate,n.endDate,this.editor.record.durationUnit,!0),n}}],o=[{key:"defaultConfig",get:function(){return{autoClose:!0,saveAndCloseOnEnter:!0,triggerEvent:null,showDeleteButton:!0,showNameField:!0,startTimeConfig:null,startDateConfig:null,endTimeConfig:null,endDateConfig:null,dateFormat:"L",timeFormat:"LT",editorConfig:null,extraItems:null,extraWidgets:null}}}],r&&Dz(n.prototype,r),o&&Dz(n,o),t}(es);function Hz(e){return(Hz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vz(e,t){return!t||"object"!==Hz(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wz(e,t,n){return(Wz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $z(e){return($z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yz(e,t){return(Yz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Nz._$name="EditBase";var Gz=function(e){function t(){return Bz(this,t),Vz(this,$z(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yz(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EventEditor"}},{key:"defaultConfig",get:function(){return{items:[],draggable:{handleSelector:":not(button,.b-field-inner)"},axisLock:"flexible"}}}],(r=[{key:"processWidgetConfig",value:function(e){var n=this.eventEditFeature;if("extraItems"===e.type)return!1;var r={};if("resourceField"===e.ref){if(!n.showResourceField)return!1;this.resourceStore=e.store=new n.resourceStore.constructor({chained:!0,chainAllRecords:!0,masterStore:n.resourceStore,chainedFilterFn:function(e){return!e.meta.specialRow}}),e.multiSelect=Boolean(n.scheduler.assignmentStore),n.resourceFieldConfig&&(r=n.resourceFieldConfig)}return!("nameField"===e.ref&&!n.showNameField)&&!("deleteButton"===e.ref&&!n.showDeleteButton)&&("startDate"!==e.name&&"endDate"!==e.name||"date"!==e.type||(r.format=n.dateFormat),"startDate"!==e.name&&"endDate"!==e.name||"time"!==e.type||(r.format=n.timeFormat),n.startDateConfig&&"startDate"===e.name&&"date"===e.type&&(r=n.startDateConfig),n.startTimeConfig&&"startDate"===e.name&&"time"===e.type&&(r=n.startTimeConfig),n.endDateConfig&&"endDate"===e.name&&"date"===e.type&&(r=n.endDateConfig),n.endTimeConfig&&"endDate"===e.name&&"time"===e.type&&(r=n.endTimeConfig),Object.assign(e,r),Wz($z(t.prototype),"processWidgetConfig",this).call(this,e))}},{key:"show",value:function(){var e;this.resourceStore&&this.resourceStore.fillFromMaster();for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=Wz($z(t.prototype),"show",this)).call.apply(e,[this].concat(r))}},{key:"afterShow",value:function(){var e,n=this.widgetMap.deleteButton;n&&(n.hidden=this.readOnly||!this.record.stores.length);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(e=Wz($z(t.prototype),"afterShow",this)).call.apply(e,[this].concat(o))}},{key:"onInternalKeyDown",value:function(e){this.trigger("keyDown",{event:e}),Wz($z(t.prototype),"onInternalKeyDown",this).call(this,e)}},{key:"readOnly",set:function(e){var t=this.widgetMap,n=t.deleteButton,r=t.saveButton,o=t.cancelButton;this._readOnly=e,this.element.classList[e?"add":"remove"]("b-readonly"),this.eachWidget((function(t){"_originalReadOnly"in t||(t._originalReadOnly=t._readOnly||!1),t.readOnly=e||t._originalReadOnly})),n&&(n.hidden=e),r&&(r.hidden=e),o&&(o.hidden=e)},get:function(){return this._readOnly}}])&&zz(n.prototype,r),o&&zz(n,o),t}(Ya);function Uz(e){return(Uz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kz(e,t){return!t||"object"!==Uz(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zz(e,t,n){return(Zz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jz(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Jz(e){return(Jz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qz(e,t){return(Qz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Gz._$name="EventEditor";var eV=function(e){function t(){return qz(this,t),Kz(this,Jz(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qz(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceConfirmationPopup"}},{key:"defaultConfig",get:function(){return{localizableProperties:[],align:"b-t",autoShow:!1,autoClose:!1,centered:!0,scrollAction:"realign",constrainTo:window,draggable:!0,closable:!0,floating:!0,eventRecord:null,cls:"b-sch-recurrenceconfirmation",bbar:[{color:"b-green",localeClass:this,text:"L{Yes}",ref:"changeMultipleButton"},{color:"b-gray",localeClass:this,text:"L{update-only-this-btn-text}",ref:"changeSingleButton"},{color:"b-gray",localeClass:this,text:"L{Cancel}",ref:"cancelButton"}]}}}],(r=[{key:"construct",value:function(){for(var e,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(e=Zz(Jz(t.prototype),"construct",this)).call.apply(e,[this].concat(o));var a=n.widgetMap,u=a.changeMultipleButton,c=a.changeSingleButton,s=a.cancelButton;u&&u.on("click",n.onChangeMultipleButtonClick,n),c&&c.on("click",n.onChangeSingleButtonClick,n),s&&s.on("click",n.onCancelButtonClick,n),n.on("toolclick",n.onToolClick,n)}},{key:"onChangeMultipleButtonClick",value:function(){this.processMultipleRecords(),this.close()}},{key:"onChangeSingleButtonClick",value:function(){this.processSingleRecord(),this.close()}},{key:"onCancelButtonClick",value:function(){this.cancelFn&&this.cancelFn.call(this.thisObj),this.close()}},{key:"onToolClick",value:function(e){"close"===e.tool.handler&&this.cancelFn&&this.cancelFn.call(this.thisObj)}},{key:"confirm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;return["actionType","eventRecord","title","html","changerFn","cancelFn","thisObj"].forEach((function(t){t in e&&(n[t]=e[t])})),n.updatePopupContent(),Zz(Jz(t.prototype),"show",this).call(this,e)}},{key:"updatePopupContent",value:function(){var e=this,t=e.widgetMap,n=t.changeMultipleButton,r=t.changeSingleButton,o=t.cancelButton,i=e.eventRecord,a=e.actionType,u=void 0===a?"update":a,c=i&&i.isRecurring;c?(n.text=e.L("Yes"),e.html=e.L("".concat(u,"-all-message"))):(n.text=e.L("".concat(u,"-further-btn-text")),e.html=e.L("".concat(u,"-further-message"))),r.text=e.L("".concat(u,"-only-this-btn-text")),o.text=e.L("Cancel"),c?r.hide():r.show(),e.width=e.L("width"),e.title=e.L("".concat(u,"-title"))}},{key:"processMultipleRecords",value:function(){var e=this.eventRecord,t=this.changerFn,n=this.thisObj,r=e.recurringEvent,o=new Date(e.startDate-1);e.beginBatch(),t.call(n,e),e.recurringTimeSpanId=null,e.endBatch(),r&&(r.recurrence.endDate=o)}},{key:"processSingleRecord",value:function(){var e=this.eventRecord,t=this.changerFn,n=this.thisObj,r=e.recurringEvent,o=e.startDate;e.beginBatch(),t.call(n),e.recurrence=null,e.endBatch(),r.addExceptionDate(o)}},{key:"updateLocalization",value:function(){this.updatePopupContent(),Zz(Jz(t.prototype),"updateLocalization",this).call(this)}}])&&Xz(n.prototype,r),o&&Xz(n,o),t}(Ya);function tV(e){return(tV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oV(e,t){return!t||"object"!==tV(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iV(e){return(iV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aV(e,t){return(aV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}eV._$name="RecurrenceConfirmationPopup",se.register("recurrenceconfirmation",eV);var uV=function(e){function t(){return nV(this,t),oV(this,iV(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aV(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceFrequencyCombo"}},{key:"defaultConfig",get:function(){return{editable:!1,displayField:"text",valueField:"value"}}}],(r=[{key:"buildLocalizedItems",value:function(){return[{value:"DAILY",text:this.L("Daily")},{value:"WEEKLY",text:this.L("Weekly")},{value:"MONTHLY",text:this.L("Monthly")},{value:"YEARLY",text:this.L("Yearly")}]}}])&&rV(n.prototype,r),o&&rV(n,o),t}(Lj(jp));function cV(e){return(cV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sV(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function lV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dV(e,t){return!t||"object"!==cV(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pV(e,t,n,r){return(pV="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=yV(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function hV(e,t,n){return(hV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=yV(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yV(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gV(e)););return e}function gV(e){return(gV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vV(e,t){return(vV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}uV._$name="RecurrenceFrequencyCombo",se.register("recurrencefrequencycombo",uV);var mV=function(e){function t(){return lV(this,t),dV(this,gV(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vV(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceCombo"}},{key:"defaultConfig",get:function(){return{customValue:"custom",placeholder:"None",splitCls:"b-recurrencecombo-split",items:!0,highlightExternalChange:!1}}}],(r=[{key:"buildLocalizedItems",value:function(){return[{value:"none",text:this.L("None")}].concat(sV(hV(gV(t.prototype),"buildLocalizedItems",this).call(this)),[{value:this.customValue,text:this.L("Custom..."),cls:this.splitCls}])}},{key:"isCustomRecurrence",value:function(e){var t=e.interval,n=e.days,r=e.monthDays,o=e.months;return Boolean(t>1||n&&n.length||r&&r.length||o&&o.length)}},{key:"value",set:function(e){e=e||"none",function(e,t,n,r,o){if(!pV(e,t,n,r||e)&&o)throw new Error("failed to set property")}(gV(t.prototype),"value",e,this,!0)},get:function(){return hV(gV(t.prototype),"value",this)}},{key:"recurrence",set:function(e){this.value=e?this.isCustomRecurrence(e)?this.customValue:e.frequency:null}}])&&fV(n.prototype,r),o&&fV(n,o),t}(uV);function bV(e){return(bV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SV(e,t){return!t||"object"!==bV(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OV(e){return(OV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EV(e,t){return(EV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}mV._$name="RecurrenceCombo",se.register("recurrencecombo",mV);var CV=function(e){function t(){return wV(this,t),SV(this,OV(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EV(e,t)}(t,e),n=t,o=[{key:"getLegend",value:function(e,t){var n,r=this,o=e.timeSpan,i=e.interval,a=e.days,u=e.monthDays,c=e.months,s=e.positions,l=t||o.startDate,f={interval:i};switch(e.frequency){case"DAILY":return 1==i?r.L("Daily"):r.L("Every {0} days",f);case"WEEKLY":return a&&a.length?f.days=r.getDaysLegend(a):l&&(f.days=xt.getDayName(l.getDay())),r.L(1==i?"Weekly on {1}":"Every {0} weeks on {1}",f);case"MONTHLY":return a&&a.length&&s&&s.length?f.days=r.getDaysLegend(a,s):u&&u.length?(u.sort((function(e,t){return e-t})),f.days=r.arrayToText(u)):l&&(f.days=l.getDate()),r.L(1==i?"Monthly on {1}":"Every {0} months on {1}",f);case"YEARLY":return a&&a.length&&s&&s.length?f.days=r.getDaysLegend(a,s):f.days=l.getDate(),c&&c.length?(c.sort((function(e,t){return e-t})),n=c.length>2?function(e){return xt.getMonthShortName(e-1)}:function(e){return xt.getMonthName(e-1)},f.months=r.arrayToText(c,n)):f.months=xt.getMonthName(l.getMonth()),r.L(1==i?"Yearly on {1} of {2}":"Every {0} years on {1} of {2}",f)}}},{key:"getDaysLegend",value:function(e,t){var n,r=this,o={position:""};if(t&&t.length&&(o.position=r.arrayToText(t,(function(e){return r.L("position".concat(e))}))),e.length)switch(e.sort((function(e,t){return xI.decodeDay(e)[0]-xI.decodeDay(t)[0]})),e.join(",")){case r.allDaysValue:o.days=r.L("day");break;case r.workingDaysValue:o.days=r.L("weekday");break;case r.nonWorkingDaysValue:o.days=r.L("weekend day");break;default:n=e.length>2?function(e){return xt.getDayShortName(xI.decodeDay(e)[0])}:function(e){return xt.getDayName(xI.decodeDay(e)[0])},o.days=r.arrayToText(e,n)}return r.L("daysFormat",o)}},{key:"arrayToText",value:function(e,t){return t&&(e=e.map(t)),e.join(", ").replace(/,(?=[^,]*$)/,this.L(" and "))}},{key:"$name",get:function(){return"RecurrenceLegend"}},{key:"allDaysValue",get:function(){return"SU,MO,TU,WE,TH,FR,SA"}},{key:"workingDaysValue",get:function(){return"MO,TU,WE,TH,FR"}},{key:"nonWorkingDaysValue",get:function(){return"SU,SA"}}],(r=null)&&kV(n.prototype,r),o&&kV(n,o),t}(ze());function xV(e){return(xV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DV(e,t){return!t||"object"!==xV(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RV(e,t,n){return(RV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PV(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function PV(e){return(PV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TV(e,t){return(TV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}CV._$name="RecurrenceLegend";var AV=function(e){function t(){return _V(this,t),DV(this,PV(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TV(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceLegendButton"}},{key:"defaultConfig",get:function(){return{localizableProperties:[],recurrence:null}}}],(r=[{key:"updateLegend",value:function(){var e=this.recurrence;this.text=e?CV.getLegend(e,this.eventStartDate):""}},{key:"onLocaleChange",value:function(){this.updateLegend()}},{key:"updateLocalization",value:function(){this.onLocaleChange(),RV(PV(t.prototype),"updateLocalization",this).call(this)}},{key:"recurrence",set:function(e){this._recurrence=e,this.updateLegend()},get:function(){return this._recurrence}},{key:"eventStartDate",set:function(e){this._eventStartDate=e,this.updateLegend()},get:function(){return this._eventStartDate}}])&&jV(n.prototype,r),o&&jV(n,o),t}(tc);function MV(e){return(MV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LV(e,t){return!t||"object"!==MV(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NV(e,t,n){return(NV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=BV(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function HV(e,t,n,r){return(HV="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=BV(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function BV(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zV(e)););return e}function zV(e){return(zV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VV(e,t){return(VV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}AV._$name="RecurrenceLegendButton",se.register("recurrencelegendbutton",AV);var WV=function(e){function t(){return IV(this,t),LV(this,zV(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VV(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceDaysCombo"}},{key:"defaultConfig",get:function(){return{allDaysValue:"SU,MO,TU,WE,TH,FR,SA",editable:!1,defaultValue:"SU,MO,TU,WE,TH,FR,SA",workingDaysValue:"MO,TU,WE,TH,FR",nonWorkingDaysValue:"SU,SA",splitCls:"b-recurrencedays-split",displayField:"text",valueField:"value"}}}],(r=[{key:"buildLocalizedItems",value:function(){var e=this;return e._weekDays=null,e.weekDays.concat([{value:e.allDaysValue,text:e.L("day"),cls:e.splitCls},{value:e.workingDaysValue,text:e.L("weekday")},{value:e.nonWorkingDaysValue,text:e.L("weekend day")}])}},{key:"weekDays",get:function(){if(!this._weekDays){var e=xt.weekStartDay,t=xt.getDayNames().map((function(e,t){return{text:e,value:xI.encodeDay(t)}}));this._weekDays=t.slice(e).concat(t.slice(0,e))}return this._weekDays}},{key:"value",set:function(e){e&&Array.isArray(e)&&(e=e.join(",")),e&&this.store.findRecord("value",e)||(e=this.defaultValue),function(e,t,n,r,o){if(!HV(e,t,n,r||e)&&o)throw new Error("failed to set property")}(zV(t.prototype),"value",e,this,!0)},get:function(){var e=NV(zV(t.prototype),"value",this);return e&&Array.isArray(e)&&(e=e.join(",")),e}}])&&FV(n.prototype,r),o&&FV(n,o),t}(Lj(jp));function $V(e){return($V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UV(e,t){return!t||"object"!==$V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qV(e,t,n,r){return(qV="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=KV(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function XV(e,t,n){return(XV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=KV(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function KV(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZV(e)););return e}function ZV(e){return(ZV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JV(e,t){return(JV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}WV._$name="RecurrenceDaysCombo",se.register("recurrencedayscombo",WV);var QV=function(e){function t(){return YV(this,t),UV(this,ZV(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JV(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceDaysButtonGroup"}},{key:"defaultConfig",get:function(){return{defaults:{cls:"b-raised",toggleable:!0}}}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;e.columns=7,e.items=n.buildItems(),XV(ZV(t.prototype),"construct",this).call(this,e)}},{key:"updateItemText",value:function(e){var t=xI.decodeDay(e.value)[0];e.text=xt.getDayName(t).substring(0,3)}},{key:"buildItems",value:function(){if(!this.__items){var e=xt.weekStartDay,t=xt.getDayNames().map((function(e,t){return{text:e.substring(0,3),value:xI.encodeDay(t)}}));this.__items=t.slice(e).concat(t.slice(0,e))}return this.__items}},{key:"onLocaleChange",value:function(){this.items.forEach(this.updateItemText,this)}},{key:"updateLocalization",value:function(){this.onLocaleChange(),XV(ZV(t.prototype),"updateLocalization",this).call(this)}},{key:"value",set:function(e){e&&Array.isArray(e)&&(e=e.join(",")),function(e,t,n,r,o){if(!qV(e,t,n,r||e)&&o)throw new Error("failed to set property")}(ZV(t.prototype),"value",e,this,!0)},get:function(){var e=XV(ZV(t.prototype),"value",this);return e&&Array.isArray(e)&&(e=e.join(",")),e}},{key:"widgetClassList",get:function(){var e=XV(ZV(t.prototype),"widgetClassList",this);return e.push("b-field"),e}}])&&GV(n.prototype,r),o&&GV(n,o),t}(fc);function eW(e){return(eW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rW(e,t){return!t||"object"!==eW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oW(e,t,n){return(oW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iW(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function iW(e){return(iW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aW(e,t){return(aW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}QV._$name="RecurrenceDaysButtonGroup",se.register("recurrencedaysbuttongroup",QV);var uW=function(e){function t(){return tW(this,t),rW(this,iW(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aW(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceMonthDaysButtonGroup"}},{key:"defaultConfig",get:function(){return{defaults:{toggleable:!0,cls:"b-raised"}}}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;e.columns=7,e.items=n.buildItems(),oW(iW(t.prototype),"construct",this).call(this,e)}},{key:"buildItems",value:function(){for(var e=[],t=this.minValue;t<=this.maxValue;t++)e.push({text:t+"",value:t});return e}},{key:"minValue",get:function(){return 1}},{key:"maxValue",get:function(){return 31}},{key:"widgetClassList",get:function(){var e=oW(iW(t.prototype),"widgetClassList",this);return e.push("b-field"),e}}])&&nW(n.prototype,r),o&&nW(n,o),t}(fc);function cW(e){return(cW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fW(e,t){return!t||"object"!==cW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dW(e,t,n){return(dW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pW(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pW(e){return(pW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hW(e,t){return(hW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}uW._$name="RecurrenceMonthDaysButtonGroup",se.register("recurrencemonthdaysbuttongroup",uW);var yW=function(e){function t(){return sW(this,t),fW(this,pW(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hW(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceMonthsButtonGroup"}},{key:"defaultConfig",get:function(){return{defaults:{toggleable:!0,cls:"b-raised"}}}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;e.columns=4,e.items=n.buildItems(),dW(pW(t.prototype),"construct",this).call(this,e)}},{key:"buildItems",value:function(){return xt.getMonthNames().map((function(e,t){return{text:e.substring(0,3),value:t+1}}))}},{key:"updateItemText",value:function(e){e.text=xt.getMonthName(e.value-1).substring(0,3)}},{key:"onLocaleChange",value:function(){this.items.forEach(this.updateItemText,this)}},{key:"updateLocalization",value:function(){this.onLocaleChange(),dW(pW(t.prototype),"updateLocalization",this).call(this)}},{key:"widgetClassList",get:function(){var e=dW(pW(t.prototype),"widgetClassList",this);return e.push("b-field"),e}}])&&lW(n.prototype,r),o&&lW(n,o),t}(fc);function gW(e){return(gW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bW(e,t){return!t||"object"!==gW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wW(e,t,n){return(wW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=SW(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kW(e,t,n,r){return(kW="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=SW(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function SW(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OW(e)););return e}function OW(e){return(OW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EW(e,t){return(EW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yW._$name="RecurrenceMonthsButtonGroup",se.register("recurrencemonthsbuttongroup",yW);var CW=function(e){function t(){return vW(this,t),bW(this,OW(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EW(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceStopConditionCombo"}},{key:"defaultConfig",get:function(){return{editable:!1,placeholder:"Never",displayField:"text",valueField:"value"}}}],(r=[{key:"buildLocalizedItems",value:function(){return[{value:"never",text:this.L("Never")},{value:"count",text:this.L("After")},{value:"date",text:this.L("On date")}]}},{key:"value",set:function(e){e=e||"never",function(e,t,n,r,o){if(!kW(e,t,n,r||e)&&o)throw new Error("failed to set property")}(OW(t.prototype),"value",e,this,!0)},get:function(){return wW(OW(t.prototype),"value",this)}},{key:"recurrence",get:function(){return this._recurrence},set:function(e){var t=null;e.endDate?t="date":e.count&&(t="count"),this._recurrence=e,this.value=t}}])&&mW(n.prototype,r),o&&mW(n,o),t}(Lj(jp));function xW(e){return(xW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DW(e,t){return!t||"object"!==xW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RW(e,t,n){return(RW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=TW(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function PW(e,t,n,r){return(PW="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=TW(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function TW(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AW(e)););return e}function AW(e){return(AW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MW(e,t){return(MW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}CW._$name="RecurrenceStopConditionCombo",se.register("recurrencestopconditioncombo",CW);var IW=function(e){function t(){return _W(this,t),DW(this,AW(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MW(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrencePositionsCombo"}},{key:"defaultConfig",get:function(){return{editable:!1,splitCls:"b-sch-recurrencepositions-split",displayField:"text",valueField:"value",defaultValue:1,maxPosition:5}}}],(r=[{key:"buildLocalizedItems",value:function(){return this.buildDayNumbers().concat([{value:"-1",text:this.L("position-1"),cls:this.splitCls}])}},{key:"buildDayNumbers",value:function(){var e=this;return U.populate(e.maxPosition,(function(t){return{value:t,text:e.L("position".concat(t))}}))}},{key:"value",set:function(e){e&&Array.isArray(e)&&(e=e.join(",")),e&&this.store.findRecord("value",e)||(e=this.defaultValue),function(e,t,n,r,o){if(!PW(e,t,n,r||e)&&o)throw new Error("failed to set property")}(AW(t.prototype),"value",e,this,!0)},get:function(){var e=RW(AW(t.prototype),"value",this);return e?"".concat(e).split(",").map((function(e){return parseInt(e,10)})):[]}}])&&jW(n.prototype,r),o&&jW(n,o),t}(Lj(jp));function FW(e){return(FW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HW(e,t){return!t||"object"!==FW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BW(e,t,n,r){return(BW="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=VW(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function zW(e,t,n){return(zW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=VW(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function VW(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WW(e)););return e}function WW(e){return(WW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $W(e,t){return($W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}IW._$name="RecurrencePositionsCombo",se.register("recurrencepositionscombo",IW);var YW=function(e){function t(){return LW(this,t),HW(this,WW(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$W(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurrenceEditor"}},{key:"defaultConfig",get:function(){return{draggable:!0,closable:!0,floating:!0,cls:"b-recurrenceeditor",title:"L{Repeat event}",autoClose:!0,width:400,items:{frequencyField:!0,daysButtonField:!0,monthDaysRadioField:!0,monthDaysButtonField:!0,monthsButtonField:!0,positionAndDayRadioField:!0,stopRecurrenceField:!0,countField:!0,endDateField:!0,intervalField:!0,positionsCombo:!0,daysCombo:!0},namedItems:{frequencyField:{type:"recurrencefrequencycombo",name:"frequency",localeClass:this,label:"L{Frequency}",weight:10,onChange:"up.onFrequencyFieldChange"},intervalField:{type:"numberfield",weight:15,name:"interval",localeClass:this,label:"L{Every}",labels:[{align:"end",reference:"intervalUnit",style:{width:"50em"}}],min:1,allowBlank:!1},daysButtonField:{type:"recurrencedaysbuttongroup",weight:20,name:"days",forFrequency:"WEEKLY"},monthDaysRadioField:{type:"checkbox",weight:30,toggleGroup:"radio",forFrequency:"MONTHLY",localeClass:this,label:"L{Each}",checked:!0,onChange:"up.onMonthDaysRadioFieldChange"},monthDaysButtonField:{type:"recurrencemonthdaysbuttongroup",weight:40,name:"monthDays",forFrequency:"MONTHLY"},monthsButtonField:{type:"recurrencemonthsbuttongroup",weight:50,name:"months",forFrequency:"YEARLY"},positionAndDayRadioField:{type:"checkbox",weight:60,toggleGroup:"radio",forFrequency:"MONTHLY|YEARLY",localeClass:this,label:"L{On the}",onChange:"up.onPositionAndDayRadioFieldChange"},positionsCombo:{type:"recurrencepositionscombo",weight:80,name:"positions",forFrequency:"MONTHLY|YEARLY"},daysCombo:{type:"recurrencedayscombo",weight:90,name:"days",forFrequency:"MONTHLY|YEARLY",flex:1},stopRecurrenceField:{type:"recurrencestopconditioncombo",weight:100,localeClass:this,label:"L{End repeat}",onChange:"up.onStopRecurrenceFieldChange"},countField:{type:"numberfield",weight:110,name:"count",min:2,localeClass:this,allowBlank:!1,disabled:!0,label:" ",labels:[{align:"end",reference:"countUnit",label:"L{time(s)}"}]},endDateField:{type:"datefield",weight:120,name:"endDate",hidden:!0,disabled:!0,label:" ",allowBlank:!1}},bbar:[{type:"widget",cls:"b-label-filler"},{type:"button",color:"b-green",ref:"saveButton",localeClass:this,text:"L{Save}",onClick:"up.onSaveClick"},{type:"button",color:"b-gray",ref:"cancelButton",localeClass:this,text:"L{Cancel}",onClick:"up.onCancelClick"}]}}}],(r=[{key:"onSaveClick",value:function(){var e=this;e.saveHandler?e.saveHandler.call(e.thisObj||e,e,e.record):(e.updateRecord(),e.close())}},{key:"onCancelClick",value:function(){var e=this;e.cancelHandler?e.cancelHandler.call(e.thisObj||e,e,e.record):e.close()}},{key:"updateRecord",value:function(e){var t=this.getValues((function(t){return t.name in e&&!t.disabled}));e.set(t)}},{key:"toggleStopFields",value:function(){var e=this.widgetMap,t=e.countField,n=e.endDateField;switch(this.widgetMap.stopRecurrenceField.value){case"count":t.show(),t.enable(),n.hide(),n.disable();break;case"date":t.hide(),t.disable(),n.show(),n.enable();break;default:t.hide(),n.hide(),t.disable(),n.disable()}}},{key:"onMonthDaysRadioFieldChange",value:function(e){var t=e.checked,n=this.widgetMap.monthDaysButtonField;n.disabled=!t||!this.isWidgetAvailableForFrequency(n)}},{key:"onPositionAndDayRadioFieldChange",value:function(e){var t=e.checked,n=this.widgetMap,r=n.daysCombo,o=n.positionsCombo;r.disabled=o.disabled=!t||!this.isWidgetAvailableForFrequency(r)}},{key:"onStopRecurrenceFieldChange",value:function(){this.toggleStopFields()}},{key:"isWidgetAvailableForFrequency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widgetMap.frequencyField.value;return!e.forFrequency||e.forFrequency.indexOf(t)>-1}},{key:"onFrequencyFieldChange",value:function(e){var t=e.value,n=e.valid,r=this,o=r.queryAll((function(e){return"forFrequency"in e}));if(n&&t){for(var i=0;i<o.length;i++){var a=o[i];r.isWidgetAvailableForFrequency(a,t)?(a.show(),a.enable()):(a.hide(),a.disable())}r.widgetMap.intervalField.intervalUnit.innerHTML=r.L("".concat(t,"intervalUnit")),r.toggleFieldsState()}}},{key:"toggleFieldsState",value:function(){var e=this.widgetMap;this.onMonthDaysRadioFieldChange({checked:e.monthDaysRadioField.checked}),this.onPositionAndDayRadioFieldChange({checked:e.positionAndDayRadioField.checked}),this.onStopRecurrenceFieldChange()}},{key:"updateLocalization",value:function(){var e=this.widgetMap,n=e.countField,r=e.intervalField,o=e.frequencyField;n.countUnit.innerHTML=this.L("time(s)"),r.intervalUnit.innerHTML=this.L("".concat(o.value,"intervalUnit")),zW(WW(t.prototype),"updateLocalization",this).call(this)}},{key:"record",get:function(){return zW(WW(t.prototype),"record",this)},set:function(e){!function(e,t,n,r,o){if(!BW(e,t,n,r||e)&&o)throw new Error("failed to set property")}(WW(t.prototype),"record",e,this,!0);var n=e.timeSpan,r=n&&n.startDate,o=this.widgetMap,i=o.daysButtonField,a=o.monthDaysButtonField,u=o.monthsButtonField,c=o.monthDaysRadioField,s=o.positionAndDayRadioField,l=o.stopRecurrenceField;r&&(e.days&&e.days.length||(i.value=[xI.encodeDay(r.getDay())]),e.monthDays&&e.monthDays.length||(a.value=r.getDate()),e.months&&e.months.length||(u.value=r.getMonth()+1)),e.days&&e.positions?(s.check(),this.isPainted||c.uncheck()):(c.check(),this.isPainted||s.uncheck()),l.recurrence=e}}])&&NW(n.prototype,r),o&&NW(n,o),t}(Ya);function GW(e){return(GW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qW(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function XW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZW(e,t){return!t||"object"!==GW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JW(e,t,n){return(JW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QW(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function QW(e){return(QW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e$(e,t){return(e$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}YW._$name="RecurrenceEditor",se.register("recurrenceeditor",YW);function t$(e){return(t$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o$(e,t){return!t||"object"!==t$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i$(e,t,n){return(i$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a$(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function a$(e){return(a$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u$(e,t){return(u$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c$=function(e){function t(){return n$(this,t),o$(this,a$(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u$(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EventEdit"}},{key:"defaultConfig",get:function(){return{triggerEvent:"eventdblclick",showResourceField:!0,resourceFieldConfig:null,typeField:"eventType",eventRecord:null,readOnly:null,editorConfig:{title:"L{Edit Event}",localeClass:this,closable:!0,items:[{type:"text",localeClass:this,label:"L{Name}",clearable:!0,name:"name",ref:"nameField"},{type:"combo",localeClass:this,label:"L{Resource}",name:"resource",ref:"resourceField",editable:!0,valueField:"id",displayField:"name"},{type:"date",cls:"b-inline",clearable:!1,required:!0,localeClass:this,label:"L{Start}",name:"startDate",ref:"startDateField",flex:"1 0 60%"},{type:"time",clearable:!1,required:!0,name:"startDate",ref:"startTimeField",cls:"b-match-label",flex:"1 0 40%"},{type:"date",cls:"b-inline",clearable:!1,required:!0,localeClass:this,label:"L{End}",name:"endDate",ref:"endDateField",flex:"1 0 60%"},{type:"time",clearable:!1,required:!0,name:"endDate",ref:"endTimeField",cls:"b-match-label",flex:"1 0 40%"},{type:"extraItems"}],bbar:[{type:"widget",cls:"b-label-filler"},{color:"b-green",localeClass:this,text:"L{Save}",ref:"saveButton"},{color:"b-gray",localeClass:this,text:"L{Delete}",ref:"deleteButton"},{color:"b-gray",localeClass:this,text:"L{Cancel}",ref:"cancelButton"}]}}}},{key:"pluginConfig",get:function(){return{chain:["getEventMenuItems","onEventEnterKey"],assign:["editEvent"]}}}],(r=[{key:"construct",value:function(e,n){this.scheduler=e,this.eventStore=e.eventStore,this.resourceStore=e.resourceStore,i$(a$(t.prototype),"construct",this).call(this,e,n)}},{key:"getEditor",value:function(){var e=this,t=e.editor;return t||(0===(t=e.editor=new Gz(e.getEditorConfig())).items.length&&console.warn("Event Editor configured without any `items`"),t.on({beforehide:e.resetEditingContext,keydown:e.onPopupKeyDown,thisObj:e}),Object.values(t.widgetMap).forEach((function(t){var n=t.ref||t.id;if(n&&!e[n])switch(e[n]=t,t.name){case"startDate":case"endDate":t.on("change",e.onDatesChange,e)}})),e.onEditorConstructed&&e.onEditorConstructed(t),e.eventTypeField&&e.eventTypeField.on("change",e.onEventTypeChange,e),e.saveButton&&e.saveButton.on("click",e.onSaveClick,e),e.deleteButton&&e.deleteButton.on("click",e.onDeleteClick,e),e.cancelButton&&e.cancelButton.on("click",e.onCancelClick,e),e.editor)}},{key:"getEditorConfig",value:function(){var e=this,t=e.autoClose,n=e.cls,r=e.readOnly;return Mt.assign({eventEditFeature:e,align:"b-t",id:"".concat(e.scheduler.id,"-event-editor"),autoShow:!1,anchor:!0,scrollAction:"realign",clippedBy:[e.scheduler.timeAxisSubGridElement,e.scheduler.bodyContainer],constrainTo:window,autoClose:t,readOnly:r,cls:n},e.editorConfig)}},{key:"internalShowEditor",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this,i=o.scheduler,a=r||xn.down(i.getElementFromEventRecord(e,n),i.eventInnerSelector);if(a||!e.isPartOfStore(i.eventStore)){if(!1===i.trigger("beforeEventEdit",{eventEdit:o,eventRecord:e,resourceRecord:n,eventElement:a}))return i.element.classList.remove("b-eventeditor-editing"),o.phantomEventElement&&o.phantomEventElement.remove(),void(o.phantomEventElement=null);o.resourceRecord=n;var u=o.getEditor(e);i$(a$(t.prototype),"internalShowEditor",this)&&i$(a$(t.prototype),"internalShowEditor",this).call(this,e,n,r),o.typeField&&o.toggleEventType(e.get(o.typeField)),i.trigger("beforeEventEditShow",{eventEdit:o,eventRecord:e,resourceRecord:n,eventElement:a,editor:u}),o.isEditing=!0,o.loadRecord(e,n),a?(a.classList.add("b-editing"),u.showBy({target:a,anchor:!0})):u.showBy({target:i.element,anchor:!1,align:"c-c"});var c=i.timeAxisViewModel.timeResolution;"hour"!==c.unit&&"minute"!==c.unit||(o.startTimeField.step=o.endTimeField.step="".concat(c.increment).concat(c.unit))}}},{key:"editEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this,o=r.scheduler,i=o.eventStore.indexOf(e)<0;r.isEditing&&r.resetEditingContext(),o.readOnly||r.disabled||(o.element.classList.add("b-eventeditor-editing"),t||(e.resource?t=e.resource:e.resourceId&&(t=o.resourceStore.getById(e.resourceId))),i&&(this.phantomEventElement=n),n||i?r.internalShowEditor(e,t,n):o.scrollResourceEventIntoView(t,e,null,{animate:!0,edgeOffset:0,extendTimeAxis:!1}).then((function(){return r.internalShowEditor(e,t)}),(function(){return o.element.classList.remove("b-eventeditor-editing")})))}},{key:"loadRecord",value:function(e,t){this.loadingRecord=!0,this.internalLoadRecord(e,t),this.loadingRecord=!1}},{key:"internalLoadRecord",value:function(e,n){var r=this,o=r.client.eventStore;if(r.eventRecord=e,r.resourceRecord=n,r.editor.record=e,r.resourceField){var i=o.getResourcesForEvent(e);!o.storage.includes(e,!0)&&r.resourceRecord?r.resourceField.value=r.resourceRecord[r.resourceField.valueField]:r.scheduler.assignmentStore&&(r.resourceField.value=i.map((function(e){return e[r.resourceField.valueField]})))}i$(a$(t.prototype),"internalLoadRecord",this).call(this,e,n)}},{key:"toggleEventType",value:function(e){this.editor.element.dataset.eventType=e||"",this.editor.eachWidget((function(t){return t.dataset&&t.dataset.eventType&&(t.hidden=t.dataset.eventType!==e)}))}},{key:"finalizeEventSave",value:function(e,t,n,r){var o=this,i=o.scheduler,a=o.eventStore;if(o.onBeforeSave(e),e.beginBatch(),o.updateRecord(e),e.endBatch(),a&&!e.stores.length){if(!1===i.trigger("beforeEventAdd",{eventRecord:e,resourceRecords:t,resources:t}))return void n(!1);if(i.isInTimeAxis(e)){if(o.phantomEventElement){var u=i.generateTplData(e,t[0]);u&&(xn.syncClassList(o.phantomEventElement,u.wrapperCls),xn.createElement({tag:"div",parent:o.phantomEventElement,className:u.cls.toString()}),o.phantomEventElement.classList.add("b-sch-dragcreator-proxy"),o.phantomEventElement.id=u.id,o.phantomEventElement.dataset.syncId=e.id,i.isHorizontal&&i.currentOrientation.releaseTimeSpanDiv(o.phantomEventElement,!0),o.phantomEventElement=null,e.instanceMeta(i).fromDragProxy=!0)}}else o.phantomEventElement.remove();if(o.eventStore.add(e),o.eventStore.assignEventToResource(e,t),!o.eventStore.includes(e)){var c=i.element.querySelector(".b-sch-dragcreator-proxy");c&&(i.currentOrientation.availableDivs.remove(c),c.remove())}}else i.assignmentStore&&o.eventStore.assignEventToResource(e,t,!0);i.trigger("afterEventSave",{eventRecord:e}),o.onAfterSave(e),n(e)}},{key:"save",value:function(){var e=this;return new Promise((function(t,n){var r=e,o=r.scheduler,i=r.eventRecord;if(i&&r.isValid){var a=r.eventStore,u=r.values,c=r.resourceField&&r.resourceField.records||[r.resourceRecord],s=c[0];if(!r.scheduler.allowOverlap&&a&&c.some((function(e){return!a.isDateRangeAvailable(u.startDate,u.endDate,i,e)})))return void t(!1);var l={finalize:function(e){try{!1!==e?r.finalizeEventSave(i,c,t,n):t(!1)}catch(e){n(e)}}};!1!==o.trigger("beforeEventSave",{eventRecord:i,resourceRecords:c,resourceRecord:s,values:u,context:l})?l.finalize():l.async||t()}else t(!1)}))}},{key:"deleteEvent",value:function(){var e=this;return new Promise((function(t,n){var r=e,o=r.eventRecord,i=r.editor;r.scheduler.removeRecords([o],(function(e){e&&i.containsFocus&&i.revertFocus(),t(e)}))}))}},{key:"onActivateEditor",value:function(e){var t=e.eventRecord,n=e.resourceRecord,r=e.eventElement;this.editEvent(t,n,r)}},{key:"onDragCreateEnd",value:function(e){var t=e.newEventRecord,n=e.resourceRecord,r=e.proxyElement;if(!this.disabled){this.scheduler.onEventCreated(t);var o=r.cloneNode(!0);o.removeAttribute("id"),r.parentElement.appendChild(o),this.editEvent(t,n,o)}}},{key:"onEventEnterKey",value:function(e){var t=e.assignmentRecord,n=e.eventRecord;t?this.editEvent(n,t.resource):n&&this.editEvent(n,n.resource)}},{key:"onEventTypeChange",value:function(e){var t=e.value;this.toggleEventType(t)}},{key:"getEventMenuItems",value:function(e){var t=this,n=e.eventRecord,r=e.resourceRecord,o=e.items;this.scheduler.readOnly||(o.editEvent={text:this.L("Edit Event"),icon:"b-icon b-icon-edit",weight:-200,onItem:function(){t.editEvent(n,r)}})}},{key:"readOnly",get:function(){return this.editor?this.editor.readOnly:this._readOnly},set:function(e){this._readOnly=e,this.editor&&(this.editor.readOnly=e)}},{key:"values",get:function(){var e=i$(a$(t.prototype),"values",this);return!this.scheduler.assignmentStore&&e.resource&&(e.resourceId=e.resource.id,delete e.resource),e}},{key:"resourceStore",get:function(){return this._resourceStore},set:function(e){this._resourceStore=e,this.resourceField&&(this.resourceField.store=e)}}])&&r$(n.prototype,r),o&&r$(n,o),t}(function(e){return function(e){function t(){return XW(this,t),ZW(this,QW(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&e$(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"RecurringEventEdit"}},{key:"defaultConfig",get:function(){return{recurringEventsItems:[{type:"recurrencecombo",label:"L{Repeat}",ref:"recurrenceCombo"},{type:"recurrencelegendbutton",ref:"editRecurrenceButton",name:"recurrenceRule",flex:"1"}],showRecurringUI:null}}}],(r=[{key:"insertExtraWidgetsIntoDefaultWidgets",value:function(e){this.processEditorConfig(e),JW(QW(t.prototype),"insertExtraWidgetsIntoDefaultWidgets",this).call(this,e)}},{key:"processEditorConfig",value:function(e){var t=e.items,n=t.findIndex((function(e){return"extraItems"===e.type}));n<0?t.push.apply(t,qW(this.recurringEventsItems)):t.splice.apply(t,[n,0].concat(qW(this.recurringEventsItems)))}},{key:"construct",value:function(e,n){JW(QW(t.prototype),"construct",this).call(this,e,n),this.scheduler.on({beforeEventDelete:this.onRecurrableEventBeforeDelete,beforeEventSave:this.onRecurrableEventBeforeSave,thisObj:this})}},{key:"doDestroy",value:function(){this._recurrenceConfirmation&&this.recurrenceConfirmation.destroy(),this._recurrenceEditor&&this.recurrenceEditor.destroy(),JW(QW(t.prototype),"doDestroy",this).call(this)}},{key:"onEditorConstructed",value:function(e){var t=this;e.on("hide",t.onRecurringEventEditorHide,t),t.editRecurrenceButton&&t.editRecurrenceButton.on("click",t.onEditRecurrenceClick,t),t.recurrenceCombo.on("change",t.onRecurrenceComboChange.bind(t))}},{key:"internalShowEditor",value:function(){this.toggleRecurringFieldsVisibility(this.isRecurringEnabled&&!1!==this.showRecurringUI)}},{key:"toggleRecurringFieldsVisibility",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?"show":"hide";this.editRecurrenceButton&&this.editRecurrenceButton[t](),this.recurrenceCombo&&this.recurrenceCombo[t]()}},{key:"onRecurringEventEditorHide",value:function(e){e.source;var t=this.recurrenceEditor,n=this.recurrenceConfirmation;t&&t.isVisible&&t.hide(),n&&n.isVisible&&n.hide()}},{key:"makeRecurrence",value:function(e){var t=this.eventRecord,n=t.copy(),r=t.recurrence;return(r=!e&&r?r.copy():new t.recurrenceModel({rule:e})).timeSpan=n,n.setStartDate(this.values.startDate),r.suspendTimeSpanNotifying(),r}},{key:"onRecurrableEventBeforeSave",value:function(e){var t=e.eventRecord,n=e.context;if(t.supportsRecurring&&(t.isRecurring||t.isOccurrence))return this.recurrenceConfirmation.confirm({actionType:"update",eventRecord:t,changerFn:function(){n.finalize(!0)},cancelFn:function(){n.finalize(!1)}}),n.async=!0,!1}},{key:"showDisplayConfirmationOnEventDelete",value:function(e){return this.isEditing&&this.eventRecord===e&&e.supportsRecurring&&(e.isRecurring||e.isOccurrence)}},{key:"onRecurrableEventBeforeDelete",value:function(e){var t=e.eventRecords,n=e.context,r=UW(t,1)[0];if(this.showDisplayConfirmationOnEventDelete(r))return this.recurrenceConfirmation.confirm({actionType:"delete",eventRecord:r,changerFn:function(){n.finalize(!0)},cancelFn:function(){n.finalize(!1)}}),!1}},{key:"showRecurrenceEditor",value:function(){var e=this,t=e.recurrenceEditor,n=e.eventRecord;t&&n&&n.supportsRecurring&&(e.recurrence||(e.recurrence=e.makeRecurrence()),e.recurrence.timeSpan.setStartDate(e.values.startDate),t.record=e.recurrence,t.showBy(e.recurrenceCombo.element))}},{key:"onEditRecurrenceClick",value:function(){this.showRecurrenceEditor()}},{key:"loadRecurrenceData",value:function(e){this.recurrence=e,this.updateRecurrenceFields(e)}},{key:"updateRecurrenceFields",value:function(e){var t=this;t.recurrenceCombo&&(t.recurrenceCombo.recurrence=e),t.editRecurrenceButton&&(t.editRecurrenceButton.recurrence=e,t.editRecurrenceButton.value=e?e.rule:null,e&&t.isRecurringEnabled&&!1!==t.showRecurringUI?t.editRecurrenceButton.show():t.editRecurrenceButton.hide())}},{key:"onRecurrenceComboChange",value:function(e){var t=e.source,n=e.value,r=e.userAction;n==t.customValue?r&&this.showRecurrenceEditor():this.loadRecurrenceData(n?this.makeRecurrence("FREQ=".concat(n)):null)}},{key:"recurrenceEditorSaveHandler",value:function(e,t){e.updateRecord(t),this.updateRecurrenceFields(t),e.close()}},{key:"onDatesChange",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=JW(QW(t.prototype),"onDatesChange",this)).call.apply(e,[this].concat(r));var i=this,a=i.editRecurrenceButton;if(!i.loadingRecord&&a){var u=i.values.startDate;u&&(a.eventStartDate=u)}}},{key:"internalLoadRecord",value:function(e,t){this.recurrenceCombo&&e&&e.supportsRecurring&&this.loadRecurrenceData(e.recurrence?this.makeRecurrence():null)}},{key:"isRecurringEnabled",get:function(){return Boolean(this.scheduler.features.recurringEvents&&!this.scheduler.features.recurringEvents.disabled)}},{key:"recurrenceConfirmation",set:function(e){this._recurrenceConfirmation=e},get:function(){var e=this._recurrenceConfirmation;return e&&e.$name||(e=me.createWidget(Object.assign({type:"recurrenceconfirmation",owner:this.getEditor()},e)),this._recurrenceConfirmation=e),e}},{key:"recurrenceEditor",set:function(e){this._recurrenceEditor=e},get:function(){var e=this,t=e._recurrenceEditor;return t&&t.$name||(t=me.createWidget(Object.assign({type:"recurrenceeditor",autoShow:!1,owner:e.getEditor(),scrollAction:"realign",clippedBy:[e.scheduler.timeAxisSubGridElement,e.scheduler.bodyContainer],constrainTo:window,anchor:!0,saveHandler:e.recurrenceEditorSaveHandler,thisObj:e},t)),e._recurrenceEditor=t),t}}])&&KW(n.prototype,r),o&&KW(n,o),t}(e||Y)}(Nz));function s$(e){return(s$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p$(e,t){return!t||"object"!==s$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h$(e,t,n){return(h$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y$(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y$(e){return(y$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g$(e,t){return(g$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}c$._$name="EventEdit",nC.registerFeature(c$,!0,"Scheduler");var v$=function(e){function t(){return f$(this,t),p$(this,y$(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g$(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EventFilter"}},{key:"pluginConfig",get:function(){return{chain:["getHeaderMenuItems"]}}}],(r=[{key:"construct",value:function(e,n){h$(y$(t.prototype),"construct",this).call(this,e,n),this.scheduler=e}},{key:"getHeaderMenuItems",value:function(e,t){var n=this;"timeAxis"===e.type&&t.push({text:n.L("filterEvents"),icon:"b-fw-icon b-icon-filter",disabled:n.disabled,menu:{type:"popup",items:[{type:"textfield",cls:"b-eventfilter b-last-row",clearable:!0,keyStrokeChangeDelay:300,label:n.L("byName"),width:200,listeners:{change:n.onEventFilterChange,thisObj:n}}],onBeforeShow:function(e){var t=l$(e.source.items,1)[0],r=n.scheduler.eventStore.filters.getBy("property","name");t.value=r&&r.value}}})}},{key:"onEventFilterChange",value:function(e){var t=e.value;""!==t?this.scheduler.eventStore.filter("name",t):this.scheduler.eventStore.removeFieldFilter("name")}}])&&d$(n.prototype,r),o&&d$(n,o),t}(es);function m$(e){return(m$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S$(e,t){return!t||"object"!==m$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O$(e,t,n){return(O$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E$(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E$(e){return(E$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C$(e,t){return(C$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}v$.featureClass="b-event-filter",v$._$name="EventFilter",nC.registerFeature(v$,!0,["Scheduler","Gantt"]);var x$={top:"b-t",right:"b100-t100",bottom:"t-b",left:"b0-t0"},_$=function(e){function t(){return w$(this,t),S$(this,E$(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C$(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{showTooltip:!0,showExactResizePosition:!1,validatorFn:function(){},validatorFnThisObj:null,tip:null,tipTemplate:function(e){return'\n                <div class="b-sch-tip-'.concat(e.valid?"valid":"invalid",'">\n                    ').concat(e.startClockHtml,"\n                    ").concat(e.endClockHtml,'\n                    <div class="b-sch-tip-message">').concat(e.message,"</div>\n                </div>\n            ")}}}},{key:"pluginConfig",get:function(){return{chain:["render"]}}}],(r=[{key:"render",value:function(){var e=this;e.resize&&e.resize.destroy(),e.resize=e.createResizeHelper(),e.showTooltip&&(e.clockTemplate=new GH({scheduler:e.client}))}},{key:"doDestroy",value:function(){var e=this;e.tip&&e.tip.destroy(),e.clockTemplate&&e.clockTemplate.destroy(),e.resize&&e.resize.destroy(),O$(E$(t.prototype),"doDestroy",this).call(this)}},{key:"isElementResizable",value:function(e,t){var n=this.client,r=this.resize,o=n.resolveTimeSpanRecord(e);if(n.readOnly)return!1;var i=o&&o.isResizable,a=(e=xn.up(t.target,n.eventSelector))?e.firstElementChild:e,u=t.target.closest('[class$="-handle"]');if(!i||u&&u!==a)return!1;var c=e.classList.contains("b-sch-event-startsoutside"),s=e.classList.contains("b-sch-event-endsoutside");if(!0===i){if(c&&s)return!1;if(c)i="end";else{if(!s)return r.overStartHandle(t,e)||r.overEndHandle(t,e);i="start"}}return!(c&&"start"===i||s&&"end"===i||!(r.overStartHandle(t,e)&&"start"===i||r.overEndHandle(t,e)&&"end"===i))}},{key:"onBeforeResizeStart",value:function(e){var t,n=e.element,r=e.event,o=this.client,i=o.scheduledEventName,a=o.resolveTimeSpanRecord(n);return!this.disabled&&!1!==o.trigger("before".concat(o.capitalizedEventName,"Resize"),(b$(t={},i+"Record",a),b$(t,"event",r),t))}},{key:"onResizeStart",value:function(e){var t,n=e.context,r=e.event,o=this,i=o.client,a=i.resolveTimeSpanRecord(n.element),u=i.scheduledEventName;i.element.classList.add("b-resizing-event"),o.setupProductResizeContext(n,r),o.showTooltip&&(o.tip?(o.tip.align=x$[n.edge],o.tip.showBy(o.getTooltipTarget())):(o.tip=new Fu({id:"".concat(i.id,"-event-resize-tip"),autoShow:!0,axisLock:!0,trackMouse:!1,updateContentOnMouseMove:!0,getHtml:o.getTipHtml.bind(o),align:x$[n.edge],hideDelay:0}),o.tip.on("innerhtmlupdate",o.updateDateIndicator,o))),a.instanceMeta(i).retainElement=!0,i.trigger("".concat(u,"ResizeStart"),(b$(t={},"".concat(u,"Record"),a),b$(t,"event",r),t))}},{key:"updateDateIndicator",value:function(){var e=this.resize.context,t=e.edge,n=e.startDate,r=e.endDate,o=this.tip.element;(n||r)&&("right"===t||"bottom"===t?this.clockTemplate.updateDateIndicator(o.querySelector(".b-sch-tooltip-enddate"),r):this.clockTemplate.updateDateIndicator(o,n))}},{key:"getTooltipTarget",value:function(){var e=this,t=tr.from(e.resize.context.element,null,!0);return"horizontal"===e.resize.direction?("right"===e.resize.context.edge&&(t.x=t.right-1),t.width=e.tip.anchorSize[0]/2):("bottom"===e.resize.context.edge&&(t.y=t.bottom-1),t.height=e.tip.anchorSize[1]/2),{target:t}}},{key:"onResizing",value:function(e){var t,n,r,o=e.context,i=e.event,a=this,u=a.client,c=u.features.dependencies,s=a.getTimespanRecord(o),l=u.scheduledEventName,f=o.element,d=o.edge,p=xn.getTranslateXY(f);if("top"===d||"left"===d?(r=s.endDate,u.snapRelativeToEventStartDate?(n=u.getDateFromXY(p,null,!0),n=u.timeAxis.roundDate(n,s.startDate)):n=u.getDateFromXY(p,"round",!0)):(p[0]+=f.offsetWidth,p[1]+=f.offsetHeight,n=s&&s.startDate,u.snapRelativeToEventStartDate?(r=u.getDateFromXY(p,null,!0),r=u.timeAxis.roundDate(r,s.endDate)):r=u.getDateFromXY(p,"round",!0)),n=n||o.startDate,r=r||o.endDate,o.dateConstraints&&(n=xt.constrain(n,o.dateConstraints.start,o.dateConstraints.end),r=xt.constrain(r,o.dateConstraints.start,o.dateConstraints.end)),a.showExactResizePosition||u.timeAxisViewModel.snap){var h="top"===d||"left"===d?u.timeAxisViewModel.getDistanceBetweenDates(n,s.endDate):u.timeAxisViewModel.getDistanceBetweenDates(s.startDate,r);switch(d){case"top":xn.setTranslateY(f,o.elementStartY+o.elementWidth-h),f.style.height=h+"px";break;case"right":f.style.width=h+"px";break;case"bottom":f.style.height=h+"px";break;case"left":xn.setTranslateX(f,o.elementStartX+o.elementWidth-h),f.style.width=h+"px"}}var y=o.endDate-r!=0||o.startDate-n!=0;o.endDate=r,o.startDate=n,y&&(o.valid=a.checkValidity(o,i)),u.trigger("".concat(l,"PartialResize"),(b$(t={},"".concat(l,"Record"),s),b$(t,"startDate",n),b$(t,"endDate",r),b$(t,"element",f),b$(t,"context",o),t)),c&&c.updateDependenciesForTimeSpan(s,f),a.showTooltip&&a.tip.alignTo(a.getTooltipTarget())}},{key:"checkValidity",value:function(e,t){var n=e.startDate&&e.endDate>e.startDate&&this.validatorFn.call(this.validatorFnThisObj||this,e,t);return n&&"boolean"!=typeof n&&(e.message=n.message||"",n=n.valid),!1!==n}},{key:"onFinishResize",value:function(e){e.source;var t=e.context,n=e.event,r=this,o=r.getTimespanRecord(t),i=o.startDate,a=o.endDate,u=t.startDate||i,c=t.endDate||a,s=r.client,l=!1;o.instanceMeta(s).retainElement=!1;var f=t.finalize;t.finalize=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.async&&r.finalize.apply(r,n),f.call(t,n)},t.valid=u&&c&&c-u>0&&(u-i!=0||c-a!=0)&&!1!==t.valid,t.valid&&(s.trigger("before".concat(s.scheduledEventName,"ResizeFinalize"),{context:t,event:n}),l=!0),t.async||r.finalize(l)}},{key:"onCancelResize",value:function(e){var t=e.context,n=this.getTimespanRecord(t);n&&(n.instanceMeta(this.client).retainElement=!1),this.finalize(!1)}},{key:"finalize",value:function(e){var t=this,n=t.client,r=t.resize.context,o=t.getTimespanRecord(r),i=n.scheduledEventName,a=!1;if(t.tip&&t.tip.hide(),r.started&&(e&&(a=t.internalUpdateRecord(r,o)),!e||!a)){var u=n.features.dependencies;t.resize.abortResize(null,!0),u&&u.scheduleDraw(!0)}n.element.classList.remove("b-resizing-event"),n.trigger("".concat(i,"ResizeEnd"),b$({changed:a},"".concat(i,"Record"),o||n.resolveEventRecord(r.element)))}},{key:"getTipHtml",value:function(e){var t=e.tip,n=this,r=n.resize.context,o=r.startDate,i=r.endDate,a=r.valid,u=r.message;if(!o||!i)return t.html;void 0===u&&(u=""),i=n.client.getDisplayEndDate(i,o);var c=n.client.getFormattedDate(o),s=n.client.getFormattedDate(i);return n.tipTemplate({valid:a,startDate:o,endDate:i,startText:c,endText:s,message:u,startClockHtml:n.clockTemplate.template({date:o,text:c,cls:"b-sch-tooltip-startdate"}),endClockHtml:n.clockTemplate.template({date:i,text:s,cls:"b-sch-tooltip-enddate"})})}},{key:"getRowRecord",value:function(e){throw new Error("Implement in subclass")}},{key:"getTimespanRecord",value:function(e){throw new Error("Implement in subclass")}},{key:"setupProductResizeContext",value:function(e,t){throw new Error("Implement in subclass")}},{key:"store",get:function(){throw new Error("Implement in subclass")}}])&&k$(n.prototype,r),o&&k$(n,o),t}(es);function j$(e){return(j$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P$(e,t){return!t||"object"!==j$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T$(e,t,n){return(T$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A$(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function A$(e){return(A$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M$(e,t){return(M$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_$._$name="ResizeBase";var I$=function(e){function t(){return D$(this,t),P$(this,A$(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M$(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EventResize"}}],(r=[{key:"createResizeHelper",value:function(){var e=this,t=e.client;return new _w({direction:t.isVertical?"vertical":"horizontal",name:e.constructor.$name,isElementResizable:function(t,n){return e.isElementResizable(t,n)},targetSelector:t.eventSelector,handleContainerSelector:t.eventInnerSelector,resizingCls:"b-sch-event-wrap-resizing",allowResize:e.isElementResizable.bind(e),outerElement:t.timeAxisSubGridElement,scrollManager:t.scrollManager,dragThreshold:0,dynamicHandleSize:!0,reservedSpace:5,scroller:t.timeAxisSubGrid.scrollable,listeners:{beforeresizestart:e.onBeforeResizeStart,resizestart:e.onResizeStart,resizing:e.onResizing,resize:e.onFinishResize,cancel:e.onCancelResize,thisObj:e}})}},{key:"getTimespanRecord",value:function(e){return e.eventRecord}},{key:"getRowRecord",value:function(e){return e.resourceRecord}},{key:"setupProductResizeContext",value:function(e,t){var n=this.client,r=n.resolveEventRecord(e.element),o=n.resolveResourceRecord(e.element);Object.assign(e,{eventRecord:r,resourceRecord:o,dateConstraints:n.getDateConstraints(o,r)})}},{key:"onResizeStart",value:function(e){var n=e.context,r=e.event;T$(A$(t.prototype),"onResizeStart",this).call(this,{context:n,event:r}),this.client.features.dependencies&&this.client.features.dependencies.hideTerminals(n.element),n.element.querySelector(".b-sch-event").classList.add("b-sch-event-resizing")}},{key:"checkValidity",value:function(e,n){return(this.client.allowOverlap||this.client.isDateRangeAvailable(e.startDate,e.endDate,e.eventRecord,e.resourceRecord))&&T$(A$(t.prototype),"checkValidity",this).call(this,e,n)}},{key:"onFinishResize",value:function(e){var n=e.source,r=e.context,o=e.event;T$(A$(t.prototype),"onFinishResize",this).call(this,{source:n,context:r,event:o}),this.client.features.dependencies&&this.client.features.dependencies.showTerminals(r.eventRecord,r.element)}},{key:"internalUpdateRecord",value:function(e,t){var n=this.store,r=t.generation;return"left"===e.edge||"top"===e.edge?t.setStartDate(e.startDate,!1,n.skipWeekendsDuringDragDrop):t.setEndDate(e.endDate,!1,n.skipWeekendsDuringDragDrop),t.generation!==r||(this.client.repaintEventsForResource(e.resourceRecord),!1)}},{key:"finalize",value:function(e){this.resize.context.element.querySelector(".b-sch-event").classList.remove("b-sch-event-resizing"),T$(A$(t.prototype),"finalize",this).call(this,e)}},{key:"store",get:function(){return this.client.eventStore}}])&&R$(n.prototype,r),o&&R$(n,o),t}(_$);function F$(e){return(F$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B$(e,t){return!t||"object"!==F$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z$(e,t,n){return(z$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V$(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function V$(e){return(V$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W$(e,t){return(W$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}I$._$name="EventResize",nC.registerFeature(I$,!0,"Scheduler");var $$=function(e){function t(){return N$(this,t),B$(this,V$(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W$(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{autoUpdate:!1,template:null,cls:null,align:"b-t",clockTemplate:null}}},{key:"pluginConfig",get:function(){return{chain:["render"]}}}],(r=[{key:"construct",value:function(e,n){var r=this;n=r.processConfig(n),z$(V$(t.prototype),"construct",this).call(this,e,n),r.forSelector||(r.forSelector="".concat(e.eventInnerSelector,":not(.b-dragproxy)")),r.clockTemplate=new GH({scheduler:e}),e.on(L$({},"before".concat(e.scheduledEventName,"drag"),(function(){r.tooltip&&r.tooltip.hide()})))}},{key:"processConfig",value:function(e){return"function"==typeof e?{template:e}:e}},{key:"setConfig",value:function(e){z$(V$(t.prototype),"setConfig",this).call(this,this.processConfig(e))}},{key:"doDestroy",value:function(){this.clockTemplate&&this.clockTemplate.destroy(),this.tooltip&&this.tooltip.destroy(),z$(V$(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){this.tooltip&&(this.tooltip.disabled=e),z$(V$(t.prototype),"doDisable",this).call(this,e)}},{key:"render",value:function(){var e=this,t=e.client,n=[".b-dragselecting",".b-eventeditor-editing",".b-resizing-event",".b-dragcreating",".b-dragging-".concat(t.scheduledEventName),".b-creating-dependency",".b-dragproxy"].map((function(e){return":not(".concat(e,")")})).join("");e.tooltip&&e.tooltip.destroy(),e.tooltip=new Fu(Object.assign({axisLock:"flexible",id:e.tipId||"".concat(e.client.id,"-event-tip"),cls:e.tipCls,forSelector:".b-timelinebase".concat(n," ").concat(e.forSelector),scrollAction:"realign",clippedBy:[t.timeAxisSubGridElement,t.bodyContainer],forElement:t.timeAxisSubGridElement,showOnHover:!0,hoverDelay:0,hideDelay:100,anchorToTarget:!0,allowOver:Boolean(e.config.items||e.config.tools),getHtml:e.getTipHtml.bind(e),disabled:e.disabled},e.config)),e.tooltip.on("innerhtmlupdate",e.updateDateIndicator,e)}},{key:"updateDateIndicator",value:function(){var e=this.client,t=this.tooltip,n=t.activeTarget&&e.resolveTimeSpanRecord(t.activeTarget),r=t.element.querySelector(".b-sch-tooltip-enddate");n&&(this.clockTemplate.updateDateIndicator(t.element,n.startDate),r&&this.clockTemplate.updateDateIndicator(r,n.endDate))}},{key:"resolveTimeSpanRecord",value:function(e){return this.client.resolveTimeSpanRecord(e)}},{key:"getTipHtml",value:function(e){var t=e.tip,n=e.activeTarget,r=this,o=r.client,i=r.recordType||"".concat(o.scheduledEventName,"Record"),a=r.resolveTimeSpanRecord(n);if(a){var u,c=a.startDate,s=a.endDate,l=o.getFormattedDate(c),f=o.getDisplayEndDate(s,c),d=o.getFormattedDate(f);return t.eventRecord=a,t.title=a.name,r.template((L$(u={tip:t},"".concat(i),a),L$(u,"startDate",c),L$(u,"endDate",s),L$(u,"startText",l),L$(u,"endText",d),L$(u,"startClockHtml",r.clockTemplate.template({date:c,text:l,cls:"b-sch-tooltip-startdate"})),L$(u,"endClockHtml",a.isMilestone?"":r.clockTemplate.template({date:f,text:d,cls:"b-sch-tooltip-enddate"})),u))}return t.hide(),""}}])&&H$(n.prototype,r),o&&H$(n,o),t}(es);function Y$(e){return(Y$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q$(e,t){return!t||"object"!==Y$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X$(e){return(X$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K$(e,t){return(K$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}$$._$name="TooltipBase";var Z$=function(e){function t(){return G$(this,t),q$(this,X$(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K$(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EventTooltip"}},{key:"defaultConfig",get:function(){return{template:function(e){return"\n                ".concat(e.eventRecord.name?'<div class="b-sch-event-title">'.concat(e.eventRecord.name,"</div>"):"","\n                ").concat(e.startClockHtml,"\n                ").concat(e.endClockHtml)},cls:"b-sch-event-tooltip"}}}],(r=null)&&U$(n.prototype,r),o&&U$(n,o),t}($$);function J$(e){return(J$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function eY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nY(e,t){return!t||"object"!==J$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rY(e,t,n){return(rY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oY(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function oY(e){return(oY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iY(e,t){return(iY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Z$._$name="EventTooltip",nC.registerFeature(Z$,!0,"Scheduler");var aY=function(e){function t(){return eY(this,t),nY(this,oY(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iY(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"HeaderContextMenu"}},{key:"defaultConfig",get:function(){return{extraItems:null,processItems:null}}},{key:"pluginConfig",get:function(){return{chain:["getHeaderMenuItems"]}}}],(r=[{key:"construct",value:function(e,n){rY(oY(t.prototype),"construct",this).call(this,e,n),this.scheduler=e}},{key:"getHeaderMenuItems",value:function(e,t){var n=this,r=n.scheduler,o=n.processItems,i=r.timeAxis,a={magnitude:i.shiftIncrement,unit:i.shiftUnit};"timeAxis"===e.type&&(t.push({text:n.L("pickZoomLevel"),icon:"b-fw-icon b-icon-search-plus",disabled:!r.presets.count||n.disabled,menu:{type:"popup",items:[{type:"slider",showValue:!1,listeners:{input:n.onZoomSliderChange,thisObj:n},minWidth:130}],onBeforeShow:function(e){var t=Q$(e.source.items,1)[0];t.min=r.minZoomLevel,t.max=r.maxZoomLevel,t.value=r.zoomLevel}}}),n.startDateField=new _h({label:n.L("startText"),labelWidth:"6em",required:!0,step:a,listeners:{change:n.onRangeDateFieldChange,thisObj:n}}),n.endDateField=new _h({label:n.L("endText"),labelWidth:"6em",required:!0,step:a,listeners:{change:n.onRangeDateFieldChange,thisObj:n}}),t.push({text:n.L("activeDateRange"),icon:"b-fw-icon b-icon-calendar",disabled:n.disabled,menu:{type:"popup",width:"20em",items:[n.startDateField,n.endDateField,{type:"button",cls:"b-left-nav-btn",icon:"b-icon b-icon-prev",color:"b-blue b-raised",flex:1,margin:0,listeners:{click:n.onLeftShiftBtnClick,thisObj:n}},{type:"button",cls:"b-today-nav-btn",color:"b-blue b-raised",text:n.L("todayText"),flex:4,margin:"0 8",listeners:{click:n.onTodayBtnClick,thisObj:n}},{type:"button",cls:"b-right-nav-btn",icon:"b-icon b-icon-next",color:"b-blue b-raised",flex:1,listeners:{click:n.onRightShiftBtnClick,thisObj:n}}],onBeforeShow:function(){return n.initDates()}}}),n.extraItems&&t.push.apply(t,n.extraItems),o&&o({items:t}))}},{key:"onZoomSliderChange",value:function(e){var t=e.value,n=this.client.features.contextMenu.currentMenu;n.scrollAction="realign",this.scheduler.zoomLevel=t,n.setTimeout({fn:function(){return n.scrollAction="hide"},delay:100,cancelOutstanding:!0})}},{key:"initDates",value:function(){var e=this;e.startDateField.suspendEvents(),e.endDateField.suspendEvents(),e.startDateField.value=e.startDateFieldInitialValue=e.scheduler.startDate,e.endDateField.value=e.endDateFieldInitialValue=e.scheduler.endDate,e.startDateField.resumeEvents(),e.endDateField.resumeEvents()}},{key:"onRangeDateFieldChange",value:function(e){var t=this,n=e.source===t.startDateField,r=t.client,o=r.timeResolution,i=r.timeAxisSubGrid.scrollable,a=t.startDateFieldInitialValue&&!n?t.startDateFieldInitialValue:t.startDateField.value,u=r.getDateFromX(i.x),c=t.endDateFieldInitialValue&&n?t.endDateFieldInitialValue:t.endDateField.value;n?t.startDateFieldInitialValue=null:t.endDateFieldInitialValue=null,c-a?c<a&&(c=xt.add(a,o.increment,o.unit)):c=xt.add(c,o.increment,o.unit),t.scheduler.timeAxis.setTimeSpan(a,c),i.x=r.getCoordinateFromDate(u,!0),t.initDates()}},{key:"onLeftShiftBtnClick",value:function(){this.scheduler.timeAxis.shiftPrevious(),this.initDates()}},{key:"onTodayBtnClick",value:function(){var e=xt.clearTime(new Date);this.scheduler.timeAxis.setTimeSpan(e,xt.add(e,1,"day")),this.initDates()}},{key:"onRightShiftBtnClick",value:function(){this.scheduler.timeAxis.shiftNext(),this.initDates()}}])&&tY(n.prototype,r),o&&tY(n,o),t}(es);function uY(e){return(uY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lY(e,t){return!t||"object"!==uY(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fY(e){return(fY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dY(e,t){return(dY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}aY.featureClass="",aY._$name="HeaderContextMenu",nC.registerFeature(aY,!0,["Scheduler","Gantt"]);var pY=function(e){function t(){return cY(this,t),lY(this,fY(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dY(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"HeaderZoom"}},{key:"pluginConfig",get:function(){return{chain:["onElementMouseDown","onElementMouseMove","onElementMouseUp"]}}}],(r=[{key:"onElementMouseDown",value:function(e){var t=this,n=t.client;if(!e.touches&&0===e.button&&!t.disabled&&e.target.matches(".b-sch-header-timeaxis-cell")){var r=n.subGrids.normal.header.headersElement;t.startX=e.clientX,t.element=xn.createElement({parent:r,tag:"div",className:"b-headerzoom-rect"}),t.headerElementRect=tr.from(r)}}},{key:"onElementMouseMove",value:function(e){var t=this;if(0!==e.buttons||we.isSafari||we.isIE11&&!e.isTrusted){if("number"==typeof t.startX){var n=Math.max(e.clientX,t.headerElementRect.left),r=Math.min(t.startX,n),o=Math.abs(t.startX-n),i=new tr(r-t.headerElementRect.x+t.client.scrollLeft,0,o,t.headerElementRect.height);xn.setTranslateX(t.element,i.left),t.element.style.width=i.width+"px"}}else t.onElementMouseUp(e)}},{key:"onElementMouseUp",value:function(e){var t=this;if("number"==typeof t.startX){var n=t.client,r=tr.from(t.element),o=n.getDateFromCoordinate(r.left,"round",!1),i=n.getDateFromCoordinate(r.right,"round",!1);t.element&&t.element.remove(),t.startX=null,t.client.zoomToSpan({startDate:o,endDate:i})}}}])&&sY(n.prototype,r),o&&sY(n,o),t}(es);pY._$name="HeaderZoom",nC.registerFeature(pY,!1,"Scheduler");n(239);function hY(e){return(hY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vY(e,t){return!t||"object"!==hY(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mY(e,t,n){return(mY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bY(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function bY(e){return(bY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wY(e,t){return(wY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kY=function(e){function t(){return yY(this,t),vY(this,bY(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wY(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{rangeCls:"b-sch-range",lineCls:"b-sch-line",store:{modelClass:bF},enableResizing:!1,showTooltip:!0,showHeaderElements:!0,dragTipTemplate:function(e){return'\n                <div class="b-sch-tip-'.concat(e.valid?"valid":"invalid",'">\n                    <div class="b-sch-tip-name">').concat(e.name||"","</div>\n                    ").concat(e.startClockHtml,"\n                    ").concat(e.endClockHtml||"","\n                </div>\n            ")},baseCls:"b-sch-timerange",cls:""}}},{key:"pluginConfig",get:function(){return{chain:["onPaint","getHeaderMenuItems"]}}}],(r=[{key:"construct",value:function(e,n){var r=this;mY(bY(t.prototype),"construct",this).call(this,e,n),r.cls=r.cls||"b-timerange-".concat(r.constructor.$name),r.baseSelector=".".concat(r.baseCls,".").concat(r.cls),r.enableResizing&&(r.showHeaderElements=!0)}},{key:"doDestroy",value:function(){var e=this;e.storeDetacher&&e.storeDetacher(),e.timeAxisViewModelDetacher&&e.timeAxisViewModelDetacher(),e.timeAxisDetacher&&e.timeAxisDetacher(),e.clockTemplate&&e.clockTemplate.destroy(),e.tip&&e.tip.destroy(),e.drag&&e.drag.destroy(),e.resize&&e.resize.destroy(),mY(bY(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){this.client.isPainted&&this.renderRanges(),mY(bY(t.prototype),"doDisable",this).call(this,e)}},{key:"onPaint",value:function(){var e=this;e.isPainted||(e.timeAxisViewModel=e.client.timeAxisViewModel,e.timeAxisViewModelDetacher=e.timeAxisViewModel.on({reconfigure:e.onTimeAxisViewModelUpdate,update:e.onTimeAxisViewModelUpdate,thisObj:e}),e.timeAxisDetacher=e.client.timeAxis.on({includeChange:e.onTimeAxisViewModelUpdate,thisObj:e}),e.enableResizing&&!e.client.hideHeaders&&(e.drag=new fw({name:"rangeDrag",mode:e.client.isVertical?"translateY":"translateX",constrain:!0,outerElement:e.headerContainerElement,targetSelector:"".concat(e.baseSelector),isElementDraggable:function(t,n){return!e.client.readOnly&&e.isElementDraggable(t,n)},transitionDuration:e.client.transitionDuration,listeners:{dragstart:e.onDragStart,drag:e.onDrag,drop:e.onDrop,abort:e.onInvalidDrop,thisObj:e}}),e.resize=new _w({direction:e.client.mode,targetSelector:"".concat(e.baseSelector,".b-sch-range"),outerElement:e.headerContainerElement,isElementResizable:function(e){return!e.closest(".b-dragging")},listeners:{resizestart:e.onResizeStart,resizing:e.onResizeDrag,resize:e.onResize,cancel:e.onInvalidResize,thisObj:e}})),e.renderRanges())}},{key:"renderRanges",value:function(){var e=this,t=e.client.foregroundCanvas;if(t){var n=e.headerContainerElement,r=e.store;if(xn.removeEachSelector(t,e.baseSelector),n&&xn.removeEachSelector(n,e.baseSelector),!e.disabled){var o=!0,i=!1,a=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;e.renderRange(s,!0)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}}}},{key:"renderRange",value:function(e,t){var n=this,r=n.client;if(e.duration&&r.timeAxis.timeSpanInAxis(e.startDate,e.endDate)||e.startDate&&r.timeAxis.dateInAxis(e.startDate)){var o,i=r.getCoordinateFromDate(xt.max(e.startDate,r.timeAxis.startDate),{respectExclusion:!0}),a=e.duration&&r.getCoordinateFromDate(xt.min(e.endDate,r.timeAxis.endDate),{respectExclusion:!0,isEnd:!0}),u="<label>".concat(e.name||"&nbsp;","</label>"),c={className:"".concat(n.baseCls," ").concat(n.cls," ").concat(a?n.rangeCls:n.lineCls," ").concat(e.cls||""),dataset:{id:e.id},style:r.isVertical?"transform: translateY(".concat(i,"px); ").concat(a?"height:".concat(a-i,"px"):"",";"):"transform: translateX(".concat(i,"px); ").concat(a?"width:".concat(a-i,"px"):"",";"),retainElement:!0},s=xn.createElement(Object.assign({},c,{parent:t&&r.foregroundCanvas,style:c.style+(e.style||""),html:n.showHeaderElements?"":u}));n.showHeaderElements&&(o=xn.createElement(Object.assign({parent:t&&n.headerContainerElement,html:e.name?u:""},c)));var l={bodyElement:s,headerElement:o};return t&&n.rotateLabel(l),l}}},{key:"rotateLabel",value:function(e){var t=e.bodyElement,n=t.firstChild;if(n){n.classList.remove("b-vertical");var r=this.client.isVertical?n.offsetHeight<t.offsetHeight:n.offsetWidth>t.offsetWidth;n.classList[r?"add":"remove"]("b-vertical")}}},{key:"getElementsByRecord",value:function(e){var t="object"!==hY(e)?e:e.id,n=this.client.foregroundCanvas.querySelector("".concat(this.baseSelector,'[data-id="').concat(t,'"]')),r=this.headerContainerElement.querySelector("".concat(this.baseSelector,'[data-id="').concat(t,'"]'));return n?{bodyElement:n,headerElement:r}:null}},{key:"getBodyElementByRecord",value:function(e){var t="string"==typeof e?e:e.id;return this.client.foregroundCanvas.querySelector("".concat(this.baseSelector,'[data-id="').concat(t,'"]'))}},{key:"getRecordByElement",value:function(e){return this.store.getById(e.dataset.id)}},{key:"getHeaderMenuItems",value:function(e,t){return[]}},{key:"onTimeAxisViewModelUpdate",value:function(){this.renderRanges()}},{key:"onStoreChanged",value:function(e){var t=this;if(!(t.isConfiguring||"refresh"===e.type&&"batch"!==e.action))if("update"===e.action){var n=e.changes.hasOwnProperty("id")?e.changes.id.oldValue:e.record.id,r=t.getElementsByRecord(n),o=t.renderRange(e.record,!r);if(r&&!o&&(r.bodyElement.remove(),r.headerElement&&r.headerElement.remove()),!r||!o)return;t.client.runWithTransition((function(){xn.sync(o.bodyElement,r.bodyElement),t.showHeaderElements&&xn.sync(o.headerElement,r.headerElement),t.rotateLabel(r)}))}else t.renderRanges()}},{key:"showTip",value:function(e){var t=this;t.showTooltip&&(t.clockTemplate=new GH({scheduler:t.client}),t.tip=new Fu({id:"".concat(t.client.id,"-time-range-tip"),cls:"b-interaction-tooltip",align:"b-t",autoShow:!0,updateContentOnMouseMove:!0,forElement:e.element,getHtml:function(){return t.getTipHtml(e.record,e.element)}}))}},{key:"isElementDraggable",value:function(e){return(e=e.closest(this.baseSelector+":not(.b-resizing)"))&&!e.classList.contains("b-over-resize-handle")}},{key:"onDragStart",value:function(e){var t=e.context,n=this,r=n.getRecordByElement(t.element.closest(n.baseSelector)),o=n.getBodyElementByRecord(r),i=n.drag;Object.assign(t,{record:r,rangeBodyEl:o,originRangeX:xn.getTranslateX(o),originRangeY:xn.getTranslateY(o)}),n.client.isVertical?(i.minY=0,i.maxY=n.timeAxisViewModel.totalSize-t.rangeBodyEl.offsetHeight,i.minX=0,i.maxX=Number.MAX_SAFE_INTEGER):(i.minX=0,i.maxX=n.timeAxisViewModel.totalSize-t.rangeBodyEl.offsetWidth,i.minY=0,i.maxY=Number.MAX_SAFE_INTEGER),n.client.element.classList.add("b-dragging-timerange"),n.showTip(t)}},{key:"onDrag",value:function(e){var t=e.context;this.client.isVertical?xn.setTranslateY(t.rangeBodyEl,xn.getTranslateY(t.element)):xn.setTranslateX(t.rangeBodyEl,xn.getTranslateX(t.element))}},{key:"onDrop",value:function(e){var t=e.context;if(!t.valid)return this.onInvalidDrop({context:t});var n=this,r=t.record,o=t.rangeBodyEl.getBoundingClientRect(),i=n.client.getDateFromCoordinate(n.client.isVertical?o.top:o.left,"round",!1);r.startDate-i!=0?r.setStartDate(i):n.onInvalidDrop(),n.tip&&(n.tip.destroy(),n.tip=null),n.client.element.classList.remove("b-dragging-timerange")}},{key:"onInvalidDrop",value:function(){var e=this;e.drag.reset(),e.renderRanges(),e.client.element.classList.remove("b-dragging-timerange"),e.tip&&(e.tip.destroy(),e.tip=null)}},{key:"onResizeStart",value:function(e){var t=e.context,n=this.getRecordByElement(t.element.closest(this.baseSelector)),r=this.getBodyElementByRecord(n);Object.assign(t,{record:n,rangeBodyEl:r}),this.showTip(t)}},{key:"onResizeDrag",value:function(e){var t=e.context;this.client.isVertical?("top"===t.edge&&xn.setTranslateY(t.rangeBodyEl,t.newY),t.rangeBodyEl.style.height=t.newHeight+"px"):("left"===t.edge&&xn.setTranslateX(t.rangeBodyEl,t.newX),t.rangeBodyEl.style.width=t.newWidth+"px")}},{key:"onResize",value:function(e){var t=e.context;if(!t.valid)return this.onInvalidDrop({context:t});var n=this,r=n.client,o=t.record,i=t.element.getBoundingClientRect(),a=r.isVertical?i.top:i.left,u=r.isVertical?i.bottom:i.right,c=r.getDateFromCoordinate(a,"round",!1),s="left"===t.edge||"top"===t.edge,l=r.getDateFromCoordinate(u,"round",!1);(s&&o.startDate-c!=0||l&&o.endDate-l!=0)&&l>c?s?o.setStartDate(c,!1):o.setEndDate(l,!1):n.onInvalidResize(),n.tip&&(n.tip.destroy(),n.tip=null)}},{key:"onInvalidResize",value:function(){var e=this;e.resize.reset(),e.renderRanges(),e.tip&&(e.tip.destroy(),e.tip=null)}},{key:"getTipHtml",value:function(e,t){var n=this.client,r=t.getBoundingClientRect(),o=n.isVertical?r.top:r.left,i=n.isVertical?r.bottom:r.right,a=n.getDateFromCoordinate(o,"round",!1),u=e.endDate&&n.getDateFromCoordinate(i,"round",!1),c=n.getFormattedDate(a),s=u&&n.getFormattedEndDate(u,a);return this.dragTipTemplate({name:e.name||"",startDate:a,endDate:u,startText:c,endText:s,startClockHtml:this.clockTemplate.template({date:a,text:c,cls:"b-sch-tooltip-startdate"}),endClockHtml:s&&this.clockTemplate.template({date:u,text:s,cls:"b-sch-tooltip-enddate"})})}},{key:"headerContainerElement",get:function(){var e=this.client,t=e.isVertical,n=e.timeView,r=e.timeAxisColumn,o=null;return t&&n.element?o=n.element.parentElement:t||(o=r.element),o}},{key:"showHeaderElements",get:function(){return this._showHeaderElements},set:function(e){this._showHeaderElements=e,this.client.isPainted&&(e?this.client.element.classList.add("b-sch-timeranges-with-headerelements"):this.client.element.classList.remove("b-sch-timeranges-with-headerelements"),this.renderRanges())}},{key:"store",get:function(){return this._store},set:function(e){var t=this;t._store=ed.getStore(e,ed);var n=!1;t.storeDetacher&&(t.storeDetacher(),n=!0),t.storeDetacher=t._store.on({change:t.onStoreChanged,refresh:t.onStoreChanged,thisObj:t}),n&&this.renderRanges()}}])&&gY(n.prototype,r),o&&gY(n,o),t}(Wr(es));function SY(e){return(SY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CY(e,t){return!t||"object"!==SY(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xY(e,t,n){return(xY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_Y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _Y(e){return(_Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jY(e,t){return(jY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}kY._$name="AbstractTimeRanges";var DY=function(e){function t(){return OY(this,t),CY(this,_Y(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jY(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"NonWorkingTime"}},{key:"defaultConfig",get:function(){return{highlightWeekends:!0,showHeaderElements:!0,cls:"b-sch-nonworkingtime"}}}],(r=[{key:"construct",value:function(e,n){xY(_Y(t.prototype),"construct",this).call(this,e,n),this.calendar&&e.calendar||(this.calendar=new cN),this.bindCalendar(this.calendar)}},{key:"doDestroy",value:function(){this.bindCalendar(null),xY(_Y(t.prototype),"doDestroy",this).call(this)}},{key:"bindCalendar",value:function(e){var t=this;t.calendarDetacher&&t.calendarDetacher(),e&&(t.calendarDetacher=e.on({change:t.renderRanges,thisObj:t,delay:1})),t.calendar=e,t.renderRanges()}},{key:"renderRanges",value:function(){var e=this;if(e.store&&!e.store.isDestroyed){var n=xt.as(e.client.timeAxis.unit,1,"week")>=1;e.store.removeAll(!0),e.calendar&&e.highlightWeekends&&n&&e.store.add(e.calendar.getHolidaysRanges(e.client.timeAxis.startDate,e.client.timeAxis.endDate,!0),!0)}xY(_Y(t.prototype),"renderRanges",this).call(this)}}])&&EY(n.prototype,r),o&&EY(n,o),t}(kY);function RY(e){return(RY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AY(e,t){return!t||"object"!==RY(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MY(e,t,n){return(MY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=IY(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function IY(e){return(IY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FY(e,t){return(FY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DY._$name="NonWorkingTime",nC.registerFeature(DY,!1,"Scheduler");var LY=function(e){function t(){return PY(this,t),AY(this,IY(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FY(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Pan"}},{key:"defaultConfig",get:function(){return{vertical:!0}}},{key:"pluginConfig",get:function(){return{chain:["onElementMouseDown","onElementMouseMove","onElementMouseUp"]}}}],(r=[{key:"construct",value:function(e,n){if(this.timeline=e,e.features.eventDragCreate&&!e.features.eventDragCreate.disabled)throw new Error("Cannot combine Pan and eventDragCreate features");this.targetSelector=[".b-grid-cell",".b-timeline-subgrid"].join(","),MY(IY(t.prototype),"construct",this).call(this,e,n)}},{key:"onElementMouseDown",value:function(e){var t=this,n=t.timeline,r=Object.values(n.features).find((function(e){return e instanceof rB})),o=n.readOnly||!r||r.disabled;e.touches||0!==e.button||t.disabled||(e.target.matches(t.targetSelector)||o&&e.target.closest(n.eventSelector))&&(t.mouseX=e.clientX,t.mouseY=e.clientY)}},{key:"onElementMouseMove",value:function(e){var t=this;if(0!==e.buttons||we.isSafari||we.isIE11&&!e.isTrusted){if("number"==typeof t.mouseX){var n=t.timeline.subGrids.normal.scrollable,r=t.timeline.scrollable,o=e.clientX,i=e.clientY;e.preventDefault(),t.vertical&&r.scrollBy(0,t.mouseY-i),n.scrollBy(t.mouseX-o),t.mouseX=o,t.mouseY=i}}else t.onElementMouseUp()}},{key:"onElementMouseUp",value:function(e){this.mouseX=this.mouseY=null}}])&&TY(n.prototype,r),o&&TY(n,o),t}(es);function NY(e){return(NY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zY(e,t){return!t||"object"!==NY(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VY(e){return(VY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WY(e,t){return(WY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}LY._$name="Pan",nC.registerFeature(LY,!1,["Scheduler","Gantt"]);var $Y=function(e){function t(){return HY(this,t),zY(this,VY(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WY(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return["resourceId","timeRangeColor"]}},{key:"relationConfig",get:function(){return[{relationName:"resource",fieldName:"resourceId",store:"resourceStore",collectionName:"timeRanges",nullFieldOnRemove:!0}]}}],(r=[{key:"isResourceTimeRange",get:function(){return!0}},{key:"resources",get:function(){return[this.resource]}}])&&BY(n.prototype,r),o&&BY(n,o),t}(bF);function YY(e){return(YY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qY(e,t){return!t||"object"!==YY(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XY(e){return(XY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KY(e,t){return(KY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}$Y._$name="ResourceTimeRangeModel";var ZY=function(e){function t(){return GY(this,t),qY(this,XY(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KY(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{loadPriority:500,syncPriority:500,resourceStore:null,modelClass:$Y,storeId:"resourceTimeRanges"}}}],(r=[{key:"getResourcesForEvent",value:function(e){return[e.resource]}},{key:"resourceStore",set:function(e){this._resourceStore=e,this.isConfiguring||this.initRelations(!0)},get:function(){return this._resourceStore}}])&&UY(n.prototype,r),o&&UY(n,o),t}(hd);function JY(e){return(JY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QY(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function eG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nG(e,t){return!t||"object"!==JY(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rG(e,t,n){return(rG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oG(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function oG(e){return(oG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iG(e,t){return(iG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ZY._$name="ResourceTimeRangeStore";var aG=function(e){function t(){return eG(this,t),nG(this,oG(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iG(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ResourceTimeRanges"}},{key:"defaultConfig",get:function(){return{idPrefix:"resourcetimerange",rangeCls:"b-sch-resourcetimerange",store:!1,resourceTimeRanges:null}}},{key:"pluginConfig",get:function(){return{chain:["getEventsToRender","onEventDataGenerated","noFeatureElementsInAxis"]}}}],(r=[{key:"noFeatureElementsInAxis",value:function(){var e=this.scheduler.timeAxis;return!this.store.storage.values.some((function(t){return e.isTimeSpanInAxis(t)}))}},{key:"construct",value:function(e,n){var r=this;r.scheduler=e,rG(oG(t.prototype),"construct",this).call(this,e,n),Object.defineProperty(e,"resourceTimeRanges",{get:function(){return r.store.records},set:function(e){return r.store.data=e}})}},{key:"doDisable",value:function(e){this.client.isPainted&&this.client.refresh(),rG(oG(t.prototype),"doDisable",this).call(this,e)}},{key:"getEventsToRender",value:function(e,t){return e.timeRanges&&e.timeRanges.length&&!this.disabled&&t.push.apply(t,QY(e.timeRanges)),t}},{key:"onEventDataGenerated",value:function(e){var t=this,n=e.event||e.eventRecord;n.isResourceTimeRange&&(t.scheduler.isVertical?e.width=t.scheduler.resourceColumnWidth:(e.top=0,e.id="".concat(t.scheduler.id,"-").concat(t.idPrefix,"-").concat(n.id)),e.fillSize=!0,e.eventId="".concat(t.idPrefix,"-").concat(n.id),e.wrapperCls[t.rangeCls]=1,e.wrapperCls["b-sch-color-".concat(n.timeRangeColor)]=n.timeRangeColor,e.body=document.createDocumentFragment(),e.body.textContent=n.name)}},{key:"onStoreChange",value:function(e){this.scheduler.onInternalEventStoreChange(e)}},{key:"store",set:function(e){var t=this,n=t.scheduler;t._store=e=e||new ZY,n.resourceTimeRangeStore||(n.resourceTimeRangeStore=e),n.resourceTimeRanges&&(e.add(n.resourceTimeRanges),delete n.resourceTimeRanges),e.resourceStore||(e.resourceStore=n.resourceStore),t.storeDetacher&&t.storeDetacher(),t.storeDetacher=t.store.on({change:t.onStoreChange,thisObj:t})},get:function(){return this._store}}])&&tG(n.prototype,r),o&&tG(n,o),t}(es);function uG(e){return(uG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fG(e,t){return!t||"object"!==uG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dG(e,t,n){return(dG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pG(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pG(e){return(pG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hG(e,t){return(hG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}aG.featureClass="",aG._$name="ResourceTimeRanges",nC.registerFeature(aG,!1,"Scheduler");var yG=function(e){function t(){return sG(this,t),fG(this,pG(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hG(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"SimpleEventEdit"}},{key:"defaultConfig",get:function(){return{triggerEvent:"eventdblclick",eventRecord:null,field:"name",editorConfig:null}}},{key:"pluginConfig",get:function(){return{chain:["onEventEnterKey"],assign:["editEvent"]}}}],(r=[{key:"construct",value:function(e,n){var r,o=this;o.scheduler=e,o.eventStore=e.eventStore,e.eventEdit=o,dG(pG(t.prototype),"construct",this).call(this,e,n),o.clientListenersDetacher=e.on((cG(r={},o.triggerEvent,(function(e){var t=e.eventRecord,n=e.eventElement;return o.editEvent(t,t.resource,n)})),cG(r,"dragcreateend",o.onDragCreateEnd),cG(r,"thisObj",o),r))}},{key:"doDestroy",value:function(){this.clientListenersDetacher(),this.editor&&this.editor.destroy(),dG(pG(t.prototype),"doDestroy",this).call(this)}},{key:"editEvent",value:function(e,t,n){var r=this,o=r.scheduler;o.readOnly||r.disabled||(n=xn.down(n,o.eventInnerSelector)||n,e=e instanceof BM?e.event:e,r.resource=t,r.event=e,r.element=n,o.element.classList.add("b-eventeditor-editing"),r.editor||(r.editor=new uh(Object.assign({owner:r.scheduler.timeAxisSubGrid,appendTo:r.scheduler.timeAxisSubGridElement,scrollAction:"realign",cls:"b-simpleeventeditor",listeners:{complete:r.onEditorComplete,cancel:r.onEditorCancel,thisObj:r}},r.editorConfig)),r.relayEvents(r.editor,["beforestart","start","beforecomplete","complete","beforecancel","cancel"])),r.editor.startEdit({target:n,record:e,field:r.field}),r.scheduler.navigator.disabled=!0)}},{key:"onEditorComplete",value:function(){var e=this;0===e.event.stores.length&&(e.eventStore.add(e.editor.record),e.event.assign(e.resource)),e.element&&e.element.classList.contains("b-sch-dragcreator-proxy")&&e.element.remove(),e.reset()}},{key:"onEditorCancel",value:function(){0===this.event.stores.length&&this.element.remove(),this.reset()}},{key:"reset",value:function(){this.scheduler.element.classList.remove("b-eventeditor-editing"),this.scheduler.navigator.disabled=!1}},{key:"onEventEnterKey",value:function(e){var t=e.assignmentRecord,n=e.eventRecord,r=t?this.scheduler.getElementFromAssignmentRecord(t):this.scheduler.getElementFromEventRecord(n),o=(t||n).resource;this.editEvent(n,o,r)}},{key:"onDragCreateEnd",value:function(e){var t=e.newEventRecord,n=e.resourceRecord,r=e.proxyElement;this.scheduler.onEventCreated(t);var o=r.cloneNode(!0);o.removeAttribute("id"),r.parentElement.appendChild(o),this.element=o,this.editEvent(t,n,o)}}])&&lG(n.prototype,r),o&&lG(n,o),t}(es);function gG(e){return(gG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bG(e,t){return!t||"object"!==gG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wG(e,t,n,r){return(wG="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=SG(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function kG(e,t,n){return(kG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=SG(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function SG(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OG(e)););return e}function OG(e){return(OG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EG(e,t){return(EG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yG._$name="SimpleEventEdit",nC.registerFeature(yG,!1,"Scheduler");var CG=function(e){function t(){return vG(this,t),bG(this,OG(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EG(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TimeRanges"}},{key:"defaultConfig",get:function(){return{store:{modelClass:bF,storeId:"timeRanges"},updateCurrentTimeLineInterval:1e4,currentDateFormat:"HH:mm",timeRanges:null,showCurrentTimeLine:!1}}}],(r=[{key:"construct",value:function(e,n){var r=this;kG(OG(t.prototype),"construct",this).call(this,e,n),e._timeRangesExposed||(Object.defineProperty(e,"timeRanges",{get:function(){return r.store.records},set:function(e){return r.store.data=e}}),e._timeRangesExposed=!0)}},{key:"startConfigure",value:function(e){var t=this.client;if(t.project){var n=t.project.timeRangeStore;n&&(e.store=n)}}},{key:"initCurrentTimeLine",value:function(){var e=this,t=new Date;!e.currentTimeLine&&e.showCurrentTimeLine&&(e.currentTimeLine=new e.store.modelClass({id:"currentTime",cls:"b-sch-current-time",startDate:t,name:xt.format(t,e.currentDateFormat)}),e.updateCurrentTimeLine=e.updateCurrentTimeLine.bind(e),e.currentTimeInterval=e.setInterval(e.updateCurrentTimeLine,e.updateCurrentTimeLineInterval),e.client.isPainted&&e.renderRanges())}},{key:"updateCurrentTimeLine",value:function(){var e=this;e.currentTimeLine.startDate=new Date,e.currentTimeLine.name=xt.format(e.currentTimeLine.startDate,e.currentDateFormat),e.onStoreChanged({action:"update",record:e.currentTimeLine,changes:{}})}},{key:"hideCurrentTimeLine",value:function(){var e=this;e.currentTimeLine&&(e.clearInterval(e.currentTimeInterval),e.currentTimeLine=null,e.client.isPainted&&e.renderRanges())}},{key:"renderRanges",value:function(){kG(OG(t.prototype),"renderRanges",this).call(this),this.showCurrentTimeLine&&!this.disabled&&this.renderRange(this.currentTimeLine,!0)}},{key:"getHeaderMenuItems",value:function(e,t){var n=this;t.some((function(e){return e.isCurrentTimeline}))||"timeAxis"!==e.type||t.push({isCurrentTimeline:!0,text:n.L("showCurrentTimeLine"),checked:n.showCurrentTimeLine,onToggle:function(e){var t=e.checked;n.showCurrentTimeLine=t}})}},{key:"showCurrentTimeLine",get:function(){return this._showCurrentTimeLine},set:function(e){this._showCurrentTimeLine=e,e?this.initCurrentTimeLine():this.hideCurrentTimeLine()}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this.client.isPainted&&this.renderRanges()}},{key:"store",get:function(){return this._store},set:function(e){var n=this,r=n.client;e.storeId||(e.storeId="timeRanges"),function(e,t,n,r,o){if(!wG(e,t,n,r||e)&&o)throw new Error("failed to set property")}(OG(t.prototype),"store",e,this,!0),r.timeRanges&&!r._timeRangesExposed&&(n._store.add(r.timeRanges),delete r.timeRanges),n.timeRanges&&(n._store.add(n.timeRanges),delete n.timeRanges)}}])&&mG(n.prototype,r),o&&mG(n,o),t}(kY);CG._$name="TimeRanges",nC.registerFeature(CG,!1,["Scheduler","Gantt"]);n(240);function xG(e){return(xG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _G(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function jG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PG(e,t){return!t||"object"!==xG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TG(e,t,n){return(TG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AG(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function AG(e){return(AG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MG(e,t){return(MG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function IG(e){return(IG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function LG(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function NG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BG(e,t){return!t||"object"!==IG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zG(e){return(zG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VG(e,t){return(VG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var WG=function(e){function t(){return NG(this,t),BG(this,zG(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VG(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{startSide:"right",startArrowSize:0,startArrowMargin:12,startShift:0,endSide:"left",endArrowSize:0,endArrowMargin:12,endShift:0,verticalMargin:2,horizontalMargin:5,otherBoxes:null}}},{key:"sideToSide",get:function(){return{l:"left",r:"right",t:"top",b:"bottom"}}}],(r=[{key:"findPath",value:function(e,t){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m,b,w,k,S,O,E,C,x,_,j,D,R,P,T,A=this;for(t&&!Array.isArray(t)&&(t=[t]),T=0;e&&!P;)for(r=(n=Object.assign(A.config,e)).startBox,o=n.endBox,i=n.startShift,a=n.endShift,u=n.startSide,c=n.endSide,s=n.startArrowSize,l=n.endArrowSize,f=n.startArrowMargin,d=n.endArrowMargin,p=n.horizontalMargin,h=n.verticalMargin,y=n.hasOwnProperty("startHorizontalMargin")?n.startHorizontalMargin:p,g=n.hasOwnProperty("startVerticalMargin")?n.startVerticalMargin:h,v=n.hasOwnProperty("endHorizontalMargin")?n.endHorizontalMargin:p,m=n.hasOwnProperty("endVerticalMargin")?n.endVerticalMargin:h,b=n.hasOwnProperty("otherHorizontalMargin")?n.otherHorizontalMargin:p,w=n.hasOwnProperty("otherVerticalMargin")?n.otherVerticalMargin:h,k=n.otherBoxes,u=A.normalizeSide(u),c=A.normalizeSide(c),S=A.getConnectionCoordinatesFromBoxSideShift(r,u,i),O=A.getConnectionCoordinatesFromBoxSideShift(o,c,a),j=A.calcGridBaseBoxFromBoxAndDrawParams(r,u,s,f,y,g),D=A.calcGridBaseBoxFromBoxAndDrawParams(o,c,l,d,v,m),k=k&&k.map((function(e){return A.calcGridBaseBoxFromBoxAndDrawParams(e,!1,0,0,b,w)})),E=A.getConnectionCoordinatesFromBoxSideShift(j,u,i),C=A.getConnectionCoordinatesFromBoxSideShift(D,c,a),R=A.buildPathGrid(j,D,E,C,u,c,k),x=A.convertDecartPointToGridPoint(R,E),_=A.convertDecartPointToGridPoint(R,C),P=A.findPathOnGrid(R,x,_,u,c),e=!1;!P&&!e&&t&&T<t.length;T++)e=t[T](n);return P&&(P=A.prependPathWithArrowStaffSegment(P,S,s,u),P=A.appendPathWithArrowStaffSegment(P,O,l,c),P=A.optimizePath(P)),P}},{key:"getConnectionCoordinatesFromBoxSideShift",value:function(e,t,n){var r;switch(t){case"left":r={x:e.start,y:(e.top+e.bottom)/2+n};break;case"right":r={x:e.end,y:(e.top+e.bottom)/2+n};break;case"top":r={x:(e.start+e.end)/2+n,y:e.top};break;case"bottom":r={x:(e.start+e.end)/2+n,y:e.bottom}}return r}},{key:"calcGridBaseBoxFromBoxAndDrawParams",value:function(e,t,n,r,o,i){var a;switch(t){case"left":a={start:e.start-Math.max(n+r,o),end:e.end+o,top:e.top-i,bottom:e.bottom+i};break;case"right":a={start:e.start-o,end:e.end+Math.max(n+r,o),top:e.top-i,bottom:e.bottom+i};break;case"top":a={start:e.start-o,end:e.end+o,top:e.top-Math.max(n+r,i),bottom:e.bottom+i};break;case"bottom":a={start:e.start-o,end:e.end+o,top:e.top-i,bottom:e.bottom+Math.max(n+r,i)};break;default:a={start:e.start-o,end:e.end+o,top:e.top-i,bottom:e.bottom+i}}return a}},{key:"buildPathGrid",value:function(e,t,n,r,o,i,a){var u,c,s,l,f,d,p,h,y,g,v,m,b,w={},k=[];for(u=[e.start,"left"===o||"right"===o?(e.start+e.end)/2:n.x,e.end,t.start,"left"===i||"right"===i?(t.start+t.end)/2:r.x,t.end],c=[e.top,"top"===o||"bottom"===o?(e.top+e.bottom)/2:n.y,e.bottom,t.top,"top"===i||"bottom"===i?(t.top+t.bottom)/2:r.y,t.bottom],a&&a.forEach((function(e){u.push(e.start,(e.start+e.end)/2,e.end),c.push(e.top,(e.top+e.bottom)/2,e.bottom)})),u=LG(new Set(u.sort((function(e,t){return e-t})))),d=0,h=(c=LG(new Set(c.sort((function(e,t){return e-t}))))).length;d<h;++d)for(w[d]=w[d]||{},s=c[d],f=0,p=u.length;f<p;++f){if(m=((l=u[f])<=e.start||l>=e.end||s<=e.top||s>=e.bottom)&&(l<=t.start||l>=t.end||s<=t.top||s>=t.bottom),a)for(y=0,g=a.length;m&&y<g;++y)m=l<=(v=a[y]).start||l>=v.end||s<=v.top||s>=v.bottom||l===n.x&&s===n.y||l===r.x&&s===r.y;b={distance:Math.pow(2,53)-1,permitted:m,x:l,y:s,ix:f,iy:d},w[d][f]=b,k.push(b)}return{width:u.length,height:c.length,xs:u,ys:c,points:w,linearPoints:k}}},{key:"convertDecartPointToGridPoint",value:function(e,t){var n=e.xs.indexOf(t.x),r=e.ys.indexOf(t.y);return e.points[r][n]}},{key:"findPathOnGrid",value:function(e,t,n,r,o){var i=!1;return t.permitted&&n.permitted&&(e=this.waveForward(e,t,0),i=this.collectPath(e,n,o)),i}},{key:"getGridPointNeighbors",value:function(e,t,n){var r,o=t.ix,i=t.iy,a=[];return i<e.height-1&&(r=e.points[i+1][o],(!n||n(r))&&a.push(r)),i>0&&(r=e.points[i-1][o],(!n||n(r))&&a.push(r)),o<e.width-1&&(r=e.points[i][o+1],(!n||n(r))&&a.push(r)),o>0&&(r=e.points[i][o-1],(!n||n(r))&&a.push(r)),a}},{key:"waveForward",value:function(e,t,n){var r=this;return Df.preWalkUnordered([t,n],(function(t){var n=FG(t,2),o=n[0],i=n[1];return r.getGridPointNeighbors(e,o,(function(e){return e.permitted&&e.distance>i+1})).map((function(e){return[e,i+1]}))}),(function(e){var t=FG(e,2),n=t[0],r=t[1];return n.distance=r})),e}},{key:"collectPath",value:function(e,t,n){for(var r,o,i,a,u=!0,c=[];u&&t.distance;)if(u=(r=this.getGridPointNeighbors(e,t,(function(e){return e.permitted&&e.distance==t.distance-1}))).length>0){switch(o=(r=r.sort((function(e,r){var o,i;o=e.ix-t.ix,i=e.iy-t.iy;var a=("left"===n||"right"===n)&&0===i||("top"===n||"bottom"===n)&&0===o?-1:1;o=r.ix-t.ix,i=r.iy-t.iy;var u=("left"===n||"right"===n)&&0===i||("top"===n||"bottom"===n)&&0===o?-1:1;return a>u?1:a<u?-1:a===u?e.y>r.y?-1:1:void 0})))[0],c.push({x1:o.x,y1:o.y,x2:t.x,y2:t.y}),i=o.ix-t.ix,a=o.iy-t.iy,!0){case!a&&i>0:n="left";break;case!a&&i<0:n="right";break;case!i&&a>0:n="top";break;case!i&&a<0:n="bottom"}t=o}return u&&c.reverse()||!1}},{key:"prependPathWithArrowStaffSegment",value:function(e,t,n,r){var o,i;if(e.length>0){switch(o={x2:(i=e[0]).x1,y2:i.y1},r){case"left":o.x1=t.x-n,o.y1=i.y1;break;case"right":o.x1=t.x+n,o.y1=i.y1;break;case"top":o.x1=i.x1,o.y1=t.y-n;break;case"bottom":o.x1=i.x1,o.y1=t.y+n}e.unshift(o)}return e}},{key:"appendPathWithArrowStaffSegment",value:function(e,t,n,r){var o,i;if(e.length>0){switch(o={x1:(i=e[e.length-1]).x2,y1:i.y2},r){case"left":o.x2=t.x-n,o.y2=i.y2;break;case"right":o.x2=t.x+n,o.y2=i.y2;break;case"top":o.x2=i.x2,o.y2=t.y-n;break;case"bottom":o.x2=i.x2,o.y2=t.y+n}e.push(o)}return e}},{key:"optimizePath",value:function(e){var t,n,r=[];if(e.length>0)for(t=e.shift(),r.push(t);e.length>0;)n=e.shift(),t.x1==n.x1&&t.y1==n.y1&&t.x2==n.x2&&t.y2==n.y2?t=n:t.y1-t.y2==0&&n.y1-n.y2==0?t.x2=n.x2:t.x1-t.x2==0&&n.x1-n.x2==0?t.y2=n.y2:(r.push(n),t=n);return r}},{key:"normalizeSide",value:function(e){return t.sideToSide[e]||e}}])&&HG(n.prototype,r),o&&HG(n,o),t}(Y);function $G(e){return($G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YG(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n             <table class="b-sch-dependency-tooltip">\n                <tr>\n                    <td>',": </td>\n                    <td>",'</td>\n                    <td>\n                        <div class="b-sch-box b-','"></div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>',": </td>\n                    <td>",'</td>\n                    <td><div class="b-sch-box b-','"></div></td>\n                </tr>\n            </table>\n        ']);return YG=function(){return e},e}function GG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function UG(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KG(e,t){return!t||"object"!==$G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZG(e,t,n){return(ZG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=JG(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function JG(e){return(JG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QG(e,t){return(QG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}WG._$name="RectangularPathFinder";var eU=["left","left","right","right"],tU=["left","right","left","right"],nU=function(e){function t(){return qG(this,t),KG(this,JG(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QG(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Dependencies"}},{key:"defaultConfig",get:function(){return{pathFinderConfig:null,overCls:"b-sch-dependency-over",baseCls:"b-sch-dependency",store:null,dependencies:null,highlightDependenciesOnEventHover:!1,showTooltip:!0,tooltip:null,bufferSize:50,cacheGridSize:{x:500,index:25},drawnDependencies:[],drawnLines:[],dependenciesToRefresh:new Map,storeClass:uH}}},{key:"pluginConfig",get:function(){return{chain:["render","renderContents","onElementClick","onElementDblClick","onElementMouseOver","onElementMouseOut"],assign:["getElementForDependency","getDependencyForElement"]}}}],(r=[{key:"construct",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;if(e.isVertical)throw new Error("Dependencies feature is not supported in vertical mode");r.doScheduleDraw=r.createOnFrame("draw",[],r,!0),ZG(JG(t.prototype),"construct",this).call(this,e,n),r.pathFinder=new WG(r.pathFinderConfig),delete r.pathFinderConfig,r.lineDefAdjusters=r.createLineDefAdjusters()}},{key:"doDestroy",value:function(){this.tooltip&&this.tooltip.destroy(),ZG(JG(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){this.updateCreateListeners(),this.client.isPainted&&this.draw(),ZG(JG(t.prototype),"doDisable",this).call(this,e)}},{key:"exposeSchedulerDependenciesProperty",value:function(){var e=this;e.dependenciesPropertyExposed&&delete e.client.dependencies,Object.defineProperty(e.client,"dependencies",{configurable:!0,get:function(){return e.dependencyStore.records},set:function(t){return e.dependencyStore.data=t}}),e.dependenciesPropertyExposed=!0}},{key:"getResourceStoreListenersConfig",value:function(){return{refresh:this.onRowStoreRefresh}}},{key:"obtainDependencyStore",value:function(e,n){var r=n&&n.store||ZG(JG(t.prototype),"obtainDependencyStore",this).call(this,e,n);return!0!==r&&r||(r=new this.storeClass),r}},{key:"getDependencyStoreListenersConfig",value:function(){return{change:this.onDependencyChange}}},{key:"onDependencyStoreChange",value:function(e,t){var n=this,r=n.client;n.resetGridCache(),n.resetBoundsCache(),r.dependencyStore=e,e&&(!n.dependenciesPropertyExposed&&r.dependencies&&(e.data=r.dependencies,delete r.dependencies),n.dependencies&&(e.data=n.dependencies,delete n.dependencies),e.metaMapId=r.id,e.eventStore=r.eventStore,n.exposeSchedulerDependenciesProperty())}},{key:"getAssignmentStoreListenersConfig",value:function(){return{change:this.onAssignmentChange,refresh:this.onAssignmentRefresh}}},{key:"getEventStoreListenersConfig",value:function(){return{change:this.onEventChange}}},{key:"createMarkers",value:function(){var e=this,t=e.client.svgCanvas,n=e.endMarker=e.initMarkerElement("arrowEnd","8","M0,0 L0,6 L9,3 z");if(we.isEdge||we.isIE11){var r=e.startMarker=e.initMarkerElement("arrowStart","1","M0,3 L9,6 L9,0 z");t.appendChild(r)}else n.setAttribute("orient","auto-start-reverse");t.appendChild(n)}},{key:"initMarkerElement",value:function(e,t,n){return xn.createElement({id:e,tag:"marker",ns:"http://www.w3.org/2000/svg",markerHeight:9,markerWidth:9,refX:t,refY:3,viewBox:"0 0 9 6",orient:"auto",markerUnits:"userSpaceOnUse",children:[{tag:"path",ns:"http://www.w3.org/2000/svg",d:n}]})}},{key:"createLineDefAdjusters",value:function(){var e=this.client;return[function(t){var n=!1;return(t.startArrowMargin>e.barMargin||t.endArrowMargin>e.barMargin)&&(t.startArrowMargin=t.endArrowMargin=e.barMargin,n=!0),n?t:n},function(e){var t=!1;return(e.startArrowMargin>0||e.endArrowMargin>0)&&(e.startArrowMargin=e.endArrowMargin=0,t=!0),t?e:t}]}},{key:"getElementForDependency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n='[depId="'.concat(e.id,'"]');return t&&(n+='[fromId="'.concat(t.from.id,'"][toId="').concat(t.to.id,'"]')),this.client.svgCanvas.querySelector(n)}},{key:"getDependencyForElement",value:function(e){var t="string"==typeof e?e:e.getAttribute("depId");return this.dependencyStore.getById(t)}},{key:"onToggleNode",value:function(){this.dependencyGridCache=null,this.scheduleDraw(!0)}},{key:"onViewportResize",value:function(){this.scheduleDraw(!0)}},{key:"onTranslateRow",value:function(e){var t=e.row;t.lastTop>=0&&t.top!==t.lastTop&&this.scheduleDraw(!0)}},{key:"onChangeTotalHeight",value:function(){this.scheduleDraw(!0)}},{key:"onHorizontalScroll",value:function(e){var t=e.subGrid;this.isDrawn&&t===this.client.timeAxisSubGrid&&this.scheduleDraw(!1)}},{key:"onVerticalScroll",value:function(){this.isDrawn&&this.scheduleDraw(!1)}},{key:"onRowsRefresh",value:function(){this.scheduleDraw(!0)}},{key:"onRowsRerender",value:function(){this.scheduleDraw(!0)}},{key:"onRowStoreRefresh",value:function(e){switch(e.action){case"sort":case"filter":case"batch":return this.dependencyGridCache=null,this.scheduleDraw(!0)}}},{key:"onDependencyChange",value:function(e){var t=e.action,n=e.record,r=e.records,o=this;if(o.client.isPainted&&!o.disabled){switch(t){case"dataset":o.dependencyGridCache={};case"add":var i=o._dependencyGridCache;return r.forEach((function(e){i&&o.addToGridCache(e)})),i||o._thisIsAUsedExpression(o.dependencyGridCache),void o.scheduleDraw();case"update":return o.scheduleRefreshDependency(n);case"remove":return r.forEach((function(e){o.releaseDependency(e,!0),o.removeFromCache(e)})),void o.client.trigger("dependenciesDrawn");case"removeall":case"filter":o.dependencyGridCache=null}o.scheduleDraw(!0)}}},{key:"onEventChange",value:function(e){var t=this,n=e.action,r=e.record;switch(n){case"filter":return this.scheduleDraw(!0);case"update":if(r.isEvent){var o=[r];r.resources.forEach((function(e){return o.push.apply(o,UG(e.events))})),new Set(o).forEach((function(e){return t.drawForTimeSpan(e,!0)}))}else this.drawForTimeSpan(r,!0);break;case"removeall":return this.resetGridCache(),this.scheduleDraw(!0)}}},{key:"onAssignmentRefresh",value:function(e){"dataset"===e.action&&(this.resetGridCache(),this.scheduleDraw(!0))}},{key:"onAssignmentChange",value:function(e){var t=this,n=e.action,r=e.record,o=e.records,i=this;r&&(o=[r]),"add"!==n&&"remove"!==n&&"update"!==n||o.forEach((function(e){t.dataApi.getAssignmentDependencies({assignment:e,dependencyStore:t.dependencyStore}).forEach((function(o){"add"===n?i.scheduleRefreshDependency(o):"remove"===n?(t.dataApi.isDependencySourceAssignment({dependency:o,assignment:e})?t.dataApi.getDependencyTargetAssignments({dependency:o,assignmentStore:t.assignmentStore}).map((function(t){return{from:e,to:t}})):t.dataApi.getDependencySourceAssignments({dependency:o,assignmentStore:t.assignmentStore}).map((function(t){return{from:t,to:e}}))).forEach((function(e){i.releaseDependency(o,e),i.removeFromCache(o,e)})):"update"===n&&t.dataApi.getDependencyAssignmentsAsFromToArray({dependency:o,assignmentStore:t.assignmentStore}).filter((function(e){return e.from===r||e.to===r})).forEach((function(e){t.scheduleRefreshDependency(o,e)}))}))}))}},{key:"onElementClick",value:function(e){if(e.target.matches("."+this.baseCls)){var t=tg.get(e.target).dependency,n="click"===e.type?"Click":"DblClick";this.client.trigger("dependency".concat(n),{dependency:t,event:e})}}},{key:"onElementDblClick",value:function(e){return this.onElementClick(e)}},{key:"onElementMouseOver",value:function(e){var t=this;if(e.target.matches("."+t.baseCls)){var n=tg.get(e.target).dependency;t.client.trigger("dependencyMouseOver",{dependency:n,event:e}),t.overCls&&t.highlight(n,t.overCls)}}},{key:"onElementMouseOut",value:function(e){if(e.target.matches("."+this.baseCls)){var t=tg.get(e.target).dependency;this.client.trigger("dependencyMouseOut",{dependency:t,event:e}),this.overCls&&!t.meta.removed&&this.unhighlight(t)}}},{key:"highlight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.overCls,n=this.getElementForDependency(e);n&&n.classList.add(t),e.highlight(t)}},{key:"unhighlight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.overCls,n=this.getElementForDependency(e);n&&n.classList.remove(t),e.unhighlight(t)}},{key:"highlightEventDependencies",value:function(e){var t=this;e.allDependencies.forEach((function(e){return t.highlight(e)}))}},{key:"unhighlightEventDependencies",value:function(e){var t=this;e.allDependencies.forEach((function(e){return t.unhighlight(e)}))}},{key:"isDependencyVisible",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this,i=o.dataApi,a=o.resourceStore,u=o.eventStore,c=i.getDependencySourceEvent({dependency:e}),s=i.getDependencyTargetEvent({dependency:e});if(!c||!s)return!1;if(r){if(t=i.getAssignmentResource({assignment:r.from,resourceStore:a}),n=i.getAssignmentResource({assignment:r.to,resourceStore:a}),u.isFiltered&&(-1===u.indexOf(c)||-1===u.indexOf(s)))return!1}else t=i.getEventResource({event:c,resourceStore:a}),n=i.getEventResource({event:s,resourceStore:a});return c instanceof qs&&t instanceof jN&&n instanceof jN&&!t.instanceMeta(a).hidden&&!n.instanceMeta(a).hidden}},{key:"getBox",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.getTimeSpanRecordFromDependency(e,t);return n=r?this.dataApi.getAssignmentResource({assignment:r[t?"from":"to"],resourceStore:this.resourceStore}):this.dataApi.getEventResource({event:o,resourceStore:this.resoureStore}),this.client.getResourceEventBox(o,n,!0)}},{key:"getRowRecordFromDependency",value:function(e,t,n){return n?this.dataApi.getAssignmentResource({assignment:n[t?"from":"to"],resourceStore:this.resourceStore}):this.dataApi.getEventResource({event:this.getTimeSpanRecordFromDependency(e,t),resourceStore:this.resourceStore})}},{key:"getTimeSpanRecordFromDependency",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e["".concat(t?"source":"target","Event")]}},{key:"getMetaId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?"".concat(this.client.id,"-ass").concat(e.from.id,"-ass").concat(e.to.id):this.client.id}},{key:"getDependencyBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=n.client,o=e.getDateRange();if(!r.rowManager.rowCount||!n.isDependencyVisible(e,t))return null;if(!o||!xt.intersectSpans(o.start,o.end,r.startDate,r.endDate))return null;var i=n.getMetaId(t),a=e.instanceMeta(i),u=n.getBox(e,!0,t),c=n.getBox(e,!1,t);if(!u||!c)return null;if(n._resetBoundsCache||!a.bounds||!a.bounds.layout){var s=n.getTimeSpanRecordFromDependency(e,!0),l=n.getTimeSpanRecordFromDependency(e,!1),f=u instanceof tr?u:new tr(u.start,u.top,u.end-u.start,u.bottom-u.top),d=c instanceof tr?c:new tr(c.start,c.top,c.end-c.start,c.bottom-c.top),p=tr.union(f,d);r.isGantt||[[s,f,u],[l,d,c]].map((function(e){var t=GG(e,3),n=t[0],o=t[1],i=t[2];if("default"===r.milestoneLayoutMode&&n.isMilestone){!r.milestoneWidth&&i.eventEl&&n.iconCls&&(r.milestoneWidth=i.eventEl.firstElementChild.offsetWidth);var a=r.milestoneWidth||o.height;o.left-=a/2,o.right+=a/2}})),a.bounds={bounds:p,startRectangle:f,endRectangle:d,layout:u.layout&&c.layout}}return e.instanceMeta(i).bounds}},{key:"getIteratableDependencyAssignments",value:function(e){return this.assignmentStore?this.dataApi.getDependencyAssignmentsAsFromToArray({dependency:e,assignmentStore:this.assignmentStore}):[null]}},{key:"addToGridCache",value:function(e){var t=this,n=t.dependencyGridCache,r=t.cacheGridSize,o=t.rowStore;t.getIteratableDependencyAssignments(e).forEach((function(i){var a=t.getDependencyBounds(e,i);a&&function(){var u,c,s,l,f=t.getMetaId(i),d=e.instanceMeta(f).gridCache=[],p=o.indexOf(t.getRowRecordFromDependency(e,!0,i)),h=o.indexOf(t.getRowRecordFromDependency(e,!1,i)),y=Math.min(p,h),g=Math.max(p,h),v=a.bounds,m=Math.floor(Math.max(v.x,0)/r.x),b=Math.floor(v.right/r.x),w=Math.floor(y/r.index),k=Math.floor(g/r.index);for(s=m;s<=b;s++)for(u=n[s]||(n[s]={}),l=w;l<=k;l++)(c=u[l]||(u[l]=[])).find((function(t){return t.dependency.id===e.id&&t.assignmentData===i&&t.metaId===f}))||c.push({dependency:e,assignmentData:i,metaId:f}),d.push([s,l])}()}))}},{key:"removeFromCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;(t?[t]:this.getIteratableDependencyAssignments(e)).forEach((function(t){var r=n.getMetaId(t),o=e.instanceMeta(r);o.gridCache&&n._dependencyGridCache&&o.gridCache.forEach((function(r){var o=GG(r,2),i=o[0],a=o[1];if(n._dependencyGridCache.hasOwnProperty(i)&&n._dependencyGridCache[i].hasOwnProperty(a)){var u=n._dependencyGridCache[i][a],c=u.findIndex((function(n){return n.dependency===e&&(n.assignmentData===t||n.assignmentData.from===t.from&&n.assignmentData.to===t.to)}));c>-1&&u.splice(c,1)}})),o.bounds=null,o.gridCache=null}))}},{key:"resetBoundsCache",value:function(){this._resetBoundsCache=!0}},{key:"resetGridCache",value:function(){this.dependencyGridCache=null}},{key:"prepareLineDef",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this,r=n.getTimeSpanRecordFromDependency(e,!0),o=n.getTimeSpanRecordFromDependency(e,!1),i=e.type,a=e.fromSide,u=e.toSide;if(!a)switch(!0){case i===JN.Type.StartToEnd:case i===JN.Type.StartToStart:a=n.getConnectorStartSide(r);break;case i===JN.Type.EndToStart:case i===JN.Type.EndToEnd:a=n.getConnectorEndSide(r);break;default:throw new Error("Invalid dependency type: "+i)}if(!u)switch(!0){case i===JN.Type.StartToEnd:u=n.getConnectorEndSide(o);break;case i===JN.Type.StartToStart:case i===JN.Type.EndToStart:u=n.getConnectorStartSide(o);break;case i===JN.Type.EndToEnd:u=n.getConnectorEndSide(o);break;default:throw new Error("Invalid dependency type: "+i)}var c=t.startRectangle,s=t.endRectangle;return{startBox:{start:c.x,end:c.right,top:c.y,bottom:c.bottom},endBox:{start:s.x,end:s.right,top:s.y,bottom:s.bottom},startSide:a,endSide:u}}},{key:"drawLine",value:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.client,u=this.getMetaId(o),c=t.instanceMeta(u).lineElement;if(c&&i||(c=document.createElementNS("http://www.w3.org/2000/svg","polyline"),i&&(t.instanceMeta(u).lineElement=c),c.setAttribute("depId",t.id),o&&(c.setAttribute("fromId",o.from.id),c.setAttribute("toId",o.to.id)),e.appendChild(c)),c.classList.length&&c.classList.remove.apply(c.classList,c.getAttribute("class").split(" ")),c.classList.add(this.baseCls),t.cls&&c.classList.add(t.cls),t.bidirectional&&c.classList.add("b-sch-bidirectional-line"),t.highlighted&&(r=c.classList).add.apply(r,UG(t.highlighted.split(" "))),we.isIE11){var s=t.getDateRange(!0),l=a.startDate;s.start<l&&c.classList.add("b-no-start-marker"),s.end<l&&c.classList.add("b-no-end-marker")}return c.setAttribute("points",n?n.map((function(e,t){return t!==n.length-1?"".concat(e.x1,",").concat(e.y1):"".concat(e.x1,",").concat(e.y1," ").concat(e.x2,",").concat(e.y2)})).join(" "):""),tg.set(c,{dependency:t}),c}},{key:"refreshDependency",value:function(e){var t=this,n=t.getIteratableDependencyAssignments(e);t.releaseDependency(e,null!==n[0]),t.removeFromCache(e),t.addToGridCache(e),n.forEach((function(n){return t.drawDependency(e,null,n)}))}},{key:"refreshDependencyAssignment",value:function(e,t){this.releaseDependency(e,t),this.removeFromCache(e,t),this.addToGridCache(e),this.drawDependency(e,null,t)}},{key:"scheduleRefreshDependency",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.dependenciesToRefresh;n?r.has(e)?!0!==r.get(e)&&r.get(e).add(n):r.set(e,new Set([n])):r.set(e,!0),1===r.size&&this.requestAnimationFrame((function(){t.refreshDependencyOnFrame()}))}},{key:"refreshDependencyOnFrame",value:function(){var e=this,t=e.dependenciesToRefresh;e.client.isPainted&&(t.forEach((function(t,n){if(!0===t){var r=e.getIteratableDependencyAssignments(n);e.releaseDependency(n,null!==r[0]),e.removeFromCache(n)}else t.forEach((function(t){e.releaseDependency(n,t),e.removeFromCache(n,t)}))})),t.forEach((function(t,n){e.addToGridCache(n)})),t.forEach((function(t,n){!0===t&&(t=e.getIteratableDependencyAssignments(n)),t.forEach((function(t){e.drawDependency(n,null,t)}))})),t.clear(),e.client.trigger("dependenciesDrawn",{partial:!0}))}},{key:"drawDependency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.client.svgCanvas,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=this,a=i.drawnDependencies,u=i.oldDrawnDependencies,c=t||i.getDependencyBounds(e,n),s=function(t){return t.dependency===e&&(t.assignmentData===n||t.assignmentData&&t.assignmentData.from===n.from&&t.assignmentData.to===n.to)};if(!i.disabled&&c){var l=i.prepareLineDef(e,c),f=i.pathFinder.findPath(l,i.lineDefAdjusters);i.drawLine(r,e,f,n,o),o&&!a.some(s)&&a.push({dependency:e,assignmentData:n})}var d=u&&u.findIndex(s);d>=0&&u.splice(d,1)}},{key:"drawForTimeSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;n.client.isAnimating?n.client.on({transitionend:function(){n.drawForTimeSpan(e,!0)},once:!0}):n.dependencyStore.getTimeSpanDependencies(e).forEach((function(e){t?n.scheduleRefreshDependency(e):n.refreshDependency(e)}))}},{key:"drawForEvent",value:function(e){this.drawForTimeSpan(e)}},{key:"updateDependenciesForTimeSpan",value:function(e,t){var n,r=this,o=this,i=e.isAssignment?e.event:e,a=o.dependencyStore.getTimeSpanDependencies(i),u=o.getMetaId(),c=o.client,s=tr.from(t,c.timeAxisSubGridElement);a.forEach((function(t){r.getIteratableDependencyAssignments(t).forEach((function(r){var a,c,l,f=s.clone();r&&r.from!==e&&r.to!==e||o.isDependencyVisible(t,r)&&(o.getTimeSpanRecordFromDependency(t,!0)===i?(a=f,(n=t.instanceMeta(u).bounds)?c=n.endRectangle:(l=o.getBox(t,!1,r))&&(c=new tr(l.start,l.top,l.end-l.start,l.bottom-l.top))):((n=t.instanceMeta(u).bounds)?a=n.startRectangle:(l=o.getBox(t,!0,r))&&(a=new tr(l.start,l.top,l.end-l.start,l.bottom-l.top)),c=f),a&&c&&o.drawDependency(t,{startRectangle:a,endRectangle:c},r))}))}))}},{key:"scheduleDraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;e&&t.resetBoundsCache(),t.client.isAnimating?t.clientTransitionRemover||(t.clientTransitionRemover=t.client.on({transitionend:function(){t.clientTransitionRemover(),t.clientTransitionRemover=null,t.draw()},once:!0})):t.doScheduleDraw()}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.client;if((t.oldDrawnDependencies||t.dependencyStore.count)&&n.isPainted)if(n.isAnimating)n.on({transitionend:function(){t.scheduleDraw(!0)},once:!0});else{var r=n.timeAxisSubGrid.viewRectangle;if(e&&t.resetBoundsCache(),t.oldDrawnDependencies=t.drawnDependencies,t.drawnDependencies=[],!r.width||!r.height)return[];if(r.inflate(t.bufferSize),!t.disabled&&t.rowStore.count&&n.rowManager.rowCount){var o,i,a,u={},c=t.dependencyGridCache,s=t.cacheGridSize,l=Math.floor(Math.max(r.left,0)/s.x),f=Math.floor(r.right/s.x),d=Math.floor(n.rowManager.topRow.dataIndex/s.index),p=Math.floor(n.rowManager.bottomRow.dataIndex/s.index),h=[];for(o=l;o<=f;o++)for(i=d;i<=p;i++){var y=c[o],g=y&&y[i];for(a=0;g&&a<g.length;a++){var v=g[a],m=v.dependency,b=v.assignmentData,w=v.metaId,k=m.id+"-"+w;if(!u[k]){var S=t.getDependencyBounds(m,b);(S&&S.bounds.intersect(r,!0,!0)||n.ignoreViewBox)&&h.push([m,S,b]),u[k]=!0}}}h.forEach((function(e){var n=GG(e,3),r=n[0],o=n[1],i=n[2];t.drawDependency(r,o,i)}))}t._resetBoundsCache=!1,t.oldDrawnDependencies.forEach((function(e){return t.releaseDependency(e.dependency,e.assignmentData)})),n.trigger("dependenciesDrawn"),this.isDrawn=!0}}},{key:"releaseDependency",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!0===n)Object.keys(e.meta.map||{}).filter((function(e){return e.startsWith(t.client.id)})).forEach((function(t){var n=e.meta.map[t];n.lineElement&&(n.lineElement.remove(),n.lineElement=null)}));else{var r=this.getMetaId(n),o=e.instanceMeta(r).lineElement;o&&(e.instanceMeta(r).lineElement=null,o.remove())}}},{key:"render",value:function(){var e=this,t=e.client;e.showTooltip&&(e.tooltip=e.createTooltip()),t.timeAxis.on({endreconfigure:e.resetGridCache,thisObj:e}),t.rowManager.on({refresh:e.onRowsRefresh,changetotalheight:e.onChangeTotalHeight,thisObj:e}),t.on({horizontalscroll:e.onHorizontalScroll,svgcanvascreated:e.createMarkers,togglenode:e.onToggleNode,scroll:e.onVerticalScroll,timelineviewportresize:e.onViewportResize,thisObj:e}),e.highlightDependenciesOnEventHover&&(t.on(t.scheduledEventName+"MouseEnter",(function(t){return e.highlightEventDependencies(t.eventRecord||t.taskRecord)})),t.on(t.scheduledEventName+"MouseLeave",(function(t){return e.unhighlightEventDependencies(t.eventRecord||t.taskRecord)}))),e.draw()}},{key:"renderContents",value:function(){this.draw()}},{key:"getConnectorStartSide",value:function(e){return this.client.currentOrientation.getConnectorStartSide(e)}},{key:"getConnectorEndSide",value:function(e){return this.client.currentOrientation.getConnectorEndSide(e)}},{key:"createTooltip",value:function(){var e=this,t=e.client;return new Fu(Object.assign({align:"b-t",id:"".concat(t.id,"-dependency-tip"),forSelector:".b-timelinebase:not(.b-eventeditor-editing):not(.b-resizing-event):not(.b-dragcreating):not(.b-dragging-event):not(.b-creating-dependency) .".concat(e.baseCls),clippedBy:[t.timeAxisSubGridElement,t.bodyContainer],forElement:t.timeAxisSubGridElement,showOnHover:!0,hoverDelay:0,hideDelay:0,anchorToTarget:!1,trackMouse:!1,getHtml:e.getHoverTipHtml.bind(e)},e.tooltip||{}))}},{key:"getHoverTipHtml",value:function(e){var t=e.activeTarget,n=this,r=n.getDependencyForElement(t),o=n.dataApi.getDependencySourceEvent({dependency:r,eventStore:this.eventStore}),i=n.dataApi.getDependencyTargetEvent({dependency:r,eventStore:this.eventStore});return Xa.tpl(YG(),n.L("from"),o.name,eU[r.type],n.L("to"),i.name,tU[r.type])}},{key:"rowStore",get:function(){return this.resourceStore}},{key:"scheduler",get:function(){return this.client}},{key:"dependencyGridCache",get:function(){var e=this;return e._dependencyGridCache||(e._dependencyGridCache={},e.dependencyStore.forEach((function(t){return e.addToGridCache(t)}))),e._dependencyGridCache},set:function(e){this._dependencyGridCache=e}}])&&XG(n.prototype,r),o&&XG(n,o),t}(Xs(es).mixes((function(e){return function(e){function t(){return DG(this,t),PG(this,AG(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MG(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{showCreationTooltip:!0,creationTooltip:null,terminalCls:"b-sch-terminal",terminalSides:["left","top","right","bottom"],allowCreate:!0}}}],(r=[{key:"construct",value:function(e,n){TG(AG(t.prototype),"construct",this).call(this,e,n);var r=this;r.view=e,r.eventName=e.scheduledEventName,r.view.on("readOnly",(function(){return r.updateCreateListeners()})),r.updateCreateListeners()}},{key:"doDestroy",value:function(){var e=this;e.detachListeners("view"),e.creationData=null,e.mouseDetacher&&e.mouseDetacher(),e.creationTooltip&&e.creationTooltip.destroy(),TG(AG(t.prototype),"doDestroy",this).call(this)}},{key:"updateCreateListeners",value:function(){var e,t=this;t.view&&(t.detachListeners("view"),t.isCreateAllowed&&t.view.on((jG(e={name:"view"},"".concat(t.eventName,"mouseenter"),"onTimeSpanMouseEnter"),jG(e,"".concat(t.eventName,"mouseleave"),"onTimeSpanMouseLeave"),jG(e,"thisObj",t),e)))}},{key:"onTimeSpanMouseEnter",value:function(e){var t=e["".concat(this.eventName,"Record")],n=e["".concat(this.eventName,"Element")];this.showTerminals(t,xn.down(n,e.source.eventInnerSelector))}},{key:"onTimeSpanMouseLeave",value:function(e){var t=e["".concat(this.eventName,"Element")];this.creationData&&xn.isDescendant(t,this.creationData.sourceTerminal.parentElement)||this.hideTerminals(t)}},{key:"onTerminalMouseOut",value:function(e){var t=this,n=xn.up(e.target,t.view.eventSelector);xn.isDescendant(n,t.showingTerminalsFor)||t.creationData&&n===t.creationData.sourceTerminal.parentElement||(t.hideTerminals(n),t.view.unhover(e))}},{key:"onTerminalMouseDown",value:function(e){var t=this;if(0===e.button&&!t.creationData){var n=t.view,r=n.timeAxisSubGridElement,o=e.target,i=o.parentElement.closest(n.eventSelector),a=tr.from(n.element,document.body);e.preventDefault(),e.stopPropagation(),t.creationData={source:n.resolveTimeSpanRecord(i),sourceTerminal:o,startPoint:tr.from(o,r).center,startX:e.pageX-a.x+n.scrollLeft,startY:e.pageY-a.y+n.scrollTop,valid:!1},n.resolveResourceRecord&&(t.creationData.sourceResource=n.resolveResourceRecord(i)),t.mouseDetacher=_r.on({mouseup:{element:document.body,handler:"onMouseUp"},mousemove:{element:r,handler:"onMouseMove"},thisObj:t})}}},{key:"onMouseMove",value:function(e){var t=this,n=t.view,r=t.creationData,o=tr.from(n.element,document.body),i=e.pageX-o.x+n.scrollLeft-r.startX,a=e.pageY-o.y+n.scrollTop-r.startY,u=Math.round(Math.sqrt(i*i+a*a))-3,c=Math.atan2(a,i),s=t.connector;if(!s){if(!1===this.onRequestDragCreate())return;s=t.connector}s.style.width="".concat(u,"px"),s.style.transform="rotate(".concat(c,"rad)"),t.lastMouseMoveEvent=e}},{key:"onRequestDragCreate",value:function(){var e=this,t=e.view,n=e.creationData;if(!1===t.trigger("beforeDependencyCreateDrag",{data:n}))return e.abort(),!1;t.element.classList.add("b-creating-dependency"),e.connector=e.createConnector(n.startPoint.x,n.startPoint.y),t.trigger("dependencyCreateDragStart",{data:n}),e.showCreationTooltip&&(e.creationTooltip=e.creationTooltip||e.createDragTooltip(),e.creationTooltip.disabled=!1,e.creationTooltip.show()),t.scrollManager.startMonitoring({element:t.timeAxisSubGridElement,callback:function(){return e.lastMouseMoveEvent&&e.onMouseMove(e.lastMouseMoveEvent)},thisObj:e})}},{key:"onOverTargetTerminal",value:function(e){var t=this,n=e.target,r=t.view,o=t.creationData,i=t.connector;if(!(o.valid instanceof Promise))if(n!==o.sourceTerminal){if(n!==o.targetTerminal){o.targetTerminal=n,o.target=r.resolveTimeSpanRecord(n),r.resolveResourceRecord&&(o.targetResource=r.resolveResourceRecord(n));var a,u=o.sourceTerminal.dataset.side,c=o.targetTerminal.dataset.side,s=function(e){t.isDestroyed||(o.valid=e,n.classList.add(e?"b-valid":"b-invalid"),i.classList.add(e?"b-valid":"b-invalid"),r.trigger("dependencyValidationComplete",{data:o}))};switch(!0){case"left"===u&&"left"===c:a=YN.Type.StartToStart;break;case"left"===u&&"right"===c:a=YN.Type.StartToEnd;break;case"right"===u&&"left"===c:a=YN.Type.EndToStart;break;case"right"===u&&"right"===c:a=YN.Type.EndToEnd}r.trigger("dependencyValidationStart",{data:o}),o.valid=t.dataApi.isValidDependencyToCreate({type:a,sourceEvent:o.source,targetEvent:o.target,dependencyStore:t.dependencyStore}),o.valid instanceof Promise?o.valid.then(s):s(o.valid)}}else i.classList.remove("b-valid"),i.classList.remove("b-invalid")}},{key:"onMouseUp",value:function(e){var t=this,n=t.creationData,r=e.target;t.abort();var o=function(){var r,o=(r=regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.targetTerminal=e.target,!((o=t.createDependency(n))instanceof Promise)){r.next=5;break}return r.next=5,o;case 5:t.view.trigger("dependencyCreateDrop",{data:n});case 6:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){_G(i,n,o,a,u,"next",e)}function u(e){_G(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}(),i=function(e){t.view.trigger("afterDependencyCreateDrop",{data:e})};n.valid&&r.matches(".".concat(t.terminalCls))?n.valid instanceof Promise?n.valid.then((function(e){n.valid=e,e?o().then((function(){return i(n)})):i(n)})):o().then((function(){return i(n)})):(n.valid=!1,i(n))}},{key:"abort",value:function(){var e=this,t=e.view,n=e.creationData;if(n){var r=n.source,o=n.sourceResource,i=n.target,a=n.targetResource;if(r){var u=t.getElementFromEventRecord(r,o);u&&e.hideTerminals(u)}if(i){var c=t.getElementFromEventRecord(i,a);c&&e.hideTerminals(c)}}e.creationTooltip&&(e.creationTooltip.disabled=!0),e.creationData=e.lastMouseMoveEvent=null,e.mouseDetacher&&e.mouseDetacher(),e.removeConnector()}},{key:"createConnector",value:function(e,t){var n=this.view;return this.connector=xn.createElement({parent:n.timeAxisSubGridElement,className:"".concat(this.baseCls,"-connector"),style:"left:".concat(e,"px;top:").concat(t,"px")}),n.element.classList.add("b-creating-dependency"),this.connector}},{key:"createDragTooltip",value:function(){var e=this,t=e.view;return e.creationTooltip=new Fu(Object.assign({id:"".concat(t.id,"-dependency-drag-tip"),cls:"b-sch-dependency-creation-tooltip",loadingMsg:"",autoShow:!0,anchorToTarget:!1,forSelector:".b-sch-terminal",trackMouse:!0,constrainTo:null,getHtml:function(t){var n=t.tip,r=t.event;if(e.creationData)return r&&e.onOverTargetTerminal(r),e.generateTooltipContent(n,e.creationData)},header:{dock:"right"},listeners:{pointerout:function(t){var n=t.source,r=e.creationData;return r.target=r.targetTerminal=null,r.valid=!1,n.html=n.getHtml({tip:n}),!1},show:function(e){var t=e.source;t.html=t.getHtml({tip:t})}}},e.creationTooltip||{}))}},{key:"removeConnector",value:function(e){var t=this,n=t.connector,r=t.view;n&&(n.classList.add("b-removing"),n.style.width="0",t.setTimeout((function(){n.remove(),t.connector=null,e&&e.call(t)}),200)),r.element.classList.remove("b-creating-dependency"),t.creationTooltip&&t.creationTooltip.hide(),r.scrollManager.stopMonitoring(r.timeAxisSubGridElement)}},{key:"showTerminals",value:function(e,t){var n=this;if(n.isCreateAllowed){var r=n.terminalCls,o="".concat(r,"s-visible");(t=xn.down(t,n.view.eventInnerSelector)).classList.contains(o)||this.view.element.classList.contains("b-resizing-event")||n.view.readOnly||(n.terminalSides.forEach((function(e){var o=xn.createElement({parent:t,className:"".concat(r," ").concat(r,"-").concat(e),dataset:{side:e,feature:!0}});o.detacher=_r.on({element:o,mouseout:"onTerminalMouseOut",mousedown:{handler:"onTerminalMouseDown",capture:!0},thisObj:n})})),t.classList.add(o),e.cls.add(o),n.showingTerminalsFor=t)}}},{key:"hideTerminals",value:function(e){var t=this,n=t.client.getTimeSpanMouseEventParams(e)["".concat(this.eventName,"Record")],r="".concat(t.terminalCls,"s-visible");xn.forEachSelector(e,".".concat(t.terminalCls),(function(e){e.detacher&&e.detacher(),e.remove()})),xn.down(e,t.view.eventInnerSelector).classList.remove(r),n.cls.remove(r),t.showingTerminalsFor=null}},{key:"createDependency",value:function(e){var t=e.source,n=e.target,r=e.sourceTerminal.dataset.side,o=e.targetTerminal.dataset.side,i=("left"===r?0:2)+("right"===o?1:0);return this.dataApi.createDependency({sourceEvent:t,targetEvent:n,dependencyStore:this.dependencyStore,type:i,fromSide:r,toSide:o})}},{key:"generateTooltipContent",value:function(e,t){var n,r,o=this,i=t.valid;return Object.assign(t,{fromText:t.source.name,toText:t.target?t.target.name:"",fromSide:t.sourceTerminal.dataset.side,toSide:t.targetTerminal?t.targetTerminal.dataset.side:""}),i instanceof Promise?(e.element.classList.remove("b-invalid"),e.element.classList.add("b-checking"),n="checking",r=o.L("Checking"),new Promise((function(n){return i.then((function(r){t.valid=r,e.isDestroyed||n(o.generateTooltipContent(e,t))}))}))):(!0===i?(e.element.classList.remove("b-invalid"),e.element.classList.remove("b-checking"),n="valid",r=o.L("valid")):(e.element.classList.remove("b-checking"),e.element.classList.add("b-invalid"),n="invalid",r=o.L("invalid")),e.titleElement.innerHTML='<i class="b-icon b-icon-'.concat(n,'"></i>').concat(r),'<table class="b-sch-dependency-creation-tooltip">\n                        <tr><td>'.concat(o.L("from"),": </td><td>").concat(t.fromText,'</td><td><div class="b-sch-box b-').concat(t.fromSide,'"></div></td></tr>\n                        <tr><td>').concat(o.L("to"),": </td><td>").concat(t.toText,'</td><td><div class="b-sch-box b-').concat(t.toSide,'"></div></td></tr>\n                    </table>'))}},{key:"allowCreate",set:function(e){this._allowCreate=e,this.updateCreateListeners()},get:function(){return this._allowCreate}},{key:"isCreateAllowed",get:function(){return this.allowCreate&&!this.view.readOnly&&!this.disabled}}])&&RG(n.prototype,r),o&&RG(n,o),t}(e||Y)}),mB,Wr,JB));nU._$name="Dependencies",nC.registerFeature(nU,!1,"Scheduler"),!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g")||function(e){if("Element"in e){var t=e.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},i=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(""===t)throw new i("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(t))throw new i("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(e,t)},u=function(e){for(var t=r.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],o=0,i=n.length;o<i;o++)this.push(n[o]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=u.prototype=[],s=function(){return new u(this)};if(i.prototype=Error.prototype,c.item=function(e){return this[e]||null},c.contains=function(e){return~a(this,e+"")},c.add=function(){var e,t=arguments,n=0,r=t.length,o=!1;do{e=t[n]+"",~a(this,e)||(this.push(e),o=!0)}while(++n<r);o&&this._updateClassName()},c.remove=function(){var e,t,n=arguments,r=0,o=n.length,i=!1;do{for(e=n[r]+"",t=a(this,e);~t;)this.splice(t,1),i=!0,t=a(this,e)}while(++r<o);i&&this._updateClassName()},c.toggle=function(e,t){var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},c.replace=function(e,t){var n=a(e+"");~n&&(this.splice(n,1,t),this._updateClassName())},c.toString=function(){return this.join(" ")},n.defineProperty){var l={get:s,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",l)}catch(e){void 0!==e.number&&-2146823252!==e.number||(l.enumerable=!1,n.defineProperty(t,"classList",l))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",s)}}(window),function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){for(var n=0,r=arguments.length;n<r;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(e,t){var n=this.toString().split(" "),r=n.indexOf(e+"");~r&&(n=n.slice(r),this.remove.apply(this,n),this.add(t),this.add.apply(this,n.slice(1)))}),e=null}();var rU={completeview:"completeview",currentview:"currentview",daterange:"daterange"};function oU(e){return(oU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function aU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cU(e,t){return!t||"object"!==oU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sU(e){return(sU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lU(e,t){return(lU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fU=function(e){function t(){return aU(this,t),cU(this,sU(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lU(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ScheduleRangeCombo"}},{key:"defaultConfig",get:function(){return{editable:!1}}}],(r=[{key:"buildLocalizedItems",value:function(){var e=this;return Object.entries(rU).map((function(t){var n=iU(t,2),r=n[0],o=n[1];return{id:r,text:e.L(o)}}))}}])&&uU(n.prototype,r),o&&uU(n,o),t}(Wj);fU._$name="ScheduleRangeCombo",se.register(fU.$name.toLowerCase(),fU);n(242);function dU(e){return(dU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pU(Object(n),!0).forEach((function(t){yU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mU(e,t){return!t||"object"!==dU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bU(e,t,n){return(bU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wU(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wU(e){return(wU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kU(e,t){return(kU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SU(e,t){return e===t.length-1}function OU(e,t){return t===e.cells[e.cells.length-1]}var EU=function(e){function t(){return gU(this,t),mU(this,wU(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kU(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{compactCellWidthThreshold:15,model:null,cls:null,sizeProperty:null,positionProperty:null,wrapText:null}}},{key:"properties",get:function(){return{startDate:null,endDate:null,levels:[],size:null}}}],(r=[{key:"buildCells",value:function(){var e=this,t=e.sizeProperty,n=[],r=e.levels.map((function(n,r){var o;return{className:(o={"b-sch-header-row":1},yU(o,"b-sch-header-row-".concat(n.position),1),yU(o,"b-sch-header-row-main",r===e.model.viewPreset.mainHeaderLevel),yU(o,"b-lowest",SU(r,e.levels)),o),syncOptions:{releaseThreshold:5,syncIdField:"tickIndex"},dataset:{headerFeature:"headerRow".concat(r),headerPosition:n.position},children:n.cells.filter((function(t){return t.start<e.endDate&&t.end>e.startDate})).map((function(r){var o,i;return{className:(o={"b-sch-header-timeaxis-cell":1},yU(o,r.headerCellCls,r.headerCellCls),yU(o,"b-align-".concat(r.align),r.align),yU(o,"b-last",OU(n,r)),o),dataset:hU({tickIndex:r.index},window.DEBUG&&{date:r.start.getTime()}),style:(i={},yU(i,e.positionProperty,r.coord),yU(i,t,r.width),yU(i,"min-".concat(t),r.width),i),children:e.wrapText?[{className:"b-sch-header-text",html:r.value}]:null,html:e.wrapText?null:r.value}}))}}));return e.client&&e.client.getHeaderDomConfigs(n),r.push.apply(r,n),{className:"b-widget ".concat(e.cls),syncOptions:{releaseThreshold:0},style:yU({},t,e.size),children:r}}},{key:"render",value:function(e){bU(wU(t.prototype),"render",this).call(this,e),this.refresh(!0)}},{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.levels.length,t=this,n=t.model.columnConfig,r=t.levels,o=r.length;if(e){r.length=0,n.forEach((function(e,t){return r[t]={position:t,cells:e}})),t.size=r[0].cells.reduce((function(e,t){return e+t.width}),0);var i=t.element.parentElement;i&&(i.classList.remove("b-sch-timeaxiscolumn-levels-".concat(o)),i.classList.add("b-sch-timeaxiscolumn-levels-".concat(r.length)))}t.startDate&&t.endDate&&(Ib.sync({domConfig:t.buildCells(),targetElement:t.element,syncIdField:"headerFeature"}),t.trigger("refresh"))}},{key:"range",set:function(e){this.startDate=e.startDate,this.endDate=e.endDate,this.refresh(),this.trigger("rangeChange",{startDate:e.startDate,endDate:e.endDate})}},{key:"widgetClass",get:function(){}}])&&vU(n.prototype,r),o&&vU(n,o),t}(ni);function CU(e){return(CU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jU(e,t){return!t||"object"!==CU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DU(e,t,n){return(DU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RU(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function RU(e){return(RU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PU(e,t){return(PU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}EU._$name="TimeAxisBase";var TU=function(e){function t(){return xU(this,t),jU(this,RU(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PU(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"HorizontalTimeAxis"}},{key:"defaultConfig",get:function(){return{cls:"b-horizontaltimeaxis",sizeProperty:"width",positionProperty:"left",wrapText:!1}}}],(r=[{key:"construct",value:function(){DU(RU(t.prototype),"construct",this).apply(this,arguments),this.model.on({update:this.onModelUpdate,thisObj:this})}},{key:"onModelUpdate",value:function(){this.model.availableSpace!==this.width&&this.refresh(!0)}},{key:"width",get:function(){return this.size}}])&&_U(n.prototype,r),o&&_U(n,o),t}(EU);function AU(e){return(AU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FU(e,t){return!t||"object"!==AU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LU(e,t,n){return(LU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NU(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function NU(e){return(NU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HU(e,t){return(HU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}TU._$name="HorizontalTimeAxis";var BU=function(e){function t(){return MU(this,t),FU(this,NU(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HU(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ResourceHeader"}},{key:"defaultConfig",get:function(){return{resourceStore:null,columnWidth:150,headerRenderer:null,fillWidth:!0,fitWidth:!1,imagePath:null,imageExtension:null,defaultImageName:null}}},{key:"properties",get:function(){return{firstResource:-1,lastResource:-1}}}],(r=[{key:"construct",value:function(e){var n=this;LU(NU(t.prototype),"construct",this).call(this,e);var r=this;null!=r.imagePath&&(_r.on({element:r.element,delegate:".b-resource-image",capture:!0,error:function(e){return n.setDefaultResourceImage(e.target)}}),r.element.classList.add("b-has-images")),_r.on({element:r.element,delegate:".b-resourceheader-cell",capture:!0,click:"onResourceMouseEvent",dblclick:"onResourceMouseEvent",contextmenu:"onResourceMouseEvent",thisObj:r})}},{key:"onResourceStoreDataChange",value:function(e){var t=e.action,n=this,r=n.resourceStore.count*n.columnWidth;r!==n.width&&(n.element.style.width=r+"px",n.column.set("width",r,n.column.grid.isConfiguring)),"removeall"===t&&(n.element.innerHTML=""),"remove"!==t&&"add"!==t&&"filter"!==t||n.refreshWidths()}},{key:"setDefaultResourceImage",value:function(e){if(this.defaultImageName){var t=this.getImageURL(this.defaultImageName);e.src&&!e.src.endsWith(t.replace(/^[./]*/gm,""))&&(e.src=t)}}},{key:"getImageURL",value:function(e){return A.joinPaths([this.imagePath||"",e||""])}},{key:"refreshWidths",value:function(){var e=this,t=e.availableWidth,n=e._originalColumnWidth,r=e.resourceStore&&e.resourceStore.count;if(t&&r){e.refreshingWidths=!0;var o=e.fitWidth||e.fillWidth&&n*r<t?Math.floor(t/r):n,i=e.column.grid.enableEventAnimations&&Math.abs(e._columnWidth-o)>30;xn.addTemporaryClass(e.element,"b-animating",i?300:0,e),e.columnWidth=o,e.refreshingWidths=!1}}},{key:"refresh",value:function(){var e=this,t=e.firstResource,n=e.lastResource;if(!(e.column.grid.isConfiguring||-1===t||-1===n||n>=e.resourceStore.count)){for(var r=[],o=t;o<=n;o++){var i=e.resourceStore.getAt(o),a={className:new Nt({"b-resourceheader-cell":1}),dataset:{resourceId:i.id},style:{left:o*e.columnWidth,width:e.columnWidth},children:[]};if(e.headerRenderer){var u=e.headerRenderer({elementConfig:a,resourceRecord:i});null!=u&&(a.html=u)}else{var c=void 0;if(i.imageUrl)c=i.imageUrl;else if(null!=e.imagePath){var s=i.image||i.name&&i.name.toLowerCase()+e.imageExtension||e.defaultImageName;c=e.getImageURL(s)}null!=c&&a.children.push({tag:"img",className:"b-resource-image",src:c}),i.iconCls&&a.children.push({tag:"i",className:i.iconCls}),a.children.push({tag:"span",className:"b-resource-name",html:i.name})}r.push(a)}Ib.sync({domConfig:{onlyChildren:!0,children:r},targetElement:e.element,syncIdField:"resourceId"})}}},{key:"onResourceMouseEvent",value:function(e){var t=e.target.closest(".b-resourceheader-cell"),n=this.resourceStore.getById(t.dataset.resourceId);this.trigger("resourceHeader"+A.capitalizeFirstLetter(e.type),{resourceRecord:n,event:e})}},{key:"resourceStore",set:function(e){var t=this;e!==t._resourceStore&&(t.resourceStoreDetacher&&t.resourceStoreDetacher(),t._resourceStore=e,t.resourceStoreDetacher=e.on({change:"onResourceStoreDataChange",thisObj:t}),e.count&&t.onResourceStoreDataChange({}))},get:function(){return this._resourceStore}},{key:"columnWidth",get:function(){return this._columnWidth},set:function(e){var t=this;if(e!==t._columnWidth){var n=t._columnWidth;t._columnWidth=e,t.refreshingWidths||(t._originalColumnWidth=e,t.refreshWidths()),t.isConfiguring||(t.refresh(),t.trigger("columnWidthChange",{width:t._columnWidth,oldWidth:n}))}}},{key:"fillWidth",get:function(){return this._fillWidth},set:function(e){this._fillWidth=e,this.refreshWidths()}},{key:"fitWidth",get:function(){return this._fitWidth},set:function(e){this._fitWidth=e,this.refreshWidths()}},{key:"imagePath",get:function(){return this._imagePath},set:function(e){this._imagePath=e,this.refresh()}},{key:"availableWidth",get:function(){return this._availableWidth},set:function(e){this._availableWidth=e,this.refreshWidths()}},{key:"range",set:function(e){this.firstResource=e.firstResource,this.lastResource=e.lastResource,this.refresh()}}])&&IU(n.prototype,r),o&&IU(n,o),t}(ni);function zU(e){return(zU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $U(e,t){return!t||"object"!==zU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function YU(e,t,n){return(YU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GU(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function GU(e){return(GU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UU(e,t){return(UU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}BU._$name="ResourceHeader";var qU=function(e){function t(){return VU(this,t),$U(this,GU(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UU(e,t)}(t,e),n=t,o=[{key:"autoExposeFields",get:function(){return!0}},{key:"fields",get:function(){return["mode"]}},{key:"defaults",get:function(){return{draggable:!1,groupable:!1,hideable:!1,showColumnPicker:!1,filterable:!1,sortable:!1,resizable:!1,searchable:!1,editor:!1,enableCellContextMenu:!1,tooltipRenderer:!1,cls:"b-sch-timeaxiscolumn",needWidth:!0,mode:null,region:"normal",exportable:!1}}},{key:"type",get:function(){return"timeAxis"}}],(r=[{key:"construct",value:function(){var e=this;YU(GU(t.prototype),"construct",this).apply(this,arguments),e.initialRender=!0,e.thisObj=e,e.timeAxisViewModel=e.timeline.timeAxisViewModel,e.mode=e.mode,e.grid.on({paint:"onTimelinePaint",thisObj:e,once:!0}),e.timeAxisViewModel.on({update:e.onViewModelUpdate,thisObj:e})}},{key:"onViewModelUpdate",value:function(e){var t=e.source,n=this;"horizontal"===n.mode?(n.refreshHeader(!0),n.width=t.totalSize,n.timeline.refresh()):"vertical"===n.mode&&n.timeline.refreshRows()}},{key:"onTimelinePaint",value:function(e){var t=e.firstPaint,n=this;n.subGrid.insertRowsBefore&&t&&(n.subGridElement.classList.add("b-timeline-subgrid"),n.element&&_r.on({element:n.element,thisObj:n,click:"onContainerElementClick",dblclick:"onContainerElementClick",contextmenu:"onContainerElementClick"}),"vertical"===n.mode&&n.refreshHeader())}},{key:"refreshHeader",value:function(e){var t=this,n=t.element;n&&("horizontal"===t.mode?(!e&&t.timeAxisViewModel.update(null,!0),t.timeAxisView.rendered?t.timeAxisView.refresh(!0):(n.innerHTML="",t.timeAxisView.render(n))):"vertical"===t.mode&&(t.resourceColumns.currentElement||(n.innerHTML="",t.resourceColumns.render(n))))}},{key:"renderer",value:function(e){return this.timeline.currentOrientation.renderer(e)}},{key:"onContainerElementClick",value:function(e){var t=xn.up(e.target,".b-sch-header-timeaxis-cell");if(t){var n=t.dataset.tickIndex,r=t.parentElement.dataset.headerPosition,o=this.timeAxisViewModel.columnConfig[r][n],i=this.grid.features.contextMenu;i&&e.type===i.triggerEvent||this.trigger("timeAxisHeader"+A.capitalizeFirstLetter(e.type),{startDate:o.start,endDate:o.end,event:e})}}},{key:"mode",set:function(e){var t=this,n=t.timeline;t.set("mode",e),"horizontal"===e?t.timeAxisView=new TU({model:t.timeAxisViewModel,compactCellWidthThreshold:t.compactCellWidthThreshold,owner:t.grid,client:t.grid}):"vertical"===e&&(t.resourceColumns=new BU(Mt.assign({column:t,resourceStore:n.resourceStore,imagePath:n.resourceImagePath,imageExtension:n.resourceImageExtension,defaultImageName:n.defaultResourceImageName},n.resourceColumns||{})),t.relayEvents(t.resourceColumns,["resourceheaderclick","resourceheaderdblclick","resourceheadercontextmenu"]))},get:function(){return this.get("mode")}}])&&WU(n.prototype,r),o&&WU(n,o),t}(ae(XS));function XU(e){return(XU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JU(e,t){return!t||"object"!==XU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QU(e,t,n){return(QU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eq(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function eq(e){return(eq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tq(e,t){return(tq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(qU),qU._$name="TimeAxisColumn";var nq=function(e){function t(){return KU(this,t),JU(this,eq(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tq(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"SchedulerExportDialog"}}],(r=[{key:"onLocaleChange",value:function(){var e=this.L("labelWidth");this.width=this.L("width"),this.items.forEach((function(t){t instanceof Ic?t.labelWidth=e:"rangeFieldsContainer"===t.ref&&(t.items[0].width=e)}))}},{key:"buildDialogItems",value:function(e){var n=this,r=e.client,o=QU(eq(t.prototype),"buildDialogItems",this).call(this,e),i=n.L("labelWidth");n.columnsStore=r.columns.chain((function(e){return e.isLeaf&&!(e instanceof qU)}));var a=o.find((function(e){return"columnsField"===e.ref}));return a.store=n.columnsStore,a.value=n.columnsStore.allRecords,o.splice(1,0,{labelWidth:i,type:"schedulerangecombo",ref:"scheduleRangeField",label:"L{Schedule range}",localeClass:n,value:rU.completeview,onChange:function(e){var t=e.value!==rU.daterange,n=this.owner.widgetMap;n.rangeStartField.hidden=n.rangeEndField.hidden=t}},{type:"container",ref:"rangeFieldsContainer",flex:"1 0 100%",items:[{type:"widget",width:i},{type:"datefield",ref:"rangeStartField",label:"L{Export from}",hidden:!0,flex:"1 0 25%",localeClass:n,value:e.client.startDate},{type:"datefield",ref:"rangeEndField",label:"L{Export to}",hidden:!0,flex:"1 0 25%",localeClass:n,value:e.client.endDate}]}),o}}])&&ZU(n.prototype,r),o&&ZU(n,o),t}(dD);function rq(e){return(rq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function iq(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function aq(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){iq(i,r,o,a,u,"next",e)}function u(e){iq(i,r,o,a,u,"throw",e)}a(void 0)}))}}function uq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sq(e,t){return!t||"object"!==rq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lq(e,t,n){return(lq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fq(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function fq(e){return(fq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dq(e,t){return(dq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}nq._$name="SchedulerExportDialog";var pq=function(e){return function(e){function t(){return uq(this,t),sq(this,fq(t).apply(this,arguments))}var n,r,o,i,a,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dq(e,t)}(t,e),n=t,(r=[{key:"scrollRowIntoView",value:(c=aq(regeneratorRuntime.mark((function e(t,n){var r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],o=!1,i=t.scrollable.on({scrollStart:function(e){null!=e.y&&(o=!0)}}),r.push(t.scrollRowIntoView(t.store.getAt(n),{block:"start"})),i(),o&&r.push(new Promise((function(e){t.scrollable.on({scrollEnd:function(){e()},once:!0})}))),e.abrupt("return",Promise.all(r));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})},{key:"scrollToDate",value:(u=aq(regeneratorRuntime.mark((function e(t,n){var r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,o=[],i=t.timeAxisSubGrid.scrollable.on({scrollstart:function(e){null!=e.x&&(r=!0)}}),o.push(t.scrollToDate(n)),i(),r&&o.push(new Promise((function(e){t.timeView.on({refresh:function(){e()},once:!0})}))),e.next=8,Promise.all(o);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"prepareComponent",value:(a=aq(regeneratorRuntime.mark((function e(n){var r,o,i,a,u,c,s,l,f,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this,o=n.client,e.t0=n.scheduleRange,e.next=e.t0===rU.completeview?4:e.t0===rU.currentview?7:11;break;case 4:return n.rangeStart=o.startDate,n.rangeEnd=o.endDate,e.abrupt("break",11);case 7:return i=o.getVisibleDateRange(),a=i.startDate,u=i.endDate,n.rangeStart=a,n.rangeEnd=u,e.abrupt("break",11);case 11:return o.setTimeSpan(n.rangeStart,n.rangeEnd),e.next=14,lq(fq(t.prototype),"prepareComponent",this).call(this,n);case 14:if(c=r.exportMeta,s=r.element.querySelector(".b-sch-foreground-canvas"),l=r.element.querySelector(".b-horizontaltimeaxis"),n.scheduleRange!==rU.completeview&&(c.totalWidth-=c.subGrids.normal.width,c.totalWidth+=c.subGrids.normal.width=o.timeAxisViewModel.getDistanceBetweenDates(n.rangeStart,n.rangeEnd),c.subGrids.normal.scrollLeft=o.getCoordinateFromDate(n.rangeStart)),c.timeAxisHeaders=[],c.timeAxisPlaceholders=[],c.headersColleted=!1,xn.forEachSelector(l,".b-sch-header-row",(function(e){c.timeAxisPlaceholders.push(r.createPlaceholder(e)),c.timeAxisHeaders.push(new Map)})),c.subGrids.normal.eventsPlaceholder=r.createPlaceholder(s,!1),xn.removeEachSelector(s,".b-sch-event-wrap"),c.eventsBoxes=new Map,c.client=o,o.features.dependencies&&!o.features.dependencies.disabled&&(f=r.element.querySelector('[id="'.concat(o.svgCanvas.getAttribute("id"),'"]')),(c.dependenciesPlaceholder=f)&&xn.removeEachSelector(f,".b-sch-dependency")),xt.betweenLesser(n.rangeStart,o.startDate,o.endDate)){e.next=28;break}return e.next=28,r.scrollToDate(o,n.rangeStart);case 28:d=Math.ceil(c.totalWidth/c.pageWidth),p=d*c.verticalPages,c.horizontalPages=d,c.totalPages=p;case 31:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"onRowsCollected",value:(i=aq(regeneratorRuntime.mark((function e(n,r){var o,i,a,u,c,s,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lq(fq(t.prototype),"onRowsCollected",this).call(this,n);case 2:return o=this,i=r.client,a=i.timeView,u=o.getCurrentPageDateRange(r),c=u.pageRangeStart,s=u.pageRangeEnd,l=!1,e.next=6,o.scrollToDate(i,c);case 6:if(l){e.next=24;break}if(o.collectHeaders(r),o.collectEvents(n,r),!xt.timeSpanContains(a.startDate,a.endDate,c,s)){e.next=13;break}l=!0,e.next=22;break;case 13:if(!(a.endDate.getTime()>=s.getTime())){e.next=17;break}l=!0,e.next=22;break;case 17:return f=a.endDate,e.next=20,o.scrollToDate(i,a.endDate);case 20:if(f.getTime()!==a.endDate.getTime()){e.next=22;break}throw new Error("Could not scroll to date");case 22:e.next=6;break;case 24:return e.next=26,o.scrollToDate(i,r.rangeStart);case 26:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getCurrentPageDateRange",value:function(e){var t,n,r=e.rangeStart,o=e.rangeEnd,i=e.client,a=this.exportMeta,u=a.horizontalPages,c=a.horizontalPosition,s=a.pageWidth,l=a.subGrids;if(u>1){var f=c*s,d=(c+1)*s,p=l.locked.width;d<=p?n=t=null:(t=i.getDateFromCoordinate(Math.max(f-p,0)),n=i.getDateFromCoordinate(1.2*(d-p))||o)}else t=r,n=o;return{pageRangeStart:t,pageRangeEnd:n}}},{key:"prepareExportElement",value:function(){var e=this.element,n=this.exportMeta,r=n.subGrids.normal,o=r.id,i=r.headerId,a=r.footerId,u=r.scrollLeft,c=e.querySelector('[id="'.concat(o,'"]'));return[".b-sch-background-canvas",".b-sch-foreground-canvas"].forEach((function(e){var t=c.querySelector(e);t&&(n.lastExportedRowBottom?t.style.height="".concat(n.lastExportedRowBottom,"px"):t.style.height="",u&&(t.style.marginLeft="-".concat(u,"px")))})),u&&[i,a].forEach((function(t){var n=e.querySelector('[id="'.concat(t,'"] .b-widget-scroller'));n&&(n.style.marginLeft="-".concat(u,"px"))})),lq(fq(t.prototype),"prepareExportElement",this).call(this)}},{key:"collectRow",value:function(e){var t=this.exportMeta.subGrids;Object.entries(e.elements).forEach((function(n){var r=oq(n,2),o=r[0],i=[r[1].outerHTML,e.top,e.offsetHeight];"normal"===o&&i.push(new Map),t[o].rows.push(i)}))}},{key:"collectHeaders",value:function(e){var t=e.client,n=this.exportMeta;if(!n.headersCollected){var r=t.timeView.element,o=n.timeAxisHeaders;xn.forEachSelector(r,".b-sch-header-row",(function(e,r,i){var a=o[r];xn.forEachSelector(e,".b-sch-header-timeaxis-cell",(function(e){a.has(e.dataset.tickIndex)||a.set(e.dataset.tickIndex,e.outerHTML)})),r===i.length-1&&a.has(String(t.timeAxis.count-1))&&(n.headersCollected=!0)}))}}},{key:"collectEvents",value:function(e,t){var n=e.length,r=t.client,o=this.exportMeta.subGrids.normal.rows;e.forEach((function(e,t){var i=o[o.length-n+t],a=r.store.getAt(e.dataIndex),u=i[3];a.events.forEach((function(e){if(e.isScheduled){var t=r.getElementFromEventRecord(e,a);t&&(t=t.parentElement)&&!u.has(e.id)&&u.set(e.id,[t.outerHTML,tr.from(t,t.offsetParent)])}}))}))}},{key:"buildPageHtml",value:function(){var e=this,t=e.exportMeta,n=t.subGrids,r=t.timeAxisHeaders,o=t.timeAxisPlaceholders,i=e.prepareExportElement();return Object.values(n).forEach((function(t){var n=t.placeHolder,r=t.eventsPlaceholder,o=t.rows,a=n.outerHTML,u=e.positionRows(o),c=u.resources,s=u.events;i=i.replace(a,c.join("")),r&&(i=i.replace(r.outerHTML,s.join("")))})),r.forEach((function(e,t){i=i.replace(o[t].outerHTML,Array.from(e.values()).join(""))})),i=e.buildDependenciesHtml(i)}},{key:"getDependenciesOuterHTML",value:function(){var e,t=this.exportMeta.dependenciesPlaceholder;if(we.isIE11){var n=document.createElement("div"),r=t.cloneNode(!0);n.appendChild(r),e=n.innerHTML}else e=t.outerHTML;return e}},{key:"renderDependencies",value:function(){var e=this.exportMeta,t=e.client,n=e.dependenciesPlaceholder,r=e.eventsBoxes,o=t.dependencies,i=t.features.dependencies,a=Array.from(r.keys());o.filter((function(e){return a.includes(String(e.from))||a.includes(String(e.to))})).forEach((function(e){var t=r.get(String(e.from)),o=r.get(String(e.to)),a=e.sourceEvent,u=e.targetEvent;if(!t&&a){var c=i.getBox(e,!0);c&&(t=c instanceof tr?c:new tr(c.start,c.top,c.end-c.start,c.bottom-c.top))}if(!o&&u){var s=i.getBox(e,!1);s&&(o=s instanceof tr?s:new tr(s.start,s.top,s.end-s.start,s.bottom-s.top))}var l={startRectangle:t&&t.clone(),endRectangle:o&&o.clone()};t&&o&&i.drawDependency(e,l,null,n,!1)}));var u=this.getDependenciesOuterHTML();return xn.removeEachSelector(n,".b-sch-dependency"),u}},{key:"buildDependenciesHtml",value:function(e){if(this.exportMeta.dependenciesPlaceholder){var t=this.getDependenciesOuterHTML();e=e.replace(t,this.renderDependencies())}return e}}])&&cq(n.prototype,r),o&&cq(n,o),t}(e)};function hq(e){return(hq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function gq(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function vq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bq(e,t){return!t||"object"!==hq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wq(e,t,n){return(wq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kq(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kq(e){return(kq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sq(e,t){return(Sq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oq=function(e){function t(){return vq(this,t),bq(this,kq(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sq(e,t)}(t,e),n=t,(r=[{key:"stateNextPage",value:(i=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wq(kq(t.prototype),"stateNextPage",this).call(this,n);case 2:this.exportMeta.eventsBoxes.clear();case 3:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){gq(o,n,r,a,u,"next",e)}function u(e){gq(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"positionRows",value:function(e){var t=this,n=[],r=[];return e.forEach((function(e){var o=yq(e,4),i=o[0],a=(o[1],o[2],o[3]);n.push(i),a&&Array.from(a.entries()).forEach((function(e){var n=yq(e,2),o=n[0],i=yq(n[1],2),a=i[0],u=i[1];r.push(a),t.exportMeta.eventsBoxes.set(String(o),u)}))})),{resources:n,events:r}}}])&&mq(n.prototype,r),o&&mq(n,o),t}(pq(HD));function Eq(e){return(Eq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function xq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jq(e,t){return!t||"object"!==Eq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dq(e){return(Dq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rq(e,t){return(Rq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Oq._$name="MultiPageExporter";var Pq=function(e){function t(){return xq(this,t),jq(this,Dq(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rq(e,t)}(t,e),n=t,(r=[{key:"collectDependencies",value:function(){}},{key:"positionRows",value:function(e){var t=this,n=0,r=[],o=[],i=/translate\((\d+.?\d*)px, (\d+.?\d*)px\)/;return e.forEach((function(e){var a=Cq(e,4),u=a[0],c=a[1],s=a[2],l=a[3];r.push(u.replace(i,"translate($1px, ".concat(n,"px)")));var f=n-c;l&&Array.from(l.entries()).forEach((function(e){var n=Cq(e,2),r=n[0],a=Cq(n[1],2),u=a[0],c=a[1];c.translate(0,f),t.exportMeta.eventsBoxes.set(String(r),c),o.push(u.replace(i,"translate($1px, ".concat(c.y,"px)")))})),n+=s})),{resources:r,events:o}}}])&&_q(n.prototype,r),o&&_q(n,o),t}(pq(QD));function Tq(e){return(Tq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iq(e,t){return!t||"object"!==Tq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fq(e,t,n){return(Fq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lq(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Lq(e){return(Lq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nq(e,t){return(Nq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Pq._$name="SinglePageExporter";var Hq=function(e){function t(){return Aq(this,t),Iq(this,Lq(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nq(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"PdfExport"}},{key:"defaultConfig",get:function(){return{exporters:[Pq,Oq],scheduleRange:"completeview",rangeStart:null,rangeEnd:null}}}],(r=[{key:"showExportDialog",value:function(){var e=this;e.exportDialog||(e.exportDialog=new nq({client:e.client,exporters:e.exporters,listeners:{export:e.onExportDialogExport,thisObj:e}})),e.exportDialog.show()}},{key:"buildExportConfig",value:function(e){e=Fq(Lq(t.prototype),"buildExportConfig",this).call(this,e);var n=this.scheduleRange,r=this.rangeStart,o=this.rangeEnd;return e.columns&&!e.columns.find((function(e){return"timeAxis"===e.type}))&&e.columns.push(e.client.timeAxisColumn.id),Mt.assign({scheduleRange:n,rangeStart:r,rangeEnd:o},e)}}])&&Mq(n.prototype,r),o&&Mq(n,o),t}(uR);Hq._$name="PdfExport",nC.registerFeature(Hq,!1,"Scheduler");n(243);function Bq(e){return(Bq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wq(e,t){return!t||"object"!==Bq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $q(e,t,n){return($q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yq(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Yq(e){return(Yq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gq(e,t){return(Gq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Uq=function(e){function t(){return zq(this,t),Wq(this,Yq(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gq(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"SchedulerHeader"}}],(r=[{key:"refreshContent",value:function(){this.headersElement&&0===this.headersElement.childNodes.length&&$q(Yq(t.prototype),"refreshContent",this).call(this)}}])&&Vq(n.prototype,r),o&&Vq(n,o),t}(mP);function qq(e){return(qq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zq(e,t){return!t||"object"!==qq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jq(e,t,n){return(Jq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qq(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Qq(e){return(Qq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eX(e,t){return(eX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Uq._$name="Header";var tX=function(e){function t(){return Xq(this,t),Zq(this,Qq(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eX(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{timeAxis:null,availableSpace:null,tickSize:100,snap:!1,forceFit:!1,headers:null,calendar:null,mode:"horizontal",suppressFit:!1,columnConfig:[],viewPreset:null,columnLinesFor:null,eventStore:null,originalTickSize:null,headersDatesCache:[]}}}],(r=[{key:"construct",value:function(e){var n=this;n.unitToPixelsCache={},Jq(Qq(t.prototype),"construct",this).call(this,e);var r=n.timeAxis.viewPreset||n.viewPreset;if(r)if(r instanceof cL)n.consumeViewPreset(r);else{var o=xL.getPreset(r);o&&n.consumeViewPreset(o)}n.timeAxis.on("reconfigure",n.onTimeAxisReconfigure,n),n.configured=!0}},{key:"doDestroy",value:function(){this.timeAxis.un("reconfigure",this.onTimeAxisReconfigure,this)}},{key:"reconfigure",value:function(e){this.headers=null,this.setConfig(e),this.trigger("reconfigure")}},{key:"onTimeAxisReconfigure",value:function(e){var t=e.source,n=e.suppressRefresh;this.viewPreset!==t.viewPreset&&this.consumeViewPreset(t.viewPreset),n||this.update()}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.timeAxis,i=r.headers;if(r.isConfiguring||r._availableSpace===e)n&&r.trigger("update");else{if(r._availableSpace=Math.max(e||r.availableSpace||0,0),"number"!=typeof r.availableSpace)throw new Error("Invalid available space provided to TimeAxisModel");r.availableSpace<=0&&console.warn("No available space provided for time axis. Make sure you have set width for horizontal mode and height for vertical"),r.columnConfig=[];var a=r._tickSize=r.calculateTickSize(r.originalTickSize);if("number"!=typeof a||a<=0)throw new Error("Invalid timeAxis tick size");r.unitToPixelsCache={},r._totalSize=null;for(var u=0,c=i.length;u<c;u++){var s=i[u];if(s.cellGenerator){var l=s.cellGenerator.call(r,o.startDate,o.endDate);r.columnConfig[u]=r.createHeaderRow(u,s,l)}else r.columnConfig[u]=r.createHeaderRow(u,s)}t||r.trigger("update")}}},{key:"getDistanceBetweenDates",value:function(e,t){return Math.round(this.getPositionFromDate(t)-this.getPositionFromDate(e))}},{key:"getDistanceForDuration",value:function(e){var t=this.timeAxis.getAt(0);return this.tickSize/(t.endDate-t.startDate)*e}},{key:"getPositionFromDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=n.getScaledTick(e,t);return-1===r?-1:Math.round(n.tickSize*(r-n.timeAxis.visibleTickStart))}},{key:"getScaledTick",value:function(e,t){var n=t.respectExclusion,r=t.snapToNextIncluded,o=t.isEnd,i=t.min,a=t.max,u=this.timeAxis,c=u.include,s=u.unit,l=u.weekStartDay,f=u.getTickFromDate(e);if(-1!==f&&n&&c){var d=!1;if(c.hour&&xt.compareUnits(s,"hour")>0&&"day"!==s){var p=c.hour,h=p.from,y=p.to,g=p.lengthFactor,v=p.center,m=e.getHours(),b=Math.min(Math.max(m,h),y);if(!r&&b!==m)return-1;var w=v-(v-(b+e.getMinutes()/60))*g;e=xt.add(e,w-m,"h"),d=!0}if(c.day&&xt.compareUnits(s,"day")>0){var k=c.day,S=k.from,O=k.to,E=k.lengthFactor,C=k.center,x=e.getDay();o&&0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()&&--x<0&&(x=6);var _=0;if(x<S||x>=O){if(!r)return-1;if(_=o?(O-x-8)%7:(S-x+7)%7,e=xt.add(e,_,"d"),e=xt.startOf(e,"d",!1),a&&e.getTime()>=a||i&&e.getTime()<=i)return-1}var j=0===e.getDay()?0:C,D=e.getDay()+e.getHours()/24,R=j-(j-D)*E;e=xt.add(e,R-D+l,"d"),d=!0}d&&(e=xt.constrain(e,u.startDate,u.endDate),f=u.getTickFromDate(e))}return f}},{key:"getDateFromPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.timeAxis,i=r.getScaledPosition(e)/r.tickSize+o.visibleTickStart;return i<0||i>o.count?n?i<0?xt.add(o.startDate,i,o.unit):xt.add(o.endDate,i-o.count,o.unit):null:o.getDateFromTick(i,t)}},{key:"getScaledPosition",value:function(e){var t=this.timeAxis,n=t.include,r=t.unit,o=t.weekStartDay;if(n){var i=this.getSingleUnitInPixels("day");if(n.day&&xt.compareUnits(r,"day")>0){var a=n.day,u=a.from,c=e%(7*i);e=c/a.lengthFactor+(u-o)*i+(e-c)}if(n.hour&&xt.compareUnits(r,"hour")>0&&"day"!==r){var s=n.hour,l=s.from,f=e%i;e=f/s.lengthFactorExcl+l*this.getSingleUnitInPixels("hour")+(e-f)}}return e}},{key:"getSingleUnitInPixels",value:function(e){var t=this;return t.unitToPixelsCache[e]||(t.unitToPixelsCache[e]=xt.getUnitToBaseUnitRatio(t.timeAxis.unit,e,!0)*t.tickSize/t.timeAxis.increment)}},{key:"setTickSize",value:function(e,t){this._tickSize=this.originalTickSize=e,this.update(void 0,t)}},{key:"calculateTickSize",value:function(e){var t=this,n=t.forceFit,r=t.timeAxis,o=r.unit,i=0,a=1;if(t.snap){var u=r.resolution;a=xt.getUnitToBaseUnitRatio(o,u.unit)*u.increment}if(t.suppressFit)i=e;else{var c=r.visibleTickTimeSpan,s=Math[n?"floor":"round"](t.availableSpace/c);if(i=n||e<s?s:e,a>0&&(!n||a<1)){var l=n?"floor":"round";i=Math.round(Math.max(1,Math[l](a*i))/a)}}return i}},{key:"getDates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.columnLinesFor,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=[],i=t?r.lowestHeader:e,a=r.majorHeaderLevel,u=r.headers&&r.headers[e].unit,c=null!=a&&r.headers&&r.headers[a].unit,s=null!=a&&xt.doesUnitsAlign(c,u),l=!(!r.headers||!r.headers[i].cellGenerator);if(l)for(var f=r.columnConfig[i],d=1,p=f.length;d<p;d++)o.push({date:f[d].startDate});else r.forEachInterval(i,(function(t,i){o.push({date:n?i:t,isMajor:a!==e&&s&&r.isMajorTick(n?i:t)})}));return o}},{key:"fitToAvailableSpace",value:function(e){var t=Math.floor(this.availableSpace/this.timeAxis.visibleTickTimeSpan);this.setTickSize(t,e)}},{key:"createHeaderRow",value:function(e,t,n){var r=this,o=this,i=[],a=t.align,u=xt.clearTime(new Date),c=t.headerCellCls||"",s=function(n,s,f,d){var p=xt.format(n,t.dateFormat),h={align:a,start:n,end:s,value:d?d.header:p,headerCellCls:c,width:r.getDistanceBetweenDates(n,s),index:f};0!==h.width&&(h.coord=l,l+=h.width,o.headersDatesCache[e][n.getTime()]=1,t.renderer&&(p=t.renderer.call(t.thisObj||o,n,s,h,f,o.eventStore),h.value=null==p?"":p),"day"!==t.unit||t.increment&&1!==t.increment||(h.headerCellCls+=" b-sch-dayheadercell-"+n.getDay(),o.calendar&&o.calendar.isWeekend(n)&&(h.headerCellCls+=" b-sch-dayheadercell-nonworking"),xt.clearTime(n,!0)-u==0&&(h.headerCellCls+=" b-sch-dayheadercell-today")),i.push(h))},l=0;return o.headersDatesCache[e]={},n?n.forEach((function(e,t){return s(e.start,e.end,t,e)})):o.forEachInterval(e,s),i}},{key:"isMajorTick",value:function(e){var t=this.majorHeaderLevel;return null!=t&&this.headersDatesCache[t]&&this.headersDatesCache[t][e.getTime()]||!1}},{key:"forEachInterval",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=this.headers;if(r)if(e===r.length-1)this.timeAxis.forEach((function(e,r){return t.call(n,e.startDate,e.endDate,r)}));else{var o=r[e];this.timeAxis.forEachAuxInterval(o.unit,o.increment,t,n)}}},{key:"forEachMainInterval",value:function(e,t){this.forEachInterval(this.mainHeaderLevel,e,t)}},{key:"consumeViewPreset",value:function(e){var t=this;t.headers=null,t._thisIsAUsedExpression(t.tickSize),t.viewPreset=e,Object.assign(t,{headers:e.headers,columnLinesFor:e.columnLinesFor,mainHeaderLevel:e.mainHeaderLevel,_tickSize:t.isHorizontal?e.tickWidth:e.tickHeight}),t.originalTickSize=t.tickSize}},{key:"columnConfig",get:function(){return this._columnConfig},set:function(e){this._columnConfig=e}},{key:"headers",get:function(){return this._headers},set:function(e){if(e&&e.length&&e[e.length-1].cellGenerator)throw new Error("`cellGenerator` cannot be used for the bottom level of your headers. Use TimeAxis#generateTicks() instead.");this._headers=e}},{key:"isTimeAxisViewModel",get:function(){return!0}},{key:"isHorizontal",get:function(){return"vertical"!==this.mode}},{key:"isVertical",get:function(){return"vertical"===this.mode}},{key:"forceFit",set:function(e){e!==this._forceFit&&(this._forceFit=e,this.update())},get:function(){return this._forceFit}},{key:"snapPixelAmount",get:function(){if(this.snap){var e=this.timeAxis.resolution;return(e.increment||1)*this.getSingleUnitInPixels(e.unit)}return 1}},{key:"tickSize",get:function(){return this._tickSize},set:function(e){this.setTickSize(e,!1)}},{key:"timeResolution",get:function(){return this.timeAxis.resolution}},{key:"totalSize",get:function(){return this._totalSize||(this._totalSize=Math.round(this.tickSize*this.timeAxis.visibleTickTimeSpan))}},{key:"availableSpace",get:function(){return this._availableSpace},set:function(e){var t=this;if(t._availableSpace=Math.max(0,e),t._availableSpace>0){var n=t.calculateTickSize(t.originalTickSize);n>0&&n!==t.tickSize&&t.update()}}},{key:"snap",get:function(){return this._snap},set:function(e){e!==this._snap&&(this._snap=e,this.configured&&this.update())}},{key:"mainHeader",get:function(){return"mainHeaderLevel"in this?this.headers[this.mainHeaderLevel]:this.bottomHeader}},{key:"bottomHeader",get:function(){return this.headers[this.headers.length-1]}},{key:"lowestHeader",get:function(){return this.headers.length-1}},{key:"majorHeaderLevel",get:function(){var e=this.headers;return e?Math.max(e.length-2,0):null}}])&&Kq(n.prototype,r),o&&Kq(n,o),t}(ae());function nX(e){return(nX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iX(e,t){return!t||"object"!==nX(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aX(e){return(aX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uX(e,t){return(uX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}tX._$name="TimeAxisViewModel";var cX=new Date;function sX(e){return(sX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dX(e,t){return!t||"object"!==sX(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pX(e,t,n){return(pX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hX(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function hX(e){return(hX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yX(e,t){return(yX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gX={mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut"};function vX(e){return(vX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wX(e,t){return!t||"object"!==vX(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kX(e){return(kX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SX(e,t){return(SX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OX(e){return(OX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xX(e,t){return!t||"object"!==OX(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _X(e,t,n){return(_X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jX(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function jX(e){return(jX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DX(e,t){return(DX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RX(e){return(RX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AX(e,t){return!t||"object"!==RX(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MX(e){return(MX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IX(e,t){return(IX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FX(e){return(FX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HX(e,t){return!t||"object"!==FX(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BX(e){return(BX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zX(e,t){return(zX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VX(e){return(VX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YX(e,t){return!t||"object"!==VX(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GX(e,t,n,r){return(GX="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=XX(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function UX(e,t,n,r,o){if(!GX(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function qX(e,t,n){return(qX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=XX(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function XX(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KX(e)););return e}function KX(e){return(KX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZX(e,t){return(ZX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var JX=["viewPreset","eventBarTextField","eventRenderer","eventRendererThisObj","eventBodyTemplate"],QX={fn:"exitTransition",delay:0,cancelOutstanding:!0},eK=function(e){function t(){return WX(this,t),YX(this,KX(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZX(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TimelineBase"}},{key:"defaultConfig",get:function(){return{workingTime:null,timeAxis:null,timeAxisViewModel:null,autoAdjustTimeAxis:!0,startDate:null,endDate:null,snap:!1,snapRelativeToEventStartDate:!1,forceFit:!1,eventCls:null,getDateConstraints:null,timeCellCls:null,timeCellSelector:null,scheduledEventName:null,createEventOnDblClick:!0,overScheduledEventClass:null,preventOverCls:!1,hoveredEventNode:null,useBackgroundCanvas:!1,enableEventAnimations:!we.isIE11,disableGridRowModelWarning:!0,animateRemovingRows:!1,partner:null,schedulerRegion:"normal",transitionDuration:200,animationTimeout:null,milestoneLayoutMode:"default",defaultRegion:"locked"}}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,r=e.schedulerRegion||"normal",o=e.subGridConfigs,i=void 0===o?{}:o;e.subGridConfigs=i,i[r]=i[r]||{},i[r].headerClass=Uq,"flex"in i[r]||"width"in i[r]||(i[r].flex=1),e.startDate&&(e.startDate=xt.parse(e.startDate)),e.endDate&&(e.endDate=xt.parse(e.endDate)),qX(KX(t.prototype),"construct",this).call(this,e),n.onSchedulerViewportResize=n.throttle(n.onSchedulerViewportResize,250),n.initDomEvents(),n.currentOrientation.init(),n.rowManager.on("refresh",(function(){n.forceLayout=!1}))}},{key:"doDestroy",value:function(){var e=this,n=this.currentOrientation;n&&n.destroy(),e.partneredWith&&(e.partneredWith.forEach((function(t){e.removePartner(t)})),e.partneredWith.destroy()),qX(KX(t.prototype),"doDestroy",this).call(this)}},{key:"startConfigure",value:function(e){qX(KX(t.prototype),"startConfigure",this).call(this,e),this._thisIsAUsedExpression(this.partner)}},{key:"onPaint",value:function(e){var n=e.firstPaint;if(n){var r=this.timeAxisSubGrid,o=this.isVertical?we.isIE11?r.element.parentElement.offsetHeight:r.height:r.width;this.timeAxisViewModel.update(o,!1,!0)}qX(KX(t.prototype),"onPaint",this).call(this,Array.prototype.slice.call(arguments))}},{key:"initSubGrids",value:function(){qX(KX(t.prototype),"initSubGrids",this).call(this);var e=this,n=e.timeAxisSubGrid=e.subGrids[e.timeAxisColumn.region];n.sealedColumns=!0,n.on({resize:e.onTimeAxisSubGridResize,thisObj:e})}},{key:"onSchedulerHorizontalScroll",value:function(e,n){this.currentOrientation.updateFromHorizontalScroll(n),qX(KX(t.prototype),"onSchedulerHorizontalScroll",this).call(this,e,n)}},{key:"initScroll",value:function(){var e=this,n=0;qX(KX(t.prototype),"initScroll",this).call(this),we.isMobileSafari&&(e.scrollable.element.style.transform="translate3d(0, 0, 0)"),e.on("horizontalscroll",(function(t){var r=t.subGrid,o=t.scrollLeft;e.isPainted&&r===e.timeAxisSubGrid&&!e.isDestroying&&e.onSchedulerHorizontalScroll(r,o),n++})),"horizontal"===e.testPerformance&&e.setTimeout((function(){var t=performance.now(),r=5,o=1,i=e.setInterval((function(){if(r+=5,e.scrollLeft+=(10+Math.floor(r))*o,1===o&&e.scrollLeft>5500&&(o=-1,r=5),-1===o&&e.scrollLeft<=0){var a=1e3/((performance.now()-t)/n);a=Math.round(10*a)/10,clearInterval(i),console.log(e.eventPositionMode,e.eventScrollMode,a+"fps")}}),0)}),500)}},{key:"noFeatureElementsInAxis",value:function(){}},{key:"removePartner",value:function(e){var t=this,n=t.partneredWith;n&&n.includes(e)&&(n.remove(e),e.partneredWith.remove(t),e.scrollable.removePartner(t.scrollable),e.un({presetchange:"onPartnerPresetChange",thisObj:t}),t.un({presetchange:"onPartnerPresetChange",thisObj:e}))}},{key:"onPartnerPresetChange",value:function(e){var t=e.preset,n=e.startDate,r=e.endDate,o=e.centerDate;this._viewPresetChanging||this.viewPreset===t||this.setViewPreset(t,n,r,!1,{centerDate:o})}},{key:"applyWorkingTime",value:function(e){var t=this,n=t._workingTime;if(n){var r=null;n.fromHour>=0&&n.fromHour<24&&n.toHour>n.fromHour&&n.toHour<=24&&n.toHour-n.fromHour<24&&(r={from:n.fromHour,to:n.toHour});var o=null;n.fromDay>=0&&n.fromDay<7&&n.toDay>n.fromDay&&n.toDay<=7&&n.toDay-n.fromDay<7&&(o={from:n.fromDay,to:n.toDay}),e.include=r||o?{hour:r,day:o}:null}else e.include=null;t.isPainted&&(t.timeAxisColumn.refreshHeader(),t.features.columnLines&&t.features.columnLines.drawLines(),t.refreshWithTransition())}},{key:"setStartDate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n._timeAxis||{},o=r.startDate,i=r.endDate,a=r.mainUnit;if("string"==typeof e&&(e=xt.parse(e)),n._timeAxis&&i){if(e){var u=i;if(t&&o){var c=xt.diff(o,i,a,!0);u=xt.add(e,c,a)}r.setTimeSpan(e,u)}}else n._tempStartDate=e}},{key:"setEndDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n._timeAxis||{},o=r.startDate,i=r.endDate,a=r.mainUnit;if("string"==typeof e&&(e=xt.parse(e)),n._timeAxis&&o){if(e){var u=o;if(t&&i){var c=xt.diff(o,i,a,!0);u=xt.add(e,-c,a)}r.setTimeSpan(u,e)}}else n._tempEndDate=e}},{key:"onLocaleChange",value:function(){qX(KX(t.prototype),"onLocaleChange",this).call(this),this.timeAxisColumn.refreshHeader()}},{key:"onInternalResize",value:function(e,n,r,o,i){var a=this._bodyRectangle;qX(KX(t.prototype),"onInternalResize",this).call(this,e,n,r,o,i),a&&r!==i&&this.onSchedulerViewportResize(a.width,this.bodyContainer.offsetHeight,a.width,a.height)}},{key:"onTimeAxisSubGridResize",value:function(e){var t=e.width,n=(e.height,e.oldWidth);if(e.oldHeight,this.isPainted&&t!==n){var r=this._bodyRectangle;this.onSchedulerViewportResize(t,r.height,n,r.height)}}},{key:"onSchedulerViewportResize",value:function(e,t,n,r){if(this.isPainted){var o=this,i=o.timeAxisSubGrid;o.currentOrientation.onViewportResize(e,t,n,r),null!=o._lastOverflow&&o._lastOverflow!==i.overflowingHorizontally||(o.setTimeout((function(){o.timeAxisViewModel.availableSpace=o.isHorizontal?i.width:i.height}),0),o.partneredWith&&!o.isSyncingFromPartner&&o.partneredWith.forEach((function(e){e.isSyncingFromPartner||(e.isSyncingFromPartner=!0,o.eachSubGrid((function(t){var n=e.subGrids[t.region];n.width!==t.width&&(t.collapsed?n.collapse():(n.collapsed&&n.expand(),t.flex?t.flex!==n.flex&&(n.flex=t.flex):n.width=t.width))})),e.isSyncingFromPartner=!1)}))),o.trigger("timelineViewportResize",{width:e,height:t,oldWidth:n,oldHeight:r}),o._lastOverflow=i.overflowingHorizontally}}},{key:"onTimeAxisViewModelUpdate",value:function(){this.updateCanvasSize(),this.isHorizontal&&(this.callEachSubGrid("refreshFakeScroll"),this.refreshVirtualScrollbars()),this.currentOrientation.onTimeAxisViewModelUpdate()}},{key:"updateCanvasSize",value:function(){var e=this;e.isHorizontal?(e.backgroundCanvas&&(e.backgroundCanvas.style.width="".concat(e.timeAxisViewModel.totalSize,"px")),e.foregroundCanvas.style.width="".concat(e.timeAxisViewModel.totalSize,"px")):(e.backgroundCanvas&&(e.backgroundCanvas.style.width=xn.setLength(e.timeAxisColumn.width)),e.foregroundCanvas.style.width=xn.setLength(e.timeAxisColumn.width))}},{key:"getHeaderDomConfigs",value:function(e){}},{key:"getForegroundDomConfigs",value:function(e){}},{key:"refresh",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;n.isPainted&&!n.refreshSuspended&&(n.hasVisibleEvents?(n.refreshRows(!1,e),t&&t()):n.rowManager.trigger("refresh"))}},{key:"render",value:function(){var e=this,n=e.timeAxisSubGridElement;e.useBackgroundCanvas&&(e._backgroundCanvas=xn.createElement({className:"b-sch-background-canvas",parent:n,nextSibling:n.firstElementChild}));var r=e._foregroundCanvas=xn.createElement({className:"b-sch-foreground-canvas",style:"font-size:".concat(e.rowHeight-2*e.resourceMargin,"px"),parent:n});e.timeAxisSubGrid.insertRowsBefore=r,qX(KX(t.prototype),"render",this).apply(this,arguments)}},{key:"refreshRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;r.isConfiguring||(r.currentOrientation.refreshRows(n),qX(KX(t.prototype),"refreshRows",this).call(this,e))}},{key:"getDateConstraints",value:function(){}},{key:"runWithTransition",value:function(e,t){var n=this;n.isVisible&&(null!=t&&!0!==t||(t=n.transitionDuration),t&&n.enableEventAnimations&&(n.isAnimating=!0,QX.delay=t,n.setTimeout(QX))),e()}},{key:"exitTransition",value:function(){this.isAnimating=!1,this.trigger("transitionend")}},{key:"refreshWithTransition",value:function(e){var t=this;this.runWithTransition((function(){return t.refresh(e)}))}},{key:"getVisibleDateRange",value:function(){return this.currentOrientation.getVisibleDateRange()}},{key:"hasVisibleEvents",get:function(){var e=this;return!this.noFeatureElementsInAxis()||this.eventStore.storage.values.some((function(t){return e.timeAxis.isTimeSpanInAxis(t)}))}},{key:"capitalizedEventName",get:function(){return this._capitalizedEventName||(this._capitalizedEventName=A.capitalizeFirstLetter(this.scheduledEventName)),this._capitalizedEventName}},{key:"partner",set:function(e){var t=this,n=t.partneredWith||(t.partneredWith=new Eo);t._partner=e,n.includes(e)||(n.add(e),(e.partneredWith||(e.partneredWith=new Eo)).add(t),e.on({presetchange:"onPartnerPresetChange",thisObj:t}),t.on({presetchange:"onPartnerPresetChange",thisObj:e}),t.setConfig({viewPreset:e.viewPreset,timeAxis:e.timeAxis,timeAxisViewModel:e.timeAxisViewModel}),t.initScroll=lr.createSequence(t.initScroll,(function(){t.scrollable.addPartner(e.scrollable,"x")}),t))},get:function(){return this._partner}},{key:"timeAxisColumn",get:function(){return this.columns&&this._timeAxisColumn}},{key:"columns",get:function(){return qX(KX(t.prototype),"columns",this)},set:function(e){var n,r,o,i,a=this;if(e){var u=Array.isArray(e),c=e;u||(c=e.data),n=c&&c.length,c.forEach((function(e,t){"timeAxis"===e.type&&(n=t,r=e)})),a.isVertical?(a._horizontalColumns=e,c=[{type:"verticalTimeAxis",locked:!0,timeline:a},c[n]],n=1):c=c.slice(),r=c[n]=Object.assign({type:"timeAxis",locked:!1,timeline:a,cellCls:a.timeCellCls,mode:a.mode},r),JX.forEach((function(e){null!=(i=a[e])&&(r[e]=i)})),u?e=c:e.data=c}UX(KX(t.prototype),"columns",e,this,!0),e&&(o=a._timeAxisColumn=a.columns.getAt(n),a.isVertical&&(a.verticalTimeAxisColumn=a.columns.getAt(n-1)),o.relayAll(a))}},{key:"timeView",get:function(){var e=this;return e.columns&&e.isVertical?e.verticalTimeAxisColumn&&e.verticalTimeAxisColumn.view:e.timeAxisColumn&&e.timeAxisColumn.timeAxisView}},{key:"eventCls",set:function(e){var t=this;t._eventCls=e,t.eventSelector||(t.eventSelector=".".concat(e,"-wrap"),t.unreleasedEventSelector="".concat(t.eventSelector,":not(.b-sch-released)")),t.eventInnerSelector||(t.eventInnerSelector="."+e)},get:function(){return this._eventCls}},{key:"timeAxisViewModel",set:function(e){var t=this,n={update:"onTimeAxisViewModelUpdate",prio:100,thisObj:t};t.partner&&!e||(e&&e.isTimeAxisViewModel?e.on(n):(e=Object.assign({mode:t._mode,snap:t.snap,forceFit:t.forceFit,timeAxis:t.timeAxis,listeners:n},e),e=new tX(e)),t._timeAxisViewModel=e)},get:function(){return this._timeAxisViewModel||(this.timeAxisViewModel=null),this._timeAxisViewModel}},{key:"timeAxis",set:function(e){var t=this;t.partner&&!e||(t.timeAxisDetacher&&t.timeAxisDetacher(),e&&e.isTimeAxis||(e=Mt.assign({viewPreset:t.viewPreset,autoAdjust:t.autoAdjustTimeAxis,mode:"plain",weekStartDay:t.weekStartDay},e),t.startDate&&(e.startDate=t.startDate),t.endDate&&(e.endDate=t.endDate),t.workingTime&&t.applyWorkingTime(e),e=new FL(e)),t.timeAxisDetacher=e.on({thisObj:t,reconfigure:function(e){var n=e.config;t.trigger("timeAxisChange",{config:n})}}),t._timeAxis=e)},get:function(){return this._timeAxis||(this.timeAxis=null),this._timeAxis}},{key:"workingTime",set:function(e){this._workingTime=e,this.isConfiguring||this.applyWorkingTime(this.timeAxis)},get:function(){return this._workingTime}},{key:"startDate",set:function(e){this.setStartDate(e)},get:function(){return this._timeAxis?this._timeAxis.startDate:this._tempStartDate||new Date}},{key:"endDate",set:function(e){this.setEndDate(e)},get:function(){var e=this;return e._timeAxis?e._timeAxis.endDate:e._tempEndDate||xt.add(e.startDate,e.viewPreset.defaultSpan,e.viewPreset.mainHeader.unit)}},{key:"features",get:function(){return qX(KX(t.prototype),"features",this)},set:function(e){"regionResize"in(e=!0===e?{}:e)||(e.regionResize=!0),UX(KX(t.prototype),"features",e,this,!0)}},{key:"eventStyle",get:function(){return this._eventStyle},set:function(e){this._eventStyle=e,this.isPainted&&this.refreshWithTransition()}},{key:"eventColor",get:function(){return this._eventColor},set:function(e){this._eventColor=e,this.isPainted&&this.refreshWithTransition()}},{key:"currentOrientation",get:function(){throw new Error("Implement in subclass")}},{key:"isHorizontal",get:function(){return!0}},{key:"backgroundCanvas",get:function(){return this._backgroundCanvas}},{key:"foregroundCanvas",get:function(){return this._foregroundCanvas}},{key:"svgCanvas",get:function(){var e=this;if(!e._svgCanvas){var t=e._svgCanvas=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("id",ye.generateId("svg")),t.retainElement=!0,e.foregroundCanvas.appendChild(t),e.trigger("svgCanvasCreated")}return e._svgCanvas}},{key:"timeAxisSubGridElement",get:function(){return this.timeAxisColumn&&this.timeAxisColumn.subGridElement}}])&&$X(n.prototype,r),o&&$X(n,o),t}(Xs(fA).mixes((function(e){return function(e){function t(){return rX(this,t),iX(this,aX(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uX(e,t)}(t,e),n=t,(r=[{key:"getDateFromCoordinate",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n||(e=this.currentOrientation.translateToScheduleCoordinate(e)),this.timeAxisViewModel.getDateFromPosition(e,t,r)}},{key:"getDateFromX",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.getDateFromCoordinate(e,t,n)}},{key:"getDateFromXY",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.currentOrientation.getDateFromXY(e,t,n,r)}},{key:"getDateFromDomEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getDateFromXY([e.x,e.y],t,!1,n)}},{key:"getStartEndDatesFromRectangle",value:function(e,t,n){var r,o,i=this,a=i.isHorizontal,u=a?i.timeAxisSubGrid.width:i.timeAxisSubGrid.height,c=a?e.x:e.top,s=a?e.right:e.bottom;return c>=0&&s<u?(r=i.getDateFromCoordinate(c,null,!0),o=i.getDateFromCoordinate(s,null,!0)):c<0?(o=i.getDateFromCoordinate(s,t,!0),r=xt.add(o,-n,"ms")):(r=i.getDateFromCoordinate(c,t,!0),o=xt.add(r,n,"ms")),{start:r,end:o}}},{key:"getFormattedDate",value:function(e){return xt.format(e,this.displayDateFormat)}},{key:"getDisplayEndDate",value:function(e,t){return 0!==e.getHours()||0!==e.getMinutes()||t&&e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()||xt.formatContainsHourInfo(this.displayDateFormat)||(e=xt.add(e,-1,"day")),e}},{key:"getFormattedEndDate",value:function(e,t){return this.getFormattedDate(this.getDisplayEndDate(e,t))}},{key:"getCoordinateFromDate",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,o=r.timeAxisViewModel,i=r.timeAxis,a=i.isContinuous,u=i.startMS,c=i.endMS,s=i.startDate,l=i.unit,f=e.valueOf();if(!0===n?n={local:!0}:n?"local"in n||(n.local=!0):n={local:!1},e instanceof Date||(cX.setTime(e),e=cX),a&&e.getTimezoneOffset()===s.getTimezoneOffset()&&-1!==xt.getUnitToBaseUnitRatio(l,"day")){if(f<u||f>c)return-1;t=Math.round((f-u)/(c-u)*o.totalSize)}else t=o.getPositionFromDate(e,n);return n.local||(t=r.currentOrientation.translateToPageCoordinate(t)),t}},{key:"getTimeSpanDistance",value:function(e,t){return this.timeAxisViewModel.getDistanceBetweenDates(e,t)}},{key:"onSchedulerHorizontalScroll",value:function(e){e.subGrid,e.scrollLeft,this.scrollingToCenter||(this.cachedCenterDate=null)}},{key:"displayDateFormat",get:function(){return this._displayDateFormat},set:function(e){this._displayDateFormat=e,this.trigger("displayDateFormatChange",{format:e})}},{key:"viewportCenterDate",get:function(){var e=this,t=e.timeAxis,n=e.timeAxisSubGrid,r=n.scrollable,o=r.x+n.width/2,i=r.y+n.height/2;if(t.isContinuous){var a=e.isHorizontal?o/r.scrollWidth:i/r.scrollHeight,u=t.startMS+(t.endMS-t.startMS)*a;return new Date(u)}var c=e.isHorizontal?[o,0]:[0,i];return e.getDateFromXY(c,null,!0)}},{key:"viewportCenterDateCached",get:function(){return this.cachedCenterDate||(this.cachedCenterDate=this.viewportCenterDate)}},{key:"timeResolution",get:function(){return this.timeAxis.resolution},set:function(e){this.timeAxis.resolution={increment:e,unit:this.timeAxis.resolution.unit}}},{key:"snap",set:function(e){this.isConfiguring?this._snap=e:this.timeAxisViewModel.snap=e},get:function(){return this.isConfiguring?this._snap:this.timeAxisViewModel.snap}},{key:"widgetClass",get:function(){}}])&&oX(n.prototype,r),o&&oX(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return lX(this,t),dX(this,hX(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yX(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{scheduledBarEvents:{mousedown:"handleScheduledBarEvent",mouseup:"handleScheduledBarEvent",click:"handleScheduledBarEvent",dblclick:"handleScheduledBarEvent",contextmenu:"handleScheduledBarEvent",mouseover:"handleScheduledBarEvent",mouseout:"handleScheduledBarEvent"},schedulerEvents:{click:"handleScheduleEvent",dblclick:"handleScheduleEvent",contextmenu:"handleScheduleEvent",mousemove:"handleScheduleEvent"}}}}],(r=[{key:"initDomEvents",value:function(){var e=this;e.scheduledBarEvents.element=e.schedulerEvents.element=e.timeAxisSubGridElement,e.scheduledBarEvents.thisObj=e.schedulerEvents.thisObj=e,_r.on(e.scheduledBarEvents),_r.on(e.schedulerEvents)}},{key:"getTimeSpanMouseEventParams",value:function(e,t){throw new Error("Implement in subclass")}},{key:"getScheduleMouseEventParams",value:function(e,t){throw new Error("Implement in subclass")}},{key:"handleScheduledBarEvent",value:function(e){var t=xn.up(e.target,this.eventInnerSelector),n=gX[e.type]||A.capitalizeFirstLetter(e.type);t&&this.trigger(this.scheduledEventName+n,this.getTimeSpanMouseEventParams(t,e))}},{key:"handleScheduleEvent",value:function(e){var t=this,n=!xn.up(e.target,t.eventSelector)&&xn.up(e.target,"."+t.timeCellCls),r=gX[e.type]||A.capitalizeFirstLetter(e.type);if(n){var o=t.getDateFromDomEvent(e,"floor"),i=tg.get(n),a=i.row.dataIndex,u=t.timeAxis.getTickFromDate(o),c=t.timeAxis.getAt(Math.floor(u));c&&t.trigger("schedule"+r,Object.assign({date:o,tickStartDate:c.startDate,tickEndDate:c.endDate,row:i.row,index:a,event:e},t.getScheduleMouseEventParams(i,e)))}}},{key:"onElementMouseOver",value:function(e){pX(hX(t.prototype),"onElementMouseOver",this).call(this,e);var n=this,r=e.target;if(r.closest(n.eventInnerSelector)){var o=r.closest(n.eventSelector);if(o.classList.add(n.overScheduledEventClass),o!==n.hoveredEventNode&&!n.preventOverCls){n.hoveredEventNode=o;var i=n.getTimeSpanMouseEventParams(o,e);i&&n.trigger(n.scheduledEventName+"MouseEnter",i)}}else n.hoveredEventNode=null}},{key:"onElementMouseOut",value:function(e){pX(hX(t.prototype),"onElementMouseOut",this).call(this,e);var n=this;if(e.target.closest(n.eventInnerSelector)&&n.resolveTimeSpanRecord(e.target)&&n.hoveredEventNode){if(e.relatedTarget&&xn.isDescendant(e.target.closest(n.eventInnerSelector),e.relatedTarget))return;n.unhover(e)}}},{key:"unhover",value:function(e){var t=this,n=t.hoveredEventNode;n&&(n.classList.remove(t.overScheduledEventClass),t.trigger(t.scheduledEventName+"MouseLeave",t.getTimeSpanMouseEventParams(n,e)),t.hoveredEventNode=null)}},{key:"widgetClass",get:function(){}}])&&fX(n.prototype,r),o&&fX(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return PX(this,t),AX(this,MX(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IX(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{barMargin:10,resourceMargin:null,managedEventSizing:!0,generatedIdCls:"b-sch-dirty-new",dirtyCls:"b-sch-dirty",committingCls:"b-sch-committing",endsOutsideViewCls:"b-sch-event-endsoutside",startsOutsideViewCls:"b-sch-event-startsoutside",fixedEventCls:"b-sch-event-fixed",eventStyle:"plain",eventColor:"green"}}},{key:"eventColors",get:function(){return["red","pink","purple","violet","indigo","blue","cyan","teal","green","lime","yellow","orange","gray"]}},{key:"eventStyles",get:function(){return["plain","border","hollow","colored","line","dashed","minimal"]}}],(r=[{key:"barMargin",get:function(){return this._barMargin},set:function(e){var t=this;Mt.assertNumber(e,"barMargin"),t.isHorizontal&&t.rowHeight&&(e=Math.min(Math.ceil(t.rowHeight/2),e)),t._barMargin!==e&&(t._barMargin=e,t.rendered&&(t.currentOrientation.onBeforeRowHeightChange(),t.refreshWithTransition()))}},{key:"resourceMargin",get:function(){return null==this._resourceMargin?this.barMargin:this._resourceMargin},set:function(e){var t=this;Mt.assertNumber(e,"resourceMargin"),t.isHorizontal&&t.rowHeight&&(e=Math.min(Math.ceil(t.rowHeight/2),e)),t._resourceMargin!==e&&(t._resourceMargin=e,t.rendered&&(t.currentOrientation.onBeforeRowHeightChange(),t.refreshWithTransition()))}},{key:"tickWidth",set:function(e){this.tickSize=e},get:function(){return this.tickSize}},{key:"tickSize",set:function(e){Mt.assertNumber(e,"tickSize"),this.timeAxisViewModel.tickSize=e},get:function(){return this.timeAxisViewModel.tickSize}},{key:"widgetClass",get:function(){}}])&&TX(n.prototype,r),o&&TX(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return LX(this,t),HX(this,BX(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zX(e,t)}(t,e),n=t,(r=[{key:"scrollToDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=n.timeAxisSubGrid.scrollable,o=r.viewport,i=n.getCoordinateFromDate(e,!0),a=n.isHorizontal?new tr(n.getCoordinateFromDate(e,!1),o.y,n.timeAxisViewModel.tickSize,o.height):new tr(o.x,n.getCoordinateFromDate(e,!1),o.width,n.timeAxisViewModel.tickSize);return n.scrollToCoordinate(i,a,e,t)}},{key:"scrollToNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.scrollToDate(new Date,e)}},{key:"scrollToCoordinate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this;if(e<0){var i=(o.timeAxis.endDate-o.timeAxis.startDate)/2,a=new Date(n.getTime()-i),u=new Date(n.getTime()+i);return a-o.startDate!=0&&u-o.endDate!=0?(o.setTimeSpan(a,u),o.scrollToDate(n,r)):void 0}return o.timeAxisSubGrid.scrollable.scrollIntoView(t,r)}},{key:"scrollHorizontallyTo",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.timeAxisSubGrid.scrollable.scrollTo(e,null,t)}},{key:"scrollVerticallyTo",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.scrollable.scrollTo(null,e,t)}},{key:"scrollTo",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.timeAxisSubGrid.scrollable.scrollTo(e,null,t)}},{key:"scrollLeft",set:function(e){this.timeAxisSubGrid.scrollable.x=e},get:function(){return this.timeAxisSubGrid.scrollable.x}},{key:"scrollTop",set:function(e){this.scrollable.y=e},get:function(){return this.scrollable.y}},{key:"widgetClass",get:function(){}}])&&NX(n.prototype,r),o&&NX(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return mX(this,t),wX(this,kX(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SX(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{viewPreset:"weekAndDayLetter",displayDateFormat:null,presets:!0}}}],(r=[{key:"normalizePreset",value:function(e){var t=e,n=this.presets;if(!(e instanceof cL)){if("object"===vX(e)){if(e.base){var r=n.getById(e.base)||xL.getById(e.base);if(!r)throw new Error("ViewPreset base '".concat(e.base,"' does not exist"));e=Mt.merge(Mt.clone(r.data),xL.createRecord(e).data)}e.id?e=n.createRecord(e):(e=n.createRecord(Mt.assign({},e))).id=e.generateId(n)}else e="number"==typeof e?n.getAt(e):n.getById(e)||xL.getById(e);if(!e)throw new Error("Invalid ViewPreset requested: ".concat(t))}return n.add(e)[0]}},{key:"setViewPreset",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=this,a=i.isHorizontal,u=i._timeAxis,c={startDate:t,endDate:n,from:i.viewPreset};if(e=c.to=c.preset=i.normalizePreset(e),Object.keys(o).length||!i._viewPreset||i._viewPreset!==e&&!i._viewPreset.equals(e)){r=r||i.isConfiguring;var s=o.centerDate;if(r||!1!==i.trigger("beforePresetChange",c)&&!1!==i.trigger("beforeZoomChange",c)){if(i._viewPreset=e,i._viewPresetChanging=!0,i.displayDateFormat=i.config.displayDateFormat||e.displayDateFormat,u){if(i.suspendRefresh(),!r||!u.isConfigured){var l={weekStartDay:i.weekStartDay,startTime:i.startTime,endTime:i.endTime};r?(0===u.count||t)&&(l.startDate=t||new Date,l.endDate=n):t?(l.startDate=t,l.endDate=n,!s&&n&&(s=new Date((t.getTime()+n.getTime())/2))):(l.startDate=u.startDate,l.endDate=n||u.endDate,s||(s=i.viewportCenterDate)),u.isConfigured=!1,u.viewPreset=e,u.reconfigure(l,!0),i.timeAxisViewModel.reconfigure({viewPreset:i.viewPreset,headers:e.headers,columnLinesFor:null!=e.columnLinesFor?e.columnLinesFor:e.headers.length-1,rowHeightHorizontal:i.readRowHeightFromPreset?e.rowHeight:i.rowHeight,tickSize:a?e.tickWidth:e.tickHeight||e.tickWidth||60}),i.resumeRefresh()}if(i.refresh(),!o.notScroll&&i.isPainted)if(s){i.cachedCenterDate=s,c.centerDate=s;var f=null;f=Math.max(Math.floor(i.getCoordinateFromDate(s,!0)-i.timeAxisSubGrid.width/2),0),i.viewPresetActiveScroll={left:f},i.scrollingToCenter=!0,i.scrollHorizontallyTo(f,!1),i.setTimeout((function(){i.scrollingToCenter=!1}),100)}else i.scrollHorizontallyTo(0,!1)}i.trigger("presetChange",c),i.trigger("zoomChange",c)}i._viewPresetChanging=!1}}},{key:"presets",set:function(e){!0===e&&(e=xL.allRecords),this._presets=new mL({data:e})},get:function(){return this._presets}},{key:"viewPreset",get:function(){return this._viewPreset},set:function(e){e instanceof cL||!e.name||e.base||(F.deprecate("Scheduler","4.0.0","ViewPreset name config replaced by base config. See https://www.bryntum.com/docs/scheduler/#guides/upgrades/3.0.md"),e.base=e.name),this._viewPreset&&this._viewPreset.equals(e)||this.setViewPreset(e)}},{key:"widgetClass",get:function(){}}])&&bX(n.prototype,r),o&&bX(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return EX(this,t),xX(this,jX(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DX(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{zoomOnMouseWheel:!0,zoomOnTimeAxisDoubleClick:!0,preventScrollZoom:null,minZoomLevel:null,maxZoomLevel:null,visibleZoomFactor:5,zoomKeepsOriginalTimespan:null}}}],(r=[{key:"construct",value:function(e){var n=this;_X(jX(t.prototype),"construct",this).call(this,e),n.zoomOnMouseWheel&&_r.on({element:n.timeAxisSubGridElement,wheel:"onWheel",thisObj:n,capture:!0,passive:!1}),n.zoomOnTimeAxisDoubleClick&&n.on("timeaxisheaderdblclick",(function(e){var t=e.startDate,r=e.endDate;n.isVertical||n.zoomToSpan({startDate:t,endDate:r})}))}},{key:"getMilliSecondsPerPixelForZoomLevel",value:function(e,t){var n=e.bottomHeader,r=this.isHorizontal?e.tickWidth:e.tickHeight;return Math.round((xt.add(new Date(1,0,1),n.increment||1,n.unit)-new Date(1,0,1))/(t?r:e.actualWidth||r))}},{key:"zoomTo",value:function(e){"object"===OX(e)?e.preset?this.zoomToLevel(e.preset,e):null!=e.level?this.zoomToLevel(e.level,e):this.zoomToSpan(e):this.zoomToLevel(e)}},{key:"zoomToLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"number"==typeof e&&(e=Math.min(Math.max(e,this.minZoomLevel),this.maxZoomLevel));var n=this,r=n.config,o=n.isVertical?"tickHeight":"tickWidth",i=n.normalizePreset(e),a=i[o],u=t.startDate,c=t.endDate,s=u&&c?{startDate:u,endDate:c}:null,l=t.centerDate||(s?new Date((u.getTime()+c.getTime())/2):n.viewportCenterDateCached),f=n.timeAxisSubGrid.width;s||(s=r.startDate&&r.endDate&&r.viewPreset&&i.equals(n.normalizePreset(r.viewPreset))?{startDate:r.startDate,endDate:r.endDate}:n.calculateOptimalDateRange(l,f,i)),"width"in t&&i.setData(o,t.width),n.isZooming=!0,n.setViewPreset(i,s.startDate||n.startDate,s.endDate||n.endDate,!1,{centerDate:l}),i.actualWidth=n.timeAxisViewModel.tickSize,n.isZooming=!1,i.setData(o,a)}},{key:"zoomToFit",value:function(e){var t=this.eventStore.getTotalTimeSpan();(e=Object.assign({leftMargin:0,rightMargin:0},e,t)).startDate&&e.endDate&&this.zoomToSpan(e)}},{key:"zoomToSpan",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((e.leftMargin||e.rightMargin)&&(e.adjustStart=0,e.adjustEnd=0),e.leftMargin||(e.leftMargin=0),e.rightMargin||(e.rightMargin=0),!e.startDate||!e.endDate)throw new Error("zoomToSpan: must provide startDate + endDate dates");var t=this,n=e.adjustStart>=0||e.adjustEnd>=0,r=e.startDate,o=e.endDate;if(n&&(r=xt.add(r,-e.adjustStart,t.timeAxis.mainUnit),o=xt.add(o,e.adjustEnd,t.timeAxis.mainUnit)),r<=o){var i,a,u=t.timeAxisViewModel.availableSpace,c=t.presets.allRecords,s=o-r||1,l=Math.floor(t.zoomLevel);-1===l&&(l=0);for(var f,d=t.getMilliSecondsPerPixelForZoomLevel(c[l],!0),p=l+(i=s/d+e.leftMargin+e.rightMargin>u?-1:1),h=null;p>=0&&p<=c.length-1;){f=c[p];var y=s/(d=t.getMilliSecondsPerPixelForZoomLevel(f,!0))+e.leftMargin+e.rightMargin;if(-1===i){if(y<=u){h=p;break}}else{if(!(y<=u))break;l!==p-i&&(h=p)}p+=i}var g=(f=c[h=null!=h?h:p-i]).bottomHeader.unit;(e.leftMargin||e.rightMargin)&&(r=new Date(r.getTime()-d*e.leftMargin),o=new Date(o.getTime()+d*e.rightMargin));var v=xt.getDurationInUnit(r,o,g,!0)/f.bottomHeader.increment;if(0===v)return null;var m=Math.floor(u/v),b=e.centerDate||new Date((r.getTime()+o.getTime())/2);return a=n?{startDate:r,endDate:o}:t.calculateOptimalDateRange(b,u,f),t.zoomToLevel(h,Object.assign(a,{width:m,centerDate:b}))}return null}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.zoomLevel;return t>=this.presets.count-1?null:this.zoomToLevel(Math.floor(t)+e)}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.zoomLevel;return t<=0?null:this.zoomToLevel(Math.ceil(t)-e)}},{key:"zoomInFull",value:function(){return this.zoomToLevel(this.maxZoomLevel)}},{key:"zoomOutFull",value:function(){return this.zoomToLevel(this.minZoomLevel)}},{key:"calculateOptimalDateRange",value:function(e,t,n,r){if(r)return r;var o=this.timeAxis,i=n.bottomHeader,a=this.isHorizontal?n.tickWidth:n.tickHeight;if(this.zoomKeepsOriginalTimespan)return{startDate:o.startDate,endDate:o.endDate};var u=i.unit,c=Math.ceil(t/a*i.increment*this.visibleZoomFactor/2),s=xt.add(e,-c,u),l=xt.add(e,c,u);return{startDate:o.floorDate(s,!1,u,i.increment),endDate:o.ceilDate(l,!1,u,i.increment)}}},{key:"onWheel",value:function(e){var t=this;e.ctrlKey&&(e.preventDefault(),t.preventScrollZoom||(e.deltaY>0?t.zoomOut():e.deltaY<0&&t.zoomIn(),t.preventScrollZoom=!0,t.setTimeout((function(){return t.preventScrollZoom=!1}),30)))}},{key:"setTimeSpan",value:function(e,t){this.timeAxis.setTimeSpan(e,t)}},{key:"shift",value:function(e,t){this.timeAxis.shift(e,t)}},{key:"shiftNext",value:function(e){this.timeAxis.shiftNext(e)}},{key:"shiftPrevious",value:function(e){this.timeAxis.shiftPrevious(e)}},{key:"maxZoomLevel",get:function(){return this._maxZoomLevel||this.presets.count-1},set:function(e){if("number"!=typeof e&&(e=this.presets.count-1),e<0||e>=this.presets.count)throw new Error("Invalid range for `setMinZoomLevel`");this._maxZoomLevel=e}},{key:"minZoomLevel",get:function(){return this._minZoomLevel||0},set:function(e){if("number"!=typeof e&&(e=0),e<0||e>=this.presets.count)throw new Error("Invalid range for `minZoomLevel`");this._minZoomLevel=e}},{key:"zoomLevel",get:function(){return this.presets.indexOf(this.viewPreset)},set:function(e){this.zoomToLevel(e)}},{key:"widgetClass",get:function(){}}])&&CX(n.prototype,r),o&&CX(n,o),t}(e||Y)})));eK._$name="TimelineBase";var tK={SchedulerCommon:{},ExcelExporter:{"No resource assigned":"No resource assigned"},ResourceInfoColumn:{eventCountText:function(e){return e+" event"+(1!==e?"s":"")}},Dependencies:{from:"From",to:"To",valid:"Valid",invalid:"Invalid",Checking:"Checking…"},DependencyEdit:{From:"From",To:"To",Type:"Type",Lag:"Lag","Edit dependency":"Edit dependency",Save:"Save",Delete:"Delete",Cancel:"Cancel",StartToStart:"Start to Start",StartToEnd:"Start to End",EndToStart:"End to Start",EndToEnd:"End to End"},EventEdit:{Name:"Name",Resource:"Resource",Start:"Start",End:"End",Save:"Save",Delete:"Delete",Cancel:"Cancel","Edit Event":"Edit event",Repeat:"Repeat"},EventDrag:{eventOverlapsExisting:"Event overlaps existing event for this resource",noDropOutsideTimeline:"Event may not be dropped completely outside the timeline"},Scheduler:{"Add event":"Add event","Delete event":"Delete event","Unassign event":"Unassign event"},HeaderContextMenu:{pickZoomLevel:"Zoom",activeDateRange:"Date range",startText:"Start date",endText:"End date",todayText:"Today"},EventFilter:{filterEvents:"Filter tasks",byName:"By name"},TimeRanges:{showCurrentTimeLine:"Show current timeline"},PresetManager:{minuteAndHour:{topDateFormat:"ddd MM/DD, hA"},hourAndDay:{topDateFormat:"ddd MM/DD"},weekAndDay:{displayDateFormat:"hh:mm A"}},RecurrenceConfirmationPopup:{"delete-title":"You’re deleting an event","delete-all-message":"Do you want to delete all occurrences of this event?","delete-further-message":"Do you want to delete this and all future occurrences of this event, or only the selected occurrence?","delete-further-btn-text":"Delete All Future Events","delete-only-this-btn-text":"Delete Only This Event","update-title":"You’re changing a repeating event","update-all-message":"Do you want to change all occurrences of this event?","update-further-message":"Do you want to change only this occurrence of the event, or this and all future occurrences?","update-further-btn-text":"All Future Events","update-only-this-btn-text":"Only This Event",Yes:"Yes",Cancel:"Cancel",width:600},RecurrenceLegend:{" and ":" and ",Daily:"Daily","Weekly on {1}":function(e){var t=e.days;return"Weekly on ".concat(t)},"Monthly on {1}":function(e){var t=e.days;return"Monthly on ".concat(t)},"Yearly on {1} of {2}":function(e){var t=e.days,n=e.months;return"Yearly on ".concat(t," of ").concat(n)},"Every {0} days":function(e){var t=e.interval;return"Every ".concat(t," days")},"Every {0} weeks on {1}":function(e){var t=e.interval,n=e.days;return"Every ".concat(t," weeks on ").concat(n)},"Every {0} months on {1}":function(e){var t=e.interval,n=e.days;return"Every ".concat(t," months on ").concat(n)},"Every {0} years on {1} of {2}":function(e){var t=e.interval,n=e.days,r=e.months;return"Every ".concat(t," years on ").concat(n," of ").concat(r)},position1:"the first",position2:"the second",position3:"the third",position4:"the fourth",position5:"the fifth","position-1":"the last",day:"day",weekday:"weekday","weekend day":"weekend day",daysFormat:function(e){var t=e.position,n=e.days;return"".concat(t," ").concat(n)}},RecurrenceEditor:{"Repeat event":"Repeat event",Cancel:"Cancel",Save:"Save",Frequency:"Frequency",Every:"Every",DAILYintervalUnit:"day(s)",WEEKLYintervalUnit:"week(s) on:",MONTHLYintervalUnit:"month(s)",YEARLYintervalUnit:"year(s) in:",Each:"Each","On the":"On the","End repeat":"End repeat","time(s)":"time(s)"},RecurrenceDaysCombo:{day:"day",weekday:"weekday","weekend day":"weekend day"},RecurrencePositionsCombo:{position1:"first",position2:"second",position3:"third",position4:"fourth",position5:"fifth","position-1":"last"},RecurrenceStopConditionCombo:{Never:"Never",After:"After","On date":"On date"},RecurrenceFrequencyCombo:{Daily:"Daily",Weekly:"Weekly",Monthly:"Monthly",Yearly:"Yearly"},RecurrenceCombo:{None:"None","Custom...":"Custom..."},ScheduleRangeCombo:{completeview:"Complete schedule",currentview:"Visible schedule",daterange:"Date range",completedata:"Complete schedule (for all events)"},SchedulerExportDialog:{"Schedule range":"Schedule range","Export from":"From","Export to":"To"}};for(var nK in ZT)tK[nK]=ZT[nK];var rK=tK;function oK(e){return(oK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uK(e,t){return!t||"object"!==oK(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cK(e){return(cK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sK(e,t){return(sK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Te.registerLocale("En",{desc:"English",locale:tK});function lK(e){return(lK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pK(e,t){return!t||"object"!==lK(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hK(e,t,n){return(hK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yK(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yK(e){return(yK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gK(e,t){return(gK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vK(e){return(vK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wK(e,t){return!t||"object"!==vK(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kK(e,t,n){return(kK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SK(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function SK(e){return(SK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OK(e,t){return(OK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EK(e){return(EK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _K(e,t){return!t||"object"!==EK(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jK(e){return(jK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DK(e,t){return(DK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RK=function(e){function t(){return CK(this,t),_K(this,jK(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DK(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{nbrOfBandsByResource:{},bandIndexToPxConvertFn:null,bandIndexToPxConvertThisObj:null}}}],(r=[{key:"clearCache",value:function(e){e?delete this.nbrOfBandsByResource[e.id]:this.nbrOfBandsByResource={}}},{key:"getNumberOfBands",value:function(e,t){var n=this.nbrOfBandsByResource;if(n.hasOwnProperty(e.id))return n[e.id];var r=("function"==typeof t?t():t).map((function(e){return{start:e.startDate,end:e.endDate,event:e}}));return this.applyLayout(r,e)}},{key:"applyLayout",value:function(e,t){var n=e.slice(),r=this.layoutEventsInBands(n);return this.nbrOfBandsByResource[t.id]=r}}])&&xK(n.prototype,r),o&&xK(n,o),t}(Y);function PK(e){return(PK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MK(e,t){return!t||"object"!==PK(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function IK(e){return(IK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FK(e,t){return(FK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}RK._$name="HorizontalLayout";var LK=function(e){function t(){return TK(this,t),MK(this,IK(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FK(e,t)}(t,e),n=t,(r=[{key:"layoutEventsInBands",value:function(e){var t=0;do{for(var n=e[0];n;)n.top=this.bandIndexToPxConvertFn.call(this.bandIndexToPxConvertThisObj||this,t,n.event),e.splice(e.indexOf(n),1),n=this.findClosestSuccessor(n,e);t++}while(e.length>0);return t}},{key:"findClosestSuccessor",value:function(e,t){for(var n,r,o,i=1/0,a=e.endMs,u=0===e.event.duration,c=0,s=t.length;c<s;c++)(r=(o=t[c]).startMs-a)>=0&&r<i&&(r>0||o.endMs-o.startMs>0||!u)&&(n=o,i=r);return n}}])&&AK(n.prototype,r),o&&AK(n,o),t}(RK);function NK(e){return(NK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zK(e,t){return!t||"object"!==NK(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VK(e){return(VK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WK(e,t){return(WK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}LK._$name="HorizontalLayoutStack";var $K=function(e){return function(e){function t(){return HK(this,t),zK(this,VK(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WK(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{coordProp:"top",sizeProp:"height"}}}],(r=[{key:"applyLayout",value:function(e,t){for(var n,r,o,i,a=this,u=a.coordProp,c=a.sizeProp,s=0,l=e.length;s<l;s++){if(r=e[s],n=a.findStartSlot(e,r),(o=a.getCluster(e,s)).length>1){for(r[u]=n.start,r[c]=n.end-n.start,i=1;i<o.length-1&&o[i+1].start-r.start==0;)i++;var f=a.findStartSlot(e,o[i]);f&&f.start<.8&&(o.length=i)}var d=o.length,p=(n.end-n.start)/d;for(i=0;i<d;i++)t(o[i],i,n,p);s+=d-1}}},{key:"findStartSlot",value:function(e,t){var n,r=this.sizeProp,o=this.coordProp,i=this.getPriorOverlappingEvents(e,t);if(0===i.length)return{start:0,end:1};for(n=0;n<i.length;n++){if(0===n&&i[0][o]>0)return{start:0,end:i[0][o]};if(i[n][o]+i[n][r]<(n<i.length-1?i[n+1][o]:1))return{start:i[n][o]+i[n][r],end:n<i.length-1?i[n+1][o]:1}}return!1}},{key:"getPriorOverlappingEvents",value:function(e,t){for(var n=t.start,r=t.end,o=[],i=0,a=e.indexOf(t);i<a;i++)xt.intersectSpans(n,r,e[i].start,e[i].end)&&o.push(e[i]);return o.sort(this.sortOverlappers.bind(this)),o}},{key:"sortOverlappers",value:function(e,t){return e[this.coordProp]<t[this.coordProp]?-1:1}},{key:"getCluster",value:function(e,t){var n=e[t];if(t>=e.length-1)return[n];for(var r=[n],o=e.length,i=n.start,a=n.end,u=t+1;u<o&&xt.intersectSpans(i,a,e[u].start,e[u].end);)r.push(e[u]),i=xt.max(i,e[u].start),a=xt.min(e[u].end,a),u++;return r}}])&&BK(n.prototype,r),o&&BK(n,o),t}(e||Y)};function YK(e){return(YK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qK(e,t){return!t||"object"!==YK(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XK(e,t,n){return(XK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KK(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function KK(e){return(KK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZK(e,t){return(ZK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var JK=function(e){function t(){return GK(this,t),qK(this,KK(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZK(e,t)}(t,e),n=t,(r=[{key:"applyLayout",value:function(e){var n=this;XK(KK(t.prototype),"applyLayout",this).call(this,e,(function(e,t,n,r){e.height=r,e.top=n.start+t*r})),e.forEach((function(e){Object.assign(e,n.bandIndexToPxConvertFn.call(n.bandIndexToPxConvertThisObj||n,e.top,e.height,null,e.event))}))}}])&&UK(n.prototype,r),o&&UK(n,o),t}($K(RK));function QK(e){return(QK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rZ(e,t){return!t||"object"!==QK(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oZ(e){return(oZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iZ(e,t){return(iZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}JK._$name="HorizontalLayoutPack";var aZ=/-/g;function uZ(e){return(uZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cZ(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function sZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fZ(e,t){return!t||"object"!==uZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dZ(e,t,n,r){return(dZ="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=hZ(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function pZ(e,t,n){return(pZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=hZ(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function hZ(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yZ(e)););return e}function yZ(e){return(yZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gZ(e,t){return(gZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vZ=Math.MAX_SAFE_INTEGER||Math.pow(2,53)-1,mZ={add:1,update:1,remove:1,filter:1};function bZ(e){return(bZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SZ(e,t){return!t||"object"!==bZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OZ(e){return(OZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EZ(e,t){return(EZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var CZ=new Promise((function(e){return e()})),xZ={block:"nearest",edgeOffset:20},_Z={highlight:!1,focus:!1};function jZ(e){return(jZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PZ(e,t){return!t||"object"!==jZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TZ(e){return(TZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AZ(e,t){return(AZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MZ(e){return(MZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LZ(e,t){return!t||"object"!==MZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NZ(e,t,n){return(NZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HZ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function HZ(e){return(HZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BZ(e,t){return(BZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zZ=["eventLayout","barMargin","mode","tickSize","zoomLevel","eventColor","eventStyle","fillTicks","startDate","endDate"];function VZ(e){return(VZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YZ(e,t){return!t||"object"!==VZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GZ(e,t,n){return(GZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=UZ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function UZ(e){return(UZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qZ(e,t){return(qZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function XZ(e){return(XZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JZ(e,t){return!t||"object"!==XZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QZ(e,t,n){return(QZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eJ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function eJ(e){return(eJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tJ(e,t){return(tJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nJ=function(e,t){return e.startDate-t.startDate},rJ=function(e){return e.preventDefault()},oJ=function(e){return function(e){function t(){return KZ(this,t),JZ(this,eJ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tJ(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{navigator:null,focusCls:"b-active",enableDeleteKey:!0,onDeleteKeyBuffer:500,navigatePreviousBuffer:200,navigateNextBuffer:200,testConfig:{onDeleteKeyBuffer:1}}}}],(r=[{key:"construct",value:function(e){var n=this;n.isInTimeAxis=n.isInTimeAxis.bind(n),QZ(eJ(t.prototype),"construct",this).call(this,e);var r=n.onDeleteKey=n.throttle(n.onDeleteKey,n.onDeleteKeyBuffer,n),o=Mt.merge({ownerCmp:n,target:n.timeAxisSubGridElement,processEvent:n.processEvent,itemSelector:".".concat(n.eventCls,"-wrap"),focusCls:n.focusCls,navigatePrevious:n.throttle(n.navigatePrevious,n.navigatePreviousBuffer,n,null,rJ),navigateNext:n.throttle(n.navigateNext,n.navigateNextBuffer,n,null,rJ),allowCtrlKey:!0,scrollSilently:!0,keys:{Space:"onEventSpaceKey",Enter:"onEventEnterKey",Delete:r,Backspace:r}},n.navigator);n.navigator=new Bd(o)}},{key:"doDestroy",value:function(){this.navigator.destroy(),QZ(eJ(t.prototype),"doDestroy",this).call(this)}},{key:"isInTimeAxis",value:function(e){return!e.instanceMeta(this).excluded&&this.timeAxis.isTimeSpanInAxis(e)}},{key:"accessibleFocusCell",value:function(e,n){if((e=this.normalizeCellContext(e)).columnId!==this.timeAxisColumn.id)return QZ(eJ(t.prototype),"focusCell",this).call(this,e,n)}},{key:"getPrevious",value:function(e,t){var n=this,r=n.resourceStore,o=e.isAssignment;if(e.isTask)return n.eventStore.getAt(n.eventStore.indexOf(e)-1);var i=e.resource||n.eventStore.getResourcesForEvent(e)[0],a=i.getEvents().filter(n.isInTimeAxis).sort(nJ),u=o?e.event:e,c=a[a.indexOf(u)-1];if(!c)for(var s=r.indexOf(i)-1;(!c||t&&c===u)&&s>=0;s--){var l=(i=r.getAt(s)).getEvents().filter(n.isInTimeAxis).sort(nJ);c=l.length&&l[l.length-1]}return o?n.assignmentStore.getAssignmentForEventAndResource(c,i):c}},{key:"navigatePrevious",value:function(e){var t=this.getPrevious(e.assignmentRecord||e.eventRecord);e.preventDefault(),t&&(e.ctrlKey||this.clearEventSelection(),this.navigateTo(t,e))}},{key:"getNext",value:function(e,t){var n=this,r=n.resourceStore,o=e.isAssignment;if(e.isTask)return n.eventStore.getAt(n.eventStore.indexOf(e)+1);var i=o?e.resource:e.resources[0],a=i.getEvents().filter(n.isInTimeAxis).sort(nJ),u=o?e.event:e,c=a[a.indexOf(u)+1];if(!c)for(var s=r.indexOf(i)+1;(!c||t&&c===u)&&s<r.count;s++)c=(i=r.getAt(s)).getEvents().filter(n.isInTimeAxis).sort(nJ)[0];return o?n.assignmentStore.getAssignmentForEventAndResource(c,i):c}},{key:"navigateNext",value:function(e){var t=this.getNext(e.assignmentRecord||e.eventRecord);e.preventDefault(),t&&(e.ctrlKey||this.clearEventSelection(),this.navigateTo(t,e))}},{key:"navigateTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;if(e){n.navigator.disabled=!0;var r=e.resource;n.scrollResourceEventIntoView(r,e.isAssignment?e.event:e,null,{animate:100}).then((function(){n.isDestroyed||(n.navigator.disabled=!1,n.activeEvent=e,n.navigator.trigger("navigate",{event:t,item:xn.up(n.getElementFromEventRecord(e,r),n.navigator.itemSelector)}))}))}}},{key:"processEvent",value:function(e){var t=this,n=xn.up(e.target,t.eventSelector);return!t.navigator.disabled&&n&&(e.assignmentRecord=t.resolveAssignmentRecord(n),e.eventRecord=t.resolveEventRecord(n),e.resourceRecord=t.resolveResourceRecord(n)),e}},{key:"onDeleteKey",value:function(e){var t=e.assignmentRecord||e.eventRecord;!this.readOnly&&this.enableDeleteKey&&t&&this.removeRecords([t])}},{key:"removeRecords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.readOnly&&e.length){var n={finalize:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&t(n),!1!==n&&e.forEach((function(e){return e.remove()}))}};if(!1!==this.trigger("beforeEventDelete",{eventRecords:e,context:n}))return n.finalize(),!0}return!1}},{key:"onEventSpaceKey",value:function(e){}},{key:"onEventEnterKey",value:function(e){}},{key:"activeEvent",set:function(e){var t=this.getElementFromEventRecord(e.isAssignment?e.event:e,e.resource);this.navigator.activeItem=t.parentNode},get:function(){var e=this.navigator.activeItem;if(e)return this.resolveEventRecord(e)}},{key:"previousActiveEvent",get:function(){var e=this.navigator.previousActiveItem;if(e)return this.resolveEventRecord(e)}},{key:"isActionableLocation",get:function(){if(!this.navigator.activeItem)return QZ(eJ(t.prototype),"isActionableLocation",this)}},{key:"widgetClass",get:function(){}}])&&ZZ(n.prototype,r),o&&ZZ(n,o),t}(Wr(e||Y))};function iJ(e){return(iJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function uJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lJ(e,t){return!t||"object"!==iJ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fJ(e){return(fJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dJ(e,t){return(dJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pJ={},hJ=document.createRange();function yJ(e){return!(e.classList.contains("b-dragging")||e.classList.contains("b-resizing"))}var gJ=function(e){function t(){return cJ(this,t),lJ(this,fJ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dJ(e,t)}(t,e),n=t,(r=[{key:"construct",value:function(e){var t=this;t.view=e,t.innerElCls="".concat(e.eventCls),t.availableDivs=new na,t.reservedIds={},t.divCount=0}},{key:"init",value:function(){var e=this;e.view.rowManager.on({beforetranslaterow:e.onBeforeTranslateRow,translaterow:e.onTranslateRow,beforerowheight:e.onBeforeRowHeightChange,thisObj:e}),e.view.on({beforetogglenode:e.onBeforeToggleNode,beforetoggleallnodes:e.onBeforeToggleAllNodes,thisObj:e})}},{key:"translateToPageCoordinate",value:function(e){var t=this.column.subGridElement;return e+t.getBoundingClientRect().left-t.scrollLeft}},{key:"refreshRows",value:function(e){e&&(this.cache.clear(this.refreshFromRerender),this.view.refreshFromRerender=!1)}},{key:"onDragAbort",value:function(e){this.view.currentOrientation.availableDivs.includes(e.element)&&e.element.classList.add("b-sch-released")}},{key:"onLocaleChange",value:function(){this.cache.clear()}},{key:"calculateMS",value:function(e){throw new Error("Implement in subclass")}},{key:"getTimeSpanRenderData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.timeAxis,i=!0===n||n.timeAxis,a=!0===n||n.viewport;if(i||o.isTimeSpanInAxis(e)){var u=r.view,c=u.getRowById(t);if(c||a){var s=u.scrollable.y,l=Math.max(s-50,0),f=Math.min(s+u._bodyRectangle.height+50,u.virtualScrollHeight);if(a||c.top<f&&c.top+(c.height||c.lastHeight)>=l){var d,p,h=r.timeAxisViewModel.getSingleUnitInPixels("minute"),y=e.startDate,g=e.endDate||y,v=o.startMS,m=o.endMS,b=r.calculateMS(e),w=b.startMS,k=b.endMS,S=b.durationMS,O=w<v|(w>m)<<1,E=k>m|(k<=v)<<1,C=S/6e4,x=E?h*C:null,_=u.getCoordinateFromDate(k,{local:!0,respectExclusion:!0,isEnd:!0}),j=!1,D=!1;if(O?p=(w-v)/6e4*h:j=-1===(p=u.getCoordinateFromDate(w,{local:!0,respectExclusion:!0,isEnd:!1,snapToNextIncluded:-1!==_})),E?_=p+x:D=-1===_,D&&!j&&(_=u.getCoordinateFromDate(k,{local:!0,respectExclusion:!0,isEnd:!0,snapToNextIncluded:!0})),x>9999999&&(1===O?1===E?(p=-100,_=u.timeAxisColumn.width+100):p=_-9999999:1===E&&(_=p+9999999)),j&&D&&(p=u.getCoordinateFromDate(w,{local:!0,respectExclusion:!0,isEnd:!1,snapToNextIncluded:!0,max:k}))===(_=u.getCoordinateFromDate(k,{local:!0,respectExclusion:!0,isEnd:!0,snapToNextIncluded:!0,min:w})))return e.instanceMeta(u).excluded=!0,null;var R=(uJ(d={},r.view.scheduledEventName,e),uJ(d,"left",Math.min(p,_)),uJ(d,"width",Math.abs(_-p)),uJ(d,"start",y),uJ(d,"end",g),uJ(d,"startMs",w),uJ(d,"endMs",k),uJ(d,"rowId",t.id),uJ(d,"startsOutsideView",O),uJ(d,"endsOutsideView",E),uJ(d,"clippedStart",j),uJ(d,"clippedEnd",D),uJ(d,"row",c),d);return r.view.fillTicks&&(R.dataStartMs=R.start.getTime(),R.dataEndMs=R.end.getTime()),R.top=Math.max(0,u.resourceMargin),u.managedEventSizing&&(R.height=Math.max(u.rowManager.rowHeight-2*u.resourceMargin,1)),R}}}}},{key:"onTranslateRow",value:function(e){e.source}},{key:"onBeforeRowHeightChange",value:function(e){var t=this.view,n=e?e.height:t.rowHeight;this.cache.clear(),t.foregroundCanvas&&(t.element.classList.add("b-notransition"),t.foregroundCanvas.style.fontSize="".concat(n-2*t.resourceMargin,"px"),this._thisIsAUsedExpression(window.getComputedStyle(t.foregroundCanvas).fontSize),t.element.classList.remove("b-notransition")),t.milestoneWidth=null}},{key:"onBeforeTranslateRow",value:function(e){var t=e.row;this.cache.clearRow(t.id)}},{key:"onViewportResize",value:function(){this.lastUpdateScrollPos=null,this.update()}},{key:"positionTimeSpan",value:function(e,t,n){switch(this.view.eventPositionMode||"translate"){case"position":return e.style.left="".concat(t,"px"),void(e.style.top="".concat(n,"px"));case"translate":return void(e.style.transform="translate(".concat(t,"px,").concat(n,"px)"));case"translate3d":e.style.transform="translate3d(".concat(t,"px,").concat(n,"px,0)")}}},{key:"getTimeSpanDiv",value:function(e){var t,n=this.availableDivs,r=e.id,o=e.oldId;return"move"===this.view.eventScrollMode?(r&&(t=n.get(r)||n.get(o)),t&&!yJ(t)&&(t=null),t||(t=n.find(yJ)),t&&(n.remove(t),t.classList.remove("b-sch-released")),t):null}},{key:"releaseTimeSpanDiv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=e.style;t||e!==document.activeElement||n.view.focusElement.focus(),"move"===n.view.eventScrollMode?(n.availableDivs.add(e),!t&&yJ(e)&&e.classList.add("b-sch-released")):t||(r.opacity=0,r.pointerEvents="none",n.setTimeout((function(){e.remove(),r.opacity=1,r.pointerEvents=""}),200))}},{key:"updateElementId",value:function(e,t){var n=this.availableDivs;n.includes(e)&&(n.changeId(e,t),n.items.delete(e),n.items.add(e))}},{key:"triggerPaint",value:function(e,t){throw new Error("Implement in subclass")}},{key:"renderTimeSpan",value:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this,a=i.view,u=e.cls,c=e.id,s=t&&t.div,l=!1,f=!1,d=!1;o||s||!(s=i.getTimeSpanDiv(e))||(l=s.id!==c);var p=s&&s.classList.contains("b-sch-dragcreator-proxy");if(!s||l){if(l)(r=s.innerElement||s.firstElementChild).innerHTML="",r.style.cssText="",r.nextSibling&&(hJ.setStartAfter(r),hJ.setEndAfter(s.lastChild),hJ.deleteContents());else{var h=xn.createElement({tabIndex:0,children:[{className:"".concat(i.innerElCls)}]},!0),y=aJ(h,2);s=y[0],r=y[1],s.innerElement=r}s.id=c,e[a.scheduledEventName+"Id"]&&(s.dataset[a.scheduledEventName+"Id"]=e[a.scheduledEventName+"Id"]),xn.syncClassList(s,e.wrapperCls),s.parentNode!==a.foregroundCanvas&&a.foregroundCanvas.appendChild(s),xn.syncClassList(r,u),(e.style||e.internalStyle)&&(r.style.cssText=(e.internalStyle||"")+(e.style||"")),e.body&&r.appendChild(e.body.cloneNode(!0)),s.style.cssText="width:".concat(e.width,"px;height:").concat(e.height,"px;").concat(e.wrapperStyle||""),i.positionTimeSpan(s,e.left,e.top),f=!0}else{var g=n&&t.div?n:pJ;if(r=s.querySelector(".".concat(i.innerElCls))||s.firstElementChild,xn.syncClassList(s,e.wrapperCls),xn.syncClassList(r,e.cls),e.style?r.style.cssText=e.style:r.style.cssText="",e.body){var v=r.innerHTML,m=r.featureEls;m&&m.forEach((function(t){return e.body.appendChild(t)})),r.innerHTML="",r.appendChild(e.body.cloneNode(!0)),f=r.innerHTML!==v}document.activeElement&&document.activeElement.id===e.id&&s.classList.add(a.focusCls),d=!0,e.wrapperStyle&&(s.style.cssText+=e.wrapperStyle),(g.left!==e.left||g.top!==e.top||e.style)&&(i.positionTimeSpan(s,e.left,e.top),f=!0),(g.width!==e.width||e.style)&&(s.style.width="".concat(e.width,"px"),f=!0),(g.height!==e.height||e.style)&&(s.style.height="".concat(e.height,"px"),f=!0)}return t.div=s,t.eventEl=r,f&&(d&&p&&(d=!1,s.classList.remove("b-sch-dragcreator-proxy")),i.triggerPaint(e,s,d)),s}},{key:"cacheTimeSpanElement",value:function(e,t,n){var r=this.availableDivs,o=this.view,i=o.getEventRenderId(e,t);r.includes(i)||(n?(n.id=i,o.foregroundCanvas.appendChild(n)):n=xn.createElement({id:i,tabIndex:0,children:[{className:"".concat(this.innerElCls)}]}),r.add(n))}},{key:"updateRowTimeSpans",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"renderer",value:function(e){}},{key:"updateFromHorizontalScroll",value:function(e){var t=this,n=t.view,r=n.timeAxisSubGrid.width,o=n.getDateFromX(Math.max(0,e-100)),i=n.getDateFromX(e+r+100)||n.timeAxis.endDate,a=t.view.timeAxisSubGrid.scrollable.x,u=t.lastUpdateScrollPos;t.viewportStart=o&&o.getTime(),t.viewportEnd=i&&i.getTime(),(!u||Math.abs(a-u.x)>50)&&t.update(),n.timeView.range={startDate:o,endDate:i}}},{key:"update",value:function(){var e=this.view;this.lastUpdateScrollPos={x:e.timeAxisSubGrid.scrollable.x,y:e.scrollable.y};var t=!0,n=!1,r=void 0;try{for(var o,i=e.rowManager[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value.getCell(e.timeAxisColumn.id),u=tg.get(a),c=e.store.getById(u.id);c&&this.updateRowTimeSpans(u.row,c,!1,!0)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"getDateFromXY",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e[0];return n||(o=this.translateToScheduleCoordinate(o)),this.timeAxisViewModel.getDateFromPosition(o,t,r)}},{key:"translateToScheduleCoordinate",value:function(e){return e-this.column.subGridElement.getBoundingClientRect().left+this.view.scrollLeft}},{key:"onBeforeToggleNode",value:function(e){var t=e.record;if(t.children&&t.children.length)for(var n=this.view.store.getNext(t);n&&this.view.getRowFor(n);)this.cache.clearRow(n.id),n=this.view.store.getNext(n.id)}},{key:"onBeforeToggleAllNodes",value:function(){this.cache.clear()}},{key:"onRowRecordUpdate",value:function(e){var t=e.record,n=e.changes,r=void 0===n?{}:n;"id"in r&&this.cache.clearRow(r.id.oldValue,!1,!0),this.cache.clearRow(t.id,!1,!0)}},{key:"onRowRecordRemove",value:function(e){var t=this;e.records.forEach((function(e){return e.traverse((function(e){return t.cache.clearRow(e.id)}))}))}},{key:"getRowRegion",value:function(e,t,n){var r=this.view,o=this.column,i=r.getRowById(e.id);if(!i)return null;var a=i.getElement(o.region),u=this.timeAxis.startDate,c=this.timeAxis.endDate,s=t?xt.max(u,t):u,l=n?xt.min(c,n):c,f=r.getCoordinateFromDate(s),d=r.getCoordinateFromDate(l,!0,!0),p=i.top+r.verticalScroller.scrollTop,h=Math.min(f,d),y=p+a.offsetHeight;return new tr(h,p,Math.max(f,d)-h,y-p)}},{key:"getVisibleDateRange",value:function(){var e=this.view,t=e.timeAxisSubGrid.scrollable.x,n=e.timeAxisSubGrid.width;return{startDate:e.getDateFromX(t),endDate:e.getDateFromX(t+n)||e.timeAxis.endDate}}},{key:"getConnectorStartSide",value:function(e){}},{key:"getConnectorEndSide",value:function(e){}},{key:"column",get:function(){return this.view.timeAxisColumn}},{key:"timeAxis",get:function(){return this.view.timeAxis}},{key:"timeAxisViewModel",get:function(){return this.view.timeAxisViewModel}}])&&sJ(n.prototype,r),o&&sJ(n,o),t}(Wr(Y));function vJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}gJ._$name="BaseHorizontalMapper";var mJ=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.mapper=t,this.renderedEventsMap={},this.rowLayoutCache={}}var t,n,r;return t=e,(n=[{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;t.renderedEventsMap={},Object.keys(t.rowLayoutCache).forEach((function(n){return t.clearRow(n,!!e&&"immediate")}))}},{key:"addRenderedEvents",value:function(e,t){this.renderedEventsMap[e]=t}},{key:"addRenderedEvent",value:function(e){e.resourceId in this.renderedEventsMap&&((this.renderedEventsMap[e.resourceId]||(this.renderedEventsMap[e.resourceId]={}))[e.id]=e)}},{key:"getRenderedTimeSpan",value:function(e,t){var n=this.renderedEventsMap[e];return n&&n[t]}},{key:"clearRenderedTimeSpan",value:function(e,t){if(this.renderedEventsMap[e]){var n=this.renderedEventsMap[e][t];return delete this.renderedEventsMap[e][t],n}}},{key:"getRenderedEvents",value:function(e){return this.renderedEventsMap[e]}},{key:"clearRenderedEvents",value:function(e){this.renderedEventsMap[e]=null}},{key:"getTimeSpan",value:function(e,t){var n=this.getTimeSpanCache(e,t);return n?n.layoutCache:null}},{key:"getTimeSpanCache",value:function(e,t){var n=this.rowLayoutCache[t];return n&&n[e]}},{key:"clearEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this,i=o.getTimeSpan(e,t);if(!i)return null;i.div&&o.mapper.clearDiv(i.div,n,r),o.rowLayoutCache[t][e].layoutCache=null}},{key:"getRow",value:function(e){return this.rowLayoutCache[e]}},{key:"addRow",value:function(e,t){this.rowLayoutCache[e]=t}},{key:"clearRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.rowLayoutCache[e];o&&(r.renderedEventsMap[e]&&delete r.renderedEventsMap[e],Object.keys(o).forEach((function(o){"_allEvents"!==o&&"_rowHeight"!==o&&r.clearEvent(o,e,t,n)})),delete r.rowLayoutCache[e])}}])&&vJ(t.prototype,n),r&&vJ(t,r),e}();function bJ(e){return(bJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SJ(e,t){return!t||"object"!==bJ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OJ(e,t,n){return(OJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EJ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function EJ(e){return(EJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CJ(e,t){return(CJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}mJ._$name="HorizontalEventMapperCache";var xJ=function(e,t,n,r,o){if(e.fillTicks){var i=t.getTickFromDate(n);if(i>=0){o&&i===Math.round(i)&&i>0&&i--;var a=Math.floor(i);return t.getAt(a)[o?"endDate":"startDate"].getTime()}}return r},_J=function(e){function t(){return wJ(this,t),SJ(this,EJ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CJ(e,t)}(t,e),n=t,(r=[{key:"construct",value:function(e){this.scheduler=e,OJ(EJ(t.prototype),"construct",this).call(this,e),this.cache=new mJ(this)}},{key:"init",value:function(){OJ(EJ(t.prototype),"init",this).call(this),this.scheduler.on({togglegroup:this.onToggleGroup,rowremove:this.onRowRemove,prio:2,thisObj:this})}},{key:"clearDiv",value:function(e,t,n){var r=e.style;!t||n?this.releaseTimeSpanDiv(e,n):"immediate"!==t&&this.scheduler.enableEventAnimations?(e.id=ye.generateId("obsolete-event"),r.opacity=0,r.pointerEvents="none",this.setTimeout((function(){e.remove(),r.opacity=1,r.pointerEvents=""}),200)):e.remove()}},{key:"clearAllDivs",value:function(){this.availableDivs.forEach((function(e){return e.remove()})),this.availableDivs.clear()}},{key:"clearEvents",value:function(){this.cache.clear(!0)}},{key:"releaseEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.cache.getRenderedTimeSpan(e,t),i=o&&r.cache.getTimeSpan(o.eventId,e);return i&&i.div&&(r.releaseTimeSpanDiv(i.div,n),i.div=i.eventEl=null),r.cache.clearRenderedTimeSpan(e,t)}},{key:"getElementFromEventRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scheduler.eventStore.getResourcesForEvent(e)[0];if(t){var n=this.cache.getRenderedEvents(t.id);if(n){var r=this.scheduler.getEventRenderId(e,t),o=n[r],i=o&&o.layoutCache;return i&&i.eventEl}}}},{key:"getElementsFromEventRecord",value:function(e,t){var n=this;return t?[n.getElementFromEventRecord(e,t)]:n.scheduler.eventStore.getResourcesForEvent(e).reduce((function(t,r){var o=n.getElementFromEventRecord(e,r);return o&&t.push(o),t}),[])}},{key:"resolveRowRecord",value:function(e){var t=this.view,n=e instanceof Event?e.target:e,r=3===n.nodeType?n.parentElement:n,o=r.matches(t.eventSelector)&&r||xn.up(r,t.eventSelector);return o?t.getResourceRecordFromDomId(o.id):t.getRecordFromElement(r)}},{key:"toggleCls",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t){var o=this.cache.getTimeSpanCache(e.id,t.id),i=this.getElementFromEventRecord(e,t);o&&(o.cls[n]=r?1:0),i&&i.classList[r?"add":"remove"](n)}}},{key:"getResourceEventBox",value:function(e,t){var n=this.cache.getTimeSpan(e,t);if(n)return n}},{key:"getScheduleRegion",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this,i=o.view,a=o.column;if(e){var u=t&&o.getElementsFromEventRecord(t,e)[0];if(n=tr.from(i.getRowById(e.id).getElement("locked")),u){var c=tr.from(u,a.subGridElement);n.y=c.y,n.bottom=c.bottom}else n.y=n.y+i.resourceMargin,n.bottom=n.bottom-i.resourceMargin}else(n=tr.from(a.subGridElement).moveTo(null,0)).width=a.subGridElement.scrollWidth,n.y=n.y+i.resourceMargin,n.bottom=n.bottom-i.resourceMargin;var s=o.timeAxis.startDate,l=o.timeAxis.endDate,f=i.getDateConstraints(e,t)||{start:s,end:l},d=n.y,p=n.bottom,h=i.getCoordinateFromDate(xt.max(s,f.start)),y=i.getCoordinateFromDate(xt.min(l,f.end));return r||(h=o.translateToPageCoordinate(h),y=o.translateToPageCoordinate(y)),{top:d,right:Math.max(h,y),bottom:p,left:Math.min(h,y)}}},{key:"getResoureEventBox",value:function(e,t){return this.cache.getTimeSpan(e,t)}},{key:"layoutEventVerticallyStack",value:function(e){var t=this.scheduler,n=t.resourceMargin,r=t.rowHeight,o=t.barMargin;return 0===e?n:n+e*(r-2*n)+e*o}},{key:"layoutEventVerticallyPack",value:function(e,t){var n=this.scheduler,r=n.resourceMargin,o=n.rowHeight,i=n.barMargin,a=1/t,u=e*a,c=(o-2*r-(a-1)*i)*t;return{top:r+u*c+u*i,height:c}}},{key:"calculateMS",value:function(e){var t=this.view,n=xJ(t,this.timeAxis,e.startDate,e.startDateMS,!1),r=xJ(t,this.timeAxis,e.endDate,e.endDateMS,!0),o=r-n;if("default"!==t.milestoneLayoutMode&&0===o){var i=this.timeAxisViewModel.getSingleUnitInPixels("minute");switch(o=t.getMilestoneLabelWidth(e)*(1/i)*60*1e3,t.milestoneAlign){case"start":case"left":r=n+o;break;case"end":case"right":n=(r=n)-o;break;default:n=(r=n+o/2)-o}}return{startMS:n,endMS:r,durationMS:o}}},{key:"layoutEvents",value:function(e,t,n){var r=this,o=r.timeAxis,i=e.eventStore,a=t.id,u=i.getEventsForResource(a),c=i.isFiltered?u.filter((function(e){return i.indexOf(e)>-1})):u,s=(e.getEventsToRender(t,c)||[]).filter((function(e){return o.isTimeSpanInAxis(e)})).reduce((function(n,o){var i=e.generateTplData(o,t);return i?n.push(i):r.cache.getRenderedEvents(a)&&r.releaseEvent(a,e.getEventRenderId(o,t)),n}),[]);if(!s.length)return r.cache.clearRenderedEvents(a),!1;s.sort(e.horizontalEventSorterFn||r.eventSorter);var l=e.rowHeight,f=e.currentEventLayout,d=s.filter((function(e){return e.event.isEvent||e.event.isTask}));if("stack"===e.eventLayout){var p=f.applyLayout(d,t),h=e.rowHeight-2*e.resourceMargin;l=p*h+(p-1)*e.barMargin+2*e.resourceMargin}else"pack"===e.eventLayout&&f.applyLayout(d,t);var y=n.top;l!==n.height&&n.estimatedTop&&(y=n.top+n.height-l);var g={_allEvents:s,_rowHeight:l};return s.forEach((function(e){var t=r.cache.getTimeSpan(e.eventId,a),n=e.top;e.top+=y,e.rowTop=y,e.fillSize&&(e.height=l),e.layoutCache={layout:!0,div:t&&t.div,eventEl:t&&t.eventEl,width:e.width,height:e.height,start:e.left,end:e.left+e.width,relativeTop:n,top:e.top,relativeBottom:n+e.height,bottom:e.top+e.height},g[e.eventId]=e})),r.cache.addRow(a,g),!0}},{key:"eventSorter",value:function(e,t){var n=e.dataStartMs||e.startMs,r=e.dataEndMs||e.endMs,o=t.dataStartMs||t.startMs,i=t.dataEndMs||t.endMs;return n===o?r-i==0?e.event.name<t.event.name?-1:1:r>i?-1:1:n<o?-1:1}},{key:"onTranslateRow",value:function(e){var t=e.row;this.matchRowTranslation(t)}},{key:"renderEvent",value:function(e){var t=this,n=t.view.scheduledEventName+"Id",r=e[n],o=t.cache.getTimeSpan(r,e.resourceId),i=t.cache.getRenderedEvents(e.resourceId),a=e.event.instanceMeta(t.scheduler),u=t.renderTimeSpan(e,o,i[e.id],a.requireElement&&!a.fromDragProxy);e.assignment&&(u.dataset.assignmentId=e.assignment.id),r&&(u.dataset[n]=r),i[e.id]=e,a.requireElement&&(delete a.requireElement,delete a.fromDragProxy),t.scheduler.trigger("renderEvent",{eventRecord:e.event,resourceRecord:e.resource,assignmentRecord:e.assignment,element:u,tplData:e})}},{key:"triggerPaint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.scheduler;r.trigger(n?"eventRepaint":"eventPaint",{scheduler:r,eventRecord:e.event,resourceRecord:e.resource,element:t})}},{key:"isEventInView",value:function(e){return e.startMs===e.endMs?e.startMs<=this.viewportEnd&&e.endMs>this.viewportStart:e.startMs<this.viewportEnd&&e.endMs>this.viewportStart}},{key:"updateRowTimeSpans",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this,i=o.scheduler,a=t.id,u=o.cache.getRenderedEvents(a),c=o.cache.getRow(a);if((i.forceLayout||n||!c)&&!o.layoutEvents(i,t,e))return c&&c._rowHeight||0;if(!(c=o.cache.getRow(a)))return 0;var s=c._allEvents.filter((function(e){return e.event.instanceMeta(i).retainElement||e.assignment&&e.assignment.instanceMeta(i).retainElement||o.isEventInView(e)}));u||(u={},o.cache.addRenderedEvents(a,u));for(var l=0;l<s.length;l++){var f=s[l];if(i._firstRenderDone&&i._firstRenderDone(),!r&&!f.event.instanceMeta(i).retainElement||r&&!f.layoutCache.div){var d=i.isFirstRender&&f.top<i.bodyHeight&&i.useInitialAnimation;d&&(f.wrapperCls.add("b-first-render"),f.internalStyle="animation-delay: ".concat(f.row.index/20,"s;")),o.renderEvent(f),f.wrapperCls["b-first-render"]=null}}for(var p=Object.keys(u),h=function(e){var t=p[e];s.some((function(e){return e.id===t}))||o.releaseEvent(a,t)},y=0;y<p.length;y++)h(y);return c._rowHeight}},{key:"renderer",value:function(e){e.size.height=this.updateRowTimeSpans(e.row,e.record)}},{key:"matchRowTranslation",value:function(e){var t=this,n=t.scheduler.store.getAt(e.dataIndex).id,r=t.cache.getRow(n),o=r&&r._allEvents.length>0&&r._allEvents[0];if(o&&o.rowTop!==e.top){var i=e.top-o.rowTop;r._allEvents.forEach((function(n){var r=n.layoutCache;r.top+=i,r.bottom+=i,r.div&&t.positionTimeSpan(r.div,r.start,r.top),n.top+=i,n.rowTop=e.top}))}}},{key:"onTimeAxisViewModelUpdate",value:function(){this.cache.clear(),this.updateFromHorizontalScroll(this.scheduler.timeAxisSubGrid.scrollable.x)}},{key:"onRowRemove",value:function(e){var t=this,n=e.isCollapse,r=this.scheduler;n||r.runWithTransition((function(){r.rowManager.forEach((function(e){return t.matchRowTranslation(e)}))}))}},{key:"onToggleGroup",value:function(e){var t=this,n=e.groupRecord,r=e.collapse,o=this.scheduler.store,i=o.indexOf(n)+(r?1:n.groupChildren.length);for(r&&n.groupChildren.forEach((function(e){t.cache.clearRow(e.id)}));i<o.count;i++)this.cache.clearRow(o.getAt(i).id)}},{key:"onEventDataset",value:function(){this.cache.clear(!0)}},{key:"onEventAdd",value:function(e){var t=this,n=e.records,r=e.resources,o=this;n.forEach((function(e){var n=e.startDate,i=e.endDate;if(n&&i&&o.timeAxis.timeSpanInAxis(n,i)){var a=e.resources;a&&a.some((function(e){return o.scheduler.getRowFor(e)}))&&(e.instanceMeta(o.scheduler).requireElement=!0),r.forEach((function(e){t.cache.clearRow(e.id,!1,!0)}))}}))}},{key:"onEventRemove",value:function(e){e.records;var t=e.resources,n=this;t.forEach((function(e){return n.cache.clearRow(e.id,!0)}))}},{key:"onEventUpdate",value:function(e){var t=e.source,n=e.record,r=e.changes,o=void 0===r?{}:r,i=e.resources,a=this,u="resourceId"in o;if(u||i.length){if(u){var c=t.resourceStore.getById(o.resourceId.oldValue),s=n.resource,l=s&&t.resourceStore.isAvailable(s),f=n.resource&&Boolean(a.getTimeSpanRenderData(n,n.resource));if(c){var d=a.cache.getTimeSpan(n.id,c.id);d&&(l?(d.div&&s&&(d.div.id=a.scheduler.getEventRenderId(n,s)),a.cache.clearRow(c.id,!1,l)):a.cache.clearEvent(n.id,o.resourceId.oldValue,!0))}else l&&(n.instanceMeta(a.scheduler).requireElement=!0);l&&a.cache.clearRow(s.id,!1,f),a.scheduler.rowManager.resetAverageRowHeight()}else("startDate"in o||"endDate"in o)&&i.forEach((function(e){a.scheduler.eventStore.getEventsForResource(e).length>1&&a.scheduler.rowManager.resetAverageRowHeight()}));i.forEach((function(e){var t=a.getTimeSpanRenderData(n,e),r=Boolean(t&&a.isEventInView(t));a.cache.clearRow(e.id,!1,r)}))}}},{key:"onEventStoreIdChange",value:function(e){var t=e.oldValue,n=e.value,r=this.view;xn.forEachSelector(r.element,'[data-event-id="'.concat(t,'"]'),(function(e){e.id=r.getEventRenderId(n,r.getResourceIdFromDomNodeId(e.id))}))}},{key:"onEventClearChanges",value:function(){this.cache.clear()}},{key:"onEventFilter",value:function(){this.cache.clear()}},{key:"onEventRemoveAll",value:function(){this.view.rowManager.resetAverageRowHeight(),this.cache.clear(!0)}},{key:"getConnectorStartSide",value:function(e){return"left"}},{key:"getConnectorEndSide",value:function(e){return"right"}}])&&kJ(n.prototype,r),o&&kJ(n,o),t}(gJ);function jJ(e){return(jJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PJ(e,t){return!t||"object"!==jJ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TJ(e,t,n){return(TJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AJ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function AJ(e){return(AJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MJ(e,t){return(MJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_J._$name="HorizontalEventMapper";var IJ=function(e){function t(){return DJ(this,t),PJ(this,AJ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MJ(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{coordProp:"leftFactor",sizeProp:"widthFactor"}}}],(r=[{key:"applyLayout",value:function(e,n,r,o,i){var a=this;TJ(AJ(t.prototype),"applyLayout",this).call(this,e,(function(e,t,i,u){if("none"===a.scheduler.eventLayout)e.width=n-2*r,e.left+=r;else{e.widthFactor=u;var c=e.leftFactor=i.start+t*u,s=Math.round(1/u),l=c/u,f=n-2*r-o*(s-1);"mixed"===a.scheduler.eventLayout&&2===s?(e.left+=c*n/5+o,e.width=n-c*n/5-2*o,e.zIndex=5+l):(e.width=u*f,e.left+=c*f+r+o*l)}}))}}])&&RJ(n.prototype,r),o&&RJ(n,o),t}($K());function FJ(e){return(FJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function NJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BJ(e,t){return!t||"object"!==FJ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zJ(e,t,n){return(zJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VJ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function VJ(e){return(VJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WJ(e,t){return(WJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}IJ._$name="VerticalLayout";var $J={releaseElement:1,reuseElement:1},YJ={newElement:1,reuseOwnElement:1,reuseElement:1},GJ=Object.freeze([]),UJ=function(e){function t(){return NJ(this,t),BJ(this,VJ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WJ(e,t)}(t,e),n=t,o=[{key:"properties",get:function(){return{eventMap:{},resourceMap:{},releasedElements:{}}}}],(r=[{key:"construct",value:function(e){this.scheduler=e,this.timeAxisViewModel=e.timeAxisViewModel,this.verticalLayout=new IJ({scheduler:e}),zJ(VJ(t.prototype),"construct",this).call(this,{})}},{key:"init",value:function(){var e=this,t=e.scheduler;e.resourceColumns=t.timeAxisColumn.resourceColumns,t.element.classList.add("b-sch-vertical"),t.on({assignmentstorechange:e.onChangeAssignmentStore,resourcestorechange:e.onChangeResourceStore,thisObj:e}),e.resourceColumns.on({columnWidthChange:e.onResourceColumnWidthChange,thisObj:e}),e.resourceStore=t.resourceStore,e.assignmentStore=t.assignmentStore,e.initialized=!0,t.isPainted&&e.renderer(),e.resourceColumns.availableWidth=t.timeAxisSubGrid.width}},{key:"resolveRowRecord",value:function(e,t){var n=this.scheduler,r=e instanceof Event?e:null,o=r?r.target:e,i=r?[r.offsetX,r.offsetY]:t,a=3===o.nodeType?o.parentElement:o,u=xn.up(a,n.eventSelector);if(u)return n.resourceStore.getById(u.dataset.resourceId);if(!xn.up(o,".b-sch-timeaxis-cell"))return null;if(!i)throw new Error("Vertical mode needs coordinates to resolve this element. Can also be called with a browser \n                event instead of element to extract element and coordinates from");var c=Math.floor(i[0]/this.resourceColumns.columnWidth);return n.resourceStore.getAt(c)}},{key:"getElementFromEventRecord",value:function(e,t){var n=this.getElementsFromEventRecord(e,t);return n.length?n[0]:null}},{key:"getElementsFromEventRecord",value:function(e){var t=this,n=this.eventMap[e.id];return n?Object.values(n).map((function(e){return e.element&&e.element.querySelector(t.scheduler.eventInnerSelector)})):GJ}},{key:"toggleCls",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Mt.getPath(this.eventMap,"".concat(e.id,".").concat(t.id));o&&(o.tplData.cls[n]=r?1:0,o.element&&o.element.querySelector(this.scheduler.eventInnerSelector).classList[r?"add":"remove"](n))}},{key:"getDateFromXY",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e[1];return n||(o=this.translateToScheduleCoordinate(o)),this.timeAxisViewModel.getDateFromPosition(o,t,r)}},{key:"translateToScheduleCoordinate",value:function(e){return e-this.scheduler._bodyRectangle.y+this.scheduler.scrollTop}},{key:"translateToPageCoordinate",value:function(e){return e+this.scheduler._bodyRectangle.y-this.scheduler.scrollTop}},{key:"getResourceEventBox",value:function(e,t){var n=(Mt.getPath(this.eventMap,"".concat(e,".").concat(t))||{}).tplData;return n||(this.layoutResource(this.scheduler.resourceStore.getById(t)),n=Mt.getPath(this.eventMap,"".concat(e,".").concat(t)).tplData),n?{start:n.left,end:n.left+n.width,top:n.top,bottom:n.bottom}:null}},{key:"getScheduleRegion",value:function(e,t,n){var r=this.scheduler,o=tr.from(r.timeAxisSubGridElement);e&&(o.left=this.resourceStore.indexOf(e)*r.resourceColumnWidth,o.right=o.left+r.resourceColumnWidth);var i=r.timeAxis.startDate,a=r.timeAxis.endDate,u=r.getDateConstraints(e,t)||{start:i,end:a},c=r.getCoordinateFromDate(xt.max(i,u.start)),s=r.getCoordinateFromDate(xt.min(a,u.end));return n?(o.top=c,o.bottom=s):(o.top=this.translateToPageCoordinate(c),o.bottom=this.translateToPageCoordinate(s)),o}},{key:"getRowRegion",value:function(e,t,n){var r=this.scheduler,o=this.resourceStore.indexOf(e)*r.resourceColumnWidth,i=r.timeAxis.startDate,a=r.timeAxis.endDate,u=t?xt.max(i,t):i,c=n?xt.min(a,n):a,s=r.getCoordinateFromDate(u),l=r.getCoordinateFromDate(c,!0,!0),f=Math.min(s,l),d=Math.abs(s-l);return new tr(o,f,r.resourceColumnWidth,d)}},{key:"getVisibleDateRange",value:function(){var e=this.scheduler,t=e.scrollable.y,n=e.scrollable.clientHeight;return{startDate:e.getDateFromCoordinate(t),endDate:e.getDateFromCoordinate(t+n)||e.timeAxis.endDate}}},{key:"onResourceColumnWidthChange",value:function(e){var t=e.width,n=e.oldWidth,r=this,o=r.scheduler;r.resourceColumns.width=o.timeAxisColumn.width=r.resourceStore.count*t,r.clearAll(),o.runWithTransition((function(){return r.renderer()}),Math.abs(t-n)>30)}},{key:"onEventStoreChange",value:function(e){var t=e.action,n=e.records,r=e.record,o=e.replaced,i=e.changes,a=e.fromRelationUpdate,u=this,c=n||(r?[r]:[]),s=new Set,l=!0;switch(c.forEach((function(e){e.resources.forEach((function(e){return s.add(e.id)}))})),t){case"sort":case"group":case"move":return;case"dataset":u.clearAll(),l=!1;break;case"add":case"remove":case"updateMultiple":u.clearResources(s);break;case"replace":o.forEach((function(e){var t=LJ(e,2),n=t[0],r=t[1];n.resources.map((function(e){return s.add(e.id)})),r.resources.map((function(e){return s.add(e.id)}))})),u.clearResources(s);break;case"removeall":case"filter":u.clearAll();break;case"update":if(r.meta.removingResource)return;var f=!1;if(("startDate"in i||"endDate"in i||"duration"in i||"id"in i)&&(u.clearResources(s),f=!0),"resourceId"in i){if(a)return;s.add(i.resourceId.oldValue),u.clearResources(s),f=!0}f||Object.values(u.eventMap[r.id]).forEach((function(e){var t=e.tplData;e.tplData=u.scheduler.generateTplData(t.eventRecord,t.resourceRecord),e.tplData.left=t.left,e.tplData.width=t.width}))}u.scheduler.runWithTransition((function(){return u.renderer()}),l)}},{key:"onChangeResourceStore",value:function(e){var t=e.newResourceStore,n=this;n.firstResource=n.lastResource=null,n.clearAll(),n.resourceStore=t,n.renderer()}},{key:"onResourceStoreChange",value:function(e){var t=e.source,n=e.action,r=e.records,o=e.record,i=this,a=r||(o?[o]:[]);switch(i.firstResource=i.lastResource=null,n){case"add":for(var u=a.reduce((function(e,n){return Math.min(e,t.indexOf(n))}),t.count);u<t.count;u++)i.clearResources([t.getAt(u).id]);return;case"remove":case"removeall":return void i.clearAll();case"replace":case"update":break;case"filter":i.clearAll()}i.scheduler.runWithTransition((function(){return i.renderer()}),!0)}},{key:"onResourceStoreRefresh",value:function(e){var t=e.action,n=this;if("group"===t)throw new Error("Grouping of resources not supported in vertical mode");"sort"===t&&(n.firstResource=n.lastResource=null,n.clearAll(),n.scheduler.runWithTransition((function(){return n.renderer()})))}},{key:"onChangeAssignmentStore",value:function(e){var t=e.newAssignmentStore;this.assignmentStore=t}},{key:"onAssignmentStoreChange",value:function(e){var t=e.action,n=e.records,r=e.replaced,o=e.record,i=e.changes,a=this,u=new Set((n||(o?[o]:[])).map((function(e){return e.resourceId})));switch(t){case"add":case"remove":case"updateMultiple":a.clearResources(u);break;case"filter":case"removeall":a.clearAll();break;case"replace":r.forEach((function(e){var t=LJ(e,2),n=t[0],r=t[1];u.add(n.resourceId),u.add(r.resourceId)})),a.clearResources(u);break;case"update":"resourceId"in i&&u.add(i.resourceId.oldValue),a.clearResources(u)}a.scheduler.runWithTransition((function(){return a.renderer()}),!0)}},{key:"refreshRows",value:function(e){e&&(this.clearAll(),this.scheduler.refreshFromRerender=!1)}},{key:"updateFromHorizontalScroll",value:function(e){e!==this.prevScrollLeft&&(this.renderer(),this.prevScrollLeft=e)}},{key:"updateFromVerticalScroll",value:function(){this.renderer()}},{key:"scrollResourceIntoView",value:function(e,t){var n=this.scheduler,r=n.resourceStore.indexOf(e)*n.resourceColumnWidth;return n.scrollHorizontallyTo(r,t)}},{key:"onViewportResize",value:function(e){this.resourceColumns.availableWidth=e,this.renderer()}},{key:"onLocaleChange",value:function(){this.clearAll()}},{key:"onDragAbort",value:function(){}},{key:"onBeforeRowHeightChange",value:function(){}},{key:"onTimeAxisViewModelUpdate",value:function(){}},{key:"clearEvents",value:function(){}},{key:"updateElementId",value:function(){}},{key:"releaseTimeSpanDiv",value:function(){}},{key:"getTimeSpanRenderData",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this,r=n.scheduler,o=e.startDate,i=e.endDate,a=r.getCoordinateFromDate(o),u=n.resourceStore.indexOf(t)*r.resourceColumnWidth,c=r.resourceColumnWidth-2*r.resourceMargin,s=o.getTime(),l=i.getTime(),f=r.getCoordinateFromDate(i),d=f-a;return-1===f&&(f=a+(d=Math.round((l-s)*r.timeAxisViewModel.getSingleUnitInPixels("ms")))),{eventRecord:e,resourceRecord:t,left:u,top:a,bottom:f,width:c,height:d,startDate:o,endDate:i,startDateMS:s,endDateMS:l,start:o,end:i,startMs:s,endMs:l}}},{key:"eventSorter",value:function(e,t){var n=e.dataStartMs||e.startDateMS,r=e.dataEndMs||e.endDateMS,o=t.dataStartMs||t.startDateMS,i=t.dataEndMs||t.endDateMS;return n===o?r-i==0?e.eventRecord.name<t.eventRecord.name?-1:1:r>i?-1:1:n<o?-1:1}},{key:"layoutResource",value:function(e){var t=this,n=t.scheduler,r=t.resourceMap[e.id]={},o=n.resourceStore.indexOf(e),i=n.eventStore.getEventsForResource(e),a=(i=n.getEventsToRender(e,i)).reduce((function(i,a){var u=n.generateTplData(a,e),c={tplData:u};return Mt.setPath(t.eventMap,"".concat(u.eventId,".").concat(e.id),c),r[u.eventId]=c,u.fillSize?(u.left=o*n.resourceColumnWidth,u.width=n.resourceColumnWidth):i.push(u),i}),[]);return a.sort(t.eventSorter),t.verticalLayout.applyLayout(a,n.resourceColumnWidth,n.resourceMargin,n.barMargin,o),r}},{key:"renderEvent",value:function(e){var t=e.tplData,n=t.resourceRecord,r=t.eventRecord,o={className:t.wrapperCls,tabIndex:"0",children:[{className:t.cls,style:(t.internalStyle||"")+(t.style||""),html:t.body.cloneNode(!0),compareHtml:t.eventContent}],style:{transform:"translate(".concat(t.left,"px, ").concat(t.top,"px)"),height:t.height,width:t.width,zIndex:t.zIndex},dataset:{resourceId:n.id,eventId:t.eventId,syncId:t.assignment?t.assignment.id:t.eventId},elementData:e,retainElement:r.instanceMeta(this.scheduler).retainElement};return t.assignment&&(o.dataset.assignmentId=t.assignment.id),o}},{key:"renderResource",value:function(e){var t=this,n=t.topDateMS,r=t.bottomDateMS,o=[],i=t.resourceMap[e.id];for(var a in i||(i=t.layoutResource(e)),i){var u=i[a];u.tplData.endDateMS>=n&&u.tplData.startDateMS<=r&&o.push(t.renderEvent(u))}return o}},{key:"renderer",value:function(){var e=this,t=e.scheduler,n=t.resourceStore,r=e.resourceRange,o=r.firstResource,i=r.lastResource,a=e.dateRange,u=a.topDate,c=a.bottomDate,s=[],l=[];if(e.initialized){if(xt.isEqual(u,e.topDate)&&xt.isEqual(c,e.bottomDate)||(e.topDate=u,e.bottomDate=c,e.topDateMS=u.getTime(),e.bottomDateMS=c.getTime(),e.timeView.range={startDate:u,endDate:c}),-1!==o&&-1!==i)for(var f=o;f<=i;f++)s.push.apply(s,e.renderResource(n.getAt(f)));t.getForegroundDomConfigs(l),s.push.apply(s,l),Ib.sync({domConfig:{onlyChildren:!0,children:s},targetElement:t.foregroundCanvas,syncIdField:"syncId",callback:function(e){var n=e.action,r=e.domConfig,o=e.lastDomConfig,i=e.targetElement;if(r&&r.className&&r.className[t.eventCls+"-wrap"]){var a=YJ[n];if($J[n]&&o&&!o.isReleased){var u=o.elementData.tplData,c={tplData:u,assignmentRecord:u.assignment,eventRecord:u.eventRecord,resourceRecord:u.resourceRecord,targetElement:i};t.trigger("releaseEvent",c)}if(a){var s=r.elementData.tplData,l={tplData:s,assignmentRecord:s.assignment,eventRecord:s.eventRecord,resourceRecord:s.resourceRecord,targetElement:i};i.elementData.element=i,l.reusingElement="reuseElement"===n,t.trigger("renderEvent",l)}"none"===n&&(r.elementData.element=i)}}}),e.firstResource===o&&e.lastResource===i||(e.resourceColumns.range={firstResource:o,lastResource:i},e.firstResource=o,e.lastResource=i)}}},{key:"clearResources",value:function(e){var t=this;e.forEach((function(e){t.resourceMap[e]&&(Object.keys(t.resourceMap[e]).forEach((function(n){delete t.eventMap[n][e]})),delete t.resourceMap[e])}))}},{key:"clearAll",value:function(){this.resourceMap={},this.eventMap={}}},{key:"resourceStore",set:function(e){var t=this;t.resourceStoreDetacher&&t.resourceStoreDetacher(),t.resourceColumns.resourceStore=t._resourceStore=e,t.resourceStoreDetacher=e.on({change:t.onResourceStoreChange,refresh:t.onResourceStoreRefresh,thisObj:t,prio:1})},get:function(){return this._resourceStore}},{key:"timeView",get:function(){return this.scheduler.timeView}},{key:"assignmentStore",set:function(e){var t=this;t.assignmentStoreDetacher&&t.assignmentStoreDetacher(),t._assignmentStore=e,e&&(t.assignmentStoreDetacher=e.on({change:t.onAssignmentStoreChange,thisObj:t}))},get:function(){return this._assignmentStore}},{key:"resourceRange",get:function(){var e=this.scheduler,t=this.resourceStore;return t&&t.count?{firstResource:Math.max(Math.floor(e.scrollLeft/e.resourceColumnWidth)-1,0),lastResource:Math.min(Math.floor((e.scrollLeft+e.timeAxisSubGrid.width)/e.resourceColumnWidth)+1,t.count-1)}:{firstResource:-1,lastResource:-1}}},{key:"dateRange",get:function(){var e=this.scheduler,t=e.getDateFromCoordinate(Math.min(e.scrollTop+e.bodyHeight+e.tickSize-1,(e.virtualScrollHeight||e.scrollable.scrollHeight)-1));return t||(t=e.timeAxis.last.endDate),{topDate:e.getDateFromCoordinate(Math.max(e.scrollTop-e.tickSize,0)),bottomDate:t}}}])&&HJ(n.prototype,r),o&&HJ(n,o),t}(Wr(Y));function qJ(e){return(qJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZJ(e,t){return!t||"object"!==qJ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JJ(e){return(JJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QJ(e,t){return(QJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}UJ._$name="VerticalEventMapper";var eQ=function(e){function t(){return XJ(this,t),ZJ(this,JJ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QJ(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"VerticalTimeAxis"}},{key:"defaultConfig",get:function(){return{cls:"b-verticaltimeaxis",sizeProperty:"height",positionProperty:"top",wrapText:!0}}}],(r=[{key:"height",get:function(){return this.size}}])&&KJ(n.prototype,r),o&&KJ(n,o),t}(EU);function tQ(e){return(tQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oQ(e,t){return!t||"object"!==tQ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iQ(e,t,n){return(iQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aQ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function aQ(e){return(aQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uQ(e,t){return(uQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}eQ._$name="VerticalTimeAxis";var cQ=function(e){function t(){return nQ(this,t),oQ(this,aQ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uQ(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"verticalTimeAxis"}},{key:"defaults",get:function(){return{draggable:!1,groupable:!1,hideable:!1,showColumnPicker:!1,filterable:!1,sortable:!1,searchable:!1,editor:!1,enableCellContextMenu:!1,tooltipRenderer:!1,cellCls:"b-verticaltimeaxiscolumn"}}}],(r=[{key:"construct",value:function(e){var n=this;iQ(aQ(t.prototype),"construct",this).apply(this,arguments),n.timeAxisViewModel=e.timeline.timeAxisViewModel,n.view=new eQ({model:n.timeAxisViewModel,client:e.timeline})}},{key:"renderer",value:function(e){var t=e.cellElement,n=e.size;this.view.render(t),n.height=this.view.height}}])&&rQ(n.prototype,r),o&&rQ(n,o),t}(XS);function sQ(e){return(sQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dQ(e,t){return!t||"object"!==sQ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pQ(e,t,n,r){return(pQ="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=gQ(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function hQ(e,t,n,r,o){if(!pQ(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function yQ(e,t,n){return(yQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=gQ(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function gQ(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vQ(e)););return e}function vQ(e){return(vQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mQ(e,t){return(mQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(cQ),cQ._$name="VerticalTimeAxisColumn";var bQ=function(e){function t(){return lQ(this,t),dQ(this,vQ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mQ(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"SchedulerBase"}},{key:"defaultConfig",get:function(){return{mode:"horizontal",eventCls:"b-sch-event",timeCellCls:"b-sch-timeaxis-cell",timeCellSelector:".b-sch-timeaxis-cell",scheduledEventName:"event",overScheduledEventClass:"b-sch-event-hover",allowOverlap:!0,rowHeight:60,milestoneCharWidth:10,milestoneAlign:"center",milestoneMinWidth:40,crudManagerClass:yH}}}],(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;yQ(vQ(t.prototype),"construct",this).call(this,e),n.createEventOnDblClick&&n.on("scheduledblclick",n.onSchedulerDblClick)}},{key:"onLocaleChange",value:function(){this.currentOrientation.onLocaleChange(),yQ(vQ(t.prototype),"onLocaleChange",this).call(this)}},{key:"onSchedulerDblClick",value:function(e){var t=e.date,n=e.resourceRecord,r=e.row;this.readOnly||n.meta.specialRow||this.internalAddEvent(t,n,r)}},{key:"onColumnsChanged",value:function(e){e.action;var n=e.changes,r=e.record;r===this.timeAxisColumn&&"width"in n&&this.updateCanvasSize(),yQ(vQ(t.prototype),"onColumnsChanged",this).apply(this,arguments)}},{key:"onVerticalScroll",value:function(e){var t=e.scrollTop;this.currentOrientation.updateFromVerticalScroll(t)}},{key:"onEventCreated",value:function(e){}},{key:"onElementKeyDown",value:function(e){yQ(vQ(t.prototype),"onElementKeyDown",this).call(this,e)}},{key:"onElementKeyUp",value:function(e){yQ(vQ(t.prototype),"onElementKeyUp",this).call(this,e)}},{key:"onElementMouseOver",value:function(e){yQ(vQ(t.prototype),"onElementMouseOver",this).call(this,e)}},{key:"onElementMouseOut",value:function(e){yQ(vQ(t.prototype),"onElementMouseOut",this).call(this,e)}},{key:"getEventMenuItems",value:function(){}},{key:"getScheduleMenuItems",value:function(){}},{key:"internalAddEvent",value:function(e,t,n){var r=this,o=[t],i=new r.eventStore.modelClass({startDate:e,endDate:xt.add(e,1,r.timeAxis.unit)});if(r.onEventCreated(i),r.eventEdit){var a=r.currentOrientation.getTimeSpanRenderData(i,t),u=xn.createElement({parent:r.foregroundCanvas,className:"b-sch-dragcreator-proxy",style:"width:".concat(a.width,"px;height:").concat(a.height,"px")});return xn.setTranslateXY(u,a.left,(n&&n.top||0)+a.top),void r.editEvent(i,t,u)}!1!==r.trigger("beforeEventAdd",{eventRecord:i,resourceRecords:o,resources:o})&&(r.eventStore.add(i),r.eventStore.assignEventToResource(i,t))}},{key:"isDateRangeAvailable",value:function(e,t,n,r){return this.eventStore.isDateRangeAvailable(e,t,n,r)}},{key:"timeAxisViewModel",set:function(e){hQ(vQ(t.prototype),"timeAxisViewModel",e,this,!0),this.eventStore&&(this.timeAxisViewModel.eventStore=this.eventStore)},get:function(){return yQ(vQ(t.prototype),"timeAxisViewModel",this)}},{key:"store",get:function(){return yQ(vQ(t.prototype),"store",this)},set:function(e){hQ(vQ(t.prototype),"store",e,this,!0)}},{key:"isHorizontal",get:function(){return"horizontal"===this.mode}},{key:"isVertical",get:function(){return"vertical"===this.mode}},{key:"mode",get:function(){return this._mode},set:function(e){var t=this;t._mode=e,t[e]||("horizontal"===e?(t.horizontal=new _J(t),t.isPainted&&t.horizontal.init(),t.un("scroll",t.onVerticalScroll,t)):"vertical"===e&&(t.zoomOnTimeAxisDoubleClick=t.zoomOnMouseWheel=!1,t.vertical=new UJ(t),t.rendered&&t.vertical.init(),t.on("scroll",t.onVerticalScroll,t)))}},{key:"currentOrientation",get:function(){return this[this.mode]}}])&&fQ(n.prototype,r),o&&fQ(n,o),t}(Xs(eK).mixes(xM,(function(e){return function(e){function t(){return iK(this,t),uK(this,cK(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sK(e,t)}(t,e),n=t,(r=[{key:"getElementFromAssignmentRecord",value:function(e){return this.currentOrientation.getElementFromEventRecord(e.event,e.resource)}},{key:"getElementFromEventRecord",value:function(e,t){return this.currentOrientation.getElementFromEventRecord(e,t)}},{key:"getElementsFromEventRecord",value:function(e,t){return this.currentOrientation.getElementsFromEventRecord(e,t)}},{key:"getEventIdFromDomNodeId",value:function(e){var t=e.substring(this.eventPrefix.length).split("-")[0];return t&&t.replace(/\._\./g,"-")}},{key:"getEventRecordFromDomId",value:function(e){return e=this.getEventIdFromDomNodeId(e),this.eventStore.getById(e)}},{key:"getResourceIdFromDomNodeId",value:function(e){var t=e.substring(this.eventPrefix.length).split("-")[1];return t&&t.replace(/\._\./g,"-")}},{key:"getResourceRecordFromDomId",value:function(e){return e=this.getResourceIdFromDomNodeId(e),this.resourceStore.getById(e)}},{key:"resolveResourceRecord",value:function(e,t){return this.currentOrientation.resolveRowRecord(e,t)}},{key:"resolveEventRecord",value:function(e){if(e=xn.up(e,this.eventSelector)){if(e.dataset.eventId)return this.eventStore.getById(e.dataset.eventId);if(e.dataset.assignmentId)return this.assignmentStore.getById(e.dataset.assignmentId).event}return null}},{key:"resolveTimeSpanRecord",value:function(e){return this.resolveEventRecord(e)}},{key:"resolveAssignmentRecord",value:function(e){var t=this.eventStore.assignmentStore,n=null;if(t){var r=xn.up(e,this.eventSelector),o=this.resolveEventRecord(r),i=this.resolveResourceRecord(r);o&&i&&(n=t.getAssignmentForEventAndResource(o,i))}return n}},{key:"isRowVisible",value:function(e){return this.store.indexOf(e)>=0}},{key:"getMilestoneLabelWidth",value:function(e){var t=this,n=t.milestoneLayoutMode;if("measure"===n){var r=t.milestoneMeasureElement||(t.milestoneMeasureElement=xn.createElement({className:"b-sch-event-wrap b-milestone-wrap b-measure",children:[{className:"b-sch-event b-milestone",html:"<label></label>"}],parent:t.foregroundCanvas}));return r.firstElementChild.firstElementChild.innerHTML=e.name,r.offsetWidth}return"estimate"===n?Math.max(e.name.length*t.milestoneCharWidth,t.milestoneMinWidth):"data"===n?Math.max(e.milestoneWidth,t.milestoneMinWidth):0}},{key:"milestoneLayoutMode",set:function(e){this._milestoneLayoutMode=e,this.element.classList["default"!==e?"add":"remove"]("b-sch-layout-milestones"),this.refresh()},get:function(){return this._milestoneLayoutMode}},{key:"milestoneAlign",set:function(e){this._milestoneAlign=e,this.refresh()},get:function(){return this._milestoneAlign}},{key:"milestoneCharWidth",set:function(e){this._milestoneCharWidth=e,this.refresh()},get:function(){return this._milestoneCharWidth}},{key:"widgetClass",get:function(){}}])&&aK(n.prototype,r),o&&aK(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return fK(this,t),pK(this,yK(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gK(e,t)}(t,e),n=t,(r=[{key:"getTimeSpanMouseEventParams",value:function(e,t){return{eventRecord:this.resolveEventRecord(e),resourceRecord:this.resolveResourceRecord(e),assignmentRecord:this.resolveAssignmentRecord(e),eventElement:e,event:t}}},{key:"getScheduleMouseEventParams",value:function(e,t){return{resourceRecord:this.isVertical?this.resolveResourceRecord(t):this.store.getById(e.id)}}},{key:"onElementKeyDown",value:function(e){hK(yK(t.prototype),"onElementKeyDown",this).call(this,e),this.selectedEvents.length&&this.trigger(this.scheduledEventName+"KeyDown",{eventRecord:this.selectedEvents})}},{key:"onElementKeyUp",value:function(e){hK(yK(t.prototype),"onElementKeyUp",this).call(this,e),this.selectedEvents.length&&this.trigger(this.scheduledEventName+"KeyUp",{eventRecord:this.selectedEvents})}},{key:"widgetClass",get:function(){}}])&&dK(n.prototype,r),o&&dK(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return mK(this,t),wK(this,SK(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OK(e,t)}(t,e),n=t,(r=[{key:"construct",value:function(e){kK(SK(t.prototype),"construct",this).call(this,e),this.hasFeature("eventDragCreate")&&this.on({dragcreateend:this.internalOnDragCreateEnd,thisObj:this})}},{key:"internalOnDragCreateEnd",value:function(e){var t=e.newEventRecord,n=e.resourceRecord,r=this;if(!r.hasFeature("eventEdit")||r.features.eventEdit.disabled){var o=n?[n]:[];!1!==r.trigger("beforeEventAdd",{eventRecord:t,resources:o,resourceRecords:o})&&(r.onEventCreated(t),r.eventStore.add(t),t.assign(n))}}},{key:"eventEditor",get:function(){return this._eventEditor},set:function(e){this._eventEditor=e}},{key:"widgetClass",get:function(){}}])&&bK(n.prototype,r),o&&bK(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return sZ(this,t),fZ(this,yZ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gZ(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{events:null,eventStore:null,resources:null,resourceStore:null,assignments:null,assignmentStore:null,dependencies:null,dependencyStore:null,timeRanges:null,resourceTimeRanges:null,store:null,startParamName:"startDate",endParamName:"endDate",passStartEndParameters:!1,removeUnassignedEvent:!0}}}],(r=[{key:"onStoreDataChange",value:function(e){e.source,e.action,this.currentOrientation.clearEvents(),pZ(yZ(t.prototype),"onStoreDataChange",this).apply(this,arguments)}},{key:"refreshFromRowOnStoreAdd",value:function(e,n){var r=this,o=n.isExpand,i=arguments;this.runWithTransition((function(){var n;return(n=pZ(yZ(t.prototype),"refreshFromRowOnStoreAdd",r)).call.apply(n,[r,e].concat(cZ(i)))}),!o)}},{key:"onStoreAdd",value:function(e){var n=e.source,r=e.records,o=e.isChild,i=this,a=i.rowManager;if(!o||r[0].ancestorsExpanded(n)){a.calculateRowCount(!1,!0,!0);var u=Math.max(a.topIndex+a.rowCount,Math.min(a.visibleRowCount,n.count));r=r.sort((function(e,t){return n.indexOf(e)-n.indexOf(t)}));var c=n.indexOf(r[0]);if(c<u)for(var s=c=Math.max(c,a.topIndex);s<u;s++)i.currentOrientation.onRowRecordUpdate({record:n.getAt(s)});else a.estimateTotalHeight();pZ(yZ(t.prototype),"onStoreAdd",this).apply(this,arguments)}}},{key:"onStoreUpdateRecord",value:function(){var e;(e=this.currentOrientation).onRowRecordUpdate.apply(e,arguments),pZ(yZ(t.prototype),"onStoreUpdateRecord",this).apply(this,arguments)}},{key:"onStoreRemove",value:function(){var e;(e=this.currentOrientation).onRowRecordRemove.apply(e,arguments),pZ(yZ(t.prototype),"onStoreRemove",this).apply(this,arguments)}},{key:"onStoreRemoveAll",value:function(){this.currentOrientation.clearEvents(),pZ(yZ(t.prototype),"onStoreRemoveAll",this).call(this)}},{key:"doDestroy",value:function(){pZ(yZ(t.prototype),"doDestroy",this).call(this);var e=this;e.destroyStores&&e.constructor.destroy(e.assignmentStore,e.resourceStore,e.dependencyStore,e.eventStore)}},{key:"getResourceStoreListenerConfig",value:function(){return{}}},{key:"getEventStoreListenerConfig",value:function(){return{thisObj:this,detachable:!0,change:"onInternalEventStoreChange",clearchanges:"onEventClearChanges",beforecommit:"onEventBeforeCommit",commit:"onEventCommit",beforeRemove:"onEventStoreBeforeRemove",refresh:"onEventStoreRefresh",exception:"onEventException",idchange:"onEventIdChange"}}},{key:"getAssignmentStoreListenerConfig",value:function(){var e=this;return{thisObj:e,refresh:e.onAssignmentRefresh,update:e.onAssignmentUpdate,add:e.onAssignmentAdd,beforeRemove:{fn:e.onBeforeAssignmentRemove,prio:-1e3},remove:e.onAssignmentRemove,filter:e.onAssignmentFilter,removeall:e.onAssignmentRemoveAll}}},{key:"getDependencyStoreListenerConfig",value:function(){return{}}},{key:"onEventIdChange",value:function(e){this.currentOrientation.onEventStoreIdChange&&this.currentOrientation.onEventStoreIdChange(e)}},{key:"onInternalEventStoreChange",value:function(e){var t=this;if(t._mode)if(t.isVertical)t.currentOrientation.onEventStoreChange(e);else{var n=function(){var n,r,o=t.currentOrientation,i=e.source,a=t.rowManager,u=t.resourceStore,c=e.action,s=e.changes,l=e.isCollapse,f=e.records||(e.record?[e.record]:null),d=[],p=new Set,h=!1;if(!t.isPainted)return{v:void 0};if(l||"update"===c&&f.length&&f[0].meta.removingResource)return{v:void 0};if(("filter"!==c||!t.hasFeature("resourceTimeRanges"))&&mZ[c]&&f){if(s&&"resourceId"in s&&null!=s.resourceId.oldValue){var y=u.getById(s.resourceId.oldValue),g=y&&a.getRowFor(y);g&&(d.push(y),p.add(g))}for(r=0,n=f.length;r<n;r++)d.push.apply(d,cZ(i.getResourcesForEvent(f[r]).filter((function(e){if(e&&t.resourceStore.isAvailable(e.id)){var n=a.getRowFor(e);if(n)return p.add(n),!0}return!1}))));if(d.length){if(p.size>1)p=new Set(cZ(p).sort((function(e,t){return e.dataIndex-t.dataIndex})));else if(!p.size)return{v:void 0}}else if("filter"!==c||f.length)return a.estimateTotalHeight(),{v:void 0};e.resources=d}switch(c){case"dataset":if(o.onEventDataset(),!i.count)return{v:void 0};break;case"add":o.onEventAdd(e),h=!0;break;case"update":o.onEventUpdate(e),h=!0;break;case"remove":o.onEventRemove(e),h=!0;break;case"removeall":o.onEventRemoveAll();break;case"filter":o.onEventFilter(e);break;case"clearchanges":o.onEventClearChanges(e)}t.runWithTransition((function(){p.size?a.renderRows(p):a.renderFromRow()}),h)}();if("object"===uZ(n))return n.v}}},{key:"onEventStoreRefresh",value:function(e){"batch"===e.action&&this.rowManager.rowCount&&(this.currentOrientation.onEventDataset&&this.currentOrientation.onEventDataset(),this.refresh())}},{key:"onEventStoreBeforeRemove",value:function(e){var t=e.records,n=this;if(n.activeEvent&&t.includes(n.activeEvent)){var r;if("key"===di.lastInteractionType)for(var o=0,i=t.length;o<i&&(!r||t.includes(r));o++)if(n.eventStore.getResourcesForEvent(t[o]).length){var a=t[o],u=a.assignments&&a.assignments.length?a.assignments[0]:a;r=n.getNext(u,!0)||n.getPrevious(u,!0)}r?n.navigateTo(r):n.element.focus()}}},{key:"onEventCommit",value:function(e){var t=this,n=e.changes,r=[].concat(cZ(n.added),cZ(n.modified)).map((function(e){return t.eventStore.getResourcesForEvent(e)}));r=Array.prototype.concat.apply([],r),new Set(r).forEach((function(e){return t.repaintEventsForResource(e)}))}},{key:"onEventBeforeCommit",value:function(e){var t=this,n=e.changes;[].concat(cZ(n.added),cZ(n.modified)).forEach((function(e){return t.getElementsFromEventRecord(e).forEach((function(e){return e.classList.add(t.committingCls)}))}))}},{key:"onEventException",value:function(e){var t=this;if("commit"===e.action){var n=this.eventStore.changes;[].concat(cZ(n.added),cZ(n.modified),cZ(n.removed)).forEach((function(e){return t.repaintEvent(e)}))}}},{key:"onEventClearChanges",value:function(){this.refresh()}},{key:"onAssignmentRefresh",value:function(e){!this.isHorizontal||"dataset"!==e.action&&"batch"!==e.action||this.refresh()}},{key:"onAssignmentAdd",value:function(e){var t=this,n=e.records;this.isHorizontal&&n.forEach((function(e){var n=e.resource;n&&t.repaintEventsForResource(n)}))}},{key:"onAssignmentUpdate",value:function(e){var t=e.record,n=e.changes;if(this.isHorizontal){var r,o=this.rowManager,i=this.currentOrientation.cache,a="resourceId"in n&&n.resourceId.oldValue,u=t.resourceId,c=vZ;null!=a&&(r=o.getRowFor(a))&&(i.clearRow(a),c=Math.min(c,r.index)),u&&(r=o.getRowFor(u))&&(i.clearRow(u),c=Math.min(c,r.index)),c!==vZ&&o.renderFromRow(o.rows[c])}}},{key:"onBeforeAssignmentRemove",value:function(e){var t=e.source,n=e.records,r=e.doRemoveLastEvent;if(!t.isRemovingEvent){var o,i=this,a=n.reduce((function(e,t){var n=t.event;return!n||n.placeHolder||e.includes(n)||e.push(n),e}),[]);if(i.activeEvent&&a.includes(i.activeEvent)){if("key"===di.lastInteractionType)for(var u=0,c=n.length;u<c&&(!o||n.includes(o));u++)if(i.eventStore.getResourcesForEvent(n[u].event).length){var s=n[u],l=s.assignments&&s.assignments.length?s.assignments[0]:s;o=i.getNext(l)||i.getPrevious(l)}o?i.navigateTo(o):i.element.focus()}if(i.removeUnassignedEvent&&!i.isRemoving&&!1!==r&&(!t.stm||!t.stm.isRestoring)){var f=a.reduce((function(e,t){var r=t.assignments?t.assignments.length:0;return(r-=n.filter((function(e){return e.event===t})).length)||e.push(t),e}),[]);i.eventStore.remove(f)}}}},{key:"onAssignmentRemove",value:function(e){var t=this,n=e.records;this.isHorizontal&&n.forEach((function(e){var n=e.resource;n&&t.repaintEventsForResource(n)}))}},{key:"onAssignmentRemoveAll",value:function(){this.isHorizontal&&this.refresh()}},{key:"onAssignmentFilter",value:function(){this.isHorizontal&&this.refresh()}},{key:"applyStartEndParameters",value:function(e){var t=e.source,n=e.params,r=t.modelClass.fieldMap.startDate.dateFormat;n[this.startParamName]=xt.format(this.startDate,r),n[this.endParamName]=xt.format(this.endDate,r)}},{key:"store",get:function(){var e=this;return e._thisIsAUsedExpression(e.resources),!e._store&&e.isVertical&&(e._store=new ed({data:[{id:"verticalTimeAxisRow"}]})),pZ(yZ(t.prototype),"store",this)},set:function(e){!function(e,t,n,r,o){if(!dZ(e,t,n,r||e)&&o)throw new Error("failed to set property")}(yZ(t.prototype),"store",e,this,!0)}},{key:"resources",get:function(){var e=this.resourceStore;return e&&e.records},set:function(e){this.resourceStore.data=e}},{key:"resourceStore",get:function(){var e=this;return e._resourceStore||e.crudManager&&e.crudManager.resourceStore||(e.resourceStore=new FN),e._resourceStore},set:function(e){var t=this,n=t._resourceStore;if(e!==n){if(e instanceof FN||(e=new FN(e)),n){var r=n===t.store;t._resourceStore=e,e&&t.isHorizontal&&(r?(t.store=t.resourceStore,t.store.metaMapId=t.id):t.refresh())}else t._resourceStore=e;e&&(t.isVertical&&e.on("load",(function(){return t.unmaskBody()})),t.trigger("resourceStoreChange",{newResourceStore:e,oldResourceStore:n})),t.isHorizontal&&!t._store&&(t.store=e)}}},{key:"events",get:function(){return this._eventStore.records},set:function(e){this.eventStore.data=e}},{key:"eventStore",get:function(){var e=this;return e._eventStore||e.crudManager&&e.crudManager.eventStore||(e.eventStore=new eL({resourceStore:e.resourceStore})),this._eventStore},set:function(e){var t=this,n=t._eventStore,r=!1;if(e!==n){var o=t.resourceStore;if(n){var i=t.eventStore,a=t.assignmentStore,u=t.dependencyStore;if(e===i)return;t.eventStoreDetacher&&t.eventStoreDetacher(),t._eventStore=e,t.timeAxisViewModel.eventStore=e,e&&(o&&!e.resourceStore&&(e.resourceStore=o),a&&!e.assignmentStore&&(e.assignmentStore=a),u&&!e.dependencyStore&&(e.dependencyStore=u),t.trigger("eventStoreChange",{newEventStore:e,oldEventStore:i}),t.refresh())}else{if(e.isEventStore){if(o&&e.resourceStore!==o){if(e.resourceStore)throw new Error("eventStore ".concat(e.id," is already linked to resourceStore ").concat(e.resourceStore.id));e.resourceStore=o}}else r=e.autoLoad,e.autoLoad=!1,e=new eL(Object.assign({resourceStore:t.resourceStore},e));t._eventStore=e}if(e){var c=this.getEventStoreListenerConfig();t.passStartEndParameters&&(c.beforeload=t.applyStartEndParameters),t.eventStoreDetacher&&t.eventStoreDetacher(),t.eventStoreDetacher=e.on(c),e.assignmentStore&&(t.assignmentStore=e.assignmentStore),r&&e.load().catch((function(){}))}t.eventStore.count>0&&(t.eventsRendered=!0)}}},{key:"assignments",get:function(){return this.assignmentStore&&this.assignmentStore.records},set:function(e){this.assignmentStore||(this.eventStore.assignmentStore=this.assignmentStore=new UL),this.assignmentStore.data=e}},{key:"assignmentStore",get:function(){var e=this.eventStore,t=this.crudManager;return t&&t.assignmentStore||e&&e.assignmentStore},set:function(e){var t=this,n=t.assignmentStore;t.eventStore.assignmentStore!==e&&(t.eventStore.assignmentStore=e),t.assignmentStoreDetacher&&t.assignmentStoreDetacher(),e&&(t.assignmentStoreDetacher=e.on(t.getAssignmentStoreListenerConfig()),t.trigger("assignmentStoreChange",{newAssignmentStore:e,oldAssignmentStore:n}),t.refresh())}},{key:"dependencyStore",get:function(){var e=this.eventStore,t=this.crudManager;return t&&t.dependencyStore||e&&e.dependencyStore||this._dependencyStore},set:function(e){var t=this;if(t.isConfigured){var n=t.dependencyStore;t.eventStore.dependencyStore=e,e&&(t.trigger("dependencyStoreChange",{newDependencyStore:e,oldDependencyStore:n}),t.refresh())}else t._dependencyStore=e}},{key:"widgetClass",get:function(){}}])&&lZ(n.prototype,r),o&&lZ(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return wZ(this,t),SZ(this,OZ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EZ(e,t)}(t,e),n=t,(r=[{key:"scrollEventIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xZ,n=this,r=e.resources||[e];if(r.length>1)throw new Error("scrollEventIntoView() is not applicable for events with multiple assignments, please use scrollResourceEventIntoView() instead.");return r.length?n.scrollResourceEventIntoView(r[0],e,null,t):(console.warn("You have asked to scroll to an event which is not assigned to a resource"),CZ)}},{key:"scrollResourceEventIntoView",value:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xZ,i=this,a=t.startDate,u=t.endDate,c=a<i.timeAxis.startDate|(u>i.timeAxis.endDate)<<1;if(null==o.edgeOffset&&(o.edgeOffset=20),c&&!1!==o.extendTimeAxis){var s,l,f=i.timeAxis.endDate-i.timeAxis.startDate;3===c?i.timeAxis.setTimeSpan(new Date(a.valueOf()-f/2),new Date(u.getTime()+f/2)):(s=1&c?i.getCoordinateFromDate(t.endDate):i.getCoordinateFromDate(t.startDate),1&c?i.timeAxis.setTimeSpan(new Date(a),new Date(a.valueOf()+f)):i.timeAxis.setTimeSpan(new Date(u.valueOf()-f),new Date(u)),l=1&c?i.getCoordinateFromDate(t.endDate):i.getCoordinateFromDate(t.startDate),i.timeAxisSubGrid.scrollable.scrollBy(l-s))}if(r=i.getElementFromEventRecord(t,e)){xn.isFocusable(r)||(r=r.parentNode);var d=i.timeAxisSubGrid.scrollable;return i.timeAxisSubGrid.forceScrollUpdate=!0,d.scrollIntoView(r,o)}return c&&!1===o.extendTimeAxis?(console.warn("You have asked to scroll to an event which is outside the current view and extending timeaxis is disabled"),CZ):i.eventStore.isAvailable(t)?i.scrollUnrenderedEventIntoView(e,t,o):(console.warn("You have asked to scroll to an event which is not available"),CZ)}},{key:"scrollUnrenderedEventIntoView",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xZ;return new Promise((function(o){var i=n,a=Object.assign({edgeOffset:20},r,_Z),u=i.timeAxisSubGrid.scrollable,c=i.getResourceEventBox(t,e),s=u.viewport;if(s)var l=new tr(c.start,c.top,c.end-c.start,c.bottom-c.top).translate(s.x-u.x,s.y-u.y),f=u.getDeltaTo(l,a)[i.isHorizontal?"xDelta":"yDelta"],d=function(e){e.scheduler;var n=e.eventRecord,i=(e.resourceRecord,e.element);n===t&&(p(),h.then((function(){f>0&&u.scrollIntoView(i,{edgeOffset:r.edgeOffset}),r.highlight&&xn.highlight(i),r.focus&&i.focus(),o()})))},p=i.on({eventrepaint:d,eventpaint:d}),h=u.scrollIntoView(l,a);else o()}))}},{key:"scrollResourceIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xZ;return this.isVertical?this.currentOrientation.scrollResourceIntoView(e,t):this.scrollRowIntoView(e,t)}},{key:"widgetClass",get:function(){}}])&&kZ(n.prototype,r),o&&kZ(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return IZ(this,t),LZ(this,HZ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BZ(e,t)}(t,e),n=t,(r=[{key:"getState",value:function(){return Mt.copyProperties(NZ(HZ(t.prototype),"getState",this).call(this),this,zZ)}},{key:"applyState",value:function(e){Mt.copyProperties(this,e,zZ),NZ(HZ(t.prototype),"applyState",this).call(this,e)}},{key:"widgetClass",get:function(){}}])&&FZ(n.prototype,r),o&&FZ(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return tZ(this,t),rZ(this,oZ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iZ(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{eventRenderer:null,eventRendererThisObj:null,eventPrefix:"",eventLayout:"stack",horizontalLayoutPackClass:JK,horizontalLayoutStackClass:LK,horizontalEventSorterFn:null,eventBarTextField:"name",eventBodyTemplate:null,eventPositionMode:"translate",eventScrollMode:"move",fillTicks:!1,useInitialAnimation:!0,resourceColumns:null,resourceImagePath:null,defaultResourceImageName:"none.png",resourceImageExtension:".jpg",resourceMargin:null,isFirstRender:!0}}}],(r=[{key:"getEventsToRender",value:function(e,t){return t}},{key:"repaintEventsForResource",value:function(e){if(this.isHorizontal){this.currentOrientation.cache.clearRow(e.id);var t=this.getRowFor(e);t&&t.render()}}},{key:"repaintEvent",value:function(e){var t=this;this.eventStore.getResourcesForEvent(e).forEach((function(e){return t.repaintEventsForResource(e)}))}},{key:"generateTplData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{viewport:!0},r=this,o=r.currentOrientation.getTimeSpanRenderData(e,t,n),i="";if(o){var a,u=e.isResizable;o.startsOutsideView&&(!0===u?u="end":"start"===u&&(u=!1)),o.endsOutsideView&&(!0===u?u="start":"end"===u&&(u=!1));var c=e.isResourceTimeRange?new Nt:e.cls.clone(),s=e.isResourceTimeRange?e.cls.clone():new Nt;if(Object.assign(c,(eZ(a={},t.cls,t.cls),eZ(a,r.generatedIdCls,e.hasGeneratedId),eZ(a,r.dirtyCls,e.isPersistable&&e.modifications),eZ(a,r.committingCls,e.isCommitting),eZ(a,r.endsOutsideViewCls,o.endsOutsideView),eZ(a,r.startsOutsideViewCls,o.startsOutsideView),eZ(a,"b-clipped-start",o.clippedStart),eZ(a,"b-clipped-end",o.clippedEnd),a)),Object.assign(s,eZ({},"".concat(r.eventCls,"-parent"),t.isParent)),e.isEvent||e.isTask){var l,f;Object.assign(c,(eZ(l={},r.eventCls,1),eZ(l,"b-milestone",e.isMilestone),eZ(l,"b-sch-event-narrow",o.width<10),eZ(l,r.fixedEventCls,!1===e.isDraggable),eZ(l,"b-sch-event-resizable-".concat(u),Boolean(r.features.eventResize)),eZ(l,r.eventSelectedCls,r.isEventSelected(e)),eZ(l,"b-recurring",e.isRecurring),eZ(l,"b-occurrence",e.isOccurrence),l)),o.eventId=e.id,o.id=r.getEventRenderId(e,t),"id"in e.meta.modified&&(o.oldId=r.getEventRenderId(e.meta.modified.id,t)),Object.assign(s,(eZ(f={},"".concat(r.eventCls,"-wrap"),1),eZ(f,"b-milestone-wrap",e.isMilestone),f));var d=e.eventStyle||t.eventStyle||r.eventStyle,p=e.eventColor||t.eventColor||r.eventColor;o.eventColor=p,o.eventStyle=d,r.assignmentStore&&e.assignments&&(o.assignment=e.assignments.find((function(e){return e.resourceId===t.id})))}if(o.wrapperCls=s,o.cls=c,o.iconCls=new Nt(e.get(r.eventBarIconClsField)||e.iconCls),e.isResourceTimeRange?(o.style="",o.wrapperStyle=e.style||""):o.style=e.style||"",o.resource=t,o.resourceId=o.rowId,e.isEvent||e.isTask){if(r.eventRenderer){var h=r.eventRenderer.call(r.eventRendererThisObj||r,{eventRecord:e,resourceRecord:t,assignmentRecord:o.assignment,tplData:o});"string"==typeof o.cls&&(o.cls=new Nt(o.cls)),"string"==typeof o.wrapperCls&&(o.wrapperCls=new Nt(o.wrapperCls)),"string"==typeof o.iconCls&&(o.iconCls=new Nt(o.iconCls)),i=r.eventBodyTemplate&&r.eventBodyTemplate(h)||(null==h?"":String(h))}else r.eventBodyTemplate?i=r.eventBodyTemplate(e):r.eventBarTextField&&(i=e.data[r.eventBarTextField]||"");r.eventBodyTemplate||(e.isMilestone&&i&&(i="<label>".concat(i,"</label>")),o.iconCls&&o.iconCls.length&&(i='<i class="'.concat(o.iconCls,'"></i>').concat(i))),o.wrapperCls["b-sch-style-".concat(o.eventStyle)]=o.eventStyle,o.eventColor&&o.eventColor.startsWith("#")?o.style="background-color:".concat(o.eventColor,";")+o.style:o.wrapperCls["b-sch-color-".concat(o.eventColor)]=o.eventColor}o.cls["b-sch-event-withicon"]=o.iconCls.length,i.includes("<")?o.body=xn.createElementFromTemplate(i,{fragment:!0}):(o.body=document.createDocumentFragment(),o.body.textContent=i),o.eventContent=i,r.onEventDataGenerated(o)}return o}},{key:"onEventDataGenerated",value:function(e){}},{key:"getEventRenderId",value:function(e,t){var n=(e instanceof bF?e.id:e).toString().replace(aZ,"._."),r=(t instanceof jN?t.id:t).toString().replace(aZ,"._.");return this.eventPrefix+"".concat(n,"-").concat(r,"-x")}},{key:"restartInitialAnimation",value:function(e){this.useInitialAnimation=e,this._firstRenderDone=null,this.isFirstRender=!0,this.refresh()}},{key:"eventPrefix",get:function(){return this._eventPrefix},set:function(e){this._eventPrefix=e||this.id+"-"}},{key:"layouts",get:function(){var e=this;return e._eventLayout||(e._eventLayout={},e.horizontalLayoutPackClass&&(e._eventLayout.horizontalPack=new e.horizontalLayoutPackClass(Object.assign({scheduler:e,timeAxisViewModel:e.timeAxisViewModel,bandIndexToPxConvertFn:e.horizontal.layoutEventVerticallyPack,bandIndexToPxConvertThisObj:e.horizontal}))),e.horizontalLayoutStackClass&&(e._eventLayout.horizontalStack=new e.horizontalLayoutStackClass(Object.assign({scheduler:e,timeAxisViewModel:e.timeAxisViewModel,bandIndexToPxConvertFn:e.horizontal.layoutEventVerticallyStack,bandIndexToPxConvertThisObj:e.horizontal})))),e._eventLayout}},{key:"eventLayout",get:function(){return this._overlapMode},set:function(e){var t=this;e!=t._overlapMode&&(t.element.classList.remove("b-eventlayout-".concat(t._overlapMode)),t._overlapMode=e,t.runWithTransition((function(){t.element.classList.add("b-eventlayout-".concat(t._overlapMode)),t.refresh()})))}},{key:"fillTicks",get:function(){return this._fillTicks},set:function(e){e!=this._fillTicks&&(this._fillTicks=e,this.refreshWithTransition())}},{key:"currentEventLayout",get:function(){if(!this.isHorizontal)return null;switch(this.eventLayout){case"stack":return this.layouts.horizontalStack;case"pack":return this.layouts.horizontalPack;default:return null}}},{key:"useInitialAnimation",get:function(){return this._useInitialAnimation},set:function(e){var t=this;t._useInitialAnimation&&t.element.classList.remove("b-initial-".concat(t._useInitialAnimation)),t._useInitialAnimation=!0===e?"fade-in":e,e&&t.element.classList.add("b-initial-".concat(t._useInitialAnimation))}},{key:"isFirstRender",set:function(e){var t=this;t._isFirstRender=e,!t._firstRenderDone&&e&&(t._firstRenderDone=t.createOnFrame((function(){t._isFirstRender=!1,t._firstRenderDone=null})))},get:function(){return this._isFirstRender}},{key:"horizontalEventSorterFn",set:function(e){this._horizontalEventSorterFn=e?function(t,n){return e(t.event,n.event)}:e,this.rendered&&this.refreshWithTransition()},get:function(){return this._horizontalEventSorterFn}},{key:"resourceColumns",set:function(e){this._resourceColumns=e},get:function(){return this.timeAxisColumn&&this.timeAxisColumn.resourceColumns||this._resourceColumns}},{key:"resourceColumnWidth",get:function(){return this.resourceColumns?this.resourceColumns.columnWidth:null}},{key:"widgetClass",get:function(){}}])&&nZ(n.prototype,r),o&&nZ(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return DZ(this,t),PZ(this,TZ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AZ(e,t)}(t,e),n=t,(r=[{key:"getScheduleRegion",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.currentOrientation.getScheduleRegion(e,t,n)}},{key:"getResourceRegion",value:function(e,t,n){return this.currentOrientation.getRowRegion(e,t,n)}},{key:"getResourceEventBox",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.currentOrientation.getResourceEventBox(e.id,t.id);if(o)return o;var i,a,u,c,s,l,f,d,p=r.timeAxis.startDate,h=r.timeAxis.endDate,y=e.startDate,g=e.endDate,v=null;if(y&&g&&(n||xt.intersectSpans(y,g,p,h))&&this.isRowVisible(t)){if(r.getRowFor(t))r.managedEventSizing?(i=r.currentEventLayout,a=r.eventStore.getEventsForResource(t).reduce((function(e,o){var i=r[r.mode].getTimeSpanRenderData(o,t,n);return i&&e.push(i),e}),[]),i&&i.applyLayout(a,t),(u=a.find((function(t){return t.event==e})))&&(c=r.getRecordCoords(t,!0).y,v={layout:!0,start:u.hasOwnProperty("left")?u.left:u.right,end:(u.hasOwnProperty("left")?u.left:u.right)+u.width,top:c+u.top,bottom:c+u.top+u.height})):(s=r.getElementsFromEventRecord(e,e!==t&&t)).length&&(f=(l=s[0]).getOffsetsTo(r.getEl()),d=l.getBox(),v={layout:!0,start:f[0],end:f[0]+d.width,top:f[1],bottom:f[1]+d.height});else{v={layout:!1,start:r.getCoordinateFromDate(Math.max(e.startDateMS,r.timeAxis.startMS)),end:r.getCoordinateFromDate(Math.min(e.endDateMS,r.timeAxis.endMS))};var m=r.rowManager.getRecordCoords(t,!0);v.top=m.y+r.barMargin,v.height=Math.max(r.rowManager.rowHeight-2*r.barMargin,1),v.bottom=v.top+v.height}v&&(v=r.adjustItemBox(e,v))}return v}},{key:"getItemBox",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.resources.map((function(r){return t.getResourceEventBox(e,r,n)}))}},{key:"adjustItemBox",value:function(e,t){var n=this.timeAxis.startMS,r=this.timeAxis.endMS,o=e.startDateMS,i=e.endDateMS,a=this.timeAxisViewModel.totalSize;return n>o&&(t.start=-40),n>i&&(t.end=-40),r<o&&(t.start=a+40),r<i&&(t.end=a+40),t}},{key:"widgetClass",get:function(){}}])&&RZ(n.prototype,r),o&&RZ(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return WZ(this,t),YZ(this,UZ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qZ(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{multiEventSelect:!1,eventSelectionDisabled:!1,eventSelectedCls:"b-sch-event-selected",triggerSelectionChangeOnRemove:!1,maintainSelectionOnDatasetChange:!0,eventAssignHighlightCls:"b-sch-event-assign-selected",selectedCollection:{}}}}],(r=[{key:"afterConstruct",value:function(){GZ(UZ(t.prototype),"afterConstruct",this).call(this),this.navigator.on({navigate:"onEventNavigate",thisObj:this})}},{key:"isEventSelected",value:function(e){return this.selectedCollection.includes(e)}},{key:"selectEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isEventSelected(e)||(t?this.selectedCollection.add(e):this.selectedEvents=e)}},{key:"deselectEvent",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.isEventSelected(e)&&this.selectedCollection.remove(e)}},{key:"selectEvents",value:function(e){this.selectedCollection.add(e)}},{key:"deselectEvents",value:function(e){this.selectedCollection.remove(e)}},{key:"clearEventSelection",value:function(){this.selectedEvents=[]}},{key:"onSelectedCollectionChange",value:function(e){var t=e.added,n=e.removed,r=this,o=r.selectedEvents,i=t||[],a=n||[];function u(e,t){var n=e.isTask?e:e.resource,o=e.isAssignment?e.event:e;if(o){var i=r.getElementFromEventRecord(o,n);r.currentOrientation.toggleCls(o,n,r.eventSelectedCls,t),e.isAssignment&&r.getElementsFromEventRecord(o).forEach((function(e){e!==i&&e.classList[t?"add":"remove"](r.eventAssignHighlightCls)}))}}i.forEach((function(e){return u(e,!0)})),a.forEach((function(e){return u(e,!1)})),r.silent||r.trigger("eventSelectionChange",{action:o.length>0?i.length>0&&a.length>0?"update":i.length>0?"select":"deselect":"clear",selection:o,selected:i,deselected:a})}},{key:"onInternalEventStoreChange",value:function(e){var n=e.action,r=e.records,o=e.source;GZ(UZ(t.prototype),"onInternalEventStoreChange",this).apply(this,arguments);var i=this;i.silent=!i.triggerSelectionChangeOnRemove,"remove"===n?i.deselectEvents(r):"dataset"===n&&(i.maintainSelectionOnDatasetChange?i.selectedEvents=i.selectedEvents.filter((function(e){return o.includes(e)})):i.clearEventSelection()),i.silent=!1}},{key:"onAssignmentRemove",value:function(e){var n=e.records;GZ(UZ(t.prototype),"onAssignmentRemove",this).apply(this,arguments);var r=this;r.silent=!r.triggerSelectionChangeOnRemove,r.deselectEvents(n),r.silent=!1}},{key:"onEventSelectionClick",value:function(e,t){var n=this;n.isEventSelected(t)?e.ctrlKey&&n.deselectEvent(t,n.multiEventSelect):n.selectEvent(t,e.ctrlKey&&n.multiEventSelect)}},{key:"onEventNavigate",value:function(e){var t=e.event,n=e.item;if(!this.eventSelectionDisabled){var r=this,o=n&&(1===n.nodeType?r.assignmentStore?r.resolveAssignmentRecord(n):r.resolveEventRecord(n):n);o?r.onEventSelectionClick(t,o):r.clearEventSelection()}}},{key:"selectedCollection",set:function(e){e instanceof Eo||(e=new Eo(e)),this._selectedCollection=e,e.on({change:"onSelectedCollectionChange",thisObj:this})},get:function(){return this._selectedCollection}},{key:"selectedEvents",get:function(){return this.selectedCollection.values},set:function(e){this.selectedCollection.splice(0,this.selectedCollection.count,e||[])}},{key:"widgetClass",get:function(){}}])&&$Z(n.prototype,r),o&&$Z(n,o),t}(e||Y)}),oJ));function wQ(e){return(wQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OQ(e,t){return!t||"object"!==wQ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EQ(e,t,n){return(EQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CQ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function CQ(e){return(CQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xQ(e,t){return(xQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}bQ.localeClass="Scheduler",bQ._$name="SchedulerBase",se.register("schedulerbase",bQ);var _Q=function(e){function t(){return kQ(this,t),OQ(this,CQ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xQ(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ScheduleContextMenu"}},{key:"defaultConfig",get:function(){return{items:null,processItems:null,defaultItems:{addEvent:!0}}}}],(r=[{key:"construct",value:function(e,n){EQ(CQ(t.prototype),"construct",this).call(this,e,n),this.scheduler=e}},{key:"showEventContextMenu",value:function(e){var t=this.scheduler,n=t.getEventData(e),r=n?t.columns.getById(n.columnId)===t.timeAxisColumn:t.timeAxisSubGrid.element===e.target,o=t.resolveResourceRecord(e)||t.resourceStore.last;!r||o&&o.meta.specialRow||(this.showContextMenu({menuType:"schedule",date:t.getDateFromDomEvent(e,"floor"),resourceRecord:o,event:e}),e.preventDefault())}},{key:"namedItems",get:function(){var e=this.client;return this._namedItems||(this._namedItems={addEvent:{text:e.L("Add event",null),icon:"b-icon b-icon-add",disabled:0===e.resourceStore.count,weight:100,onItem:function(t){var n=t.date,r=t.resourceRecord;e.internalAddEvent(n,r,e.getRowFor(r))}}}),this._namedItems}}])&&SQ(n.prototype,r),o&&SQ(n,o),t}(RH);function jQ(e){return(jQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PQ(e,t){return!t||"object"!==jQ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TQ(e,t,n){return(TQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AQ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function AQ(e){return(AQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MQ(e,t){return(MQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_Q.featureClass="",_Q._$name="ScheduleContextMenu",nC.registerFeature(_Q,!0,"Scheduler");var IQ=function(e){function t(){return DQ(this,t),PQ(this,AQ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MQ(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ScheduleTooltip"}},{key:"defaultConfig",get:function(){return{messageTemplate:function(e){return'<div class="b-sch-hovertip-msg">'.concat(e.message,"</div>")}}}},{key:"pluginConfig",get:function(){return{chain:["render"]}}}],(r=[{key:"render",value:function(){var e,t=this,n=t.client;t.hoverTip&&t.hoverTip.destroy();var r=t.hoverTip=new Fu({id:"".concat(n.id,"-schedule-tip"),cls:"b-sch-scheduletip",allowOver:!0,hoverDelay:0,hideDelay:100,showOnHover:!0,forElement:n.timeAxisSubGridElement,anchorToTarget:!1,trackMouse:!0,updateContentOnMouseMove:!0,forSelector:".b-schedulerbase:not(.b-animating):not(.b-dragging-event):not(.b-dragcreating) .b-timeline-subgrid > :not(.b-sch-foreground-canvas):not(.b-group-footer):not(.b-group-row) *",constrainTo:null,getHtml:t.getHoverTipHtml.bind(t),onDocumentMouseDown:function(t){r.forElement.contains(t.event.target)&&(e=_r.on({element:n.timeAxisSubGridElement,mousemove:function(e){return r.internalOnPointerOver(e)},capture:!0}));var o=r.hideAnimation;r.hideAnimation=!1,r.constructor.prototype.onDocumentMouseDown.call(r,t),r.hideAnimation=o},listeners:{pointerover:function(r){var o=r.event,i="buttons"in o?o.buttons>0:o.which>0;return!i&&e&&e(),!t.disabled&&!n.readOnly&&!i}}});t.clockTemplate=new GH({scheduler:n})}},{key:"doDestroy",value:function(){this.clockTemplate&&this.clockTemplate.destroy(),this.hoverTip&&this.hoverTip.destroy(),TQ(AQ(t.prototype),"doDestroy",this).call(this)}},{key:"getHoverTipHtml",value:function(e){var t=e.tip,n=e.event,r=this,o=r.client,i=n&&o.getDateFromDomEvent(n,"floor",!0),a=r.lastHtml;if(i){var u=o.resolveResourceRecord(n);i-r.lastTime==0&&u===r.lastResource||(r.lastResource=u,a=r.lastHtml=r.generateTipContent(i,n))}else t.hide(),r.lastTime=null,r.lastResource=null;return a}},{key:"generateTipContent",value:function(e,t){var n=this,r=n.clockTemplate.generateContent({date:e,text:n.client.getFormattedDate(e)}),o=n.messageTemplate({message:n.getText(e,t)||""});return n.lastTime=e,r+o}},{key:"getText",value:function(e,t){}}])&&RQ(n.prototype,r),o&&RQ(n,o),t}(es);function FQ(e){return(FQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HQ(e,t){return!t||"object"!==FQ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BQ(e){return(BQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zQ(e,t){return(zQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}IQ.featureClass="b-scheduletip",IQ._$name="ScheduleTooltip",nC.registerFeature(IQ,!0,"Scheduler");var VQ=function(e){function t(){return LQ(this,t),HQ(this,BQ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zQ(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Scheduler"}}],(r=null)&&NQ(n.prototype,r),o&&NQ(n,o),t}(bQ);function WQ(e){return(WQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $Q(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function YQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UQ(e,t){return!t||"object"!==WQ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qQ(e,t,n){return(qQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=XQ(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function XQ(e){return(XQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KQ(e,t){return(KQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}VQ._$name="Scheduler",se.register("scheduler",VQ),F.setVersion("scheduler","3.1.0");var ZQ=function(e){function t(){return YQ(this,t),UQ(this,XQ(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KQ(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{includeUnassigned:!0,eventColumns:[{text:"Task",field:"name"},{text:"Starts",field:"startDate",width:140},{text:"Ends",field:"endDate",width:140}]}}}],(r=[{key:"normalizeColumns",value:function(e){qQ(XQ(t.prototype),"normalizeColumns",this).call(this,e),e.eventColumns=e.eventColumns.map((function(e){return"string"==typeof e?{field:e}:e}))}},{key:"generateExportData",value:function(e){var t=this.target instanceof VQ,n=this.generateColumns(e),r=t?this.generateEventColumns(e):[];return{columns:n.concat(r),rows:this.generateRows(e)}}},{key:"generateEventColumns",value:function(e){var t=this;return e.eventColumns.map((function(n){return t.processEventColumn(n,e)}))}},{key:"processEventColumn",value:function(e,t){var n=e.width,r=e.minWidth,o=t.defaultColumnWidth;return{field:e.field,value:e.text,width:Math.max(n||o,r||o),eventColumn:!0,type:this.getColumnType(e,this.target.eventStore)}}},{key:"generateRows",value:function(e){var n,r=this,o=r.target;if(o instanceof VQ){if(n=[],o.resourceStore.map((function(t){var o=t.events||[];o.length||o.push(""),o.forEach((function(o){return n.push(r.getRowData(e,t,o))}))})),e.includeUnassigned&&e.eventColumns.length){var i=o.eventStore.query((function(e){return!e.resources.length&&!o.resourceStore.isAvailable(e)}));if(i.length){var a=new Array(e.columns.length).fill("");a.push(r.L("No resource assigned")),n.push(a),i.forEach((function(t){return n.push(r.getRowData(e,null,t))}))}}n=n.filter((function(e){return e.length}))}else n=qQ(XQ(t.prototype),"generateRows",this).call(this,e);return n}},{key:"getRowData",value:function(e,t,n){var r=e.columns,o=e.eventColumns,i=[];return i.push.apply(i,$Q(this.processRecord(t,r,e))),t&&t.meta.specialRow||i.push.apply(i,$Q(this.processRecord(n,o,e))),i}}])&&GQ(n.prototype,r),o&&GQ(n,o),t}(ze(hR));function JQ(e){return(JQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t0(e,t){return!t||"object"!==JQ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function n0(e){return(n0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r0(e,t){return(r0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ZQ._$name="ScheduleTableExporter";var o0=function(e){function t(){return QQ(this,t),t0(this,n0(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r0(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ExcelExporter"}},{key:"defaultConfig",get:function(){return{exporterClass:ZQ,exporterConfig:null}}}],(r=null)&&e0(n.prototype,r),o&&e0(n,o),t}(ER);function i0(e){return(i0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c0(e,t){return!t||"object"!==i0(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s0(e,t,n){return(s0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l0(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l0(e){return(l0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f0(e,t){return(f0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}o0._$name="ExcelExporter",nC.registerFeature(o0,!1,"Scheduler");var d0=function(e){function t(){return a0(this,t),c0(this,l0(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f0(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"resourceInfo"}},{key:"fields",get:function(){return["showEventCount","showRole","showImage","imagePath","validNames","defaultImageName","autoScaleThreshold"]}},{key:"defaults",get:function(){return{showImage:!0,showEventCount:!0,showRole:!1,imagePath:null,validNames:["amit","angelo","arcady","arnold","celia","chang","dan","dave","emilia","george","gloria","henrik","hitomi","jong","kate","lee","linda","lisa","lola","macy","madison","malik","mark","maxim","mike","rob","steve"],defaultImageName:null,autoScaleThreshold:40,field:"name",htmlEncode:!1,width:140,cellCls:"b-resourceinfo-cell",autoSyncHtml:!0,editor:!F.isTestEnv&&"text"}}}],(r=[{key:"construct",value:function(){var e=this;s0(l0(t.prototype),"construct",this).apply(this,arguments),e.grid.isPainted?e.addErrorListener():e.grid.on({paint:e.addErrorListener,thisObj:e,once:!0})}},{key:"getImageURL",value:function(e){return A.joinPaths([this.imagePath||"",e||""])}},{key:"addErrorListener",value:function(){var e=this;_r.on({element:this.grid.element,delegate:".b-resource-image",error:function(t){return e.setDefaultResourceImage(t.target)},capture:!0})}},{key:"setDefaultResourceImage",value:function(e){if(this.defaultImageName){var t=this.getImageURL(this.defaultImageName);e.src&&!e.src.endsWith(t.replace(/^[./]*/gm,""))&&(e.src=t)}}},{key:"template",value:function(e){var t,n=this,r=n.showImage,o=n.showRole,i=n.showEventCount,a=e["string"==typeof o?o:"role"],u=e.events.length,c=e.get(n.field);if(r)if(e.imageUrl)t=e.imageUrl;else{var s="string"==typeof r?r:e.image||c&&c.toLowerCase()+n.grid.resourceImageExtension||n.defaultImageName;t=n.getImageURL(s),s.includes(".")||(!n.validNames||n.validNames.includes(s)?t+=n.grid.resourceImageExtension:t=n.getImageURL(n.defaultImageName))}return'\n            <div class="b-resource-info">\n                '.concat(t?'<img class="b-resource-image" draggable="false" src="'.concat(t,'">'):"","\n                <dl>\n                <dt>").concat(c,"</dt>\n                ").concat(o?'<dd class="b-resource-role">'.concat(a,"</dd>"):"","\n                ").concat(i?'<dd class="b-resource-events">'.concat(n.L("eventCountText",u),"</dd>"):"","\n                </dl>\n            </div>\n        ")}},{key:"defaultRenderer",value:function(e){var t,n=e.grid,r=e.record,o=e.cellElement,i=e.value,a=e.isExport;return r.meta.specialRow?t="":a?t=i:(this.autoScaleThreshold&&n.rowHeight<this.autoScaleThreshold?o.style.fontSize=n.rowHeight/40+"em":o.style.fontSize="",t=this.template(r)),t}},{key:"imagePath",set:function(e){this.set("imagePath",e)},get:function(){return this.get("imagePath")||this.grid.resourceImagePath}},{key:"defaultImageName",set:function(e){this.set("defaultImageName",e)},get:function(){return this.get("defaultImageName")||this.grid.defaultResourceImageName}}])&&u0(n.prototype,r),o&&u0(n,o),t}(XS);function p0(e){return(p0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g0(e,t){return!t||"object"!==p0(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v0(e,t,n){return(v0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m0(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function m0(e){return(m0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b0(e,t){return(b0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(d0),d0._$name="ResourceInfoColumn";var w0=function(e){function t(){return h0(this,t),g0(this,m0(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b0(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EndDateField"}},{key:"defaultConfig",get:function(){return{project:null}}}],(r=[{key:"transformTimeValue",value:function(e){var n=this.project&&this.project.calendar;if(n){var r=xt.clearTime(e),o=xt.add(r,1,"day"),i=n.skipNonWorkingTime(o,!1);if(xt.isValidDate(i)&&xt.isEqual(i,r,"day"))return xt.copyTimeValues(r,i)}return v0(m0(t.prototype),"transformTimeValue",this).call(this,e)}}])&&y0(n.prototype,r),o&&y0(n,o),t}(_h);function k0(e){return(k0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E0(e,t){return!t||"object"!==k0(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C0(e){return(C0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x0(e,t){return(x0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}w0._$name="EndDateField",se.register("enddatefield",w0),se.register("enddate",w0);var _0=function(e){return function(e){function t(){return S0(this,t),E0(this,C0(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x0(e,t)}(t,e),n=t,(r=[{key:"requestReadyStateChange",value:function(){this.trigger("readystatechange",{canSave:this.canSave})}},{key:"isReadyStatePropagator",get:function(){return!0}},{key:"canSave",get:function(){return!0}},{key:"widgetClass",get:function(){}}])&&O0(n.prototype,r),o&&O0(n,o),t}(e||ae(Y))};function j0(e){return(j0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P0(e,t){return!t||"object"!==j0(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T0(e){return(T0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A0(e,t){return(A0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M0=function(e){return function(e){function t(){return D0(this,t),P0(this,T0(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A0(e,t)}(t,e),n=t,(r=[{key:"getProject",value:function(){return this.record&&this.record.getProject()}},{key:"loadEvent",value:function(e){this.record=e}},{key:"resetData",value:function(){this.record=null}},{key:"beforeSave",value:function(){}},{key:"afterSave",value:function(){this.resetData()}},{key:"beforeCancel",value:function(){}},{key:"afterCancel",value:function(){this.resetData()}},{key:"beforeDelete",value:function(){}},{key:"afterDelete",value:function(){this.resetData()}},{key:"widgetClass",get:function(){}}])&&R0(n.prototype,r),o&&R0(n,o),t}(e||pa)};function I0(e){return(I0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N0(e,t){return!t||"object"!==I0(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H0(e){return(H0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B0(e,t){return(B0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z0=function(e){return function(e){function t(){return F0(this,t),N0(this,H0(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B0(e,t)}(t,e),n=t,(r=[{key:"requestPropagation",value:function(){this.trigger("requestPropagation")}},{key:"isEventChangePropagator",get:function(){return!0}},{key:"widgetClass",get:function(){}}])&&L0(n.prototype,r),o&&L0(n,o),t}(e||ae(Y))};function V0(e){return(V0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W0(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G0(e,t){return!t||"object"!==V0(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U0(e,t,n){return(U0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q0(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function q0(e){return(q0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X0(e,t){return(X0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K0=function(e){return function(e){function t(){return $0(this,t),G0(this,q0(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X0(e,t)}(t,e),n=t,(r=[{key:"startConfigure",value:function(e){var n;e.extraItems&&e.items&&((n=e.items).push.apply(n,W0(e.extraItems)),e.items.sort((function(e,t){return(0|e.index)-(t.index-0)}))),U0(q0(t.prototype),"afterConfigure",this).call(this)}},{key:"widgetClass",get:function(){}}])&&Y0(n.prototype,r),o&&Y0(n,o),t}(e)};function Z0(e){return(Z0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e1(e,t){return!t||"object"!==Z0(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function t1(e,t,n){return(t1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n1(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function n1(e){return(n1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r1(e,t){return(r1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o1=function(e){function t(){return J0(this,t),e1(this,n1(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r1(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"FormTab"}},{key:"defaultConfig",get:function(){return{layoutStyle:{flexFlow:"row wrap",alignItems:"flex-start",alignContent:"flex-start"},defaults:{labelWidth:"7em"}}}}],(r=[{key:"afterConfigure",value:function(){var e=this;t1(n1(t.prototype),"afterConfigure",this).call(this),Object.values(e.widgetMap).forEach((function(t){t.name&&t.on("change",e.onWidgetValueChange,e)})),Te.on({locale:e.onLocaleChange,thisObj:e})}},{key:"loadEvent",value:function(e){this._loading=!0,t1(n1(t.prototype),"loadEvent",this).call(this,e),this._loading=!1}},{key:"resetData",value:function(){this._loading=!0,t1(n1(t.prototype),"resetData",this).call(this),this._loading=!1}},{key:"onWidgetValueChange",value:function(e){var t=e.source,n=e.value,r=(e.checked,e.valid),o=this.getProject();if(r=void 0!==r?r:"function"==typeof t.isValid?t.isValid():t.isValid,!this._loading&&r&&o&&!o.isPropagating()){var i=this.record,a="set".concat(A.capitalizeFirstLetter(t.name));(a in i||t.name in i||i.$[t.name])&&(a in i?i[a](n):t.name in i?i[t.name]=n:i.$[t.name].put(n),this.requestPropagation())}}},{key:"onLocaleChange",value:function(){var e=this;Object.values(this.widgetMap).forEach((function(t){t instanceof Ic&&t.parent===e&&(t.labelWidth=e.L("labelWidth"))}))}}])&&Q0(n.prototype,r),o&&Q0(n,o),t}(z0(K0(M0(pa))));function i1(e){return(i1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c1(e,t){return!t||"object"!==i1(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s1(e,t,n){return(s1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l1(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l1(e){return(l1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f1(e,t){return(f1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}o1._$name="FormTab";var d1=function(e){function t(){return a1(this,t),c1(this,l1(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f1(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"StartDateField"}},{key:"defaultConfig",get:function(){return{project:null}}}],(r=[{key:"transformTimeValue",value:function(e){var n=this.project&&this.project.calendar;if(n){var r=xt.clearTime(e),o=n.skipNonWorkingTime(r);if(xt.isValidDate(o)&&xt.isEqual(o,r,"day"))return xt.copyTimeValues(r,o)}return s1(l1(t.prototype),"transformTimeValue",this).call(this,e)}}])&&u1(n.prototype,r),o&&u1(n,o),t}(_h);function p1(e){return(p1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g1(e,t){return!t||"object"!==p1(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v1(e){return(v1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m1(e,t){return(m1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}d1._$name="StartDateField",se.register("startdatefield",d1),se.register("startdate",d1);var b1=function(e){function t(){return h1(this,t),g1(this,v1(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m1(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"EffortField"}},{key:"type",get:function(){return"effort"}}],(r=null)&&y1(n.prototype,r),o&&y1(n,o),t}(Bk);function w1(e){return(w1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O1(e,t){return!t||"object"!==w1(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E1(e,t,n){return(E1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C1(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function C1(e){return(C1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x1(e,t){return(x1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}b1._$name="EffortField",se.register(b1.type,b1),se.register("".concat(b1.type,"field"),b1);var _1=function(e){function t(){return k1(this,t),O1(this,C1(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x1(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"GeneralTab"}},{key:"type",get:function(){return"generaltab"}},{key:"defaultConfig",get:function(){return{localeClass:this,title:"L{General}",ref:"generaltab",defaults:{localeClass:this,labelWidth:this.L("labelWidth")},items:[{type:"text",required:!0,label:"L{Name}",clearable:!0,name:"name",ref:"nameField",cls:"b-name"},{type:"number",label:"L{% complete}",name:"percentDone",ref:"percentDoneField",cls:"b-percent-done b-inline",flex:"1 0 50%",min:0,max:100},{type:"effort",label:"L{Effort}",name:"fullEffort",ref:"effortField",flex:"1 0 50%"},{html:"",dataset:{text:this.L("Dates")},cls:"b-divider",flex:"1 0 100%"},{type:"startdate",label:"L{Start}",name:"startDate",ref:"startDateField",cls:"b-start-date b-inline",flex:"1 0 50%"},{type:"enddate",label:"L{Finish}",name:"endDate",ref:"endDateField",cls:"b-end-date",flex:"1 0 50%"},{type:"durationfield",label:"L{Duration}",name:"fullDuration",ref:"fullDurationField",flex:".5 0",cls:"b-inline"}]}}}],(r=[{key:"loadEvent",value:function(e){var n={unit:e.durationUnit,magnitude:1},r=e.isParent,o=this.widgetMap,i=o.fullDurationField,a=o.percentDoneField,u=o.startDateField,c=o.endDateField,s=o.effortField;i&&(i.disabled=r),a&&(a.disabled=r),u&&(u.step=n),c&&(c.step=n,c.disabled=r),s&&(s.unit=e.effortUnit,s.disabled=r),E1(C1(t.prototype),"loadEvent",this).call(this,e)}}])&&S1(n.prototype,r),o&&S1(n,o),t}(o1);function j1(e){return(j1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P1(e,t){return!t||"object"!==j1(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T1(e,t,n,r){return(T1="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=M1(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function A1(e,t,n){return(A1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=M1(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function M1(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I1(e)););return e}function I1(e){return(I1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F1(e,t){return(F1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_1._$name="GeneralTab",se.register(_1.type,_1);var L1=function(e){function t(){return D1(this,t),P1(this,I1(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F1(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ModelCombo"}},{key:"type",get:function(){return"modelcombo"}}],(r=[{key:"value",get:function(){var e=A1(I1(t.prototype),"value",this);return this.store.getById(e)||e},set:function(e){!function(e,t,n,r,o){if(!T1(e,t,n,r||e)&&o)throw new Error("failed to set property")}(I1(t.prototype),"value",e,this,!0)}}])&&R1(n.prototype,r),o&&R1(n,o),t}(jp);function N1(e){return(N1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z1(e,t){return!t||"object"!==N1(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V1(e,t,n,r){return(V1="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=$1(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function W1(e,t,n){return(W1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=$1(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $1(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Y1(e)););return e}function Y1(e){return(Y1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G1(e,t){return(G1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}L1._$name="ModelCombo",se.register(L1.type,L1);var U1=function(e){function t(){return H1(this,t),z1(this,Y1(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G1(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"CalendarField"}},{key:"type",get:function(){return"calendarfield"}},{key:"defaultConfig",get:function(){var e=this;return{valueField:"id",displayField:"name",editable:!1,listItemTpl:function(t){return t&&t.name?t.name:e.L("Default calendar")},displayValueRenderer:function(t){return t?t.name:e.L("Default calendar")}}}}],(r=[{key:"value",get:function(){return W1(Y1(t.prototype),"value",this)},set:function(e){e&&e.isDefault&&e.isDefault()&&(e=null),function(e,t,n,r,o){if(!V1(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Y1(t.prototype),"value",e,this,!0)}}])&&B1(n.prototype,r),o&&B1(n,o),t}(L1);function q1(e){return(q1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z1(e,t){return!t||"object"!==q1(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J1(e,t,n){return(J1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q1(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Q1(e){return(Q1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e2(e,t){return(e2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}U1._$name="CalendarField",se.register(U1.type,U1);var t2=function(e){function t(){return X1(this,t),Z1(this,Q1(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&e2(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"SchedulerGeneralTab"}},{key:"type",get:function(){return"schedulergeneraltab"}},{key:"defaultConfig",get:function(){return{localeClass:this,title:"L{General}",ref:"generaltab",defaults:{localeClass:this,labelWidth:this.L("labelWidth")},items:[{type:"text",required:!0,label:"L{Name}",clearable:!0,name:"name",ref:"nameField",cls:"b-name"},{type:"number",label:"L{% complete}",name:"percentDone",ref:"percentDoneField",cls:"b-percent-done b-inline",flex:"1 0 50%",min:0,max:100},{type:"calendarfield",ref:"calendarField",name:"calendar",label:"L{Calendar}",flex:"1 0 50%"},{html:"",dataset:{text:this.L("Dates")},cls:"b-divider",flex:"1 0 100%"},{type:"date",label:"L{Start}",name:"startDate",ref:"startDateField",cls:"b-start-date b-inline",flex:"1 0 50%"},{type:"date",label:"L{Finish}",name:"endDate",ref:"endDateField",cls:"b-end-date",flex:"1 0 50%"},{type:"durationfield",label:"L{Duration}",name:"fullDuration",ref:"fullDurationField",flex:"1 0 50%",cls:"b-inline"},{type:"checkbox",ref:"manuallyScheduledField",name:"manuallyScheduled",label:"L{Manually scheduled}",flex:"1 0 50%"}]}}}],(r=[{key:"loadEvent",value:function(e){var n={unit:e.durationUnit,magnitude:1},r=e.isParent,o=this.widgetMap,i=o.fullDurationField,a=o.percentDoneField,u=o.startDateField,c=o.endDateField,s=o.calendarField,l=!this.record;i&&(i.disabled=r),a&&(a.disabled=r),u&&(u.step=n),c&&(c.step=n,c.disabled=r),s&&l&&(s.store=e.getProject().getCalendarManagerStore()),J1(Q1(t.prototype),"loadEvent",this).call(this,e)}}])&&K1(n.prototype,r),o&&K1(n,o),t}(_1);t2._$name="SchedulerGeneralTab",se.register(t2.type,t2);var n2,r2,o2,i2,a2,u2;function c2(e){return(c2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l2(e,t){return!t||"object"!==c2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f2(e){return(f2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d2(e,t){return(d2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.Millisecond="millisecond",e.Second="second",e.Minute="minute",e.Hour="hour",e.Day="day",e.Week="week",e.Month="month",e.Quarter="quarter",e.Year="year"}(n2||(n2={})),function(e){e.MustStartOn="muststarton",e.MustFinishOn="mustfinishon",e.StartNoEarlierThan="startnoearlierthan",e.StartNoLaterThan="startnolaterthan",e.FinishNoEarlierThan="finishnoearlierthan",e.FinishNoLaterThan="finishnolaterthan"}(r2||(r2={})),function(e){e.Normal="Normal",e.FixedDuration="FixedDuration",e.FixedEffort="FixedEffort",e.FixedUnits="FixedUnits"}(o2||(o2={})),function(e){e[e.StartToStart=0]="StartToStart",e[e.StartToEnd=1]="StartToEnd",e[e.EndToStart=2]="EndToStart",e[e.EndToEnd=3]="EndToEnd"}(i2||(i2={})),function(e){e.Project="Project",e.FromEvent="FromEvent",e.ToEvent="ToEvent"}(a2||(a2={})),function(e){e[e.Unknown=0]="Unknown",e[e.Gantt=1]="Gantt",e[e.Scheduler=2]="Scheduler"}(u2||(u2={}));var p2=function(e){function t(){return s2(this,t),l2(this,f2(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d2(e,t)}(t,e),t}(ze());function h2(e){return(h2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v2(e,t){return!t||"object"!==h2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m2(e,t,n,r){return(m2="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=w2(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function b2(e,t,n){return(b2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=w2(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w2(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k2(e)););return e}function k2(e){return(k2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S2(e,t){return(S2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}p2._$name="SchedulerProCommon";var O2=function(e){return e.map((function(e,t){return[t,e]}))},E2=function(e){function t(){return y2(this,t),v2(this,k2(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S2(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"DependencyTypePicker"}},{key:"type",get:function(){return"dependencytypepicker"}}],(r=[{key:"construct",value:function(e){var n=this;b2(k2(t.prototype),"construct",this).call(this,e),Te.on({locale:function(e){var t=e.locale;n.items=O2(t.SchedulerProCommon.dependencyTypesLong)},thisObj:this})}},{key:"store",get:function(){return this._items||(this.items=this._items=O2(p2.L("dependencyTypesLong"))),b2(k2(t.prototype),"store",this)},set:function(e){!function(e,t,n,r,o){if(!m2(e,t,n,r||e)&&o)throw new Error("failed to set property")}(k2(t.prototype),"store",e,this,!0)}}])&&g2(n.prototype,r),o&&g2(n,o),t}(jp);function C2(e){return(C2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j2(e,t){return!t||"object"!==C2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D2(e){return(D2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R2(e,t){return(R2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}E2._$name="DependencyTypePicker",se.register(E2.type,E2);var P2=function(e){function t(){return x2(this,t),j2(this,D2(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R2(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"duration"}},{key:"isGanttColumn",get:function(){return!0}},{key:"fields",get:function(){return[{name:"decimalPrecision",defaultValue:null}]}},{key:"defaults",get:function(){return{field:"fullDuration",text:"Duration",min:0,step:1,instantUpdate:!0}}}],(r=[{key:"defaultRenderer",value:function(e){var t=e.record,n=e.isExport,r=t[this.field],o=C2(r),i="number"===o?r:r&&r.magnitude;if("number"!=typeof i)return n?"":null;switch(o){case"number":return this.round(i)+" "+xt.getLocalizedNameOfUnit(t[this.durationUnitField],1!==r);case"object":return this.round(i)+" "+xt.getLocalizedNameOfUnit(r.unit,1!==r.magnitude)}}},{key:"round",value:function(e){var t=this.decimalPrecision;if(!1===t)return e;null==t&&(t=this.grid.durationDisplayPrecision||1);var n=Math.pow(10,t);return Math.round(e*n)/n}},{key:"canEdit",value:function(e){return e.isLeaf}},{key:"durationUnitField",get:function(){return"".concat(this.field,"Unit")}},{key:"defaultEditor",get:function(){return{type:"duration",name:this.field}}}])&&_2(n.prototype,r),o&&_2(n,o),t}(QO);function T2(e){return(T2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function I2(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function F2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N2(e,t){return!t||"object"!==T2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H2(e,t,n){return(H2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B2(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function B2(e){return(B2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z2(e,t){return(z2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(P2),P2._$name="DurationColumn";var V2=function(e,t){e.instanceMeta(t).valid=!0},W2=function(e,t){e.instanceMeta(t).valid=!1},$2=function(e,t){return!1!==e.instanceMeta(t).valid},Y2=function(e){function t(){return F2(this,t),N2(this,B2(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z2(e,t)}(t,e),n=t,r=[{key:"afterConstruct",value:function(){H2(B2(t.prototype),"afterConstruct",this).call(this);var e=this,n=e.addButton=e.widgetMap["".concat(e.ref,"-add")],r=e.removeButton=e.widgetMap["".concat(e.ref,"-remove")],o=e.grid=e.widgetMap["".concat(e.ref,"-grid")];n&&n.on("click",e.onAddClick,e),r&&r.on("click",e.onRemoveClick,e),o.on({selectionChange:e.onGridSelectionChange,startCellEdit:e.onGridStartCellEdit,finishCellEdit:e.onGridFinishCellEdit,cancelCellEdit:e.onGridCancelCellEdit,thisObj:e})}},{key:"loadEvent",value:function(e){var n=this,r=n.dependencyGrid,o=!r.store.chained,i=!o&&e!==n.record;H2(B2(t.prototype),"loadEvent",this).call(this,e);var a=n.taskCombo,u=n.getProject().getDependencyStore(),c=n.getProject().getEventStore();o?(n.depStoreGeneration=u.storage.generation,n.eventStoreGeneration=c.storage.generation,r.store=u.makeChained((function(e){return e[n.negDirection]===n.record}),null),a.store=c.makeChained((function(e){return e!==n.record&&!r.store.find((function(t){return t[n.direction]===e}))}),null,{doRelayToMaster:[]}),a.on({thisObj:n,change:"onGridCellEditChange"})):((i||u.storage.generation!==n.depStoreGeneration)&&(r.store.fillFromMaster(),n.depStoreGeneration=u.storage.generation),(i||c.storage.generation!==n.eventStoreGeneration)&&(a.store.fillFromMaster(),n.eventStoreGeneration=c.storage.generation)),n.requestReadyStateChange()}},{key:"unshadowAll",value:function(){var e=this;this.dependencyGrid.store.forEach((function(t){t.isShadowed&&(t.forEachFieldAtom((function(e){e.clearUserInput()})),V2(t,e.dependencyGrid),t.unshadow())}))}},{key:"beforeSave",value:function(){this.unshadowAll(),H2(B2(t.prototype),"beforeSave",this).call(this)}},{key:"beforeCancel",value:function(){var e=this._activeCellEdit;e&&e.editor.cancelEdit(),this.unshadowAll(),H2(B2(t.prototype),"beforeCancel",this).call(this)}},{key:"insertNewDependency",value:(i=regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=this).dependencyGrid,r=n.store,o=t.getProject().getDependencyStore(),i=r.insert(0,A2({type:i2.EndToStart,lag:0,lagUnit:n2.Day},t.negDirection,t.record)),a=M2(i,1),u=a[0],t.depStoreGeneration=o.storage.generation,n.features.cellEdit.startEditing({field:t.direction,id:u.id}),W2(u,n),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){I2(o,n,r,a,u,"next",e)}function u(e){I2(o,n,r,a,u,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"onAddClick",value:function(){this.insertNewDependency()}},{key:"onRemoveClick",value:function(){var e=this,t=e.dependencyGrid.selectedRecords,n=t.some((function(e){return!e.isShadowed()}));e.getProject().getDependencyStore().remove(t),e.dependencyGrid.selectedRecords=null,e.taskCombo.store.fillFromMaster(),e.removeButton.disable(),n&&e.requestPropagation()}},{key:"onGridSelectionChange",value:function(e){var t=e.selection;t&&t.length?this.removeButton.enable():this.removeButton.disable()}},{key:"clearActiveEditorErrors",value:function(){var e=this._activeCellEdit;e&&e.column.field===this.direction&&e.editor.inputField.clearError()}},{key:"onGridCellEditChange",value:function(){this.clearActiveEditorErrors()}},{key:"onGridStartCellEdit",value:function(e){var t=e.editorContext,n=this,r=n._editingDependency=t.record,o=n.dependencyGrid,i=n.direction;n._activeCellEdit=t,t.column.field===i&&($2(r,o)?n.clearActiveEditorErrors():r[i]?t.editor.inputField.setError(n.L("Cyclic dependency has been detected")):t.editor.inputField.setError(n.L("Invalid dependency")),r.shadow())}},{key:"onGridFinishCellEdit",value:function(e){var t,n=e.editorContext,r=this,o=n.record,i=n.column,a=r.direction,u=r.dependencyGrid;i.field===a?o[a]?r.getProject().getDependencyStore().isValidDependency((t={},A2(t,r.direction,o[r.direction]),A2(t,r.negDirection,o[r.negDirection]),A2(t,"lag",o.lag),A2(t,"lagUnit",o.lagUnit),A2(t,"type",o.type),t)).then((function(e){e?(V2(o,r.dependencyGrid),o.unshadow(),r.taskCombo.store.fillFromMaster(),r.redrawDependencyRow(o),r.requestPropagation(),r.requestReadyStateChange()):(W2(o,u),r.redrawDependencyRow(o),Cu.show({html:r.L("Cyclic dependency has been detected")}),r.requestReadyStateChange())})):(W2(o,u),r.redrawDependencyRow(o),r.requestReadyStateChange()):(r.redrawDependencyRow(o),o[a]&&$2(o,u)&&(o.unshadow(),r.requestPropagation()),r.requestReadyStateChange()),r._activeCellEdit=r._editingDependency=null}},{key:"onGridCancelCellEdit",value:function(e){var t=this;if(t._editingDependency){var n=t._editingDependency,r=t.dependencyGrid;n[t.direction]?$2(n,r)&&n.unshadow():(W2(n,r),t.redrawDependencyRow(n)),t._activeCellEdit=t._editingDependency=null}t.requestReadyStateChange()}},{key:"redrawDependencyRow",value:function(e){var t=this.dependencyGrid,n=t.rowManager.getRowById(e);n&&n.render(t.store.indexOf(e),e)}},{key:"dependencyGrid",get:function(){return this.widgetMap&&this.widgetMap["".concat(this.ref,"-grid")]}},{key:"taskCombo",get:function(){var e=this.dependencyGrid,t=e&&e.columns.get(this.direction);return t&&t.editor}},{key:"canSave",get:function(){var e=this.dependencyGrid;return e.store.reduce((function(t,n){return t&&$2(n,e)}),!0)}}],o=[{key:"makeDefaultConfig",value:function(e){var t="fromEvent"===e?"predecessorstab":"successorstab";return{direction:e,negDirection:"fromEvent"===e?"toEvent":"fromEvent",ref:t,localeClass:this,title:"fromEvent"===e?"L{Predecessors}":"L{Successors}",layoutStyle:{flexFlow:"column nowrap"},items:[{type:"container",flex:"0 0 auto",items:[{type:"button",cls:"b-add-button b-green",icon:"b-icon b-icon-add",ref:"".concat(t,"-add")},{type:"button",cls:"b-remove-button b-red",icon:"b-icon b-icon-trash",disabled:!0,ref:"".concat(t,"-remove")}]},{type:"grid",flex:"1 1 auto",ref:"".concat(t,"-grid"),emptyText:"",columns:[{localeClass:this,text:"L{ID}",flex:1,editor:!1,htmlEncode:!1,renderer:function(t){var n,r=t.record,o=t.row,i=t.grid;if($2(r,i)){var a=r[e];n=!a||a.hasGeneratedId?"*":a.id}else o.addCls("b-invalid"),n='<div class="b-icon b-icon-warning"></div>';return n}},{localeClass:this,text:"L{Name}",field:e,flex:5,renderer:function(e){var t=e.value;return t&&t.name||""},editor:{type:"modelcombo",displayField:"name",valueField:"id",editable:!1,allowInvalid:!0}},{localeClass:this,text:"L{Type}",field:"type",flex:3,editor:"dependencytypepicker",renderer:function(e){var t=e.value;return p2.L("dependencyTypesLong")[t]}},{localeClass:this,text:"L{Lag}",type:"duration",field:"fullLag",flex:2,editor:{allowNegative:!0}}],disableGridRowModelWarning:!0}]}}},{key:"$name",get:function(){return"DependencyTab"}}],r&&L2(n.prototype,r),o&&L2(n,o),t}(_0(z0(K0(M0(Wr(pa))))));function G2(e){return(G2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X2(e,t){return!t||"object"!==G2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K2(e){return(K2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z2(e,t){return(Z2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Y2._$name="DependencyTab";var J2=function(e){function t(){return U2(this,t),X2(this,K2(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z2(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"SuccessorsTab"}},{key:"type",get:function(){return"successorstab"}},{key:"defaultConfig",get:function(){return Object.assign(this.makeDefaultConfig("toEvent"),{cls:"b-successors-tab"})}}],(r=null)&&q2(n.prototype,r),o&&q2(n,o),t}(Y2);function Q2(e){return(Q2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n3(e,t){return!t||"object"!==Q2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r3(e){return(r3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o3(e,t){return(o3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}J2._$name="SuccessorsTab",se.register(J2.type,J2);var i3=function(e){function t(){return e3(this,t),n3(this,r3(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o3(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"PredecessorsTab"}},{key:"type",get:function(){return"predecessorstab"}},{key:"defaultConfig",get:function(){return Object.assign(this.makeDefaultConfig("fromEvent"),{cls:"b-predecessors-tab"})}}],(r=null)&&t3(n.prototype,r),o&&t3(n,o),t}(Y2);function a3(e){return(a3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c3(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function s3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f3(e,t){return!t||"object"!==a3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d3(e,t,n){return(d3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p3(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p3(e){return(p3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h3(e,t){return(h3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}i3._$name="PredecessorsTab",se.register(i3.type,i3);var y3=function(e){function t(){return s3(this,t),f3(this,p3(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h3(e,t)}(t,e),n=t,r=[{key:"afterConstruct",value:function(){d3(p3(t.prototype),"afterConstruct",this).call(this);var e=this,n=e.addButton=e.widgetMap["resourcestab-add"],r=e.removeButton=e.widgetMap["resourcestab-remove"],o=e.grid=e.widgetMap["resourcestab-grid"];n&&n.on("click",e.onAddClick,e),r&&r.on("click",e.onRemoveClick,e),o.on({selectionChange:e.onGridSelectionChange,startCellEdit:e.onGridStartCellEdit,finishCellEdit:e.onGridFinishCellEdit,thisObj:e})}},{key:"loadEvent",value:function(e){var n=this,r=n.assignmentGrid,o=!r.store.chained,i=!o&&e!==n.record;d3(p3(t.prototype),"loadEvent",this).call(this,e);var a=n.resourceCombo,u=n.getProject().getAssignmentStore(),c=n.getProject().getResourceStore();o?(n.assignmentStoreGeneration=u.storage.generation,n.resourceStoreGeneration=c.storage.generation,r.store=u.makeChained((function(e){return n.record&&e.event===n.record}),["resource"]),a.store=c.makeChained((function(e){return n.record&&!n.record.isAssignedTo(e)||!n.activeAssignment||n.activeAssignment.resource===e}))):((i||u.storage.generation!==n.assignmentStoreGeneration)&&r.store.fillFromMaster(),(i||c.storage.generation!==n.resourceStoreGeneration)&&a.store.fillFromMaster())}},{key:"insertNewAssignment",value:(i=regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=this).getProject(),r=n.getAssignmentStore(),o=t.assignmentGrid,i=r.insert(0,{event:t.record,resource:null,units:100}),a=u3(i,1),u=a[0],t.assignmentStoreGeneration=r.storage.generation,o.features.cellEdit.startEditing({field:"resource",id:u.id}),e.abrupt("return",u);case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){c3(o,n,r,a,u,"next",e)}function u(e){c3(o,n,r,a,u,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"onAddClick",value:function(){this.insertNewAssignment()}},{key:"onRemoveClick",value:function(){var e=this;e.assignmentGrid.store.remove(e.assignmentGrid.selectedRecords),e.assignmentGrid.selectedRecords=null,e.removeButton.disable(),e.requestPropagation()}},{key:"onGridSelectionChange",value:function(e){var t=e.selection;t&&t.length?this.removeButton.enable():this.removeButton.disable()}},{key:"onGridStartCellEdit",value:function(e){var t=e.editorContext;"resource"===t.column.field&&(this.resourceCombo.store.fillFromMaster(),this._editingAssignment=t.record)}},{key:"onGridFinishCellEdit",value:function(){var e=this;e._editingAssignment?(e._editingAssignment.resource&&e.requestPropagation(),e._editingAssignment=null):e.requestPropagation()}},{key:"pruneInvalidAssignments",value:function(){var e=this.assignmentGrid.store;e.remove(e.query((function(e){return!e.isValid})))}},{key:"assignmentGrid",get:function(){return this.widgetMap&&this.widgetMap["resourcestab-grid"]}},{key:"resourceCombo",get:function(){var e=this.assignmentGrid,t=e&&e.columns.get("resource");return t&&t.editor}},{key:"activeAssignment",get:function(){return this.assignmentGrid.features.cellEdit.activeRecord}}],o=[{key:"$name",get:function(){return"ResourcesTab"}},{key:"type",get:function(){return"resourcestab"}},{key:"defaultConfig",get:function(){var e=this;return{localeClass:this,ref:"resourcestab",title:"L{Resources}",layoutStyle:{flexFlow:"column nowrap"},items:[{type:"container",flex:"0 0 auto",items:[{type:"button",cls:"b-add-button b-green",icon:"b-icon b-icon-add",ref:"resourcestab-add"},{type:"button",cls:"b-remove-button b-red",icon:"b-icon b-icon-trash",disabled:!0,ref:"resourcestab-remove"}]},{type:"grid",flex:"1 1 auto",ref:"resourcestab-grid",columns:[{localeClass:this,text:"L{Resource}",field:"resource",flex:7,renderer:function(e){var t=e.value;return t&&t.name||""},editor:{type:"modelcombo",displayField:"name",valueField:"id",editable:!1}},{localeClass:this,text:"L{Units}",field:"units",flex:3,renderer:function(t){return e.L("unitsTpl",t)},editor:{type:"numberfield",min:0,max:100,step:10}}],disableGridRowModelWarning:!0}]}}}],r&&l3(n.prototype,r),o&&l3(n,o),t}(z0(K0(M0(pa))));function g3(e){return(g3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b3(e,t){return!t||"object"!==g3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w3(e,t,n,r){return(w3="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=O3(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function k3(e,t,n,r,o){if(!w3(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function S3(e,t,n){return(S3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=O3(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O3(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E3(e)););return e}function E3(e){return(E3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C3(e,t){return(C3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}y3._$name="ResourcesTab",se.register(y3.type,y3);var x3=function(e){function t(){return v3(this,t),b3(this,E3(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C3(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ConstraintTypePicker"}},{key:"type",get:function(){return"constrainttypepicker"}}],(r=[{key:"updateLocalization",value:function(){S3(E3(t.prototype),"updateLocalization",this).call(this),this.store.data=this.buildStoreData()}},{key:"buildStoreData",value:function(){var e=this;return[{id:"none",text:e.L("None")},{id:"muststarton",text:e.L("muststarton")},{id:"mustfinishon",text:e.L("mustfinishon")},{id:"startnoearlierthan",text:e.L("startnoearlierthan")},{id:"startnolaterthan",text:e.L("startnolaterthan")},{id:"finishnoearlierthan",text:e.L("finishnoearlierthan")},{id:"finishnolaterthan",text:e.L("finishnolaterthan")}]}},{key:"value",set:function(e){k3(E3(t.prototype),"value",e,this,!0)},get:function(){var e=S3(E3(t.prototype),"value",this);return"none"===e?null:e}},{key:"store",get:function(){return this._store||(this.store=new ed({data:this.buildStoreData(),allowNullId:!0})),this._store},set:function(e){k3(E3(t.prototype),"store",e,this,!0)}}])&&m3(n.prototype,r),o&&m3(n,o),t}(jp);function _3(e){return(_3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R3(e,t){return!t||"object"!==_3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P3(e,t,n){return(P3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=A3(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function T3(e,t,n,r){return(T3="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=A3(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function A3(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M3(e)););return e}function M3(e){return(M3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I3(e,t){return(I3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}x3._$name="ConstraintTypePicker",se.register(x3.type,x3);var F3=function(e){function t(){return j3(this,t),R3(this,M3(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I3(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"SchedulingModePicker"}},{key:"type",get:function(){return"schedulingmodecombo"}}],(r=[{key:"buildStoreData",value:function(){return[{id:o2.Normal,text:this.L("Normal")},{id:o2.FixedDuration,text:this.L("Fixed Duration")},{id:o2.FixedUnits,text:this.L("Fixed Units")},{id:o2.FixedEffort,text:this.L("Fixed Effort")}]}},{key:"updateLocalization",value:function(){P3(M3(t.prototype),"updateLocalization",this).call(this),this.store.data=this.buildStoreData()}},{key:"store",get:function(){return this._store||(this.store=new ed({data:this.buildStoreData()})),this._store},set:function(e){!function(e,t,n,r,o){if(!T3(e,t,n,r||e)&&o)throw new Error("failed to set property")}(M3(t.prototype),"store",e,this,!0)}}])&&D3(n.prototype,r),o&&D3(n,o),t}(jp);function L3(e){return(L3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B3(e,t){return!t||"object"!==L3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z3(e,t,n){return(z3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V3(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function V3(e){return(V3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W3(e,t){return(W3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}F3._$name="SchedulingModePicker",se.register(F3.type,F3);var $3=function(e){function t(){return N3(this,t),B3(this,V3(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W3(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"AdvancedTab"}},{key:"type",get:function(){return"advancedtab"}},{key:"defaultConfig",get:function(){return{localeClass:this,title:"L{Advanced}",ref:"advancedtab",defaults:{localeClass:this,labelWidth:this.L("labelWidth")},items:[{type:"calendarfield",ref:"calendarField",name:"calendar",label:"L{Calendar}",flex:"1 0 50%",cls:"b-inline"},{type:"checkbox",ref:"manuallyScheduledField",name:"manuallyScheduled",label:"L{Manually scheduled}",flex:"1 0 50%"},{type:"schedulingmodecombo",ref:"schedulingModeField",name:"schedulingMode",label:"L{Scheduling mode}",flex:"1 0 50%",cls:"b-inline"},{type:"checkbox",ref:"effortDrivenField",name:"effortDriven",label:"L{Effort driven}",flex:"1 0 50%"},{html:"",dataset:{text:this.L("Constraint")},cls:"b-divider",flex:"1 0 100%"},{type:"constrainttypepicker",ref:"constraintTypeField",name:"constraintType",label:"L{Constraint type}",clearable:!0,flex:"1 0 50%",cls:"b-inline"},{type:"date",ref:"constraintDateField",name:"constraintDate",label:"L{Constraint date}",flex:"1 0 50%",cls:"b-inline"},{type:"checkbox",ref:"rollupField",name:"rollup",label:"L{Rollup}",flex:"1 0 50%",cls:"b-inline"}]}}}],(r=[{key:"loadEvent",value:function(e){var n=!this.record,r=this.calendarField;r&&n&&(r.store=e.getProject().getCalendarManagerStore()),z3(V3(t.prototype),"loadEvent",this).call(this,e)}},{key:"calendarField",get:function(){return this.widgetMap.calendarField}},{key:"constraintTypeField",get:function(){return this.widgetMap.constraintTypeField}},{key:"constraintDateField",get:function(){return this.widgetMap.constraintDateField}}])&&H3(n.prototype,r),o&&H3(n,o),t}(o1);function Y3(e){return(Y3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q3(e,t){return!t||"object"!==Y3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X3(e){return(X3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K3(e,t){return(K3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}$3._$name="AdvancedTab",se.register($3.type,$3);var Z3=function(e){function t(){return G3(this,t),q3(this,X3(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K3(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"NotesTab"}},{key:"type",get:function(){return"notestab"}},{key:"defaultConfig",get:function(){return{localeClass:this,title:"L{Notes}",ref:"notestab",layoutConfig:{alignItems:"flex-start",alignContent:"stretch"},items:[{type:"textareafield",cls:"b-taskeditor-notes-field",name:"note"}]}}}],(r=null)&&U3(n.prototype,r),o&&U3(n,o),t}(o1);function J3(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Q3(e){return(Q3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n4(e,t){return!t||"object"!==Q3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r4(e,t,n){return(r4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o4(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function o4(e){return(o4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i4(e,t){return(i4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Z3._$name="NotesTab",se.register(Z3.type,Z3);var a4=function(e){function t(){return e4(this,t),n4(this,o4(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i4(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TaskEditorBase"}},{key:"defaultConfig",get:function(){return{localeClass:this,title:"L{Information}",width:this.L("editorWidth"),cls:"b-schedulerpro-taskeditor",closable:!0,draggable:{handleSelector:":not(button,.b-field-inner)"},axisLock:"flexible",autoClose:!0,onChange:null,onCancel:null,onSave:null,autoShow:!1,height:"30em",closeAction:"cancelAndHide",items:null,bbar:[{localeClass:this,text:"L{Save}",type:"button",color:"b-green",ref:"saveButton"},{localeClass:this,text:"L{Delete}",type:"button",color:"b-gray",ref:"deleteButton"},{localeClass:this,text:"L{Cancel}",type:"button",color:"b-gray",ref:"cancelButton"}],durationDecimalPrecision:1,extraItems:null,tabsConfig:null,extraWidgets:null,defaultTabs:null,project:null}}}],(r=[{key:"processWidgetConfig",value:function(e){var t=this;switch(e.ref){case"startDateField":case"endDateField":e.project=this.project;break;case"fullDurationField":e.decimalPrecision=this.durationDecimalPrecision;break;case"predecessorstab-grid":case"successorstab-grid":e.durationDisplayPrecision=this.durationDisplayPrecision;break;case"tabs":e.items.forEach((function(e){e.extraItems=(t.extraItems||{})[e.type]}))}return!("deleteButton"===e.ref&&!this.showDeleteButton)&&e}},{key:"startConfigure",value:function(e){var n=e.tabsConfig||{},r=Mt.clone(e.defaultTabs);Object.keys(n).forEach((function(e){var t,o=n[e],i=r.find((function(n,r){return t=r,(e||"").toLowerCase()===n.type}));i?!1===o?r.splice(t,1):"object"===Q3(o)&&Object.assign(i,o):r.push(o)})),e.items[0].items=r,r4(o4(t.prototype),"startConfigure",this).call(this,e)}},{key:"afterConfigure",value:function(){var e=this,t=e.widgetMap,n=e.bbar&&e.bbar.widgetMap||{},r=n.cancelButton,o=n.deleteButton,i=n.saveButton;i&&i.on("click",e.onSaveClick,e),r&&r.on("click",e.onCancelClick,e),o&&o.on("click",e.onDeleteClick,e),Object.values(t).forEach((function(t){t.isEventChangePropagator&&t.on("requestPropagation",e.onPropagationRequested,e),t.isReadyStatePropagator&&t.on("readystatechange",e.onReadyStateChange,e)})),Te.on({locale:e.onLocaleChange,thisObj:e})}},{key:"onSaveClick",value:function(){this.canSave?this.trigger("save"):Cu.show({html:this.L("Can't save, please correct errors first.")})}},{key:"onCancelClick",value:function(){this.trigger("cancel")}},{key:"onDeleteClick",value:function(){this.trigger("delete")}},{key:"onPropagationRequested",value:function(){this.trigger("requestPropagation")}},{key:"onReadyStateChange",value:function(e){var t=e.source,n=e.canSave;this.requestReadyStateChange(),t.couldSaveTitle||(t.couldSaveTitle=t.title),t.parent===this.widgetMap.tabs&&(n?(t.titleElement.classList.remove("b-invalid"),t.title=t.couldSaveTitle,t.couldSaveTitle=null):(t.titleElement.classList.add("b-invalid"),t.title="<span class='b-icon b-icon-warning'></span>".concat(t.couldSaveTitle)))}},{key:"cancelAndHide",value:function(){this.onCancelClick()}},{key:"loadEvent",value:function(e){this.eachWidget((function(t){return"function"==typeof t.loadEvent&&t.loadEvent(e),!0}))}},{key:"beforeSave",value:function(){this.callWidgetHook("beforeSave")}},{key:"afterSave",value:function(){this.callWidgetHook("afterSave")}},{key:"beforeCancel",value:function(){this.callWidgetHook("beforeCancel")}},{key:"afterCancel",value:function(){this.callWidgetHook("afterCancel")}},{key:"beforeDelete",value:function(){this.callWidgetHook("beforeDelete")}},{key:"afterDelete",value:function(){this.callWidgetHook("afterDelete")}},{key:"callWidgetHook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.eachWidget((function(n){"function"==typeof n[e]&&n[e].apply(n,J3(t))}))}},{key:"onInternalKeyDown",value:function(e){if("Enter"===e.key&&this.owner.features.taskEdit.saveAndCloseOnEnter&&"input"===e.target.tagName.toLowerCase()){if(e.target.matches("input")){var n=ye.fromElement(e.target);n&&n.internalOnChange&&n.internalOnChange()}e.preventDefault(),this.onSaveClick()}r4(o4(t.prototype),"onInternalKeyDown",this).call(this,e)}},{key:"onLocaleChange",value:function(){this.width=this.L("editorWidth")}},{key:"extraWidgets",get:function(){return console.warn("`extraWidgets` was deprecated in 1.0.1, please change your code to use `extraItems`"),this.extraItems},set:function(e){console.warn("`extraWidgets` was deprecated in 1.0.1, please change your code to use `extraItems`"),this.extraItems=e}},{key:"canSave",get:function(){var e=!0;return Object.values(this.widgetMap).forEach((function(t){t.isReadyStatePropagator&&(e=e&&t.canSave)})),e}},{key:"canCancel",get:function(){var e=!0;return Object.values(this.widgetMap).forEach((function(t){t.isReadyStatePropagator&&(e=e&&t.canCancel)})),e}}])&&t4(n.prototype,r),o&&t4(n,o),t}(_0(Ya));function u4(e){return(u4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l4(e,t){return!t||"object"!==u4(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f4(e){return(f4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d4(e,t){return(d4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}a4._$name="TaskEditorBase";var p4=function(e){function t(){return c4(this,t),l4(this,f4(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d4(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"GanttTaskEditor"}},{key:"defaultConfig",get:function(){return{items:[{type:"tabpanel",ref:"tabs",flex:"1 0 100%",layoutConfig:{alignItems:"stretch",alignContent:"stretch"},items:[]}],defaultTabs:[{type:"generaltab"},{type:"successorstab"},{type:"predecessorstab"},{type:"resourcestab"},{type:"advancedtab"},{type:"notestab"}]}}}],(r=null)&&s4(n.prototype,r),o&&s4(n,o),t}(a4);function h4(e){return(h4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v4(e,t){return!t||"object"!==h4(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m4(e){return(m4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b4(e,t){return(b4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}p4._$name="GanttTaskEditor";var w4=function(e){return function(e){function t(){return y4(this,t),v4(this,m4(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b4(e,t)}(t,e),n=t,(r=[{key:"addAssignment",value:function(e){var t=e.event,n=e.resource,r=e.assignmentStore,o=e.assignmentConfig,i={assignment:r.add(Object.assign({},o,{event:t,resource:n}))[0]};return i.propagationPromise=r.getProject().propagate(),i}},{key:"removeAssignments",value:function(e,t){var n=new Set;return e.forEach((function(r){var o=r.event;o&&!o.placeHolder&&t&&(o.assignments.every((function(t){return e.includes(t)}))?n.has(o.id)||(o.remove(),n.add(o.id)):r.remove())})),this.project.propagate()}}])&&g4(n.prototype,r),o&&g4(n,o),t}(e||Y)};var k4=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function S4(e){return(S4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C4(e,t){return!t||"object"!==S4(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x4(e){return(x4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _4(e,t){return(_4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}k4._$name="ProCalendarIntervalModel";var j4=function(e,t){if(e!==t)throw new Error("Store set is prohibited for Scheduler Pro entity!")},D4=function(e){return function(e){function t(){return O4(this,t),C4(this,x4(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_4(e,t)}(t,e),n=t,o=[{key:"relationConfig",get:function(){return[]}}],(r=[{key:"taskStore",get:function(){return this.eventStore},set:function(e){this.eventStore=e}},{key:"eventStore",get:function(){var e=this.getProject();return e&&e.getEventStore()||null},set:function(e){j4(this.eventStore,e)}},{key:"leftProjectEventStore",get:function(){var e=this.leftProject;return e&&e.getEventStore()||null}},{key:"dependencyStore",get:function(){var e=this.getProject();return e&&e.getDependencyStore()||null},set:function(e){j4(this.dependencyStore,e)}},{key:"assignmentStore",get:function(){var e=this.getProject();return e&&e.getAssignmentStore()||null},set:function(e){j4(this.assignmentStore,e)}},{key:"resourceStore",get:function(){var e=this.getProject();return e&&e.getResourceStore()||null},set:function(e){j4(this.resourceStore,e)}},{key:"calendarManagerStore",get:function(){var e=this.getProject();return e&&e.getCalendarManagerStore()||null},set:function(e){j4(this.calendarManagerStore,e)}}])&&E4(n.prototype,r),o&&E4(n,o),t}(e||Y)};function R4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P4=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"new",value:function(e){var t=new this;return t.initialize(e),t}}],(n=[{key:"initialize",value:function(e){e&&Object.assign(this,e)}}])&&R4(t.prototype,n),r&&R4(t,r),e}();function T4(e){return(T4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M4(e,t){return!t||"object"!==T4(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I4(e){return(I4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F4(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L4(e,t)}function L4(e,t){return(L4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N4;!function(e){e[e.Cancel=0]="Cancel",e[e.Restart=1]="Restart",e[e.Resume=2]="Resume"}(N4||(N4={}));var H4=function(e){function t(){return A4(this,t),M4(this,I4(t).apply(this,arguments))}return F4(t,e),t}(P4),B4=function(e){function t(){return A4(this,t),M4(this,I4(t).apply(this,arguments))}return F4(t,e),t}(H4),z4=function(e){function t(){return A4(this,t),M4(this,I4(t).apply(this,arguments))}return F4(t,e),t}(H4),V4=function(e){function t(){return A4(this,t),M4(this,I4(t).apply(this,arguments))}return F4(t,e),t}(H4);function W4(e){return(W4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G4(e,t,n){return t&&Y4(e.prototype,t),n&&Y4(e,n),e}function U4(e,t){return!t||"object"!==W4(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q4(e){return(q4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X4(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K4(e,t)}function K4(e,t){return(K4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z4;!function(e){e[e.Cancel=0]="Cancel",e[e.Resume=1]="Resume"}(Z4||(Z4={}));var J4=function(e){function t(){return $4(this,t),U4(this,q4(t).apply(this,arguments))}return X4(t,e),G4(t,[{key:"onNode",value:function(e){}},{key:"onTopologicalNode",value:function(e){}},{key:"onCycle",value:function(e,t){return Z4.Cancel}}]),t}(P4),Q4=function(e){return function(e){function t(){return $4(this,t),U4(this,q4(t).apply(this,arguments))}return X4(t,e),G4(t,[{key:"walkDepth",value:function(e){var t,n=new Map,r=new Set,o=[{node:this,from:this}],i=function(){var i=o[t-1].node;if(r.has(i))return o.pop(),"continue";var a=n.get(i);if(null!=a){if(a<t){if(e.onCycle(i,o)!==Z4.Resume)return"break"}else r.add(i),e.onTopologicalNode(i);o.pop()}else{n.set(i,t),e.onNode(i);var u=o.length;e.forEachNext(i,(function(e){return o.push({node:e,from:i})})),o.length===u&&(r.add(i),e.onTopologicalNode(i),o.pop())}};e:for(;t=o.length;){switch(i()){case"continue":continue;case"break":break e}}}}]),t}(e)},e5=function(e){var t=e[e.length-1].node,n=[t],r=e.length-1,o=e.length-1;do{for(;r>=0&&e[r].from===e[o].from;r--);r>=0&&(n.push(e[r].node),o=r,r--)}while(r>=0&&e[r].node!==t);return n.push(t),n.reverse()},t5=function(e){function t(){return $4(this,t),U4(this,q4(t).apply(this,arguments))}return X4(t,e),G4(t,[{key:"forEachNext",value:function(e,t){e.forEachOutgoing(this,t)}}]),t}(J4),n5=function(e){var t=function(e){function t(){return $4(this,t),U4(this,q4(t).apply(this,arguments))}return X4(t,e),G4(t,[{key:"forEachOutgoing",value:function(e,t){this.getOutgoing(e).forEach(t)}}]),t}(e);return t},r5=function(e){var t=function(e){function t(){return $4(this,t),U4(this,q4(t).apply(this,arguments))}return X4(t,e),G4(t,[{key:"forEachIncoming",value:function(e,t){this.getIncoming(e).forEach(t)}}]),t}(e);return t};function o5(e){return(o5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i5(e,t,n){return(i5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l5(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function a5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c5(e,t,n){return t&&u5(e.prototype,t),n&&u5(e,n),e}function s5(e,t){return!t||"object"!==o5(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l5(e){return(l5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d5(e,t)}function d5(e,t){return(d5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p5=function(e){return function(e){function t(){var e;return a5(this,t),(e=s5(this,l5(t).apply(this,arguments))).outgoing=new Set,e}return f5(t,e),c5(t,[{key:"hasEdgeTo",value:function(e){return this.outgoing.has(e)}},{key:"addEdgeTo",value:function(e){this.outgoing.add(e)}},{key:"removeEdgeTo",value:function(e){this.outgoing.delete(e)}},{key:"addEdgesTo",value:function(e){var t=this;e.forEach((function(e){return t.addEdgeTo(e)}))}},{key:"getOutgoing",value:function(e){return Array.from(this.outgoing)}},{key:"forEachOutgoing",value:function(e,t){this.outgoing.forEach(t)}}]),t}(e)},h5=function(e){return function(e){function t(){var e;return a5(this,t),(e=s5(this,l5(t).apply(this,arguments))).incoming=new Set,e}return f5(t,e),c5(t,[{key:"hasEdgeFrom",value:function(e){return this.incoming.has(e)}},{key:"addEdgeFrom",value:function(e){this.incoming.add(e)}},{key:"removeEdgeFrom",value:function(e){this.incoming.delete(e)}},{key:"addEdgesFrom",value:function(e){var t=this;e.forEach((function(e){return t.addEdgeFrom(e)}))}},{key:"getIncoming",value:function(e){return Array.from(this.incoming)}},{key:"forEachIncoming",value:function(e,t){this.incoming.forEach(t)}}]),t}(e)},y5=function(e){function t(){return a5(this,t),s5(this,l5(t).apply(this,arguments))}return f5(t,e),t}(function(e){function t(){return a5(this,t),s5(this,l5(t).apply(this,arguments))}return f5(t,e),c5(t,[{key:"addEdgeTo",value:function(e){i5(l5(t.prototype),"addEdgeTo",this).call(this,e),e.incoming.add(this)}},{key:"removeEdgeTo",value:function(e){i5(l5(t.prototype),"removeEdgeTo",this).call(this,e),e.incoming.delete(this)}},{key:"addEdgeFrom",value:function(e){i5(l5(t.prototype),"addEdgeFrom",this).call(this,e),e.outgoing.add(this)}},{key:"removeEdgeFrom",value:function(e){i5(l5(t.prototype),"removeEdgeFrom",this).call(this,e),e.outgoing.delete(this)}}]),t}(p5(h5(n5(r5(Q4(P4)))))));function g5(e){return(g5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b5(e,t){return!t||"object"!==g5(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w5(e){return(w5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S5(e,t)}function S5(e,t){return(S5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O5=function(e){function t(){return v5(this,t),b5(this,w5(t).apply(this,arguments))}return k5(t,e),t}(function(e){return function(e){function t(){var e;return v5(this,t),(e=b5(this,w5(t).apply(this,arguments))).nodes=new Set,e}var n,r,o;return k5(t,e),n=t,(r=[{key:"getNodes",value:function(){return this.nodes}},{key:"hasDirectNode",value:function(e){return this.getNodes().has(e)}},{key:"addNodes",value:function(e){var t=this;e.forEach((function(e){return t.addNode(e)}))}},{key:"addNode",value:function(e){return this.nodes.add(e),e}},{key:"removeNodes",value:function(e){var t=this;e.forEach((function(e){return t.removeNode(e)}))}},{key:"removeNode",value:function(e){if(!this.hasDirectNode(e))throw new Error("This [".concat(e,"] does not exists in the graph"));e.outgoing.forEach((function(t){return t.removeEdgeFrom(e)})),e.incoming.forEach((function(t){return t.removeEdgeTo(e)})),this.nodes.delete(e)}},{key:"getIncoming",value:function(){return Array.from(this.nodes)}},{key:"getOutgoing",value:function(){return Array.from(this.nodes)}},{key:"forEachIncoming",value:function(e,t){this.nodes.forEach(t)}},{key:"forEachOutgoing",value:function(e,t){this.nodes.forEach(t)}}])&&m5(n.prototype,r),o&&m5(n,o),t}(e)}(p5(h5(n5(r5(Q4(P4))))))),E5=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)},C5=function(e){return Object(e)!==e},x5=function(e,t,n){return Object.defineProperty(e,t,{value:n}),n};function _5(e){return(_5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D5(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function R5(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){D5(i,r,o,a,u,"next",e)}function u(e){D5(i,r,o,a,u,"throw",e)}a(void 0)}))}}function P5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A5(e,t){return!t||"object"!==_5(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M5(e,t,n){return(M5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I5(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function I5(e){return(I5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L5(e,t)}function L5(e,t){return(L5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N5;!function(e){e[e.Canceled=0]="Canceled",e[e.Completed=1]="Completed",e[e.Passed=2]="Passed"}(N5||(N5={}));var H5=function(e){function t(){return P5(this,t),A5(this,I5(t).apply(this,arguments))}return F5(t,e),t}(function(e){return function(e){function t(){var e;return P5(this,t),(e=A5(this,I5(t).apply(this,arguments))).nodesMap=new Map,e.needRecalculationAtoms=new Set,e.stableAtoms=new Set,e.isPropagating=!1,e.propagateCompletedListeners=[],e.propagateSuspended=0,e}var n,r,o,i,a,u,c,s,l;return F5(t,e),n=t,(r=[{key:"isAtomNeedRecalculation",value:function(e){return this.needRecalculationAtoms.has(e)}},{key:"markAsNeedRecalculation",value:function(e){this.needRecalculationAtoms.add(e)}},{key:"markProcessed",value:function(e){this.needRecalculationAtoms.delete(e)}},{key:"markStable",value:function(e){this.stableAtoms.add(e)}},{key:"isAtomStable",value:function(e){return this.stableAtoms.has(e)}},{key:"commit",value:function(){this.needRecalculationAtoms.forEach((function(e){return e.clearUserInput()})),this.needRecalculationAtoms.clear(),this.changedAtoms.forEach((function(e){return e.commitValue()})),this.stableAtoms.forEach((function(e){return e.commitEdges()})),this.stableAtoms.clear()}},{key:"reject",value:function(){this.rejectPartialProgress(),this.needRecalculationAtoms.forEach((function(e){return e.clearUserInput()})),this.needRecalculationAtoms.clear()}},{key:"rejectPartialProgress",value:function(){this.touchedAtoms.forEach((function(e,t){return t.reject()})),this.stableAtoms.clear()}},{key:"addNode",value:function(e){var n=M5(I5(t.prototype),"addNode",this).call(this,e);return this.nodesMap.set(e.id,e),this.markAsNeedRecalculation(e),e.onEnterGraph(this),n}},{key:"removeNode",value:function(e){var n=this;e.outgoing.forEach((function(e){return n.markAsNeedRecalculation(e)}));var r=M5(I5(t.prototype),"removeNode",this).call(this,e);return this.nodesMap.delete(e.id),this.needRecalculationAtoms.delete(e),this.stableAtoms.delete(e),e.onLeaveGraph(this),r}},{key:"startAtomCalculation",value:function(e){var t=e.calculate(e.proposedValue),n=t.next(),r=n.value;return r instanceof H4?{effect:r,continuation:{iterator:t}}:n.done?{value:r}:{continuation:{atom:r,iterator:t}}}},{key:"continueAtomCalculation",value:function(e,t,n){var r=this,o=t.iterator,i=t.atom;do{var a=void 0;if(i)if(e.observedDuringCalculation.push(i),n.has(i)&&!this.isAtomStable(i)){var u=void 0;r.walkDepth(t5.new({forEachNext:function(e,t){e===r?r.needRecalculationAtoms.forEach(t):e.observedDuringCalculation.forEach(t)},onCycle:function(e,t){return u=e5(t),Z4.Cancel}})),a={value:V4.new({cycle:u}),done:!0}}else a=o.next(i.hasNextStableValue()?i.getNextStableValue():i.getConsistentValue());else a=o.next();var c=a.value;if(c instanceof H4)return{effect:c,continuation:{iterator:o}};if(a.done)return{value:c};i=c}while(!n.has(i)||this.isAtomStable(i));return{continuation:{iterator:o,atom:i}}}},{key:"propagateSingle",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s,l,f,d,p,h,y=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=new Set,r=this,o=null,this.walkDepth(t5.new({forEachNext:function(e,t){e===r?r.needRecalculationAtoms.forEach(t):t5.prototype.forEachNext.call(this,e,t)},onNode:function(e){},onCycle:function(e,t){return o=e5(t),Z4.Cancel},onTopologicalNode:function(e){e!==y&&(n.add(e),t.push(e))}})),!o){e.next=7;break}return e.abrupt("return",V4.new({cycle:o}));case 7:a=this.touchedAtoms=new Map,u=new Map,c=this.changedAtoms=[];case 10:if(!(i=t.length)){e.next=24;break}if(s=t[i-1],!this.isAtomStable(s)&&n.has(s)){e.next=15;break}return t.pop(),e.abrupt("continue",10);case 15:if(l=u.get(s),f=void 0,null!=l?(d=a.get(s),f=this.continueAtomCalculation(s,d,n)):(u.set(s,i),f=this.startAtomCalculation(s)),!f.effect){e.next=21;break}return e.next=21,f.effect;case 21:f.continuation?(a.set(s,f.continuation),(p=f.continuation.atom)&&(s.observedDuringCalculation.push(p),t.push(p))):(a.set(s,null),h=f.value,s.equality(h,s.getConsistentValue())||(c.push(s),s.nextStableValue=h),this.markStable(s),t.pop()),e.next=10;break;case 24:return e.abrupt("return",{success:!0});case 25:case"end":return e.stop()}}),e,this)}))},{key:"onEffect",value:(l=R5(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof B4)){e.next=2;break}return e.abrupt("return",N4.Cancel);case 2:if(!(t instanceof z4)){e.next=4;break}return e.abrupt("return",N4.Restart);case 4:if(!(t instanceof V4)){e.next=6;break}throw new Error("Graph cycle detected");case 6:return e.abrupt("return",N4.Resume);case 7:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"waitForPropagateCompleted",value:function(){var e=this;return this.isPropagating?new Promise((function(t){e.propagateCompletedListeners.push(t)})):Promise.resolve(null)}},{key:"suspendPropagate",value:function(){this.propagateSuspended++}},{key:"resumePropagate",value:(s=R5(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.propagateSuspended){e.next=7;break}if(!--this.propagateSuspended){e.next=5;break}return e.abrupt("return",this.resumePromise);case 5:if(!this.resumePromise||!1===t){e.next=7;break}return e.abrupt("return",this.propagate());case 7:return e.abrupt("return",Promise.resolve(N5.Completed));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"propagate",value:(c=R5(regeneratorRuntime.mark((function e(t){var n,r,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],!(r=this).propagateSuspended){e.next=7;break}return r.resumePromise||(r.resumePromise=new Promise((function(e,t){r.resumeResolved=e,r.resumeRejected=t}))),e.abrupt("return",r.resumePromise);case 7:if(!r.resumePromise){e.next=13;break}return o=r.resumeResolved,i=r.resumeRejected,r.resumePromise=r.resumeResolved=r.resumeRejected=null,e.abrupt("return",r.propagateUnsuspended(t,n).then((function(e){return o(e),e}),(function(e){return i(e),e})));case 13:return e.abrupt("return",r.propagateUnsuspended(t,n));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"propagateUnsuspended",value:(u=R5(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]&&s[1],!this.isPropagating){e.next=3;break}throw new Error("Can not nest calls to `propagate`, use `waitForPropagateCompleted`");case 3:this.isPropagating=!0;case 4:r=!1,i=this.propagateSingle(),a=void 0;case 7:if(a=i.next(),!((u=a.value)instanceof H4)){e.next=34;break}if(c=void 0,!t){e.next=17;break}return e.next=14,t(u);case 14:c=e.sent,e.next=20;break;case 17:return e.next=19,this.onEffect(u);case 19:c=e.sent;case 20:if(c!==N4.Cancel){e.next=30;break}return"function"==typeof n&&n(),this.reject(),this.isPropagating=!1,e.next=26,this.propagationCompletedHook();case 26:return this.onPropagationCompleted(N5.Canceled),e.abrupt("return",N5.Canceled);case 30:if(c!==N4.Restart){e.next=34;break}return this.rejectPartialProgress(),r=!0,e.abrupt("break",35);case 34:if(!a.done){e.next=7;break}case 35:if(r){e.next=4;break}case 36:if(!n){e.next=46;break}return"function"==typeof n&&n(),this.reject(),this.isPropagating=!1,e.next=42,this.propagationCompletedHook();case 42:this.onPropagationCompleted(N5.Completed),o=N5.Passed,e.next=52;break;case 46:return this.commit(),this.isPropagating=!1,e.next=50,this.propagationCompletedHook();case 50:this.onPropagationCompleted(N5.Completed),o=N5.Completed;case 52:return e.abrupt("return",o);case 53:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"tryPropagateWithNodes",value:(a=R5(regeneratorRuntime.mark((function e(t,n,r){var o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.length&&(n=n.filter((function(e){return e.graph!==i}))).length&&this.addNodes(n),e.next=3,this.propagate(t,r||!0);case 3:return o=e.sent,n&&n.length&&n&&this.removeNodes(n),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"propagationCompletedHook",value:(i=R5(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"onPropagationCompleted",value:function(e){this.propagateCompletedListeners.forEach((function(t){return t(e)})),this.propagateCompletedListeners=[]}},{key:"commitAllEdges",value:function(){this.nodes.forEach((function(e){return e.commitEdges()}))}},{key:"toDotOnCycleException",value:function(){return this.commitAllEdges(),this.toDot()}},{key:"toDotAtomName",value:function(e){var t=j5(String(e.id).split("/"),2),n=t[0],r=t[1];if(e.self){var o=e.self;o.name&&(n=o.name)}return"".concat(n,"/").concat(r||"self")}},{key:"toDotAtomValue",value:function(e){var t;if(e.newRefs&&e.oldRefs){var n=e.get();t="Set(".concat(n&&n.size||0,")")}else t=e.get();return t instanceof Date?t=[t.getFullYear(),".",t.getMonth()+1,".",t.getDate()," ",t.getHours()+":"+t.getMinutes()].join(""):Array.isArray(t)&&(t="Array(".concat(t.length,")")),t}},{key:"toDotAtomColor",value:function(e){return!this.isAtomNeedRecalculation(e)||this.isAtomStable(e)?"darkgreen":"red"}},{key:"toDotObtainCycle",value:function(){var e={};return this.walkDepth(t5.new({onCycle:function(t,n){var r=e5(n);return e=r.reduce((function(e,t){var n=j5(e,2),r=n[0],o=n[1];return o&&(r[o.id]=t.id),[r,t]}),[e,null])[0],Z4.Cancel}})),e}},{key:"toDot",value:function(){var e=this,t=["digraph ChronoGraph {","splines=spline"],n=Array.from(this.nodesMap.entries()),r=n.reduce((function(e,t){var n=j5(t,2),r=n[0],o=n[1],i=j5(String(r).split("/"),2),a=i[0],u=i[1],c=o.self||{},s=c.id,l=c.name,f=o.field;return a=l||s||a,u=f&&f.name||u,e.has(a)?e.get(a).add([u,o]):e.set(a,new Set([[u||"",o]])),e}),new Map);t=Array.from(r.entries()).reduce((function(t,n,r){var o=j5(n,2),i=o[0],a=o[1];return t.push("subgraph cluster_".concat(r," {")),t.push('label="'.concat(i,'"')),(t=Array.from(a.values()).reduce((function(t,n){var r=j5(n,2),o=r[0],i=r[1],a=e.toDotAtomValue(i),u=e.toDotAtomColor(i);return t.push('"'.concat(i.id,'" [label="').concat(o,"=").concat(a,'", fontcolor="').concat(u,'"]')),t}),t)).push("}"),t}),t);var o=this.toDotObtainCycle();return(t=n.reduce((function(t,n){var r=j5(n,2),i=r[0],a=r[1],u=a.outgoing;return Array.from(u).reduce((function(t,n){var r=!e.isAtomNeedRecalculation(a)||e.isAtomStable(a)?"darkgreen":"red",u=o[i]==n.id?5:1;return t.push('"'.concat(i,'" -> "').concat(n.id,'" [label="').concat("",'", color="').concat(r,'", penwidth=').concat(u,"]")),t}),t),t}),t)).push("}"),t.join("\n")}},{key:"toDotAtomIncoming",value:function(e){var t=this,n=["digraph ChronoGraph {","splines=spline"],r=new Set;!function(e,t,n){for(var r,o,i=[e];i.length;)n(r=i.pop()),(o=t(r))&&(i=i.concat(o.slice().reverse()))}(e,(function(e){return Array.from(e.incoming)}),(function(e){return r.add(e)})),n=Array.from(r).reduce((function(n,r){var o,i,a=t.toDotAtomName(r),u=t.toDotAtomValue(r);return r==e?(o="orange",i=5):(o=t.toDotAtomColor(r),i=1),n.push('"'.concat(r.id,'" [label="').concat(a,"=").concat(u,'", fontcolor="').concat(o,'", penwidth=').concat(i,"]")),n}),n);var o=this.toDotObtainCycle();return(n=Array.from(r).reduce((function(e,n){return Array.from(n.incoming).reduce((function(e,r){var i=r.id,a=n.id,u=t.toDotAtomColor(r),c=o[i]==a?5:1;return e.push('"'.concat(i,'" -> "').concat(a,'" [label="", color="').concat(u,'", penwidth=').concat(c,"]")),e}),e)}),n)).push("}"),n.join("\n")}}])&&T5(n.prototype,r),o&&T5(n,o),t}(e)}(O5));function B5(e){return(B5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W5(e,t){return!t||"object"!==B5(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $5(e){return($5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y5(e,t){return(Y5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G5=Symbol("IteratorReturnedEarly"),U5=function(e){function t(){var e;return z5(this,t),(e=W5(this,$5(t).apply(this,arguments))).fields=new Map,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y5(e,t)}(t,e),n=t,(r=[{key:"hasField",value:function(e){return void 0!==this.getField(e)}},{key:"getField",value:function(e){var t=void 0;return this.forEachParent((function(n){var r=n.fields.get(e);if(r)return t=r,G5})),t}},{key:"addField",value:function(e){var t=e.name;if(!t)throw new Error("Field must have a name");if(this.fields.has(t))throw new Error("Field with name [".concat(String(t),"] already exists"));return e.entity=this,this.fields.set(t,e),e}},{key:"forEachParent",value:function(e){for(var t=this;t;){if(e(t)===G5)return G5;t=t.parentEntity}}},{key:"forEachField",value:function(e){var t=new Set;this.forEachParent((function(n){n.fields.forEach((function(n,r){t.has(r)||(t.add(r),e(n,r))}))}))}}])&&V5(n.prototype,r),o&&V5(n,o),t}(P4),q5=1,X5=function(){return"chrono".concat(q5++)};function K5(e){return(K5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J5(e,t){return!t||"object"!==K5(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q5(e){return(Q5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e6(e,t){return(e6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t6(e){return(t6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n6(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function r6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i6(e,t){return!t||"object"!==t6(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a6(e){return(a6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u6(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c6(e,t)}function c6(e,t){return(c6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s6=function(e,t){return e instanceof Date&&t instanceof Date?e-t==0:e===t},l6=function(e){function t(){return r6(this,t),i6(this,a6(t).apply(this,arguments))}return u6(t,e),t}(function(e){return function(e){function t(){var e;return r6(this,t),(e=i6(this,a6(t).apply(this,arguments))).equality=s6,e.observedDuringCalculation=[],e}var n,r,o,i,a;return u6(t,e),n=t,(r=[{key:"clearUserInput",value:function(){this.proposedValue=void 0,this.proposedArgs=void 0}},{key:"commitValue",value:function(){var e=this.nextStableValue;this.nextStableValue=void 0,this.value=e}},{key:"commitEdges",value:function(){var e=this;this.incoming.forEach((function(t){return e.removeEdgeFrom(t)})),this.observedDuringCalculation.forEach((function(t){return e.addEdgeFrom(t)})),this.observedDuringCalculation=[]}},{key:"reject",value:function(){this.nextStableValue=void 0,this.observedDuringCalculation=[]}},{key:"calculate",value:regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.calculation){e.next=5;break}return e.delegateYield(this.calculation.call(this.calculationContext||this,t),"t0",2);case 2:return e.abrupt("return",e.t0);case 5:return e.abrupt("return",void 0!==t?t:this.value);case 6:case"end":return e.stop()}}),e,this)}))},{key:"hasValue",value:function(){return this.hasNextStableValue()||this.hasProposedValue()||this.hasConsistentValue()}},{key:"hasStableValue",value:function(){return this.hasNextStableValue()||this.hasConsistentValue()}},{key:"hasNextStableValue",value:function(){return void 0!==this.nextStableValue}},{key:"hasConsistentValue",value:function(){return void 0!==this.value}},{key:"hasProposedValue",value:function(){return void 0!==this.proposedArgs&&void 0!==this.proposedArgs[0]}},{key:"get",value:function(){return this.hasNextStableValue()?this.getNextStableValue():this.hasProposedValue()?this.getProposedValue():this.getConsistentValue()}},{key:"put",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.proposedValue=e,this.proposedArgs=Array.prototype.slice.call(arguments),this.graph&&this.graph.markAsNeedRecalculation(this)}},{key:"getNextStableValue",value:function(){return this.nextStableValue}},{key:"getConsistentValue",value:function(){return this.value}},{key:"getProposedValue",value:function(){return this.proposedValue}},{key:"set",value:(i=regeneratorRuntime.mark((function e(t){var n,r,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.graph,r=a.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=a[i];return this.put.apply(this,[t].concat(o)),e.abrupt("return",n?n.propagate():Promise.resolve(N5.Completed));case 4:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){n6(o,n,r,a,u,"next",e)}function u(e){n6(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"onEnterGraph",value:function(e){this.graph=e}},{key:"onLeaveGraph",value:function(e){this.graph=void 0}}])&&o6(n.prototype,r),o&&o6(n,o),t}(e)}(function(e){return function(e){function t(){var e;return Z5(this,t),(e=J5(this,Q5(t).apply(this,arguments))).id=X5(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&e6(e,t)}(t,e),t}(e)}(y5)));function f6(e){return(f6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h6(e,t,n){return t&&p6(e.prototype,t),n&&p6(e,n),e}function y6(e,t){return!t||"object"!==f6(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g6(e,t,n){return(g6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v6(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function v6(e){return(v6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m6(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b6(e,t)}function b6(e,t){return(b6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w6=function(e){return function(e){function t(){return d6(this,t),y6(this,v6(t).apply(this,arguments))}return m6(t,e),h6(t,[{key:"put",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(n=g6(v6(t.prototype),"put",this)).call.apply(n,[this,this.field.converter?this.field.converter(e,this.field):e].concat(o))}},{key:"toString",value:function(){return"Field atom [".concat(this.field.name,"] of entity [").concat(this.self,"}]")}}]),t}(e)},k6=function(e){function t(){return d6(this,t),y6(this,v6(t).apply(this,arguments))}return m6(t,e),t}(w6(l6)),S6=function(e){function t(){return d6(this,t),y6(this,v6(t).apply(this,arguments))}return m6(t,e),t}(function(e){return function(e){function t(){return d6(this,t),y6(this,v6(t).apply(this,arguments))}return m6(t,e),h6(t,[{key:"toString",value:function(){return"Entity atom [".concat(this.self.id,"]")}}]),t}(e)}(l6));function O6(e){return(O6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C6(e,t){return!t||"object"!==O6(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x6(e){return(x6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _6(e,t){return(_6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j6=function(e){function t(){var e;return E6(this,t),(e=C6(this,x6(t).apply(this,arguments))).persistent=!0,e.createAccessors=!0,e.atomCls=k6,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_6(e,t)}(t,e),t}(P4);function D6(e){return(D6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R6(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function P6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A6(e,t){return!t||"object"!==D6(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M6(e){return(M6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I6(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F6(e,t)}function F6(e,t){return(F6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L6=Symbol("isReplica"),N6=function(e){function t(){return P6(this,t),A6(this,M6(t).apply(this,arguments))}return I6(t,e),t}(function(e){return function(e){function t(){return P6(this,t),A6(this,M6(t).apply(this,arguments))}var n,r,o,i,a;return I6(t,e),n=t,(r=[{key:L6,value:function(){}},{key:"addEntity",value:function(e){e.enterGraph(this)}},{key:"addEntities",value:function(e){var t=this;e.forEach((function(e){return t.addEntity(e)}))}},{key:"removeEntity",value:function(e){e.leaveGraph()}},{key:"removeEntities",value:function(e){var t=this;e.forEach((function(e){return t.removeEntity(e)}))}},{key:"tryPropagateWithEntities",value:(i=regeneratorRuntime.mark((function e(t,n,r){var o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.length&&(n=n.filter((function(e){return e.$$.graph!==i})),this.addEntities(n)),e.next=3,this.propagate(t,r||!0);case 3:return o=e.sent,n&&n.length&&this.removeEntities(n),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){R6(o,n,r,a,u,"next",e)}function u(e){R6(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e,t,n){return a.apply(this,arguments)})}])&&T6(n.prototype,r),o&&T6(n,o),t}(e)}(H5));function H6(e){return(H6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B6(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function z6(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){B6(i,r,o,a,u,"next",e)}function u(e){B6(i,r,o,a,u,"throw",e)}a(void 0)}))}}function V6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $6(e,t){return!t||"object"!==H6(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y6(e){return(Y6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G6(e,t){return(G6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U6=Symbol("isEntity"),q6=function(e){var t=function(e){function t(){return V6(this,t),$6(this,Y6(t).apply(this,arguments))}var n,r,o,i,a,u,c,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G6(e,t)}(t,e),n=t,r=[{key:U6,value:function(){}},{key:"calculateSelf",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this);case 1:case"end":return e.stop()}}),e,this)}))},{key:"createFieldAtom",value:function(e){var t=e.name,n=this.$calculations&&this[this.$calculations[t]];return e.atomCls.new({id:"".concat(this.$$.id,"/").concat(t),field:e,self:this,calculationContext:n?this:void 0,calculation:n})}},{key:"getGraph",value:function(){return this.$$.graph}},{key:"forEachFieldAtom",value:function(e){var t=this.$;for(var n in t)e.call(this,t[n],n)}},{key:"enterGraph",value:function(e){this.forEachFieldAtom((function(t){return e.addNode(t)})),e.addNode(this.$$)}},{key:"leaveGraph",value:function(){var e=this.$$.graph;e&&(this.forEachFieldAtom((function(t){return e.removeNode(t)})),e.removeNode(this.$$))}},{key:"isPropagating",value:function(){return this.getGraph().isPropagating}},{key:"suspendPropagate",value:function(){var e=this.getGraph();e&&e.suspendPropagate()}},{key:"resumePropagate",value:(s=z6(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getGraph(),e.abrupt("return",n&&n.resumePropagate(t)||Promise.resolve(N5.Completed));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"propagate",value:(c=z6(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],r=this.getGraph(),e.abrupt("return",r&&r.propagate(t,n)||Promise.resolve(N5.Completed));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"waitForPropagateCompleted",value:(u=z6(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getGraph().waitForPropagateCompleted());case 1:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"tryPropagateWithNodes",value:(a=z6(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getGraph().tryPropagateWithNodes(t,n,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"tryPropagateWithEntities",value:(i=z6(regeneratorRuntime.mark((function e(t,n,r){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.getGraph(),a=o,!Boolean(a&&a[L6])){e.next=5;break}i=o.tryPropagateWithEntities(t,n,r),e.next=6;break;case 5:throw new Error("Entity is not part of replica");case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}var a}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"markAsNeedRecalculation",value:function(e){this.getGraph().markAsNeedRecalculation(e)}},{key:"markStable",value:function(e){this.getGraph().markStable(e)}},{key:"run",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o,i,a=this[e].apply(this,n);;){var u=(o=a.next(i)).value;if(u instanceof H4)throw new Error("Helper methods can not yield effects during computation");if(o.done)return u;var c=u;if(this.getGraph().isAtomNeedRecalculation(c))throw new Error("Can not use stale atom for calculations");i=c.get()}}},{key:"$entity",get:function(){return X6(this.constructor.prototype)}},{key:"$",get:function(){var e=this,t={};return this.$entity.forEachField((function(n,r){t[r]=e.createFieldAtom(n)})),x5(this,"$",t)}},{key:"$$",get:function(){return x5(this,"$$",S6.new({entity:this.$entity,self:this,equality:function(){return!1},calculation:this.calculateSelf,calculationContext:this}))}}],o=[{key:"getField",value:function(e){return this.getEntity().getField(e)}},{key:"getEntity",value:function(){return K6(this.prototype)}}],r&&W6(n.prototype,r),o&&W6(n,o),t}(e);return t},X6=function(e){var t=Object.getPrototypeOf(e);return x5(e,"$entity",U5.new({parentEntity:t.hasOwnProperty(U6)?null:t.$entity}))},K6=function(e){var t=e.$entity;return e.hasOwnProperty("$entity")||(t=X6(e)),t},Z6=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j6;return function(n,r){if(K6(n).addField(t.new(Object.assign(e||{},{name:r}))).createAccessors){Object.defineProperty(n,r,{get:function(){return this.$[r].get()},set:function(e){return this.$[r].put(e)}});var o="get".concat(E5(r)),i="set".concat(E5(r));o in n||(n[o]=function(){var e;return(e=this.$[r]).get.apply(e,arguments)}),i in n||(n[i]=function(){var e;return(e=this.$[r]).set.apply(e,arguments)})}}},J6=Z6,Q6=function(e){return function(t,n,r){var o=t.$calculations;o||(o=t.$calculations={}),o[e]=n}};function e8(e){return(e8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n8(e,t,n){return t&&t8(e.prototype,t),n&&t8(e,n),e}function r8(e,t,n){return(r8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a8(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function o8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i8(e,t){return!t||"object"!==e8(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a8(e){return(a8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u8(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c8(e,t)}function c8(e,t){return(c8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s8=function(e){return function(e){function t(){var e;return o8(this,t),(e=i8(this,a8(t).apply(this,arguments))).atomCls=m8,e}return u8(t,e),t}(e)},l8=function(e){function t(){return o8(this,t),i8(this,a8(t).apply(this,arguments))}return u8(t,e),t}(s8(j6)),f8=function(e){return function(e){function t(){var e;return o8(this,t),(e=i8(this,a8(t).apply(this,arguments))).persistent=!1,e.atomCls=g8,e}return u8(t,e),t}(e)},d8=function(e){function t(){return o8(this,t),i8(this,a8(t).apply(this,arguments))}return u8(t,e),t}(f8(j6)),p8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d8;return Z6(e,t)},h8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l8;return Z6(e,t)},y8=function(e){return function(e){function t(){var e;return o8(this,t),(e=i8(this,a8(t).apply(this,arguments))).oldRefs=new Set,e.newRefs=new Set,e.value=new Set,e}return u8(t,e),n8(t,[{key:"commitValue",value:function(){r8(a8(t.prototype),"commitValue",this).call(this),this.oldRefs.clear(),this.newRefs.clear()}},{key:"reject",value:function(){r8(a8(t.prototype),"reject",this).call(this),this.oldRefs.clear(),this.newRefs.clear()}},{key:"calculate",value:regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f,d,p,h,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Set,o=!0,i=!1,a=void 0,e.prev=4,u=this.incoming[Symbol.iterator]();case 6:if(o=(c=u.next()).done){e.next=16;break}if(r=c.value,this.oldRefs.has(r)){e.next=13;break}return e.next=11,r;case 11:null!=(s=e.sent)&&n.add(s);case 13:o=!0,e.next=6;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),i=!0,a=e.t0;case 22:e.prev=22,e.prev=23,o||null==u.return||u.return();case 25:if(e.prev=25,!i){e.next=28;break}throw a;case 28:return e.finish(25);case 29:return e.finish(22);case 30:l=!0,f=!1,d=void 0,e.prev=33,p=this.newRefs[Symbol.iterator]();case 35:if(l=(h=p.next()).done){e.next=44;break}return r=h.value,e.next=39,r;case 39:null!=(y=e.sent)&&n.add(y);case 41:l=!0,e.next=35;break;case 44:e.next=50;break;case 46:e.prev=46,e.t1=e.catch(33),f=!0,d=e.t1;case 50:e.prev=50,e.prev=51,l||null==p.return||p.return();case 53:if(e.prev=53,!f){e.next=56;break}throw d;case 56:return e.finish(53);case 57:return e.finish(50);case 58:return e.abrupt("return",n);case 59:case"end":return e.stop()}}),e,this,[[4,18,22,30],[23,,25,29],[33,46,50,58],[51,,53,57]])}))}]),t}(e)},g8=function(e){function t(){return o8(this,t),i8(this,a8(t).apply(this,arguments))}return u8(t,e),t}(y8(k6)),v8=function(e){return function(e){function t(){return o8(this,t),i8(this,a8(t).apply(this,arguments))}return u8(t,e),n8(t,[{key:"hasBucket",value:function(){return Boolean(this.field.bucket)}},{key:"addToBucket",value:function(e){e.newRefs.add(this.self.$$),this.graph&&this.graph.markAsNeedRecalculation(e)}},{key:"removeFromBucket",value:function(e){e.oldRefs.add(this.self.$$),this.graph&&this.graph.markAsNeedRecalculation(e)}},{key:"calculate",value:regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.resolve(void 0!==t?t:this.value),C5(n)){e.next=4;break}return e.next=4,n.$$;case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))},{key:"resolve",value:function(e){var t=this.field.resolver;return t&&void 0!==e&&C5(e)?t.call(this.self,e):e}},{key:"getBucket",value:function(e){return e.$[this.field.bucket]}},{key:"onEnterGraph",value:function(e){var n=this.get(),r=!0;if(void 0!==n&&C5(n)){r=!1;var o=this.resolve(n);C5(o)||(this.put(o),r=!0)}if(r8(a8(t.prototype),"onEnterGraph",this).call(this,e),void 0!==this.get()&&r&&this.hasBucket()){var i=this.getBucket(this.get());this.addToBucket(i)}}},{key:"onLeaveGraph",value:function(e){if(this.hasValue()&&this.hasBucket()){var n=this.get();if(!C5(n)){var r=this.getBucket(n);this.removeFromBucket(r)}}r8(a8(t.prototype),"onLeaveGraph",this).call(this,e)}},{key:"put",value:function(e){var n=this.value;if(this.hasBucket()&&(null==n||C5(n)||this.removeFromBucket(this.getBucket(n)),null!=e))if(C5(e)){var r=this.resolve(e);null!=r&&(this.addToBucket(this.getBucket(r)),e=r)}else this.addToBucket(this.getBucket(e));r8(a8(t.prototype),"put",this).call(this,e)}}]),t}(e)},m8=function(e){function t(){return o8(this,t),i8(this,a8(t).apply(this,arguments))}return u8(t,e),t}(v8(w6(l6)));function b8(e){return(b8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k8(e,t,n){return t&&w8(e.prototype,t),n&&w8(e,n),e}function S8(e,t,n){return(S8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C8(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E8(e,t){return!t||"object"!==b8(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C8(e){return(C8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x8(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_8(e,t)}function _8(e,t){return(_8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j8=function(e){function t(){var e;return O8(this,t),(e=E8(this,C8(t).apply(this,arguments))).atomCls=P8,e.modelFieldConfig={},e}return x8(t,e),t}(j6),D8=function(e){function t(){var e;return O8(this,t),(e=E8(this,C8(t).apply(this,arguments))).atomCls=T8,e}return x8(t,e),t}(s8(j8)),R8=function(e){function t(){var e;return O8(this,t),(e=E8(this,C8(t).apply(this,arguments))).atomCls=A8,e}return x8(t,e),k8(t,[{key:"initialize",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=S8(C8(t.prototype),"initialize",this)).call.apply(e,[this].concat(r)),this.modelFieldConfig=Object.assign({isEqual:function(){return!1},defaultValue:new Set,persist:!1},this.modelFieldConfig)}}]),t}(f8(j8)),P8=function(e){function t(){return O8(this,t),E8(this,C8(t).apply(this,arguments))}return x8(t,e),k8(t,[{key:"value",get:function(){return this.self.get(this.field.name)},set:function(e){this.self.set(this.field.name,e)}}]),t}(k6),T8=function(e){function t(){return O8(this,t),E8(this,C8(t).apply(this,arguments))}return x8(t,e),t}(v8(P8)),A8=function(e){function t(){return O8(this,t),E8(this,C8(t).apply(this,arguments))}return x8(t,e),k8(t,[{key:"value",get:function(){if(this.self)return this.self.get(this.field.name)},set:function(e){this.self&&this.self.set(this.field.name,e)}}]),t}(y8(P8)),M8=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){Z6(Object.assign({modelFieldConfig:e},t),j8)(n,r),I8(n.constructor)}},I8=function(e){e.hasOwnProperty("fields")||Object.defineProperty(e,"fields",{get:function(){return F8(this)}})},F8=function(e){var t=[],n=e.prototype;return n.hasOwnProperty("$entity")&&n.$entity.fields.forEach((function(e){e instanceof j8&&t.push(Object.assign(e.modelFieldConfig||{},{name:e.name}))})),t},L8=function(e,t){return null===e?null:(e instanceof Date||(e=xt.parse(e,t.modelFieldConfig.format||t.modelFieldConfig.dateFormat)),e||void 0)};function N8(e){return(N8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z8(e,t){return!t||"object"!==N8(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V8(e,t,n){return(V8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W8(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function W8(e){return(W8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $8(e,t){return($8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y8=Symbol("PartOfProjectStoreMixin"),G8=function(e){var t=function(e){function t(){return H8(this,t),z8(this,W8(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$8(e,t)}(t,e),n=t,(r=[{key:Y8,value:function(){}},{key:"calculateProject",value:function(){return this.project}},{key:"loadData",value:function(e){V8(W8(t.prototype),"loadData",this).call(this,e);var n=this.getProject();n&&n.trigger("storerefresh",{store:this})}}])&&B8(n.prototype,r),o&&B8(n,o),t}(e);return t},U8=function(e){return Boolean(e&&e[Y8])};function q8(e){return(q8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z8(e,t){return!t||"object"!==q8(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J8(e,t,n){return(J8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q8(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Q8(e){return(Q8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e9(e,t){return(e9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var t9=function(e){var t=function(e){function t(){return X8(this,t),Z8(this,Q8(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&e9(e,t)}(t,e),n=t,(r=[{key:"joinStore",value:function(e){var n=!1;if(U8(e)){var r=e.getProject();!r||this.getProject()||this.isShadowed()||(this.setProject(r),n=!0)}J8(Q8(t.prototype),"joinStore",this).call(this,e),n&&this.joinProject()}},{key:"unJoinStore",value:function(e){J8(Q8(t.prototype),"unJoinStore",this).call(this,e);var n=this.isShadowed()?this.shadowedProject:this.getProject();U8(e)&&n&&n===e.getProject()&&(this.leaveProject(),this.setProject(null),this.shadowedProject=null)}},{key:"joinProject",value:function(){this.getGraph().addEntity(this)}},{key:"leaveProject",value:function(){var e=this.getProject();this.isShadowed()||this.getGraph().removeEntity(this),this.leftProject=e}},{key:"shadow",value:function(){var e=this.getProject();return e&&(this.leaveProject(),this.setProject(null),this.shadowedProject=e),this}},{key:"unshadow",value:function(){return this.shadowedProject&&(this.setProject(this.shadowedProject),this.shadowedProject=null,this.joinProject()),this}},{key:"isShadowed",value:function(){return!!this.shadowedProject}},{key:"getProject",value:function(){return this.isShadowed()?null:J8(Q8(t.prototype),"getProject",this).call(this)}},{key:"calculateProject",value:function(){var e=this.stores.find((function(e){return U8(e)&&!!e.getProject()}));return e&&e.getProject()}},{key:"afterSet",value:function(e,n,r,o,i,a){var u=this;a&&this.getProject()&&this.getProject().getStm().isRestoring&&Object.keys(a).forEach((function(e){var t=u.$[e];t&&t.graph&&t.graph.markAsNeedRecalculation(t)})),J8(Q8(t.prototype),"afterSet",this)&&J8(Q8(t.prototype),"afterSet",this).call(this,e,n,r,o,i,a)}}])&&K8(n.prototype,r),o&&K8(n,o),t}(e);return t};function n9(e){return(n9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i9(e,t){return!t||"object"!==n9(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a9(e){return(a9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u9(e,t){return(u9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c9=function(e){var t=function(e){function t(){return r9(this,t),i9(this,a9(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u9(e,t)}(t,e),n=t,(r=[{key:"calculateProject",value:function(){throw new Error("Implement me")}},{key:"setProject",value:function(e){return this.project=e}},{key:"getProject",value:function(){return this.project?this.project:this.setProject(this.calculateProject())}},{key:"getGraph",value:function(){var e=this.getProject();return e&&e.getGraph()}},{key:"getEventStore",value:function(){var e=this.getProject();return e&&e.eventStore}},{key:"getDependencyStore",value:function(){var e=this.getProject();return e&&e.dependencyStore}},{key:"getAssignmentStore",value:function(){var e=this.getProject();return e&&e.assignmentStore}},{key:"getResourceStore",value:function(){var e=this.getProject();return e&&e.resourceStore}},{key:"getCalendarManagerStore",value:function(){var e=this.getProject();return e&&e.calendarManagerStore}},{key:"getEventById",value:function(e){return this.getEventStore()&&this.getEventStore().getById(e)}},{key:"getDependencyById",value:function(e){return this.getDependencyStore()&&this.getDependencyStore().getById(e)}},{key:"getResourceById",value:function(e){return this.getResourceStore()&&this.getResourceStore().getById(e)}},{key:"getAssignmentById",value:function(e){return this.getAssignmentStore()&&this.getAssignmentStore().getById(e)}},{key:"getCalendarById",value:function(e){return this.getCalendarManagerStore()&&this.getCalendarManagerStore().getById(e)}}])&&o9(n.prototype,r),o&&o9(n,o),t}(e);return t},s9=(n(245),function(){var e={version:"1.2.0"};return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&((r=Number(arguments[1]))!=r?r=0:0!=r&&r!=1/0&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var o=r>=0?r:Math.max(n-Math.abs(r),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),e.array={},e.array.sort=function(e,t){e.sort((function(e,t){return+e-+t})),t&&0===e[0]&&e.push(e.shift())},e.array.next=function(e,t,n){for(var r,o=0!==n[0],i=0,a=t.length-1;a>-1;--a){if((r=t[a])===e)return r;if(!(r>e||0===r&&o&&n[1]>e))break;i=a}return t[i]},e.array.nextInvalid=function(e,t,n){for(var r=n[0],o=n[1],i=t.length,a=0===t[i-1]&&0!==r?o:0,u=e,c=t.indexOf(e),s=u;u===(t[c]||a);)if(++u>o&&(u=r),++c===i&&(c=0),u===s)return;return u},e.array.prev=function(e,t,n){for(var r,o=t.length,i=0!==n[0],a=o-1,u=0;u<o;u++){if((r=t[u])===e)return r;if(!(r<e||0===r&&i&&n[1]<e))break;a=u}return t[a]},e.array.prevInvalid=function(e,t,n){for(var r=n[0],o=n[1],i=t.length,a=0===t[i-1]&&0!==r?o:0,u=e,c=t.indexOf(e),s=u;u===(t[c]||a);)if(--u<r&&(u=o),-1===--c&&(c=i-1),u===s)return;return u},e.day=e.D={name:"day",range:86400,val:function(t){return t.D||(t.D=e.date.getDate.call(t))},isValid:function(t,n){return e.D.val(t)===(n||e.D.extent(t)[1])},extent:function(t){if(t.DExtent)return t.DExtent;var n=e.M.val(t),r=e.DAYS_IN_MONTH[n-1];return 2===n&&366===e.dy.extent(t)[1]&&(r+=1),t.DExtent=[1,r]},start:function(t){return t.DStart||(t.DStart=e.date.next(e.Y.val(t),e.M.val(t),e.D.val(t)))},end:function(t){return t.DEnd||(t.DEnd=e.date.prev(e.Y.val(t),e.M.val(t),e.D.val(t)))},next:function(t,n){n=n>e.D.extent(t)[1]?1:n;var r=e.date.nextRollover(t,n,e.D,e.M),o=e.D.extent(r)[1];return n=n>o?1:n||o,e.date.next(e.Y.val(r),e.M.val(r),n)},prev:function(t,n){var r=e.date.prevRollover(t,n,e.D,e.M),o=e.D.extent(r)[1];return e.date.prev(e.Y.val(r),e.M.val(r),n>o?o:n||o)}},e.dayOfWeekCount=e.dc={name:"day of week count",range:604800,val:function(t){return t.dc||(t.dc=Math.floor((e.D.val(t)-1)/7)+1)},isValid:function(t,n){return e.dc.val(t)===n||0===n&&e.D.val(t)>e.D.extent(t)[1]-7},extent:function(t){return t.dcExtent||(t.dcExtent=[1,Math.ceil(e.D.extent(t)[1]/7)])},start:function(t){return t.dcStart||(t.dcStart=e.date.next(e.Y.val(t),e.M.val(t),Math.max(1,7*(e.dc.val(t)-1)+1||1)))},end:function(t){return t.dcEnd||(t.dcEnd=e.date.prev(e.Y.val(t),e.M.val(t),Math.min(7*e.dc.val(t),e.D.extent(t)[1])))},next:function(t,n){n=n>e.dc.extent(t)[1]?1:n;var r=e.date.nextRollover(t,n,e.dc,e.M);n=n>e.dc.extent(r)[1]?1:n;var o=e.date.next(e.Y.val(r),e.M.val(r),0===n?e.D.extent(r)[1]-6:1+7*(n-1));return o.getTime()<=t.getTime()?(r=e.M.next(t,e.M.val(t)+1),e.date.next(e.Y.val(r),e.M.val(r),0===n?e.D.extent(r)[1]-6:1+7*(n-1))):o},prev:function(t,n){var r=e.date.prevRollover(t,n,e.dc,e.M),o=e.dc.extent(r)[1];return n=n>o?o:n||o,e.dc.end(e.date.prev(e.Y.val(r),e.M.val(r),1+7*(n-1)))}},e.dayOfWeek=e.dw=e.d={name:"day of week",range:86400,val:function(t){return t.dw||(t.dw=e.date.getDay.call(t)+1)},isValid:function(t,n){return e.dw.val(t)===(n||7)},extent:function(){return[1,7]},start:function(t){return e.D.start(t)},end:function(t){return e.D.end(t)},next:function(t,n){return n=n>7?1:n||7,e.date.next(e.Y.val(t),e.M.val(t),e.D.val(t)+(n-e.dw.val(t))+(n<=e.dw.val(t)?7:0))},prev:function(t,n){return n=n>7?7:n||7,e.date.prev(e.Y.val(t),e.M.val(t),e.D.val(t)+(n-e.dw.val(t))+(n>=e.dw.val(t)?-7:0))}},e.dayOfYear=e.dy={name:"day of year",range:86400,val:function(t){return t.dy||(t.dy=Math.ceil(1+(e.D.start(t).getTime()-e.Y.start(t).getTime())/e.DAY))},isValid:function(t,n){return e.dy.val(t)===(n||e.dy.extent(t)[1])},extent:function(t){var n=e.Y.val(t);return t.dyExtent||(t.dyExtent=[1,n%4?365:366])},start:function(t){return e.D.start(t)},end:function(t){return e.D.end(t)},next:function(t,n){n=n>e.dy.extent(t)[1]?1:n;var r=e.date.nextRollover(t,n,e.dy,e.Y),o=e.dy.extent(r)[1];return n=n>o?1:n||o,e.date.next(e.Y.val(r),e.M.val(r),n)},prev:function(t,n){var r=e.date.prevRollover(t,n,e.dy,e.Y),o=e.dy.extent(r)[1];return n=n>o?o:n||o,e.date.prev(e.Y.val(r),e.M.val(r),n)}},e.hour=e.h={name:"hour",range:3600,val:function(t){return t.h||(t.h=e.date.getHour.call(t))},isValid:function(t,n){return e.h.val(t)===n},extent:function(){return[0,23]},start:function(t){return t.hStart||(t.hStart=e.date.next(e.Y.val(t),e.M.val(t),e.D.val(t),e.h.val(t)))},end:function(t){return t.hEnd||(t.hEnd=e.date.prev(e.Y.val(t),e.M.val(t),e.D.val(t),e.h.val(t)))},next:function(t,n){n=n>23?0:n;var r=e.date.next(e.Y.val(t),e.M.val(t),e.D.val(t)+(n<=e.h.val(t)?1:0),n);return!e.date.isUTC&&r.getTime()<=t.getTime()&&(r=e.date.next(e.Y.val(r),e.M.val(r),e.D.val(r),n+1)),r},prev:function(t,n){return n=n>23?23:n,e.date.prev(e.Y.val(t),e.M.val(t),e.D.val(t)+(n>=e.h.val(t)?-1:0),n)}},e.minute=e.m={name:"minute",range:60,val:function(t){return t.m||(t.m=e.date.getMin.call(t))},isValid:function(t,n){return e.m.val(t)===n},extent:function(e){return[0,59]},start:function(t){return t.mStart||(t.mStart=e.date.next(e.Y.val(t),e.M.val(t),e.D.val(t),e.h.val(t),e.m.val(t)))},end:function(t){return t.mEnd||(t.mEnd=e.date.prev(e.Y.val(t),e.M.val(t),e.D.val(t),e.h.val(t),e.m.val(t)))},next:function(t,n){var r=e.m.val(t),o=e.s.val(t),i=n>59?60-r:n<=r?60-r+n:n-r,a=new Date(t.getTime()+i*e.MIN-o*e.SEC);return!e.date.isUTC&&a.getTime()<=t.getTime()&&(a=new Date(t.getTime()+(i+120)*e.MIN-o*e.SEC)),a},prev:function(t,n){return n=n>59?59:n,e.date.prev(e.Y.val(t),e.M.val(t),e.D.val(t),e.h.val(t)+(n>=e.m.val(t)?-1:0),n)}},e.month=e.M={name:"month",range:2629740,val:function(t){return t.M||(t.M=e.date.getMonth.call(t)+1)},isValid:function(t,n){return e.M.val(t)===(n||12)},extent:function(){return[1,12]},start:function(t){return t.MStart||(t.MStart=e.date.next(e.Y.val(t),e.M.val(t)))},end:function(t){return t.MEnd||(t.MEnd=e.date.prev(e.Y.val(t),e.M.val(t)))},next:function(t,n){return n=n>12?1:n||12,e.date.next(e.Y.val(t)+(n>e.M.val(t)?0:1),n)},prev:function(t,n){return n=n>12?12:n||12,e.date.prev(e.Y.val(t)-(n>=e.M.val(t)?1:0),n)}},e.second=e.s={name:"second",range:1,val:function(t){return t.s||(t.s=e.date.getSec.call(t))},isValid:function(t,n){return e.s.val(t)===n},extent:function(){return[0,59]},start:function(e){return e},end:function(e){return e},next:function(t,n){var r=e.s.val(t),o=n>59?60-r:n<=r?60-r+n:n-r,i=new Date(t.getTime()+o*e.SEC);return!e.date.isUTC&&i.getTime()<=t.getTime()&&(i=new Date(t.getTime()+(o+7200)*e.SEC)),i},prev:function(t,n,r){return n=n>59?59:n,e.date.prev(e.Y.val(t),e.M.val(t),e.D.val(t),e.h.val(t),e.m.val(t)+(n>=e.s.val(t)?-1:0),n)}},e.time=e.t={name:"time",range:1,val:function(t){return t.t||(t.t=3600*e.h.val(t)+60*e.m.val(t)+e.s.val(t))},isValid:function(t,n){return e.t.val(t)===n},extent:function(){return[0,86399]},start:function(e){return e},end:function(e){return e},next:function(t,n){n=n>86399?0:n;var r=e.date.next(e.Y.val(t),e.M.val(t),e.D.val(t)+(n<=e.t.val(t)?1:0),0,0,n);return!e.date.isUTC&&r.getTime()<t.getTime()&&(r=e.date.next(e.Y.val(r),e.M.val(r),e.D.val(r),e.h.val(r),e.m.val(r),n+7200)),r},prev:function(t,n){return n=n>86399?86399:n,e.date.next(e.Y.val(t),e.M.val(t),e.D.val(t)+(n>=e.t.val(t)?-1:0),0,0,n)}},e.weekOfMonth=e.wm={name:"week of month",range:604800,val:function(t){return t.wm||(t.wm=(e.D.val(t)+(e.dw.val(e.M.start(t))-1)+(7-e.dw.val(t)))/7)},isValid:function(t,n){return e.wm.val(t)===(n||e.wm.extent(t)[1])},extent:function(t){return t.wmExtent||(t.wmExtent=[1,(e.D.extent(t)[1]+(e.dw.val(e.M.start(t))-1)+(7-e.dw.val(e.M.end(t))))/7])},start:function(t){return t.wmStart||(t.wmStart=e.date.next(e.Y.val(t),e.M.val(t),Math.max(e.D.val(t)-e.dw.val(t)+1,1)))},end:function(t){return t.wmEnd||(t.wmEnd=e.date.prev(e.Y.val(t),e.M.val(t),Math.min(e.D.val(t)+(7-e.dw.val(t)),e.D.extent(t)[1])))},next:function(t,n){n=n>e.wm.extent(t)[1]?1:n;var r=e.date.nextRollover(t,n,e.wm,e.M),o=e.wm.extent(r)[1];return n=n>o?1:n||o,e.date.next(e.Y.val(r),e.M.val(r),Math.max(1,7*(n-1)-(e.dw.val(r)-2)))},prev:function(t,n){var r=e.date.prevRollover(t,n,e.wm,e.M),o=e.wm.extent(r)[1];return n=n>o?o:n||o,e.wm.end(e.date.next(e.Y.val(r),e.M.val(r),Math.max(1,7*(n-1)-(e.dw.val(r)-2))))}},e.weekOfYear=e.wy={name:"week of year (ISO)",range:604800,val:function(t){if(t.wy)return t.wy;var n=e.dw.next(e.wy.start(t),5),r=e.dw.next(e.Y.prev(n,e.Y.val(n)-1),5);return t.wy=1+Math.ceil((n.getTime()-r.getTime())/e.WEEK)},isValid:function(t,n){return e.wy.val(t)===(n||e.wy.extent(t)[1])},extent:function(t){if(t.wyExtent)return t.wyExtent;var n=e.dw.next(e.wy.start(t),5),r=e.dw.val(e.Y.start(n)),o=e.dw.val(e.Y.end(n));return t.wyExtent=[1,5===r||5===o?53:52]},start:function(t){return t.wyStart||(t.wyStart=e.date.next(e.Y.val(t),e.M.val(t),e.D.val(t)-(e.dw.val(t)>1?e.dw.val(t)-2:6)))},end:function(t){return t.wyEnd||(t.wyEnd=e.date.prev(e.Y.val(t),e.M.val(t),e.D.val(t)+(e.dw.val(t)>1?8-e.dw.val(t):0)))},next:function(t,n){n=n>e.wy.extent(t)[1]?1:n;var r=e.dw.next(e.wy.start(t),5),o=e.date.nextRollover(r,n,e.wy,e.Y);1!==e.wy.val(o)&&(o=e.dw.next(o,2));var i=e.wy.extent(o)[1],a=e.wy.start(o);return n=n>i?1:n||i,e.date.next(e.Y.val(a),e.M.val(a),e.D.val(a)+7*(n-1))},prev:function(t,n){var r=e.dw.next(e.wy.start(t),5),o=e.date.prevRollover(r,n,e.wy,e.Y);1!==e.wy.val(o)&&(o=e.dw.next(o,2));var i=e.wy.extent(o)[1],a=e.wy.end(o);return n=n>i?i:n||i,e.wy.end(e.date.next(e.Y.val(a),e.M.val(a),e.D.val(a)+7*(n-1)))}},e.year=e.Y={name:"year",range:31556900,val:function(t){return t.Y||(t.Y=e.date.getYear.call(t))},isValid:function(t,n){return e.Y.val(t)===n},extent:function(){return[1970,2099]},start:function(t){return t.YStart||(t.YStart=e.date.next(e.Y.val(t)))},end:function(t){return t.YEnd||(t.YEnd=e.date.prev(e.Y.val(t)))},next:function(t,n){return n>e.Y.val(t)&&n<=e.Y.extent()[1]?e.date.next(n):e.NEVER},prev:function(t,n){return n<e.Y.val(t)&&n>=e.Y.extent()[0]?e.date.prev(n):e.NEVER}},e.fullDate=e.fd={name:"full date",range:1,val:function(e){return e.fd||(e.fd=e.getTime())},isValid:function(t,n){return e.fd.val(t)===n},extent:function(){return[0,3250368e7]},start:function(e){return e},end:function(e){return e},next:function(t,n){return e.fd.val(t)<n?new Date(n):e.NEVER},prev:function(t,n){return e.fd.val(t)>n?new Date(n):e.NEVER}},e.modifier={},e.modifier.after=e.modifier.a=function(e,t){var n=t[0];return{name:"after "+e.name,range:(e.extent(new Date)[1]-n)*e.range,val:e.val,isValid:function(e,t){return this.val(e)>=n},extent:e.extent,start:e.start,end:e.end,next:function(t,r){return r!=n&&(r=e.extent(t)[0]),e.next(t,r)},prev:function(t,r){return r=r===n?e.extent(t)[1]:n-1,e.prev(t,r)}}},e.modifier.before=e.modifier.b=function(e,t){var n=t[t.length-1];return{name:"before "+e.name,range:e.range*(n-1),val:e.val,isValid:function(e,t){return this.val(e)<n},extent:e.extent,start:e.start,end:e.end,next:function(t,r){return r=r===n?e.extent(t)[0]:n,e.next(t,r)},prev:function(t,r){return r=r===n?n-1:e.extent(t)[1],e.prev(t,r)}}},e.compile=function(t){var n,r=[],o=0;for(var i in t){var a=i.split("_"),u=a[0],c=a[1],s=t[i],l=c?e.modifier[c](e[u],s):e[u];r.push({constraint:l,vals:s}),o++}return r.sort((function(e,t){var n=e.constraint.range,r=t.constraint.range;return r<n?-1:r>n?1:0})),n=r[o-1].constraint,{start:function(t,i){for(var a,u=i,c=e.array[t],s=1e3;s--&&!a&&u;){a=!0;for(var l=0;l<o;l++){var f=r[l].constraint,d=f.val(u),p=f.extent(u),h=c(d,r[l].vals,p);if(!f.isValid(u,h)){u=f[t](u,h),a=!1;break}}}return u!==e.NEVER&&(u="next"===t?n.start(u):n.end(u)),u},end:function(t,n){for(var i,a=e.array[t+"Invalid"],u=function(e){return"next"===e?function(e,t){return e.getTime()>t.getTime()}:function(e,t){return t.getTime()>e.getTime()}}(t),c=o-1;c>=0;c--){var s,l=r[c].constraint,f=l.val(n),d=l.extent(n),p=a(f,r[c].vals,d);void 0!==p&&(!(s=l[t](n,p))||i&&!u(i,s)||(i=s))}return i},tick:function(t,r){return new Date("next"===t?n.end(r).getTime()+e.SEC:n.start(r).getTime()-e.SEC)},tickStart:function(e){return n.start(e)}}},e.schedule=function(t){if(!t)throw new Error("Missing schedule definition.");if(!t.schedules)throw new Error("Definition must include at least one schedule.");for(var n=[],r=t.schedules.length,o=[],i=t.exceptions?t.exceptions.length:0,a=0;a<r;a++)n.push(e.compile(t.schedules[a]));for(var u=0;u<i;u++)o.push(e.compile(t.exceptions[u]));function c(t,r,a,u,c){var b,w,k,S=v(t),O=r,E=1e3,C=[],x=[],_=[],j="next"===t,D=j?0:1,R=j?1:0;if(!(a=a?new Date(a):new Date)||!a.getTime())throw new Error("Invalid start date.");for(!function(e,t,n,r){for(var o=0,i=t.length;o<i;o++)n[o]=t[o].start(e,r)}(t,n,C,a),function(t,n,r,o){v(t);for(var i=0,a=n.length;i<a;i++){var u=n[i].start(t,o);r[i]=u?[u,n[i].end(t,u)]:e.NEVER}}(t,o,x,a);E--&&O&&(b=m(C,S))&&(!u||!S(b,u));)if(i&&(f(t,o,x,b),w=h(t,x,b)))l(t,n,C,w);else{if(c){var P=y(x,S);w=g(t,n,C,b,P);var T=j?[new Date(Math.max(a,b)),w?new Date(u?Math.min(w,u):w):void 0]:[w?new Date(u?Math.max(u,w.getTime()+e.SEC):w.getTime()+e.SEC):void 0,new Date(Math.min(a,b.getTime()+e.SEC))];if(k&&T[D].getTime()===k[R].getTime()?(k[R]=T[R],O++):(k=T,_.push(k)),!w)break;l(t,n,C,w)}else _.push(j?new Date(Math.max(a,b)):p(n,C,b,u)),d(t,n,C,b);O--}for(var A=0,M=_.length;A<M;A++){var I=_[A];_[A]="[object Array]"===Object.prototype.toString.call(I)?[s(I[0]),s(I[1])]:s(I)}return 0===_.length?e.NEVER:1===r?_[0]:_}function s(e){if(e instanceof Date&&!isNaN(e.valueOf()))return new Date(e)}function l(e,t,n,r){for(var o=v(e),i=0,a=t.length;i<a;i++)n[i]&&!o(n[i],r)&&(n[i]=t[i].start(e,r))}function f(t,n,r,o){for(var i=v(t),a=0,u=n.length;a<u;a++)if(r[a]&&!i(r[a][0],o)){var c=n[a].start(t,o);r[a]=c?[c,n[a].end(t,c)]:e.NEVER}}function d(e,t,n,r){for(var o=0,i=t.length;o<i;o++)n[o]&&n[o].getTime()===r.getTime()&&(n[o]=t[o].start(e,t[o].tick(e,r)))}function p(e,t,n,r){for(var o,i=0,a=t.length;i<a;i++)if(t[i]&&t[i].getTime()===n.getTime()){var u=e[i].tickStart(n);if(r&&u<r)return r;(!o||u>o)&&(o=u)}return o}function h(e,t,n){for(var r,o=v(e),i=0,a=t.length;i<a;i++){var u=t[i];!u||o(u[0],n)||u[1]&&!o(u[1],n)||r&&!o(u[1],r)||(r=u[1])}return r}function y(e,t){for(var n,r=0,o=e.length;r<o;r++)!e[r]||n&&!t(n,e[r][0])||(n=e[r][0]);return n}function g(e,t,n,r,o){for(var i,a=v(e),u=0,c=t.length;u<c;u++){var s=n[u];if(s&&s.getTime()===r.getTime()){var l=t[u].end(e,s);if(o&&(!l||a(l,o)))return o;i&&!a(l,i)||(i=l)}}return i}function v(e){return"next"===e?function(e,t){return!t||e.getTime()>t.getTime()}:function(e,t){return!e||t.getTime()>e.getTime()}}function m(e,t){for(var n=e[0],r=1,o=e.length;r<o;r++)e[r]&&t(n,e[r])&&(n=e[r]);return n}return{isValid:function(t){return c("next",1,t,t)!==e.NEVER},next:function(e,t,n){return c("next",e||1,t,n)},prev:function(e,t,n){return c("prev",e||1,t,n)},nextRange:function(e,t,n){return c("next",e||1,t,n,!0)},prevRange:function(e,t,n){return c("prev",e||1,t,n,!0)}}},e.setTimeout=function(t,n){var r,o=e.schedule(n);return t&&function e(){var n=Date.now(),i=o.next(2,n);if(!i[0])return void(r=void 0);var a=i[0].getTime()-n;a<1e3&&(a=i[1]?i[1].getTime()-n:1e3);r=a<2147483647?setTimeout(t,a):setTimeout(e,2147483647)}(),{isDone:function(){return!r},clear:function(){clearTimeout(r)}}},e.setInterval=function(t,n){if(t){var r=e.setTimeout((function i(){o||(t(),r=e.setTimeout(i,n))}),n),o=r.isDone();return{isDone:function(){return r.isDone()},clear:function(){o=!0,r.clear()}}}},e.date={},e.date.timezone=function(t){e.date.build=t?function(e,t,n,r,o,i){return new Date(e,t,n,r,o,i)}:function(e,t,n,r,o,i){return new Date(Date.UTC(e,t,n,r,o,i))};var n=t?"get":"getUTC",r=Date.prototype;e.date.getYear=r[n+"FullYear"],e.date.getMonth=r[n+"Month"],e.date.getDate=r[n+"Date"],e.date.getDay=r[n+"Day"],e.date.getHour=r[n+"Hours"],e.date.getMin=r[n+"Minutes"],e.date.getSec=r[n+"Seconds"],e.date.isUTC=!t},e.date.UTC=function(){e.date.timezone(!1)},e.date.localTime=function(){e.date.timezone(!0)},e.date.UTC(),e.SEC=1e3,e.MIN=60*e.SEC,e.HOUR=60*e.MIN,e.DAY=24*e.HOUR,e.WEEK=7*e.DAY,e.DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],e.NEVER=0,e.date.next=function(t,n,r,o,i,a){return e.date.build(t,void 0!==n?n-1:0,void 0!==r?r:1,o||0,i||0,a||0)},e.date.nextRollover=function(t,n,r,o){var i=r.val(t),a=r.extent(t)[1];return(n||a)<=i||n>a?new Date(o.end(t).getTime()+e.SEC):o.start(t)},e.date.prev=function(t,n,r,o,i,a){var u=arguments.length;return n=u<2?11:n-1,r=u<3?e.D.extent(e.date.next(t,n+1))[1]:r,o=u<4?23:o,i=u<5?59:i,a=u<6?59:a,e.date.build(t,n,r,o,i,a)},e.date.prevRollover=function(e,t,n,r){return t>=n.val(e)||!t?r.start(r.prev(e,r.val(e)-1)):r.start(e)},e.parse={},e.parse.cron=function(e,t){var n={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12,SUN:1,MON:2,TUE:3,WED:4,THU:5,FRI:6,SAT:7},r={"* * * * * *":"0/1 * * * * *","@YEARLY":"0 0 1 1 *","@ANNUALLY":"0 0 1 1 *","@MONTHLY":"0 0 1 * *","@WEEKLY":"0 0 * * 0","@DAILY":"0 0 * * *","@HOURLY":"0 * * * *"},o={s:[0,0,59],m:[1,0,59],h:[2,0,23],D:[3,1,31],M:[4,1,12],Y:[6,1970,2099],d:[5,1,7,1]};function i(e,t,r){return isNaN(e)?n[e]||null:Math.min(+e+(t||0),r||9999)}function a(e,t,n,r,o){var i=n;for(e[t]||(e[t]=[]);i<=r;)e[t].indexOf(i)<0&&e[t].push(i),i+=o||1;e[t].sort((function(e,t){return e-t}))}function u(e,t,n,r){(t.d&&!t.dc||t.dc&&t.dc.indexOf(r)<0)&&(e.push(function(e){var t,n={};for(t in e)"dc"!==t&&"d"!==t&&(n[t]=e[t].slice(0));return n}(t)),t=e[e.length-1]),a(t,"d",n,n),a(t,"dc",r,r)}function c(e,t,r,o,c,s){var l,f,d=t.schedules,p=d[d.length-1];"L"===e&&(e=o-1),null!==(l=i(e,s,c))?a(p,r,l,l):null!==(l=i(e.replace("W",""),s,c))?function(e,t,r){var o={},i={};1===r?(a(t,"D",1,3),a(t,"d",n.MON,n.FRI),a(o,"D",2,2),a(o,"d",n.TUE,n.FRI),a(i,"D",3,3),a(i,"d",n.TUE,n.FRI)):(a(t,"D",r-1,r+1),a(t,"d",n.MON,n.FRI),a(o,"D",r-1,r-1),a(o,"d",n.MON,n.THU),a(i,"D",r+1,r+1),a(i,"d",n.TUE,n.FRI)),e.exceptions.push(o),e.exceptions.push(i)}(t,p,l):null!==(l=i(e.replace("L",""),s,c))?u(d,p,l,o-1):2===(f=e.split("#")).length?u(d,p,l=i(f[0],s,c),i(f[1])):function(e,t,n,r,o,u){var c=e.split("/"),s=+c[1],l=c[0];if("*"!==l&&"0"!==l){var f=l.split("-");r=i(f[0],u,o),o=i(f[1],u,o)||o}a(t,n,r,o,s)}(e,p,r,o,c,s)}function s(e){return e.indexOf("#")>-1||e.indexOf("L")>0}function l(e,t){return s(e)&&!s(t)?1:e-t}var f=function(e){var t=e.toUpperCase();return r[t]||t}(e);return function(e){var t,n,r,i,a={schedules:[{}],exceptions:[]},u=e.replace(/(\s)+/g," ").split(" ");for(t in o)if((r=u[(n=o[t])[0]])&&"*"!==r&&"?"!==r){var s,f=(i=r.split(",").sort(l)).length;for(s=0;s<f;s++)c(i[s],a,t,n[1],n[2],n[3])}return a}(t?f:"0 "+f)},e.parse.recur=function(){var t,n,r,o,i,a,u,c,s,l=[],f=[],d=l;function p(e,l,f){if(e=i?e+"_"+i:e,t||(d.push({}),t=d[0]),t[e]||(t[e]=[]),n=t[e],o){for(r=[],c=l;c<=f;c+=o)r.push(c);s={n:e,x:o,c:n.length,m:f}}var p=(r=a?[l]:u?[f]:r).length;for(c=0;c<p;c+=1){var h=r[c];n.indexOf(h)<0&&n.push(h)}r=o=i=a=u=0}return{schedules:l,exceptions:f,on:function(){return r=arguments[0]instanceof Array?arguments[0]:arguments,this},every:function(e){return o=e||1,this},after:function(e){return i="a",r=[e],this},before:function(e){return i="b",r=[e],this},first:function(){return a=1,this},last:function(){return u=1,this},time:function(){for(var e=0,t=r.length;e<t;e++){var n=r[e].split(":");n.length<3&&n.push(0),r[e]=3600*+n[0]+60*+n[1]+ +n[2]}return p("t"),this},second:function(){return p("s",0,59),this},minute:function(){return p("m",0,59),this},hour:function(){return p("h",0,23),this},dayOfMonth:function(){return p("D",1,u?0:31),this},dayOfWeek:function(){return p("d",1,7),this},onWeekend:function(){return r=[1,7],this.dayOfWeek()},onWeekday:function(){return r=[2,3,4,5,6],this.dayOfWeek()},dayOfWeekCount:function(){return p("dc",1,u?0:5),this},dayOfYear:function(){return p("dy",1,u?0:366),this},weekOfMonth:function(){return p("wm",1,u?0:5),this},weekOfYear:function(){return p("wy",1,u?0:53),this},month:function(){return p("M",1,12),this},year:function(){return p("Y",1970,2450),this},fullDate:function(){for(var e=0,t=r.length;e<t;e++)r[e]=r[e].getTime();return p("fd"),this},customModifier:function(t,n){var o=e.modifier[t];if(!o)throw new Error("Custom modifier "+t+" not recognized!");return i=t,r=arguments[1]instanceof Array?arguments[1]:[arguments[1]],this},customPeriod:function(t){var n=e[t];if(!n)throw new Error("Custom time period "+t+" not recognized!");return p(t,n.extent(new Date)[0],n.extent(new Date)[1]),this},startingOn:function(e){return this.between(e,s.m)},between:function(e,n){return t[s.n]=t[s.n].splice(0,s.c),o=s.x,p(s.n,e,n),this},and:function(){return t=d[d.push({})-1],this},except:function(){return d=f,t=null,this}}},e.parse.text=function(t){var n,r=e.parse.recur,o=0,i="",a={eof:/^$/,rank:/^((\d\d\d\d)|([2-5]?1(st)?|[2-5]?2(nd)?|[2-5]?3(rd)?|(0|[1-5]?[4-9]|[1-5]0|1[1-3])(th)?))\b/,time:/^((([0]?[1-9]|1[0-2]):[0-5]\d(\s)?(am|pm))|(([0]?\d|1\d|2[0-3]):[0-5]\d))\b/,dayName:/^((sun|mon|tue(s)?|wed(nes)?|thu(r(s)?)?|fri|sat(ur)?)(day)?)\b/,monthName:/^(jan(uary)?|feb(ruary)?|ma((r(ch)?)?|y)|apr(il)?|ju(ly|ne)|aug(ust)?|oct(ober)?|(sept|nov|dec)(ember)?)\b/,yearIndex:/^(\d\d\d\d)\b/,every:/^every\b/,after:/^after\b/,before:/^before\b/,second:/^(s|sec(ond)?(s)?)\b/,minute:/^(m|min(ute)?(s)?)\b/,hour:/^(h|hour(s)?)\b/,day:/^(day(s)?( of the month)?)\b/,dayInstance:/^day instance\b/,dayOfWeek:/^day(s)? of the week\b/,dayOfYear:/^day(s)? of the year\b/,weekOfYear:/^week(s)?( of the year)?\b/,weekOfMonth:/^week(s)? of the month\b/,weekday:/^weekday\b/,weekend:/^weekend\b/,month:/^month(s)?\b/,year:/^year(s)?\b/,between:/^between (the)?\b/,start:/^(start(ing)? (at|on( the)?)?)\b/,at:/^(at|@)\b/,and:/^(,|and\b)/,except:/^(except\b)/,also:/(also)\b/,first:/^(first)\b/,last:/^last\b/,in:/^in\b/,of:/^of\b/,onthe:/^on the\b/,on:/^on\b/,through:/(-|^(to|through)\b)/},u={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7,"1st":1,fir:1,"2nd":2,sec:2,"3rd":3,thi:3,"4th":4,for:4};function c(e,t,n,r){return{startPos:e,endPos:t,text:n,type:r}}function s(e){var t,n,r,a,u,s,l=e instanceof Array?e:[e],f=/\s+/;for(l.push(f),u=o;!t||t.type===f;){s=-1,n=i.substring(u),t=c(u,u,i.split(f)[0]);var d,p=l.length;for(d=0;d<p;d++)(r=(a=l[d]).exec(n))&&0===r.index&&r[0].length>s&&(t=c(u,u+(s=r[0].length),n.substring(0,s),a));t.type===f&&(u=t.endPos)}return t}function l(e){var t=s(e);return o=t.endPos,t}function f(e){for(var t=+m(e),n=g(a.through)?+m(e):t,r=[],o=t;o<=n;o++)r.push(o);return r}function d(e){for(var t=f(e);g(a.and);)t=t.concat(f(e));return t}function p(e){var t,n,r,o;g(a.weekend)?e.on(u.sun,u.sat).dayOfWeek():g(a.weekday)?e.on(u.mon,u.tue,u.wed,u.thu,u.fri).dayOfWeek():(t=m(a.rank),e.every(t),n=y(e),g(a.start)?(t=m(a.rank),e.startingOn(t),v(n.type)):g(a.between)&&(r=m(a.rank),g(a.and)&&(o=m(a.rank),e.between(r,o))))}function h(e){g(a.first)?e.first():g(a.last)?e.last():e.on(d(a.rank)),y(e)}function y(e){var t=v([a.second,a.minute,a.hour,a.dayOfYear,a.dayOfWeek,a.dayInstance,a.day,a.month,a.year,a.weekOfMonth,a.weekOfYear]);switch(t.type){case a.second:e.second();break;case a.minute:e.minute();break;case a.hour:e.hour();break;case a.dayOfYear:e.dayOfYear();break;case a.dayOfWeek:e.dayOfWeek();break;case a.dayInstance:e.dayOfWeekCount();break;case a.day:e.dayOfMonth();break;case a.weekOfMonth:e.weekOfMonth();break;case a.weekOfYear:e.weekOfYear();break;case a.month:e.month();break;case a.year:e.year();break;default:n=o}return t}function g(e){var t=s(e).type===e;return t&&l(e),t}function v(e){var t=l(e);return t.type?t.text=function(e,t){var n=e;switch(t){case a.time:var r=e.split(/(:|am|pm)/),o="pm"===r[3]&&r[0]<12?parseInt(r[0],10)+12:r[0],i=r[2].trim();n=(1===o.length?"0":"")+o+":"+i;break;case a.rank:n=parseInt(/^\d+/.exec(e)[0],10);break;case a.monthName:case a.dayName:n=u[e.substring(0,3)]}return n}(t.text,e):n=o,t}function m(e){return v(e).text}return function(e){o=0,i=e,n=-1;for(var t=r();o<i.length&&n<0;){switch(v([a.every,a.after,a.before,a.onthe,a.on,a.of,a.in,a.at,a.and,a.except,a.also]).type){case a.every:p(t);break;case a.after:void 0!==s(a.time).type?(t.after(m(a.time)),t.time()):(t.after(m(a.rank)),y(t));break;case a.before:void 0!==s(a.time).type?(t.before(m(a.time)),t.time()):(t.before(m(a.rank)),y(t));break;case a.onthe:h(t);break;case a.on:t.on(d(a.dayName)).dayOfWeek();break;case a.of:t.on(d(a.monthName)).month();break;case a.in:t.on(d(a.yearIndex)).year();break;case a.at:for(t.on(m(a.time)).time();g(a.and);)t.on(m(a.time)).time();break;case a.and:break;case a.also:t.and();break;case a.except:t.except();break;default:n=o}}return{schedules:t.schedules,exceptions:t.exceptions,error:n}}(t.toLowerCase())},e}());s9.date.localTime();var l9,f9=s9,d9=new Date(-864e13),p9=new Date(864e13);!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(l9||(l9={}));var h9;function y9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.FullRangeIterated=0]="FullRangeIterated",e[e.StoppedByIterator=1]="StoppedByIterator",e[e.MaxCacheExtendCyclesReached=2]="MaxCacheExtendCyclesReached"}(h9||(h9={}));var g9=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cacheFilledStartDate=p9,this.cacheFilledEndDate=d9,this.intervalsCachingChunkDuration=30,this.intervalsCachingChunkUnit=n2.Day,this.maxCacheExtendCycles=1e3,t&&Object.assign(this,t)}var t,n,r;return t=e,(n=[{key:"includeWrappingRangeFrom",value:function(e,t,n){e.ensureCacheFilledForInterval(t,n),this.intervalCache.includeWrappingRange(e.intervalCache,t,n)}},{key:"ensureCacheFilledForInterval",value:function(e,t){var n=this.cacheFilledStartDate.getTime(),r=this.cacheFilledEndDate.getTime();if(n!==p9.getTime()){var o=e.getTime(),i=t.getTime();if(n<=o&&i<=r)return;if(i<=n)t=new Date(n-1);else if(o>=r)e=new Date(r+1);else if(n<=o&&o<=r)e=new Date(r+1);else{if(!(n<=i&&i<=r))return this.ensureCacheFilledForInterval(e,new Date(n-1)),void this.ensureCacheFilledForInterval(new Date(r+1),t);t=new Date(n-1)}}(n===p9.getTime()||e.getTime()<r)&&(this.cacheFilledStartDate=e),(r===d9.getTime()||r<t.getTime())&&(this.cacheFilledEndDate=t),this.fillCache(e,t)}},{key:"fillCache",value:function(e,t){throw new Error("Abstract method")}},{key:"clear",value:function(){this.cacheFilledStartDate=p9,this.cacheFilledEndDate=d9,this.intervalCache.clear()}},{key:"forEachAvailabilityInterval",value:function(e,t,n){n=n||this;var r=e.startDate,o=e.endDate,i=r&&r.getTime(),a=o&&o.getTime(),u=!1!==e.isForward;if(u?!r:!o)throw new Error("At least `startDate` or `endDate` is required, depending from the `isForward` option");for(var c=this.intervalCache,s=u?r:o,l=u?r:o,f=1;f<this.maxCacheExtendCycles;f++){u?this.ensureCacheFilledForInterval(s,o||xt.add(s,this.intervalsCachingChunkDuration,this.intervalsCachingChunkUnit)):this.ensureCacheFilledForInterval(r||xt.add(s,-this.intervalsCachingChunkDuration,this.intervalsCachingChunkUnit),s);for(var d=c.getIntervalOf(l,u?l9.Left:l9.Right);d;){var p=d.startDate,h=d.endDate;if(u&&a&&p.getTime()>=a||!u&&i&&h.getTime()<=i)return h9.FullRangeIterated;if(u&&p.getTime()>this.cacheFilledEndDate.getTime()||!u&&h.getTime()<this.cacheFilledStartDate.getTime())break;l=u?h:p;var y=i&&p.getTime()<i?r:p,g=a&&h.getTime()>a?o:h;if(!1===t.call(n,y,g,d.cacheInterval))return h9.StoppedByIterator;d=u?c.getNextInterval(d):c.getPrevInterval(d)}if(u&&l.getTime()===p9.getTime()||!u&&l.getTime()===d9.getTime())return h9.FullRangeIterated;s=u?this.cacheFilledEndDate:this.cacheFilledStartDate}return h9.MaxCacheExtendCyclesReached}}])&&y9(t.prototype,n),r&&y9(t,r),e}(),v9=function(e){var t=new Map;return e.filter((function(e){return!t.has(e)&&(t.set(e,!0),!0)}))};function m9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b9=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.intervals=[],t&&Object.assign(this,t),!this.calendar)throw new Error("Required attribute `calendar` is missing")}var t,n,r;return t=e,(n=[{key:"includeInterval",value:function(t){if(-1==this.intervals.indexOf(t)){var n=this.intervals.slice();return n.push(t),new e({intervals:n,calendar:this.calendar})}return this}},{key:"combineWith",value:function(t){return new e({intervals:this.intervals.concat(t.intervals),calendar:this.calendar})}},{key:"getIsWorking",value:function(){if(null!=this.isWorking)return this.isWorking;var e=this.intervals=this.normalizeIntervals(this.intervals);return this.isWorking=e[0].isWorking}},{key:"normalizeIntervals",value:function(e){var t=v9(e);return t.sort((function(e,t){return t.getPriorityField()-e.getPriorityField()})),t}}])&&m9(t.prototype,n),r&&m9(t,r),e}(),w9=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e-t},r=0,o=t.length;r<o;){var i=(r+o)/2|0,a=n(e,t[i]);if(0===a)return{found:!0,index:i};a<0?o=i:r=i+1}return{found:!1,index:o}};function k9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S9;!function(e){e[e.Exact=0]="Exact",e[e.Next=1]="Next"}(S9||(S9={}));var O9=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keys=[],this.values=[],this.comparator=t||function(e,t){return e-t}}var t,n,r;return t=e,(n=[{key:"set",value:function(e,t){var n=w9(e,this.keys,this.comparator);return n.found?this.values[n.index]=t:(this.keys.splice(n.index,0,e),this.values.splice(n.index,0,t)),n.index}},{key:"insertAt",value:function(e,t,n){this.keys.splice(e,0,t),this.values.splice(e,0,n)}},{key:"setValueAt",value:function(e,t){this.values[e]=t}},{key:"get",value:function(e){var t=w9(e,this.keys,this.comparator);return t.found?this.values[t.index]:void 0}},{key:"getEntryAt",value:function(e){return e<this.keys.length?{key:this.keys[e],value:this.values[e]}:void 0}},{key:"getKeyAt",value:function(e){return this.keys[e]}},{key:"getValueAt",value:function(e){return this.values[e]}},{key:"delete",value:function(e){var t=w9(e,this.keys,this.comparator);t.found&&this.deleteAt(t.index)}},{key:"size",value:function(){return this.keys.length}},{key:"deleteAt",value:function(e){this.keys.splice(e,1),this.values.splice(e,1)}},{key:"indexOfKey",value:function(e){var t=w9(e,this.keys,this.comparator);return{found:t.found?S9.Exact:S9.Next,index:t.index}}},{key:"map",value:function(e){for(var t=this.keys,n=this.values,r=[],o=0;o<t.length;o++)r.push(e(n[o],t[o],o));return r}},{key:"getAllEntries",value:function(){return this.map((function(e,t){return{value:e,key:t}}))}},{key:"clear",value:function(){this.keys.length=0,this.values.length=0}}])&&k9(t.prototype,n),r&&k9(t,r),e}();function E9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C9;!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(C9||(C9={}));var x9=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.points=new O9((function(e,t){return e.getTime()-t.getTime()})),this.leftInfinityKey=d9,this.rightInfinityKey=p9,Object.assign(this,t),void 0===this.emptyInterval||!this.combineIntervalsFn)throw new Error("All of `emptyPoint`, `combineIntervalsFn` are required");this.points.set(this.leftInfinityKey,this.emptyInterval)}var t,n,r;return t=e,(n=[{key:"size",value:function(){return this.points.size()}},{key:"indexOf",value:function(e){return this.points.indexOfKey(e)}},{key:"getDateAt",value:function(e){return this.points.getKeyAt(e)}},{key:"getPointAt",value:function(e){return this.points.getValueAt(e)}},{key:"getIntervalOf",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C9.Left,r=this.indexOf(e),o=r.found,i=r.index;return t=n===C9.Left&&o===S9.Exact?i:i-1,this.getIntervalWithStartDateIndex(t)}},{key:"getPrevInterval",value:function(e){return 0===e.startDateIndex?null:this.getIntervalWithStartDateIndex(e.startDateIndex-1)}},{key:"getNextInterval",value:function(e){return e.startDateIndex>=this.size()-1?null:this.getIntervalWithStartDateIndex(e.startDateIndex+1)}},{key:"getIntervalWithStartDateIndex",value:function(e){return{startDateIndex:e,startDate:this.getDateAt(e),endDate:e+1<this.size()?this.getDateAt(e+1):this.rightInfinityKey,cacheInterval:this.getPointAt(e)}}},{key:"addInterval",value:function(e,t,n){var r,o,i=this.points,a=i.indexOfKey(e),u=a.found,c=a.index;if(u==S9.Exact){var s=n(o=i.getValueAt(c));i.setValueAt(c,s),r=c+1}else{var l=n(o=i.getValueAt(c-1));i.insertAt(c,e,l),r=c+1}for(;r<i.size()&&!(i.getKeyAt(r).getTime()>=t.getTime());){var f=n(o=i.getValueAt(r));i.setValueAt(r,f),r++}r===i.size()?i.insertAt(i.size(),t,this.emptyInterval):i.getKeyAt(r).getTime()===t.getTime()||i.insertAt(r,t,o)}},{key:"includeWrappingRange",value:function(e,t,n){for(var r=this,o=e.getIntervalOf(t);o&&(this.addInterval(o.startDate,o.endDate,(function(e){return r.combineIntervalsFn(e,o.cacheInterval)})),!(o.endDate.getTime()>n.getTime()));)o=e.getNextInterval(o)}},{key:"getSummary",value:function(){return this.points.map((function(e,t){return{label:e,date:t}}))}},{key:"clear",value:function(){this.points.clear(),this.points.set(this.leftInfinityKey,this.emptyInterval)}}])&&E9(t.prototype,n),r&&E9(t,r),e}();function _9(e){return(_9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D9(e,t){return!t||"object"!==_9(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R9(e,t,n){return(R9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P9(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P9(e){return(P9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T9(e,t){return(T9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A9=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=D9(this,P9(t).call(this,e))).staticIntervalsCached=!1,!n.unspecifiedTimeInterval)throw new Error("Required attribute `unspecifiedTimeInterval` is missing");return n.intervalCache=new x9({emptyInterval:new b9({intervals:[n.unspecifiedTimeInterval],calendar:n.calendar}),combineIntervalsFn:function(e,t){return e.combineWith(t)}}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T9(e,t)}(t,e),n=t,(r=[{key:"fillCache",value:function(e,t){var n=this;this.staticIntervalsCached||(this.cacheStaticIntervals(),this.staticIntervalsCached=!0),this.parentCache&&this.includeWrappingRangeFrom(this.parentCache,e,t);var r=e.getTime(),o=t.getTime();if(r>o)throw new Error("Invalid cache fill interval");this.forEachRecurrentInterval((function(i){var a=i.getStartDateSchedule(),u=i.getEndDateSchedule(),c=a.prev(1,e),s=u.next(1,t);if(c!==f9.NEVER&&c.getTime()===r){var l=a.prev(2,e);l!==f9.NEVER&&2===l.length&&(c=l[1])}if(s!==f9.NEVER&&s.getTime()===o){var f=u.next(2,t);f!==f9.NEVER&&2===f.length&&(s=f[1])}var d=a.next(1/0,c!==f9.NEVER?c:e,s!==f9.NEVER?new Date(s.getTime()-1):t);if(d!==f9.NEVER){var p=u.next(1/0,new Date(d[0].getTime()+1),s!==f9.NEVER?s:t);p.length>d.length?p.length=d.length:p.length<d.length&&(d.length=p.length),d.forEach((function(e,t){var r=e,o=p[t];if(r.getTime()>o.getTime())throw new Error("Recurrent interval inconsistency: "+i+", startDate: "+e+", endDate: "+p[t]);n.intervalCache.addInterval(r,o,(function(e){return e.includeInterval(i)}))}))}}))}},{key:"clear",value:function(){this.staticIntervalsCached=!1,R9(P9(t.prototype),"clear",this).call(this)}},{key:"cacheStaticIntervals",value:function(){var e=this;this.forEachStaticInterval((function(t){e.intervalCache.addInterval(t.startDate,t.endDate,(function(e){return e.includeInterval(t)}))}))}},{key:"forEachStaticInterval",value:function(e){this.intervalStore.forEach((function(t){t.isStatic()&&e(t)}))}},{key:"forEachRecurrentInterval",value:function(e){this.intervalStore.forEach((function(t){t.isRecurrent()&&e(t)}))}}])&&j9(n.prototype,r),o&&j9(n,o),t}(g9);function M9(e){return(M9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L9(e,t){return!t||"object"!==M9(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N9(e,t,n){return(N9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H9(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function H9(e){return(H9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B9(e,t){return(B9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z9=function(e){var t=function(e){function t(){return I9(this,t),L9(this,H9(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B9(e,t)}(t,e),n=t,(r=[{key:"construct",value:function(e){var n;this.constructor.exposeProperties();var r={},o={};for(var i in this.originalData=e=e||{},e){var a=this.getFieldDefinitionFromDataSource(i),u=a?a.name:i,c=this.$entity.getField(u);c&&"expanded"!=u&&"children"!=u?o[u]=e[i]:r[i]=e[i]}for(var s=arguments.length,l=new Array(s>1?s-1:0),f=1;f<s;f++)l[f-1]=arguments[f];(n=N9(H9(t.prototype),"construct",this)).call.apply(n,[this,r].concat(l)),Object.assign(this,o)}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=N9(H9(t.prototype),"copy",this).call(this,e);return n&&this.forEachFieldAtom((function(e,t){r.$[t].put(e.get())})),r}}])&&F9(n.prototype,r),o&&F9(n,o),t}(e);return t};function V9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $9(e,t){return!t||"object"!==q9(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y9(e){return(Y9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G9(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U9(e,t)}function U9(e,t){return(U9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q9(e){return(q9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var X9=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":q9(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},K9=function(e){var t=function(e){function t(){return V9(this,t),$9(this,Y9(t).apply(this,arguments))}var n,r,o;return G9(t,e),n=t,(r=[{key:"getCalendar",value:function(){return this.stores[0].calendar}},{key:"resetPriority",value:function(){this.priorityField=null}},{key:"getPriorityField",value:function(){if(null!=this.priorityField)return this.priorityField;var e=1e4+100*this.getCalendar().getDepth(),t=this.priority;return null==t&&(t=this.isRecurrent()?20:30),this.priorityField=e+t}},{key:"isRecurrent",value:function(){return Boolean(this.recurrentStartDate&&this.recurrentEndDate&&this.getStartDateSchedule()&&this.getEndDateSchedule())}},{key:"isStatic",value:function(){return Boolean(this.startDate&&this.endDate)}},{key:"parseDateSchedule",value:function(e){if(e&&e!==Object(e)&&((e=f9.parse.text(e))!==Object(e)||e.error>0))try{e=JSON.parse(e)}catch(e){return null}return e}},{key:"getStartDateSchedule",value:function(){if(this.startDateSchedule)return this.startDateSchedule;var e=this.parseDateSchedule(this.recurrentStartDate);return this.startDateSchedule=f9.schedule(e)}},{key:"getEndDateSchedule",value:function(){if(this.endDateSchedule)return this.endDateSchedule;var e=this.parseDateSchedule(this.recurrentEndDate);return this.endDateSchedule=f9.schedule(e)}}])&&W9(n.prototype,r),o&&W9(n,o),t}(e);return X9([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ"},{converter:L8})],t.prototype,"startDate",void 0),X9([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ"},{converter:L8})],t.prototype,"endDate",void 0),X9([M8({type:"string"})],t.prototype,"recurrentStartDate",void 0),X9([M8({type:"string"})],t.prototype,"recurrentEndDate",void 0),X9([M8({type:"boolean",defaultValue:!1})],t.prototype,"isWorking",void 0),X9([M8({type:"number"})],t.prototype,"priority",void 0),t},Z9=function(e){function t(){return V9(this,t),$9(this,Y9(t).apply(this,arguments))}return G9(t,e),t}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return K9(t9(c9(z9(q6(e)))))}());function J9(e){return(J9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t7(e,t){return!t||"object"!==J9(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function n7(e){return(n7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r7(e,t){return(r7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o7=function(e){function t(){return Q9(this,t),t7(this,n7(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r7(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:Z9}}}],(r=null)&&e7(n.prototype,r),o&&e7(n,o),t}(G8(c9(ed)));function i7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u7(e,t){return!t||"object"!==l7(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c7(e){return(c7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s7(e,t){return(s7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l7(e){return(l7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f7=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l7(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d7=function(e){function t(){return i7(this,t),u7(this,c7(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s7(e,t)}(t,e),n=t,(r=[{key:"getCalendar",value:function(){return this.calendar}},{key:"getPriorityField",value:function(){return null!=this.priorityField?this.priorityField:this.priorityField=this.getCalendar().getDepth()}}])&&a7(n.prototype,r),o&&a7(n,o),t}(Z9);function p7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y7(e,t){return!t||"object"!==w7(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g7(e,t,n){return(g7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v7(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function v7(e){return(v7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m7(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b7(e,t)}function b7(e,t){return(b7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w7(e){return(w7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}f7([M8({type:"number",defaultValue:10})],d7.prototype,"priority",void 0);var k7=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":w7(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S7=Symbol("CalendarMixin"),O7=function(e){var t=function(e){function t(){var e;return p7(this,t),(e=y7(this,v7(t).apply(this,arguments))).version=1,e}var n,r,o;return m7(t,e),n=t,(r=[{key:S7,value:function(){}},{key:"calculateSelf",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.version;case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))},{key:"afterConstruct",value:function(){g7(v7(t.prototype),"afterConstruct",this).call(this);var e=this.hoursPerDay,n=this.daysPerWeek,r=this.daysPerMonth;this.unitsInMs={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:60*e*60*1e3,week:n*e*60*60*1e3,month:r*e*60*60*1e3,quarter:3*r*e*60*60*1e3,year:12*r*e*60*60*1e3},this.intervalStore=new o7({calendar:this}),this.intervals&&this.intervals.length&&this.addIntervals(this.intervals),this.clearCache()}},{key:"isDefault",value:function(){var e=this.getProject();return!!e&&this===e.defaultCalendar}},{key:"getDepth",value:function(){return this.childLevel+1}},{key:"forEachAvailabilityInterval",value:function(e,t,n){return this.calendarCache.forEachAvailabilityInterval(e,t,n)}},{key:"accumulateWorkingTime",value:function(e,t,n,r){if(0===t)return{finalDate:new Date(e),remainingDurationInMs:0};if(isNaN(t))throw new Error("Invalid duration");var o=this.convertDuration(t,n,n2.Millisecond),i=e;return this.forEachAvailabilityInterval(r?{startDate:e,isForward:!0}:{endDate:e,isForward:!1},(function(e,t,n){var a=!0;if(n.getIsWorking()){var u=e.getTimezoneOffset()-t.getTimezoneOffset(),c=t.getTime()-e.getTime()+60*u*1e3;o<=c?(i=r?new Date(e.getTime()+o):new Date(t.getTime()-o),o=0,a=!1):(i=r?t:e,o-=c)}return a})),{finalDate:new Date(i),remainingDurationInMs:o}}},{key:"calculateDuration",value:function(e,t,n){var r=0;return this.forEachAvailabilityInterval({startDate:e,endDate:t},(function(e,t,n){if(n.getIsWorking()){var o=e.getTimezoneOffset()-t.getTimezoneOffset();r+=t.getTime()-e.getTime()+60*o*1e3}})),this.convertDuration(r,n2.Millisecond,n)}},{key:"calculateEndDate",value:function(e,t,n){var r=this.accumulateWorkingTime(e,t,n,!0);return 0===r.remainingDurationInMs?r.finalDate:null}},{key:"calculateStartDate",value:function(e,t,n){var r=this.accumulateWorkingTime(e,t,n,!1);return 0===r.remainingDurationInMs?r.finalDate:null}},{key:"skipNonWorkingTime",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.forEachAvailabilityInterval(n?{startDate:e,isForward:!0}:{endDate:e,isForward:!1},(function(e,r,o){if(o.getIsWorking())return t=n?e:r,!1})),t?new Date(t):new Date(e)}},{key:"convertDuration",value:function(e,t,n){var r=e;return t!==n&&(r=e*this.unitsInMs[t]/this.unitsInMs[n]),r}},{key:"addInterval",value:function(e){return this.addIntervals([e])}},{key:"addIntervals",value:function(e){return this.bumpVersion(),this.intervalStore.add(e)}},{key:"bumpVersion",value:function(){this.clearCache(),this.version++}},{key:"clearCache",value:function(){this.calendarCache&&this.calendarCache.clear();var e=new d7({isWorking:this.unspecifiedTimeIsWorking});e.calendar=this,this.calendarCache=new A9({calendar:this,unspecifiedTimeInterval:e,intervalStore:this.intervalStore,parentCache:this.parent&&!this.parent.isRoot?this.parent.calendarCache:null})}},{key:"resetPriorityOfAllIntervals",value:function(){this.traverse((function(e){e.intervalStore.forEach((function(e){return e.resetPriority()}))}))}},{key:"appendChild",value:function(e){var n=g7(v7(t.prototype),"appendChild",this).call(this,e);return Array.isArray(n)||(n=[n]),n.forEach((function(e){e.bumpVersion(),e.resetPriorityOfAllIntervals()})),n}},{key:"insertChild",value:function(e,n){var r=g7(v7(t.prototype),"insertChild",this).call(this,e,n);return Array.isArray(r)||(r=[r]),r.forEach((function(e){e.bumpVersion(),e.resetPriorityOfAllIntervals()})),r}},{key:"joinProject",value:function(){g7(v7(t.prototype),"joinProject",this).call(this),this.intervalStore.setProject(this.getProject())}},{key:"leaveProject",value:function(){g7(v7(t.prototype),"leaveProject",this).call(this),this.intervalStore.setProject(null)}},{key:"isDayHoliday",value:function(e){var t=xt.clearTime(e),n=xt.getNext(e,n2.Day),r=!1;return this.forEachAvailabilityInterval({startDate:t,endDate:n,isForward:!0},(function(e,t,n){return!(r=n.getIsWorking())})),!r}},{key:"getDailyHolidaysRanges",value:function(e,t){var n=[];for(e=xt.clearTime(e);e<t;)this.isDayHoliday(e)&&n.push({startDate:e,endDate:xt.getStartOfNextDay(e,!0,!0)}),e=xt.getNext(e,n2.Day);return n}}])&&h7(n.prototype,r),o&&h7(n,o),t}(e);return k7([J6({persistent:!1})],t.prototype,"version",void 0),k7([M8({type:"string"})],t.prototype,"name",void 0),k7([M8({type:"number",defaultValue:24})],t.prototype,"hoursPerDay",void 0),k7([M8({type:"number",defaultValue:7})],t.prototype,"daysPerWeek",void 0),k7([M8({type:"number",defaultValue:30})],t.prototype,"daysPerMonth",void 0),k7([M8({type:"boolean",defaultValue:!0})],t.prototype,"unspecifiedTimeIsWorking",void 0),k7([M8()],t.prototype,"intervals",void 0),t},E7=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return O7(t9(c9(q6(e))))},C7=function(e){function t(){return p7(this,t),y7(this,v7(t).apply(this,arguments))}return m7(t,e),t}(E7());function x7(e){return(x7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D7(e,t){return!t||"object"!==x7(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R7(e){return(R7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P7(e,t){return(P7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T7=function(e){function t(){return _7(this,t),D7(this,R7(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P7(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[]}}],(r=null)&&j7(n.prototype,r),o&&j7(n,o),t}(D4(E7(qs)));function A7(e){return(A7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M7(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function I7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L7(e,t){return!t||"object"!==A7(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N7(e,t,n){return(N7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H7(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function H7(e){return(H7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B7(e,t){return(B7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}T7._$name="ProCalendarModel";var z7=function(e){return function(e){function t(){return I7(this,t),L7(this,H7(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B7(e,t)}(t,e),n=t,(r=[{key:"construct",value:function(){for(var e,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(e=N7(H7(t.prototype),"construct",this)).call.apply(e,[this].concat(o)),n.addPrioritizedStore(n.calendarManagerStore),n.addPrioritizedStore(n.assignmentStore),n.addPrioritizedStore(n.dependencyStore),n.addPrioritizedStore(n.resourceStore),n.addPrioritizedStore(n.eventStore),n.addPrioritizedStore(n.timeRangeStore)}},{key:"applyResponse",value:(i=regeneratorRuntime.mark((function e(n,r,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N7(H7(t.prototype),"applyResponse",this).call(this,n,r,o);case 2:return r&&r.project&&Object.assign(this,r.project),e.next=5,this.propagate((function(){return N4.Resume}));case 5:this.clearCrudStoresChanges();case 6:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){M7(o,n,r,a,u,"next",e)}function u(e){M7(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e,t,n){return a.apply(this,arguments)})},{key:"clearCrudStoresChanges",value:function(){this.crudStores.forEach((function(e){var t=e.store;t.remove(t.added.values,!0),t.modified.forEach((function(e){return e.clearChanges(!1)})),t.added.clear(),t.modified.clear(),t.removed.clear()}))}},{key:"applyProjectResponse",value:function(e){this.loadProjectFields(e)}}])&&F7(n.prototype,r),o&&F7(n,o),t}(yN(XA(fM(e))))};function V7(e){return(V7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W7(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function $7(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){W7(i,r,o,a,u,"next",e)}function u(e){W7(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Y7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U7(e,t){return!t||"object"!==V7(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q7(e,t,n){return(q7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X7(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function X7(e){return(X7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K7(e,t){return(K7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z7=function(e){return function(e){function t(){return Y7(this,t),U7(this,X7(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K7(e,t)}(t,e),n=t,(r=[{key:"addEventToResource",value:(a=$7(regeneratorRuntime.mark((function e(n){var r,o,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.event,o=n.resource,i=n.eventStore,a=n.assignmentStore,u=q7(X7(t.prototype),"addEventToResource",this).call(this,{event:r,resource:o,eventStore:i,assignmentStore:a}),c=u.assignment,e.next=4,this.propagate();case 4:return s=e.sent,e.abrupt("return",{event:r,assignment:c,result:s});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"addEventToResourceWithoutPropagation",value:function(e){return q7(X7(t.prototype),"addEventToResource",this).call(this,e)}},{key:"removeEvents",value:(i=$7(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.forEach((function(e){return e.remove()})),e.next=3,this.project.propagate();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})}])&&G7(n.prototype,r),o&&G7(n,o),t}(e||Y)};function J7(e){return(J7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q7(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function eee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nee(e,t){return!t||"object"!==J7(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ree(e){return(ree=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oee(e,t){return(oee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var iee=function(e){return function(e){function t(){return eee(this,t),nee(this,ree(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oee(e,t)}(t,e),n=t,(r=[{key:"isValidDependency",value:function(e){var t=e.sourceEvent,n=e.targetEvent,r=e.type;return e.dependencyStore.isValidDependency({fromEvent:t,toEvent:n,type:r})}},{key:"createDependency",value:(i=regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sourceEvent,r=t.targetEvent,o=t.type,i=t.dependencyStore,a=i.add({fromEvent:n,toEvent:r,type:o})[0],e.next=4,this.propagate();case 4:return u=e.sent,e.abrupt("return",{result:u,dependency:a});case 6:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Q7(o,n,r,a,u,"next",e)}function u(e){Q7(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})}])&&tee(n.prototype,r),o&&tee(n,o),t}(e||Y)};function aee(e){return(aee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cee(e,t){return!t||"object"!==aee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function see(e){return(see=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lee(e,t){return(lee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fee=function(e){return function(e){function t(){return uee(this,t),cee(this,see(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lee(e,t)}(t,e),t}(e||Y)};function dee(e){return(dee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yee(e,t){return!t||"object"!==dee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gee(e){return(gee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vee(e,t){return(vee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mee=function(e){return function(e){function t(){return pee(this,t),yee(this,gee(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vee(e,t)}(t,e),n=t,(r=[{key:"propagate",value:function(){return this.project.propagate()}},{key:"beginPropagationBatch",value:function(){this.project.suspendPropagate()}},{key:"endPropagationBatch",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.project.resumePropagate(e)}},{key:"project",get:function(){var e=this,t=e.host;return e._project||(e._project=t.getProjectForDataAPI&&t.getProjectForDataAPI(e)||t.getProject&&t.getProject(e)),e._project}}])&&hee(n.prototype,r),o&&hee(n,o),t}(e||Y)};function bee(e){return(bee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function See(e,t){return!t||"object"!==bee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oee(e){return(Oee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eee(e,t){return(Eee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cee=function(e){var t,n=[YB,CB,TB,HB,fee,Z7,w4,iee,mee],r=(t=Xs(Y)).mixes.apply(t,n);return function(e){function t(){return wee(this,t),See(this,Oee(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eee(e,t)}(t,e),n=t,(o=[{key:"dataApi",get:function(){return this._dataApi||(this._dataApi=new r({host:this.dataApiHost||this})),this._dataApi}}])&&kee(n.prototype,o),i&&kee(n,i),t}(e||Y)};function xee(e){return(xee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dee(e,t){return!t||"object"!==xee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ree(e){return(Ree=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pee(e,t){return(Pee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tee=function(e){function t(){return _ee(this,t),Dee(this,Ree(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pee(e,t)}(t,e),n=t,o=[{key:"featureClass",get:function(){return"b-dependencies"}},{key:"defaultConfig",get:function(){return{terminalSides:["left","right"]}}}],(r=[{key:"getProjectForDataAPI",value:function(){return this.dependencyStore.getProject()}},{key:"obtainResourceStore",value:function(e,t){return e.project.getResourceStore()}},{key:"obtainDependencyStore",value:function(e,t){return e.project.getDependencyStore()}},{key:"obtainAssignmentStore",value:function(e,t){return e.project.getAssignmentStore()}},{key:"obtainEventStore",value:function(e,t){return e.project.getEventStore()}}])&&jee(n.prototype,r),o&&jee(n,o),t}(Xs(nU).mixes(Cee));function Aee(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Mee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fee(e,t){return!t||"object"!==Bee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lee(e){return(Lee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hee(e,t)}function Hee(e,t){return(Hee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bee(e){return(Bee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Tee._$name="ProDependencies",nC.registerFeature(Tee,!0,"ProScheduler","Dependencies");var zee=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Bee(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Vee=Symbol("hasMixin"),Wee=function(e){var t=function(e){function t(){return Mee(this,t),Fee(this,Lee(t).apply(this,arguments))}var n,r,o,i,a;return Nee(t,e),n=t,(r=[{key:Vee,value:function(){}},{key:"calculateSelf",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.lag;case 2:return e.next=4,this.$.lagUnit;case 4:return e.next=6,this.$.type;case 6:return e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)}))},{key:"calculateCalendar",value:regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProject().$.dependenciesCalendar;case 2:t=e.sent,e.t0=t,e.next=e.t0===a2.Project?6:e.t0===a2.FromEvent?10:e.t0===a2.ToEvent?22:34;break;case 6:return e.next=8,this.getProject().$.calendar;case 8:return n=e.sent,e.abrupt("break",34);case 10:return e.next=12,this.$.fromEvent;case 12:if(!(r=e.sent)||C5(r)){e.next=19;break}return e.next=16,r.$.calendar;case 16:e.t1=e.sent,e.next=20;break;case 19:e.t1=null;case 20:return n=e.t1,e.abrupt("break",34);case 22:return e.next=24,this.$.toEvent;case 24:if(!(o=e.sent)||C5(o)){e.next=31;break}return e.next=28,o.$.calendar;case 28:e.t2=e.sent,e.next=32;break;case 31:e.t2=null;case 32:return n=e.t2,e.abrupt("break",34);case 34:if(n){e.next=38;break}return e.next=37,this.getProject().$.calendar;case 37:n=e.sent;case 38:return e.next=40,n.$$;case 40:return e.abrupt("return",n);case 41:case"end":return e.stop()}}),e,this)}))},{key:"setLag",value:(i=regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:this.lagUnit,this.$.lag.put(t),this.$.lagUnit.put(n),e.abrupt("return",this.propagate());case 4:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Aee(o,n,r,a,u,"next",e)}function u(e){Aee(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})}])&&Iee(n.prototype,r),o&&Iee(n,o),t}(e);return zee([Z6({bucket:"outgoingDeps",resolver:function(e){return this.getEventById(e)},modelFieldConfig:{persist:!0,serialize:function(e){return e.id}}},D8)],t.prototype,"fromEvent",void 0),zee([Z6({bucket:"incomingDeps",resolver:function(e){return this.getEventById(e)},modelFieldConfig:{persist:!0,serialize:function(e){return e.id}}},D8)],t.prototype,"toEvent",void 0),zee([M8({type:"number",defaultValue:0})],t.prototype,"lag",void 0),zee([M8({type:"string",defaultValue:n2.Day},{converter:xt.normalizeUnit})],t.prototype,"lagUnit",void 0),zee([M8({type:"string",defaultValue:i2.EndToStart})],t.prototype,"type",void 0),zee([J6()],t.prototype,"calendar",void 0),zee([Q6("calendar")],t.prototype,"calculateCalendar",null),t},$ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return Wee(t9(c9(z9(q6(e)))))},Yee=function(e){function t(){return Mee(this,t),Fee(this,Lee(t).apply(this,arguments))}return Nee(t,e),t}($ee()),Gee=function(e){return Boolean(e&&e[Vee])};function Uee(e){return(Uee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kee(e,t){return!t||"object"!==Uee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zee(e){return(Zee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jee(e,t){return(Jee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qee=["SS","SF","FS","FF"],ete=function(e){function t(){var e;qee(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=r[0];return i&&i.fromTask&&(i.fromEvent=i.fromTask),i&&i.toTask&&(i.toEvent=i.toTask),Kee(this,(e=Zee(t)).call.apply(e,[this].concat(r)))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jee(e,t)}(t,e),n=t,(r=[{key:"getFromTask",value:function(){return this.getFromEvent()}},{key:"setFromTask",value:function(){return this.setFromEvent.apply(this,arguments)}},{key:"getToTask",value:function(){return this.getToEvent()}},{key:"setToTask",value:function(){return this.setToEvent.apply(this,arguments)}},{key:"getTypeFromSides",value:function(e,t,n){var r=YN.Type,o=n?"right":"left",i=n?"left":"right";return e===o?t===o?r.StartToStart:r.StartToEnd:t===i?r.EndToEnd:r.EndToStart}},{key:"getConnectorString",value:function(e){var t=Qee[this.type];if(e)return t;if(this.type===YN.Type.EndToStart)return"";var n=Te.locale;if(n){var r=n.SchedulerProCommon&&n.SchedulerProCommon[t];if(r)return r}return t}},{key:"sourceTask",set:function(e){this.fromEvent=e},get:function(){return this.fromEvent}},{key:"sourceEvent",get:function(){return this.fromEvent}},{key:"from",get:function(){return this.fromEvent&&this.fromEvent.id}},{key:"fromTask",get:function(){return this.fromEvent},set:function(e){this.fromEvent=e}},{key:"targetTask",set:function(e){this.toEvent=e},get:function(){return this.toEvent}},{key:"to",get:function(){return this.toEvent&&this.toEvent.id}},{key:"targetEvent",get:function(){return this.toEvent}},{key:"toTask",get:function(){return this.toEvent},set:function(e){this.toEvent=e}}])&&Xee(n.prototype,r),o&&Xee(n,o),t}(D4($ee(YN)));function tte(e){return(tte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ote(e,t){return!t||"object"!==tte(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ite(e,t,n){return(ite="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ate(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ate(e){return(ate=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ute(e,t){return(ute=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ete._$name="ProDependencyModel";var cte=function(e){function t(){return nte(this,t),ote(this,ate(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ute(e,t)}(t,e),n=t,(r=[{key:"getProjectForDataAPI",value:function(){return this.eventStore.getProject()}},{key:"updateRecordsMultipleAssignmentMode",value:function(e,n,r,o){var i=this,a=r.draggedRecords,u=a.map((function(e){return i.dataApi.getAssignmentEvent({assignment:e,eventStore:i.eventStore}).startDate}));return this.dataApi.beginPropagationBatch(),ite(ate(t.prototype),"updateRecordsMultipleAssignmentMode",this).call(this,e,n,r,o),r.valid=!0,this.dataApi.endPropagationBatch().then((function(e){return a.forEach((function(e,t){var n=i.dataApi.getAssignmentEvent({assignment:e,eventStore:i.eventStore}),r=u[t];if(r-n.startDate==0){var o=i.client.getElementFromAssignmentRecord(e);if(o){xn.setTranslateX(o.parentElement,i.client.getCoordinateFromDate(r));var a=i.client.features.dependencies;a&&a.updateDependenciesForTimeSpan(e,o)}}})),e}))}}])&&rte(n.prototype,r),o&&rte(n,o),t}(Xs(uz).mixes(Cee));function ste(e){return(ste="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lte(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function fte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pte(e,t){return!t||"object"!==ste(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hte(e){return(hte=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yte(e,t){return(yte=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}cte._$name="ProEventDrag",nC.registerFeature(cte,!0,"ProScheduler","EventDrag");var gte=function(e){function t(){return fte(this,t),pte(this,hte(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yte(e,t)}(t,e),n=t,r=[{key:"finalizeDragCreate",value:(i=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){n.eventStore.modelClass.exposeProperties();var e=n.eventStore.modelClass.getFieldDefinition("durationUnit").defaultValue,r=n.dataApi.addEventToResourceWithoutPropagation({event:{startDate:t.startDate,duration:t.rowRecord.getCalendar().calculateDuration(t.startDate,t.endDate,e)},resource:t.rowRecord,eventStore:n.eventStore,assignmentStore:n.assignmentStore}),o=r.event,i=r.assignment;return n.scheduler.trigger("dragCreateEnd",{newEventRecord:o,newAssignmentRecord:i,resourceRecord:t.rowRecord,event:t.event,proxyElement:n.proxy}),o},!(n=this).client.hasFeature("eventEdit")){e.next=5;break}n.client.features.eventEdit.editEvent(r,t.rowRecord),e.next=8;break;case 5:return r(),e.next=8,n.dataApi.propagate();case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){lte(o,n,r,a,u,"next",e)}function u(e){lte(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"getProjectForDataAPI",value:function(){return this.eventStore.getProject()}},{key:"obtainResourceStore",value:function(e,t){return e.project.getResourceStore()}},{key:"obtainDependencyStore",value:function(e,t){return e.project.getDependencyStore()}},{key:"obtainAssignmentStore",value:function(e,t){return e.project.getAssignmentStore()}},{key:"obtainEventStore",value:function(e,t){return e.project.getEventStore()}}],o=[{key:"featureClass",get:function(){return"b-eventdragcreate"}}],r&&dte(n.prototype,r),o&&dte(n,o),t}(Xs(Oz).mixes(mB,Cee));function vte(e){return(vte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wte(e,t){return!t||"object"!==vte(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kte(e,t,n){return(kte="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ste(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ste(e){return(Ste=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ote(e,t){return(Ote=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}gte._$name="ProEventDragCreate",nC.registerFeature(gte,!0,"ProScheduler","EventDragCreate");var Ete=function(e){function t(){return mte(this,t),wte(this,Ste(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ote(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{showHeaderElements:!0,cls:"b-sch-nonworkingtime",calendar:null}}}],(r=[{key:"construct",value:function(e,n){kte(Ste(t.prototype),"construct",this).call(this,e,n),this.bindProject(e.project)}},{key:"doDestroy",value:function(){this.unbindProject(),kte(Ste(t.prototype),"doDestroy",this).call(this)}},{key:"bindProject",value:function(e){var t=this;t.calendar||(t.calendar=e.getCalendar(),t.projectDetacher=e.eventStore.on("change",(function(n){var r=n.record,o=n.changes;r===e&&o.calendar&&(t.calendar=e.getCalendar())}))),t.cmsDetacher=e.getCalendarManagerStore().on({update:function(e){e.record===t.calendar&&t.client.isPainted&&t.renderRanges()},thisObj:t})}},{key:"unbindProject",value:function(){var e=this;e.cmsDetacher&&e.cmsDetacher(),e.cmsDetacher=null,e.projectDetacher&&e.projectDetacher(),e.projectDetacher=null}},{key:"renderRanges",value:function(){var e=this.store,n=this.client.timeAxis;if(e&&!e.isDestroyed){var r=xt.as(n.unit,1,"week")>=1;e.removeAll(!0),this.calendar&&r&&e.add(this.calendar.getDailyHolidaysRanges(n.startDate,n.endDate),!0)}kte(Ste(t.prototype),"renderRanges",this).call(this)}},{key:"calendar",get:function(){return this._calendar},set:function(e){e!==this._calendar&&(this._calendar=e,this.client.isPainted&&this.renderRanges())}}])&&bte(n.prototype,r),o&&bte(n,o),t}(kY);function Cte(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function xte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jte(e,t){return!t||"object"!==Pte(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dte(e){return(Dte=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rte(e,t){return(Rte=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pte(e){return(Pte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Ete._$name="ProNonWorkingTime",nC.registerFeature(Ete,!0,["ProScheduler","Gantt"],"nonWorkingTime");var Tte=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Pte(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Ate=Symbol("HasCalendarMixin"),Mte=function(e){var t=function(e){function t(){var e;return xte(this,t),(e=jte(this,Dte(t).apply(this,arguments))).calendarInherited=!0,e}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rte(e,t)}(t,e),n=t,(r=[{key:Ate,value:function(){}},{key:"setCalendar",value:(i=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.calendar=t,e.abrupt("return",this.propagate());case 2:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Cte(o,n,r,a,u,"next",e)}function u(e){Cte(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"getCalendar",value:function(){return this.calendar}},{key:"calculateCalendar",value:regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getCalendarManagerStore(),null==t){e.next=7;break}C5(t)&&(r=n.getById(t)||null,t=r),this.calendarInherited=!1,o=t,e.next=17;break;case 7:if(void 0!==t||!this.$.calendar.hasConsistentValue()||this.calendarInherited){e.next=11;break}o=this.$.calendar.getConsistentValue(),e.next=17;break;case 11:if((i=this.getProject())===this){e.next=17;break}return e.next=15,i.$.calendar;case 15:o=e.sent,this.calendarInherited=!0;case 17:if(e.t0=!C5(o),!e.t0){e.next=21;break}return e.next=21,o.$$;case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,this)}))}])&&_te(n.prototype,r),o&&_te(n,o),t}(e);return Tte([M8({serialize:function(e){return e.id}})],t.prototype,"calendar",void 0),Tte([Q6("calendar")],t.prototype,"calculateCalendar",null),t};function Ite(e){return(Ite="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nte(e,t){return!t||"object"!==Ite(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hte(e){return(Hte=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bte(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zte(e,t)}function zte(e,t){return(zte=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vte=function(e){function t(){return Lte(this,t),Nte(this,Hte(t).apply(this,arguments))}return Bte(t,e),t}(H4),Wte=function(e){function t(){return Lte(this,t),Nte(this,Hte(t).apply(this,arguments))}var n,r,o;return Bte(t,e),n=t,(r=[{key:"getDescription",value:function(){throw new Error("Abstract method")}},{key:"resolve",value:function(){throw new Error("Abstract method")}}])&&Fte(n.prototype,r),o&&Fte(n,o),t}(P4);function $te(e){return($te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ute(e,t){return!t||"object"!==$te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qte(e,t,n){return(qte="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xte(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xte(e){return(Xte=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kte(e,t){return(Kte=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zte=function(e){function t(){return Yte(this,t),Ute(this,Xte(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kte(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=qte(Xte(t.prototype),"initialize",this)).call.apply(e,[this].concat(r)),this.startDate||(this.startDate=d9),this.endDate||(this.endDate=p9)}},{key:"startDateIsFinite",value:function(){return!this.isIntervalEmpty()&&this.startDate.getTime()!==d9.getTime()}},{key:"endDateIsFinite",value:function(){return!this.isIntervalEmpty()&&this.endDate.getTime()!==p9.getTime()}},{key:"containsDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l9.Left;return t===l9.Left&&e>=this.startDate&&e<this.endDate||t===l9.Right&&e>this.startDate&&e<=this.endDate}},{key:"isIntervalEmpty",value:function(){return this.startDate>this.endDate}},{key:"intersect",value:function(e){var t=e.startDate,n=e.endDate,r=this.startDate,o=this.endDate;if(o<t||r>n)return Jte;var i=new Date(Math.max(r.getTime(),t.getTime())),a=new Date(Math.min(o.getTime(),n.getTime()));return this.constructor.new({startDate:i,endDate:a})}}])&&Gte(n.prototype,r),o&&Gte(n,o),t}(P4),Jte=Zte.new({startDate:p9,endDate:d9}),Qte=function(e){return e.reduce((function(e,t){return e.intersect(t)}),Zte.new())};function ene(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function tne(e,t,n){return(tne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ane(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function nne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function one(e,t,n){return t&&rne(e.prototype,t),n&&rne(e,n),e}function ine(e,t){return!t||"object"!==sne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ane(e){return(ane=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function une(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cne(e,t)}function cne(e,t){return(cne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sne(e){return(sne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var lne=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":sne(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},fne=function(e){function t(){return nne(this,t),ine(this,ane(t).apply(this,arguments))}return une(t,e),one(t,[{key:"toString",value:function(){return"from ".concat(this.startDate," till ").concat(this.endDate)}}]),t}(Zte),dne=function(e){function t(){return nne(this,t),ine(this,ane(t).apply(this,arguments))}return une(t,e),one(t,[{key:"resolve",value:function(){if(!this.interval)throw new Error("Can't use this resolution option - no constraint interval available");if(!this.interval.onRemoveAction)throw new Error("Can't use this resolution option - no `onRemoveAction` available");this.interval.onRemoveAction()}},{key:"originDescription",get:function(){return this.interval.originDescription}}]),t}(Wte),pne=function(e){function t(){return nne(this,t),ine(this,ane(t).apply(this,arguments))}return une(t,e),one(t,[{key:"description",get:function(){return"The change causes scheduling conflict with the constraining interval ".concat(this.conflictingInterval,",\nwhich is created by the ").concat(this.conflictingInterval.originDescription)}},{key:"resolutions",get:function(){var e=[];return this.conflictingInterval.onRemoveAction&&e.push(dne.new({interval:this.conflictingInterval})),Object.defineProperty(this,"resolutions",{value:e}),e}}]),t}(Vte),hne=function(e){function t(){return nne(this,t),ine(this,ane(t).apply(this,arguments))}return une(t,e),one(t,[{key:"description",get:function(){return"The date ".concat(this.proposedDate," is outside of the constraining interval ").concat(this.conflictingInterval,",\nwhich is created by the ").concat(this.conflictingInterval.originDescription)}}]),t}(pne),yne=function(e){var t=function(e){function t(){return nne(this,t),ine(this,ane(t).apply(this,arguments))}var n,r;return une(t,e),one(t,[{key:"setManuallyScheduled",value:(n=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$.manuallyScheduled.put(t),e.abrupt("return",this.propagate());case 2:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){ene(i,r,o,a,u,"next",e)}function u(e){ene(i,r,o,a,u,"throw",e)}a(void 0)}))},function(e){return r.apply(this,arguments)})},{key:"validateProposedStartDate",value:regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=35;break}return e.delegateYield(this.skipNonWorkingTime(t,!0),"t0",2);case 2:return n=e.t0,e.next=5,this.$.combinedStartDateConstraintIntervals;case 5:r=e.sent,o=Zte.new(),i=!0,a=!1,u=void 0,e.prev=10,c=r[Symbol.iterator]();case 12:if(i=(s=c.next()).done){e.next=21;break}if(l=s.value,(o=o.intersect(l)).containsDate(n)){e.next=18;break}return e.next=18,hne.new({proposedDate:n,conflictingInterval:l});case 18:i=!0,e.next=12;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(10),a=!0,u=e.t1;case 27:e.prev=27,e.prev=28,i||null==c.return||c.return();case 30:if(e.prev=30,!a){e.next=33;break}throw u;case 33:return e.finish(30);case 34:return e.finish(27);case 35:case"end":return e.stop()}}),e,this,[[10,23,27,35],[28,,30,34]])}))},{key:"validateProposedEndDate",value:regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=35;break}return e.delegateYield(this.skipNonWorkingTime(t,!1),"t0",2);case 2:return n=e.t0,e.next=5,this.$.combinedEndDateConstraintIntervals;case 5:r=e.sent,o=Zte.new(),i=!0,a=!1,u=void 0,e.prev=10,c=r[Symbol.iterator]();case 12:if(i=(s=c.next()).done){e.next=21;break}if(l=s.value,(o=o.intersect(l)).containsDate(n)){e.next=18;break}return e.next=18,hne.new({proposedDate:n,conflictingInterval:l});case 18:i=!0,e.next=12;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(10),a=!0,u=e.t1;case 27:e.prev=27,e.prev=28,i||null==c.return||c.return();case 30:if(e.prev=30,!a){e.next=33;break}throw u;case 33:return e.finish(30);case 34:return e.finish(27);case 35:case"end":return e.stop()}}),e,this,[[10,23,27,35],[28,,30,34]])}))},{key:"calculateEarlyStartDateRaw",value:regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getProject(),e.next=3,t.$.startDate;case 3:return n=e.sent,e.next=6,this.$.validInitialIntervals;case 6:return r=e.sent,o=r.startDateInterval,e.abrupt("return",o.startDateIsFinite()?o.startDate:n);case 9:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyStartDate",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.earlyStartDateRaw;case 2:return t=e.sent,e.delegateYield(this.maybeSkipNonWorkingTime(t,!0),"t0",4);case 4:return e.abrupt("return",e.t0);case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyEndDateRaw",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getProject(),e.next=3,t.$.startDate;case 3:return n=e.sent,e.next=6,this.$.validInitialIntervals;case 6:return r=e.sent,o=r.endDateInterval,e.delegateYield(this.canCalculateProjectedXDate(),"t0",9);case 9:if(i=e.t0,a=null,!o.startDateIsFinite()){e.next=15;break}a=o.startDate,e.next=18;break;case 15:if(!n||!i){e.next=18;break}return e.delegateYield(this.calculateProjectedEndDate(n),"t1",17);case 17:a=e.t1;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyEndDate",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.earlyEndDateRaw;case 2:return t=e.sent,e.delegateYield(this.maybeSkipNonWorkingTime(t,!1),"t0",4);case 4:return e.abrupt("return",e.t0);case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateLateStartDateRaw",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getProject(),e.next=3,t.$.endDate;case 3:return n=e.sent,e.next=6,this.$.validInitialIntervals;case 6:return r=e.sent,o=r.startDateInterval,e.delegateYield(this.canCalculateProjectedXDate(),"t0",9);case 9:if(i=e.t0,a=null,!o.endDateIsFinite()){e.next=15;break}a=o.endDate,e.next=18;break;case 15:if(!n||!i){e.next=18;break}return e.delegateYield(this.calculateProjectedStartDate(n),"t1",17);case 17:a=e.t1;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this)}))},{key:"calculateLateStartDate",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.lateStartDateRaw;case 2:return t=e.sent,e.delegateYield(this.maybeSkipNonWorkingTime(t,!0),"t0",4);case 4:return e.abrupt("return",e.t0);case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateLateEndDateRaw",value:regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getProject(),e.next=3,t.$.endDate;case 3:return n=e.sent,e.next=6,this.$.validInitialIntervals;case 6:return r=e.sent,o=r.endDateInterval,e.abrupt("return",o.endDateIsFinite()?o.endDate:n);case 9:case"end":return e.stop()}}),e,this)}))},{key:"calculateLateEndDate",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.lateEndDateRaw;case 2:return t=e.sent,e.delegateYield(this.maybeSkipNonWorkingTime(t,!1),"t0",4);case 4:return e.abrupt("return",e.t0);case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateTotalSlack",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.earlyStartDateRaw;case 2:return t=e.sent,e.next=5,this.$.lateStartDateRaw;case 5:return n=e.sent,e.next=8,this.$.earlyEndDateRaw;case 8:return r=e.sent,e.next=11,this.$.lateEndDateRaw;case 11:return o=e.sent,e.next=14,this.$.slackUnit;case 14:if(i=e.sent,!(t&&n||r&&o)){e.next=28;break}if(!t||!n){e.next=25;break}return e.delegateYield(this.calculateDurationBetweenDates(t,n,i),"t0",18);case 18:if(u=e.t0,!r||!o){e.next=23;break}return e.delegateYield(this.calculateDurationBetweenDates(r,o,i),"t1",21);case 21:(a=e.t1)<u&&(u=a);case 23:e.next=28;break;case 25:if(!r||!o){e.next=28;break}return e.delegateYield(this.calculateDurationBetweenDates(r,o,i),"t2",27);case 27:u=e.t2;case 28:return e.abrupt("return",u);case 29:case"end":return e.stop()}}),e,this)}))},{key:"calculateCritical",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.totalSlack;case 2:return t=e.sent,e.abrupt("return",t<=0);case 4:case"end":return e.stop()}}),e,this)}))},{key:"calculateStartDateInitial",value:regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.$.startDate.proposedValue,e.next=3,this.$.manuallyScheduled;case 3:if(!e.sent){e.next=7;break}return e.delegateYield(tne(ane(t.prototype),"calculateStartDateInitial",this).call(this),"t0",6);case 6:return e.abrupt("return",e.t0);case 7:return e.next=9,this.$.combinedStartDateConstraintIntervals;case 9:return e.next=11,this.$.combinedEndDateConstraintIntervals;case 11:return e.next=13,this.$.earlyStartDateRaw;case 13:if(r=e.sent,this.$.duration.hasConsistentValue()||this.$.duration.hasProposedValue()||!r&&!n){e.next=16;break}return e.abrupt("return",r||n);case 16:if(null!==n){e.next=18;break}return e.abrupt("return",null);case 18:return e.delegateYield(this.validateProposedStartDate(n),"t1",19);case 19:if(e.t2=r,e.t2){e.next=23;break}return e.delegateYield(tne(ane(t.prototype),"calculateStartDateInitial",this).call(this),"t3",22);case 22:e.t2=e.t3;case 23:return e.abrupt("return",e.t2);case 24:case"end":return e.stop()}}),e,this)}))},{key:"calculateEndDateInitial",value:regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.$.endDate.proposedValue,e.next=3,this.$.manuallyScheduled;case 3:if(!e.sent){e.next=7;break}return e.delegateYield(tne(ane(t.prototype),"calculateEndDateInitial",this).call(this),"t0",6);case 6:return e.abrupt("return",e.t0);case 7:return e.next=9,this.$.combinedStartDateConstraintIntervals;case 9:return e.next=11,this.$.combinedEndDateConstraintIntervals;case 11:return e.next=13,this.$.earlyEndDateRaw;case 13:if(r=e.sent,this.$.duration.hasConsistentValue()||this.$.duration.hasProposedValue()||!r&&!n){e.next=16;break}return e.abrupt("return",r||n);case 16:if(null!==n){e.next=18;break}return e.abrupt("return",null);case 18:return e.delegateYield(this.validateProposedEndDate(n),"t1",19);case 19:if(e.t2=r,e.t2){e.next=23;break}return e.delegateYield(tne(ane(t.prototype),"calculateEndDateInitial",this).call(this),"t3",22);case 22:e.t2=e.t3;case 23:return e.abrupt("return",e.t2);case 24:case"end":return e.stop()}}),e,this)}))},{key:"validateIntervalsIntersection",value:regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Zte.new(),r=!0,o=!1,i=void 0,e.prev=4,a=t[Symbol.iterator]();case 6:if(r=(u=a.next()).done){e.next=15;break}if(c=u.value,!(n=n.intersect(c)).isIntervalEmpty()){e.next=12;break}return e.next=12,pne.new({conflictingInterval:c});case 12:r=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),o=!0,i=e.t0;case 21:e.prev=21,e.prev=22,r||null==a.return||a.return();case 24:if(e.prev=24,!o){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",n);case 30:case"end":return e.stop()}}),e,null,[[4,17,21,29],[22,,24,28]])}))},{key:"calculateStartDateIntervalsByEndDateIntervals",value:regeneratorRuntime.mark((function e(t,n){var r,o,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],o=!0,i=!1,a=void 0,e.prev=4,u=t[Symbol.iterator]();case 6:if(o=(c=u.next()).done){e.next=32;break}if(s=c.value,e.t0=r,e.t1=fne,e.t2=s.onRemoveAction,e.t3=s.originDescription,!s.startDateIsFinite()){e.next=17;break}return e.delegateYield(this.calculateProjectedStartDate(s.startDate,n),"t5",14);case 14:e.t4=e.t5,e.next=18;break;case 17:e.t4=null;case 18:if(e.t6=e.t4,!s.endDateIsFinite()){e.next=24;break}return e.delegateYield(this.calculateProjectedStartDate(s.endDate,n),"t8",21);case 21:e.t7=e.t8,e.next=25;break;case 24:e.t7=null;case 25:e.t9=e.t7,e.t10={onRemoveAction:e.t2,originDescription:e.t3,startDate:e.t6,endDate:e.t9},e.t11=e.t1.new.call(e.t1,e.t10),e.t0.push.call(e.t0,e.t11);case 29:o=!0,e.next=6;break;case 32:e.next=38;break;case 34:e.prev=34,e.t12=e.catch(4),i=!0,a=e.t12;case 38:e.prev=38,e.prev=39,o||null==u.return||u.return();case 41:if(e.prev=41,!i){e.next=44;break}throw a;case 44:return e.finish(41);case 45:return e.finish(38);case 46:return e.abrupt("return",r);case 47:case"end":return e.stop()}}),e,this,[[4,34,38,46],[39,,41,45]])}))},{key:"calculateEndDateIntervalsByStartDateIntervals",value:regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=!0,o=!1,i=void 0,e.prev=4,a=t[Symbol.iterator]();case 6:if(r=(u=a.next()).done){e.next=32;break}if(c=u.value,e.t0=n,e.t1=fne,e.t2=c.onRemoveAction,e.t3=c.originDescription,!c.startDateIsFinite()){e.next=17;break}return e.delegateYield(this.calculateProjectedEndDate(c.startDate),"t5",14);case 14:e.t4=e.t5,e.next=18;break;case 17:e.t4=null;case 18:if(e.t6=e.t4,!c.endDateIsFinite()){e.next=24;break}return e.delegateYield(this.calculateProjectedEndDate(c.endDate),"t8",21);case 21:e.t7=e.t8,e.next=25;break;case 24:e.t7=null;case 25:e.t9=e.t7,e.t10={onRemoveAction:e.t2,originDescription:e.t3,startDate:e.t6,endDate:e.t9},e.t11=e.t1.new.call(e.t1,e.t10),e.t0.push.call(e.t0,e.t11);case 29:r=!0,e.next=6;break;case 32:e.next=38;break;case 34:e.prev=34,e.t12=e.catch(4),o=!0,i=e.t12;case 38:e.prev=38,e.prev=39,r||null==a.return||a.return();case 41:if(e.prev=41,!o){e.next=44;break}throw i;case 44:return e.finish(41);case 45:return e.finish(38);case 46:return e.abrupt("return",n);case 47:case"end":return e.stop()}}),e,this,[[4,34,38,46],[39,,41,45]])}))},{key:"canCalculateProjectedXDate",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.shouldRecalculateDuration(),"t0",1);case 1:return e.abrupt("return",!e.t0);case 2:case"end":return e.stop()}}),e,this)}))},{key:"calculateEffectiveDuration",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.shouldRecalculateDuration(),"t0",1);case 1:if(!e.t0){e.next=7;break}return e.delegateYield(this.calculateProjectedDuration(this.$.startDate.hasProposedValue()?this.$.startDate.getProposedValue():this.$.startDate.getConsistentValue(),this.$.endDate.hasProposedValue()?this.$.endDate.getProposedValue():this.$.endDate.getConsistentValue()),"t1",4);case 4:return e.abrupt("return",e.t1);case 7:return e.next=9,this.$.duration;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))},{key:"calculateValidInitialIntervals",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.combinedStartDateConstraintIntervals;case 2:return t=e.sent,e.next=5,this.$.combinedEndDateConstraintIntervals;case 5:return n=e.sent,r=Qte(t),o=Qte(n),e.delegateYield(this.calculateEffectiveDuration(),"t0",9);case 9:if(i=e.t0,e.t1=Zte,!o.startDateIsFinite()){e.next=16;break}return e.delegateYield(this.calculateProjectedStartDate(o.startDate,i),"t3",13);case 13:e.t2=e.t3,e.next=17;break;case 16:e.t2=null;case 17:if(e.t4=e.t2,!o.endDateIsFinite()){e.next=23;break}return e.delegateYield(this.calculateProjectedStartDate(o.endDate,i),"t6",20);case 20:e.t5=e.t6,e.next=24;break;case 23:e.t5=null;case 24:if(e.t7=e.t5,e.t8={startDate:e.t4,endDate:e.t7},a=e.t1.new.call(e.t1,e.t8),!(r=r.intersect(a)).isIntervalEmpty()){e.next=35;break}return e.delegateYield(this.calculateStartDateIntervalsByEndDateIntervals(n,i),"t9",30);case 30:return u=e.t9,c=t.length>1?t.slice(0,t.length-1).concat(u).concat(t[t.length-1]):t.concat(u),e.delegateYield(this.validateIntervalsIntersection(c),"t10",33);case 33:e.next=53;break;case 35:if(e.t11=Zte,!r.startDateIsFinite()){e.next=41;break}return e.delegateYield(this.calculateProjectedEndDate(r.startDate,i),"t13",38);case 38:e.t12=e.t13,e.next=42;break;case 41:e.t12=null;case 42:if(e.t14=e.t12,!r.endDateIsFinite()){e.next=48;break}return e.delegateYield(this.calculateProjectedEndDate(r.endDate,i),"t16",45);case 45:e.t15=e.t16,e.next=49;break;case 48:e.t15=null;case 49:e.t17=e.t15,e.t18={startDate:e.t14,endDate:e.t17},s=e.t11.new.call(e.t11,e.t18),o=o.intersect(s);case 53:return e.abrupt("return",{startDateInterval:r,endDateInterval:o});case 54:case"end":return e.stop()}}),e,this)}))},{key:"calculateStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateCombinedStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.startDateConstraintIntervals;case 2:return t=e.sent,e.t0=t,e.next=7,this.$.earlyStartDateConstraintIntervals;case 7:e.t1=e.sent,t=e.t0.concat.call(e.t0,e.t1),e.next=16;break;case 11:return e.t2=t,e.next=14,this.$.lateStartDateConstraintIntervals;case 14:e.t3=e.sent,t=e.t2.concat.call(e.t2,e.t3);case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateLateStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateCombinedEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.endDateConstraintIntervals;case 2:return t=e.sent,e.t0=t,e.next=7,this.$.earlyEndDateConstraintIntervals;case 7:e.t1=e.sent,t=e.t0.concat.call(e.t0,e.t1),e.next=16;break;case 11:return e.t2=t,e.next=14,this.$.lateEndDateConstraintIntervals;case 14:e.t3=e.sent,t=e.t2.concat.call(e.t2,e.t3);case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateLateEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"putEndDate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.markAsNeedRecalculation(this.$.validInitialIntervals),tne(ane(t.prototype),"putEndDate",this).call(this,e,n)}}]),t}(e);return lne([J6()],t.prototype,"earlyStartDateRaw",void 0),lne([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ",persist:!1},{converter:L8,persistent:!1})],t.prototype,"earlyStartDate",void 0),lne([J6()],t.prototype,"earlyEndDateRaw",void 0),lne([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ",persist:!1},{converter:L8,persistent:!1})],t.prototype,"earlyEndDate",void 0),lne([J6()],t.prototype,"lateStartDateRaw",void 0),lne([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ",persist:!1},{converter:L8,persistent:!1})],t.prototype,"lateStartDate",void 0),lne([J6()],t.prototype,"lateEndDateRaw",void 0),lne([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ",persist:!1},{converter:L8,persistent:!1})],t.prototype,"lateEndDate",void 0),lne([M8({type:"number",persist:!1},{persistent:!1})],t.prototype,"totalSlack",void 0),lne([M8({type:"string",defaultValue:n2.Day,persist:!1},{converter:xt.normalizeUnit,persistent:!1})],t.prototype,"slackUnit",void 0),lne([M8({type:"boolean",defaultValue:!1,persist:!1},{persistent:!1})],t.prototype,"critical",void 0),lne([M8({type:"boolean",defaultValue:!1})],t.prototype,"manuallyScheduled",void 0),lne([J6()],t.prototype,"startDateConstraintIntervals",void 0),lne([J6()],t.prototype,"earlyStartDateConstraintIntervals",void 0),lne([J6()],t.prototype,"lateStartDateConstraintIntervals",void 0),lne([J6()],t.prototype,"combinedStartDateConstraintIntervals",void 0),lne([J6()],t.prototype,"endDateConstraintIntervals",void 0),lne([J6()],t.prototype,"earlyEndDateConstraintIntervals",void 0),lne([J6()],t.prototype,"lateEndDateConstraintIntervals",void 0),lne([J6()],t.prototype,"combinedEndDateConstraintIntervals",void 0),lne([J6()],t.prototype,"validInitialIntervals",void 0),lne([Q6("earlyStartDateRaw")],t.prototype,"calculateEarlyStartDateRaw",null),lne([Q6("earlyStartDate")],t.prototype,"calculateEarlyStartDate",null),lne([Q6("earlyEndDateRaw")],t.prototype,"calculateEarlyEndDateRaw",null),lne([Q6("earlyEndDate")],t.prototype,"calculateEarlyEndDate",null),lne([Q6("lateStartDateRaw")],t.prototype,"calculateLateStartDateRaw",null),lne([Q6("lateStartDate")],t.prototype,"calculateLateStartDate",null),lne([Q6("lateEndDateRaw")],t.prototype,"calculateLateEndDateRaw",null),lne([Q6("lateEndDate")],t.prototype,"calculateLateEndDate",null),lne([Q6("totalSlack")],t.prototype,"calculateTotalSlack",null),lne([Q6("critical")],t.prototype,"calculateCritical",null),lne([Q6("validInitialIntervals")],t.prototype,"calculateValidInitialIntervals",null),lne([Q6("startDateConstraintIntervals")],t.prototype,"calculateStartDateConstraintIntervals",null),lne([Q6("combinedStartDateConstraintIntervals")],t.prototype,"calculateCombinedStartDateConstraintIntervals",null),lne([Q6("earlyStartDateConstraintIntervals")],t.prototype,"calculateEarlyStartDateConstraintIntervals",null),lne([Q6("lateStartDateConstraintIntervals")],t.prototype,"calculateLateStartDateConstraintIntervals",null),lne([Q6("endDateConstraintIntervals")],t.prototype,"calculateEndDateConstraintIntervals",null),lne([Q6("combinedEndDateConstraintIntervals")],t.prototype,"calculateCombinedEndDateConstraintIntervals",null),lne([Q6("earlyEndDateConstraintIntervals")],t.prototype,"calculateEarlyEndDateConstraintIntervals",null),lne([Q6("lateEndDateConstraintIntervals")],t.prototype,"calculateLateEndDateConstraintIntervals",null),t};function gne(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function vne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){gne(i,r,o,a,u,"next",e)}function u(e){gne(i,r,o,a,u,"throw",e)}a(void 0)}))}}function mne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wne(e,t){return!t||"object"!==One(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kne(e){return(kne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sne(e,t){return(Sne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function One(e){return(One="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ene=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":One(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Cne=Symbol("EventMixin"),xne=function(e){var t=function(e){function t(){return mne(this,t),wne(this,kne(t).apply(this,arguments))}var n,r,o,i,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sne(e,t)}(t,e),n=t,(r=[{key:Cne,value:function(){}},{key:"calculateSchedulingMode",value:regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(void 0!==t?t:this.$.schedulingMode.getConsistentValue())||o2.Normal);case 1:case"end":return e.stop()}}),e,this)}))},{key:"maybeSkipNonWorkingTime",value:regeneratorRuntime.mark((function e(t){var n,r,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],r=!0,e.delegateYield(this.shouldRecalculateDuration(),"t0",3);case 3:if(e.t0){e.next=8;break}return e.next=6,this.$.duration;case 6:o=e.sent,r=o>0;case 8:if(!t||!r){e.next=13;break}return e.delegateYield(this.skipNonWorkingTime(t,n),"t2",10);case 10:e.t1=e.t2,e.next=14;break;case 13:e.t1=t;case 14:return e.abrupt("return",e.t1);case 15:case"end":return e.stop()}}),e,this)}))},{key:"skipNonWorkingTime",value:regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>1&&void 0!==o[1])||o[1],e.next=3,this.$.calendar;case 3:return r=e.sent,e.abrupt("return",r.skipNonWorkingTime(t,n));case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateDurationBetweenDates",value:regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.calendar;case 2:return o=e.sent,e.abrupt("return",o.calculateDuration(t,n,r));case 4:case"end":return e.stop()}}),e,this)}))},{key:"convertDuration",value:function(e,t,n){return this.getProject().calendar.convertDuration(e,t,n)}},{key:"$convertDuration",value:regeneratorRuntime.mark((function e(t,n,r){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.getProject(),e.next=3,o.$.calendar;case 3:return i=e.sent,e.abrupt("return",i.convertDuration(t,n,r));case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateStartDateInitial",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=this.$.startDate.proposedValue)){e.next=3;break}return e.abrupt("return",t);case 3:return e.delegateYield(this.shouldRecalculateStartDate(),"t0",4);case 4:if(!e.t0){e.next=14;break}return e.t1=this,e.next=9,this.$.endDate;case 9:return e.t2=e.sent,e.delegateYield(e.t1.calculateProjectedStartDate.call(e.t1,e.t2),"t3",11);case 11:return e.abrupt("return",e.t3);case 14:return e.abrupt("return",this.$.startDate.getConsistentValue());case 15:case"end":return e.stop()}}),e,this)}))},{key:"canRecalculateStartDate",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.$.endDate.hasProposedValue()||this.$.endDate.hasConsistentValue())&&(this.$.duration.hasProposedValue()||this.$.duration.hasConsistentValue()));case 1:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateStartDate",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.$.startDate.value||this.$.endDate.proposedArgs&&!0===this.$.endDate.proposedArgs[1]||this.$.duration.proposedArgs&&!1===this.$.duration.proposedArgs[1],!e.t0){e.next=4;break}return e.delegateYield(this.canRecalculateStartDate(),"t1",3);case 3:e.t0=e.t1;case 4:return e.abrupt("return",e.t0);case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateStartDate",value:regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.startDateInitial;case 2:return n=e.sent,e.delegateYield(this.maybeSkipNonWorkingTime(n),"t0",4);case 4:return e.abrupt("return",e.t0);case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateProjectedStartDate",value:regeneratorRuntime.mark((function e(t,n){var r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.calendar;case 2:if(r=e.sent,void 0===n){e.next=7;break}e.t0=n,e.next=10;break;case 7:return e.next=9,this.$.duration;case 9:e.t0=e.sent;case 10:return o=e.t0,e.next=13,this.$.durationUnit;case 13:return i=e.sent,e.delegateYield(this.$convertDuration(o,i,n2.Millisecond),"t1",15);case 15:return a=e.t1,e.abrupt("return",r.calculateStartDate(t,a,n2.Millisecond));case 17:case"end":return e.stop()}}),e,this)}))},{key:"calculateEndDateInitial",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=this.$.endDate.proposedValue)){e.next=3;break}return e.abrupt("return",t);case 3:return e.delegateYield(this.shouldRecalculateEndDate(),"t0",4);case 4:if(!e.t0){e.next=14;break}return e.t1=this,e.next=9,this.$.startDate;case 9:return e.t2=e.sent,e.delegateYield(e.t1.calculateProjectedEndDate.call(e.t1,e.t2),"t3",11);case 11:return e.abrupt("return",e.t3);case 14:return e.abrupt("return",this.$.endDate.getConsistentValue());case 15:case"end":return e.stop()}}),e,this)}))},{key:"canRecalculateEndDate",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$.startDate.hasProposedValue()||this.$.startDate.hasConsistentValue(),!e.t0){e.next=7;break}if(e.t1=this.$.duration.hasProposedValue()||this.$.duration.hasConsistentValue(),e.t1){e.next=6;break}return e.delegateYield(this.canRecalculateDuration(),"t2",5);case 5:e.t1=e.t2;case 6:e.t0=e.t1;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateEndDate",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.$.endDate.hasConsistentValue()||this.$.startDate.hasProposedValue()&&!0===this.$.startDate.proposedArgs[1]||this.$.duration.hasProposedValue()&&!0===this.$.duration.proposedArgs[1]||!this.$.startDate.hasProposedValue()&&!this.$.endDate.hasProposedValue()&&!this.$.duration.hasProposedValue()&&this.$.startDate.hasConsistentValue()&&this.$.endDate.hasConsistentValue()&&this.$.duration.hasConsistentValue(),!e.t0){e.next=4;break}return e.delegateYield(this.canRecalculateEndDate(),"t1",3);case 3:e.t0=e.t1;case 4:return e.abrupt("return",e.t0);case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateEndDate",value:regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.endDateInitial;case 2:return n=e.sent,e.delegateYield(this.maybeSkipNonWorkingTime(n,!1),"t0",4);case 4:if(r=e.t0,!this.$.startDateInitial.hasNextStableValue()){e.next=10;break}return e.next=8,this.$.startDateInitial;case 8:o=e.sent,r instanceof Date&&r<o&&(r=o);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)}))},{key:"calculateProjectedEndDate",value:regeneratorRuntime.mark((function e(t,n){var r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.calendar;case 2:if(r=e.sent,void 0===n){e.next=7;break}e.t0=n,e.next=10;break;case 7:return e.next=9,this.$.duration;case 9:e.t0=e.sent;case 10:return o=e.t0,e.next=13,this.$.durationUnit;case 13:return i=e.sent,e.delegateYield(this.$convertDuration(o,i,n2.Millisecond),"t1",15);case 15:return a=e.t1,e.abrupt("return",r.calculateEndDate(t,a,n2.Millisecond));case 17:case"end":return e.stop()}}),e,this)}))},{key:"calculateDuration",value:regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=2;break}return e.abrupt("return",t);case 2:return e.delegateYield(this.shouldRecalculateDuration(),"t0",3);case 3:if(!e.t0){e.next=9;break}return e.delegateYield(this.doCalculateDuration(),"t1",6);case 6:return e.abrupt("return",e.t1);case 9:return e.abrupt("return",this.$.duration.getConsistentValue());case 10:case"end":return e.stop()}}),e,this)}))},{key:"doCalculateDuration",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.startDate;case 2:return t=e.sent,e.next=5,this.$.endDate;case 5:return n=e.sent,e.delegateYield(this.calculateProjectedDuration(t,n),"t0",7);case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)}))},{key:"calculateProjectedDuration",value:regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n&&!(t>n)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.$.calendar;case 4:return r=e.sent,e.next=7,this.$.durationUnit;case 7:return o=e.sent,e.delegateYield(this.$convertDuration(r.calculateDuration(t,n,n2.Millisecond),n2.Millisecond,o),"t0",9);case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this)}))},{key:"canRecalculateDuration",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.$.startDate.hasProposedValue()||this.$.startDate.hasConsistentValue())&&(this.$.endDate.hasProposedValue()||this.$.endDate.hasConsistentValue()));case 1:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateDuration",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.$.duration.hasNextStableValue()&&(!this.$.duration.hasConsistentValue()&&(!this.$.startDate.getProposedValue()||!this.$.endDate.getProposedValue()||null==this.$.duration.getProposedValue()||this.$.startDate.hasConsistentValue()||this.$.endDate.hasConsistentValue())||this.$.startDate.proposedArgs&&!1===this.$.startDate.proposedArgs[1]||this.$.endDate.proposedArgs&&!1===this.$.endDate.proposedArgs[1]),!e.t0){e.next=4;break}return e.delegateYield(this.canRecalculateDuration(),"t1",3);case 3:e.t0=e.t1;case 4:return e.abrupt("return",e.t0);case 5:case"end":return e.stop()}}),e,this)}))},{key:"getStartDate",value:function(){return this.startDate}},{key:"setStartDate",value:(u=vne(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(r.length>1&&void 0!==r[1])||r[1],n=null!==t&&n,this.$.startDate.put(t,n),this.markAsNeedRecalculation(this.$.startDateInitial),this.markAsNeedRecalculation(n?this.$.endDateInitial:this.$.duration),e.abrupt("return",this.propagate());case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"getEndDate",value:function(){return this.endDate}},{key:"putEndDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=null!==e&&t;var n=this.getStartDate();!t&&e&&n&&n.getTime()===e.getTime()?this.putDuration(0):(t||!e||!n||n<=e)&&(this.$.endDate.put(e,t),this.markAsNeedRecalculation(this.$.endDateInitial),this.markAsNeedRecalculation(t?this.$.startDateInitial:this.$.duration))}},{key:"setEndDate",value:(a=vne(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],this.putEndDate(t,n),e.abrupt("return",this.propagate());case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getDuration",value:function(e){var t=this.duration;return e&&(t=this.convertDuration(t,this.durationUnit,e)),t}},{key:"putDuration",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!this.$.startDate.hasProposedValue()&&!this.$.startDate.hasConsistentValue();n=!r&&n,null!=t&&t!==this.durationUnit&&this.$.durationUnit.put(t),this.$.duration.put(e,n),this.markAsNeedRecalculation(n?this.$.endDateInitial:this.$.startDateInitial)}},{key:"setDuration",value:(i=vne(regeneratorRuntime.mark((function e(t,n){var r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(o.length>2&&void 0!==o[2])||o[2],this.putDuration(t,n,r),e.abrupt("return",this.propagate());case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getDurationUnit",value:function(){return this.durationUnit}},{key:"setDurationUnit",value:function(e){throw new Error("Use `setDuration` instead")}},{key:"toString",value:function(){return"Event ".concat(this.id)}}])&&bne(n.prototype,r),o&&bne(n,o),t}(e);return Ene([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ",persist:!1},{converter:L8,persistent:!1})],t.prototype,"startDateInitial",void 0),Ene([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ"},{converter:L8})],t.prototype,"startDate",void 0),Ene([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ",persist:!1},{converter:L8,persistent:!1})],t.prototype,"endDateInitial",void 0),Ene([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ"},{converter:L8})],t.prototype,"endDate",void 0),Ene([M8({type:"number",allowNull:!0})],t.prototype,"duration",void 0),Ene([M8({type:"string",defaultValue:n2.Day},{converter:xt.normalizeUnit})],t.prototype,"durationUnit",void 0),Ene([M8({type:"string",defaultValue:o2.Normal})],t.prototype,"schedulingMode",void 0),Ene([Q6("schedulingMode")],t.prototype,"calculateSchedulingMode",null),Ene([Q6("startDateInitial")],t.prototype,"calculateStartDateInitial",null),Ene([Q6("startDate")],t.prototype,"calculateStartDate",null),Ene([Q6("endDateInitial")],t.prototype,"calculateEndDateInitial",null),Ene([Q6("endDate")],t.prototype,"calculateEndDate",null),Ene([Q6("duration")],t.prototype,"calculateDuration",null),t};function _ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function jne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Dne=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.intervalGroups=[],t&&Object.assign(this,t)}var t,n,r;return t=e,(n=[{key:"combineWith",value:function(t){var n=this.intervalGroups.slice();return n.push([t.calendar,t]),new e({intervalGroups:n})}},{key:"getIsWorkingForEvery",value:function(){if(null!=this.isWorkingForEvery)return this.isWorkingForEvery;var e=!0,t=!1,n=void 0;try{for(var r,o=this.getGroups()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=_ne(r.value,2);if(i[0],!i[1][0].isWorking)return this.isWorkingForEvery=!1}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return this.isWorkingForEvery=!0}},{key:"getIsWorkingForSome",value:function(){if(null!=this.isWorkingForSome)return this.isWorkingForSome;var e=!0,t=!1,n=void 0;try{for(var r,o=this.getGroups()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=_ne(r.value,2);if(i[0],i[1][0].isWorking)return this.isWorkingForSome=!0}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return this.isWorkingForSome=!1}},{key:"getCalendars",value:function(){return this.getGroups(),this.calendars}},{key:"isCalendarWorking",value:function(e){return this.getCalendarsWorkStatus().get(e)}},{key:"getCalendarsWorkStatus",value:function(){if(this.calendarsWorkStatus)return this.calendarsWorkStatus;var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,i=this.getGroups()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=_ne(o.value,2),u=a[0],c=a[1];e.set(u,c[0].isWorking)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return this.calendarsWorkStatus=e}},{key:"getCalendarsWorking",value:function(){if(this.calendarsWorking)return this.calendarsWorking;var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=this.getGroups()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=_ne(o.value,2),u=a[0];a[1][0].isWorking&&e.push(u)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return this.calendarsWorking=e}},{key:"getCalendarsNonWorking",value:function(){if(this.calendarsNonWorking)return this.calendarsNonWorking;var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=this.getGroups()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=_ne(o.value,2),u=a[0];a[1][0].isWorking||e.push(u)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return this.calendarsNonWorking=e}},{key:"getGroups",value:function(){if(this.intervalsByCalendar)return this.intervalsByCalendar;var e=this.calendars=[],t=new Map;return this.intervalGroups.forEach((function(n){var r=_ne(n,2),o=r[0],i=r[1],a=t.get(o);a||(e.push(o),a=[],t.set(o,a)),a.push.apply(a,i.intervals)})),t.forEach((function(e,n){var r=v9(e);r.sort((function(e,t){return t.getPriorityField()-e.getPriorityField()})),t.set(n,r)})),this.intervalsByCalendar=t}}])&&jne(t.prototype,n),r&&jne(t,r),e}();function Rne(e){return(Rne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tne(e,t){return!t||"object"!==Rne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ane(e){return(Ane=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mne(e,t){return(Mne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ine=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Tne(this,Ane(t).call(this,e))).calendarCaches=v9(n.calendarCaches),n.intervalCache=new x9({emptyInterval:new Dne,combineIntervalsFn:function(e,t){return e.combineWith(t)}}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mne(e,t)}(t,e),n=t,(r=[{key:"fillCache",value:function(e,t){var n=this;this.calendarCaches.forEach((function(r){r.fillCache(e,t),n.includeWrappingRangeFrom(r,e,t)}))}}])&&Pne(n.prototype,r),o&&Pne(n,o),t}(g9),Fne=new Map,Lne=function(e){var t=v9(e);if(0===t.length)throw new Error("No calendars to combine");t.sort((function(e,t){return e.internalId<t.internalId?-1:1}));var n,r=t.map((function(e){return e.internalId+"/"})).join(""),o=t.map((function(e){return e.version+"/"})).join(""),i=Fne.get(r);return i&&i.versionsHash===o?n=i.cache:(n=new Ine({calendarCaches:t.map((function(e){return e.calendarCache}))}),Fne.set(r,{versionsHash:o,cache:n})),n};function Nne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Hne(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Bne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Hne(i,r,o,a,u,"next",e)}function u(e){Hne(i,r,o,a,u,"throw",e)}a(void 0)}))}}function zne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Vne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $ne(e,t){return!t||"object"!==qne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yne(e,t,n){return(Yne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gne(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Gne(e){return(Gne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Une(e,t){return(Une=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qne(e){return(qne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Xne=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":qne(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Kne=Symbol("HasAssignments"),Zne=function(e){var t=function(e){function t(){var e;return Vne(this,t),(e=$ne(this,Gne(t).apply(this,arguments))).assignmentsByCalendar=new Map,e}var n,r,o,i,a,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Une(e,t)}(t,e),n=t,(r=[{key:Kne,value:function(){}},{key:"hasFirstAssignment",value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.assigned;case 2:return t=e.sent,n=t.size>0,r=this.$.assigned.value.size>0,e.abrupt("return",n&&!r);case 6:case"end":return e.stop()}}),e,this)}))},{key:"calculateEffortDriven",value:regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:if(e.sent!=o2.Normal){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",void 0!==t?t:this.$.effortDriven.getConsistentValue());case 6:case"end":return e.stop()}}),e,this)}))},{key:"calculateTotalUnits",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,this.$.assigned;case 3:n=e.sent,r=!0,o=!1,i=void 0,e.prev=7,a=n[Symbol.iterator]();case 9:if(r=(u=a.next()).done){e.next=18;break}return c=u.value,e.t0=t,e.next=14,c.$.units;case 14:t=e.t0+=e.sent;case 15:r=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(7),o=!0,i=e.t1;case 24:e.prev=24,e.prev=25,r||null==a.return||a.return();case 27:if(e.prev=27,!o){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",t);case 33:case"end":return e.stop()}}),e,this,[[7,20,24,32],[25,,27,31]])}))},{key:"calculateEffortByAssignments",value:regeneratorRuntime.mark((function e(t,n){var r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m,b,w,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.assignmentsByCalendar;case 2:return r=e.sent,e.next=5,this.$.schedulingMode;case 5:if(e.sent!==o2.Normal&&0!==r.size){e.next=9;break}return e.delegateYield(this.calculateProjectedDuration(t,n),"t0",8);case 8:return e.abrupt("return",e.t0);case 9:o=0,i=new Map,a=!0,u=!1,c=void 0,e.prev=14,s=r[Symbol.iterator]();case 16:if(a=(l=s.next()).done){e.next=51;break}f=zne(l.value,2),d=f[0],p=f[1],h=0,y=!0,g=!1,v=void 0,e.prev=22,m=p[Symbol.iterator]();case 24:if(y=(b=m.next()).done){e.next=33;break}return w=b.value,e.t1=h,e.next=29,w.$.units;case 29:h=e.t1+=e.sent;case 30:y=!0,e.next=24;break;case 33:e.next=39;break;case 35:e.prev=35,e.t2=e.catch(22),g=!0,v=e.t2;case 39:e.prev=39,e.prev=40,y||null==m.return||m.return();case 42:if(e.prev=42,!g){e.next=45;break}throw v;case 45:return e.finish(42);case 46:return e.finish(39);case 47:i.set(d,h);case 48:a=!0,e.next=16;break;case 51:e.next=57;break;case 53:e.prev=53,e.t3=e.catch(14),u=!0,c=e.t3;case 57:e.prev=57,e.prev=58,a||null==s.return||s.return();case 60:if(e.prev=60,!u){e.next=63;break}throw c;case 63:return e.finish(60);case 64:return e.finish(57);case 65:return e.t4=Object,e.delegateYield(this.getBaseOptionsForEffortCalculations(),"t5",67);case 67:return e.t6=e.t5,e.t7={startDate:t,endDate:n},k=e.t4.assign.call(e.t4,e.t6,e.t7),e.delegateYield(this.forEachAvailabilityInterval(k,(function(e,t,n){var r=n.getCalendarsWorking(),a=e.getTime(),u=t.getTime()-a,c=0,s=!0,l=!1,f=void 0;try{for(var d,p=r[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var h=d.value;c+=i.get(h)||0}}catch(e){l=!0,f=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw f}}o+=c*u*.01})),"t8",71);case 71:return e.t9=this,e.t10=o,e.t11=n2.Millisecond,e.next=76,this.$.effortUnit;case 76:return e.t12=e.sent,e.delegateYield(e.t9.$convertDuration.call(e.t9,e.t10,e.t11,e.t12),"t13",78);case 78:return e.abrupt("return",e.t13);case 79:case"end":return e.stop()}}),e,this,[[14,53,57,65],[22,35,39,47],[40,,42,46],[58,,60,64]])}))},{key:"calculateUnitsByDurationAndEffort",value:regeneratorRuntime.mark((function e(t,n){var r,o,i,a,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.effort;case 2:return r=e.sent,e.next=5,this.$.effortUnit;case 5:return o=e.sent,e.delegateYield(this.$convertDuration(r,o,n2.Millisecond),"t0",7);case 7:return i=e.t0,a=0,e.t1=Object,e.delegateYield(this.getBaseOptionsForEffortCalculations(),"t2",11);case 11:return e.t3=e.t2,e.next=14,this.$.startDate;case 14:return e.t4=e.sent,e.next=17,this.$.endDate;case 17:return e.t5=e.sent,e.t6={startDate:e.t4,endDate:e.t5},u=e.t1.assign.call(e.t1,e.t3,e.t6),e.next=22,this.$.assignmentsByCalendar;case 22:return c=e.sent,e.delegateYield(this.forEachAvailabilityInterval(u,(function(e,t,n){var r=n.getCalendarsWorking(),o=e.getTime(),i=t.getTime()-o,u=!0,s=!1,l=void 0;try{for(var f,d=r[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value;a+=(c.has(p)?c.get(p).length:0)*i}}catch(e){s=!0,l=e}finally{try{u||null==d.return||d.return()}finally{if(s)throw l}}})),"t7",24);case 24:return e.abrupt("return",a?100*i/a:100);case 25:case"end":return e.stop()}}),e,this)}))},{key:"getEffort",value:function(e){var t=this.effort;return void 0!==e?this.calendar.convertDuration(t,this.effortUnit,e):t}},{key:"setEffort",value:(c=Bne(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=n&&n!==this.effortUnit&&this.$.effortUnit.put(n),this.$.effort.put(t),e.abrupt("return",this.propagate());case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"getEffortUnit",value:function(){return this.effortUnit}},{key:"setEffortUnit",value:function(e){throw new Error("Use `setEffort` instead")}},{key:"setAssignmentUnits",value:(u=Bne(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$.units.put(n),e.abrupt("return",t.propagate());case 2:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"calculateAssignmentUnits",value:regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n){e.next=2;break}return e.abrupt("return",n);case 2:return e.delegateYield(this.shouldRecalculateAssignmentUnits(t),"t0",3);case 3:if(!e.t0){e.next=9;break}return e.delegateYield(this.calculateUnitsByDurationAndEffort(t,n),"t1",6);case 6:return e.abrupt("return",e.t1);case 9:return e.abrupt("return",t.$.units.value);case 10:case"end":return e.stop()}}),e,this)}))},{key:"calculateValidInitialIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.assignmentsByCalendar;case 2:return n=e.sent,e.next=5,this.$.schedulingMode;case 5:if(!(e.sent!==o2.Normal||n.size>0)){e.next=19;break}return e.next=9,this.$.combinedStartDateConstraintIntervals;case 9:return r=e.sent,e.next=12,this.$.combinedEndDateConstraintIntervals;case 12:return o=e.sent,i=Qte(r),a=Qte(o),e.delegateYield(this.canCalculateProjectedXDate(),"t0",16);case 16:if(e.t0||i.isIntervalEmpty()||a.isIntervalEmpty()){e.next=19;break}return e.abrupt("return",{startDateInterval:i,endDateInterval:a});case 19:return e.delegateYield(Yne(Gne(t.prototype),"calculateValidInitialIntervals",this).call(this),"t1",20);case 20:return e.abrupt("return",e.t1);case 21:case"end":return e.stop()}}),e,this)}))},{key:"calculateEffort",value:regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(!e.sent.size){e.next=8;break}return e.delegateYield(this.calculateTotalEffort(),"t0",5);case 5:return e.abrupt("return",e.t0);case 8:if(void 0===t){e.next=10;break}return e.abrupt("return",t);case 10:return e.delegateYield(this.shouldRecalculateEffort(),"t1",11);case 11:if(!e.t1){e.next=26;break}return e.next=15,this.$.startDate;case 15:if(!(n=e.sent)){e.next=23;break}return e.delegateYield(this.calculateProjectedEndDate(n),"t2",18);case 18:return r=e.t2,e.delegateYield(this.calculateEffortByAssignments(n,r),"t3",20);case 20:return e.abrupt("return",e.t3);case 23:return e.abrupt("return",null);case 24:e.next=27;break;case 26:return e.abrupt("return",this.$.effort.value);case 27:case"end":return e.stop()}}),e,this)}))},{key:"canRecalculateDuration",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:if(e.sent!==o2.Normal){e.next=8;break}return e.delegateYield(Yne(Gne(t.prototype),"canRecalculateDuration",this).call(this),"t0",5);case 5:return e.abrupt("return",e.t0);case 8:return e.abrupt("return",this.$.effort.hasProposedValue()||this.$.effort.hasConsistentValue());case 9:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateEffort",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(!(e.sent.size>0)){e.next=7;break}return e.abrupt("return",!0);case 7:if(e.t0=!this.$.effort.hasConsistentValue(),!e.t0){e.next=11;break}return e.delegateYield(this.canRecalculateEffort(),"t1",10);case 10:e.t0=e.t1;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)}))},{key:"canRecalculateEffort",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:return t=e.sent,n=!0,n=!!t.size||this.$.duration.hasValue(),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateAssignmentUnits",value:regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateTotalEffort",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:t=e.sent,n=0,r=!0,o=!1,i=void 0,e.prev=7,a=t[Symbol.iterator]();case 9:if(r=(u=a.next()).done){e.next=18;break}return c=u.value,e.t0=n,e.next=14,c.$.effort;case 14:n=e.t0+=e.sent;case 15:r=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(7),o=!0,i=e.t1;case 24:e.prev=24,e.prev=25,r||null==a.return||a.return();case 27:if(e.prev=27,!o){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",n);case 33:case"end":return e.stop()}}),e,this,[[7,20,24,32],[25,,27,31]])}))},{key:"forEachAvailabilityInterval",value:regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.calendar;case 2:return r=e.sent,e.next=5,this.$.assignmentsByCalendar;case 5:return o=e.sent,e.next=8,this.$.effectiveCalendarsCombination;case 8:e.sent.forEachAvailabilityInterval(t,(function(e,i,a){var u=a.getCalendarsWorkStatus(),c=a.getCalendarsWorking();if(u.get(r)&&(t.ignoreResourceCalendars||c.some((function(e){return o.has(e)}))))return n(e,i,a)}));case 10:case"end":return e.stop()}}),e,this)}))},{key:"getBaseOptionsForEffortCalculations",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ignoreResourceCalendars:!1});case 1:case"end":return e.stop()}}),e)}))},{key:"getBaseOptionsForDurationCalculations",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{ignoreResourceCalendars:!1});case 1:case"end":return e.stop()}}),e)}))},{key:"skipNonWorkingTime",value:regeneratorRuntime.mark((function e(n){var r,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.$.assignmentsByCalendar;case 3:if(!(e.sent.size>0)){e.next=14;break}return e.t0=Object,e.delegateYield(this.getBaseOptionsForDurationCalculations(),"t1",7);case 7:return e.t2=e.t1,e.t3=r?{startDate:n,isForward:r}:{endDate:n,isForward:r},o=e.t0.assign.call(e.t0,e.t2,e.t3),e.delegateYield(this.forEachAvailabilityInterval(o,(function(e,t,n){return i=r?e:t,!1})),"t4",11);case 11:return e.abrupt("return",new Date(i));case 14:return e.delegateYield(Yne(Gne(t.prototype),"skipNonWorkingTime",this).call(this,n,r),"t5",15);case 15:return e.abrupt("return",e.t5);case 16:case"end":return e.stop()}}),e,this)}))},{key:"calculateDurationBetweenDates",value:regeneratorRuntime.mark((function e(n,r,o){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.assignmentsByCalendar;case 2:if(!(e.sent.size>0)){e.next=15;break}return e.t0=Object,e.delegateYield(this.getBaseOptionsForDurationCalculations(),"t1",6);case 6:return e.t2=e.t1,e.t3={startDate:n,endDate:r,isForward:!0},i=e.t0.assign.call(e.t0,e.t2,e.t3),a=0,e.delegateYield(this.forEachAvailabilityInterval(i,(function(e,t){a+=t.getTime()-e.getTime()})),"t4",11);case 11:return e.delegateYield(this.$convertDuration(a,n2.Millisecond,o),"t5",12);case 12:return e.abrupt("return",e.t5);case 15:return e.delegateYield(Yne(Gne(t.prototype),"calculateDurationBetweenDates",this).call(this,n,r,o),"t6",16);case 16:return e.abrupt("return",e.t6);case 17:case"end":return e.stop()}}),e,this)}))},{key:"calculateEffectiveCalendarsCombination",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.assignmentsByCalendar;case 2:return t=e.sent,e.t0=[],e.t1=Nne(t.keys()),e.next=7,this.$.calendar;case 7:return e.t2=e.sent,e.t3=[e.t2],n=e.t0.concat.call(e.t0,e.t1,e.t3),e.abrupt("return",Lne(n));case 11:case"end":return e.stop()}}),e,this)}))},{key:"calculateAssignmentsByCalendar",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.assigned;case 2:t=e.sent,n=new Map,r=!0,o=!1,i=void 0,e.prev=7,a=t[Symbol.iterator]();case 9:if(r=(u=a.next()).done){e.next=24;break}return c=u.value,e.next=13,c.$.resource;case 13:if(!(s=e.sent)){e.next=21;break}return e.next=17,s.$.calendar;case 17:l=e.sent,(f=n.get(l))||(f=[],n.set(l,f)),f.push(c);case 21:r=!0,e.next=9;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(7),o=!0,i=e.t0;case 30:e.prev=30,e.prev=31,r||null==a.return||a.return();case 33:if(e.prev=33,!o){e.next=36;break}throw i;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return e.abrupt("return",n);case 39:case"end":return e.stop()}}),e,this,[[7,26,30,38],[31,,33,37]])}))},{key:"calculateProjectedXDateByDuration",value:regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(f.length>1&&void 0!==f[1])||f[1],void 0===(r=f.length>2?f[2]:void 0)){e.next=6;break}e.t0=r,e.next=9;break;case 6:return e.next=8,this.$.duration;case 8:e.t0=e.sent;case 9:if(null!=(o=e.t0)&&!isNaN(o)){e.next=12;break}return e.abrupt("return",null);case 12:if(0!=o){e.next=14;break}return e.abrupt("return",t);case 14:return e.next=16,this.$.durationUnit;case 16:return i=e.sent,e.delegateYield(this.$convertDuration(o,i,n2.Millisecond),"t1",18);case 18:return a=e.t1,u=t.getTime(),c=a,e.next=23,this.$.calendar;case 23:return s=e.sent,e.next=26,this.$.assignmentsByCalendar;case 26:if(!(e.sent.size>0)){e.next=37;break}return e.t2=Object,e.delegateYield(this.getBaseOptionsForDurationCalculations(),"t3",30);case 30:return e.t4=e.t3,e.t5=n?{startDate:t,isForward:n}:{endDate:t,isForward:n},l=e.t2.assign.call(e.t2,e.t4,e.t5),e.delegateYield(this.forEachAvailabilityInterval(l,(function(e,t,r){var o=e.getTime(),i=t.getTime(),a=i-o;if(a>=c)return u=n?o+c:i-c,!1;var s=e.getTimezoneOffset()-t.getTimezoneOffset();c-=a+60*s*1e3})),"t6",34);case 34:return e.abrupt("return",new Date(u));case 37:return e.abrupt("return",s.accumulateWorkingTime(t,a,n2.Millisecond,n).finalDate);case 38:case"end":return e.stop()}}),e,this)}))},{key:"calculateProjectedXDateByEffort",value:regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m,b,w,k,S,O,E,C,x,_=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(_.length>1&&void 0!==_[1])||_[1],e.next=3,this.$.effort;case 3:return r=e.sent,e.next=6,this.$.effortUnit;case 6:return o=e.sent,e.delegateYield(this.$convertDuration(r,o,n2.Millisecond),"t0",8);case 8:return i=e.t0,a=t.getTime(),u=i,e.next=13,this.$.calendar;case 13:return c=e.sent,e.next=16,this.$.assignmentsByCalendar;case 16:s=e.sent,l=new Map,f=!0,d=!1,p=void 0,e.prev=21,h=s[Symbol.iterator]();case 23:if(f=(y=h.next()).done){e.next=58;break}g=zne(y.value,2),v=g[0],m=g[1],b=0,w=!0,k=!1,S=void 0,e.prev=29,O=m[Symbol.iterator]();case 31:if(w=(E=O.next()).done){e.next=40;break}return C=E.value,e.t1=b,e.next=36,C.$.units;case 36:b=e.t1+=e.sent;case 37:w=!0,e.next=31;break;case 40:e.next=46;break;case 42:e.prev=42,e.t2=e.catch(29),k=!0,S=e.t2;case 46:e.prev=46,e.prev=47,w||null==O.return||O.return();case 49:if(e.prev=49,!k){e.next=52;break}throw S;case 52:return e.finish(49);case 53:return e.finish(46);case 54:l.set(v,b);case 55:f=!0,e.next=23;break;case 58:e.next=64;break;case 60:e.prev=60,e.t3=e.catch(21),d=!0,p=e.t3;case 64:e.prev=64,e.prev=65,f||null==h.return||h.return();case 67:if(e.prev=67,!d){e.next=70;break}throw p;case 70:return e.finish(67);case 71:return e.finish(64);case 72:if(!(s.size>0)){e.next=82;break}return e.t4=Object,e.delegateYield(this.getBaseOptionsForDurationCalculations(),"t5",75);case 75:return e.t6=e.t5,e.t7=n?{startDate:t,isForward:n}:{endDate:t,isForward:n},x=e.t4.assign.call(e.t4,e.t6,e.t7),e.delegateYield(this.forEachAvailabilityInterval(x,(function(e,t,r){var o=r.getCalendarsWorking(),i=e.getTime(),c=t.getTime(),s=c-i,f=0,d=!0,p=!1,h=void 0;try{for(var y,g=o[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var v=y.value;f+=l.get(v)||0}}catch(e){p=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}var m=f*s*.01;if(m>=u)return a=n?i+u/(.01*f):c-u/(.01*f),!1;u-=m})),"t8",79);case 79:return e.abrupt("return",new Date(a));case 82:return e.abrupt("return",c.accumulateWorkingTime(t,i,n2.Millisecond,n).finalDate);case 83:case"end":return e.stop()}}),e,this,[[21,60,64,72],[29,42,46,54],[47,,49,53],[65,,67,71]])}))},{key:"doCalculateDuration",value:regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.assignmentsByCalendar;case 2:return n=e.sent,e.next=5,this.$.schedulingMode;case 5:return r=e.sent,e.next=8,this.$.childEvents;case 8:if(0!==e.sent.size||r!==o2.Normal&&0!==n.size||this.$.duration.hasValue()||!this.$.effort.hasValue()){e.next=24;break}return e.t0=this,e.next=13,this.$.effort;case 13:return e.t1=e.sent,e.next=16,this.$.effortUnit;case 16:return e.t2=e.sent,e.next=19,this.$.durationUnit;case 19:return e.t3=e.sent,e.delegateYield(e.t0.$convertDuration.call(e.t0,e.t1,e.t2,e.t3),"t4",21);case 21:return e.abrupt("return",e.t4);case 24:return e.delegateYield(Yne(Gne(t.prototype),"doCalculateDuration",this).call(this),"t5",25);case 25:return e.abrupt("return",e.t5);case 26:case"end":return e.stop()}}),e,this)}))},{key:"calculateProjectedDuration",value:regeneratorRuntime.mark((function e(n,r){var o,i,a,u,c,s,l,f,d,p,h,y,g,v,m,b,w,k,S,O,E,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.assignmentsByCalendar;case 2:return o=e.sent,e.next=5,this.$.schedulingMode;case 5:if(e.sent!==o2.Normal&&0!==o.size){e.next=9;break}return e.delegateYield(Yne(Gne(t.prototype),"calculateProjectedDuration",this).call(this,n,r),"t0",8);case 8:return e.abrupt("return",e.t0);case 9:return e.next=11,this.$.effort;case 11:return i=e.sent,e.next=14,this.$.effortUnit;case 14:return a=e.sent,e.delegateYield(this.$convertDuration(i,a,n2.Millisecond),"t1",16);case 16:u=e.t1,c=0,s=u,l=new Map,f=!0,d=!1,p=void 0,e.prev=23,h=o[Symbol.iterator]();case 25:if(f=(y=h.next()).done){e.next=60;break}g=zne(y.value,2),v=g[0],m=g[1],b=0,w=!0,k=!1,S=void 0,e.prev=31,O=m[Symbol.iterator]();case 33:if(w=(E=O.next()).done){e.next=42;break}return C=E.value,e.t2=b,e.next=38,C.$.units;case 38:b=e.t2+=e.sent;case 39:w=!0,e.next=33;break;case 42:e.next=48;break;case 44:e.prev=44,e.t3=e.catch(31),k=!0,S=e.t3;case 48:e.prev=48,e.prev=49,w||null==O.return||O.return();case 51:if(e.prev=51,!k){e.next=54;break}throw S;case 54:return e.finish(51);case 55:return e.finish(48);case 56:l.set(v,b);case 57:f=!0,e.next=25;break;case 60:e.next=66;break;case 62:e.prev=62,e.t4=e.catch(23),d=!0,p=e.t4;case 66:e.prev=66,e.prev=67,f||null==h.return||h.return();case 69:if(e.prev=69,!d){e.next=72;break}throw p;case 72:return e.finish(69);case 73:return e.finish(66);case 74:return e.t5=Object,e.delegateYield(this.getBaseOptionsForDurationCalculations(),"t6",76);case 76:return e.t7=e.t6,e.t8={startDate:n,endDate:r},e.t5.assign.call(e.t5,e.t7,e.t8),e.delegateYield(this.forEachAvailabilityInterval({startDate:n,endDate:r},(function(e,t,n){var r=n.getCalendarsWorking(),o=e.getTime(),i=t.getTime()-o,a=0,u=!0,f=!1,d=void 0;try{for(var p,h=r[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var y=p.value;a+=l.get(y)||0}}catch(e){f=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(f)throw d}}var g=a*i*.01;if(g>=s)return c+=s/(.01*a),!1;s-=g,c+=i})),"t9",80);case 80:return e.t10=this,e.t11=c,e.t12=n2.Millisecond,e.next=85,this.$.durationUnit;case 85:return e.t13=e.sent,e.delegateYield(e.t10.$convertDuration.call(e.t10,e.t11,e.t12,e.t13),"t14",87);case 87:return e.abrupt("return",e.t14);case 88:case"end":return e.stop()}}),e,this,[[23,62,66,74],[31,44,48,56],[49,,51,55],[67,,69,73]])}))},{key:"canCalculateProjectedXDate",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.useDurationForProjectedXDateCalculation(),"t0",1);case 1:return t=e.t0,e.delegateYield(this.shouldRecalculateDuration(),"t1",3);case 3:return n=e.t1,e.abrupt("return",t&&!n&&(this.$.duration.hasProposedValue()||this.$.duration.hasConsistentValue()));case 5:case"end":return e.stop()}}),e,this)}))},{key:"useDurationForProjectedXDateCalculation",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:return t=e.sent,e.next=5,this.$.assignmentsByCalendar;case 5:return n=e.sent,e.abrupt("return",t===o2.Normal||0===n.size||this.$.duration.hasProposedValue()&&this.$.duration.hasConsistentValue());case 7:case"end":return e.stop()}}),e,this)}))},{key:"useDurationForProjectedStartDateCalculation",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.useDurationForProjectedXDateCalculation(),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e,this)}))},{key:"useDurationForProjectedEndDateCalculation",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.useDurationForProjectedXDateCalculation(),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e,this)}))},{key:"calculateProjectedStartDate",value:regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.useDurationForProjectedStartDateCalculation(),"t0",1);case 1:if(!e.t0){e.next=6;break}return e.delegateYield(this.calculateProjectedXDateByDuration(t,!1,n),"t1",3);case 3:return e.abrupt("return",e.t1);case 6:return e.delegateYield(this.calculateProjectedXDateByEffort(t,!1),"t2",7);case 7:return e.abrupt("return",e.t2);case 8:case"end":return e.stop()}}),e,this)}))},{key:"calculateProjectedEndDate",value:regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.useDurationForProjectedEndDateCalculation(),"t0",1);case 1:if(!e.t0){e.next=6;break}return e.delegateYield(this.calculateProjectedXDateByDuration(t,!0,n),"t1",3);case 3:return e.abrupt("return",e.t1);case 6:return e.delegateYield(this.calculateProjectedXDateByEffort(t,!0),"t2",7);case 7:return e.abrupt("return",e.t2);case 8:case"end":return e.stop()}}),e,this)}))},{key:"getAssignmentFor",value:function(e){var t;return this.assigned.forEach((function(n){n.resource===e&&(t=n)})),t}},{key:"isAssignedTo",value:function(e){return Boolean(this.getAssignmentFor(e))}},{key:"reassign",value:function(e,t){var n=this.getAssignmentFor(e);if(!n)throw new Error("Can't unassign resource `".concat(e,"` from task `").concat(this,"` - resource is not assigned to the task!"));if(this.removeAssignment(n),this.getAssignmentFor(t))throw new Error("Resource can't be assigned twice to the same task");var r=this.getProject().assignmentStore.modelClass;return this.addAssignment(new r({event:this,resource:t})),this.propagate()}},{key:"assign",value:(a=Bne(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:100,!this.getAssignmentFor(t)){e.next=3;break}throw new Error("Resource can't be assigned twice to the same task");case 3:return r=this.getProject().assignmentStore.modelClass,this.addAssignment(new r({event:this,resource:t,units:n})),e.abrupt("return",this.propagate());case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"unassign",value:(i=Bne(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getAssignmentFor(t)){e.next=3;break}throw new Error("Can't unassign resource `".concat(t,"` from task `").concat(this,"` - resource is not assigned to the task!"));case 3:return this.removeAssignment(n),e.abrupt("return",this.propagate());case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"addAssignment",value:function(e){return this.getProject().assignmentStore.add(e),e}},{key:"removeAssignment",value:function(e){return this.getProject().assignmentStore.remove(e),e}},{key:"leaveProject",value:function(){var e=this.getAssignmentStore();this.assigned.forEach((function(t){return e.remove(t)})),Yne(Gne(t.prototype),"leaveProject",this).call(this)}},{key:"assignments",get:function(){return Nne(this.assigned)}}])&&Wne(n.prototype,r),o&&Wne(n,o),t}(e);return Xne([M8({type:"number",allowNull:!0})],t.prototype,"effort",void 0),Xne([M8({type:"string",defaultValue:n2.Hour},{converter:xt.normalizeUnit})],t.prototype,"effortUnit",void 0),Xne([M8({type:"boolean",defaultValue:!1})],t.prototype,"effortDriven",void 0),Xne([Z6({},R8)],t.prototype,"assigned",void 0),Xne([J6()],t.prototype,"effectiveCalendarsCombination",void 0),Xne([J6()],t.prototype,"assignmentsByCalendar",void 0),Xne([Q6("effortDriven")],t.prototype,"calculateEffortDriven",null),Xne([Q6("effort")],t.prototype,"calculateEffort",null),Xne([Q6("effectiveCalendarsCombination")],t.prototype,"calculateEffectiveCalendarsCombination",null),Xne([Q6("assignmentsByCalendar")],t.prototype,"calculateAssignmentsByCalendar",null),t};function Jne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ere(e,t){return!t||"object"!==ore(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tre(e,t,n){return(tre="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nre(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function nre(e){return(nre=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rre(e,t){return(rre=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ore(e){return(ore="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ire=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ore(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},are=function(e){var t=function(e){function t(){return Jne(this,t),ere(this,nre(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rre(e,t)}(t,e),n=t,(r=[{key:"shouldRecalculateStartDate",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(0!==e.sent.size){e.next=8;break}return e.delegateYield(tre(nre(t.prototype),"shouldRecalculateStartDate",this).call(this),"t0",5);case 5:return e.abrupt("return",e.t0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateEndDate",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(0!==e.sent.size){e.next=8;break}return e.delegateYield(tre(nre(t.prototype),"shouldRecalculateEndDate",this).call(this),"t0",5);case 5:return e.abrupt("return",e.t0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateDuration",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(0!==e.sent.size){e.next=8;break}return e.delegateYield(tre(nre(t.prototype),"shouldRecalculateDuration",this).call(this),"t0",5);case 5:return e.abrupt("return",e.t0);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyStartDateRaw",value:regeneratorRuntime.mark((function e(){var n,r,o,i,a,u,c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(!(n=e.sent).size){e.next=36;break}r=p9,o=!0,i=!1,a=void 0,e.prev=8,u=n[Symbol.iterator]();case 10:if(o=(c=u.next()).done){e.next=19;break}return s=c.value,e.next=14,s.$.earlyStartDateRaw;case 14:(l=e.sent)&&l<r&&(r=l);case 16:o=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),i=!0,a=e.t0;case 25:e.prev=25,e.prev=26,o||null==u.return||u.return();case 28:if(e.prev=28,!i){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(25);case 33:r=r.getTime()-p9.getTime()?r:null,e.next=38;break;case 36:return e.delegateYield(tre(nre(t.prototype),"calculateEarlyStartDateRaw",this).call(this),"t1",37);case 37:r=e.t1;case 38:return e.abrupt("return",r);case 39:case"end":return e.stop()}}),e,this,[[8,21,25,33],[26,,28,32]])}))},{key:"calculateEarlyEndDateRaw",value:regeneratorRuntime.mark((function e(){var n,r,o,i,a,u,c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(!(n=e.sent).size){e.next=36;break}r=d9,o=!0,i=!1,a=void 0,e.prev=8,u=n[Symbol.iterator]();case 10:if(o=(c=u.next()).done){e.next=19;break}return s=c.value,e.next=14,s.$.earlyEndDateRaw;case 14:(l=e.sent)&&l>r&&(r=l);case 16:o=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),i=!0,a=e.t0;case 25:e.prev=25,e.prev=26,o||null==u.return||u.return();case 28:if(e.prev=28,!i){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(25);case 33:r=r.getTime()-d9.getTime()?r:null,e.next=38;break;case 36:return e.delegateYield(tre(nre(t.prototype),"calculateEarlyEndDateRaw",this).call(this),"t1",37);case 37:r=e.t1;case 38:return e.abrupt("return",r);case 39:case"end":return e.stop()}}),e,this,[[8,21,25,33],[26,,28,32]])}))},{key:"calculateLateStartDateRaw",value:regeneratorRuntime.mark((function e(){var n,r,o,i,a,u,c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(!(n=e.sent).size){e.next=36;break}r=p9,o=!0,i=!1,a=void 0,e.prev=8,u=n[Symbol.iterator]();case 10:if(o=(c=u.next()).done){e.next=19;break}return s=c.value,e.next=14,s.$.lateStartDateRaw;case 14:(l=e.sent)&&l<r&&(r=l);case 16:o=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),i=!0,a=e.t0;case 25:e.prev=25,e.prev=26,o||null==u.return||u.return();case 28:if(e.prev=28,!i){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(25);case 33:r=r.getTime()-p9.getTime()?r:null,e.next=38;break;case 36:return e.delegateYield(tre(nre(t.prototype),"calculateLateStartDateRaw",this).call(this),"t1",37);case 37:r=e.t1;case 38:return e.abrupt("return",r);case 39:case"end":return e.stop()}}),e,this,[[8,21,25,33],[26,,28,32]])}))},{key:"calculateLateEndDateRaw",value:regeneratorRuntime.mark((function e(){var n,r,o,i,a,u,c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(!(n=e.sent).size){e.next=36;break}r=d9,o=!0,i=!1,a=void 0,e.prev=8,u=n[Symbol.iterator]();case 10:if(o=(c=u.next()).done){e.next=19;break}return s=c.value,e.next=14,s.$.lateEndDateRaw;case 14:(l=e.sent)&&l>r&&(r=l);case 16:o=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),i=!0,a=e.t0;case 25:e.prev=25,e.prev=26,o||null==u.return||u.return();case 28:if(e.prev=28,!i){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(25);case 33:r=r.getTime()-d9.getTime()?r:null,e.next=38;break;case 36:return e.delegateYield(tre(nre(t.prototype),"calculateLateEndDateRaw",this).call(this),"t1",37);case 37:r=e.t1;case 38:return e.abrupt("return",r);case 39:case"end":return e.stop()}}),e,this,[[8,21,25,33],[26,,28,32]])}))},{key:"calculateStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(tre(nre(t.prototype),"calculateStartDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,e.next=4,this.$.parentEvent;case 4:if(!(r=e.sent)){e.next=10;break}return e.next=8,r.$.startDateConstraintIntervals;case 8:o=e.sent,n.push.apply(n,o);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))},{key:"calculateEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(tre(nre(t.prototype),"calculateEndDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,e.next=4,this.$.parentEvent;case 4:if(!(r=e.sent)){e.next=10;break}return e.next=8,r.$.endDateConstraintIntervals;case 8:o=e.sent,n.push.apply(n,o);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(tre(nre(t.prototype),"calculateEarlyStartDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,e.next=4,this.$.parentEvent;case 4:if(!(r=e.sent)){e.next=10;break}return e.next=8,r.$.earlyStartDateConstraintIntervals;case 8:o=e.sent,n.push.apply(n,o);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(tre(nre(t.prototype),"calculateEarlyEndDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,e.next=4,this.$.parentEvent;case 4:if(!(r=e.sent)){e.next=10;break}return e.next=8,r.$.earlyEndDateConstraintIntervals;case 8:o=e.sent,n.push.apply(n,o);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))},{key:"calculateLateStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(tre(nre(t.prototype),"calculateLateStartDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,e.next=4,this.$.parentEvent;case 4:if(!(r=e.sent)){e.next=10;break}return e.next=8,r.$.lateStartDateConstraintIntervals;case 8:o=e.sent,n.push.apply(n,o);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))},{key:"calculateLateEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(tre(nre(t.prototype),"calculateLateEndDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,e.next=4,this.$.parentEvent;case 4:if(!(r=e.sent)){e.next=10;break}return e.next=8,r.$.lateEndDateConstraintIntervals;case 8:o=e.sent,n.push.apply(n,o);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))},{key:"calculateStartDate",value:regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(0!==e.sent.size){e.next=8;break}return e.delegateYield(tre(nre(t.prototype),"calculateStartDate",this).call(this,n),"t0",5);case 5:return e.abrupt("return",e.t0);case 8:return e.delegateYield(this.calculateMinChildrenStartDate(),"t1",9);case 9:return e.abrupt("return",e.t1);case 10:case"end":return e.stop()}}),e,this)}))},{key:"calculateEndDate",value:regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(0!==e.sent.size){e.next=8;break}return e.delegateYield(tre(nre(t.prototype),"calculateEndDate",this).call(this,n),"t0",5);case 5:return e.abrupt("return",e.t0);case 8:return e.delegateYield(this.calculateMaxChildrenEndDate(),"t1",9);case 9:return e.abrupt("return",e.t1);case 10:case"end":return e.stop()}}),e,this)}))},{key:"calculateDuration",value:regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:return r=e.sent,e.delegateYield(tre(nre(t.prototype),"calculateDuration",this).call(this,0===r.size?n:void 0),"t0",4);case 4:return e.abrupt("return",e.t0);case 5:case"end":return e.stop()}}),e,this)}))},{key:"calculateMinChildrenStartDate",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:t=e.sent,n=[],r=!0,o=!1,i=void 0,e.prev=7,a=t[Symbol.iterator]();case 9:if(r=(u=a.next()).done){e.next=19;break}return c=u.value,e.t0=n,e.next=14,c.$.startDate;case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:r=!0,e.next=9;break;case 19:e.next=25;break;case 21:e.prev=21,e.t2=e.catch(7),o=!0,i=e.t2;case 25:e.prev=25,e.prev=26,r||null==a.return||a.return();case 28:if(e.prev=28,!o){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(25);case 33:if((s=n.reduce((function(e,t){return t?Math.min(e,t.getTime()):e}),p9.getTime()))!==d9.getTime()&&s!==p9.getTime()){e.next=36;break}return e.abrupt("return",null);case 36:return e.abrupt("return",new Date(s));case 37:case"end":return e.stop()}}),e,this,[[7,21,25,33],[26,,28,32]])}))},{key:"calculateMaxChildrenEndDate",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:t=e.sent,n=[],r=!0,o=!1,i=void 0,e.prev=7,a=t[Symbol.iterator]();case 9:if(r=(u=a.next()).done){e.next=19;break}return c=u.value,e.t0=n,e.next=14,c.$.endDate;case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:r=!0,e.next=9;break;case 19:e.next=25;break;case 21:e.prev=21,e.t2=e.catch(7),o=!0,i=e.t2;case 25:e.prev=25,e.prev=26,r||null==a.return||a.return();case 28:if(e.prev=28,!o){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(25);case 33:if((s=n.reduce((function(e,t){return t?Math.max(e,t.getTime()):e}),d9.getTime()))!==d9.getTime()&&s!==p9.getTime()){e.next=36;break}return e.abrupt("return",null);case 36:return e.abrupt("return",new Date(s));case 37:case"end":return e.stop()}}),e,this,[[7,21,25,33],[26,,28,32]])}))},{key:"calculateInitialMinChildrenStartDateDeep",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if((t=e.sent).size){e.next=5;break}return e.abrupt("return",this.startDate);case 5:n=[],r=!0,o=!1,i=void 0,e.prev=9,a=t[Symbol.iterator]();case 11:if(r=(u=a.next()).done){e.next=19;break}return c=u.value,e.delegateYield(c.calculateInitialMinChildrenStartDateDeep(),"t0",14);case 14:(s=e.t0)&&n.push(s);case 16:r=!0,e.next=11;break;case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(9),o=!0,i=e.t1;case 25:e.prev=25,e.prev=26,r||null==a.return||a.return();case 28:if(e.prev=28,!o){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(25);case 33:if((l=n.reduce((function(e,t){return Math.min(e,t.getTime())}),p9.getTime()))!==d9.getTime()&&l!==p9.getTime()){e.next=36;break}return e.abrupt("return",null);case 36:return e.abrupt("return",new Date(l));case 37:case"end":return e.stop()}}),e,this,[[9,21,25,33],[26,,28,32]])}))},{key:"parent",get:function(){return this._parent},set:function(e){this._parent=e,this.$.parentEvent.put(e)}}])&&Qne(n.prototype,r),o&&Qne(n,o),t}(e);return ire([h8({bucket:"childEvents"})],t.prototype,"parentEvent",void 0),ire([p8()],t.prototype,"childEvents",void 0),t};function ure(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function cre(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ure(i,r,o,a,u,"next",e)}function u(e){ure(i,r,o,a,u,"throw",e)}a(void 0)}))}}function sre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lre(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fre(e,t){return!t||"object"!==yre(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dre(e,t,n){return(dre="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pre(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pre(e){return(pre=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hre(e,t){return(hre=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yre(e){return(yre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gre=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":yre(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vre=function(e){var t=function(e){function t(){return sre(this,t),fre(this,pre(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hre(e,t)}(t,e),n=t,(r=[{key:"calculateEarlyStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(dre(pre(t.prototype),"calculateEarlyStartDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,o=!0,i=!1,a=void 0,e.prev=5,e.next=8,this.$.incomingDeps;case 8:e.t1=Symbol.iterator,u=e.sent[e.t1]();case 10:if(o=(c=u.next()).done){e.next=55;break}return r=c.value,e.next=14,r.$.fromEvent;case 14:if(null!=(s=e.sent)&&!C5(s)){e.next=17;break}return e.abrupt("continue",52);case 17:l=void 0,e.t2=r.type,e.next=e.t2===i2.EndToStart?21:e.t2===i2.StartToStart?36:51;break;case 21:return e.next=23,s.$.earlyEndDateRaw;case 23:if(!(f=e.sent)){e.next=35;break}return e.next=27,r.$.lag;case 27:return d=e.sent,e.next=30,r.$.lagUnit;case 30:return p=e.sent,e.next=33,r.$.calendar;case 33:h=e.sent,l=fne.new({startDate:h.calculateEndDate(f,d,p),endDate:null,originDescription:'"end to start" dependency from task '.concat(s),onRemoveAction:this.getOnRemoveAction(r)});case 35:return e.abrupt("break",51);case 36:return e.next=38,s.$.earlyStartDateRaw;case 38:if(!(y=e.sent)){e.next=50;break}return e.next=42,r.$.lag;case 42:return g=e.sent,e.next=45,r.$.lagUnit;case 45:return v=e.sent,e.next=48,r.$.calendar;case 48:m=e.sent,l=fne.new({startDate:m.calculateEndDate(y,g,v),endDate:null,originDescription:'"start to start" dependency from task '.concat(s),onRemoveAction:this.getOnRemoveAction(r)});case 50:return e.abrupt("break",51);case 51:l&&n.unshift(l);case 52:o=!0,e.next=10;break;case 55:e.next=61;break;case 57:e.prev=57,e.t3=e.catch(5),i=!0,a=e.t3;case 61:e.prev=61,e.prev=62,o||null==u.return||u.return();case 64:if(e.prev=64,!i){e.next=67;break}throw a;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.abrupt("return",n);case 70:case"end":return e.stop()}}),e,this,[[5,57,61,69],[62,,64,68]])}))},{key:"calculateEarlyEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(dre(pre(t.prototype),"calculateEarlyEndDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,o=!0,i=!1,a=void 0,e.prev=5,e.next=8,this.$.incomingDeps;case 8:e.t1=Symbol.iterator,u=e.sent[e.t1]();case 10:if(o=(c=u.next()).done){e.next=55;break}return r=c.value,e.next=14,r.$.fromEvent;case 14:if(null!=(s=e.sent)&&!C5(s)){e.next=17;break}return e.abrupt("continue",52);case 17:l=void 0,e.t2=r.type,e.next=e.t2===i2.EndToEnd?21:e.t2===i2.StartToEnd?36:51;break;case 21:return e.next=23,s.$.earlyEndDateRaw;case 23:if(!(f=e.sent)){e.next=35;break}return e.next=27,r.$.lag;case 27:return d=e.sent,e.next=30,r.$.lagUnit;case 30:return p=e.sent,e.next=33,r.$.calendar;case 33:h=e.sent,l=fne.new({startDate:h.calculateEndDate(f,d,p),endDate:null,originDescription:'"end to end" dependency from task '.concat(s),onRemoveAction:this.getOnRemoveAction(r)});case 35:return e.abrupt("break",51);case 36:return e.next=38,s.$.earlyStartDateRaw;case 38:if(!(y=e.sent)){e.next=50;break}return e.next=42,r.$.lag;case 42:return g=e.sent,e.next=45,r.$.lagUnit;case 45:return v=e.sent,e.next=48,r.$.calendar;case 48:m=e.sent,l=fne.new({startDate:m.calculateEndDate(y,g,v),endDate:null,originDescription:'"start to end" dependency from task '.concat(s),onRemoveAction:this.getOnRemoveAction(r)});case 50:return e.abrupt("break",51);case 51:l&&n.unshift(l);case 52:o=!0,e.next=10;break;case 55:e.next=61;break;case 57:e.prev=57,e.t3=e.catch(5),i=!0,a=e.t3;case 61:e.prev=61,e.prev=62,o||null==u.return||u.return();case 64:if(e.prev=64,!i){e.next=67;break}throw a;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.abrupt("return",n);case 70:case"end":return e.stop()}}),e,this,[[5,57,61,69],[62,,64,68]])}))},{key:"calculateLateStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(dre(pre(t.prototype),"calculateLateStartDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,o=!0,i=!1,a=void 0,e.prev=5,e.next=8,this.$.outgoingDeps;case 8:e.t1=Symbol.iterator,u=e.sent[e.t1]();case 10:if(o=(c=u.next()).done){e.next=55;break}return r=c.value,e.next=14,r.$.toEvent;case 14:if(null!=(s=e.sent)&&!C5(s)){e.next=17;break}return e.abrupt("continue",52);case 17:l=void 0,e.t2=r.type,e.next=e.t2===i2.StartToStart?21:e.t2===i2.StartToEnd?36:51;break;case 21:return e.next=23,s.$.lateStartDateRaw;case 23:if(!(f=e.sent)){e.next=35;break}return e.next=27,r.$.lag;case 27:return d=e.sent,e.next=30,r.$.lagUnit;case 30:return p=e.sent,e.next=33,r.$.calendar;case 33:h=e.sent,l=fne.new({startDate:null,endDate:h.calculateStartDate(f,d,p),originDescription:'"start to start" dependency to task '.concat(s),onRemoveAction:this.getOnRemoveAction(r)});case 35:return e.abrupt("break",51);case 36:return e.next=38,s.$.lateEndDateRaw;case 38:if(!(y=e.sent)){e.next=50;break}return e.next=42,r.$.lag;case 42:return g=e.sent,e.next=45,r.$.lagUnit;case 45:return v=e.sent,e.next=48,r.$.calendar;case 48:m=e.sent,l=fne.new({startDate:null,endDate:m.calculateStartDate(y,g,v),originDescription:'"start to end" dependency to task '.concat(s),onRemoveAction:this.getOnRemoveAction(r)});case 50:return e.abrupt("break",51);case 51:l&&n.unshift(l);case 52:o=!0,e.next=10;break;case 55:e.next=61;break;case 57:e.prev=57,e.t3=e.catch(5),i=!0,a=e.t3;case 61:e.prev=61,e.prev=62,o||null==u.return||u.return();case 64:if(e.prev=64,!i){e.next=67;break}throw a;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.abrupt("return",n);case 70:case"end":return e.stop()}}),e,this,[[5,57,61,69],[62,,64,68]])}))},{key:"calculateLateEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(dre(pre(t.prototype),"calculateLateEndDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,o=!0,i=!1,a=void 0,e.prev=5,e.next=8,this.$.outgoingDeps;case 8:e.t1=Symbol.iterator,u=e.sent[e.t1]();case 10:if(o=(c=u.next()).done){e.next=55;break}return r=c.value,e.next=14,r.$.toEvent;case 14:if(null!=(s=e.sent)&&!C5(s)){e.next=17;break}return e.abrupt("continue",52);case 17:l=void 0,e.t2=r.type,e.next=e.t2===i2.EndToEnd?21:e.t2===i2.EndToStart?36:51;break;case 21:return e.next=23,s.$.lateEndDateRaw;case 23:if(!(f=e.sent)){e.next=35;break}return e.next=27,r.$.lag;case 27:return d=e.sent,e.next=30,r.$.lagUnit;case 30:return p=e.sent,e.next=33,r.$.calendar;case 33:h=e.sent,l=fne.new({startDate:null,endDate:h.calculateStartDate(f,d,p),originDescription:'"end to end" dependency to task '.concat(s),onRemoveAction:this.getOnRemoveAction(r)});case 35:return e.abrupt("break",51);case 36:return e.next=38,s.$.lateStartDateRaw;case 38:if(!(y=e.sent)){e.next=50;break}return e.next=42,r.$.lag;case 42:return g=e.sent,e.next=45,r.$.lagUnit;case 45:return v=e.sent,e.next=48,r.$.calendar;case 48:m=e.sent,l=fne.new({startDate:null,endDate:m.calculateStartDate(y,g,v),originDescription:'"end to start" dependency to task '.concat(s),onRemoveAction:this.getOnRemoveAction(r)});case 50:return e.abrupt("break",51);case 51:l&&n.unshift(l);case 52:o=!0,e.next=10;break;case 55:e.next=61;break;case 57:e.prev=57,e.t3=e.catch(5),i=!0,a=e.t3;case 61:e.prev=61,e.prev=62,o||null==u.return||u.return();case 64:if(e.prev=64,!i){e.next=67;break}throw a;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.abrupt("return",n);case 70:case"end":return e.stop()}}),e,this,[[5,57,61,69],[62,,64,68]])}))},{key:"getOnRemoveAction",value:function(e){var t=this;return function(){t.getDependencyStore().remove(e)}}},{key:"setIncomingDeps",value:(a=cre(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getDependencyStore(),this.incomingDeps.forEach((function(e){return n.remove(e)})),t.forEach((function(e){e.toEvent=r,n.add(e)})),e.abrupt("return",this.propagate());case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"setOutgoingDeps",value:(i=cre(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getDependencyStore(),this.outgoingDeps.forEach((function(e){return n.remove(e)})),t.forEach((function(e){e.fromEvent=r,n.add(e)})),e.abrupt("return",this.propagate());case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"calculateLateStartDateRaw",value:regeneratorRuntime.mark((function e(){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(dre(pre(t.prototype),"calculateLateStartDateRaw",this).call(this),"t0",1);case 1:return n=e.t0,e.t1=Qte,e.next=5,this.$.lateStartDateConstraintIntervals;case 5:return e.t2=e.sent,r=(0,e.t1)(e.t2),e.t3=Qte,e.next=10,this.$.lateEndDateConstraintIntervals;case 10:if(e.t4=e.sent,o=(0,e.t3)(e.t4),e.t5=Qte,e.t6=r,e.t7=Zte,!o.startDateIsFinite()){e.next=20;break}return e.delegateYield(this.calculateProjectedStartDate(o.startDate),"t9",17);case 17:e.t8=e.t9,e.next=21;break;case 20:e.t8=null;case 21:if(e.t10=e.t8,!o.endDateIsFinite()){e.next=27;break}return e.delegateYield(this.calculateProjectedStartDate(o.endDate),"t12",24);case 24:e.t11=e.t12,e.next=28;break;case 27:e.t11=null;case 28:return e.t13=e.t11,e.t14={startDate:e.t10,endDate:e.t13},e.t15=e.t7.new.call(e.t7,e.t14),e.t16=[e.t6,e.t15],(i=(0,e.t5)(e.t16)).endDateIsFinite()&&i.endDate&&(!n||n>i.endDate)&&(n=i.endDate),e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,this)}))},{key:"calculateLateEndDateRaw",value:regeneratorRuntime.mark((function e(){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(dre(pre(t.prototype),"calculateLateEndDateRaw",this).call(this),"t0",1);case 1:return n=e.t0,e.t1=Qte,e.next=5,this.$.lateEndDateConstraintIntervals;case 5:return e.t2=e.sent,r=(0,e.t1)(e.t2),e.t3=Qte,e.next=10,this.$.lateStartDateConstraintIntervals;case 10:if(e.t4=e.sent,o=(0,e.t3)(e.t4),e.t5=Qte,e.t6=r,e.t7=Zte,!o.startDateIsFinite()){e.next=20;break}return e.delegateYield(this.calculateProjectedEndDate(o.startDate),"t9",17);case 17:e.t8=e.t9,e.next=21;break;case 20:e.t8=null;case 21:if(e.t10=e.t8,!o.endDateIsFinite()){e.next=27;break}return e.delegateYield(this.calculateProjectedEndDate(o.endDate),"t12",24);case 24:e.t11=e.t12,e.next=28;break;case 27:e.t11=null;case 28:return e.t13=e.t11,e.t14={startDate:e.t10,endDate:e.t13},e.t15=e.t7.new.call(e.t7,e.t14),e.t16=[e.t6,e.t15],(i=(0,e.t5)(e.t16)).endDateIsFinite()&&i.endDate&&(!n||n>i.endDate)&&(n=i.endDate),e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,this)}))},{key:"leaveProject",value:function(){var e=this.getDependencyStore();this.incomingDeps.forEach((function(t){return e.remove(t)})),this.outgoingDeps.forEach((function(t){return e.remove(t)})),dre(pre(t.prototype),"leaveProject",this).call(this)}}])&&lre(n.prototype,r),o&&lre(n,o),t}(e);return gre([M8()],t.prototype,"dontRemoveMe",void 0),gre([Z6({},R8)],t.prototype,"outgoingDeps",void 0),gre([Z6({},R8)],t.prototype,"incomingDeps",void 0),gre([Q6("earlyStartDateConstraintIntervals")],t.prototype,"calculateEarlyStartDateConstraintIntervals",null),gre([Q6("earlyEndDateConstraintIntervals")],t.prototype,"calculateEarlyEndDateConstraintIntervals",null),gre([Q6("lateStartDateConstraintIntervals")],t.prototype,"calculateLateStartDateConstraintIntervals",null),gre([Q6("lateEndDateConstraintIntervals")],t.prototype,"calculateLateEndDateConstraintIntervals",null),t};function mre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bre(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wre(e,t){return!t||"object"!==Ore(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kre(e){return(kre=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sre(e,t){return(Sre=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ore(e){return(Ore="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ere=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ore(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Cre=function(e){var t=function(e){function t(){return mre(this,t),wre(this,kre(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sre(e,t)}(t,e),n=t,(r=[{key:"calculateManuallyScheduled",value:regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,e.t0){e.next=6;break}return e.next=4,this.$.incomingDeps;case 4:e.t1=e.sent.size,e.t0=0===e.t1;case 6:return e.abrupt("return",e.t0);case 7:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyStartDateRaw",value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.validInitialIntervals;case 2:if(t=e.sent,n=t.startDateInterval,r=null,!n.startDateIsFinite()){e.next=9;break}r=n.startDate,e.next=18;break;case 9:return e.delegateYield(this.canCalculateProjectedXDate(),"t0",10);case 10:if(!e.t0){e.next=18;break}return e.t1=this,e.next=15,this.$.endDateInitial;case 15:return e.t2=e.sent,e.delegateYield(e.t1.calculateProjectedStartDate.call(e.t1,e.t2),"t3",17);case 17:r=e.t3;case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyEndDateRaw",value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.validInitialIntervals;case 2:if(t=e.sent,n=t.endDateInterval,r=null,!n.startDateIsFinite()){e.next=9;break}r=n.startDate,e.next=18;break;case 9:return e.delegateYield(this.canCalculateProjectedXDate(),"t0",10);case 10:if(!e.t0){e.next=18;break}return e.t1=this,e.next=15,this.$.startDateInitial;case 15:return e.t2=e.sent,e.delegateYield(e.t1.calculateProjectedEndDate.call(e.t1,e.t2),"t3",17);case 17:r=e.t3;case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this)}))},{key:"calculateLateStartDateRaw",value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.validInitialIntervals;case 2:if(t=e.sent,n=t.startDateInterval,r=null,!n.endDateIsFinite()){e.next=9;break}r=n.endDate,e.next=18;break;case 9:return e.delegateYield(this.canCalculateProjectedXDate(),"t0",10);case 10:if(!e.t0){e.next=18;break}return e.t1=this,e.next=15,this.$.endDateInitial;case 15:return e.t2=e.sent,e.delegateYield(e.t1.calculateProjectedStartDate.call(e.t1,e.t2),"t3",17);case 17:r=e.t3;case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this)}))},{key:"calculateLateEndDateRaw",value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.validInitialIntervals;case 2:if(t=e.sent,n=t.endDateInterval,r=null,!n.endDateIsFinite()){e.next=9;break}r=n.endDate,e.next=18;break;case 9:return e.delegateYield(this.canCalculateProjectedXDate(),"t0",10);case 10:if(!e.t0){e.next=18;break}return e.t1=this,e.next=15,this.$.startDateInitial;case 15:return e.t2=e.sent,e.delegateYield(e.t1.calculateProjectedEndDate.call(e.t1,e.t2),"t3",17);case 17:r=e.t3;case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this)}))},{key:"doCalculateDuration",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,n=null,!this.$.startDate.hasProposedValue()){e.next=5;break}t=this.$.startDate.proposedValue,e.next=12;break;case 5:if(!this.$.startDate.hasConsistentValue()){e.next=9;break}t=this.startDate,e.next=12;break;case 9:return e.next=11,this.$.startDate;case 11:t=e.sent;case 12:if(!this.$.endDate.hasProposedValue()){e.next=16;break}n=this.$.endDate.proposedValue,e.next=23;break;case 16:if(!this.$.endDate.hasConsistentValue()){e.next=20;break}n=this.endDate,e.next=23;break;case 20:return e.next=22,this.$.endDate;case 22:n=e.sent;case 23:return e.delegateYield(this.calculateProjectedDuration(t,n),"t0",24);case 24:return e.abrupt("return",e.t0);case 25:case"end":return e.stop()}}),e,this)}))}])&&bre(n.prototype,r),o&&bre(n,o),t}(e);return Ere([Q6("manuallyScheduled")],t.prototype,"calculateManuallyScheduled",null),t};function xre(e){return(xre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jre(e,t){return!t||"object"!==xre(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dre(e){return(Dre=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rre(e,t){return(Rre=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pre=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return Cre(Zne(are(vre(yne(xne(Mte(t9(c9(z9(q6(e)))))))))))},Tre=function(e){function t(){return _re(this,t),jre(this,Dre(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rre(e,t)}(t,e),t}(Pre(qs));function Are(e){return(Are="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mre(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ire(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Fre(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ire(i,r,o,a,u,"next",e)}function u(e){Ire(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Lre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nre(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hre(e,t){return!t||"object"!==Are(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bre(e){return(Bre=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zre(e,t){return(zre=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vre=function(e){function t(){return Lre(this,t),Hre(this,Bre(t).apply(this,arguments))}var n,r,o,i,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zre(e,t)}(t,e),n=t,r=[{key:"setMilestone",value:(u=Fre(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t?this.convertToMilestone():this.convertToRegular());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"convertToMilestone",value:(a=Fre(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.setDuration(0,this.durationUnit,!1));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"convertToRegular",value:(i=Fre(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this).milestone){e.next=3;break}return e.abrupt("return",t.setDuration(1,t.durationUnit,!1));case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"normalize",value:function(){}},{key:"inSetNormalize",value:function(e){}},{key:"isTask",get:function(){return!0}},{key:"successors",get:function(){return Array.from(this.outgoingDeps)},set:function(e){this.setOutgoingDeps(e)}},{key:"predecessors",get:function(){return Array.from(this.incomingDeps)},set:function(e){this.setIncomingDeps(e)}},{key:"renderedPercentDone",get:function(){return this.percentDone<=99?Math.round(this.percentDone):Math.floor(this.percentDone)}},{key:"isDraggable",get:function(){return this.draggable}},{key:"isResizable",get:function(){return this.resizable&&!this.milestone&&!this.isParent}},{key:"isStarted",get:function(){return this.percentDone>0}},{key:"isCompleted",get:function(){return this.percentDone>=100}},{key:"milestone",get:function(){if(!this.isLeaf){var e=this.startDate,t=this.endDate;if(e&&t)return t.getTime()===e.getTime()}return 0===this.duration},set:function(e){e?this.convertToMilestone():this.convertToRegular()}},{key:"allDependencies",get:function(){return[].concat(Mre(this.predecessors||[]),Mre(this.successors||[]))}},{key:"predecessorTasks",get:function(){return this.predecessors.map((function(e){return e.fromEvent}))}},{key:"successorTasks",get:function(){return this.successors.map((function(e){return e.toEvent}))}},{key:"previousSiblingsTotalCount",get:function(){for(var e=this.previousSibling,t=this.parentIndex;e;)t+=e.descendantCount,e=e.previousSibling;return t}},{key:"sequenceNumber",get:function(){for(var e=0,t=this;t.parent;)e+=t.previousSiblingsTotalCount+1,t=t.parent;return e}},{key:"isSubProject",get:function(){return!1}},{key:"subProject",get:function(){var e=null;return this.isProject?e=this:this.bubbleWhile((function(t){return t.isProject&&(e=t),!e})),e}},{key:"fullEffort",get:function(){return{unit:this.effortUnit,magnitude:this.effort}},set:function(e){this.setEffort(e.magnitude,e.unit)}},{key:"fullDuration",get:function(){return{unit:this.durationUnit,magnitude:this.duration}},set:function(e){this.setDuration(e.magnitude,e.unit)}}],o=[{key:"fields",get:function(){return[{name:"note",type:"string"},{name:"percentDone",type:"number",defaultValue:0},{name:"parentId",serialize:function(e,t){var n=t.getEventStore(),r=t.getProject();return n&&n.getById(e)===r&&(e=null),e}},{name:"phantomId",type:"string"},{name:"phantomParentId",type:"string"},{name:"showInTimeline",type:"boolean"},{name:"index",type:"int",persist:!0},{name:"iconCls"},{name:"draggable",type:"boolean",persist:!1,defaultValue:!0},{name:"resizable",persist:!1,defaultValue:!0}]}}],r&&Nre(n.prototype,r),o&&Nre(n,o),t}(D4(Pre(bF)));function Wre(e){return(Wre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $re(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Yre(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){$re(i,r,o,a,u,"next",e)}function u(e){$re(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Gre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ure(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qre(e,t){return!t||"object"!==Wre(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xre(e,t,n){return(Xre="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kre(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Kre(e){return(Kre=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zre(e,t){return(Zre=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Vre.convertEmptyParentToLeaf=!0,Vre._$name="ProTaskModel";var Jre=function(e){var t=function(e){function t(){return Gre(this,t),qre(this,Kre(t).apply(this,arguments))}var n,r,o,i,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zre(e,t)}(t,e),n=t,(r=[{key:"shouldRecalculateDuration",value:regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:return n=e.sent,e.next=5,this.$.assigned;case 5:if(r=e.sent,n!==o2.FixedDuration||!r.size){e.next=10;break}if(null!=this.$.duration.value){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:return e.delegateYield(Xre(Kre(t.prototype),"shouldRecalculateDuration",this).call(this),"t0",11);case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateEffort",value:regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:return n=e.sent,e.next=5,this.$.assigned;case 5:if(r=e.sent,n!==o2.FixedDuration||!r.size){e.next=15;break}if(null!=this.$.effort.value){e.next=9;break}return e.abrupt("return",!0);case 9:return e.delegateYield(this.shouldRecalculateDuration(),"t1",10);case 10:if(e.t0=!e.t1,!e.t0){e.next=14;break}return e.delegateYield(this.shouldRecalculateAssignmentUnits(null),"t2",13);case 13:e.t0=!e.t2;case 14:return e.abrupt("return",e.t0);case 15:return e.delegateYield(Xre(Kre(t.prototype),"shouldRecalculateEffort",this).call(this),"t3",16);case 16:return e.abrupt("return",e.t3);case 17:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateAssignmentUnits",value:regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:if(e.sent!==o2.FixedDuration){e.next=15;break}return e.next=6,this.$.effortDriven;case 6:if(!e.sent){e.next=14;break}if(!this.$.effort.hasProposedValue()&&!this.$.duration.hasProposedValue()){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(this.$.assigned.newRefs.size>0||this.$.assigned.oldRefs.size>0)||null==this.$.effort.value){e.next=11;break}return e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 14:return e.abrupt("return",this.$.effort.hasProposedValue()&&!this.$.duration.hasProposedValue());case 15:return e.delegateYield(Xre(Kre(t.prototype),"shouldRecalculateAssignmentUnits",this).call(this,n),"t0",16);case 16:return e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,this)}))},{key:"setEffort",value:(u=Yre(regeneratorRuntime.mark((function e(n,r){var o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.schedulingMode===o2.FixedDuration&&this.assigned.forEach((function(e){o.markAsNeedRecalculation(e.$.units)})),e.abrupt("return",Xre(Kre(t.prototype),"setEffort",this).call(this,n,r));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"setDuration",value:(a=Yre(regeneratorRuntime.mark((function e(n,r){var o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.schedulingMode===o2.FixedDuration&&this.effortDriven&&this.assigned.forEach((function(e){o.markAsNeedRecalculation(e.$.units)})),e.abrupt("return",Xre(Kre(t.prototype),"setDuration",this).call(this,n,r));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"setAssignmentUnits",value:(i=Yre(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.schedulingMode!==o2.FixedDuration){e.next=6;break}return n.$.units.put(r),n.markAsNeedRecalculation(n.event.$.effort),e.abrupt("return",n.propagate());case 6:return e.abrupt("return",Xre(Kre(t.prototype),"setAssignmentUnits",this).call(this,n,r));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"addAssignment",value:function(e){var n=this;return this.schedulingMode===o2.FixedDuration&&this.effortDriven&&(e.$.units.clearUserInput(),this.assigned.forEach((function(e){n.markAsNeedRecalculation(e.$.units),e.$.units.clearUserInput()}))),Xre(Kre(t.prototype),"addAssignment",this).call(this,e)}},{key:"removeAssignment",value:function(e){var n=this;return this.schedulingMode===o2.FixedDuration&&this.effortDriven&&(e.$.units.clearUserInput(),this.assigned.forEach((function(e){n.markAsNeedRecalculation(e.$.units),e.$.units.clearUserInput()}))),Xre(Kre(t.prototype),"removeAssignment",this).call(this,e)}},{key:"useDurationForProjectedXDateCalculation",value:regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:if(n=e.sent,e.t0=n===o2.FixedDuration,e.t0){e.next=7;break}return e.delegateYield(Xre(Kre(t.prototype),"useDurationForProjectedXDateCalculation",this).call(this),"t1",6);case 6:e.t0=e.t1;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)}))},{key:"getBaseOptionsForDurationCalculations",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:if(e.sent!==o2.FixedDuration){e.next=7;break}return e.abrupt("return",{ignoreResourceCalendars:!0});case 7:return e.delegateYield(Xre(Kre(t.prototype),"getBaseOptionsForDurationCalculations",this).call(this),"t0",8);case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)}))}])&&Ure(n.prototype,r),o&&Ure(n,o),t}(e);return t};function Qre(e){return(Qre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eoe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function toe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){eoe(i,r,o,a,u,"next",e)}function u(e){eoe(i,r,o,a,u,"throw",e)}a(void 0)}))}}function noe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function roe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ooe(e,t){return!t||"object"!==Qre(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ioe(e,t,n){return(ioe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aoe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function aoe(e){return(aoe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uoe(e,t){return(uoe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var coe=function(e){var t=function(e){function t(){return noe(this,t),ooe(this,aoe(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uoe(e,t)}(t,e),n=t,(r=[{key:"calculateEffortDriven",value:regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:if(r=e.sent,e.t0=r===o2.FixedEffort,e.t0){e.next=7;break}return e.delegateYield(ioe(aoe(t.prototype),"calculateEffortDriven",this).call(this,n),"t1",6);case 6:e.t0=e.t1;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateDuration",value:regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:return n=e.sent,e.next=5,this.$.assigned;case 5:if(r=e.sent,!(n===o2.FixedEffort&&r.size>0)){e.next=11;break}return e.delegateYield(this.shouldRecalculateEffort(),"t0",8);case 8:return e.abrupt("return",!e.t0);case 11:return e.delegateYield(ioe(aoe(t.prototype),"shouldRecalculateDuration",this).call(this),"t1",12);case 12:return e.abrupt("return",e.t1);case 13:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateEffort",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:if(e.sent!==o2.FixedEffort){e.next=7;break}return e.abrupt("return",null==this.$.effort.value);case 7:return e.delegateYield(ioe(aoe(t.prototype),"shouldRecalculateEffort",this).call(this),"t0",8);case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)}))},{key:"setAssignmentUnits",value:(a=toe(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.schedulingMode!==o2.FixedEffort){e.next=6;break}return n.$.units.put(r),n.markAsNeedRecalculation(n.event.$.duration),e.abrupt("return",n.propagate());case 6:return e.abrupt("return",ioe(aoe(t.prototype),"setAssignmentUnits",this).call(this,n,r));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"shouldRecalculateAssignmentUnits",value:regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.schedulingMode!==o2.FixedEffort){e.next=9;break}if(!this.$.duration.hasProposedValue()){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:e.next=11;break;case 9:return e.delegateYield(ioe(aoe(t.prototype),"shouldRecalculateAssignmentUnits",this).call(this,n),"t0",10);case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this)}))},{key:"setDuration",value:(i=toe(regeneratorRuntime.mark((function e(n,r){var o,i,a,u,c=this,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.schedulingMode===o2.FixedEffort&&this.assigned.forEach((function(e){c.markAsNeedRecalculation(e.$.units),e.$.units.clearUserInput()})),i=s.length,a=new Array(i>2?i-2:0),u=2;u<i;u++)a[u-2]=s[u];return e.abrupt("return",(o=ioe(aoe(t.prototype),"setDuration",this)).call.apply(o,[this,n,r].concat(a)));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"addAssignment",value:function(e){return this.schedulingMode===o2.FixedEffort&&this.markAsNeedRecalculation(this.$.duration),ioe(aoe(t.prototype),"addAssignment",this).call(this,e)}},{key:"removeAssignment",value:function(e){return this.schedulingMode===o2.FixedEffort&&this.assigned.size>1&&this.markAsNeedRecalculation(this.$.duration),ioe(aoe(t.prototype),"removeAssignment",this).call(this,e)}}])&&roe(n.prototype,r),o&&roe(n,o),t}(e);return t};function soe(e){return(soe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function loe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function foe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){loe(i,r,o,a,u,"next",e)}function u(e){loe(i,r,o,a,u,"throw",e)}a(void 0)}))}}function doe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function poe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hoe(e,t){return!t||"object"!==soe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yoe(e,t,n){return(yoe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=goe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function goe(e){return(goe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function voe(e,t){return(voe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var moe=function(e){var t=function(e){function t(){return doe(this,t),hoe(this,goe(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&voe(e,t)}(t,e),n=t,(r=[{key:"shouldRecalculateDuration",value:regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:return n=e.sent,e.next=5,this.$.assigned;case 5:if(r=e.sent,!(n===o2.FixedUnits&&r.size>0)){e.next=13;break}if(null!=this.$.duration.value){e.next=9;break}return e.abrupt("return",!0);case 9:if(!this.$.effort.hasProposedValue()){e.next=11;break}return e.abrupt("return",!0);case 11:return e.delegateYield(this.shouldRecalculateEffort(),"t0",12);case 12:return e.abrupt("return",!e.t0);case 13:return e.delegateYield(yoe(goe(t.prototype),"shouldRecalculateDuration",this).call(this),"t1",14);case 14:return e.abrupt("return",e.t1);case 15:case"end":return e.stop()}}),e,this)}))},{key:"shouldRecalculateEffort",value:regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:return n=e.sent,e.next=5,this.$.assigned;case 5:if(r=e.sent,!(n===o2.FixedUnits&&r.size>0)){e.next=18;break}if(e.t0=null==this.$.effort.value,!e.t0){e.next=11;break}return e.delegateYield(this.canRecalculateEffort(),"t1",10);case 10:e.t0=e.t1;case 11:if(!e.t0){e.next=13;break}return e.abrupt("return",!0);case 13:if(!this.$.duration.hasProposedValue()){e.next=15;break}return e.abrupt("return",!0);case 15:return e.next=17,this.$.effortDriven;case 17:return e.abrupt("return",!e.sent);case 18:return e.delegateYield(yoe(goe(t.prototype),"shouldRecalculateEffort",this).call(this),"t2",19);case 19:return e.abrupt("return",e.t2);case 20:case"end":return e.stop()}}),e,this)}))},{key:"addAssignment",value:function(e){return this.schedulingMode===o2.FixedUnits&&this.markAsNeedRecalculation(this.effortDriven?this.$.duration:this.$.effort),yoe(goe(t.prototype),"addAssignment",this).call(this,e)}},{key:"removeAssignment",value:function(e){return this.schedulingMode===o2.FixedUnits&&this.markAsNeedRecalculation(this.effortDriven?this.$.duration:this.$.effort),yoe(goe(t.prototype),"removeAssignment",this).call(this,e)}},{key:"setEffort",value:(a=foe(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.schedulingMode===o2.FixedUnits&&this.markAsNeedRecalculation(this.$.duration),e.abrupt("return",yoe(goe(t.prototype),"setEffort",this).call(this,n,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"setDuration",value:(i=foe(regeneratorRuntime.mark((function e(n,r){var o,i,a,u,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.schedulingMode===o2.FixedUnits&&this.markAsNeedRecalculation(this.$.effort),i=c.length,a=new Array(i>2?i-2:0),u=2;u<i;u++)a[u-2]=c[u];return e.abrupt("return",(o=yoe(goe(t.prototype),"setDuration",this)).call.apply(o,[this,n,r].concat(a)));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"useDurationForProjectedXDateCalculation",value:regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.schedulingMode;case 2:return n=e.sent,e.next=5,this.$.assigned;case 5:if(r=e.sent,!(n===o2.FixedUnits&&r.size>0)){e.next=11;break}return e.next=9,this.$.effortDriven;case 9:return o=e.sent,e.abrupt("return",(!o||!this.$.effort.hasValue()||this.$.duration.hasProposedValue())&&(!this.$.effort.hasProposedValue()||!this.$.effort.hasConsistentValue()));case 11:return e.delegateYield(yoe(goe(t.prototype),"useDurationForProjectedXDateCalculation",this).call(this),"t0",12);case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,this)}))}])&&poe(n.prototype,r),o&&poe(n,o),t}(e);return t};function boe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function woe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){boe(i,r,o,a,u,"next",e)}function u(e){boe(i,r,o,a,u,"throw",e)}a(void 0)}))}}function koe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Soe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ooe(e,t){return!t||"object"!==_oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eoe(e,t,n){return(Eoe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Coe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Coe(e){return(Coe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xoe(e,t){return(xoe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _oe(e){return(_oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var joe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_oe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Doe=function(e){var t=function(e){function t(){return koe(this,t),Ooe(this,Coe(t).apply(this,arguments))}var n,r,o,i,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xoe(e,t)}(t,e),n=t,(r=[{key:"calculateConstraintType",value:regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,e.t0=void 0!==t,!e.t0){e.next=5;break}return e.delegateYield(this.isConstraintTypeApplicable(t),"t1",4);case 4:e.t0=e.t1;case 5:if(!e.t0){e.next=9;break}n=t,e.next=13;break;case 9:return r=this.$.constraintType.getConsistentValue(),e.delegateYield(this.isConstraintTypeApplicable(r),"t2",11);case 11:if(!e.t2){e.next=13;break}n=r;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)}))},{key:"getStartDatePinConstraintType",value:function(){return this.isTaskPinnableWithConstraint()&&r2.StartNoEarlierThan||null}},{key:"getEndDatePinConstraintType",value:function(){return this.isTaskPinnableWithConstraint()&&r2.FinishNoEarlierThan||null}},{key:"isTaskPinnableWithConstraint",value:function(){var e=!1;if(!this.manuallyScheduled){var t=this.constraintType;if(t)switch(t){case r2.StartNoEarlierThan:case r2.FinishNoEarlierThan:e=!0}else e=!0}return e}},{key:"setStartDate",value:(u=woe(regeneratorRuntime.mark((function e(n){var r,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(i.length>1&&void 0!==i[1])||i[1],(o=this.getStartDatePinConstraintType())&&(this.$.constraintType.put(o),this.$.constraintDate.put(n)),e.abrupt("return",Eoe(Coe(t.prototype),"setStartDate",this).call(this,n,r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"setEndDate",value:(a=woe(regeneratorRuntime.mark((function e(n){var r,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=i.length>1&&void 0!==i[1]&&i[1])&&(o=this.getEndDatePinConstraintType())&&(this.$.constraintType.put(o),this.$.constraintDate.put(n)),e.abrupt("return",Eoe(Coe(t.prototype),"setEndDate",this).call(this,n,r));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"calculateConstraintDate",value:regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.constraintType;case 2:return r=e.sent,n=void 0!==t?t:r?this.getConstraintTypeDefaultDate(r)||this.$.constraintDate.getConsistentValue():null,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))},{key:"getConstraintTypeDefaultDate",value:function(e){switch(e){case r2.StartNoEarlierThan:case r2.StartNoLaterThan:case r2.MustStartOn:return this.startDate;case r2.FinishNoEarlierThan:case r2.FinishNoLaterThan:case r2.MustFinishOn:return this.endDate}return null}},{key:"isConstraintTypeApplicable",value:regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:n=e.sent,r=n.size>0,e.t0=t,e.next=e.t0===r2.FinishNoEarlierThan||e.t0===r2.StartNoLaterThan||e.t0===r2.MustFinishOn||e.t0===r2.MustStartOn?7:8;break;case 7:return e.abrupt("return",!r);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)}))},{key:"setConstraint",value:(i=woe(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$.constraintType.put(t),void 0!==n&&this.$.constraintDate.put(n),e.abrupt("return",this.propagate());case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"calculateEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(Eoe(Coe(t.prototype),"calculateEndDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,e.next=4,this.$.constraintType;case 4:if(!(r=e.sent)){e.next=19;break}return e.next=8,this.$.constraintDate;case 8:if(!(o=e.sent)){e.next=19;break}e.t1=r,e.next=e.t1===r2.MustFinishOn?13:e.t1===r2.FinishNoEarlierThan?15:e.t1===r2.FinishNoLaterThan?17:19;break;case 13:return n.unshift(fne.new({startDate:o,endDate:o,originDescription:'"Must Finish On" constraint'})),e.abrupt("break",19);case 15:return n.unshift(fne.new({startDate:o,originDescription:'"Finish No Ealier Than" constraint'})),e.abrupt("break",19);case 17:return n.unshift(fne.new({endDate:o,originDescription:'"Finish No Ealier Than" constraint'})),e.abrupt("break",19);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)}))},{key:"calculateStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(Eoe(Coe(t.prototype),"calculateStartDateConstraintIntervals",this).call(this),"t0",1);case 1:return n=e.t0,e.next=4,this.$.constraintType;case 4:if(!(r=e.sent)){e.next=19;break}return e.next=8,this.$.constraintDate;case 8:if(!(o=e.sent)){e.next=19;break}e.t1=r,e.next=e.t1===r2.MustStartOn?13:e.t1===r2.StartNoEarlierThan?15:e.t1===r2.StartNoLaterThan?17:19;break;case 13:return n.unshift(fne.new({startDate:o,endDate:o,originDescription:'"Must Start On" constraint'})),e.abrupt("break",19);case 15:return n.unshift(fne.new({startDate:o,originDescription:'"Start No Ealier Than" constraint'})),e.abrupt("break",19);case 17:return n.unshift(fne.new({endDate:o,originDescription:'"Start No Later Than" constraint'})),e.abrupt("break",19);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)}))}])&&Soe(n.prototype,r),o&&Soe(n,o),t}(e);return joe([M8({type:"string"})],t.prototype,"constraintType",void 0),joe([M8({type:"date",dateFormat:"YYYY-MM-DDTHH:mm:ssZ"},{converter:L8})],t.prototype,"constraintDate",void 0),joe([Q6("constraintType")],t.prototype,"calculateConstraintType",null),joe([Q6("constraintDate")],t.prototype,"calculateConstraintDate",null),t};function Roe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Poe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Toe(e,t){return!t||"object"!==Ioe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Aoe(e){return(Aoe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Moe(e,t){return(Moe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ioe(e){return(Ioe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Foe=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ioe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Loe=function(e){var t=function(e){function t(){return Roe(this,t),Toe(this,Aoe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Moe(e,t)}(t,e),n=t,(r=[{key:"calculatePercentDone",value:regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:return n=e.sent,r=this.getProject(),e.next=6,r.$.autoCalculatePercentDoneForParentTasks;case 6:if(o=e.sent,!n.size||!o){e.next=22;break}return e.next=10,this.$.percentDoneSummaryData;case 10:if(!((i=e.sent).totalDuration>0)){e.next=15;break}return e.abrupt("return",i.completedDuration/i.totalDuration);case 15:if(!(i.milestonesNum>0)){e.next=19;break}return e.abrupt("return",i.milestonesTotalPercentDone/i.milestonesNum);case 19:return e.abrupt("return",null);case 20:e.next=25;break;case 22:if(void 0===t){e.next=24;break}return e.abrupt("return",t);case 24:return e.abrupt("return",this.$.percentDone.value);case 25:case"end":return e.stop()}}),e,this)}))},{key:"calculatePercentDoneSummaryData",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s,l,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.childEvents;case 2:if(!(t=e.sent).size){e.next=36;break}n={totalDuration:0,completedDuration:0,milestonesNum:0,milestonesTotalPercentDone:0},r=!0,o=!1,i=void 0,e.prev=8,a=t[Symbol.iterator]();case 10:if(r=(u=a.next()).done){e.next=19;break}return c=u.value,e.next=14,c.$.percentDoneSummaryData;case 14:(s=e.sent)&&(n.totalDuration+=s.totalDuration,n.completedDuration+=s.completedDuration,n.milestonesNum+=s.milestonesNum,n.milestonesTotalPercentDone+=s.milestonesTotalPercentDone);case 16:r=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),o=!0,i=e.t0;case 25:e.prev=25,e.prev=26,r||null==a.return||a.return();case 28:if(e.prev=28,!o){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return e.abrupt("return",n);case 36:return e.next=38,this.$.duration;case 38:if("number"!=typeof(l=e.sent)){e.next=54;break}return e.t1=this,e.t2=l,e.next=44,this.$.durationUnit;case 44:return e.t3=e.sent,e.t4=n2.Millisecond,e.delegateYield(e.t1.$convertDuration.call(e.t1,e.t2,e.t3,e.t4),"t5",47);case 47:return f=e.t5,e.next=50,this.$.percentDone;case 50:return d=e.sent,e.abrupt("return",{totalDuration:f,completedDuration:f*d,milestonesNum:0===f?1:0,milestonesTotalPercentDone:0===f?d:0});case 54:return e.abrupt("return",null);case 55:case"end":return e.stop()}}),e,this,[[8,21,25,33],[26,,28,32]])}))}])&&Poe(n.prototype,r),o&&Poe(n,o),t}(e);return Foe([M8({type:"number",defaultValue:0})],t.prototype,"percentDone",void 0),Foe([J6()],t.prototype,"percentDoneSummaryData",void 0),Foe([Q6("percentDone")],t.prototype,"calculatePercentDone",null),Foe([Q6("percentDoneSummaryData")],t.prototype,"calculatePercentDoneSummaryData",null),t};function Noe(e){return(Noe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Boe(e,t){return!t||"object"!==Noe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zoe(e){return(zoe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Voe(e,t){return(Voe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Woe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return Doe(moe(coe(Jre(Zne(Loe(vre(are(yne(xne(Mte(t9(c9(z9(q6(e)))))))))))))))},$oe=function(e){function t(){return Hoe(this,t),Boe(this,zoe(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Voe(e,t)}(t,e),t}(Woe(qs));function Yoe(e){return(Yoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Goe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uoe(e,t){return!t||"object"!==Yoe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qoe(e){return(qoe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xoe(e,t){return(Xoe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Koe=function(e){return function(e){function t(){return Goe(this,t),Uoe(this,qoe(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xoe(e,t)}(t,e),t}(e)};function Zoe(e){return(Zoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Joe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qoe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eie(e,t){return!t||"object"!==Zoe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tie(e){return(tie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rie(e,t)}function rie(e,t){return(rie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oie=function(e){var t=function(e){function t(){return Joe(this,t),eie(this,tie(t).apply(this,arguments))}var n,r,o;return nie(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{tree:!0,modelClass:$oe}}}],(r=[{key:"buildRootNode",value:function(){return this.getProject()||{}}}])&&Qoe(n.prototype,r),o&&Qoe(n,o),t}(e);return t},iie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ed;return oie(G8(c9(Koe(e))))},aie=function(e){function t(){return Joe(this,t),eie(this,tie(t).apply(this,arguments))}return nie(t,e),t}(iie());function uie(e){return(uie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cie(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function sie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fie(e,t){return!t||"object"!==uie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function die(e,t,n){return(die="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pie(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pie(e){return(pie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hie(e,t){return(hie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yie=function(e){function t(){return sie(this,t),fie(this,pie(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hie(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{tree:!0,modelClass:Vre,loadPriority:200,syncPriority:300,storeId:"tasks"}}}],(r=[{key:"updateIdMap",value:function(){die(pie(t.prototype),"updateIdMap",this).call(this)}},{key:"getEvents",value:function(e){var t=this.getById(e);return t&&[t]}},{key:"getEventsForResource",value:function(e){var t=this,n=this.resourceStore.getById(e);return cie(n&&n.assignments.filter((function(e){return e.isPartOfStore(t.assignmentStore)}))||[]).map((function(e){return e.event}))}},{key:"getResourcesForEvent",value:function(e){return e.assignments.map((function(e){return e.resource}))}}])&&lie(n.prototype,r),o&&lie(n,o),t}(D4(iie(qM(hd))));function gie(e){return(gie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bie(e,t){return!t||"object"!==gie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wie(e){return(wie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kie(e,t){return(kie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yie._$name="TaskStore";var Sie=function(e){var t=function(e){function t(){return vie(this,t),bie(this,wie(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kie(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:Yee}}}],(r=null)&&mie(n.prototype,r),o&&mie(n,o),t}(e);return t};function Oie(e){return(Oie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eie(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Cie(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Eie(i,r,o,a,u,"next",e)}function u(e){Eie(i,r,o,a,u,"throw",e)}a(void 0)}))}}function xie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jie(e,t){return!t||"object"!==Oie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Die(e){return(Die=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rie(e,t){return(Rie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pie=Symbol("DependencyValidationMixin"),Tie=function(e){var t=function(e){function t(){return xie(this,t),jie(this,Die(t).apply(this,arguments))}var n,r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rie(e,t)}(t,e),n=t,(r=[{key:Pie,value:function(){}},{key:"isValidDependency",value:(i=Cie(regeneratorRuntime.mark((function e(t,n,r){var o,i,a,u,c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(o=this).getProject(),console.assert(!Gee(t)||t.getProject()!=i,"Can't validate dependency, the dependency given is already a part of this project, validation can be done only on depepdencies which are not joined yet!"),e.next=4,i.waitForPropagateCompleted();case 4:return a=function(){var e=Cie(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t instanceof V4?N4.Cancel:N4.Resume,e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gee(t)||(u=o.getEventStore(),c=o.getDependencyStore().modelClass,t="object"==Oie(t)?new c(t):new c({fromEvent:u.getById(t),toEvent:u.getById(n),type:r})),s=t.getProject(),t.setProject(i),e.next=10,i.tryPropagateWithEntities(a,[t]);case 10:return l=e.sent,t.setProject(s),e.abrupt("return",l==N5.Passed);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})}])&&_ie(n.prototype,r),o&&_ie(n,o),t}(e);return t};function Aie(e){return(Aie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iie(e,t){return!t||"object"!==Aie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fie(e){return(Fie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nie(e,t)}function Nie(e,t){return(Nie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hie=function(e){var t=function(e){function t(){return Mie(this,t),Iie(this,Fie(t).apply(this,arguments))}return Lie(t,e),t}(e);return t},Bie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ed;return Hie(Tie(Sie(G8(c9(Koe(e))))))},zie=function(e){function t(){return Mie(this,t),Iie(this,Fie(t).apply(this,arguments))}return Lie(t,e),t}(Bie());function Vie(e){return(Vie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wie(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function $ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gie(e,t){return!t||"object"!==Vie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uie(e){return(Uie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qie(e,t){return(qie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xie=function(e){function t(){return $ie(this,t),Gie(this,Uie(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qie(e,t)}(t,e),n=t,r=[{key:"reduceTaskDependencies",value:function(e,t,n,r,o){return this.reduceEventDependencies(e,t,n,r,o)}},{key:"reduceTaskPredecessors",value:function(e,t,n,r){return this.reduceEventPredecessors(e,t,n,r)}},{key:"reduceTaskSuccessors",value:function(e,t,n,r){return this.reduceEventSuccessors(e,t,n,r)}},{key:"mapTaskDependencies",value:function(e,t,n,r,o){return this.mapEventDependencies(e,t,n,r,o)}},{key:"mapTaskPredecessors",value:function(e,t,n,r){return this.mapEventPredecessors(e,t,n,r)}},{key:"mapTaskSuccessors",value:function(e,t,n,r){return this.mapEventSuccessors(e,t,n,r)}},{key:"getTaskDependencies",value:function(e,t){return this.getEventDependencies(e,t)}},{key:"getTaskPredecessors",value:function(e,t){return this.getEventPredecessors(e,t)}},{key:"getTaskSuccessors",value:function(e,t){return this.getEventSuccessors(e,t)}},{key:"removeTaskDependencies",value:function(e,t){this.removeEventDependencies(e,t)}},{key:"removeTaskPredecessors",value:function(e,t){this.removeEventPredecessors(e,t)}},{key:"removeTaskSuccessors",value:function(e,t){this.removeEventSuccessors(e,t)}},{key:"getDependencyForSourceAndTargetTasks",value:function(e,t){return this.getDependencyForSourceAndTargetEvents(e,t)}},{key:"getTasksLinkingDependency",value:function(e,t){return this.getEventsLinkingDependency(e,t)}},{key:"isValidDependencyToCreate",value:(i=regeneratorRuntime.mark((function e(t,n,r){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isValidDependency(t,n,r);case 2:return o=e.sent,i=Boolean(this.getDependencyForSourceAndTargetEvents(t,n)),e.abrupt("return",o&&!i);case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Wie(o,n,r,a,u,"next",e)}function u(e){Wie(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e,t,n){return a.apply(this,arguments)})},{key:"getTaskById",value:function(e){var t=this.taskStore;return t&&t.getById(e)||null}},{key:"getSourceTask",value:function(e){var t=e instanceof ete?e.sourceId:e;return this.getTaskById(t)}},{key:"getTargetTask",value:function(e){var t=e instanceof ete?e.targetId:e;return this.getTaskById(t)}}],o=[{key:"defaultConfig",get:function(){return{modelClass:ete,loadPriority:300,syncPriority:500}}}],r&&Yie(n.prototype,r),o&&Yie(n,o),t}(D4(Bie(uH)));function Kie(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Zie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qie(e,t){return!t||"object"!==oae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eae(e,t,n){return(eae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tae(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tae(e){return(tae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rae(e,t)}function rae(e,t){return(rae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oae(e){return(oae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Xie._$name="DependencyStore";var iae=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},aae=Symbol("ResourceMixin"),uae=function(e){var t=function(e){function t(){return Zie(this,t),Qie(this,tae(t).apply(this,arguments))}var n,r,o;return nae(t,e),n=t,(r=[{key:aae,value:function(){}},{key:"leaveProject",value:function(){var e=this.getAssignmentStore();this.assigned.forEach((function(t){return e.remove(t)})),eae(tae(t.prototype),"leaveProject",this).call(this)}},{key:"assignments",get:function(){return Kie(this.assigned)}}])&&Jie(n.prototype,r),o&&Jie(n,o),t}(e);return iae([M8({type:"string"})],t.prototype,"name",void 0),iae([Z6({},R8)],t.prototype,"assigned",void 0),t},cae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return uae(Mte(t9(c9(z9(q6(e))))))},sae=function(e){function t(){return Zie(this,t),Qie(this,tae(t).apply(this,arguments))}return nae(t,e),t}(cae());function lae(e){return(lae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pae(e,t){return!t||"object"!==lae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hae(e){return(hae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yae(e,t){return(yae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gae=function(e){function t(){return fae(this,t),pae(this,hae(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yae(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[]}}],(r=[{key:"tasks",get:function(){return this.events}}])&&dae(n.prototype,r),o&&dae(n,o),t}(D4(cae(jN)));function vae(e){return(vae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wae(e,t){return!t||"object"!==vae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kae(e){return(kae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oae(e,t)}function Oae(e,t){return(Oae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}gae._$name="ResourceModel";var Eae=function(e){var t=function(e){function t(){return mae(this,t),wae(this,kae(t).apply(this,arguments))}var n,r,o;return Sae(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:sae}}}],(r=null)&&bae(n.prototype,r),o&&bae(n,o),t}(e);return t},Cae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ed;return Eae(G8(c9(Koe(e))))},xae=function(e){function t(){return mae(this,t),wae(this,kae(t).apply(this,arguments))}return Sae(t,e),t}(Cae());function _ae(e){return(_ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rae(e,t){return!t||"object"!==_ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pae(e){return(Pae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tae(e,t){return(Tae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Aae=function(e){function t(){return jae(this,t),Rae(this,Pae(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tae(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:gae,loadPriority:400,syncPriority:200,storeId:"resources"}}}],(r=null)&&Dae(n.prototype,r),o&&Dae(n,o),t}(D4(Cae(FN)));function Mae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fae(e,t){return!t||"object"!==Bae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lae(e){return(Lae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hae(e,t)}function Hae(e,t){return(Hae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bae(e){return(Bae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Aae._$name="ResourceStore";var zae=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Bae(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Vae=Symbol("AssignmentMixin"),Wae=function(e){var t=function(e){function t(){return Mae(this,t),Fae(this,Lae(t).apply(this,arguments))}var n,r,o;return Nae(t,e),n=t,(r=[{key:Vae,value:function(){}},{key:"getUnits",value:function(){return this.units}},{key:"setUnits",value:function(e){return this.event.setAssignmentUnits(this,e)}},{key:"calculateUnits",value:regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$.event;case 2:if(!(n=e.sent)){e.next=6;break}return e.delegateYield(n.calculateAssignmentUnits(this,t),"t0",5);case 5:return e.abrupt("return",e.t0);case 6:return e.abrupt("return",void 0!==t?t:this.$.units.getConsistentValue());case 7:case"end":return e.stop()}}),e,this)}))}])&&Iae(n.prototype,r),o&&Iae(n,o),t}(e);return zae([M8({type:"number",defaultValue:100})],t.prototype,"units",void 0),zae([Z6({bucket:"assigned",resolver:function(e){return this.getEventById(e)},modelFieldConfig:{serialize:function(e){return e.id}}},D8)],t.prototype,"event",void 0),zae([Z6({bucket:"assigned",resolver:function(e){return this.getResourceById(e)},modelFieldConfig:{serialize:function(e){return e.id}}},D8)],t.prototype,"resource",void 0),zae([Q6("units")],t.prototype,"calculateUnits",null),t},$ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return Wae(t9(c9(z9(q6(e)))))},Yae=function(e){function t(){return Mae(this,t),Fae(this,Lae(t).apply(this,arguments))}return Nae(t,e),t}($ae());function Gae(e){return(Gae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xae(e,t){return!t||"object"!==Gae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kae(e){return(Kae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zae(e,t){return(Zae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jae=function(e){function t(){return Uae(this,t),Xae(this,Kae(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zae(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[]}}],(r=[{key:"toString",value:function(){return this.resource.name+" "+this.units+"%"}},{key:"units",get:function(){return Math.max(0,this.get("units"))},set:function(e){if(e<0)throw new Error("`Units` value for an assignment can't be less than 0");this.set("units",e)}},{key:"task",get:function(){return this.event},set:function(e){this.event=e}},{key:"taskName",get:function(){return this.task&&this.task.name||""}},{key:"eventId",get:function(){return this.event.id}},{key:"resourceId",get:function(){return this.resource.id}}])&&qae(n.prototype,r),o&&qae(n,o),t}(D4($ae(BM)));function Qae(e){return(Qae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nue(e,t){return!t||"object"!==Qae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rue(e){return(rue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iue(e,t)}function iue(e,t){return(iue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Jae._$name="AssignmentModel";var aue=function(e){var t=function(e){function t(){return eue(this,t),nue(this,rue(t).apply(this,arguments))}var n,r,o;return oue(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:Yae}}}],(r=null)&&tue(n.prototype,r),o&&tue(n,o),t}(e);return t},uue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ed;return aue(G8(c9(Koe(e))))},cue=function(e){function t(){return eue(this,t),nue(this,rue(t).apply(this,arguments))}return oue(t,e),t}(uue());function sue(e){return(sue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function due(e,t){return!t||"object"!==sue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pue(e){return(pue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hue(e,t){return(hue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yue=function(e){function t(){return lue(this,t),due(this,pue(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hue(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:Jae,loadPriority:500,syncPriority:400,storeId:"assignments"}}}],(r=[{key:"mapAssignmentsForTask",value:function(e,t,n){return this.mapAssignmentsForEvent(e,t,n)}},{key:"getAssignmentsForTask",value:function(e){return this.getAssignmentsForEvent(e)}},{key:"removeAssignmentsForTask",value:function(e){return this.removeAssignmentsForEvent(e)}},{key:"getResourcesForTask",value:function(e){return this.getResourcesForEvent(e)}},{key:"getTasksForResource",value:function(e){return this.getEventsForResource(e)}},{key:"assignTaskToResource",value:function(e,t,n){return this.assignEventToResource(e,t,(function(e){return e.units=n,e}))}},{key:"unassignTaskFromResource",value:function(e,t){return this.unassignEventFromResource(e,t)}},{key:"isTaskAssignedToResource",value:function(e,t,n){return this.isEventAssignedToResource(e,t,n)}},{key:"getAssignmentForTaskAndResource",value:function(e,t){return this.getAssignmentForEventAndResource(e,t)}}])&&fue(n.prototype,r),o&&fue(n,o),t}(D4(uue(UL)));function gue(e){return(gue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bue(e,t){return!t||"object"!==gue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wue(e){return(wue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sue(e,t)}function Sue(e,t){return(Sue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yue._$name="AssignmentStore";var Oue=function(e){return function(e){function t(){return vue(this,t),bue(this,wue(t).apply(this,arguments))}var n,r,o;return kue(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{tree:!0,modelClass:C7}}}],(r=null)&&mue(n.prototype,r),o&&mue(n,o),t}(e)},Eue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ed;return Oue(G8(c9(Koe(e))))},Cue=function(e){function t(){return vue(this,t),bue(this,wue(t).apply(this,arguments))}return kue(t,e),t}(Eue());function xue(e){return(xue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Due(e,t){return!t||"object"!==xue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rue(e){return(Rue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pue(e,t){return(Pue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tue=function(e){function t(){return _ue(this,t),Due(this,Rue(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pue(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{tree:!0,modelClass:T7,loadPriority:100,syncPriority:100,storeId:"calendars"}}}],(r=null)&&jue(n.prototype,r),o&&jue(n,o),t}(D4(Eue(hd)));function Aue(e){return(Aue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fue(e,t){return!t||"object"!==Aue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lue(e){return(Lue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nue(e,t){return(Nue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Tue._$name="CalendarManagerStore";var Hue=function(e){function t(){var e;return Mue(this,t),(e=Fue(this,Lue(t).apply(this,arguments))).entities=new Map,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nue(e,t)}(t,e),n=t,(r=[{key:"hasEntity",value:function(e){return this.entities.has(e)}},{key:"getEntity",value:function(e){return this.entities.get(e)}},{key:"addEntity",value:function(e){var t=e.name;if(!t)throw new Error("Entity must have a name");if(this.hasEntity(t))throw new Error("Entity with name [".concat(String(t),"] already exists"));return e.schema=this,this.entities.set(t,e),e}},{key:"getEntityDecorator",value:function(){var e=this;return function(t){var n=t.name;if(!n)throw new Error("Can't add entity - the target class has no name");var r=K6(t.prototype);if(r.name&&r.name!=n)throw new Error("Invalid state");return r.name=n,e.addEntity(r),t}}}])&&Iue(n.prototype,r),o&&Iue(n,o),t}(P4);function Bue(e){return(Bue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zue(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Vue(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){zue(i,r,o,a,u,"next",e)}function u(e){zue(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Wue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yue(e,t){return!t||"object"!==Bue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gue(e,t,n){return(Gue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uue(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Uue(e){return(Uue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function que(e,t){return(que=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xue=function(e){return function(e){function t(){var e;return Wue(this,t),(e=Yue(this,Uue(t).apply(this,arguments))).projectRefreshThreshold=500,e}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&que(e,t)}(t,e),n=t,(r=[{key:"propagate",value:(a=Vue(regeneratorRuntime.mark((function e(n){var r,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]&&a[1],o=this.project,this.isPropagating){e.next=10;break}return o.trigger("propagationStart",{dryRun:!!r}),e.next=6,Gue(Uue(t.prototype),"propagate",this).call(this,n,r);case 6:i=e.sent,o.trigger("propagationComplete",{dryRun:!!r,result:i}),e.next=13;break;case 10:return e.next=12,Gue(Uue(t.prototype),"propagate",this).call(this,n,r);case 12:i=e.sent;case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"commit",value:function(){var e=this.project,n=this.changedAtoms,r=new Set(n.map((function(e){return e.self})));r.forEach((function(e){return e.beginBatch()})),e.trigger("beforeCommit",{records:r,changedAtoms:n}),Gue(Uue(t.prototype),"commit",this).call(this),e.trigger("commit",{records:r,changedAtoms:n});var o=r.size>this.projectRefreshThreshold;r.forEach((function(e){return e.endBatch(o)})),o&&e.trigger("refresh",{records:r})}},{key:"onEffect",value:(i=Vue(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.project,!(n instanceof Vte)){e.next=9;break}if(!r.hasListener("schedulingconflict")){e.next=6;break}return e.abrupt("return",new Promise((function(e,t){r.trigger("schedulingconflict",{conflict:n,continueWithResolutionResult:e})})));case 6:return e.abrupt("return",Promise.resolve(N4.Resume));case 7:e.next=10;break;case 9:return e.abrupt("return",Gue(Uue(t.prototype),"onEffect",this).call(this,n));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})}])&&$ue(n.prototype,r),o&&$ue(n,o),t}(e)};function Kue(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Zue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Que(e,t){return!t||"object"!==rce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ece(e,t,n){return(ece="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tce(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tce(e){return(tce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nce(e,t){return(nce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rce(e){return(rce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var oce=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":rce(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ice=function(e){var t=function(e){function t(){return Zue(this,t),Que(this,tce(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nce(e,t)}(t,e),n=t,(r=[{key:"construct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.replica=Xue(N6).new({project:this,schema:Hue.new()}),e.hasOwnProperty("expanded")||(e.expanded=!0);var n=Boolean(e.calendarManagerStore||e.eventStore||e.dependencyStore||e.resourceStore||e.assignmentStore);ece(tce(t.prototype),"construct",this).call(this,e),this.eventModelClass||(this.eventModelClass=this.getDefaultEventModelClass()),this.eventStoreClass||(this.eventStoreClass=this.getDefaultEventStoreClass()),this.dependencyModelClass||(this.dependencyModelClass=this.getDefaultDependencyModelClass()),this.dependencyStoreClass||(this.dependencyStoreClass=this.getDefaultDependencyStoreClass()),this.resourceModelClass||(this.resourceModelClass=this.getDefaultResourceModelClass()),this.resourceStoreClass||(this.resourceStoreClass=this.getDefaultResourceStoreClass()),this.assignmentModelClass||(this.assignmentModelClass=this.getDefaultAssignmentModelClass()),this.assignmentStoreClass||(this.assignmentStoreClass=this.getDefaultAssignmentStoreClass()),this.calendarModelClass||(this.calendarModelClass=this.getDefaultCalendarModelClass()),this.calendarManagerStoreClass||(this.calendarManagerStoreClass=this.getDefaultCalendarManagerStoreClass()),this.replica.addEntity(this),this.stm=new Cb({disabled:!0}),this.calendarManagerStore?this.setCalendarManagerStore(this.calendarManagerStore):this.calendarManagerStore=new this.calendarManagerStoreClass({modelClass:this.calendarModelClass,idField:"id",project:this,stm:this.stm}),this.defaultCalendar=new this.calendarManagerStore.modelClass({hoursPerDay:24,daysPerWeek:7,daysPerMonth:30,unspecifiedTimeIsWorking:this.unspecifiedTimeIsWorking}),this.defaultCalendar.project=this,this.eventStore?this.setEventStore(this.eventStore):this.eventStore=new this.eventStoreClass({modelClass:this.eventModelClass,tree:!0,idField:"id",project:this,stm:this.stm}),this.dependencyStore?this.setDependencyStore(this.dependencyStore):this.dependencyStore=new this.dependencyStoreClass({modelClass:this.dependencyModelClass,idField:"id",project:this,stm:this.stm}),this.resourceStore?this.setResourceStore(this.resourceStore):this.resourceStore=new this.resourceStoreClass({modelClass:this.resourceModelClass,idField:"id",project:this,stm:this.stm}),this.assignmentStore?this.setAssignmentStore(this.assignmentStore):this.assignmentStore=new this.assignmentStoreClass({modelClass:this.assignmentModelClass,idField:"id",project:this,stm:this.stm});var r=Boolean(this.calendarsData||this.eventsData||this.dependenciesData||this.resourcesData||this.assignmentsData);r&&(this.loadInlineData({calendarsData:this.calendarsData,eventsData:this.eventsData,dependenciesData:this.dependenciesData,resourcesData:this.resourcesData,assignmentsData:this.assignmentsData}),delete this.calendarsData,delete this.eventsData,delete this.dependenciesData,delete this.resourcesData,delete this.assignmentsData),n&&!r&&this.propagate()}},{key:"getType",value:function(){return u2.Unknown}},{key:"getDefaultEventModelClass",value:function(){return $oe}},{key:"getDefaultEventStoreClass",value:function(){return aie}},{key:"getDefaultDependencyModelClass",value:function(){return Yee}},{key:"getDefaultDependencyStoreClass",value:function(){return zie}},{key:"getDefaultResourceModelClass",value:function(){return sae}},{key:"getDefaultResourceStoreClass",value:function(){return xae}},{key:"getDefaultAssignmentModelClass",value:function(){return Yae}},{key:"getDefaultAssignmentStoreClass",value:function(){return cue}},{key:"getDefaultCalendarModelClass",value:function(){return C7}},{key:"getDefaultCalendarManagerStoreClass",value:function(){return Cue}},{key:"loadInlineData",value:function(e){return e.calendarsData&&(this.calendarManagerStore.data=e.calendarsData),e.eventsData&&(this.eventStore.data=e.eventsData),e.dependenciesData&&(this.dependencyStore.data=e.dependenciesData),e.resourcesData&&(this.resourceStore.data=e.resourcesData),e.assignmentsData&&(this.assignmentStore.data=e.assignmentsData),this.propagate()}},{key:"getGraph",value:function(){return this.replica}},{key:"getStm",value:function(){return this.stm}},{key:"calculateProject",value:function(){return this}},{key:"calculateCalendar",value:regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ece(tce(t.prototype),"calculateCalendar",this).call(this,n),"t0",1);case 1:if(r=e.t0){e.next=6;break}return r=this.defaultCalendar,e.next=6,r.$$;case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))},{key:"joinStoreRecords",value:function(e){var t=this,n=function(e){e.setProject(t),e.joinProject()};e.rootNode?e.rootNode.traverse(n):e.forEach(n)}},{key:"setEventStore",value:function(e){this.eventStore&&this.stm.hasStore(this.eventStore)&&this.stm.removeStore(this.eventStore),this.eventStore=e,e&&(e.setProject(this),this.stm.addStore(e),e.rootNode!==this&&(this.appendChild(e.rootNode.children||[]),e.rootNode=this),this.joinStoreRecords(e))}},{key:"setDependencyStore",value:function(e){this.dependencyStore&&this.stm.hasStore(this.dependencyStore)&&this.stm.removeStore(this.dependencyStore),this.dependencyStore=e,e&&(e.setProject(this),this.stm.addStore(e),this.joinStoreRecords(e))}},{key:"setResourceStore",value:function(e){this.resourceStore&&this.stm.hasStore(this.resourceStore)&&this.stm.removeStore(this.resourceStore),this.resourceStore=e,e&&(e.setProject(this),this.stm.addStore(e),this.joinStoreRecords(e))}},{key:"setAssignmentStore",value:function(e){this.assignmentStore&&this.stm.hasStore(this.assignmentStore)&&this.stm.removeStore(this.assignmentStore),this.assignmentStore=e,e&&(e.setProject(this),this.stm.addStore(e),this.joinStoreRecords(e))}},{key:"setCalendarManagerStore",value:function(e){this.calendarManagerStore&&this.stm.hasStore(this.calendarManagerStore)&&this.stm.removeStore(this.calendarManagerStore),this.calendarManagerStore=e,e&&(e.setProject(this),this.stm.addStore(e),this.joinStoreRecords(e))}},{key:"tryPropagateWithChanges",value:(i=regeneratorRuntime.mark((function e(t,n){var r,o,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.stm,a=function(){r.stopTransaction(),o&&r.resetQueue()},u=function(){r.transaction.length?(r.forEachStore((function(e){return e.beginBatch()})),r.rejectTransaction(),r.forEachStore((function(e){return e.endBatch()}))):r.stopTransaction()},c=function(){r.disabled=o,r.autoRecord=i},o=r.disabled,i=r.autoRecord,o?r.enable():(i&&(r.autoRecord=!1),r.isRecording&&r.stopTransaction()),r.startTransaction(),this.suspendPropagate(),t(),this.resumePropagate(!1),e.next=12,this.propagate(n||function(e){var t;return e instanceof V4&&(t=N4.Cancel),t});case 12:return(s=e.sent)===N5.Canceled?u():a(),c(),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Kue(o,n,r,a,u,"next",e)}function u(e){Kue(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e,t){return a.apply(this,arguments)})}])&&Jue(n.prototype,r),o&&Jue(n,o),t}(e);return oce([M8({type:"boolean",defaultValue:!0})],t.prototype,"unspecifiedTimeIsWorking",void 0),oce([M8({type:"string",defaultValue:a2.ToEvent})],t.prototype,"dependenciesCalendar",void 0),oce([M8({type:"boolean",defaultValue:!0})],t.prototype,"autoCalculatePercentDoneForParentTasks",void 0),t},ace=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return ice(Zne(are(yne(xne(Mte(t9(c9(z9(q6(ae(e)))))))))))};function uce(e){return(uce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lce(e,t){return!t||"object"!==uce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fce(e){return(fce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pce(e,t)}function pce(e,t){return(pce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hce=function(e){var t=function(e){function t(){return cce(this,t),lce(this,fce(t).apply(this,arguments))}var n,r,o;return dce(t,e),n=t,(r=[{key:"getType",value:function(){return u2.Scheduler}},{key:"calculateStartDateInitial",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.startDate);case 1:case"end":return e.stop()}}),e,this)}))},{key:"calculateEndDateInitial",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.endDate);case 1:case"end":return e.stop()}}),e,this)}))},{key:"calculateStartDate",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.calculateMinChildrenStartDate(),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e,this)}))},{key:"calculateEndDate",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.calculateMaxChildrenEndDate(),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateEarlyEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateLateStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateLateEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"getDefaultEventModelClass",value:function(){return Tre}}])&&sce(n.prototype,r),o&&sce(n,o),t}(e);return t},yce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return hce(ace(e))};yce();function gce(e){return(gce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bce(e,t){return!t||"object"!==gce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wce(e,t,n){return(wce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kce(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kce(e){return(kce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sce(e,t){return(Sce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oce=function(e){function t(){return vce(this,t),bce(this,kce(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sce(e,t)}(t,e),n=t,o=[{key:"defaults",get:function(){return{expanded:!0}}},{key:"defaultConfig",get:function(){return{eventModelClass:null,taskModelClass:Vre,dependencyModelClass:ete,resourceModelClass:gae,assignmentModelClass:Jae,calendarModelClass:T7,eventStoreClass:null,taskStoreClass:yie,dependencyStoreClass:Xie,resourceStoreClass:Aae,assignmentStoreClass:yue,calendarManagerStoreClass:Tue,eventsData:null,tasksData:null,dependenciesData:null,resourcesData:null,assignmentsData:null,calendarsData:null,timeRangeStore:null,convertEmptyParentToLeaf:!1}}}],(r=[{key:"construct",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=r[0]||{};r[0]=i,"tasksData"in i&&(i.eventsData=i.tasksData,delete i.tasksData),"taskStore"in i&&(i.eventStore=i.taskStore,delete i.taskStore),i.eventModelClass=i.taskModelClass||i.eventModelClass||this.defaultEventModelClass,i.eventStoreClass=i.taskStoreClass||i.eventStoreClass||this.defaultEventStoreClass,i.timeRangeStore||(i.timeRangeStore={modelClass:bF,storeId:"timeRanges"}),(e=wce(kce(t.prototype),"construct",this)).call.apply(e,[this].concat(r))}},{key:"defaultEventModelClass",get:function(){return Vre}},{key:"defaultEventStoreClass",get:function(){return yie}},{key:"taskStore",get:function(){return this.getEventStore()}},{key:"timeRangeStore",get:function(){return this._timeRangeStore},set:function(e){this._timeRangeStore=e&&ed.getStore(e,ed),e&&!this._timeRangeStore.storeId&&(this._timeRangeStore.storeId="timeRanges")}}])&&mce(n.prototype,r),o&&mce(n,o),t}(z7(yce(qs)));function Ece(e){return(Ece="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _ce(e,t){return!t||"object"!==Ece(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jce(e,t,n){return(jce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dce(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Dce(e){return(Dce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rce(e,t){return(Rce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Oce.applyConfigs=!0,Oce._$name="ProProjectModel";var Pce=function(e){return function(e){function t(){return Cce(this,t),_ce(this,Dce(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rce(e,t)}(t,e),n=t,(r=[{key:"onBeforeAssignmentRemove",value:function(e){e.doRemoveLastEvent=!1,jce(Dce(t.prototype),"onBeforeAssignmentRemove",this).call(this,e)}},{key:"project",get:function(){return this._project},set:function(e){Object.assign(this,{_project:e,store:this.resourcesStore,resourceStore:e.getResourceStore(),eventStore:e.getEventStore(),assignmentStore:e.getAssignmentStore(),dependencyStore:e.getDependencyStore(),taskStore:e.getEventStore()})}},{key:"widgetClass",get:function(){}}])&&xce(n.prototype,r),o&&xce(n,o),t}(e||Y)};function Tce(e){return(Tce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ace(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ice(e,t){return!t||"object"!==Tce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fce(e,t,n){return(Fce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lce(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Lce(e){return(Lce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nce(e,t){return(Nce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hce=function(e){return function(e){function t(){return Ace(this,t),Ice(this,Lce(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nce(e,t)}(t,e),n=t,(r=[{key:"getProject",value:function(){if(!Fce(Lce(t.prototype),"getProject",this))throw new Error("Abstract method call!");return Fce(Lce(t.prototype),"getProject",this).call(this)}},{key:"captureStm",value:function(){var e=this,t=e.getProject().getStm();e.stmInitiallyDisabled=t.disabled,e.stmInitiallyAutoRecord=t.autoRecord,e.stmInitiallyDisabled?t.enable():(e.stmInitiallyAutoRecord&&(t.autoRecord=!1),t.isRecording&&t.stopTransaction())}},{key:"startStmTransaction",value:function(){this.getProject().getStm().startTransaction()}},{key:"commitStmTransaction",value:function(){var e=this.getProject().getStm();e.stopTransaction(),this.stmInitiallyDisabled&&e.resetQueue()}},{key:"rejectStmTransaction",value:function(){var e=this.getProject().getStm(),t=this.client;e.transaction.length?(t.suspendRefresh(),e.forEachStore((function(e){return e.beginBatch()})),e.rejectTransaction(),e.forEachStore((function(e){return e.endBatch()})),t.resumeRefresh(!0)):e.stopTransaction()}},{key:"enableStm",value:function(){this.getProject().getStm().enable()}},{key:"disableStm",value:function(){this.getProject().getStm().disable()}},{key:"freeStm",value:function(){var e=this.getProject().getStm();e.disabled=this.stmInitiallyDisabled,e.autoRecord=this.stmInitiallyAutoRecord}}])&&Mce(n.prototype,r),o&&Mce(n,o),t}(e||Y)};function Bce(e){return(Bce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wce(e,t){return!t||"object"!==Bce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $ce(e){return($ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yce(e,t){return(Yce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gce=function(e){function t(){return zce(this,t),Wce(this,$ce(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yce(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"SchedulerTaskEditor"}},{key:"defaultConfig",get:function(){return{items:[{type:"tabpanel",ref:"tabs",flex:"1 0 100%",layoutConfig:{alignItems:"stretch",alignContent:"stretch"}}],defaultTabs:[{type:"schedulergeneraltab"},{type:"successorstab"},{type:"predecessorstab"},{type:"resourcestab"},{type:"notestab"}]}}}],(r=null)&&Vce(n.prototype,r),o&&Vce(n,o),t}(a4);function Uce(e){return(Uce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qce(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Xce(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){qce(i,r,o,a,u,"next",e)}function u(e){qce(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Kce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qce(e,t){return!t||"object"!==Uce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ese(e,t,n){return(ese="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tse(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tse(e){return(tse=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nse(e,t){return(nse=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Gce._$name="SchedulerTaskEditor";var rse=function(e){function t(){return Zce(this,t),Qce(this,tse(t).apply(this,arguments))}var n,r,o,i,a,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nse(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e,n){var r,o=this;e.taskEdit=o,ese(tse(t.prototype),"construct",this).call(this,e,n),o._clientListenersDetacher=e.on((Kce(r={},o.triggerEvent,o.onActivateEditor),Kce(r,"thisObj",o),r))}},{key:"getProject",value:function(){return this.scheduler.project}},{key:"doDestroy",value:function(){this._clientListenersDetacher(),this.detachFromProject(),this.editor&&this.editor.destroy(),ese(tse(t.prototype),"doDestroy",this).call(this)}},{key:"onActivateEditor",value:function(e){var t=e.eventRecord,n=e.resourceRecord;this.editEvent(t,n)}},{key:"getElementFromTaskRecord",value:function(e,t){return this.client.getElementFromEventRecord(e,t)}},{key:"editEvent",value:(c=Xce(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:null,r=l.length>2&&void 0!==l[2]?l[2]:null,(i=(o=this).scheduler).readOnly||o.disabled){e.next=40;break}if(!(a=o.client.partner)||!a.editEvent&&!a.editTask){e.next=9;break}(a.editEvent||a.editTask)(t,n,r),e.next=40;break;case 9:if(u=!r,o._editing=!0,o.captureStm(),o.startStmTransaction(),o.schedulerAutoCommit=i.taskStore.autoCommit,i.taskStore.autoCommit=!1,o.schedulerAutoSync=i.project.autoSync,i.project.autoSync=!1,"function"==typeof t&&(t=t()),!u||!i.taskStore.includes(t)){e.next=21;break}return e.next=21,o.scrollEventIntoView(t,n);case 21:if(c=r||xn.down(o.getElementFromTaskRecord(t,n),i.eventInnerSelector),s=o.getEditor(t),!1===i.trigger("beforeTaskEdit",{taskEdit:o,taskRecord:t,taskElement:c})){e.next=36;break}if(i.element.classList.add("b-taskeditor-editing"),i.trigger("beforeTaskEditShow",{taskEdit:o,taskRecord:t,taskElement:c,editor:s}),o.load(t),o.attachToProject(),!c){e.next=32;break}return e.next=30,s.showBy({target:c,anchor:!0,offset:-5});case 30:e.next=34;break;case 32:return e.next=34,s.showBy({target:i.element,anchor:!1,align:"c-c"});case 34:e.next=40;break;case 36:o.rejectStmTransaction(),o.disableStm(),o.freeStm(),o._editing=!1;case 40:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.record,t=this,n=e&&e.getProject()||this.getProject(),r=n.getType(),o=t.editorClass||t.editorClassMap[r]||t.editorClassMap[u2.Unknown]||Gce;return t.editor&&t.editor.constructor===o||(t.editor&&t.editor.destroy(),t.editor=new o(Mt.merge({showDeleteButton:t.showDeleteButton,owner:t.client,project:t.getProject(),durationDisplayPrecision:t.client.durationDisplayPrecision,tabsConfig:t.tabsConfig,listeners:{cancel:t.onCancel,delete:t.onDelete,save:t.onSave,beforehide:t.onBeforeHide,requestPropagation:t.onRequestPropagation,thisObj:t}},t.editorConfig))),t.editor}},{key:"load",value:function(e){var t=this.getEditor(e);this._loading=!0,this.record=e,t.loadEvent(e),this._loading=!1}},{key:"save",value:(u=Xce(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this).scheduler,!t._editing){e.next=20;break}if(r=t.getEditor(),t.isValid&&!1!==n.trigger("beforeTaskSave",{taskRecord:t.record,editor:r})){e.next=5;break}return e.abrupt("return");case 5:if(!(o=t.getProject()).isPropagating()){e.next=9;break}return e.next=9,o.waitForPropagateCompleted();case 9:r.beforeSave(),t.commitStmTransaction(),t.freeStm(),r.hide().then((function(){return r.afterSave()})),t.detachFromProject(),n.taskStore.autoCommit=t.schedulerAutoCommit,n.taskStore.autoCommit&&n.taskStore.commit(),n.project.autoSync=t.schedulerAutoSync,n.project.autoSync&&n.project.sync(),n.element.classList.remove("b-taskeditor-editing"),t._editing=!1;case 20:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"cancel",value:(a=Xce(regeneratorRuntime.mark((function e(){var t,n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this).scheduler,!t._editing){e.next=25;break}if(t._canceling=!0,r=t.record,!(o=t.getProject()).isPropagating()){e.next=8;break}return e.next=8,o.waitForPropagateCompleted();case 8:return(i=t.getEditor()).beforeCancel(),e.next=12,i.hide();case 12:return t.rejectStmTransaction(),t.disableStm(),e.next=16,o.propagate();case 16:t.freeStm(),t.detachFromProject(),i.afterCancel(),n.taskStore.autoCommit=t.schedulerAutoCommit,n.project.autoSync=t.schedulerAutoSync,t.scheduler.element.classList.remove("b-taskeditor-editing"),t._canceling=!1,t._editing=!1,n.trigger("taskEditCanceled",{taskRecord:r,editor:i});case 25:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"delete",value:(i=Xce(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this).getEditor(),!1!==t.scheduler.trigger("beforeTaskDelete",{taskRecord:t.record,editor:n})){e.next=3;break}return e.abrupt("return");case 3:if(!(r=t.getProject()).isPropagating()){e.next=7;break}return e.next=7,r.waitForPropagateCompleted();case 7:return t.detachFromProject(),n.beforeDelete(),t.record.remove(),t.freeStm(),e.next=13,r.propagate();case 13:n.hide(),n.afterDelete(),t.scheduler.element.classList.remove("b-taskeditor-editing"),t._editing=!1;case 17:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"onSave",value:function(){var e=this;this.requestAnimationFrame((function(){return e.save()}))}},{key:"onCancel",value:function(){var e=this;this.requestAnimationFrame((function(){return e.cancel()}))}},{key:"onDelete",value:function(){var e=this;this.requestAnimationFrame((function(){return e.delete()}))}},{key:"onRequestPropagation",value:function(){var e=this.getProject();this.requestAnimationFrame((function(){e.isPropagating()||e.propagate()}))}},{key:"onBeforeHide",value:function(){var e=this.editor.items[0].widgetMap.resourcestab;e&&e.pruneInvalidAssignments()}},{key:"attachToProject",value:function(){var e=this,t=e.getProject();e._projectEventDetacher=t.on({propagationStart:e.onPropagationStart,propagationComplete:e.onPropagationComplete,thisObj:e,detachable:!0})}},{key:"detachFromProject",value:function(){this._projectEventDetacher&&(this._projectEventDetacher(),this._projectEventDetacher=null)}},{key:"onPropagationStart",value:function(){this.getEditor().mask("Calculating…")}},{key:"onPropagationComplete",value:function(e){var t=e.dryRun,n=this.getEditor();!t&&!this._canceling&&this.load(this.record),n.unmask()}},{key:"getEventMenuItems",value:function(e){var t=this,n=e.eventRecord,r=e.resourceRecord,o=e.items;this.scheduler.readOnly||(o.editEvent={text:this.L("Edit event"),icon:"b-icon b-icon-edit",weight:-200,disabled:this.disabled,onItem:function(){return t.editEvent(n,r)}})}},{key:"onEnterKey",value:function(e){var t=e.assignmentRecord,n=e.eventRecord;t?this.editEvent(n,t.resource):n&&this.editEvent(n,n.resource)}},{key:"scrollEventIntoView",value:function(e,t){this.client.scrollResourceEventIntoView(t,e)}},{key:"scheduler",get:function(){return this.client}},{key:"isEditing",get:function(){return!!this._editing}},{key:"isValid",get:function(){return this.editor.eachWidget((function(e){return!!(!0===e.isValid||e.hidden||e.disabled||e instanceof Ic&&!e.name)||!1!==e.isValid}),!0)}}],o=[{key:"pluginConfig",get:function(){return{chain:["getEventMenuItems","onEnterKey"],assign:["editEvent"]}}},{key:"defaultConfig",get:function(){var e;return{triggerEvent:"eventdblclick",editorClassMap:(e={},Kce(e,u2.Unknown,Gce),Kce(e,u2.Gantt,p4),Kce(e,u2.Scheduler,Gce),e),editorClass:null,editorConfig:null,showDeleteButton:!0,saveAndCloseOnEnter:!0,tabsConfig:null}}}],r&&Jce(n.prototype,r),o&&Jce(n,o),t}(Xs(es).mixes(Wr,Hce));rse._$name="ProTaskEdit",nC.registerFeature(rse,!0,"ProScheduler","EventEdit");var ose={SchedulerProCommon:{SS:"SS",SF:"SF",FS:"FS",FF:"FF",StartToStart:"Start-to-Start",StartToEnd:"Start-to-End",EndToStart:"End-to-Start",EndToEnd:"End-to-End",dependencyTypes:["SS","SF","FS","FF"],dependencyTypesLong:["Start-to-Start","Start-to-End","End-to-Start","End-to-End"]},ConstraintTypePicker:{muststarton:"Must start on",mustfinishon:"Must finish on",startnoearlierthan:"Start no earlier than",startnolaterthan:"Start no later than",finishnoearlierthan:"Finish no earlier than",finishnolaterthan:"Finish no later than"},ProTaskEdit:{"Edit event":"Edit event"},TaskEditorBase:{editorWidth:"45em",Information:"Information",Save:"Save",Cancel:"Cancel",Delete:"Delete"},SchedulerGeneralTab:{labelWidth:"11.5em",General:"General",Name:"Name","% complete":"% complete",Duration:"Duration",Start:"Start",Finish:"Finish",Effort:"Effort",Dates:"Dates","Manually scheduled":"Manually scheduled",Calendar:"Calendar"},GeneralTab:{labelWidth:"6.5em",General:"General",Name:"Name","% complete":"% complete",Duration:"Duration",Start:"Start",Finish:"Finish",Effort:"Effort",Dates:"Dates"},AdvancedTab:{labelWidth:"11.5em",Advanced:"Advanced",Calendar:"Calendar","Scheduling mode":"Scheduling mode","Effort driven":"Effort driven","Manually scheduled":"Manually scheduled","Constraint type":"Constraint type","Constraint date":"Constraint date",Constraint:"Constraint",Rollup:"Rollup"},DependencyTab:{Predecessors:"Predecessors",Successors:"Successors",ID:"ID",Name:"Name",Type:"Type",Lag:"Lag","Cyclic dependency has been detected":"Cyclic dependency has been detected"},ResourcesTab:{unitsTpl:function(e){var t=e.value;return"".concat(t,"%")},Resources:"Resources",Resource:"Resource",Units:"Units"},NotesTab:{Notes:"Notes"},SchedulingModePicker:{Normal:"Normal","Fixed Duration":"Fixed Duration","Fixed Units":"Fixed Units","Fixed Effort":"Fixed Effort"}};for(var ise in rK)ose[ise]=rK[ise];var ase=ose;function use(e){return(use="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cse(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function sse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fse(e,t){return!t||"object"!==use(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dse(e,t,n){return(dse="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pse(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pse(e){return(pse=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hse(e,t){return(hse=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Te.registerLocale("En",{desc:"English",locale:ose});var yse=function(e){function t(){return sse(this,t),fse(this,pse(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hse(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e){var n=Boolean(e.calendars||e.taskStore||e.dependencyStore||e.resourceStore||e.assignmentStore),r=Boolean(e.calendars||e.tasks||e.dependencies||e.resources||e.assignments),o=e.project;if(o&&(n||r))throw new Error("Providing both project and inline data is not supported");o||(o=e.project=new Oce({calendarsData:e.calendars,eventsData:e.tasks,dependenciesData:e.dependencies,resourcesData:e.resources,assignmentsData:e.assignments,resourceStore:e.resourceStore,eventStore:e.taskStore,assignmentStore:e.assignmentStore,dependencyStore:e.dependencyStore,timeRangeStore:e.timeRangeStore}),delete e.resourceStore,delete e.taskStore,delete e.assignmentStore,delete e.dependencyStore,delete e.timeRangeStore,delete e.calendars,delete e.resources,delete e.tasks,delete e.assignments,delete e.dependencies),e.crudManager=o,o.on({refresh:this.onProjectRefresh,load:this.onProjectLoad,thisObj:this}),dse(pse(t.prototype),"construct",this).call(this,e)}},{key:"onProjectRefresh",value:function(){this.refreshRows();var e=this.features.dependencies;e&&this.dependencies.forEach((function(t){return e.addToGridCache(t)}))}},{key:"onProjectLoad",value:function(){"startDate"in this.initialConfig||!this.project.startDate||(this.startDate=this.project.startDate)}},{key:"getProjectForDataAPI",value:function(){return this.project}},{key:"removeRecords",value:(i=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this).readOnly||!t.length){e.next=11;break}if(!(t[0]instanceof Vre)){e.next=7;break}return e.next=5,n.dataApi.removeEvents(t);case 5:e.next=11;break;case 7:return r=t.map((function(e){return e.resource})),e.next=10,n.dataApi.removeAssignments(t,n.removeUnassignedEvent);case 10:r.forEach((function(e){return n.repaintEventsForResource(e)}));case 11:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){cse(o,n,r,a,u,"next",e)}function u(e){cse(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})}],o=[{key:"$name",get:function(){return"ProScheduler"}},{key:"type",get:function(){return"schedulerpro"}},{key:"defaultConfig",get:function(){return{project:null,durationDisplayPrecision:1,calendars:null,resources:null,tasks:null,dependencies:null,assignments:null,features:{dependencies:!0,eventEdit:!0}}}}],r&&lse(n.prototype,r),o&&lse(n,o),t}(Cee(Pce(xM(VQ))));function gse(e){return(gse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bse(e,t){return!t||"object"!==gse(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wse(e,t,n){return(wse="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kse(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kse(e){return(kse=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sse(e,t){return(Sse=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yse._$name="ProScheduler",se.register(yse.type,yse),F.setVersion(yse.type,F.getVersion("scheduler"));var Ose=function(e){function t(){return vse(this,t),bse(this,kse(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sse(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{recognizedSchedulingModes:["Normal"],convertEmptyParentToLeaf:!1}}},{key:"fields",get:function(){return[{name:"description",dataSource:"note",type:"string"},{name:"allowDependencies",type:"boolean",defaultValue:!1,persist:!1}]}}],(r=[{key:"isEditable",value:function(e){switch(e){case"name":case"startDate":case"readOnly":case"duration":case"durationUnit":case"description":case"allowDependencies":return wse(kse(t.prototype),"isEditable",this).call(this,e);case"endDate":return this.isManuallyScheduled&&wse(kse(t.prototype),"isEditable",this).call(this,e);default:return!1}}},{key:"indent",value:function(){}},{key:"outdent",value:function(){}},{key:"isSubProject",get:function(){return!0}}])&&mse(n.prototype,r),o&&mse(n,o),t}(Vre);function Ese(e){return(Ese="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xse(e,t){return!t||"object"!==Ese(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _se(e){return(_se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jse(e,t){return(jse=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ose._$name="ProSubProjectModel";var Dse=function(e){function t(){return Cse(this,t),xse(this,_se(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jse(e,t)}(t,e),t}(Vre);function Rse(e){return(Rse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ase(e,t){return!t||"object"!==Rse(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mse(e,t,n){return(Mse="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ise(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ise(e){return(Ise=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fse(e,t){return(Fse=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Dse._$name="ProTaskSegmentModel";var Lse=function(e){function t(){return Pse(this,t),Ase(this,Ise(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fse(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"addnew"}},{key:"defaults",get:function(){return{text:"New Column",cls:"b-new-column-column",draggable:!1,sortable:!1,exportable:!1,field:null,editor:null}}}],(r=[{key:"headerRenderer",value:function(e){var t=e.column,n=e.headerElement;if(!e.isExport){var r=t.columnCombo;r.render(n),r.picker.forElement=n}}},{key:"onKeyDown",value:function(e){"Enter"===e.key&&this.columnCombo.focus()}},{key:"updateLocalization",value:function(){this._columnCombo&&(this._columnCombo.destroy(),this._columnCombo=null),Mse(Ise(t.prototype),"updateLocalization",this).call(this)}},{key:"columnCombo",get:function(){var e=this,t=e.grid.columns;return e._columnCombo||(e._columnCombo=new jp({owner:e.grid,cls:"b-new-column-combo",placeholder:e.L("New Column"),triggers:!1,autoExpand:!0,store:e.ganttColumnStore,displayField:"text",monitorResize:!1,picker:{align:"t0-b0",minWidth:200,onItem:function(n){var r=new n.record.value({region:e.region},t);t.insert(t.indexOf(e),r),r.element.focus()}},syncInputFieldValue:function(){this.input.value=""},listeners:{keydown:function(e){e.event.stopImmediatePropagation()}}}))}},{key:"ganttColumnStore",get:function(){var e=this;return new ed({data:Object.values(rO.columnTypes).reduce((function(e,t){return t.propertiesExposedForData||t.exposeProperties({}),t.isGanttColumn&&t.text&&e.push({id:t.type,text:t.L(t.text),value:t}),e}),[]),filters:[function(t){return!e.grid.columns.some((function(e){return e.constructor===t.value}))}],sorters:[{field:"text"}]})}}])&&Tse(n.prototype,r),o&&Tse(n,o),t}(XS);function Nse(e){return(Nse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zse(e,t){return!t||"object"!==Nse(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vse(e,t,n){return(Vse="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Yse(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Wse(e,t,n,r){return(Wse="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Yse(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function $se(e,t,n,r,o){if(!Wse(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function Yse(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gse(e)););return e}function Gse(e){return(Gse=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Use(e,t){return(Use=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Lse),Lse._$name="AddNewColumn";var qse=function(e){function t(){return Hse(this,t),zse(this,Gse(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Use(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"CalendarPicker"}},{key:"type",get:function(){return"calendarpicker"}}],(r=[{key:"refreshCalendars",value:function(e){this.store.data=e.map((function(e){return{id:e.id,text:e.name}}))}},{key:"store",get:function(){return this._store||(this.store=new ed),this._store},set:function(e){$se(Gse(t.prototype),"store",e,this,!0)}},{key:"value",get:function(){return Vse(Gse(t.prototype),"value",this)},set:function(e){e&&(e.isDefault&&e.isDefault()?e=null:e.id&&(e=e.id)),$se(Gse(t.prototype),"value",e,this,!0)}}])&&Bse(n.prototype,r),o&&Bse(n,o),t}(jp);function Xse(e){return(Xse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jse(e,t){return!t||"object"!==Xse(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qse(e,t,n){return(Qse="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ele(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ele(e){return(ele=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tle(e,t){return(tle=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}qse._$name="CalendarPicker",se.register(qse.type,qse);var nle=function(e){function t(){return Kse(this,t),Jse(this,ele(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tle(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"calendar"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"calendar",text:"Calendar",editor:{type:qse.type,clearable:!0,allowInvalid:!1}}}}],(r=[{key:"afterConstruct",value:function(){var e=this;Qse(ele(t.prototype),"afterConstruct",this).call(this);var n=e.grid.project;e.defaultCalendar=n.defaultCalendar,e.refreshCalendars(),n.calendarManagerStore.on({change:e.refreshCalendars,refresh:e.refreshCalendars,thisObj:e})}},{key:"refreshCalendars",value:function(){var e=this.grid.project;this.editor.refreshCalendars(e.calendarManagerStore.getRange())}},{key:"renderer",value:function(e){var t=e.value;if(t===this.defaultCalendar)return"";if(t&&t.id){var n=this.editor.store.getById(t.id);return n&&n[this.editor.displayField]||""}return""}}])&&Zse(n.prototype,r),o&&Zse(n,o),t}(XS);function rle(e){return(rle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ole(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ile(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ale(e,t){return!t||"object"!==rle(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ule(e,t,n){return(ule="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cle(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function cle(e){return(cle=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sle(e,t){return(sle=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(nle),nle._$name="CalendarColumn";var lle=function(e){function t(){return ole(this,t),ale(this,cle(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sle(e,t)}(t,e),n=t,o=[{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{instantUpdate:!0,format:"ll"}}}],(r=[{key:"construct",value:function(e,n){var r=this;r.gantt=n.grid,ule(cle(t.prototype),"construct",this).call(this,e,n),r.format?r.explicitFormat=!0:r.gantt.on({displayDateFormatChange:function(e){var t=e.format;r.explicitFormat||r.set("format",t)}})}},{key:"format",set:function(e){this.explicitFormat=!0,this.set("format",e)},get:function(){return this.explicitFormat&&this.data.format||this.gantt.displayDateFormat}}])&&ile(n.prototype,r),o&&ile(n,o),t}(FO);function fle(e){return(fle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ple(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hle(e,t){return!t||"object"!==fle(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yle(e){return(yle=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gle(e,t){return(gle=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}lle._$name="GanttDateColumn";var vle=function(e){function t(){return dle(this,t),hle(this,yle(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gle(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"constraintdate"}},{key:"defaults",get:function(){return{field:"constraintDate",text:"Constraint Date",width:146}}}],(r=null)&&ple(n.prototype,r),o&&ple(n,o),t}(lle);rO.registerColumnType(vle),vle._$name="ConstraintDateColumn";function mle(e){return(mle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ble(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wle(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kle(e,t){return!t||"object"!==mle(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sle(e,t,n){return(Sle="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ole(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ole(e){return(Ole=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ele(e,t){return(Ele=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cle=function(e){function t(){return ble(this,t),kle(this,Ole(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ele(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"constrainttype"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"constraintType",text:"Constraint Type",width:146,editor:{type:x3.type,clearable:!0,allowInvalid:!1}}}}],(r=[{key:"afterConstruct",value:function(){var e=this;Sle(Ole(t.prototype),"afterConstruct",this).call(this),e.grid.on({startCellEdit:e.onStartCellEdit,finishCellEdit:e.onDoneCellEdit,cancelCellEdit:e.onDoneCellEdit,thisObj:e}),lr.createSequence(e.editor.updateLocalization,e.onEditorLocaleChange,e)}},{key:"onStartCellEdit",value:function(e){var t=e.editorContext,n=t.editor,r=t.record;n.inputField instanceof x3&&(n.inputField.store.filter((function(e){return r.run("isConstraintTypeApplicable",e.id)})),this._filterDetacher=function(){return n.inputField.store.clearFilters()})}},{key:"onDoneCellEdit",value:function(){this._filterDetacher&&this._filterDetacher()}},{key:"renderer",value:function(e){var t=e.value,n=null!=t&&"none"!==t&&this.editor.store.getById(t);return n&&n.text||""}},{key:"onEditorLocaleChange",value:function(){this.grid.refreshColumn(this)}}])&&wle(n.prototype,r),o&&wle(n,o),t}(XS);function xle(e){return(xle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jle(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dle(e,t){return!t||"object"!==xle(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rle(e){return(Rle=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ple(e,t){return(Ple=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Cle),Cle._$name="ConstraintTypeColumn";var Tle=function(e){function t(){return _le(this,t),Dle(this,Rle(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ple(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"deadlinedate"}},{key:"defaults",get:function(){return{field:"deadlineDate",text:"Deadline",width:146}}}],(r=null)&&jle(n.prototype,r),o&&jle(n,o),t}(lle);function Ale(e){return(Ale="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ile(e,t){return!t||"object"!==Ale(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fle(e){return(Fle=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lle(e,t){return(Lle=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Tle),Tle._$name="DeadlineDateColumn";var Nle=function(e){function t(){return Mle(this,t),Ile(this,Fle(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lle(e,t)}(t,e),t}(P2);function Hle(e){return(Hle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ble(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zle(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vle(e,t){return!t||"object"!==Hle(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wle(e){return(Wle=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $le(e,t){return($le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Nle._$name="DurationColumn";var Yle=function(e){function t(){return Ble(this,t),Vle(this,Wle(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$le(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"earlyenddate"}},{key:"defaults",get:function(){return{field:"earlyEndDate",text:"Early End"}}}],(r=[{key:"canEdit",value:function(e){return!1}}])&&zle(n.prototype,r),o&&zle(n,o),t}(lle);function Gle(e){return(Gle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ule(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qle(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xle(e,t){return!t||"object"!==Gle(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kle(e){return(Kle=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zle(e,t){return(Zle=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Yle),Yle._$name="EarlyEndDateColumn";var Jle=function(e){function t(){return Ule(this,t),Xle(this,Kle(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zle(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"earlystartdate"}},{key:"defaults",get:function(){return{field:"earlyStartDate",text:"Early Start"}}}],(r=[{key:"canEdit",value:function(e){return!1}}])&&qle(n.prototype,r),o&&qle(n,o),t}(lle);rO.registerColumnType(Jle),Jle._$name="EarlyStartDateColumn";function Qle(e){return(Qle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function efe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nfe(e,t){return!t||"object"!==Qle(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rfe(e){return(rfe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ofe(e,t){return(ofe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ife=function(e){function t(){return efe(this,t),nfe(this,rfe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ofe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"effort"}},{key:"defaults",get:function(){return{field:"fullEffort",text:"Effort"}}}],(r=[{key:"canEdit",value:function(e){return e.isLeaf}},{key:"defaultEditor",get:function(){return{type:b1.type,name:this.field}}}])&&tfe(n.prototype,r),o&&tfe(n,o),t}(Nle);function afe(e){return(afe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ufe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sfe(e,t){return!t||"object"!==afe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lfe(e){return(lfe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ffe(e,t){return(ffe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(ife),ife._$name="EffortColumn";var dfe=function(e){function t(){return ufe(this,t),sfe(this,lfe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ffe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"rollup"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"rollup",text:"Rollup"}}}],(r=null)&&cfe(n.prototype,r),o&&cfe(n,o),t}(jO);function pfe(e){return(pfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gfe(e,t){return!t||"object"!==pfe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vfe(e){return(vfe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mfe(e,t){return(mfe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(dfe),dfe._$name="RollupColumn";var bfe=function(e){function t(){return hfe(this,t),gfe(this,vfe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mfe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"showintimeline"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"showInTimeline",text:"Show in timeline"}}}],(r=null)&&yfe(n.prototype,r),o&&yfe(n,o),t}(jO);function wfe(e){return(wfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ofe(e,t){return!t||"object"!==wfe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Efe(e,t,n){return(Efe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cfe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Cfe(e){return(Cfe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xfe(e,t){return(xfe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(bfe),bfe._$name="ShowInTimelineColumn";var _fe=function(e){function t(){return kfe(this,t),Ofe(this,Cfe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xfe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"enddate"}},{key:"defaults",get:function(){return{field:"endDate",text:"Finish"}}}],(r=[{key:"canEdit",value:function(e){return e.isLeaf}},{key:"defaultEditor",get:function(){var e=Efe(Cfe(t.prototype),"defaultEditor",this);return e.type="enddate",e}},{key:"editor",get:function(){var e=this.data.editor,n=e&&!(e instanceof ni);return(e=Efe(Cfe(t.prototype),"editor",this))&&n&&(e.project=this.gantt.project),e}}])&&Sfe(n.prototype,r),o&&Sfe(n,o),t}(lle);function jfe(e){return(jfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pfe(e,t){return!t||"object"!==jfe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tfe(e){return(Tfe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Afe(e,t){return(Afe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(_fe),_fe._$name="EndDateColumn";var Mfe=function(e){function t(){return Dfe(this,t),Pfe(this,Tfe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Afe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"lateenddate"}},{key:"defaults",get:function(){return{field:"lateEndDate",text:"Late End"}}}],(r=[{key:"canEdit",value:function(e){return!1}}])&&Rfe(n.prototype,r),o&&Rfe(n,o),t}(lle);function Ife(e){return(Ife="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ffe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nfe(e,t){return!t||"object"!==Ife(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hfe(e){return(Hfe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bfe(e,t){return(Bfe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Mfe),Mfe._$name="LateEndDateColumn";var zfe=function(e){function t(){return Ffe(this,t),Nfe(this,Hfe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bfe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"latestartdate"}},{key:"defaults",get:function(){return{field:"lateStartDate",text:"Late Start"}}}],(r=[{key:"canEdit",value:function(e){return!1}}])&&Lfe(n.prototype,r),o&&Lfe(n,o),t}(lle);function Vfe(e){return(Vfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yfe(e,t){return!t||"object"!==Vfe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gfe(e){return(Gfe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ufe(e,t){return(Ufe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(zfe),zfe._$name="LateStartDateColumn";var qfe=function(e){function t(){return Wfe(this,t),Yfe(this,Gfe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ufe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"manuallyscheduled"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"manuallyScheduled",text:"Manually scheduled"}}}],(r=null)&&$fe(n.prototype,r),o&&$fe(n,o),t}(jO);function Xfe(e){return(Xfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jfe(e,t){return!t||"object"!==Xfe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qfe(e){return(Qfe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ede(e,t){return(ede=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(qfe),qfe._$name="ManuallyScheduledColumn";var tde=function(e){function t(){return Kfe(this,t),Jfe(this,Qfe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ede(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"milestone"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"milestone",text:"Milestone"}}}],(r=null)&&Zfe(n.prototype,r),o&&Zfe(n,o),t}(jO);function nde(e){return(nde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ode(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ide(e,t){return!t||"object"!==nde(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ade(e){return(ade=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ude(e,t){return(ude=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(tde),tde._$name="MilestoneColumn";var cde=function(e){function t(){return rde(this,t),ide(this,ade(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ude(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"name"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{htmlEncode:!1,width:200,field:"name",text:"Name"}}}],(r=null)&&ode(n.prototype,r),o&&ode(n,o),t}(VE);function sde(e){return(sde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dde(e,t){return!t||"object"!==sde(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pde(e){return(pde=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hde(e,t){return(hde=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(cde),cde._$name="NameColumn";var yde=function(e){function t(){return lde(this,t),dde(this,pde(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hde(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"note"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"note",text:"Note",width:150,editor:{type:"textareafield",inline:!1}}}}],(r=[{key:"renderer",value:function(e){return(e.value||"").trim()}},{key:"disableHtmlEncode",get:function(){return!0}}])&&fde(n.prototype,r),o&&fde(n,o),t}(XS);function gde(e){return(gde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bde(e,t){return!t||"object"!==gde(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wde(e,t,n){return(wde="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kde(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kde(e){return(kde=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sde(e,t){return(Sde=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(yde),yde._$name="NoteColumn";var Ode=function(e){function t(){return vde(this,t),bde(this,kde(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sde(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"percentdone"}},{key:"isGanttColumn",get:function(){return!0}},{key:"fields",get:function(){return["showCircle"]}},{key:"defaults",get:function(){return{field:"percentDone",text:"% Done",unit:"%",step:1,min:0,max:100,width:90}}}],(r=[{key:"construct",value:function(e){wde(kde(t.prototype),"construct",this).apply(this,arguments),this.showCircle&&(this.htmlEncode=!1)}},{key:"defaultRenderer",value:function(e){var t=e.record.renderedPercentDone;if(this.showCircle){var n=.8*this.grid.rowHeight;return{className:"b-percentdone-circle",style:{animationDelay:"-".concat(t-.1,"s"),width:n,height:n},dataset:{value:t}}}return t+this.unit}},{key:"canEdit",value:function(e){return e.isLeaf}}])&&mde(n.prototype,r),o&&mde(n,o),t}(QO);function Ede(e){return(Ede="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _de(e,t){return!t||"object"!==Ede(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jde(e,t,n,r){return(jde="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Pde(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else Dde(r,t,n);return!0})(e,t,n,r)}function Dde(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rde(e,t,n){return(Rde="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Pde(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Pde(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tde(e)););return e}function Tde(e){return(Tde=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ade(e,t){return(Ade=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Ode),Ode._$name="PercentDoneColumn";var Mde={from:[2,3,0,1],to:[1,0,3,2]},Ide=["SS","SF","FS","FF"],Fde=function(){return new RegExp("(".concat(Ide.join("|"),")?((?:[+-])\\d+[a-z]*)?"),"i")},Lde=Fde();Te.on({locale:function(e){var t=e.locale;Ide=t.SchedulerProCommon.dependencyTypes,Lde=Fde()}});var Nde=function(e){function t(){return Cde(this,t),_de(this,Tde(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ade(e,t)}(t,e),n=t,o=[{key:"predecessorsToString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:";",r=[];if(e&&e.length){var o=!0,i=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,l=s[t+"Event"],f=l?l.id:l||"";r.push("".concat(f).concat(s.getConnectorString()).concat(s.getLag()))}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}return r.join(n)}},{key:"$name",get:function(){return"DependencyField"}},{key:"defaultConfig",get:function(){return{listCls:"b-predecessor-list",valueField:"name",displayField:"name",delimiter:";",otherSide:null,ourSide:null}}}],(r=[{key:"construct",value:function(e){var n=this,r=(e.ourSide,e.otherSide);n.dependencies=new Eo({extraKeys:r}),n.startCollection=new Eo({extraKeys:r}),Rde(Tde(t.prototype),"construct",this).call(this,e),n.delimiterRegEx=new RegExp("\\s*".concat(n.delimiter,"\\s*")),Te.on({locale:function(){n.syncInputFieldValue()},thisObj:n})}},{key:"internalOnInput",value:function(){this.isValid?(this.clearError(),Cd.prototype.internalOnInput.call(this)):this.setError("Invalid dependency format")}},{key:"onInternalKeyDown",value:function(e){var n=e.key;"Enter"!==n&&Rde(Tde(t.prototype),"onInternalKeyDown",this)&&Rde(Tde(t.prototype),"onInternalKeyDown",this).call(this,e),this.pickerVisible&&"ArrowDown"===n&&this.filterField.focus()}},{key:"onTriggerClick",value:function(){this.pickerVisible?Rde(Tde(t.prototype),"onTriggerClick",this).call(this):this.doFilter(this.filterInput?this.filterInput.value:null)}},{key:"createPicker",value:function(){var e=this,t=e.input,n=e.filterField=new Cd({cls:"b-dependency-list-filter",owner:e,clearable:!0,placeholder:"Filter",triggers:{filter:{cls:"b-icon b-icon-filter",align:"start"}},listeners:{input:function(n){var o=n.value;e.input=r,e.filterList(o),e.input=t},clear:function(){e.input=r,e.filterList(),e.input=t}}}),r=e.filterInput=n.input,o=new np({owner:e,floating:!0,scrollAction:"realign",itemsFocusable:!1,activateOnMouseover:!0,store:e.store,cls:e.listCls,itemTpl:e.listItemTpl,forElement:e[e.pickerAlignElement],align:{align:"t0-b0",axisLock:!0,anchor:e.overlayAnchor,target:e[e.pickerAlignElement]},navigator:{keyEventTarget:r,processEvent:function(t){if("Escape"!==t.key)return t;e.hidePicker()}},onItem:e.onPredecesssorClick,maxHeight:324,minHeight:161,scrollable:{overflowY:!0},autoShow:!1,focusOnHover:!1,getItemClasses:function(t){var n=np.prototype.getItemClasses.call(this,t),r=e.dependencies.getBy(e.otherSide+"Event",t);return n+(r?" b-selected b-".concat(r.getConnectorString(1).toLowerCase()):"")}});return n.render(o.contentElement),o}},{key:"showPicker",value:function(e){this.store.fillFromMaster(),Rde(Tde(t.prototype),"showPicker",this).call(this,e)}},{key:"onPickerShow",value:function(e){var n=e.source,r=this,o=r.filterField,i=r.input;n.minWidth=r[r.pickerAlignElement].offsetWidth,n.contentElement.insertBefore(o.element,n.contentElement.firstChild),r.input=r.filterInput,Rde(Tde(t.prototype),"onPickerShow",this).call(this),r.input=i}},{key:"listItemTpl",value:function(e){return'<div class="b-predecessor-item-text">'.concat(e.name,'</div>\n            <div class="b-sch-box b-from" data-side="from"></div>\n            <div class="b-sch-box b-to" data-side="to"></div>')}},{key:"onPredecesssorClick",value:function(e){var t,n=e.source,r=e.item,o=e.record,i=(e.index,e.event),a=this.owner,u=a.dependencies,c=i.target.closest(".b-sch-box"),s=c&&c.dataset.side,l=u.getBy(a.otherSide+"Event",o);r.dataset.noselect=!0,l&&!c?u.remove(l):l?((l=l.copy(l.id)).type=Mde[s][l.type],u.add(l)):u.add(a.dependencyStore.createRecord((Dde(t={},"".concat(a.otherSide,"Event"),o),Dde(t,"".concat(a.ourSide,"Event"),a.owner.record),t),!0)),a.syncInputFieldValue(),n.refresh()}},{key:"syncInputFieldValue",value:function(){this.input.value=this.constructor.predecessorsToString(this.dependencies.values,this.otherSide,this.delimiter)}},{key:"parseDependencies",value:function(e){for(var t=this,n=t.grid,r=t.owner.record,o=t.store,i=t.dependencyStore,a=e.split(t.delimiterRegEx),u=i.modelClass,c=[],s=0;s<a.length;s++){var l=a[s];if(l){for(var f,d,p=l.length+1,h=void 0,y=void 0,g=void 0;p&&!y;p--)h=l.substr(0,p),y=o.getById(h);if(!y)return null;if(d=l.substr(p+1),Dde(f={},"".concat(t.otherSide,"Event"),y),Dde(f,"".concat(t.ourSide,"Event"),r),Dde(f,"type",u.Type.EndToStart),g=f,d.length){var v=Lde.exec(d);if(!v||!v[1]&&!v[2])return null;if(v[1]&&(g.type=Ide.indexOf(v[1].toUpperCase())),v[2]){var m=xt.parseDuration(v[2],!0,n.timeAxis.unit);g.lag=m.magnitude,g.lagUnit=m.unit}}c.push(g)}}return c}},{key:"store",set:function(e){var n=this;(e=e.makeChained((function(e){return!n.owner||!n.owner.record||e.id!==n.owner.record.id}))).tree=!1,function(e,t,n,r,o){if(!jde(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Tde(t.prototype),"store",e,this,!0)},get:function(){return Rde(Tde(t.prototype),"store",this)}},{key:"isValid",get:function(){return Boolean(!this.owner||this.parseDependencies(this.input.value))}},{key:"value",set:function(e){var t=this,n=t.dependencies,r=t.startCollection;if("string"==typeof e){if(t.input.value=e,!(e=t.parseDependencies(e)))return void t.updateInvalid();for(var o=0;o<e.length;o++){var i=new t.dependencyStore.modelClass(e[o]),a=r.getBy(t.otherSide,i.fromEvent);a&&((a=a.copy(a.id)).type=i.type,a.fullLag=i.fullLag),e[o]=a||i}}else t.startCollection.clear(),t.startCollection.values=e;n.clear(),n.values=e,t.inputting||t.syncInputFieldValue()},get:function(){return this.dependencies.values}}])&&xde(n.prototype,r),o&&xde(n,o),t}(jp);function Hde(e){return(Hde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vde(e,t){return!t||"object"!==Hde(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wde(e,t,n){return(Wde="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$de(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $de(e){return($de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yde(e,t){return(Yde=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gde(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ude(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Gde(i,r,o,a,u,"next",e)}function u(e){Gde(i,r,o,a,u,"throw",e)}a(void 0)}))}}Nde._$name="DependencyField",se.register("dependencyfield",Nde);var qde=function(e){return!e.project},Xde=function(e){return e},Kde=function(){var e=Ude(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=t.shift())){e.next=9;break}return e.t0=r,e.next=5,n.isValidDependency({fromEvent:o.fromEvent,toEvent:o.toEvent,lag:o.lag,lagUnit:o.lagUnit,type:o.type});case 5:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=9,Kde(t,n,r);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Zde=function(e){function t(){return Bde(this,t),Vde(this,$de(t).apply(this,arguments))}var n,r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yde(e,t)}(t,e),n=t,r=[{key:"afterConstruct",value:function(){Wde($de(t.prototype),"afterConstruct",this).call(this)}},{key:"finalizeCellEdit",value:(i=Ude(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.grid,r=t.record,o=t.inputField,i=t.value,a=t.oldValue,u=t.editorContext,!r||!i){e.next=9;break}return i=i.slice(),c=u.editor.dataField,s=i.filter(qde),l=[],e.next=6,Kde(s,n.dependencyStore,l);case 6:return(f=l.every(Xde))?(d="set".concat(A.capitalizeFirstLetter(c)),r[d]?r[d](i):r[c]=i):(o.value=a,me.toast(u.column.L("Invalid dependency found, change is reverted"))),e.abrupt("return",f);case 9:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"defaultEditor",get:function(){var e=this,t="predecessors"===e.field;return{type:"dependencyfield",grid:e.grid,name:e.field,delimiter:e.delimiter,ourSide:t?"to":"from",otherSide:t?"from":"to",store:e.grid.eventStore||e.grid.taskStore,dependencyStore:e.grid.features.dependencies.store}}}],o=[{key:"type",get:function(){return"dependency"}},{key:"fields",get:function(){return[{name:"delimiter",defaultValue:";"}]}},{key:"defaults",get:function(){return{htmlEncode:!1,width:120,renderer:function(e){var t=e.record;return Nde.predecessorsToString(t[this.field],"predecessors"===this.field?"from":"to",this.delimiter)}}}}],r&&zde(n.prototype,r),o&&zde(n,o),t}(Wr(XS));function Jde(e){return(Jde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function epe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tpe(e,t){return!t||"object"!==Jde(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function npe(e){return(npe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rpe(e,t){return(rpe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Zde),Zde._$name="DependencyColumn";var ope=function(e){function t(){return Qde(this,t),tpe(this,npe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rpe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"predecessor"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{text:"Predecessors",field:"predecessors"}}}],(r=null)&&epe(n.prototype,r),o&&epe(n,o),t}(Zde);function ipe(e){return(ipe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ape(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function upe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cpe(e,t){return!t||"object"!==ipe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function spe(e){return(spe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lpe(e,t){return(lpe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(ope),ope._$name="PredecessorColumn";var fpe=function(e){function t(){return ape(this,t),cpe(this,spe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lpe(e,t)}(t,e),n=t,o=[{key:"fields",get:function(){return[{name:"assignment",type:"object"},{name:"resource",type:"object"},{name:"event",type:"object"},{name:"units",type:"number",defaultValue:0}]}}],(r=[{key:"name",get:function(){return this.resource?this.resource.name:""}},{key:"assigned",get:function(){return this.event&&this.firstStore.projectEvent===this.event},set:function(e){var t=this;e?t.assigned||t.set({event:t.firstStore.projectEvent,units:t.units||100}):t.set({event:null,units:0})}}])&&upe(n.prototype,r),o&&upe(n,o),t}(qs);function dpe(e){return(dpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ppe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}fpe._$name="AssignmentsManipulationModel";var hpe=hk.defineParser,ype=hk.alt,gpe=hk.seq,vpe=hk.string,mpe=hk.regexp,bpe=hk.succeed,wpe=hk.red,kpe=hk.isSuccess,Spe=hpe(wpe(mpe("[^\\[\\,]+"),(function(e){return{name:e.trim(),units:100,match:e}}))),Ope=hpe(wpe(mpe("[0-9\\s]+"),(function(e){return{value:e.split(/\s*/).join(""),match:e}}))),Epe=hpe(wpe(ype(vpe("."),vpe(",")),(function(e){return{value:e,match:e}}))),Cpe=hpe(ype(wpe(gpe((function(){return Ope}),(function(){return Epe}),(function(){return Ope})),(function(e,t,n){return{value:Number("".concat(e.value,".").concat(n.value)),match:[e.match,t.match,n.match].join("")}})),wpe(gpe((function(){return Epe}),(function(){return Ope})),(function(e,t){return{value:Number("0.".concat(t.value)),match:[e.match,t.match].join("")}})),wpe((function(){return Ope}),(function(e){return{value:Number("".concat(e.value)),match:e.match}})))),xpe=hpe(ype(wpe(gpe((function(){return Cpe}),mpe("\\s*\\%")),(function(e,t){return{value:e.value,match:[e.match,t].join("")}})),wpe((function(){return Cpe}),(function(e){return{value:e.value,match:e.match}})))),_pe=hpe(wpe(gpe(mpe("\\s*\\[\\s*"),(function(){return xpe}),mpe("\\s*\\]")),(function(e,t,n){return{units:t.value,match:[e,t.match,n].join("")}}))),jpe=hpe(wpe(mpe("\\s*,\\s*"),(function(e){return{value:e,match:e}}))),Dpe=hpe(ype(gpe((function(){return Spe}),(function(){return _pe}),ype(gpe((function(){return jpe}),(function(){return Dpe})),bpe(""))),gpe((function(){return Spe}),ype(gpe((function(){return jpe}),(function(){return Dpe})),bpe(""))))),Rpe=function(e){var t=!1,n=[],r="";Dpe(e,(function(e){if(kpe(e)){var o=ppe(e,3),i=o[1],a=o[2];i.length>n.length&&(n=i,r=a,t=!0)}}));var o=0;return!!t&&{rest:r,assignments:n.reduce((function(e,t){var n;return"object"==dpe(t)&&(t.hasOwnProperty("name")?(n=Object.assign({position:o},t),e.push(n)):(n=e[e.length-1],t.hasOwnProperty("units")&&(n.units=t.units),n.match+=t.match),o+=t.match.length),e}),[])}},Ppe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";return e.assignments&&(n+=e.assignments.reduce((function(e,n){var r=n.name,o=n.units,i=n.match;return e+=i&&t?i:(e.length?", ":"")+"".concat(r," [").concat(o,"%]")}),n)),e.rest&&(n+=e.rest),t||(n=n.trim()),n},Tpe={parse:Rpe,compose:Ppe,normalize:function(e){return Ppe(Rpe(e))}};function Ape(e){return(Ape="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mpe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ipe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fpe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lpe(e,t){return!t||"object"!==Ape(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Npe(e,t,n){return(Npe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hpe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Hpe(e){return(Hpe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bpe(e,t){return(Bpe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zpe=Tpe.compose,Vpe=function(e){function t(){return Ipe(this,t),Lpe(this,Hpe(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bpe(e,t)}(t,e),n=t,r=[{key:"afterConfigure",value:function(){Npe(Hpe(t.prototype),"afterConfigure",this).call(this),this.addSorter({fn:this.defaultSort.bind(this)})}},{key:"updateAllNoneSomeAssignedFlags",value:function(){var e=this,t=e.projectEvent,n=e.allRecords,r=e._lastAllAssigned,o=e._lastNoneAssigned,i=e._lastSomeAssigned;e._lastAllAssigned=n.every((function(e){return e.event===t})),e._lastNoneAssigned=n.every((function(e){return null==e.event})),e._lastSomeAssigned=!e._lastAllAssigned&&!e._lastNoneAssigned,void 0!==r&&e._lastAllAssigned!==r&&e._lastAllAssigned&&e.trigger("allAssigned"),void 0!==o&&e._lastNoneAssigned!==o&&e._lastNoneAssigned&&e.trigger("noneAssigned"),void 0!==i&&e._lastSomeAssigned!==i&&e._lastSomeAssigned&&e.trigger("someAssigned")}},{key:"fillFromMaster",value:function(){this.projectEvent&&(this.data=this.resourceStore.map((function(e){return{resource:e}})))}},{key:"applyChanges",value:(i=regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this).projectEvent,r=t.assignmentStore,o=[],i=t.query((function(e){return e.event&&e.units})),a=t.originalAssignmentManipulationRecords.filter((function(e){return!i.includes(e)})),!i.length&&!a.length){e.next=16;break}return c=n.project.replica,s=c.projectRefreshThreshold,i.forEach((function(e){var t=e.assignment;t?t.$.units.put(e.units):o.push({resource:e.resource,event:e.event,units:e.units})})),t.commit(),r.remove(a.map((function(e){return e.assignment}))),r.add(o),c.projectRefreshThreshold=0,e.next=10,n.propagate();case 10:u=e.sent,c.projectRefreshThreshold=s,r.trigger("refresh",{action:"dataset"}),u===N5.Completed&&(t.floatAssignedResources&&t.sort(),t.trigger("changesApplied")),e.next=17;break;case 16:u=N5.Complete;case 17:return e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Mpe(o,n,r,a,u,"next",e)}function u(e){Mpe(o,n,r,a,u,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"getResourceAssignment",value:function(e){return this.storage.getBy("resource",e)}},{key:"assignAllResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n.projectEvent;n.beginBatch(),n.forEach((function(n){n.event=r,n.units&&!t||(n.units=e)})),n.endBatch()}},{key:"unassignAllResources",value:function(){this.beginBatch(),this.forEach((function(e){e.event=null,e.units=0})),this.endBatch()}},{key:"toValueString",value:function(){var e=this.activeAssignments;return zpe({rest:"",assignments:e})}},{key:"defaultSort",value:function(e,t){return this.floatAssignedResources?!t.event&&e.event?-1:!e.event&&t.event?1:e.name.localeCompare(t.name):e.name.localeCompare(t.name)}},{key:"onRefresh",value:function(){this.isConfiguring||this.updateAllNoneSomeAssignedFlags()}},{key:"onUpdate",value:function(e){var t=e.changes,n=this;n.isConfiguring||Object.hasOwnProperty.call(t,"event")&&(n.updateAllNoneSomeAssignedFlags(),n.floatAssignedResources&&n.liveFloatAssignedResources&&n.sort())}},{key:"onRemoveAll",value:function(){this.isConfiguring||this.updateAllNoneSomeAssignedFlags()}},{key:"projectEvent",get:function(){return this._projectEvent},set:function(e){var t=this;if(e!=t._projectEvent||e&&e.generation!==t._projectEventGeneration)if(t._projectEvent=e,t._projectEventGeneration=e.generation,e){t.fillFromMaster();var n=e.assignments,r=[];n.forEach((function(n){var o=t.find((function(e){return e.resource===n.resource}));o&&(o.set({assignment:n,event:e,units:n.units||0}),r.push(o))})),t.originalAssignmentManipulationRecords=r,t.acceptChanges(),t.sort()}else t.removeAll()}},{key:"floatAssignedResources",get:function(){return this._floatAssignedResources},set:function(e){e!==this.floatAssignedResources&&(this._floatAssignedResources=e,this.sort())}},{key:"assignmentStore",get:function(){return this.projectEvent&&this.projectEvent.getAssignmentStore()||null}},{key:"resourceStore",get:function(){return this.projectEvent&&this.projectEvent.getResourceStore()||null}},{key:"areAllAssigned",get:function(){return this._lastAllAssigned}},{key:"areNoneAssigned",get:function(){return this._lastNoneAssigned}},{key:"areSomeAssigned",get:function(){return this._lastSomeAssigned}},{key:"activeAssignments",get:function(){var e=this.projectEvent;return this.query((function(t){return t.event===e}))}}],o=[{key:"defaultConfig",get:function(){return{modelClass:fpe,storeId:"assignmentsmanipulation",storage:{extraKeys:["resource"]},callOnFunctions:!0,projectEvent:null,floatAssignedResources:!0,liveFloatAssignedResources:!1}}}],r&&Fpe(n.prototype,r),o&&Fpe(n,o),t}(ed);function Wpe(e){return(Wpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ype(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gpe(e,t){return!t||"object"!==Wpe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Upe(e,t,n,r){return(Upe="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=Xpe(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function qpe(e,t,n){return(qpe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Xpe(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xpe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kpe(e)););return e}function Kpe(e){return(Kpe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zpe(e,t){return(Zpe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Vpe._$name="AssignmentsManipulationStore";var Jpe=function(e){function t(){return $pe(this,t),Gpe(this,Kpe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zpe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"AssignmentGrid"}},{key:"type",get:function(){return"assignmentgrid"}},{key:"defaultConfig",get:function(){var e=this;return{selectionMode:{rowCheckboxSelection:!0,multiSelect:!0,showCheckAll:!0},columns:[{cls:"b-assignmentgrid-resource-column",field:"resourceId",flex:1,editor:null,renderer:function(e){return e.record.name},filterable:{filterField:{placeholder:this.L("Name"),triggers:{filter:{align:"start",cls:"b-icon b-icon-filter"}}},filterFn:function(e){var t=e.value;return-1!==e.record.name.toLowerCase().indexOf(t.toLowerCase())}},sortable:function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}},{field:"units",type:QO.type,text:this.L("Units"),width:70,min:0,max:100,step:10,unit:this.L("%"),renderer:function(t){var n=t.value;return e.L("unitsTpl",{value:n})},filterable:!1}],features:{group:!1,filterBar:!0,contextMenu:!1},disableGridRowModelWarning:!0,projectEvent:null}}}],(r=[{key:"construct",value:function(){qpe(Kpe(t.prototype),"construct",this).apply(this,arguments),this.on("selectionchange",(function(e){var t=e.selected,n=e.deselected;t.forEach((function(e){return e.assigned=!0})),n.forEach((function(e){return e.assigned=!1}))}))}},{key:"projectEvent",get:function(){var e=this.store,t=this._projectEvent;return e&&t!==e.projectEvent&&(t=this._projectEvent=e.projectEvent),t},set:function(e){this._projectEvent=e,this.store.projectEvent=e,this.selectedRecords=this.store.originalAssignmentManipulationRecords}},{key:"store",get:function(){return qpe(Kpe(t.prototype),"store",this)},set:function(e){this.store!==e&&(e instanceof Vpe||(e=new Vpe(Object.assign({projectEvent:this._projectEvent},e))),function(e,t,n,r,o){if(!Upe(e,t,n,r||e)&&o)throw new Error("failed to set property")}(Kpe(t.prototype),"store",e,this,!0))}}])&&Ype(n.prototype,r),o&&Ype(n,o),t}(TA);function Qpe(e){return(Qpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ehe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function the(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rhe(e,t){return!t||"object"!==Qpe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ohe(e,t,n){return(ohe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ihe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ihe(e){return(ihe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ahe(e,t){return(ahe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Jpe._$name="AssignmentGrid",se.register(Jpe.type,Jpe);var uhe=function(e){function t(){return the(this,t),rhe(this,ihe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ahe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"AssignmentPicker"}},{key:"type",get:function(){return"assignmentpicker"}},{key:"defaultConfig",get:function(){return{grid:null,focusable:!0,trapFocus:!0,height:"20em",minWidth:"25em",items:[{ref:"grid",type:Jpe.type}],bbar:[{type:"button",text:this.L("Save"),ref:"saveBtn",color:"b-green"},{type:"button",text:this.L("Cancel"),ref:"cancelBtn",color:"b-gray"}],projectEvent:null,store:null}}}],(r=[{key:"afterConfigure",value:function(){var e=this;ohe(ihe(t.prototype),"afterConfigure",this).call(this),e.bbar.widgetMap.saveBtn.on("click",e.onSaveClick,e),e.bbar.widgetMap.cancelBtn.on("click",e.onCancelClick,e)}},{key:"createWidget",value:function(e){if(e&&"grid"===e.ref){var n=se.getClass(e.type).defaultConfig,r=this.grid;r&&(r.columns&&(e.columns=[].concat(ehe(n.columns),ehe(r.columns)),delete(r=Object.assign({},r)).columns),Mt.merge(e,r)),e.projectEvent=this.projectEvent,e.store=this.store,e.selectedRecordCollection=this.assignments}return ohe(ihe(t.prototype),"createWidget",this).call(this,e)}},{key:"onSaveClick",value:function(){this.store.applyChanges(),this.hide()}},{key:"onCancelClick",value:function(){this.hide()}},{key:"focusElement",get:function(){return this.element.querySelector("input[type=text]")}},{key:"grid",get:function(){return this.isConfiguring?this._grid:this.widgetMap.grid},set:function(e){this._grid=e}},{key:"projectEvent",get:function(){return this._projectEvent},set:function(e){this._projectEvent=e,this.grid&&(this.grid.projectEvent=e)}}])&&nhe(n.prototype,r),o&&nhe(n,o),t}(Ia);function che(e){return(che="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function she(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fhe(e,t){return!t||"object"!==che(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dhe(e,t,n){return(dhe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=phe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function phe(e){return(phe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hhe(e,t){return(hhe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}uhe._$name="AssignmentPicker",se.register(uhe.type,uhe);var yhe=function(e){function t(){return she(this,t),fhe(this,phe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hhe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"AssignmentField"}},{key:"type",get:function(){return"assignmentfield"}},{key:"defaultConfig",get:function(){return{chipView:{cls:"b-assignment-chipview",itemTpl:function(e,t){return"".concat(e.name," ").concat(e.units,"%")}},triggers:{expand:{cls:"b-icon-down",handler:"onTriggerClick"}},multiSelect:!0,clearable:!1,editable:!1,value:null,pickerWidth:null,projectEvent:null,store:null}}}],(r=[{key:"onChipClose",value:function(e){var t=this;this.showPicker(),e.forEach((function(e){return t.store.findRecord("resource",e.resource).assigned=!1}))}},{key:"syncInputFieldValue",value:function(){dhe(phe(t.prototype),"syncInputFieldValue",this).call(this),this.store&&(this.tooltip=this.store.toValueString())}},{key:"onTriggerClick",value:function(e){this.pickerVisible?this.hidePicker():Ad.prototype.showPicker.call(this,e&&"key"in e)}},{key:"focusPicker",value:function(){this.picker.focus()}},{key:"createPicker",value:function(e){var t=this;return me.createWidget(Object.assign({type:uhe.type,projectEvent:t.projectEvent,store:t.store,readOnly:t.readOnly,owner:t,forElement:t[t.pickerAlignElement],floating:!0,scrollAction:"realign",assignments:t.valueCollection,align:{align:"t0-b0",axisLock:!0,anchor:t.overlayAnchor,target:t[t.pickerAlignElement]}},e))}},{key:"onPickerKeyDown",value:function(e){var t=this.picker.grid;"ArrowDown"===e.key&&e.target.compareDocumentPosition(t.bodyContainer)===document.DOCUMENT_POSITION_FOLLOWING&&t.element.focus()}},{key:"projectEvent",get:function(){return this._projectEvent},set:function(e){this._projectEvent=e,this._projectEventGeneration=e.generation,this.store.projectEvent=this.picker.projectEvent=e}},{key:"store",get:function(){return this._store||(this.store={}),this._store},set:function(e){var t=this;e!==t._store&&(e instanceof Vpe?(t._store=e,t.projectEvent=e.projectEvent):e&&(t._store=new Vpe(e),t._store.projectEvent=t.projectEvent))}},{key:"value",get:function(){},set:function(e){}}])&&lhe(n.prototype,r),o&&lhe(n,o),t}(jp);function ghe(e){return(ghe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bhe(e,t){return!t||"object"!==ghe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function whe(e,t,n){return(whe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=khe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function khe(e){return(khe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function She(e,t){return(She=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yhe._$name="AssignmentField",se.register(yhe.type,yhe);var Ohe=function(e){function t(){return vhe(this,t),bhe(this,khe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&She(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"resourceassignment"}},{key:"isGanttColumn",get:function(){return!0}},{key:"fields",get:function(){return["showAvatars","sideMargin","imageSize"]}},{key:"defaults",get:function(){return{field:"assignments",instantUpdate:!1,text:"Assigned Resources",width:250,cellCls:"b-resourceassignment-cell",showAvatars:!1,imageSize:30,sideMargin:20}}}],(r=[{key:"construct",value:function(){var e=this;if(whe(khe(t.prototype),"construct",this).apply(this,arguments),e.showAvatars){if(_r.on({element:e.grid.element,error:e.onError,thisObj:e,capture:!0}),Object.assign(e,{repaintOnResize:!0,htmlEncode:!1,autoSyncHtml:!0}),!e.grid.resourceImageFolderPath)throw new Error("Must provide a resourceImageFolderPath where resource images are located");e.renderer=e.rendererWithAvatars}e.grid.on({startCellEdit:e.onStartCellEdit,finishCellEdit:e.onDoneCellEdit,cancelCellEdit:e.onDoneCellEdit,thisObj:e})}},{key:"doDestroy",value:function(){whe(khe(t.prototype),"doDestroy",this).call(this),this._editorStoreDetacher&&(this._editorStoreDetacher(),this._editorStoreDetacher=null)}},{key:"onStartCellEdit",value:function(e){var t=e.editorContext,n=t.record,r=this;t.column===r&&(r.editor.projectEvent=n,r._editorStoreDetacher&&(r._editorStoreDetacher(),r._editorStoreDetacher=null),r._editorStoreDetacher=r.editor.store.on("changesApplied",r.onEditorChangesApplied,r))}},{key:"onDoneCellEdit",value:function(){this._editorStoreDetacher&&(this._editorStoreDetacher(),this._editorStoreDetacher=null)}},{key:"onEditorChangesApplied",value:function(){var e=this,t=e.grid.getCell({id:e.editor.projectEvent.id,columnId:e.id});t&&e.renderer({value:e.editor.projectEvent.assignments,cellElement:t})}},{key:"itemTpl",value:function(e,t){return"".concat(e.resourceName," ").concat(e.units,"%")}},{key:"renderer",value:function(e){var t=e.cellElement,n=e.value;if(e.isExport)return n;var r=this.chipView;r.store.storage.replaceValues(n.filter((function(e){return e.resource})).sort((function(e,t){return e.resourceName.localeCompare(t.resourceName)})),!0),r.refresh();var o=r.element.cloneNode(!0);o.removeAttribute("id"),t.innerHTML='<div class="b-assignment-chipview-wrap"></di>',t.firstElementChild.appendChild(o)}},{key:"rendererWithAvatars",value:function(e){var t=e.value;if(e.isExport)return t;var n=this,r=Math.floor((n.width-n.sideMargin)/(n.imageSize+2)),o=t.length>r?t.length-r:0;return'<div class="b-resource-avatar-container">'+Array.from(t).map((function(e,t){var i=e.resource;if(i&&t<r){var a=o>0&&t===r-1,u=n.renderImage({resource:i,assignment:e,overflowCount:a?o:0});return a?'<div class="b-overflow-img">'.concat(u,'<span class="b-overflow-count">+').concat(o,"</span></div>"):u}})).join("")+"</div>"}},{key:"renderImage",value:function(e){var t=e.resource,n=e.assignment,r=e.overflowCount,o="".concat(t.name," ").concat(n.units,"%").concat(r?" (+".concat(r," ").concat(this.L("more resources"),")"):"");return'<img data-btip-scroll-action="realign" data-btip="'.concat(o,'" class="b-resource-avatar" src="').concat(t.image?this.grid.resourceImageFolderPath+t.image:this.defaultAvatar,' ">')}},{key:"onError",value:function(e){var t=e.target;t.classList.contains("b-resource-avatar")&&!t.src.endsWith(this.defaultAvatar)&&(t.src=this.defaultAvatar)}},{key:"defaultEditor",get:function(){return{type:yhe.type}}},{key:"chipView",get:function(){return this._chipView||(this._chipView=new fp({cls:"b-assignment-chipview",itemsFocusable:!1,closable:!1,itemTpl:this.itemTpl,store:{}}),Object.defineProperty(this.chipView,"isVisible",{get:function(){return!0}})),this._chipView}},{key:"defaultAvatar",get:function(){return this.grid.defaultResourceImageName?this.grid.resourceImageFolderPath+this.defaultResourceImageName:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA3CAYAAABQOymxAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABCJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjYwPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj41NTwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxkYzpzdWJqZWN0PgogICAgICAgICAgICA8cmRmOkJhZy8+CiAgICAgICAgIDwvZGM6c3ViamVjdD4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTgtMDMtMTBUMTE6MDM6NTc8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPlBpeGVsbWF0b3IgMy43PC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpEgCIGAAADbUlEQVRoBe2aW08TQRTH/yVchVCg3Kyl1EAEg6VBjdpoor74ZUz8Nn4UIyHGy4NGLtEHoiLhBQpUkWAIt8itnkMt3SVud2b3DL0xSdPZnTNzzm8uZ87ubCCTyTwD8JR+1+hXyWme4J4HCPg7ZSodNjeQ8wycyV1Vw39NNUBaGWutF6bzh6Rg5XdeC8+t+nog3JK/ZzpnHDi9A0xNAUdH7ijt7cDjW+5yfiSMruHxD8Durr550Shw25AbNQL8hxhfvNIHtdZooWn+5J71jkzeiNMaf+PfuO1tYJo3TOEkDvx1WW29qnCkUsCBiqCGjDjw3JyGdgXRt5MKQhoiosA/PDgoN1u3ttwk9MpFgWdm9JSrSv/cU5V0lxMF3t93V+hFYpn8glQSBZYy6mw7ktF+WQCf7QA/1xfAfnovEPBT27lurWDEXxYjHAo5d4ZuSVkAR4K6WM7yZQHsbL5+yQWwfp/la5hyWpIv3URHOCi41vLdCEgaKdkWhoetZpZmXhT4crM8ZEODbJuiwGxaT4+sgfG4bHviwPcFDawh66JtJQ7M5tXVyRg5OCjTjrUV8RHmxmMxqwrv+Rv0ulY6GQGO92dPFPwY293tp7ZzXSPArK6vz1mpWwkHMA9G3aS8lRsDTlwFvD7W9fZ6g1GpZQyYlScSKibYZbiTkiP2e5JXRoH76XAsEtEzN5nUk9eVNgrMxjRrRl9twpHV2Q4xcpjGSn7RidrSErC+DuzQkalq6uwE+CGEt7YgOS/pJArMZ8Hz9OkIH4TxO2o/r1c5yuI4urUVGKPo7ZIQuW/ghTUgnc6OpB9ANx7uAN6bh4aAkI9IzjNwahNYXATWCPg8E3tx3rYGBryBawMz6MICsEn/x8fniWrXxeC81u+OAY32ooJXysB8MPh5Njt1Vb7XKKhVsJDXeVcXcEfx5YMrMB/cfSFHxOv0QPp0WhC8kYaZ9/zRWOFGCwJ/oqm7upr1uIWbKZ3SpiZ6hqanrBGHWP6/wLPkjHhEeXsp18TrOxwGrl+xE9iAD6ns3XTWIdnFyveKj2kekmPLJRvwy/fAnuBpe05Jsf87OoBHN7NWnMbSEx8rE5YxNzaA1/8+xzgZ4clv9A3kSrHHwbx+js9PRrgaYLk7OTI8ndLm+7f4GjjWrypg7vIL4OJPPLMWVN0I/wWcn9aXj4AzhgAAAABJRU5ErkJggg=="}}])&&mhe(n.prototype,r),o&&mhe(n,o),t}(XS);rO.registerColumnType(Ohe),Ohe._$name="ResourceAssignmentColumn";function Ehe(e){return(Ehe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Che(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _he(e,t){return!t||"object"!==Ehe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jhe(e,t,n){return(jhe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dhe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Dhe(e){return(Dhe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rhe(e,t){return(Rhe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Phe=function(e){function t(){return Che(this,t),_he(this,Dhe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rhe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"schedulingmodecolumn"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"schedulingMode",text:"Scheduling Mode",editor:{type:F3.type,allowInvalid:!1,picker:{minWidth:"8.5em"}}}}}],(r=[{key:"afterConstruct",value:function(){jhe(Dhe(t.prototype),"afterConstruct",this).call(this),lr.createSequence(this.editor.updateLocalization,this.onEditorLocaleChange,this)}},{key:"renderer",value:function(e){var t=e.value,n=this.editor.store.getById(t);return n&&n.text||""}},{key:"onEditorLocaleChange",value:function(){this.grid.refreshColumn(this)}}])&&xhe(n.prototype,r),o&&xhe(n,o),t}(XS);function The(e){return(The="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ahe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ihe(e,t){return!t||"object"!==The(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fhe(e){return(Fhe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lhe(e,t){return(Lhe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Phe),Phe._$name="SchedulingModeColumn";var Nhe=function(e){function t(){return Ahe(this,t),Ihe(this,Fhe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lhe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"sequence"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"sequenceNumber",text:"Sequence",sortable:!1,groupable:!1,filterable:!1,width:70,editor:null}}}],(r=null)&&Mhe(n.prototype,r),o&&Mhe(n,o),t}(XS);function Hhe(e){return(Hhe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vhe(e,t){return!t||"object"!==Hhe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Whe(e,t,n){return(Whe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$he(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $he(e){return($he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yhe(e,t){return(Yhe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Nhe),Nhe._$name="SequenceColumn";var Ghe=function(e){function t(){return Bhe(this,t),Vhe(this,$he(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yhe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"startdate"}},{key:"defaults",get:function(){return{field:"startDate",text:"Start"}}}],(r=[{key:"defaultEditor",get:function(){var e=Whe($he(t.prototype),"defaultEditor",this);return e.type="startdate",e}},{key:"editor",get:function(){var e=this.data.editor,n=e&&!(e instanceof ni);return(e=Whe($he(t.prototype),"editor",this))&&n&&(e.project=this.gantt.project),e}}])&&zhe(n.prototype,r),o&&zhe(n,o),t}(lle);function Uhe(e){return(Uhe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Khe(e,t){return!t||"object"!==Uhe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zhe(e){return(Zhe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jhe(e,t){return(Jhe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Ghe),Ghe._$name="StartDateColumn";var Qhe=function(e){function t(){return qhe(this,t),Khe(this,Zhe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jhe(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"successor"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{text:"Successors",field:"successors"}}}],(r=null)&&Xhe(n.prototype,r),o&&Xhe(n,o),t}(Zde);function eye(e){return(eye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rye(e,t){return!t||"object"!==eye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oye(e){return(oye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iye(e,t){return(iye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Qhe),Qhe._$name="SuccessorColumn";var aye=function(e){function t(){return tye(this,t),rye(this,oye(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iye(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"totalslack"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"totalSlack",text:"Total Slack"}}}],(r=[{key:"canEdit",value:function(e){return!1}},{key:"durationUnitField",get:function(){return"slackUnit"}}])&&nye(n.prototype,r),o&&nye(n,o),t}(Nle);function uye(e){return(uye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lye(e,t){return!t||"object"!==uye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fye(e){return(fye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dye(e,t){return(dye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(aye),aye._$name="TotalSlackColumn";var pye=function(e){function t(){return cye(this,t),lye(this,fye(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dye(e,t)}(t,e),n=t,o=[{key:"type",get:function(){return"wbs"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"wbsCode",text:"WBS",width:70,editor:null}}}],(r=null)&&sye(n.prototype,r),o&&sye(n,o),t}(XS);rO.registerColumnType(pye),pye._$name="WBSColumn";var hye={AddNewColumn:Lse,CalendarColumn:nle,ConstraintDateColumn:vle,ConstraintTypeColumn:Cle,DeadlineDateColumn:Tle,DurationColumn:Nle,EarlyEndDateColumn:Yle,EarlyStartDateColumn:Jle,EffortColumn:ife,EndDateColumn:_fe,LateEndDateColumn:Mfe,LateStartDateColumn:zfe,ManuallyScheduledColumn:qfe,MilestoneColumn:tde,NameColumn:cde,NoteColumn:yde,PercentDoneColumn:Ode,PredecessorColumn:ope,ResourceAssignmentColumn:Ohe,RollupColumn:dfe,SchedulingModeColumn:Phe,SequenceColumn:Nhe,ShowInTimelineColumn:bfe,StartDateColumn:Ghe,SuccessorColumn:Qhe,TotalSlackColumn:aye,WBSColumn:pye};function yye(e){return(yye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vye(e,t){return!t||"object"!==yye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mye(e,t,n){return(mye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bye(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function bye(e){return(bye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kye(e,t,n){return t&&wye(e.prototype,t),n&&wye(e,n),e}function Sye(e,t){return(Sye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oye=function(e){function t(e,n){var r;return gye(this,t),(r=vye(this,bye(t).apply(this,arguments))).internalCellCls="b-eventmode-cell",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sye(e,t)}(t,e),kye(t,null,[{key:"type",get:function(){return"eventmode"}},{key:"isGanttColumn",get:function(){return!0}},{key:"defaults",get:function(){return{field:"manuallyScheduled",align:"left",text:"Event mode"}}}]),kye(t,[{key:"renderer",value:function(e){var n=e.value,r=e.cellElement,o=(e.column,e.isExport);if(mye(bye(t.prototype),"renderer",this).apply(this,arguments),o)return this.renderText(n);r.widget&&(r.widget.text=this.renderText(n))}},{key:"onCheckboxChange",value:function(e){var n=e.source,r=e.checked;mye(bye(t.prototype),"onCheckboxChange",this).apply(this,arguments),n.text=this.renderText(r)}},{key:"renderText",value:function(e){return e?this.L("Manual"):this.L("Auto")}}]),t}(jO);function Eye(e){return(Eye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xye(e,t){return!t||"object"!==Eye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _ye(e){return(_ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jye(e,t){return(jye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rO.registerColumnType(Oye),Oye._$name="EventModeColumn";var Dye=function(e){function t(){return Cye(this,t),xye(this,_ye(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jye(e,t)}(t,e),t}(Jae);function Rye(e){return(Rye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aye(e,t){return!t||"object"!==Rye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mye(e){return(Mye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iye(e,t){return(Iye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Dye._$name="AssignmentModel";var Fye=function(e){function t(){return Pye(this,t),Aye(this,Mye(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Iye(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:Dye}}}],(r=null)&&Tye(n.prototype,r),o&&Tye(n,o),t}(yue);function Lye(e){return(Lye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hye(e,t){return!t||"object"!==Lye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bye(e){return(Bye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zye(e,t){return(zye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Fye._$name="AssignmentStore";var Vye=function(e){function t(){return Nye(this,t),Hye(this,Bye(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zye(e,t)}(t,e),t}(ete);function Wye(e){return(Wye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gye(e,t){return!t||"object"!==Wye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uye(e){return(Uye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qye(e,t){return(qye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Vye._$name="DependencyModel";var Xye=function(e){function t(){return $ye(this,t),Gye(this,Uye(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qye(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:Vye}}}],(r=null)&&Yye(n.prototype,r),o&&Yye(n,o),t}(Xie);function Kye(e){return(Kye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jye(e,t){return!t||"object"!==Kye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qye(e){return(Qye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ege(e,t){return(ege=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Xye._$name="DependencyStore";var tge=function(e){function t(){return Zye(this,t),Jye(this,Qye(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ege(e,t)}(t,e),t}(gae);function nge(e){return(nge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ige(e,t){return!t||"object"!==nge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function age(e){return(age=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uge(e,t){return(uge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}tge._$name="ResourceModel";var cge=function(e){function t(){return rge(this,t),ige(this,age(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uge(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:tge}}}],(r=null)&&oge(n.prototype,r),o&&oge(n,o),t}(Aae);cge._$name="ResourceStore";function sge(e){return(sge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lge(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function fge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){lge(i,r,o,a,u,"next",e)}function u(e){lge(i,r,o,a,u,"throw",e)}a(void 0)}))}}function dge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hge(e,t){return!t||"object"!==sge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yge(e){return(yge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gge(e,t){return(gge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vge=function(e){function t(){return dge(this,t),hge(this,yge(t).apply(this,arguments))}var n,r,o,i,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gge(e,t)}(t,e),n=t,r=[{key:"setMilestone",value:(u=fge(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t?this.convertToMilestone():this.convertToRegular());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"convertToMilestone",value:(a=fge(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.setDuration(0,this.durationUnit,!1));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"convertToRegular",value:(i=fge(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.milestone){e.next=2;break}return e.abrupt("return",this.setDuration(1,this.durationUnit,!1));case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"isBaseline",get:function(){return!0}},{key:"milestone",get:function(){if(!this.isLeaf){var e=this.startDate,t=this.endDate;if(e&&t)return t.getTime()===e.getTime()}return 0===this.duration},set:function(e){e?this.convertToMilestone():this.convertToRegular()}}],o=[{key:"fields",get:function(){return[{name:"task",persist:!1}]}}],r&&pge(n.prototype,r),o&&pge(n,o),t}(bF);function mge(e){return(mge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bge(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function wge(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function kge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){wge(i,r,o,a,u,"next",e)}function u(e){wge(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Sge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ege(e,t){return!t||"object"!==mge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cge(e){return(Cge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xge(e,t){return(xge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}vge._$name="Baseline";var _ge=function(e,t){var n=e.startDate,r=e.durationUnit,o=e.endDate;return t?t.map((function(t){return Object.assign({task:e,startDate:n,durationUnit:r,endDate:o},t)})):[]},jge=function(e){function t(){return Sge(this,t),Ege(this,Cge(t).apply(this,arguments))}var n,r,o,i,a,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xge(e,t)}(t,e),n=t,r=[{key:"setBaseline",value:function(e){if(e>this.baselines.count+1)throw new Error("Attempt to set baseline ".concat(e," when there are only ").concat(this.baselines.count," baselines"));if(e===this.baselines.count+1)return this.baselines.add(_ge(this,[{}]));this.baselines.getAt(e-1).set(_ge(this,[{}])[0])}},{key:"setMilestone",value:(c=kge(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t?this.convertToMilestone():this.convertToRegular());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"convertToMilestone",value:(u=kge(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.setDuration(0,this.durationUnit,!1));case 1:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"convertToRegular",value:(a=kge(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this).milestone){e.next=3;break}return e.abrupt("return",t.setDuration(1,t.durationUnit,!1));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"normalize",value:function(){}},{key:"inSetNormalize",value:function(e){}},{key:"setStartEndDate",value:function(){throw new Error("Not supported")}},{key:"tryInsertChild",value:(i=kge(regeneratorRuntime.mark((function e(){var t,n=arguments,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProject().tryPropagateWithChanges((function(){r.insertChild.apply(r,bge(n))}));case 2:return t=e.sent,e.abrupt("return",t!==N5.Canceled);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"isTask",get:function(){return!0}},{key:"hasBaselines",get:function(){return this.baselinesStore&&this.baselinesStore.count||Boolean(this.originalData.baselines)}},{key:"baselines",get:function(){return this.baselinesStore||(this.baselinesStore=new ed({modelClass:this.constructor.getDefaultConfiguration().baselineModelClass,data:_ge(this,this.originalData.baselines)})),this.baselinesStore}},{key:"successors",get:function(){return Array.from(this.outgoingDeps)},set:function(e){this.setOutgoingDeps(e)}},{key:"predecessors",get:function(){return Array.from(this.incomingDeps)},set:function(e){this.setIncomingDeps(e)}},{key:"renderedPercentDone",get:function(){var e="number"!=typeof this.percentDone||isNaN(this.percentDone)?0:this.percentDone;return e<=99?Math.round(e):Math.floor(e)}},{key:"isDraggable",get:function(){return this.draggable}},{key:"isResizable",get:function(){return this.resizable&&!this.milestone&&!this.isParent}},{key:"isStarted",get:function(){return this.percentDone>0}},{key:"isCompleted",get:function(){return this.percentDone>=100}},{key:"isInProgress",get:function(){return this.isStarted&&!this.isCompleted}},{key:"milestone",get:function(){if(!this.isLeaf){var e=this.startDate,t=this.endDate;if(e&&t)return t.getTime()===e.getTime()}return 0===this.duration},set:function(e){e?this.convertToMilestone():this.convertToRegular()}},{key:"allDependencies",get:function(){return[].concat(bge(this.predecessors||[]),bge(this.successors||[]))}},{key:"predecessorTasks",get:function(){return this.predecessors.map((function(e){return e.fromEvent}))}},{key:"successorTasks",get:function(){return this.successors.map((function(e){return e.toEvent}))}},{key:"previousSiblingsTotalCount",get:function(){for(var e=this.previousSibling,t=this.parentIndex;e;)t+=e.descendantCount,e=e.previousSibling;return t}},{key:"sequenceNumber",get:function(){for(var e=0,t=this;t.parent;)e+=t.previousSiblingsTotalCount+1,t=t.parent;return e}},{key:"isSubProject",get:function(){return!1}},{key:"subProject",get:function(){var e=null;return this.isProject?e=this:this.bubbleWhile((function(t){return t.isProject&&(e=t),!e})),e}},{key:"fullEffort",get:function(){return new og({unit:this.effortUnit,magnitude:this.effort})},set:function(e){this.setEffort(e.magnitude,e.unit)}}],o=[{key:"fields",get:function(){return[{name:"cls",serialize:function(e){return e.isDomClassList?e.toString():e},persist:!0},{name:"fullEffort",persist:!1},{name:"baselines"},{name:"note",type:"string"},{name:"percentDone",type:"number",defaultValue:0},{name:"parentId",serialize:function(e,t){var n=t.getEventStore(),r=t.getProject();return n&&n.getById(e)===r&&(e=null),e}},{name:"phantomId",type:"string"},{name:"phantomParentId",type:"string"},{name:"showInTimeline",type:"boolean"},{name:"rollup",type:"boolean"},{name:"deadlineDate",type:"date"},{name:"parentIndex",type:"int",persist:!0},"iconCls","taskIconCls",{name:"draggable",type:"boolean",persist:!1,defaultValue:!0},{name:"resizable",persist:!1,defaultValue:!0}]}},{key:"defaultConfig",get:function(){return{baselineModelClass:vge}}}],r&&Oge(n.prototype,r),o&&Oge(n,o),t}(D4(Woe(bF)));function Dge(e){return(Dge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pge(e,t){return!t||"object"!==Dge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tge(e){return(Tge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Age(e,t){return(Age=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}jge.convertEmptyParentToLeaf=!0,jge._$name="TaskModel";var Mge=function(e){function t(){return Rge(this,t),Pge(this,Tge(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Age(e,t)}(t,e),t}(T7);function Ige(e){return(Ige="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nge(e,t){return!t||"object"!==Ige(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hge(e){return(Hge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bge(e,t){return(Bge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Mge._$name="CalendarModel";var zge=function(e){function t(){return Fge(this,t),Nge(this,Hge(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bge(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{modelClass:Mge}}}],(r=null)&&Lge(n.prototype,r),o&&Lge(n,o),t}(Tue);zge._$name="CalendarManagerStore";var Vge=z7;function Wge(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gge(e,t){return!t||"object"!==Xge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uge(e){return(Uge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qge(e,t){return(qge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xge(e){return(Xge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kge=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Xge(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Zge=function(e){var t=function(e){function t(){return $ge(this,t),Gge(this,Uge(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qge(e,t)}(t,e),n=t,(r=[{key:"calculateCriticalPaths",value:regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s,l,f,d,p,h,y,g,v,m,b,w,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.next=4,this.$.childEvents;case 4:return r=e.sent,o=Wge(r),e.next=8,this.$.endDate;case 8:i=e.sent;case 9:if(!(a=o.shift())){e.next=20;break}return e.next=12,a.$.childEvents;case 12:return u=e.sent,e.next=15,a.$.critical;case 15:c=e.sent,a.endDate-i==0&&c&&n.push([{event:a}]),o.push.apply(o,Wge(u)),e.next=9;break;case 20:if(!(s=n.shift())){e.next=67;break}l=s.length-1,f=void 0;case 22:if(!(f=s[l])){e.next=64;break}return d=[],p=!0,h=!1,y=void 0,e.prev=27,e.next=30,f.event.$.incomingDeps;case 30:e.t0=Symbol.iterator,g=e.sent[e.t0]();case 32:if(p=(v=g.next()).done){e.next=47;break}return m=v.value,e.next=36,m.$.fromEvent;case 36:if(b=e.sent,e.t1=b,!e.t1){e.next=42;break}return e.next=41,b.$.critical;case 41:e.t1=e.sent;case 42:e.t1&&d.push({event:b,dependency:m});case 44:p=!0,e.next=32;break;case 47:e.next=53;break;case 49:e.prev=49,e.t2=e.catch(27),h=!0,y=e.t2;case 53:e.prev=53,e.prev=54,p||null==g.return||g.return();case 56:if(e.prev=56,!h){e.next=59;break}throw y;case 59:return e.finish(56);case 60:return e.finish(53);case 61:if(d.length){for(w=s.slice(),s.push(d[0]),k=1;k<d.length;k++)n.push(w.concat(d[k]));l++}else l=-1;e.next=22;break;case 64:t.push(s.reverse()),e.next=20;break;case 67:return e.abrupt("return",t);case 68:case"end":return e.stop()}}),e,this,[[27,49,53,61],[54,,56,60]])}))}])&&Yge(n.prototype,r),o&&Yge(n,o),t}(e);return Kge([J6()],t.prototype,"criticalPaths",void 0),Kge([Q6("criticalPaths")],t.prototype,"calculateCriticalPaths",null),t};function Jge(e){return(Jge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tve(e,t,n){return t&&eve(e.prototype,t),n&&eve(e,n),e}function nve(e,t){return!t||"object"!==Jge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rve(e){return(rve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ove(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ive(e,t)}function ive(e,t){return(ive=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ave=function(e){var t=function(e){function t(){return Qge(this,t),nve(this,rve(t).apply(this,arguments))}return ove(t,e),tve(t,[{key:"getType",value:function(){return u2.Gantt}},{key:"calculateStartDateInitial",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=this.$.startDate.proposedValue)){e.next=3;break}return e.abrupt("return",t);case 3:if(!this.$.startDate.getConsistentValue()){e.next=7;break}e.t0=this.startDate,e.next=9;break;case 7:return e.delegateYield(this.calculateInitialMinChildrenStartDateDeep(),"t1",8);case 8:e.t0=e.t1;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this)}))},{key:"calculateEndDateInitial",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=this.$.endDate.proposedValue)){e.next=3;break}return e.abrupt("return",t);case 3:return e.abrupt("return",this.$.endDate.getConsistentValue());case 4:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.$.startDateInitial;case 3:return(n=e.sent)&&t.push(fne.new({originDescription:"the project start date",startDate:n})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))},{key:"calculateEarlyEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateLateStartDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))},{key:"calculateLateEndDateConstraintIntervals",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.$.endDateInitial;case 3:return(n=e.sent)&&t.push(fne.new({originDescription:"the project end date",endDate:n})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))},{key:"calculateStartDate",value:regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t||this.$.startDate.getConsistentValue(),e.t0){e.next=5;break}return e.next=4,this.$.startDateInitial;case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)}))},{key:"getDefaultEventModelClass",value:function(){return $oe}}]),t}(e);return t},uve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;return ave(Zge(ace(e)))},cve=function(e){function t(){return Qge(this,t),nve(this,rve(t).apply(this,arguments))}return ove(t,e),tve(t,null,[{key:"defaultConfig",get:function(){return{assignmentsData:null,calendarsData:null,dependenciesData:null,eventsData:null,resourcesData:null}}}]),t}(uve());function sve(e){return(sve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lve(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function fve(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function dve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hve(e,t){return!t||"object"!==sve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yve(e,t,n){return(yve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gve(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function gve(e){return(gve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vve(e,t){return(vve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}cve.applyConfigs=!0;var mve=function(e){function t(){return dve(this,t),hve(this,gve(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vve(e,t)}(t,e),n=t,r=[{key:"construct",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=r[0]||{};r[0]=i,"tasksData"in i&&(i.eventsData=i.tasksData,delete i.tasksData),"taskStore"in i&&(i.eventStore=i.taskStore,delete i.taskStore),i.eventModelClass=i.taskModelClass||i.eventModelClass||this.defaultEventModelClass,i.eventStoreClass=i.taskStoreClass||i.eventStoreClass||this.defaultEventStoreClass,i.timeRangeStore||(i.timeRangeStore={modelClass:bF,storeId:"timeRanges"}),(e=yve(gve(t.prototype),"construct",this)).call.apply(e,[this].concat(r))}},{key:"tryInsertChild",value:(i=regeneratorRuntime.mark((function e(){var t,n=arguments,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tryPropagateWithChanges((function(){r.insertChild.apply(r,lve(n))}));case 2:return t=e.sent,e.abrupt("return",t!==N5.Canceled);case 4:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){fve(o,n,r,a,u,"next",e)}function u(e){fve(o,n,r,a,u,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"defaultEventModelClass",get:function(){return jge}},{key:"defaultEventStoreClass",get:function(){return _ve}},{key:"taskStore",get:function(){return this.getEventStore()}},{key:"timeRangeStore",get:function(){return this._timeRangeStore},set:function(e){this._timeRangeStore=ed.getStore(e,ed),this._timeRangeStore.storeId||(this._timeRangeStore.storeId="timeRanges")}}],o=[{key:"defaults",get:function(){return{expanded:!0}}},{key:"defaultConfig",get:function(){return{eventModelClass:jge,taskModelClass:jge,dependencyModelClass:Vye,resourceModelClass:tge,assignmentModelClass:Dye,calendarModelClass:Mge,eventStoreClass:_ve,taskStoreClass:_ve,dependencyStoreClass:Xye,resourceStoreClass:cge,assignmentStoreClass:Fye,calendarManagerStoreClass:zge,tasksData:null,eventsData:null,dependenciesData:null,resourcesData:null,assignmentsData:null,calendarsData:null,timeRangeStore:null,convertEmptyParentToLeaf:!1}}}],r&&pve(n.prototype,r),o&&pve(n,o),t}(Vge(uve(qs)));function bve(e){return(bve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wve(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function kve(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){wve(i,r,o,a,u,"next",e)}function u(e){wve(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Sve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ove(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eve(e,t){return!t||"object"!==bve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cve(e){return(Cve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xve(e,t){return(xve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}mve.applyConfigs=!0,mve._$name="ProjectModel";var _ve=function(e){function t(){return Sve(this,t),Eve(this,Cve(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xve(e,t)}(t,e),n=t,r=[{key:"setBaseline",value:function(e){var t=this.storage.values;this.forEach((function(t){return t.setBaseline(e)})),this.trigger("refresh",{action:"batch",records:t,data:t})}},{key:"indent",value:(a=kve(regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=this).taskStore,o=n.project,i=!1,!(t=(t=(t=Array.isArray(t)?t.slice():[t]).filter((function(e){return!(e instanceof mve)&&!1!==o.trigger("beforeIndent",{task:e})}))).filter((function(e){var n;for(n=Boolean(e.previousSibling);n&&!e.isRoot;)n=!t.includes(e.parent),e=e.parent;return n}))).length){e.next=12;break}return t.sort((function(e,t){return e.wbsCode<t.wbsCode?-1:e.wbsCode>t.wbsCode?1:0})),r.beginBatch(),e.next=10,o.tryPropagateWithChanges((function(){var e=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var u=i.value,c=u.previousSibling;c.appendChild(u),n.toggleCollapse(c,!1)}}catch(e){r=!0,o=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw o}}}));case 10:i=e.sent,r.endBatch();case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"outdent",value:(i=kve(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=this).taskStore,o=n.project,!(t=(t=(Array.isArray(t)?t.slice():[t]).filter((function(e){return!(e instanceof mve)&&!1!==o.trigger("beforeOutdent",{task:e})}))).filter((function(e){var n;for(n=e.parent&&!e.parent.isRoot;n&&!e.isRoot;)n=!t.includes(e.parent),e=e.parent;return n}))).length){e.next=10;break}return t.sort((function(e,t){return e.wbsCode<t.wbsCode?1:e.wbsCode>t.wbsCode?-1:0})),r.beginBatch(),e.next=8,o.tryPropagateWithChanges((function(){var e=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var u=i.value,c=u.parent.children.slice(u.parent.children.indexOf(u)+1);u.parent.parent.insertChild(u,u.parent.nextSibling),u.appendChild(c),n.toggleCollapse(u,!1)}}catch(e){r=!0,o=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw o}}}));case 8:e.sent,r.endBatch();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})}],o=[{key:"defaultConfig",get:function(){return{modelClass:jge}}}],r&&Ove(n.prototype,r),o&&Ove(n,o),t}(yie);function jve(e){return(jve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pve(e,t){return!t||"object"!==jve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tve(e,t,n){return(Tve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ave(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ave(e){return(Ave=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mve(e,t){return(Mve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_ve._$name="TaskStore";var Ive=function(e){function t(){return Dve(this,t),Pve(this,Ave(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mve(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Baselines"}},{key:"defaultConfig",get:function(){return{cls:"b-gantt-task-tooltip",align:"t-b",forSelector:".b-task-baseline",recordType:"baseline"}}},{key:"pluginConfig",get:function(){return{chain:["onTaskDataGenerated","render"]}}}],(r=[{key:"construct",value:function(e,n){var r=this;r.tipId="".concat(e.id,"-baselines-tip"),r.gantt=e,Tve(Ave(t.prototype),"construct",this).call(this,e,n),r.ganttDetatcher=e.on({taskDrag:"onTaskDrag",afterTaskDrop:"onAfterTaskDrop",thisObj:r}),r.storeDetacher=e.taskStore.on({update:{fn:"onStoreUpdateRecord",thisObj:r,prio:1e3}})}},{key:"doDestroy",value:function(){this.ganttDetatcher&&this.ganttDetatcher(),this.storeDetacher&&this.storeDetacher(),Tve(Ave(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){var n=this.client.features.dependencies;this.client.refresh(),n&&this.client.setTimeout((function(){return n.scheduleDraw(!0)}),300),Tve(Ave(t.prototype),"doDisable",this).call(this,e)}},{key:"onAfterTaskDrop",value:function(e){e.valid||this.disabled||this.monitorBaselineSync(300)}},{key:"onStoreUpdateRecord",value:function(e){var t=e.record,n=e.changes;!this.disabled&&(n.startDate||n.endDate)&&this.gantt.getElementFromTaskRecord(t)&&this.monitorBaselineSync(300)}},{key:"onTaskDrag",value:function(e){var t=e.taskRecords,n=e.dragData;!this.disabled&&this.updateTaskBaselines(t[0],n.context.newX)}},{key:"updateTaskBaselines",value:function(e,t){var n=this.gantt;if(e.baselines.count){var r=n.getElementFromTaskRecord(e,!1);r&&(null==t&&(t=xn.getOffsetX(r,n.timeAxisSubGridElement)+n.scrollLeft),Ib.sync({domConfig:this.getTaskDOMConfig(e,t),targetElement:r.syncIdMap.baselines}))}}},{key:"monitorBaselineSync",value:function(e){this.baselineMonitor&&this.baselineMonitor.cancel(),this.baselineMonitor=lr.animate(e,this.syncAllBaselines,this)}},{key:"syncAllBaselines",value:function(){var e=this;!this.isDestroyed&&this.gantt.taskStore.forEach((function(t){return e.updateTaskBaselines(t)}))}},{key:"resolveTimeSpanRecord",value:function(e){var t=this.client.resolveTimeSpanRecord(e),n=e.closest(".b-task-baseline");if(t&&n)return t.baselines.getAt(parseInt(n.dataset.index))}},{key:"template",value:function(e){var t=this,n=e.baseline,r=n.task,o=t.decimalPrecision;null==o&&(o=t.client.durationDisplayPrecision);var i=Math.pow(10,o),a=Math.round(n.duration*i)/i;return'\n            <div class="b-gantt-task-title">'.concat(r.name," (baseline ").concat(n.parentIndex+1,")</div>\n            <table>\n            <tr><td>").concat(t.L("Start"),":</td><td>").concat(e.startClockHtml,"</td></tr>\n            ").concat(n.milestone?"":"\n                <tr><td>".concat(t.L("End"),":</td><td>").concat(e.endClockHtml,"</td></tr>\n                <tr><td>").concat(t.L("Duration"),':</td><td class="b-right">').concat(a+" "+xt.getLocalizedNameOfUnit(n.durationUnit,1!==n.duration),"</td></tr>\n            "),"\n            </table>\n            ")}},{key:"getTaskDOMConfig",value:function(e,t){var n=this,r=e.baselines.allRecords;return{className:"b-baseline-wrap",style:{flex:.5*r.length},dataset:{taskFeature:"baselines"},children:r.map((function(e,r){var o=n.gantt.taskRendering.getTaskBox(e);return o?{className:e.cls+"b-task-baseline",style:{width:o.width,left:o.left-t+1},dataset:{index:r}}:null})),syncOptions:{syncIdField:"index"}}}},{key:"onTaskDataGenerated",value:function(e){var t=e.taskRecord,n=e.left,r=e.wrapperChildren;!this.disabled&&t.hasBaselines&&r.push(this.getTaskDOMConfig(t,n))}}])&&Rve(n.prototype,r),o&&Rve(n,o),t}($$);function Fve(e){return(Fve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lve(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Nve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bve(e,t){return!t||"object"!==Fve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zve(e){return(zve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vve(e,t){return(Vve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ive._$name="Baselines",nC.registerFeature(Ive,!1,"Gantt");var Wve=function(e){function t(){return Nve(this,t),Bve(this,zve(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vve(e,t)}(t,e),n=t,r=[{key:"getAdjacentEditableCell",value:function(e,t){for(var n=this,r=this.addNewAtEnd,o=this.grid,i=o.store,a=e.id,u=e.columnId,c=o.columns,s=c.getAdjacentLeaf(u,t);a;){var l=i.getById(a);if(s){if(u=s.id,!s.hidden&&s.editor&&s.canEdit(l))return{id:a,columnId:s.id};s=c.getAdjacentLeaf(u,t)}else{var f=i.getAdjacent(e.id,t,!1,!0);if(!f&&t&&r)return this.doAddNewAtEnd().then((function(){var t=n.getAdjacentEditableCell(e,!0);t&&n.startEditing(t)})),this.finishEditing(),null;a=f&&f.id,f&&(s=t?c.first:c.leaves[c.leaves.length-1])}}return null}},{key:"doAddNewAtEnd",value:(i=regeneratorRuntime.mark((function e(){var t,n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.addNewAtEnd,n=this.grid,r=n.taskStore,o=n.rowManager,i=r.rootNode.appendChild(Object.assign({name:"New task",startDate:r.getProject().startDate},t)),e.next=4,r.getProject().propagate();case 4:return o.getRowFor(i)||o.displayRecordAtBottom(),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Lve(o,n,r,a,u,"next",e)}function u(e){Lve(o,n,r,a,u,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})}],o=[{key:"$name",get:function(){return"CellEdit"}}],r&&Hve(n.prototype,r),o&&Hve(n,o),t}(CA);function $ve(e){return($ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uve(e,t){return!t||"object"!==$ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qve(e,t,n){return(qve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xve(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xve(e){return(Xve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kve(e,t){return(Kve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Wve._$name="CellEdit",nC.registerFeature(Wve,!0,"Gantt");var Zve=function(e){function t(){return Yve(this,t),Uve(this,Xve(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kve(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"CriticalPaths"}},{key:"defaultConfig",get:function(){return{cls:"b-gantt-critical-paths",criticalDependencyCls:"b-critical",disabled:!0}}},{key:"pluginConfig",get:function(){return{chain:["onPaint"]}}}],(r=[{key:"doDisable",value:function(e){e?this.unhighlightCriticalPaths():this.highlightCriticalPaths(),qve(Xve(t.prototype),"doDisable",this).call(this,e)}},{key:"onPaint",value:function(){this.client.project.on({commit:this.onProjectCommit,thisObj:this})}},{key:"getDependenciesFeature",value:function(){return this.client.foregroundCanvas&&this.client.features.dependencies}},{key:"highlightCriticalPaths",value:function(){var e=this,t=e.client,n=t.project,r=e.getDependenciesFeature();t.element.classList.contains(e.cls)&&e.unhighlightCriticalPaths(),r&&n.criticalPaths&&n.criticalPaths.forEach((function(t){t.forEach((function(t){t.dependency&&r.highlight(t.dependency,e.criticalDependencyCls)}))})),t.element.classList.add(e.cls),t.trigger("criticalPathsHighlighted")}},{key:"unhighlightCriticalPaths",value:function(){var e=this,t=e.client,n=t.project,r=e.getDependenciesFeature();r&&n.dependencyStore.forEach((function(t){return r.unhighlight(t,e.criticalDependencyCls)})),t.element.classList.remove(e.cls),t.trigger("criticalPathsUnhighlighted")}},{key:"onProjectCommit",value:function(e){var t=e.records,n=e.changedAtoms,r=this.client.project;!this.disabled&&t.has(r)&&n.includes(r.$.criticalPaths)&&this.highlightCriticalPaths()}}])&&Gve(n.prototype,r),o&&Gve(n,o),t}(Wr(es));function Jve(e){return(Jve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qve(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n             <table class="b-sch-dependency-tooltip">\n                <tr>\n                    <td>',": </td>\n                    <td>"," ",'</td>\n                    <td><div class="b-sch-box b-','"></div></td>\n                </tr>\n                <tr>\n                    <td>',": </td>\n                    <td>"," ",'</td>\n                    <td><div class="b-sch-box b-','"></div></td>\n                </tr>\n            </table>\n        ']);return Qve=function(){return e},e}function eme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nme(e,t){return!t||"object"!==Jve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rme(e,t,n){return(rme="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ome(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ome(e){return(ome=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ime(e,t){return(ime=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Zve._$name="CriticalPaths",nC.registerFeature(Zve,!0,"Gantt");var ame=["left","left","right","right"],ume=["left","right","left","right"],cme=function(e){function t(){return eme(this,t),nme(this,ome(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ime(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Dependencies"}},{key:"defaultConfig",get:function(){return{terminalSides:["left","right"],storeClass:Xye,highlightDependenciesOnEventHover:!0}}}],(r=[{key:"construct",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;e.isGantt&&(r.gantt=e),Object.prototype.hasOwnProperty.call(n,"pathFinderConfig")?(Object.prototype.hasOwnProperty.call(n.pathFinderConfig,"otherHorizontalMargin")||(n.pathFinderConfig.otherHorizontalMargin=0),Object.prototype.hasOwnProperty.call(n.pathFinderConfig,"otherVerticalMargin")||(n.pathFinderConfig.otherVerticalMargin=0)):n.pathFinderConfig={otherHorizontalMargin:0,otherVerticalMargin:0},rme(ome(t.prototype),"construct",this).call(this,e,n)}},{key:"getIteratableDependencyAssignments",value:function(e){return[null]}},{key:"isDependencyVisible",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.client,o=e.sourceTask,i=e.targetTask;if(o&&i&&Object(o)===o&&Object(i)===i)return o instanceof jge&&!n?!(o.placeHolder||o.instanceMeta(r.store).hidden||i.placeHolder||i.instanceMeta(r.store).hidden):rme(ome(t.prototype),"isDependencyVisible",this).call(this,e,n)}},{key:"getBox",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.getTimeSpanRecordFromDependency(e,n);return this.gantt?this.gantt.getTaskBox(o,!0,!0):o.isEvent||r?rme(ome(t.prototype),"getBox",this).call(this,e,n,r):o.assignments.length?this.client.getResourceEventBox(o,o.assignments[0].resource,!0):null}},{key:"getRowRecordFromDependency",value:function(e,n){if(!this.gantt){var r=this.getTimeSpanRecordFromDependency(e,n);return r.isEvent?rme(ome(t.prototype),"getRowRecordFromDependency",this).call(this,e,n):r.assignments.length?r.assignments[0].resource:null}return this.getTimeSpanRecordFromDependency(e,n)}},{key:"drawLine",value:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=rme(ome(t.prototype),"drawLine",this).call(this,e,n,r,o,i),u=this.client,c=n.toEvent;(!c.milestone&&(c.endDate<=u.startDate||u.endDate<=c.startDate)||c.milestone&&(c.endDate<u.startDate||u.endDate<c.startDate))&&a.classList.add("b-sch-dependency-ends-outside")}},{key:"prepareLineDef",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this,r=n.getTimeSpanRecordFromDependency(e,!0),o=n.getTimeSpanRecordFromDependency(e,!1),i=e.type,a=this.pathFinder.startArrowMargin,u=e.fromSide,c=e.toSide;if(!u)switch(!0){case i===i2.StartToEnd:case i===i2.StartToStart:u=n.getConnectorStartSide(r);break;case i===i2.EndToStart:case i===i2.EndToEnd:u=n.getConnectorEndSide(r);break;default:throw new Error("Invalid dependency type: "+i)}if(!c)switch(!0){case i===i2.StartToEnd:c=n.getConnectorEndSide(o);break;case i===i2.StartToStart:case i===i2.EndToStart:c=n.getConnectorStartSide(o);break;case i===i2.EndToEnd:c=n.getConnectorEndSide(o);break;default:throw new Error("Invalid dependency type: "+i)}var s=t.startRectangle,l=t.endRectangle;i===i2.EndToStart&&s.bottom<l.y&&Math.round(s.right)-Math.round(l.x)<=0&&(c="top",e.targetTask.milestone||(l.right=l.x+2*a));var f=n.client.getRecordCoords(r,!0),d=n.client.getRecordCoords(o,!0),p=[{start:s.x,end:s.right,top:f.y,bottom:f.y+f.height},{start:l.x,end:l.right,top:d.y,bottom:d.y+d.height}];return{endBox:{start:s.x,end:s.right,top:s.y,bottom:s.bottom},startBox:{start:l.x,end:l.right,top:l.y,bottom:l.bottom},endSide:u,startSide:c,boxesReversed:!0,otherBoxes:p}}},{key:"drawForTask",value:function(e){this.drawForTimeSpan(e)}},{key:"getHoverTipHtml",value:function(e){var t=e.activeTarget,n=this.getDependencyForElement(t);if(!n)return null;var r=n.sourceTask,o=n.targetTask;return Xa.tpl(Qve(),this.L("from"),r.name,r.id,ame[n.type],this.L("to"),o.name,o.id,ume[n.type])}},{key:"createDependency",value:function(e){var t=e.source,n=e.target,r=e.sourceTerminal.dataset.side,o=e.targetTerminal.dataset.side,i=("left"===r?0:2)+("right"===o?1:0);this.store.add({fromEvent:t,toEvent:n,type:i,fromSide:r,toSide:o}),this.store.getProject().propagate()}},{key:"createMarkers",value:function(){rme(ome(t.prototype),"createMarkers",this).call(this);var e=(this.startMarker||this.endMarker).cloneNode(!0);e.setAttribute("id","arrowEndCritical"),this.client.svgCanvas.appendChild(e)}}])&&tme(n.prototype,r),o&&tme(n,o),t}(nU);function sme(e){return(sme="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dme(e,t){return!t||"object"!==sme(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pme(e,t,n){return(pme="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hme(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function hme(e){return(hme=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yme(e,t){return(yme=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}cme._$name="Dependencies",nC.registerFeature(cme,!0,"Gantt");var gme=function(e){function t(){return lme(this,t),dme(this,hme(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yme(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"DependencyEditor"}},{key:"defaultConfig",get:function(){return{items:[],draggable:{handleSelector:":not(button,.b-field-inner)"},axisLock:"flexible"}}}],(r=[{key:"processWidgetConfig",value:function(e){var n=this.dependencyEditFeature;return!("lagField"===e.ref&&!n.showLagField)&&!("deleteButton"===e.ref&&!n.showDeleteButton)&&(Object.assign(e,{}),pme(hme(t.prototype),"processWidgetConfig",this).call(this,e))}},{key:"afterShow",value:function(){var e,n=this.widgetMap.deleteButton;n&&(n.hidden=!this.record.isPartOfStore());for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(e=pme(hme(t.prototype),"afterShow",this)).call.apply(e,[this].concat(o))}},{key:"onInternalKeyDown",value:function(e){this.trigger("keyDown",{event:e}),pme(hme(t.prototype),"onInternalKeyDown",this).call(this,e)}}])&&fme(n.prototype,r),o&&fme(n,o),t}(Ya);function vme(e){return(vme="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mme(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kme(e,t){return!t||"object"!==vme(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sme(e,t,n){return(Sme="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ome(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ome(e){return(Ome=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eme(e,t){return(Eme=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}gme._$name="DependencyEditor";var Cme=function(e){function t(){return bme(this,t),kme(this,Ome(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eme(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"DependencyEdit"}},{key:"defaultConfig",get:function(){var e=this;return{autoClose:!0,saveAndCloseOnEnter:!0,showDeleteButton:!0,triggerEvent:"dependencydblclick",showLagField:!1,dependencyRecord:null,editorConfig:{title:"L{Edit dependency}",localeClass:this,closable:!0,items:[{type:"display",localeClass:this,label:"L{From}",editable:!1,ref:"fromNameField"},{type:"display",localeClass:this,label:"L{To}",ref:"toNameField"},{type:"combo",localeClass:this,label:"L{Type}",name:"type",ref:"typeField",editable:!1,valueField:"id",displayField:"name",items:Object.keys(JN.Type).map((function(t){return{id:JN.Type[t],name:e.L(t)}}))},{type:"duration",localeClass:this,label:"L{Lag}",name:"lag",ref:"lagField",allowNegative:!0}],bbar:[{type:"widget",cls:"b-label-filler"},{color:"b-green",localeClass:this,text:"L{Save}",ref:"saveButton"},{color:"b-gray",localeClass:this,text:"L{Delete}",ref:"deleteButton"},{color:"b-gray",localeClass:this,text:"L{Cancel}",ref:"cancelButton"}]}}}}],(r=[{key:"construct",value:function(e,n){var r,o=this;if(e.dependencyEdit=o,o.dependencyStore=e.dependencyStore,Sme(Ome(t.prototype),"construct",this).call(this,e,n),!e.features.dependencies)throw new Error("Dependencies feature required when using DependencyEdit");o.clientListenersDetacher=e.on((mme(r={},o.triggerEvent,o.onActivateEditor),mme(r,"thisObj",o),r))}},{key:"doDestroy",value:function(){this.clientListenersDetacher(),this.editor&&this.editor.destroy(),Sme(Ome(t.prototype),"doDestroy",this).call(this)}},{key:"onBeforeSave",value:function(e){}},{key:"onAfterSave",value:function(e){}},{key:"updateRecord",value:function(e){var t=this.values;if(e.beginBatch(),e.set(t),this.lagField){var n=this.lagField.value;e.setLag(n.magnitude,n.unit)}this.typeField&&"type"in t&&e.set({fromSide:null,toSide:null}),e.endBatch()}},{key:"onPopupKeyDown",value:function(e){var t=e.event;"Enter"===t.key&&this.saveAndCloseOnEnter&&"input"===t.target.tagName.toLowerCase()&&(t.preventDefault(),this.onSaveClick())}},{key:"onSaveClick",value:function(){this.save()&&this.editor.hide()}},{key:"onDeleteClick",value:function(){this.deleteDependency(),this.editor.hide()}},{key:"onCancelClick",value:function(){this.editor.hide()}},{key:"internalShowEditor",value:function(e){var t=this,n=t.client,r=t.lastPointerDownCoordinate;if(!1!==n.trigger("beforeDependencyEdit",{dependencyEdit:t,dependencyRecord:e})){var o=t.getEditor(e);if(t.loadRecord(e),n.trigger("beforeDependencyEditShow",{dependencyEdit:t,dependencyRecord:e,editor:o}),!r){var i=tr.from(t.client.element).center;r=[i.x-o.width/2,i.y-o.height/2]}o.showByPoint(r)}}},{key:"editDependency",value:function(e){this.client.readOnly||this.internalShowEditor(e)}},{key:"getEditor",value:function(){var e=this,t=e.editor;return t||(0===(t=e.editor=new gme(Mt.assign({dependencyEditFeature:e,autoShow:!1,anchor:!0,scrollAction:"realign",clippedBy:[e.client.timeAxisSubGridElement,e.client.bodyContainer],constrainTo:window,autoClose:e.autoClose,cls:e.cls,listeners:{keydown:e.onPopupKeyDown,thisObj:e}},e.editorConfig))).items.length&&console.warn("Editor configured without any `items`"),t.eachWidget((function(t){var n=t.ref||t.id;n&&!e[n]&&(e[n]=t)})),e.saveButton&&e.saveButton.on("click",e.onSaveClick,e),e.deleteButton&&e.deleteButton.on("click",e.onDeleteClick,e),e.cancelButton&&e.cancelButton.on("click",e.onCancelClick,e),e.editor)}},{key:"loadRecord",value:function(e){var t=this;t.fromNameField.value=e.sourceEvent.name,t.toNameField.value=e.targetEvent.name,t.lagField&&(t.lagField.unit=e.lagUnit),t.editor.record=t.dependencyRecord=e}},{key:"save",value:function(){var e=this,t=e.client,n=e.dependencyRecord;if(n&&e.isValid){var r=e.dependencyStore,o=e.values;if(!1!==t.trigger("beforeDependencySave",{dependencyRecord:n,values:o})){if(e.onBeforeSave(n),e.updateRecord(n),r&&!n.stores.length){if(!1===t.trigger("beforeDependencyAdd",{dependencyRecord:n,dependencyEdit:e}))return;r.add(n)}t.project&&t.project.propagate(),t.trigger("afterDependencySave",{dependencyRecord:n}),e.onAfterSave(n)}return n}}},{key:"deleteDependency",value:function(){var e=this;return!1!==e.client.trigger("beforeDependencyDelete",{dependencyRecord:e.dependencyRecord})&&(e.editor.containsFocus&&e.editor.revertFocus(),e.client.dependencyStore.remove(e.dependencyRecord),e.client.project&&e.client.project.propagate(),!0)}},{key:"onActivateEditor",value:function(e){var t=e.dependency,n=e.event;this.disabled||(this.lastPointerDownCoordinate=[n.clientX,n.clientY],this.editDependency(t))}},{key:"editorConfig",get:function(){return this._editorConfig},set:function(e){var t=this.getDefaultConfiguration().editorConfig;(e=Mt.assign({},t,e)).items=e.items||[],this._editorConfig=e}},{key:"isValid",get:function(){return Object.values(this.editor.widgetMap).every((function(e){return!(e.name&&!e.hidden)||!1!==e.isValid}))}},{key:"values",get:function(){var e={};return this.editor.eachWidget((function(t){t.name&&!t.hidden&&(e[t.name]=t.value)}),!0),e}}])&&wme(n.prototype,r),o&&wme(n,o),t}(es);function xme(e){return(xme="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dme(e,t){return!t||"object"!==xme(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rme(e){return(Rme=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pme(e,t){return(Pme=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Cme._$name="DependencyEdit",nC.registerFeature(Cme,!1);var Tme=function(e){function t(){return _me(this,t),Dme(this,Rme(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pme(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"DependencyEdit"}},{key:"defaultConfig",get:function(){return{showLagField:!0}}}],(r=null)&&jme(n.prototype,r),o&&jme(n,o),t}(Cme);function Ame(e){return(Ame="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ime(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fme(e,t){return!t||"object"!==Ame(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lme(e,t,n){return(Lme="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nme(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Nme(e){return(Nme=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hme(e,t){return(Hme=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Tme._$name="DependencyEdit",nC.registerFeature(Tme,!1);var Bme=["top","left","right","bottom"],zme={top:"b-b",right:"l-l",bottom:"t-t",left:"r-r"},Vme={top:1,bottom:1},Wme=function(e){function t(){return Mme(this,t),Fme(this,Nme(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hme(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Labels"}},{key:"defaultConfig",get:function(){return{labelCls:"b-sch-label",top:null,right:null,bottom:null,left:null,thisObj:null,blurAction:"cancel"}}},{key:"pluginConfig",get:function(){return{}}}],(r=[{key:"construct",value:function(e,n){var r=this;if(e.isVertical)throw new Error("Labels feature is not supported in vertical mode");r.scheduler=e,r.labelElements={},Lme(Nme(t.prototype),"construct",this).call(this,e,n);var o=r.top,i=r.bottom,a=r.left,u=r.right;(o||i||a||u)&&(r.schedulerDetatcher=e.on({eventpaint:"onEventPaint",eventrepaint:"onEventPaint",thisObj:r}),r.updateHostClasslist())}},{key:"updateHostClasslist",value:function(){var e=this.top,t=this.bottom,n=this.scheduler.element.classList;n.remove("b-labels-topbottom"),n.remove("b-labels-top"),n.remove("b-labels-bottom"),(e||t)&&(n.add("b-labels-topbottom"),e&&n.add("b-labels-top"),t&&n.add("b-labels-bottom"))}},{key:"onLabelDblClick",value:function(e){var t=e.target;if(t&&!this.scheduler.readOnly){var n=t.dataset.side,r=this[n],o=r.editor,i=r.field;if(r.recordType,o){var a=this.scheduler.resolveEventRecord(e.target);return o instanceof uh||(r.editor=new uh({appendTo:this.scheduler.element,blurAction:this.blurAction,inputField:o,scrollAction:"realign"})),r.editor.startEdit({target:t,align:zme[n],matchSize:!1,record:a,field:i}),e.stopImmediatePropagation(),!1}}}},{key:"processLabelSpec",value:function(e,t){if("function"==typeof e)e={renderer:e};else if("string"==typeof e)e={field:e};else{if(!e)return;e=Object.setPrototypeOf({},e)}var n,r=this.scheduler,o=r.eventStore,i=r.resourceStore,a=r.taskStore,u=(r.id,e),c=u.field,s=u.editor;return Vme[t]&&(r.milestoneWidth=null),c&&(o&&!a&&((n=o.modelClass.fieldMap[c])?(e.fieldDef=n,e.recordType="event"):Reflect.has(o.modelClass.prototype,c)&&(e.recordType="event")),!n&&a&&((n=a.modelClass.fieldMap[c])?(e.fieldDef=n,e.recordType="task"):Reflect.has(i.modelClass.prototype,c)&&(e.recordType="task")),!n&&i&&((n=i.modelClass.fieldMap[c])?(e.fieldDef=n,e.recordType="resource"):Reflect.has(i.modelClass.prototype,c)&&(e.recordType="resource")),s&&("boolean"==typeof s?r.editor={type:"textfield"}:"string"==typeof s&&(r.editor={type:s}),_r.on({element:r.timeAxisSubGrid.element,delegate:".b-sch-label",dblclick:"onLabelDblClick",thisObj:this}))),e}},{key:"doDestroy",value:function(){this.schedulerDetatcher&&this.schedulerDetatcher(),Lme(Nme(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){Lme(Nme(t.prototype),"doDisable",this).call(this,e),this.client.isPainted&&this.client.refresh()}},{key:"onEventPaint",value:function(e){if(xn.removeEachSelector(e.element,".b-sch-label"),!this.disabled){var t=!0,n=!1,r=void 0;try{for(var o,i=Bme[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this[a]&&this.appendLabel(a,e.element,e)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}}},{key:"appendLabel",value:function(e,t,n){this.labelElements[e]=xn.createElement({tag:"label",dataset:{side:e},parent:t}),this.updateLabel(e,n)}},{key:"updateLabel",value:function(e,t){var n,r=this,o=r[e],i=o.field,a=o.fieldDef,u=o.recordType,c=o.renderer,s=o.thisObj,l=r.labelElements[e];l.className="".concat(r.labelCls," ").concat(r.labelCls,"-").concat(e),c?n=c.call(s||r.thisObj||r,Object.assign({labelElement:l},t)):(n=t["".concat(u,"Record")][i],a&&"date"===a.type&&!c&&(n=xt.format(n,r.scheduler.displayDateFormat))),l.innerHTML=n||" "}},{key:"top",set:function(e){this._top=this.processLabelSpec(e,"top"),this.updateHostClasslist()},get:function(){return this._top}},{key:"right",set:function(e){this._right=this.processLabelSpec(e,"right"),this.updateHostClasslist()},get:function(){return this._right}},{key:"bottom",set:function(e){this._bottom=this.processLabelSpec(e,"bottom"),this.updateHostClasslist()},get:function(){return this._bottom}},{key:"left",set:function(e){this._left=this.processLabelSpec(e,"left"),this.updateHostClasslist()},get:function(){return this._left}}])&&Ime(n.prototype,r),o&&Ime(n,o),t}(es);function $me(e){return($me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ume(e,t){return!t||"object"!==$me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qme(e,t,n){return(qme="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xme(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xme(e){return(Xme=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kme(e,t){return(Kme=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Wme.featureClass="b-sch-labels",Wme._$name="Labels",nC.registerFeature(Wme,!1,"Scheduler");var Zme=["top","left","right","bottom"],Jme=function(e){function t(){return Yme(this,t),Ume(this,Xme(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kme(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Labels"}},{key:"pluginConfig",get:function(){return{chain:["onTaskDataGenerated"]}}}],(r=[{key:"construct",value:function(e,n){qme(Xme(t.prototype),"construct",this).call(this,e,n)}},{key:"onTaskDataGenerated",value:function(e){var t=this;if(!t.disabled){var n=!0,r=!1,o=void 0;try{for(var i,a=Zme[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;if(t[u]){var c=t[u],s=c.field,l=c.fieldDef,f=c.recordType,d=c.renderer,p=c.thisObj,h=void 0;d?h=d.call(p||t.thisObj||t,e):(h=e["".concat(f,"Record")][s],l&&"date"===l.type&&!d&&(h=xt.format(h,t.client.displayDateFormat))),e.wrapperChildren.push({tag:"label",className:"".concat(t.labelCls," ").concat(t.labelCls,"-").concat(u),dataset:{side:u,taskFeature:"label-".concat(u)},html:h||" "})}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}}])&&Gme(n.prototype,r),o&&Gme(n,o),t}(Wme);function Qme(e){return(Qme="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ebe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function tbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rbe(e,t){return!t||"object"!==Qme(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function obe(e,t,n){return(obe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ibe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ibe(e){return(ibe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function abe(e,t){return(abe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Jme._$name="Labels",nC.registerFeature(Jme,!1,"Gantt");var ube=function(e){function t(){return tbe(this,t),rbe(this,ibe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&abe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Indicators"}},{key:"defaultConfig",get:function(){var e=this;return{cls:"b-gantt-task-tooltip",forSelector:".b-indicator",recordType:"indicator",hoverDelay:500,defaultIndicators:{earlyDates:function(t){return t.earlyStartDate&&!t.isMilestone?{startDate:t.earlyStartDate,endDate:t.earlyEndDate,cls:"b-bottom b-early-dates",name:e.L("earlyDates")}:null},lateDates:function(t){return t.lateStartDate&&!t.isMilestone?{startDate:t.lateStartDate,endDate:t.lateEndDate,cls:"b-bottom b-late-dates",name:e.L("lateDates")}:null},constraintDate:function(t){return t.constraintDate?{startDate:t.constraintDate,cls:"b-bottom b-constraint-date b-constraint-type-".concat(t.constraintType),name:e.L(t.constraintType,void 0,"ConstraintTypePicker")}:null},deadlineDate:function(t){return t.deadlineDate?{startDate:t.deadlineDate,cls:"b-bottom b-deadline-date",name:e.L("deadlineDate")}:null}},items:{}}}},{key:"pluginConfig",get:function(){return{chain:["onTaskDataGenerated","render"]}}}],(r=[{key:"construct",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tipId="".concat(e.id,"-indicators-tip"),this.gantt=e;var r=n.items;delete n.items,obe(ibe(t.prototype),"construct",this).call(this,e,n),this.items=r}},{key:"createIndicatorDOMConfig",value:function(e,t){var n=this.gantt,r=this.renderData,o=e.cls,i=e.iconCls,a=n.getCoordinateFromDate(e.startDate),u=e.endDate?n.getCoordinateFromDate(e.endDate)-a:null,c=o&&o.isDomClassList?o:new Nt(o);return{className:Object.assign(c,{"b-indicator":1,"b-has-icon":e.iconCls}),style:{transform:"translate(".concat(a,"px, ").concat(r.top,"px)"),height:r.height,width:u,style:e.style},dataset:{taskId:"".concat(r.taskId,"-indicator-").concat(t),title:e.name},children:[i?{tag:"i",className:i}:null],elementData:e}}},{key:"onTaskDataGenerated",value:function(e){var t,n=this.items,r=[];for(var o in n){var i=n[o];if(this._indicatorStatus[o]&&"function"==typeof i){var a=i(e.taskRecord);a&&r.push(a)}}(t=e.extraConfigs).push.apply(t,ebe(r.map(this.createIndicatorDOMConfig,{gantt:this.gantt,renderData:e})))}},{key:"resolveTimeSpanRecord",value:function(e){return e.lastDomConfig.elementData}},{key:"template",value:function(e){var t=e.indicator;return e.endDate?"\n                ".concat(t.name?'<div class="b-gantt-task-title">'.concat(t.name,"</div>"):"",'\n                <table border="0" cellspacing="0" cellpadding="0">\n                <tr><td>').concat(this.L("Start"),":</td><td>").concat(e.startClockHtml,"</td></tr>\n               <tr><td>").concat(this.L("End"),":</td><td>").concat(e.endClockHtml,"</td></tr>\n                </table>\n            "):"\n            ".concat(t.name?'<div class="b-gantt-task-title">'.concat(t.name,"</div>"):"","\n            ").concat(e.startText,"\n        ")}},{key:"items",set:function(e){var t=this;t._indicators=Mt.assign({},t.defaultIndicators,e),t._indicatorAccessors={},t._indicatorStatus={};var n=function(e){t._indicatorStatus[e]=Boolean(t._indicators[e]),"function"!=typeof t._indicators[e]&&(t._indicators[e]=t.defaultIndicators[e]),Object.defineProperty(t._indicatorAccessors,e,{enumerable:!0,get:function(){return!!t._indicatorStatus[e]&&t._indicators[e]},set:function(n){t._indicatorStatus[e]=n,t.gantt.refresh()}})};for(var r in t._indicators)n(r)},get:function(){return this._indicatorAccessors}}])&&nbe(n.prototype,r),o&&nbe(n,o),t}($$);function cbe(e){return(cbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fbe(e,t){return!t||"object"!==cbe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dbe(e,t,n){return(dbe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pbe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pbe(e){return(pbe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hbe(e,t){return(hbe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ube._$name="Indicators",nC.registerFeature(ube,!1);var ybe=function(e){function t(){return sbe(this,t),fbe(this,pbe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hbe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"PercentBar"}},{key:"defaultConfig",get:function(){return{allowResize:!0}}},{key:"pluginConfig",get:function(){return{chain:["onPaint","onTaskDataGenerated"]}}}],(r=[{key:"onPaint",value:function(){var e=this,t=e.client;e.resize&&e.resize.destroy(),e.resize=new _w({name:"percentBarResize",outerElement:t.timeAxisSubGridElement,targetSelector:".b-gantt-task-percent",handleSelector:".b-gantt-task-percent-handle",allowResize:e.isResizable.bind(e),dragThreshold:0,listeners:{resizeStart:e.onResizeStart,resizing:e.onResizing,resize:e.onFinishResize,cancel:e.onCancelResize,thisObj:e}})}},{key:"doDestroy",value:function(){this.resize&&this.resize.destroy(),dbe(pbe(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){this.client.isPainted&&this.client.refresh(),dbe(pbe(t.prototype),"doDisable",this).call(this,e)}},{key:"isResizable",value:function(e){return this.allowResize&&!e.closest(".b-gantt-task-parent")}},{key:"cleanup",value:function(e){var t=this.client;e.element.closest(t.eventSelector).classList.remove("b-gantt-task-percent-resizing"),t.element.classList.remove("b-gantt-resizing-task-percent")}},{key:"onTaskDataGenerated",value:function(e){var t=e.task,n=e.children;t.milestone||this.disabled||n.unshift({className:"b-gantt-task-percent",dataset:{percent:Math.round(t.percentDone),taskBarFeature:"percentBar"},style:{width:t.percentDone+"%"},children:[{className:"b-gantt-task-percent-handle"}]})}},{key:"onResizeStart",value:function(e){e.context.element.closest(this.client.eventSelector).classList.add("b-gantt-task-percent-resizing"),this.client.element.classList.add("b-gantt-resizing-task-percent")}},{key:"onResizing",value:function(e){var t=e.context.element,n=t.closest(this.client.eventSelector),r=1===t.offsetWidth?0:t.offsetWidth;t.dataset.percent=Math.min(100,Math.round(100*r/n.offsetWidth))}},{key:"onFinishResize",value:function(e){var t=e.context,n=this.client,r=t.element,o=n.resolveTaskRecord(r);this.cleanup(t),o.setPercentDone(parseInt(r.dataset.percent))}},{key:"onCancelResize",value:function(e){var t=e.context;this.cleanup(t)}},{key:"allowResize",get:function(){return this._allowResize},set:function(e){this._allowResize=e,this.client.element.classList[e?"remove":"add"]("b-percentbar-drag-disabled")}}])&&lbe(n.prototype,r),o&&lbe(n,o),t}(es);function gbe(e){return(gbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vbe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function mbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wbe(e,t){return!t||"object"!==gbe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kbe(e,t,n){return(kbe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sbe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Sbe(e){return(Sbe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Obe(e,t){return(Obe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ybe._$name="PercentBar",nC.registerFeature(ybe,!0,"Gantt");var Ebe=function(e){function t(){return mbe(this,t),wbe(this,Sbe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Obe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ProgressLine"}},{key:"defaultConfig",get:function(){return{statusDate:new Date,drawLineOnlyWhenStatusDateVisible:!1,lineCls:"b-gantt-progress-line",containerCls:"b-progress-line-canvas"}}},{key:"pluginConfig",get:function(){return{chain:["onPaint"]}}}],(r=[{key:"construct",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;r.scheduleDraw=r.createOnFrame("draw",[],r,!0),kbe(Sbe(t.prototype),"construct",this).call(this,e,n),this.lineSegments=[],e.store.on({refresh:r.onRowStoreRefresh,thisObj:r}),e.rowManager.on({translaterow:r.onTranslateRow,refresh:r.scheduleDraw,rerender:r.scheduleDraw,changetotalheight:r.scheduleDraw,thisObj:r}),e.on({horizontalscroll:r.scheduleDraw,togglenode:r.scheduleDraw,taskdrag:r.onTaskDrag,taskdragabort:r.scheduleDraw,aftertaskdrop:r.scheduleDraw,timelineviewportresize:r.scheduleDraw,thisObj:r})}},{key:"doDisable",value:function(e){this.client.rendered&&this.draw(),kbe(Sbe(t.prototype),"doDisable",this).call(this,e)}},{key:"getSVGCanvas",value:function(){var e=this,t=e.client;if(!e._svgCanvas){var n=e._svgCanvas=document.createElementNS("http://www.w3.org/2000/svg","svg");n.retainElement=!0,n.classList.add(e.containerCls),t.foregroundCanvas.appendChild(n)}return e._svgCanvas}},{key:"onPaint",value:function(){this.client.taskStore.on({change:this.scheduleDraw,thisObj:this})}},{key:"onRowStoreRefresh",value:function(e){switch(e.action){case"sort":case"filter":this.scheduleDraw()}}},{key:"onTranslateRow",value:function(e){var t=e.row;t.lastTop>=0&&t.top!==t.lastTop&&this.scheduleDraw()}},{key:"onTaskDrag",value:function(e){var t=this,n=e.taskRecords,r=e.dragData;n.forEach((function(e){var n,o,i;t.updateLineForTask(e,(n={},o=e.id,i=xt.add(e.startDate,r.timeDiff),o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n))}))}},{key:"shouldDrawProgressLine",value:function(){return!this.disabled&&(!this.drawLineOnlyWhenStatusDateVisible||this.client.timeAxis.dateInAxis(this.statusDate))}},{key:"getStatusDateX",value:function(){var e=this.client,t=this.statusDate;return e.timeAxis.dateInAxis(t)||(t=t<e.timeAxis.startDate?e.timeAxis.startDate:e.timeAxis.endDate),e.getCoordinateFromDate(t)}},{key:"getRenderData",value:function(){var e=this.getStatusDateX(),t=this.client.subGrids.normal.element.getBoundingClientRect();return{statusDateX:e,viewXY:[this.client.scrollLeft-t.left,-t.top]}}},{key:"draw",value:function(){var e=this,t=e.client;if(e.lineSegments.forEach((function(e){return e.remove()})),e.lineSegments=[],e.shouldDrawProgressLine())if(t.isAnimating)t.on({transitionend:function(){e.scheduleDraw()},once:!0});else{var n=e.getRenderData(),r=[];t.rowManager.forEach((function(t){r.push.apply(r,vbe(e.getLineSegmentRenderData(t,n)))})),r.forEach((function(t){return e.drawLineSegment(t)})),t.trigger("progressLineDrawn")}}},{key:"updateLineForTask",value:function(e,t){var n=this;if(!n.disabled){var r=n.client.getRowFor(e);if(r){var o=[];n.lineSegments.forEach((function(t){t.dataset.taskId==e.id&&(o.push(t),t.remove())})),U.remove.apply(U,[n.lineSegments].concat(o)),n.getLineSegmentRenderData(r,n.getRenderData(),t).forEach((function(e){return n.drawLineSegment(e)}))}}}},{key:"getLineSegmentRenderData",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this,i=t.statusDateX,a=t.viewXY,u=o.client.getRecordFromElement(e.elements.normal),c=u.id,s=[];return o.isStatusLineTask(u,r[u.id])&&(n=o.calculateCoordinateForTask(u,a))&&s.push({dataset:{taskId:c},x1:i,y1:e.top,x2:n.x,y2:n.y},{dataset:{taskId:c},x1:n.x,y1:n.y,x2:i,y2:e.bottom}),n||s.push({dataset:{taskId:c},x1:i,y1:e.top,x2:i,y2:e.bottom}),s}},{key:"drawLineSegment",value:function(e){this.lineSegments.push(xn.createElement(Object.assign({tag:"line",ns:"http://www.w3.org/2000/svg",class:this.lineCls,parent:this.getSVGCanvas()},e)))}},{key:"isStatusLineTask",value:function(e,t){var n=this.statusDate;return t=t||e.startDate,e&&this.client.timeAxis.isTimeSpanInAxis(e)&&!e.milestone&&(e.isInProgress||!e.isStarted&&t<n||e.isCompleted&&t>n)}},{key:"calculateCoordinateForTask",value:function(e,t){var n=this.client,r=n.getElementFromTaskRecord(e),o=n.timeAxisViewModel.totalSize,i=r.querySelector(".b-gantt-task-percent");if(i){var a=i.getBoundingClientRect();return{x:Math.min(a.right+t[0],o),y:a.top+a.height/2+t[1]}}}},{key:"statusDate",get:function(){return this._statusDate},set:function(e){e instanceof Date&&(this._statusDate=e,this.scheduleDraw())}}])&&bbe(n.prototype,r),o&&bbe(n,o),t}(Wr(es));function Cbe(e){return(Cbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xbe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dbe(e,t){return!t||"object"!==Cbe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rbe(e,t,n){return(Rbe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pbe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Pbe(e){return(Pbe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tbe(e,t){return(Tbe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ebe._$name="ProgressLine",nC.registerFeature(Ebe);var Abe=function(e){function t(){return _be(this,t),Dbe(this,Pbe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tbe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"ProjectLines"}},{key:"defaultConfig",get:function(){return{showHeaderElements:!0,cls:"b-gantt-project-line"}}}],(r=[{key:"startConfigure",value:function(){}},{key:"onPaint",value:function(){var e=this,n=xbe(e.store.add([{name:e.L("Project Start")},{name:e.L("Project End")}]),2);e.startDateLine=n[0],e.endDateLine=n[1],e.updateDateFromProject(),e.client.project.taskStore.on({update:e.onProjectTaskStoreRecordUpdate,refresh:e.onProjectTaskStoreRefresh,thisObj:e}),Rbe(Pbe(t.prototype),"onPaint",this).call(this)}},{key:"updateLocalization",value:function(){var e=this;e.client.rendered&&(e.startDateLine.name=e.L("Project Start"),e.endDateLine.name=e.L("Project End"))}},{key:"updateDateFromProject",value:function(){var e=this.client.project;this.startDateLine.startDate=e.startDate,this.endDateLine.startDate=e.endDate}},{key:"onProjectTaskStoreRecordUpdate",value:function(e){e.record===this.client.project&&this.updateDateFromProject()}},{key:"onProjectTaskStoreRefresh",value:function(e){this.updateDateFromProject()}}])&&jbe(n.prototype,r),o&&jbe(n,o),t}(kY);function Mbe(e){return(Mbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ibe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lbe(e,t){return!t||"object"!==Mbe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nbe(e,t,n){return(Nbe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hbe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Hbe(e){return(Hbe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bbe(e,t){return(Bbe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Abe._$name="ProjectLines",nC.registerFeature(Abe,!0,"Gantt");var zbe=".".concat("b-task-rollup"),Vbe=function(e){function t(){return Ibe(this,t),Lbe(this,Hbe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bbe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Rollups"}},{key:"defaultConfig",get:function(){return{cls:"b-gantt-task-tooltip",align:"t-b",forSelector:zbe}}},{key:"pluginConfig",get:function(){return{chain:["onTaskDataGenerated","render"]}}}],(r=[{key:"construct",value:function(e,n){this.tipId="".concat(e.id,"-rollups-tip"),Nbe(Hbe(t.prototype),"construct",this).call(this,e,n),this.storeDetacher=e.taskStore.on({update:"onStoreUpdateRecord",thisObj:this})}},{key:"doDestroy",value:function(){this.storeDetacher&&this.storeDetacher(),Nbe(Hbe(t.prototype),"doDestroy",this).call(this)}},{key:"doDisable",value:function(e){var n=this,r=n.client.features.dependencies;n.tooltip&&(n.tooltip.disabled=e),n.client.refresh(),r&&n.client.setTimeout((function(){return r.scheduleDraw(!0)}),300),Nbe(Hbe(t.prototype),"doDisable",this).call(this,e)}},{key:"getTipHtml",value:function(e){var t=e.activeTarget,n=e.event,r=this.client.resolveTaskRecord(t),o=we.isEdge||we.isIE11,i=document[o?"msElementsFromPoint":"elementsFromPoint"](n.pageX+window.pageXOffset,n.pageY+window.pageYOffset),a=Array.from(i).filter((function(e){return e.classList.contains("b-task-rollup")})).sort((function(e,t){return parseInt(e.dataset.index,10)-parseInt(t.dataset.index,10)})),u=[],c=!0,s=!1,l=void 0;try{for(var f,d=a[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var p=f.value;u.push(r.children[parseInt(p.dataset.index,10)])}}catch(e){s=!0,l=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw l}}return this.template({task:r,children:u})}},{key:"template",value:function(e){var t=e.children,n=this,r=n.client,o=[];return t.map((function(e,t){var i=e.startDate,a=e.endDate,u=r.getFormattedDate(i),c=r.getDisplayEndDate(a,i),s=r.getFormattedDate(c);o.push('<div class="b-gantt-task-title '.concat(t?"b-follow-on":"",'">').concat(e.name,"</div><table>"),"<tr><td>".concat(n.L("Start"),":</td><td>").concat(n.clockTemplate.template({date:i,text:u,cls:"b-sch-tooltip-startdate"}),"</td></tr>"),"<tr><td>".concat(n.L("End"),":</td><td>").concat(e.isMilestone?"":n.clockTemplate.template({date:c,text:s,cls:"b-sch-tooltip-enddate"}),"</td></tr></table>"))})),o.join("")}},{key:"onStoreUpdateRecord",value:function(e){var t=e.record,n=e.changes;t.parent&&(n.rollup||n.startDate||n.endDate)&&this.client.taskRendering.redraw(t.parent)}},{key:"onTaskDataGenerated",value:function(e){var t=this,n=e.taskRecord,r=e.left,o=e.wrapperChildren;if(!this.disabled&&n.isParent){var i=n.children.slice().sort((function(e,t){return t.durationMS-e.durationMS}));o.push({className:"".concat("b-task-rollup","-wrap"),dataset:{taskFeature:"rollups"},children:i.map((function(e){var n=t.client.getTaskBox(e);return n&&e.rollup?{dataset:{index:e.parentIndex,rollupTaskId:e.id},className:"".concat("b-task-rollup"," ").concat(e.isMilestone?"b-milestone":""),style:{width:e.isMilestone?null:n.width,left:n.left-r}}:null})),syncOptions:{syncIdField:"rollupTaskId"}})}}}])&&Fbe(n.prototype,r),o&&Fbe(n,o),t}($$);function Wbe(e){return(Wbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ybe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gbe(e,t){return!t||"object"!==Wbe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ube(e,t,n){return(Ube="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qbe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function qbe(e){return(qbe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xbe(e,t){return(Xbe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Vbe._$name="Rollups",nC.registerFeature(Vbe,!1,"Gantt");var Kbe=function(e){function t(){return $be(this,t),Gbe(this,qbe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xbe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TaskContextMenu"}},{key:"defaultConfig",get:function(){return{defaultItems:{add:!0,indent:!0,outdent:!0,deleteTask:!0}}}}],(r=[{key:"construct",value:function(e,n){e.showRemoveRowInContextMenu=!1,e.features.contextMenu&&(e.features.contextMenu.disableCellContextMenu=!0),Ube(qbe(t.prototype),"construct",this).call(this,e,n)}},{key:"resolveRecord",value:function(e){return this.client.resolveTaskRecord(e)||this.client.getRecordFromElement(e)}},{key:"showContextMenuFor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.targetElement,r=t.event,o=this;e&&(n||(n=o.client.getElementFromTaskRecord(e)))&&o.showContextMenu({menuType:"task",taskElement:n,targetElement:n,taskRecord:e,event:r})}},{key:"beforeContextMenuShow",value:function(e){var t=e.taskRecord,n=e.items,r=e.namedItems,o=e.selection,i=(e.selectionIncludesContextTask=o.includes(t))&&o.length>1;n.editTask.hidden=i,r.add.hidden=i,r.addTaskAbove.hidden=i,r.addTaskBelow.hidden=i,r.milestone.hidden=i,r.subtask.hidden=i,r.successor.hidden=i,r.predecessor.hidden=i,r.convertToMilestone.hidden=i,r.predecessor.disabled=!t.previousSibling,r.outdent.disabled=t.parent===this.client.taskStore.rootNode}},{key:"namedItems",get:function(){var e=this.client;return this._namedItems||((this._namedItems={addTaskAbove:{text:e.L("Task above"),icon:"b-icon-up",onItem:function(t){var n=t.taskRecord;e.addTaskAbove(n)}},addTaskBelow:{text:e.L("Task below"),icon:"b-icon-down",onItem:function(t){var n=t.taskRecord;e.addTaskBelow(n)}},milestone:{text:e.L("Milestone"),icon:"b-fa-flag",name:"milestone",onItem:function(t){var n=t.taskRecord;e.addMilestonBelow(n)}},subtask:{text:e.L("Sub-task"),name:"subtask",onItem:function(t){var n=t.taskRecord;e.addSubtask(n)}},successor:{text:e.L("Successor"),onItem:function(t){var n=t.taskRecord;e.addSuccessor(n)}},predecessor:{text:e.L("Predecessor"),name:"predecessor",onItem:function(t){var n=t.taskRecord;e.addPredecessor(n)}},deleteTask:{text:e.L("Delete task"),icon:"b-icon-trash",name:"deleteTask",onItem:function(t){var n=t.selectionIncludesContextTask,r=t.selection,o=t.taskRecord;e.taskStore.remove(n?r:o)}},convertToMilestone:{text:e.L("Convert to milestone"),onItem:function(e){e.taskRecord.convertToMilestone()}},indent:{text:e.L("Indent"),icon:"b-fa-indent",onItem:function(t){var n=t.selectionIncludesContextTask,r=t.selection,o=t.taskRecord;e.indent(n?r:o)}},outdent:{text:e.L("Outdent"),icon:"b-fa-outdent",onItem:function(t){var n=t.selectionIncludesContextTask,r=t.selection,o=t.taskRecord;e.outdent(n?r:o)}}}).add={text:e.L("Add"),icon:"b-icon-add",menu:{items:{addTaskAbove:!0,addTaskBelow:!0,milestone:!0,subtask:!0,successor:!0,predecessor:!0}}}),this._namedItems}}])&&Ybe(n.prototype,r),o&&Ybe(n,o),t}(RH);function Zbe(e){return(Zbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ewe(e,t){return!t||"object"!==Zbe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function twe(e){return(twe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nwe(e,t){return(nwe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Kbe.featureClass="",Kbe._$name="TaskContextMenu",nC.registerFeature(Kbe,!0,"Gantt");var rwe=function(e){function t(){return Jbe(this,t),ewe(this,twe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nwe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TaskEditor"}},{key:"defaultConfig",get:function(){return{cls:"b-gantt-taskeditor b-schedulerpro-taskeditor"}}}],(r=null)&&Qbe(n.prototype,r),o&&Qbe(n,o),t}(p4);function owe(e){return(owe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function awe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uwe(e,t){return!t||"object"!==owe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cwe(e){return(cwe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function swe(e,t){return(swe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rwe._$name="TaskEditor";var lwe=function(e){function t(){return iwe(this,t),uwe(this,cwe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&swe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TaskEdit"}},{key:"defaultConfig",get:function(){return{triggerEvent:"taskdblclick",saveAndCloseOnEnter:!0,tabsConfig:null,editorClass:rwe}}},{key:"pluginConfig",get:function(){return{chain:["getTaskMenuItems","onTaskEnterKey"],assign:["editTask"]}}}],(r=[{key:"editTask",value:function(e,t){return this.editEvent(e,null,t)}},{key:"onActivateEditor",value:function(e){var t=e.taskRecord,n=e.taskElement;this.editTask(t,n)}},{key:"getElementFromTaskRecord",value:function(e){return this.client.getElementFromTaskRecord(e)}},{key:"onTaskEnterKey",value:function(e){var t=e.taskRecord;this.editTask(t)}},{key:"getTaskMenuItems",value:function(e){var t=this,n=e.taskRecord,r=e.resourceRecord,o=e.items;this.client.readOnly||(o.editTask={text:this.L("Edit"),icon:"b-icon b-icon-edit",weight:-200,disabled:this.disabled,onItem:function(){return t.editTask(n,r)}})}},{key:"onEventEnterKey",value:function(e){var t=e.taskRecord;e.target,this.editTask(t)}},{key:"scrollTaskIntoView",value:function(e){this.scrollEventIntoView(e)}},{key:"scrollEventIntoView",value:function(e){this.client.scrollTaskIntoView(e)}}])&&awe(n.prototype,r),o&&awe(n,o),t}(rse);lwe._$name="TaskEdit",nC.registerFeature(lwe,!0,"Gantt");function fwe(e){return(fwe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hwe(e,t){return!t||"object"!==fwe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ywe(e){return(ywe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gwe(e,t){return(gwe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vwe=function(e){function t(){return dwe(this,t),hwe(this,ywe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gwe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TaskTooltip"}},{key:"defaultConfig",get:function(){return{template:function(e){var t=this,n=e.taskRecord,r=t.decimalPrecision;null==r&&(r=t.client.durationDisplayPrecision);var o=Math.pow(10,r),i=Math.round(n.duration*o)/o;return"\n                    ".concat(n.name?'<div class="b-gantt-task-title">'.concat(n.name,"</div>"):"",'\n                    <table border="0" cellspacing="0" cellpadding="0">\n                    <tr><td>').concat(t.L("Start"),":</td><td>").concat(e.startClockHtml,"</td></tr>\n                    ").concat(n.milestone?"":"\n                        <tr><td>".concat(t.L("End"),":</td><td>").concat(e.endClockHtml,"</td></tr>\n                        <tr><td>").concat(t.L("Duration"),':</td><td class="b-right">').concat(i+" "+xt.getLocalizedNameOfUnit(n.durationUnit,1!==n.duration),"</td></tr>\n                        <tr><td>").concat(t.L("Complete"),':</td><td class="b-right">').concat(n.renderedPercentDone,"%</td></tr>\n                    "),"\n                    </table>\n                ")},decimalPrecision:null,cls:"b-gantt-task-tooltip"}}}],(r=null)&&pwe(n.prototype,r),o&&pwe(n,o),t}($$);function mwe(e){return(mwe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bwe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function wwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Swe(e,t){return!t||"object"!==mwe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Owe(e,t,n){return(Owe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ewe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ewe(e){return(Ewe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cwe(e,t){return(Cwe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}vwe._$name="TaskTooltip",nC.registerFeature(vwe,!0,"Gantt");var xwe=function(e){return function(e){function t(){return wwe(this,t),Swe(this,Ewe(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cwe(e,t)}(t,e),n=t,(r=[{key:"prepareComponent",value:(i=regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Owe(Ewe(t.prototype),"prepareComponent",this).call(this,n);case 2:r=this.element.querySelector(".b-sch-foreground-canvas"),xn.removeEachSelector(r,".b-gantt-task-wrap");case 4:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){bwe(o,n,r,a,u,"next",e)}function u(e){bwe(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"collectEvents",value:function(e,t){var n=e.length,r=t.client,o=this.exportMeta.subGrids.normal.rows;e.forEach((function(e,t){var i=o[o.length-n+t],a=r.store.getAt(e.dataIndex),u=i[3];if(a.isScheduled){var c=r.getElementFromTaskRecord(a,!1);c&&!u.has(a.id)&&u.set(a.id,[c.outerHTML,tr.from(c,c.offsetParent)])}}))}}])&&kwe(n.prototype,r),o&&kwe(n,o),t}(e)};function _we(e){return(_we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dwe(e,t){return!t||"object"!==_we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rwe(e){return(Rwe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pwe(e,t){return(Pwe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Twe=function(e){function t(){return jwe(this,t),Dwe(this,Rwe(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pwe(e,t)}(t,e),t}(xwe(Oq));function Awe(e){return(Awe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iwe(e,t){return!t||"object"!==Awe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fwe(e){return(Fwe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lwe(e,t){return(Lwe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Twe._$name="MultiPageExporter";var Nwe=function(e){function t(){return Mwe(this,t),Iwe(this,Fwe(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lwe(e,t)}(t,e),t}(xwe(Pq));function Hwe(e){return(Hwe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vwe(e,t){return!t||"object"!==Hwe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wwe(e,t,n){return(Wwe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$we(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $we(e){return($we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ywe(e,t){return(Ywe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Nwe._$name="SinglePageExporter";var Gwe=function(e){function t(){return Bwe(this,t),Vwe(this,$we(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ywe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"PdfExport"}},{key:"defaultConfig",get:function(){return{exporters:[Nwe,Twe]}}}],(r=[{key:"buildExportConfig",value:function(e){var n=Wwe($we(t.prototype),"buildExportConfig",this).call(this,e),r=n.client.taskStore.first;return Mt.assign(n,{fileName:r&&r.name.length&&r.name||n.client.$name},e)}}])&&zwe(n.prototype,r),o&&zwe(n,o),t}(Hq);function Uwe(e){return(Uwe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xwe(e,t){return!t||"object"!==Uwe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kwe(e){return(Kwe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zwe(e,t){return(Zwe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Gwe._$name="PdfExport",nC.registerFeature(Gwe,!1,"Gantt");var Jwe=function(e){function t(){return qwe(this,t),Xwe(this,Kwe(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zwe(e,t)}(t,e),t}(Ose);function Qwe(e){return(Qwe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tke(e,t){return!t||"object"!==Qwe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nke(e){return(nke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rke(e,t){return(rke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Jwe._$name="SubProjectModel";var oke=function(e){function t(){return eke(this,t),tke(this,nke(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rke(e,t)}(t,e),t}(Dse);function ike(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ake(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}oke._$name="TaskSegmentModel";var uke=new Date,cke=new Date(uke.getFullYear(),0,1),ske=new Dw;function lke(e,t){return parseInt(""+e+t)}var fke=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"generateAsync",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cke,o={startDate:r,tasksData:[],dependenciesData:[]},i=Math.ceil(e/10),a=Math.ceil(t/10),u=this.generateBlocks(i,a,o.startDate),c=0,s=0,l=0;return new Promise((function(e){!function t(){for(var r=0;r<100;r++){var i=u.next();if(i.done)return n&&n(s,l,!0),o.endDate=xt.add(o.startDate,Math.max(c,30),"days"),e(o);var a,f,d=i.value;(a=o.tasksData).push.apply(a,ike(d.tasksData)),(f=o.dependenciesData).push.apply(f,ike(d.dependenciesData)),d.projectDuration&&(c=Math.max(d.projectDuration,c)),s+=d.taskCount,l+=d.dependencyCount}n&&n(s,l,!1),setTimeout(t,0)}()}))}},{key:"generateBlocks",value:regeneratorRuntime.mark((function e(t,n,r){var o,i,a,u,c,s,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=ske.nextRandom(5)+2;return e&&(u+=t),t},o=1,i=1,a=0,u=0,s=0;case 3:if(!(s<t)){e.next=15;break}return l=o,f={tasksData:[{id:o++,name:"Parent "+l,startDate:r,expanded:!0,children:[{id:o++,name:"Sub-parent "+lke(l,1),startDate:r,expanded:!0,children:[{id:o++,name:"Task "+lke(l,11),startDate:r,duration:c(),percentDone:ske.nextRandom(100)},{id:o++,name:"Task "+lke(l,12),startDate:r,duration:c(),percentDone:ske.nextRandom(100)},{id:o++,name:"Task "+lke(l,13),startDate:r,duration:c(),percentDone:ske.nextRandom(100)},{id:o++,name:"Task "+lke(l,14),startDate:r,duration:c(),percentDone:ske.nextRandom(100)}]},{id:o++,name:"Sub-parent "+lke(l,2),startDate:r,expanded:!0,children:[{id:o++,name:"Task "+lke(l,21),startDate:r,duration:c(),percentDone:ske.nextRandom(100)},{id:o++,name:"Task "+lke(l,22),startDate:r,duration:c(),percentDone:ske.nextRandom(100)},{id:o++,name:"Task "+lke(l,23),startDate:r,duration:c(),percentDone:ske.nextRandom(100)}]}]}],dependenciesData:[{id:i++,fromEvent:l+2,toEvent:l+3},{id:i++,fromEvent:l+3,toEvent:l+4},{id:i++,fromEvent:l+4,toEvent:l+5},{id:i++,fromEvent:l+5,toEvent:l+7},{id:i++,fromEvent:l+7,toEvent:l+8},{id:i++,fromEvent:l+8,toEvent:l+9}],taskCount:10,dependencyCount:5},a+=u,u=0,f.projectDuration=a,s%n!=0?(f.dependenciesData.push({id:i++,fromEvent:l-2,toEvent:l+2}),f.dependencyCount++):a=0,o++,e.next=12,f;case 12:s++,e.next=3;break;case 15:case"end":return e.stop()}}),e)}))}],n&&ake(t.prototype,n),r&&ake(t,r),e}();fke._$name="ProjectGenerator";n(246),n(248);function dke(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pke(e){return(pke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vke(e,t){return!t||"object"!==pke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mke(e,t,n){return(mke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bke(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function bke(e){return(bke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wke(e,t){return(wke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kke={releaseElement:1,reuseElement:1},Ske={newElement:1,reuseOwnElement:1,reuseElement:1},Oke=function(e){function t(){return yke(this,t),vke(this,bke(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wke(e,t)}(t,e),n=t,o=[{key:"properties",get:function(){return{rowMap:new Map}}}],(r=[{key:"construct",value:function(e){this.gantt=e,e.rowManager.on({renderDone:"onRenderDone",removeRows:"onRemoveRows",beforeRowHeight:"onBeforeRowHeightChange",thisObj:this}),mke(bke(t.prototype),"construct",this).call(this,{})}},{key:"init",value:function(){}},{key:"bindTaskStore",value:function(){}},{key:"refreshRows",value:function(){}},{key:"onTimeAxisViewModelUpdate",value:function(){this.updateFromHorizontalScroll(this.gantt.timeAxisSubGrid.scrollable.x)}},{key:"onViewportResize",value:function(){}},{key:"onDragAbort",value:function(){}},{key:"onBeforeRowHeightChange",value:function(e){var t=this.gantt;t.foregroundCanvas&&(t.foregroundCanvas.style.fontSize="".concat((e&&e.height||t.rowHeight)-2*t.resourceMargin,"px"))}},{key:"getVisibleDateRange",value:function(){return this.visibleDateRange}},{key:"getTaskBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.gantt;if(n){var i=r.getElementFromTaskRecord(e);if(i)return tr.from(i,o.timeAxisSubGridElement)}if(!e.startDate||e.isTask&&!o.taskStore.isAvailable(e))return null;var a=o.timeAxis,u=e.milestone?o.features.dependencies.pathFinder.startArrowMargin:0,c=a.startDate,s=a.endDate,l=e.startDate,f=e.endDate||(null!=e.duration?xt.add(l,e.duration,e.durationUnit):null),d=o.taskStore.indexOf(e)*o.rowManager.rowOffsetHeight+o.resourceMargin,p=o.rowHeight-2*o.resourceMargin;if(!t&&(f<c||l>s))return null;var h,y=null;if(t&&l<c)h=o.getCoordinateFromDate(c)-u;else if(t&&l>s)h=o.getCoordinateFromDate(s)+u;else if(l<c){var g=o.timeAxisViewModel.getSingleUnitInPixels("second"),v=(a.startMS-e.startDateMS)/1e3,m=v*g;h=o.getCoordinateFromDate(c)-m}else h=o.getCoordinateFromDate(l);if(f)if(t&&f<c)y=o.getCoordinateFromDate(c)-u;else if(t&&f>s)y=o.getCoordinateFromDate(s)+u;else if(f>s){var b=o.timeAxisViewModel.getSingleUnitInPixels("second"),w=(e.endDateMS-a.endMS)/1e3,k=w*b;y=o.getCoordinateFromDate(s)+k}else y=o.getCoordinateFromDate(f);var S=e.isMilestone?0:y-h;return!t&&h+S<0?null:new tr(h,d,S,p)}},{key:"getRowRegion",value:function(e,t,n){var r=this.gantt,o=r.getRowFor(e);if(!o)return null;var i=o.getElement(r.timeAxisSubGrid.region),a=r.timeAxis.startDate,u=r.timeAxis.endDate,c=t?xt.max(a,t):a,s=n?xt.min(u,n):u,l=r.getCoordinateFromDate(c),f=r.getCoordinateFromDate(s,!0,!0),d=o.top+r.scrollTop,p=Math.min(l,f),h=d+i.offsetHeight;return new tr(p,d,Math.max(l,f)-p,h-d)}},{key:"getDateFromXY",value:function(e,t,n){var r=e[0];return n||(r=this.translateToScheduleCoordinate(r)),this.gantt.timeAxisViewModel.getDateFromPosition(r,t)}},{key:"translateToScheduleCoordinate",value:function(e){return e-this.gantt.timeAxisSubGridElement.getBoundingClientRect().left+this.gantt.scrollLeft}},{key:"translateToPageCoordinate",value:function(e){var t=this.gantt.timeAxisSubGridElement;return e+t.getBoundingClientRect().left-t.scrollLeft}},{key:"getElementFromTaskRecord",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.gantt.rowManager.getRowFor(e);if(n&&this.rowMap.has(n)){var r=this.rowMap.get(n)[0]._element;if(r)return t?r.syncIdMap.task:r}return null}},{key:"getConnectorStartSide",value:function(e){return"left"}},{key:"getConnectorEndSide",value:function(e){return"right"}},{key:"onRemoveRows",value:function(e){var t=this;e.rows.forEach((function(e){return t.rowMap.delete(e)})),this.onRenderDone()}},{key:"updateFromHorizontalScroll",value:function(e){var t=this.gantt,n=t.timeAxisSubGrid.width,r=t.getDateFromX(Math.max(0,e-100)),o=t.getDateFromX(e+n+100)||t.endDate,i=t.getDateFromX(e),a=t.getDateFromX(e+n)||t.endDate;this._visibleDateRange={startDate:i,endDate:a},this.gantt.timeView.range={startDate:r,endDate:o}}},{key:"populateTaskRenderData",value:function(e,t){var n=this.gantt,r=!(!n.features.baselines||!n.features.baselines.disabled),o={className:"b-gantt-task-content",dataset:{taskBarFeature:"content"},children:[]};if(e){var i,a,u=void 0===t.isResizable||t.isResizable;e.startsOutsideView&&(!0===u?u="end":"start"===u&&(u=!1)),e.endsOutsideView&&(!0===u?u="start":"end"===u&&(u=!1)),Object.assign(e,{iconCls:new Nt(t.taskIconCls),id:n.getEventRenderId(t),style:t.style||"",taskId:t.id,wrapperCls:new Nt((i={},hke(i,n.eventCls+"-wrap",1),hke(i,"".concat(n.eventCls,"-parent"),t.isParent),hke(i,"b-milestone-wrap",t.milestone),hke(i,"b-has-baselines",t.hasBaselines&&!r),i)),cls:t.isResourceTimeRange?new Nt:t.cls.clone(),extraConfigs:[]}),Object.assign(e.cls,(hke(a={},n.eventCls,1),hke(a,n.generatedIdCls,t.hasGeneratedId),hke(a,n.dirtyCls,t.modifications),hke(a,n.committingCls,t.isCommitting),hke(a,n.endsOutsideViewCls,e.endsOutsideView),hke(a,n.startsOutsideViewCls,e.startsOutsideView),hke(a,n.fixedEventCls,!1===t.isDraggable),hke(a,"b-sch-event-resizable-".concat(u),1),hke(a,"b-milestone",t.milestone),hke(a,"b-critical",t.critical),hke(a,"b-task-started",t.percentDone>0),hke(a,"b-task-finished",t.isCompleted),hke(a,"b-task-selected",n.selectedRecords.includes(t)),a));var c=t.eventStyle||n.eventStyle,s=t.eventColor||n.eventColor;if(e.eventColor=s,e.eventStyle=c,n.taskRenderer){var l=n.taskRenderer.call(n.taskRendererThisObj||n,{taskRecord:t,tplData:e,renderData:e});"string"==typeof e.cls&&(e.cls=new Nt(e.cls)),"string"==typeof e.iconCls&&(e.iconCls=new Nt(e.iconCls));var f=null;"string"==typeof l&&l.includes("<")?f={html:l}:"string"==typeof l||"object"===pke(l)?f=l:null!=l&&(f=String(l)),f&&(o.children.push(f),e.cls.add("b-has-content"))}e.cls["b-sch-event-withicon"]=e.iconCls.length,e.wrapperCls["b-sch-style-".concat(e.eventStyle)]=e.eventStyle,e.eventColor&&e.eventColor.startsWith("#")?e.style="background-color:".concat(e.eventColor,";")+e.style:e.wrapperCls["b-sch-color-".concat(e.eventColor)]=e.eventColor,e.iconCls&&e.iconCls.length&&o.children.unshift({tag:"i",className:e.iconCls}),o.children.length&&e.children.push(o)}e.taskContent=o,e.wrapperChildren=[],n.onTaskDataGenerated(e)}},{key:"renderer",value:function(e){var t=e.row,n=e.record,r=this,o=r.getTaskBox(n);if(o){var i={top:o.top,left:o.left,width:o.width,height:o.height,taskRecord:n,task:n,row:t,children:[]};r.populateTaskRenderData(i,n);var a={className:i.wrapperCls,tabIndex:"0",children:[{className:i.cls,style:(i.internalStyle||"")+(i.style||""),children:i.children,dataset:{taskFeature:"task"},syncOptions:{syncIdField:"taskBarFeature"}}].concat(dke(i.wrapperChildren)),style:{transform:"translate(".concat(i.left,"px, ").concat(i.top,"px)"),height:i.height,width:i.width,zIndex:i.zIndex},dataset:{taskId:i.taskId},elementData:i,syncOptions:{syncIdField:"taskFeature",releaseThreshold:0}};r.gantt.trigger("beforeRenderTask",{renderData:i,domConfig:a}),r.rowMap.set(t,[a].concat(dke(i.extraConfigs)))}else r.rowMap.delete(t)}},{key:"onRenderDone",value:function(){var e=this.gantt,t=Array.from(this.rowMap.values()).flat();Ib.sync({domConfig:{onlyChildren:!0,children:t},targetElement:e.foregroundCanvas,syncIdField:"taskId",callback:function(t){var n=t.action,r=t.domConfig,o=t.lastDomConfig,i=t.element;if("none"!==n&&r&&r.className&&r.className[e.eventCls+"-wrap"]){var a=Ske[n];if(kke[n]&&o){var u={renderData:o.elementData,taskRecord:o.elementData.taskRecord,element:i};e.trigger("releaseTask",u)}if(a){var c={renderData:r.elementData,taskRecord:r.elementData.taskRecord,element:i};c.reusingElement="reuseElement"===n,e.trigger("renderTask",c)}}}})}},{key:"redraw",value:function(e){var t=this.gantt.rowManager.getRowFor(e);if(t){var n=t.getCell(this.gantt.timeAxisColumn.id);n&&(t.renderCell(n),this.onRenderDone())}}},{key:"visibleDateRange",get:function(){return this._visibleDateRange}}])&&gke(n.prototype,r),o&&gke(n,o),t}(Y);function Eke(e){return(Eke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _ke(e,t){return!t||"object"!==Eke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jke(e,t,n){return(jke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dke(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Dke(e){return(Dke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rke(e,t){return(Rke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Oke._$name="NewTaskRendering";var Pke=/-/g;function Tke(e){return(Tke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ake(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ike(e,t){return!t||"object"!==Tke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fke(e){return(Fke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lke(e,t){return(Lke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nke(e){return(Nke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zke(e,t){return!t||"object"!==Nke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vke(e){return(Vke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wke(e,t){return(Wke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $ke={block:"nearest",edgeOffset:20};function Yke(e){return(Yke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qke(e,t){return!t||"object"!==Yke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xke(e,t,n){return(Xke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kke(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Kke(e){return(Kke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zke(e,t){return(Zke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jke=["barMargin","tickSize","zoomLevel","startDate","endDate"];function Qke(e){return(Qke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nSe(e,t){return!t||"object"!==Qke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rSe(e){return(rSe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oSe(e,t){return(oSe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iSe(e){return(iSe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cSe(e,t){return!t||"object"!==iSe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sSe(e){return(sSe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lSe(e,t){return(lSe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fSe(e){return(fSe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hSe(e,t){return!t||"object"!==fSe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ySe(e){return(ySe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gSe(e,t){return(gSe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vSe={AddNewColumn:{"New Column":"New Column"},CalendarColumn:{Calendar:"Calendar"},EarlyStartDateColumn:{"Early Start":"Early Start"},EarlyEndDateColumn:{"Early End":"Early End"},LateStartDateColumn:{"Late Start":"Late Start"},LateEndDateColumn:{"Late End":"Late End"},TotalSlackColumn:{"Total Slack":"Total Slack"},ConstraintDateColumn:{"Constraint Date":"Constraint Date"},ConstraintTypeColumn:{"Constraint Type":"Constraint Type"},DeadlineDateColumn:{Deadline:"Deadline"},DependencyColumn:{"Invalid dependency found, change is reverted":"Invalid dependency found, change is reverted"},DurationColumn:{Duration:"Duration"},EffortColumn:{Effort:"Effort"},EndDateColumn:{Finish:"Finish"},EventModeColumn:{"Event mode":"Event mode",Manual:"Manual",Auto:"Auto"},ManuallyScheduledColumn:{"Manually scheduled":"Manually scheduled"},MilestoneColumn:{Milestone:"Milestone"},NameColumn:{Name:"Name"},NoteColumn:{Note:"Note"},PercentDoneColumn:{"% Done":"% Done"},PredecessorColumn:{Predecessors:"Predecessors"},ResourceAssignmentColumn:{"Assigned Resources":"Assigned Resources","more resources":"more resources"},RollupColumn:{Rollup:"Rollup"},SchedulingModeColumn:{"Scheduling Mode":"Scheduling Mode"},SequenceColumn:{Sequence:"Sequence"},ShowInTimelineColumn:{"Show in timeline":"Show in timeline"},StartDateColumn:{Start:"Start"},SuccessorColumn:{Successors:"Successors"},WBSColumn:{WBS:"WBS"},ProjectLines:{"Project Start":"Project start","Project End":"Project end"},TaskTooltip:{Start:"Start",End:"End",Duration:"Duration",Complete:"Complete"},AssignmentGrid:{Name:"Resource name",Units:"Units","%":"%",unitsTpl:function(e){var t=e.value;return t?t+"%":""}},AssignmentPicker:{Save:"Save",Cancel:"Cancel"},AssignmentEditGrid:{Name:"Resource name",Units:"Units"},Gantt:{Add:"Add...","New Task":"New task","Task above":"Task above","Task below":"Task below","Delete task":"Delete task",Milestone:"Milestone","Sub-task":"Subtask",Successor:"Successor",Predecessor:"Predecessor",changeRejected:"Scheduling engine rejected the changes"},GanttCommon:{},Indicators:{Indicators:"Indicators",earlyDates:"Early start/end",lateDates:"Late start/end",constraintDate:"Constraint",deadlineDate:"Deadline"},ProTaskEdit:{"Edit event":"Edit task"}};for(var mSe in ase)vSe[mSe]=ase[mSe];function bSe(e){return(bSe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wSe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function kSe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){wSe(i,r,o,a,u,"next",e)}function u(e){wSe(i,r,o,a,u,"throw",e)}a(void 0)}))}}function SSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ESe(e,t){return!t||"object"!==bSe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CSe(e,t,n,r){return(CSe="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,i=jSe(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function xSe(e,t,n,r,o){if(!CSe(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function _Se(e,t,n){return(_Se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=jSe(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function jSe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DSe(e)););return e}function DSe(e){return(DSe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RSe(e,t){return(RSe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Te.registerLocale("En",{desc:"English",locale:vSe});var PSe=Object.freeze({}),TSe=0,ASe=function(e){function t(){return SSe(this,t),ESe(this,DSe(t).apply(this,arguments))}var n,r,o,i,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RSe(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e){var n=this,r=Boolean(e.calendars||e.taskStore||e.dependencyStore||e.resourceStore||e.assignmentStore),o=Boolean(e.calendars||e.tasks||e.dependencies||e.resources||e.assignments);e.features||(e.features={}),"tree"in e.features||(e.features.tree=!0);var i=e.project;if(i&&(r||o))throw new Error("Providing both project and inline data is not supported");i instanceof mve||(i=e.project=new mve(Mt.assign({calendarsData:e.calendars,eventsData:e.tasks,dependenciesData:e.dependencies,resourcesData:e.resources,assignmentsData:e.assignments,resourceStore:e.resourceStore,eventStore:e.taskStore,assignmentStore:e.assignmentStore,dependencyStore:e.dependencyStore,timeRangeStore:e.timeRangeStore},i)),delete e.resourceStore,delete e.taskStore,delete e.assignmentStore,delete e.dependencyStore,delete e.timeRangeStore,delete e.calendars,delete e.resources,delete e.tasks,delete e.assignments,delete e.dependencies),i.getEventStore().on({add:n.onTaskStoreAddOrRemove,remove:n.onTaskStoreAddOrRemove,prio:-1,thisObj:n}),i.on({eventstorechanged:n.onTaskStoreChange,refresh:n.onProjectRefresh,load:n.onProjectLoad,commit:n.onProjectCommit,prio:1e3,thisObj:n}),e.crudManager=i,_Se(DSe(t.prototype),"construct",this).call(this,e),n.features.cellEdit&&(n.features.cellEdit.addNewAtEnd={name:n.L("New Task"),startDate:i.startDate,duration:1,durationUnit:n.timeAxis.unit}),n.on("taskclick",n.onTaskBarClick,n)}},{key:"onStoreUpdateRecord",value:function(e){var n,r=this;if(!this.project.isPropagating())return this.runWithTransition((function(){n=_Se(DSe(t.prototype),"onStoreUpdateRecord",r).call(r,e)})),n}},{key:"onProjectCommit",value:function(e){var t=e.records;if(this.isPainted){var n=this.rowManager,r=[],o=!0,i=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;if(s.isTask&&this.taskStore.isAvailable(s)){var l=n.getRowFor(s);l&&r.push(l)}}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}r.sort((function(e,t){return e.index-t.index})),this.runWithTransition((function(){n.renderRows(r)}))}}},{key:"onTaskStoreAddOrRemove",value:function(e){var t=e.isExpand,n=e.isCollapse;t||n||this.project.stm.isRestoring||this.project.isPropagating()||this.project.propagate()}},{key:"onProjectRefresh",value:function(){this.refreshRows();var e=this.features.dependencies;this.dependencies.forEach((function(t){return e.addToGridCache(t)}))}},{key:"onProjectLoad",value:function(){"startDate"in this.initialConfig||!this.project.startDate||(this.startDate=this.project.startDate)}},{key:"onTaskDataGenerated",value:function(){}},{key:"onTaskBarClick",value:function(e){var t=e.taskRecord;t.isLeaf||this.toggleCollapse(t)}},{key:"triggerChangeEvent",value:function(e,n){_Se(DSe(t.prototype),"triggerChangeEvent",this).call(this,e,n);var r=this;function o(e,t){var n=r.getElementFromTaskRecord(e);n&&n.classList[t?"add":"remove"]("b-task-selected")}"row"===e.mode&&(e.selected.map((function(e){return o(e,!0)})),e.deselected.map((function(e){return o(e,!1)})))}},{key:"toggleEmptyText",value:function(){this.bodyContainer&&this.bodyContainer.classList[this.rowManager.rowCount||!this.project.crudLoaded?"remove":"add"]("b-grid-empty")}},{key:"getTimeSpanMouseEventParams",value:function(e,t){var n=this.resolveTaskRecord(e);return n?{taskRecord:n,taskElement:e,event:t}:null}},{key:"getScheduleMouseEventParams",value:function(e){return{taskRecord:this.store.getById(e.id)}}},{key:"resolveTimeSpanRecord",value:function(e){return this.resolveTaskRecord(e)}},{key:"repaintEventsForResource",value:function(e){this.taskRendering.redraw(e)}},{key:"addTask",value:(u=kSe(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,c,s,l,f,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:PSe,r=this,o=n.milestone,i=n.above,a=n.asChild,u=n.asPredecessor,c=n.asSuccessor,s=r.store.getProject(),l=t.parent,f=t.copy(),l.isRoot&&(f.startDate=s.startDate),f.name=o?"".concat(r.L("New milestone")," ").concat(++TSe):"".concat(r.L("New task")," ").concat(++TSe),a?t.insertChild(f,t.firstChild):i?t.parent.insertChild(f,t):l.insertChild(f,t.nextSibling),!o){e.next=10;break}return e.next=8,f.convertToMilestone();case 8:e.next=13;break;case 10:if(s.isPropagating()){e.next=13;break}return e.next=13,s.propagate();case 13:if(c?r.dependencyStore.add({fromEvent:t,toEvent:f,type:i2.EndToStart,fromSide:"right",toSide:"left"}):u&&r.dependencyStore.add({fromEvent:f,toEvent:t,type:i2.EndToStart,fromSide:"right",toSide:"left"}),!c&&!u){e.next=17;break}return e.next=17,s.propagate();case 17:return e.abrupt("return",f);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"addTaskAbove",value:function(e){return this.addTask(e,{above:!0})}},{key:"addTaskBelow",value:function(e){return this.addTask(e)}},{key:"addMilestonBelow",value:function(e){return this.addTask(e,{milestone:!0})}},{key:"addSubtask",value:function(e){var t=this.addTask(e,{asChild:!0});return this.toggleCollapse(e,!1),t}},{key:"addSuccessor",value:function(e){return this.addTask(e,{asSuccessor:!0})}},{key:"addPredecessor",value:function(e){return this.addTask(e,{above:!0,asPredecessor:!0})}},{key:"indent",value:(a=kSe(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.next=3,n.taskStore.indent(t);case 3:return(r=e.sent)===N5.Canceled&&Cu.show(n.L("changeRejected")),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"outdent",value:(i=kSe(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.next=3,n.taskStore.outdent(t);case 3:return(r=e.sent)===N5.Canceled&&Cu.show(n.L("changeRejected")),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"isGantt",get:function(){return!0}},{key:"columns",get:function(){return _Se(DSe(t.prototype),"columns",this)},set:function(e){if(e){var n=e;Array.isArray(e)||(n=e.data,this._thisIsAUsedExpression(this.taskStore)),n.some((function(e){var t=e instanceof XS?e.constructor:rO.getColumnClass(e.type)||XS;return t===cde||t.prototype instanceof cde}))||n.unshift({type:"name"})}xSe(DSe(t.prototype),"columns",e,this,!0)}},{key:"timeAxisViewModel",set:function(e){xSe(DSe(t.prototype),"timeAxisViewModel",e,this,!0),this.taskStore&&(this.timeAxisViewModel.store=this.taskStore)},get:function(){return _Se(DSe(t.prototype),"timeAxisViewModel",this)}},{key:"currentOrientation",get:function(){var e=this;return e._currentOrientation||(e.taskRendering=e._currentOrientation=new Oke(e)),e._currentOrientation}}],o=[{key:"$name",get:function(){return"GanttBase"}},{key:"defaultConfig",get:function(){return{project:null,resourceImageFolderPath:null,defaultResourceImageName:null,calendars:null,resources:null,tasks:null,dependencies:null,assignments:null,eventCls:"b-gantt-task",eventBarTextField:null,eventLayout:"none",eventSelectionDisable:!0,eventColor:null,eventStyle:null,rowHeight:45,scheduledEventName:"task",eventScrollMode:"move",overScheduledEventClass:"b-gantt-task-hover",mode:"horizontal",timeCellCls:"b-sch-timeaxis-cell",timeCellSelector:".b-sch-timeaxis-cell",focusCls:"b-active",durationDisplayPrecision:1,taskRenderer:null}}}],r&&OSe(n.prototype,r),o&&OSe(n,o),t}(Xs(eK).mixes(xM,(function(e){return function(e){function t(){return Cke(this,t),_ke(this,Dke(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rke(e,t)}(t,e),n=t,(r=[{key:"resolveEventRecord",value:function(e){return this.resolveTaskRecord(e)}},{key:"resolveTaskRecord",value:function(e){return(e=xn.up(e,this.eventSelector))?this.taskStore.getById(e.dataset.taskId):null}},{key:"getElementFromTaskRecord",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.taskRendering.getElementFromTaskRecord(e,t)}},{key:"getElementFromEventRecord",value:function(e){return this.getElementFromTaskRecord(e)}},{key:"getEventRenderId",value:function(e){return"".concat(this.id.toString().replace(Pke,"_"),"-").concat(e.id)}},{key:"getEventData",value:function(e){var n=this.resolveTimeSpanRecord(e.target);if(n){var r=this.getCell({record:n,column:this.timeAxisColumn}),o=tg.get(r),i=o.id,a=o.columnId;return{cellElement:r,cellData:o,columnId:a,id:i,record:n,cellSelector:{id:i,columnId:a}}}return jke(Dke(t.prototype),"getEventData",this).call(this,e)}},{key:"widgetClass",get:function(){}}])&&xke(n.prototype,r),o&&xke(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return Ake(this,t),Ike(this,Fke(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lke(e,t)}(t,e),n=t,(r=[{key:"getScheduleRegion",value:function(e,t){var n,r=this,o=r.timeAxisSubGridElement;if(e){var i=r.getElementFromTaskRecord(e);if(n=tr.from(r.getRowById(e.id).getElement("locked")),i){var a=tr.from(i,o);n.y=a.y,n.bottom=a.bottom}else n.y=n.y+r.barMargin,n.bottom=n.bottom-r.barMargin}else(n=tr.from(o).moveTo(null,0)).width=o.scrollWidth,n.y=n.y+r.barMargin,n.bottom=n.bottom-r.barMargin;var u=r.timeAxis.startDate,c=r.timeAxis.endDate,s=r.getDateConstraints(e)||{start:u,end:c},l=n.y,f=n.bottom,d=r.getCoordinateFromDate(xt.max(u,s.start)),p=r.getCoordinateFromDate(xt.min(c,s.end));return t||(d=r.translateToPageCoordinate(d),p=r.translateToPageCoordinate(p)),{top:l,right:Math.max(d,p),bottom:f,left:Math.min(d,p)}}},{key:"translateToPageCoordinate",value:function(e){var t=this.timeAxisSubGridElement;return e+t.getBoundingClientRect().left-t.scrollLeft}},{key:"isRowVisible",value:function(e){return this.store.indexOf(e)>=0}},{key:"getTaskBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.taskRendering.getTaskBox(e,t,n)}},{key:"widgetClass",get:function(){}}])&&Mke(n.prototype,r),o&&Mke(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return Hke(this,t),zke(this,Vke(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wke(e,t)}(t,e),n=t,(r=[{key:"scrollTaskIntoView",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$ke,r=e.startDate,o=e.endDate,i=this;if(null==n.edgeOffset&&(n.edgeOffset=20),!e.isScheduled)return this.scrollRowIntoView(e,n);r=r||o,o=o||r;var a=r<i.timeAxis.startDate|(o>i.timeAxis.endDate)<<1;if(a&&!1!==n.extendTimeAxis){var u,c,s=i.timeAxis.endDate-i.timeAxis.startDate;3===a?i.timeAxis.setTimeSpan(new Date(r.valueOf()-s/2),new Date(o.getTime()+s/2)):(u=i.getCoordinateFromDate(1&a?o:r),1&a?i.timeAxis.setTimeSpan(new Date(r),new Date(r.valueOf()+s)):i.timeAxis.setTimeSpan(new Date(o.valueOf()-s),new Date(o)),c=1&a?i.getCoordinateFromDate(o):i.getCoordinateFromDate(r),i.timeAxisSubGrid.scrollable.scrollBy(c-u))}if(t=i.getElementFromTaskRecord(e)){var l=i.timeAxisSubGrid.scrollable;return l.scrollIntoView(t,Mt.assign({silent:!0},n))}return i.scrollUnrenderedTaskIntoView(e,n)}},{key:"scrollUnrenderedTaskIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$ke;null==t.edgeOffset&&(t.edgeOffset=20);var n=this,r=n.timeAxisSubGrid.scrollable,o=n.getTaskBox(e),i=r.viewport,a=o.translate(i.x-r.x,i.y-r.y),u=r.scrollIntoView(a,Object.assign({},t,{highlight:!1}));if(t.highlight||t.focus)var c=n.on({renderTask:function(n){var r=n.taskRecord,o=n.element;r===e&&(c(),u=u.then((function(){t.highlight&&xn.highlight(o),t.focus&&o.focus()})))}});else u=Promise.all([u,new Promise((function(t){var r=n.on({renderTask:function(n){n.taskRecord===e&&(r(),t())}})}))]);return u}},{key:"widgetClass",get:function(){}}])&&Bke(n.prototype,r),o&&Bke(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return Gke(this,t),qke(this,Kke(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zke(e,t)}(t,e),n=t,(r=[{key:"getState",value:function(){return Mt.copyProperties(Xke(Kke(t.prototype),"getState",this).call(this),this,Jke)}},{key:"applyState",value:function(e){Mt.copyProperties(this,e,Jke),Xke(Kke(t.prototype),"applyState",this).call(this,e)}},{key:"widgetClass",get:function(){}}])&&Uke(n.prototype,r),o&&Uke(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return eSe(this,t),nSe(this,rSe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oSe(e,t)}(t,e),n=t,(r=[{key:"onTaskStoreChange",value:function(e){var t=this;e.metaMapId=t.id,t.store=t.timeAxisViewModel.store=e,t.dependencyStore=this.project.dependencyStore,t.features.dependencies&&(t.features.dependencies.store=t.dependencyStore),t.currentOrientation.bindTaskStore(e)}},{key:"bindAssignmentStore",value:function(e,t){}},{key:"bindResourceStore",value:function(e,t){}},{key:"project",get:function(){return this._project},set:function(e){this._project=e,this.onTaskStoreChange(e.eventStore)}},{key:"tasks",set:function(e){this.taskStore.data=e}},{key:"eventStore",get:function(){return this.project.eventStore}},{key:"taskStore",get:function(){return this.eventStore}},{key:"assignmentStore",get:function(){return this.project.assignmentStore}},{key:"resourceStore",get:function(){return this.project.resourceStore}},{key:"widgetClass",get:function(){}}])&&tSe(n.prototype,r),o&&tSe(n,o),t}(e||Y)}),(function(e){return function(e){function t(){return aSe(this,t),cSe(this,sSe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lSe(e,t)}(t,e),n=t,(r=[{key:"getDisplayEndDate",value:function(e,t){return e}},{key:"widgetClass",get:function(){}}])&&uSe(n.prototype,r),o&&uSe(n,o),t}(e||Y)}),oJ,(function(e){return function(e){function t(){return dSe(this,t),hSe(this,ySe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gSe(e,t)}(t,e),n=t,o=[{key:"defaultConfig",get:function(){return{navigator:{inlineFlow:!1,prevKey:"ArrowUp",nextKey:"ArrowDown",keys:{ArrowLeft:function(){},ArrowRight:function(){},Enter:"onTaskEnterKey"}}}}}],(r=[{key:"processEvent",value:function(e){var t=xn.up(e.target,this.eventSelector);return!this.navigator.disabled&&t&&(e.taskRecord=e.eventRecord=this.resolveTaskRecord(t),"click"===e.type&&this.selectRow({record:e.taskRecord.id,column:!1,addToSelection:e.ctrlKey||e.metaKey})),e}},{key:"getNext",value:function(e){for(var t=this.taskStore,n=t.indexOf(e)+1;n<t.count;n++){var r=t.getAt(n);if(this.isInTimeAxis(r))return r}}},{key:"getPrevious",value:function(e){for(var t=this.taskStore,n=t.indexOf(e)-1;n>=0;n--){var r=t.getAt(n);if(this.isInTimeAxis(r))return r}}},{key:"navigateTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;e&&(n.navigator.disabled=!0,n.scrollTaskIntoView(e,{animate:100}).then((function(){n.navigator.disabled=!1,n.activeEvent=e,n.navigator.trigger("navigate",{event:t,item:n.getElementFromTaskRecord(e).parentNode})})))}},{key:"clearEventSelection",value:function(){this.deselectAll()}},{key:"onTaskEnterKey",value:function(){}},{key:"widgetClass",get:function(){}}])&&pSe(n.prototype,r),o&&pSe(n,o),t}(e||Y)})));function MSe(e){return(MSe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ISe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function FSe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function LSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HSe(e,t){return!t||"object"!==MSe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BSe(e,t,n){return(BSe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zSe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function zSe(e){return(zSe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VSe(e,t){return(VSe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ASe.localeClass="Gantt",ASe._$name="GanttBase",se.register("ganttbase",ASe);var WSe=function(e){function t(){return LSe(this,t),HSe(this,zSe(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VSe(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e,n){this.gantt=e,this.store=e.taskStore,BSe(zSe(t.prototype),"construct",this).call(this,e,n)}},{key:"isElementDraggable",value:function(e,t){var n=this.gantt,r=xn.up(e,n.eventSelector),o=n.features.taskResize;if(!r)return!1;if(e.matches('[class$="-handle"]'))return!1;var i=n.resolveTaskRecord(r);return!(!i||!i.isDraggable||o&&!i.isMilestone&&o.resize.overAnyHandle(t,r)||!1===n.trigger("beforeTaskDrag",{taskRecord:i}))}},{key:"triggerEventDrag",value:function(e,t){this.gantt.trigger("taskDrag",{taskRecords:e.draggedRecords,startDate:e.startDate,endDate:e.endDate,dragData:e,changed:e.startDate-t!=0})}},{key:"getProductDragContext",value:function(e){return{valid:!0}}},{key:"setupProductDragData",value:function(e){var t=this.gantt,n=e.element,r=t.resolveTaskRecord(n),o=tr.from(n),i=this.getRelatedRecords(r)||[],a=t.getDateConstraints(r),u=[n];this.setupConstraints(t.getScheduleRegion(r),o,t.timeAxisViewModel.snapPixelAmount,Boolean(a)),i.forEach((function(e){U.include(u,t.getElementFromTaskRecord(e,!1))}));var c=[r].concat(FSe(i));return{record:r,dateConstraints:a,eventBarEls:u,draggedRecords:c}}},{key:"getCoordinate",value:function(e,t,n){return n[0]}},{key:"checkDragValidity",value:function(e,t){return this.validatorFn.call(this.validatorFnThisObj||this,e.draggedRecords,e.startDate,e.duration,t)}},{key:"isValidDrop",value:function(e){return!0}},{key:"updateRecords",value:(i=regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.draggedRecords[0],r=n.startDate,o=t.startDate,i=n.setStartDate(o,!0),e.next=3,i;case 3:return n.startDate-r?this.gantt.trigger("taskDrop",{taskRecords:t.draggedRecords}):this.dragData.valid=!1,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){ISe(o,n,r,a,u,"next",e)}function u(e){ISe(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})}],o=[{key:"$name",get:function(){return"TaskDrag"}},{key:"defaultConfig",get:function(){return{validatorFn:function(e,t,n,r){return!0},validatorFnThisObj:null,tooltipCls:"b-gantt-taskdrag-tooltip"}}}],r&&NSe(n.prototype,r),o&&NSe(n,o),t}(rB);function $Se(e){return($Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YSe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function GSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function USe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qSe(e,t){return!t||"object"!==$Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XSe(e,t,n){return(XSe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KSe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function KSe(e){return(KSe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZSe(e,t){return(ZSe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}WSe._$name="TaskDrag",nC.registerFeature(WSe,!0,"Gantt");var JSe=function(e){function t(){return GSe(this,t),qSe(this,KSe(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZSe(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e,n){this.gantt=e,this.store=e.taskStore,XSe(KSe(t.prototype),"construct",this).call(this,e,n)}},{key:"finalizeDragCreate",value:(i=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.taskRecord).beginBatch(),n.setStartDate(t.startDate),n.setEndDate(t.endDate),n.endBatch(),e.next=7,this.gantt.project.propagate();case 7:this.gantt.trigger("dragCreateEnd",{taskRecord:n,event:t.event,proxyElement:this.proxy});case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){YSe(o,n,r,a,u,"next",e)}function u(e){YSe(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"handleBeforeDragCreate",value:function(e,t){var n=this,r=n.gantt.trigger("beforeDragCreate",{taskRecord:n.createContext.taskRecord,date:e,event:t});if(r){var o=n.gantt.features.scheduleTooltip;o&&o.hoverTip&&o.hoverTip.hide()}return n.dateConstraints=n.gantt.getDateConstraints(n.createContext.rowRecord,e),r}},{key:"checkValidity",value:function(e,t){return e.taskRecord=e.rowRecord,this.validatorFn.call(this.validatorFnThisObj||this,e,t)}},{key:"isRowEmpty",value:function(e){return!e.startDate||!e.endDate}}],o=[{key:"$name",get:function(){return"TaskDragCreate"}},{key:"defaultConfig",get:function(){return{preventMultiple:!0,validatorFn:function(){}}}}],r&&USe(n.prototype,r),o&&USe(n,o),t}(yz);function QSe(e){return(QSe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nOe(e,t){return!t||"object"!==QSe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rOe(e){return(rOe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oOe(e,t){return(oOe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}JSe._$name="TaskDragCreate",nC.registerFeature(JSe,!0,"Gantt");var iOe=function(e){function t(){return eOe(this,t),nOe(this,rOe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oOe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"TaskResize"}}],(r=[{key:"getTimespanRecord",value:function(e){return e.taskRecord}},{key:"getRowRecord",value:function(e){return e.taskRecord}},{key:"setupProductResizeContext",value:function(e,t){var n=this.client,r=n.resolveTaskRecord(e.element);Object.assign(e,{taskRecord:r,dateConstraints:n.getDateConstraints(r)})}},{key:"internalUpdateRecord",value:function(e,t){var n=t.run("calculateProjectedDuration",e.startDate,e.endDate);return n===t.duration?(e.element.lastDomConfig.style.width=null,!1):(t.setDuration(n),!0)}},{key:"createResizeHelper",value:function(){var e=this,t=e.client;return new _w({name:e.constructor.name,isElementResizable:function(t,n){return e.isElementResizable(t,n)},targetSelector:t.eventSelector,resizingCls:"b-sch-event-resizing",allowResize:e.isElementResizable.bind(e),outerElement:t.timeAxisSubGridElement,scrollManager:t.scrollManager,leftHandle:!1,dragThreshold:0,dynamicHandleSize:!0,reservedSpace:5,listeners:{beforeresizestart:e.onBeforeResizeStart,resizestart:e.onResizeStart,resizing:e.onResizing,resize:e.onFinishResize,cancel:e.onCancelResize,thisObj:e},highlightHandle:function(){var e=xn.up(this.currentElement,this.targetSelector),n=xn.up(this.currentElement,t.eventInnerSelector);n&&(n.classList.add("b-resize-handle"),e.classList.add("b-over-resize-handle"))},unHighlightHandle:function(){var e=xn.up(this.currentElement,this.targetSelector);e&&e.classList.remove("b-over-resize-handle");var n=xn.up(this.currentElement,t.eventInnerSelector);n&&n.classList.remove("b-resize-handle"),this.currentElement=null}})}},{key:"store",get:function(){return this.client.taskStore}}])&&tOe(n.prototype,r),o&&tOe(n,o),t}(_$);function aOe(e){return(aOe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sOe(e,t){return!t||"object"!==aOe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lOe(e){return(lOe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fOe(e,t){return(fOe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}iOe._$name="TaskResize",nC.registerFeature(iOe,!0,"Gantt");var dOe=function(e){function t(){return uOe(this,t),sOe(this,lOe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fOe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"Gantt"}}],(r=null)&&cOe(n.prototype,r),o&&cOe(n,o),t}(ASe);dOe._$name="Gantt",se.register("gantt",dOe),F.setVersion("gantt","2.1.0");function pOe(e){return(pOe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gOe(e,t){return!t||"object"!==pOe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vOe(e,t,n){return(vOe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mOe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function mOe(e){return(mOe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bOe(e,t){return(bOe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wOe=function(e){function t(){return hOe(this,t),gOe(this,mOe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bOe(e,t)}(t,e),n=t,o=[{key:"$name",get:function(){return"AssignmentEditGrid"}},{key:"defaultConfig",get:function(){return{id:"assignmenteditgrid",cls:"b-assignmenteditgrid",items:[{type:"button",cls:"b-add-button green",icon:"plus",id:"assignmenteditgrid-add"},{type:"button",cls:"b-remove-button red",icon:"trash",disabled:!0,id:"assignmenteditgrid-remove"},{type:"grid",id:"assignmenteditgrid-grid",storeConfig:{modelClass:tge},columns:[{field:"name",text:"L{Name}",flex:1,editor:{type:"combo",textField:"name",valueField:"id"}},{field:"units",text:"L{Units}",width:80}]}]}}}],(r=[{key:"afterConfigure",value:function(){vOe(mOe(t.prototype),"afterConfigure",this).call(this);var e=this,n=e.addButton=me.getById("assignmenteditgrid-add"),r=e.removeButton=me.getById("assignmenteditgrid-remove"),o=e.grid=me.getById("assignmenteditgrid-grid").grid;n&&n.on("click",e.onAddClick,e),r&&r.on("click",e.onRemoveClick,e),o.on({rowselect:function(){return r.enable()}})}}])&&yOe(n.prototype,r),o&&yOe(n,o),t}(pa);wOe._$name="AssignmentEditGrid";function kOe(e){return(kOe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SOe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function OOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function COe(e,t){return!t||"object"!==kOe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xOe(e,t,n){return(xOe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_Oe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _Oe(e){return(_Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jOe(e,t){return(jOe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var DOe=function(e){function t(){return OOe(this,t),COe(this,_Oe(t).apply(this,arguments))}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jOe(e,t)}(t,e),n=t,r=[{key:"construct",value:function(e){var n=this;if(n.startDateLabel=document.createElement("label"),n.startDateLabel.className="b-timeline-startdate",n.endDateLabel=document.createElement("label"),n.endDateLabel.className="b-timeline-enddate",xOe(_Oe(t.prototype),"construct",this).call(this,e),!n.project)throw new Error("You need to configure the Timeline with a Project");n.project instanceof mve||(n.project=new mve(n.project)),n.taskStore=n.project.taskStore,n.features.timeRanges.store=new ed,n.fillFromTaskStore(),n.fillFromTaskStore=n.buffer(n.fillFromTaskStore,100),n.taskStore.on({refresh:n.fillFromTaskStore,change:n.onTaskStoreChange,thisObj:n}),n.on({resize:n.onSizeChanged,thisObj:n}),n.bodyContainer.appendChild(n.startDateLabel),n.bodyContainer.appendChild(n.endDateLabel),Te.on({locale:"onLocaleChange",thisObj:n})}},{key:"onSizeChanged",value:function(e){var t=e.width,n=e.oldWidth;this.suspendRefresh(),this.updateRowHeight(),this.resumeRefresh(),t!==n&&this.fitTimeline()}},{key:"updateRowHeight",value:function(){this.rowHeight=this.bodyContainer.offsetHeight}},{key:"fitTimeline",value:function(){this.eventStore.count>0&&this.zoomToFit({leftMargin:50,rightMargin:50}),this.updateStartEndLabels()}},{key:"updateStartEndLabels",value:function(){var e=this;e.startDateLabel.innerHTML=e.getFormattedDate(e.startDate),e.endDateLabel.innerHTML=e.getFormattedDate(e.endDate)}},{key:"onTaskStoreChange",value:(i=regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(n=this).eventStore,e.t0=t.action,e.next="add"===e.t0?4:"remove"===e.t0?6:"removeall"===e.t0?8:"update"===e.t0?10:13;break;case 4:return t.records.forEach((function(e){e.showInTimeline&&(r.add(n.cloneTask(e)),o=!0)})),e.abrupt("break",13);case 6:return t.isCollapse||t.records.forEach((function(e){e.showInTimeline&&(r.remove(e.id),o=!0)})),e.abrupt("break",13);case 8:return n.fillFromTaskStore(),e.abrupt("break",13);case 10:return i=t.record,t.changes.showInTimeline?(i.showInTimeline?r.add(n.cloneTask(i)):r.remove(r.getById(i.id)),o=!0):i.showInTimeline&&(a=r.getById(i.id))&&(delete(u=Object.assign({},i.data)).expanded,a.set(u),o=!0),e.abrupt("break",13);case 13:o&&n.fitTimeline();case 14:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){SOe(o,n,r,a,u,"next",e)}function u(e){SOe(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"cloneTask",value:function(e){return{id:e.id,resourceId:1,startDate:e.startDate,endDate:e.endDate,duration:e.duration,durationUnit:e.durationUnit,name:e.name}}},{key:"render",value:function(){xOe(_Oe(t.prototype),"render",this).call(this),this.updateRowHeight()}},{key:"fillFromTaskStore",value:function(){var e=this,t=[];e.taskStore.traverse((function(n){n.showInTimeline&&n.isScheduled&&t.push(e.cloneTask(n))})),e.suspendRefresh(),e.events=t,e.resumeRefresh(),e.fitTimeline()}},{key:"onLocaleChange",value:function(){this.updateStartEndLabels()}}],o=[{key:"$name",get:function(){return"Timeline"}},{key:"type",get:function(){return"timeline"}},{key:"defaultConfig",get:function(){return{height:"13em",eventLayout:"pack",barMargin:1,readOnly:!0,forceFit:!0,zoomOnMouseWheel:!1,zoomOnTimeAxisDoubleClick:!1,eventColor:null,eventStyle:null,rowHeight:48,displayDateFormat:"L",features:{columnLines:!1,eventContextMenu:!1,contextMenu:!1,scheduleContextMenu:!1,timeRanges:{showCurrentTimeLine:!0}},resources:[{id:1}],columns:[]}}}],r&&EOe(n.prototype,r),o&&EOe(n,o),t}(VQ);function ROe(e){return(ROe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function POe(e){return(POe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TOe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AOe(e,t){return(AOe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DOe._$name="Timeline",se.register(DOe.type,DOe);var MOe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=function(e,t){return!t||"object"!==ROe(t)&&"function"!=typeof t?TOe(e):t}(this,POe(t).call(this));var n,r=TOe(e),o=[],i={},a=!0,u=!1,c=void 0;try{for(var s,l=r.children[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var f=s.value;if("COLUMN"===f.tagName){var d=parseInt(f.dataset.width),p=parseInt(f.dataset.flex),h={field:f.dataset.field,text:f.innerHTML,type:f.dataset.type};d?h.width=d:h.flex=p||1,o.push(h)}else if("PROJECT"===f.tagName)n=new mve({transport:{load:{url:f.dataset.loadUrl}}});else if("FEATURE"===f.tagName){var y=f.dataset.name,g=Object.assign({},f.dataset);delete g.name,Object.keys(g).length?i[y]=g:i[y]="false"!==f.textContent}}}catch(e){u=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(u)throw c}}var v=Object.assign({},r.dataset),m=v.theme||"stockholm",b=e.attachShadow({mode:"open"}),w=document.createElement("link");return delete v.theme,w.rel="stylesheet",w.href="../../build/gantt.".concat(m,".css"),w.onload=function(){var e=document.createElement("div");e.id="container",e.style.width="100%",e.style.height="100%",b.appendChild(e),vi(b),Object.assign(v,{appendTo:e,columns:o,features:i,project:n});var t=new dOe(v);n instanceof mve&&n.load(),window.gantt||(window.gantt=t)},b.appendChild(w),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AOe(e,t)}(t,window.customElements?HTMLElement:Object),t}();try{window.customElements&&window.customElements.define("bryntum-gantt",MOe)}catch(e){}MOe._$name="GanttTag",n.d(t,"Base",(function(){return Y})),n.d(t,"GlobalEvents",(function(){return di})),n.d(t,"BryntumWidgetAdapter",(function(){return Qy})),n.d(t,"BryntumWidgetAdapterRegister",(function(){return se})),n.d(t,"AjaxStore",(function(){return hd})),n.d(t,"DomDataStore",(function(){return tg})),n.d(t,"Duration",(function(){return og})),n.d(t,"Model",(function(){return qs})),n.d(t,"StateTrackingManager",(function(){return Cb})),n.d(t,"Store",(function(){return ed})),n.d(t,"Transaction",(function(){return Wg})),n.d(t,"AjaxHelper",(function(){return Ee})),n.d(t,"ArrayHelper",(function(){return U})),n.d(t,"BrowserHelper",(function(){return we})),n.d(t,"CSSHelper",(function(){return _b})),n.d(t,"DateHelper",(function(){return xt})),n.d(t,"DomClassList",(function(){return Nt})),n.d(t,"DomHelper",(function(){return xn})),n.d(t,"DomSync",(function(){return Ib})),n.d(t,"DragHelper",(function(){return fw})),n.d(t,"EventHelper",(function(){return _r})),n.d(t,"FunctionHelper",(function(){return lr})),n.d(t,"IdHelper",(function(){return ye})),n.d(t,"ObjectHelper",(function(){return Mt})),n.d(t,"ResizeHelper",(function(){return _w})),n.d(t,"ResizeMonitor",(function(){return Ar})),n.d(t,"StringHelper",(function(){return A})),n.d(t,"TemplateHelper",(function(){return Xa})),n.d(t,"VersionHelper",(function(){return F})),n.d(t,"WidgetHelper",(function(){return me})),n.d(t,"DataGenerator",(function(){return Pw})),n.d(t,"DemoBot",(function(){return Bw})),n.d(t,"Fullscreen",(function(){return Vw})),n.d(t,"Point",(function(){return cr})),n.d(t,"RandomGenerator",(function(){return Dw})),n.d(t,"Rectangle",(function(){return tr})),n.d(t,"Scroller",(function(){return Ho})),n.d(t,"LocaleManager",(function(){return Te})),n.d(t,"Localizable",(function(){return ze})),n.d(t,"Delayable",(function(){return Wr})),n.d(t,"Events",(function(){return ae})),n.d(t,"InstancePlugin",(function(){return es})),n.d(t,"Override",(function(){return Yw})),n.d(t,"Pluggable",(function(){return cs})),n.d(t,"State",(function(){return ys})),n.d(t,"Bag",(function(){return na})),n.d(t,"ClickRepeater",(function(){return bc})),n.d(t,"Collection",(function(){return Eo})),n.d(t,"CollectionFilter",(function(){return Zr})),n.d(t,"CollectionSorter",(function(){return io})),n.d(t,"Month",(function(){return Tp})),n.d(t,"Parser",(function(){return hk})),n.d(t,"Badge",(function(){return $u})),n.d(t,"BooleanCombo",(function(){return Sk})),n.d(t,"Button",(function(){return tc})),n.d(t,"ButtonGroup",(function(){return fc})),n.d(t,"CalendarPanel",(function(){return Vp})),n.d(t,"Checkbox",(function(){return Gc})),n.d(t,"ChipView",(function(){return fp})),n.d(t,"Combo",(function(){return jp})),n.d(t,"Container",(function(){return pa})),n.d(t,"DateField",(function(){return _h})),n.d(t,"DatePicker",(function(){return yh})),n.d(t,"DisplayField",(function(){return Dk})),n.d(t,"DurationField",(function(){return Bk})),n.d(t,"Editor",(function(){return uh})),n.d(t,"Field",(function(){return Ic})),n.d(t,"FileField",(function(){return Xk})),n.d(t,"FilePicker",(function(){return rS})),n.d(t,"FlagField",(function(){return fS})),n.d(t,"List",(function(){return np})),n.d(t,"Mask",(function(){return xi})),n.d(t,"Menu",(function(){return yu})),n.d(t,"MenuItem",(function(){return au})),n.d(t,"MessageDialog",(function(){return wS})),n.d(t,"NumberField",(function(){return Bh})),n.d(t,"PagingToolbar",(function(){return jS})),n.d(t,"Panel",(function(){return Ia})),n.d(t,"Popup",(function(){return Ya})),n.d(t,"Ripple",(function(){return Ji})),n.d(t,"Slider",(function(){return Xh})),n.d(t,"Splitter",(function(){return BS})),n.d(t,"TabPanel",(function(){return yy})),n.d(t,"TextAreaField",(function(){return Dy})),n.d(t,"TextField",(function(){return Cd})),n.d(t,"TimeField",(function(){return Uy})),n.d(t,"TimePicker",(function(){return Ly})),n.d(t,"Toast",(function(){return Cu})),n.d(t,"Tool",(function(){return Mi})),n.d(t,"Toolbar",(function(){return ka})),n.d(t,"Tooltip",(function(){return Fu})),n.d(t,"Widget",(function(){return ni})),n.d(t,"AggregateColumn",(function(){return fO})),n.d(t,"CheckColumn",(function(){return jO})),n.d(t,"Column",(function(){return XS})),n.d(t,"DateColumn",(function(){return FO})),n.d(t,"PercentColumn",(function(){return YO})),n.d(t,"RatingColumn",(function(){return uE})),n.d(t,"RowNumberColumn",(function(){return yE})),n.d(t,"TemplateColumn",(function(){return EE})),n.d(t,"TimeColumn",(function(){return TE})),n.d(t,"TreeColumn",(function(){return VE})),n.d(t,"WidgetColumn",(function(){return bO})),n.d(t,"ColumnStore",(function(){return rO})),n.d(t,"GridRowModel",(function(){return XE})),n.d(t,"CellTooltip",(function(){return lC})),n.d(t,"ColumnDragToolbar",(function(){return SC})),n.d(t,"ColumnPicker",(function(){return RC})),n.d(t,"ColumnReorder",(function(){return HC})),n.d(t,"ColumnResize",(function(){return UC})),n.d(t,"ContextMenu",(function(){return nx})),n.d(t,"Filter",(function(){return fx})),n.d(t,"FilterBar",(function(){return bx})),n.d(t,"GridFeatureManager",(function(){return nC})),n.d(t,"Group",(function(){return jx})),n.d(t,"GroupSummary",(function(){return Wx})),n.d(t,"QuickFind",(function(){return Jx})),n.d(t,"RegionResize",(function(){return a_})),n.d(t,"RowReorder",(function(){return g_})),n.d(t,"Search",(function(){return E_})),n.d(t,"Sort",(function(){return T_})),n.d(t,"Stripe",(function(){return B_})),n.d(t,"Summary",(function(){return dj})),n.d(t,"Tree",(function(){return Oj})),n.d(t,"GridExportDialog",(function(){return dD})),n.d(t,"GridMultiPageExporter",(function(){return HD})),n.d(t,"GridPdfExport",(function(){return uR})),n.d(t,"GridSinglePageExporter",(function(){return QD})),n.d(t,"PaperFormat",(function(){return Cj})),n.d(t,"Orientation",(function(){return xj})),n.d(t,"RowsRange",(function(){return Ej})),n.d(t,"FileFormat",(function(){return _j})),n.d(t,"GridExcelExporter",(function(){return ER})),n.d(t,"ScrollManager",(function(){return PR})),n.d(t,"Bar",(function(){return U_})),n.d(t,"Grid",(function(){return TA})),n.d(t,"Header",(function(){return mP})),n.d(t,"RowManager",(function(){return qR})),n.d(t,"SubGrid",(function(){return VT})),n.d(t,"TreeGrid",(function(){return VA})),n.d(t,"AjaxTransport",(function(){return XA})),n.d(t,"AbstractCrudManager",(function(){return bM})),n.d(t,"CrudManagerView",(function(){return xM})),n.d(t,"EventStore",(function(){return eL})),n.d(t,"TimeAxis",(function(){return FL})),n.d(t,"SchedulerAssignmentStore",(function(){return UL})),n.d(t,"SchedulerCalendar",(function(){return cN})),n.d(t,"SchedulerCrudManager",(function(){return yH})),n.d(t,"SchedulerDependencyStore",(function(){return uH})),n.d(t,"SchedulerResourceStore",(function(){return FN})),n.d(t,"ColumnLines",(function(){return OH})),n.d(t,"EventContextMenu",(function(){return NH})),n.d(t,"EventDrag",(function(){return uz})),n.d(t,"EventDragCreate",(function(){return Oz})),n.d(t,"EventEdit",(function(){return c$})),n.d(t,"EventFilter",(function(){return v$})),n.d(t,"EventResize",(function(){return I$})),n.d(t,"EventTooltip",(function(){return Z$})),n.d(t,"HeaderContextMenu",(function(){return aY})),n.d(t,"HeaderZoom",(function(){return pY})),n.d(t,"NonWorkingTime",(function(){return DY})),n.d(t,"Pan",(function(){return LY})),n.d(t,"ResourceTimeRanges",(function(){return aG})),n.d(t,"SimpleEventEdit",(function(){return yG})),n.d(t,"TimeRanges",(function(){return CG})),n.d(t,"SchedulerDependencies",(function(){return nU})),n.d(t,"SchedulerExportDialog",(function(){return nq})),n.d(t,"SchedulerMultiPageExporter",(function(){return Oq})),n.d(t,"SchedulerPdfExport",(function(){return Hq})),n.d(t,"SchedulerSinglePageExporter",(function(){return Pq})),n.d(t,"ScheduleRange",(function(){return rU})),n.d(t,"ExcelExporter",(function(){return o0})),n.d(t,"ResourceInfoColumn",(function(){return d0})),n.d(t,"TimeAxisColumn",(function(){return qU})),n.d(t,"DependencyBaseModel",(function(){return YN})),n.d(t,"EventModel",(function(){return GF})),n.d(t,"TimeSpan",(function(){return bF})),n.d(t,"SchedulerAssignmentModel",(function(){return BM})),n.d(t,"SchedulerCalendarDayModel",(function(){return eN})),n.d(t,"SchedulerDependencyModel",(function(){return JN})),n.d(t,"SchedulerResourceModel",(function(){return jN})),n.d(t,"PresetManager",(function(){return xL})),n.d(t,"PresetStore",(function(){return mL})),n.d(t,"ViewPreset",(function(){return cL})),n.d(t,"RectangularPathFinder",(function(){return WG})),n.d(t,"TableExporter",(function(){return ZQ})),n.d(t,"HorizontalTimeAxis",(function(){return TU})),n.d(t,"Scheduler",(function(){return VQ})),n.d(t,"TimeAxisViewModel",(function(){return tX})),n.d(t,"EndDateField",(function(){return w0})),n.d(t,"GanttTaskEditor",(function(){return p4})),n.d(t,"ProAssignmentAPI",(function(){return w4})),n.d(t,"ProCalendarIntervalModel",(function(){return k4})),n.d(t,"ProCalendarModel",(function(){return T7})),n.d(t,"ProCrudManager",(function(){return z7})),n.d(t,"ProDataAPI",(function(){return Cee})),n.d(t,"ProDependencies",(function(){return Tee})),n.d(t,"ProDependencyAPI",(function(){return iee})),n.d(t,"ProDependencyModel",(function(){return ete})),n.d(t,"ProEventAPI",(function(){return Z7})),n.d(t,"ProEventDrag",(function(){return cte})),n.d(t,"ProEventDragCreate",(function(){return gte})),n.d(t,"ProNonWorkingTime",(function(){return Ete})),n.d(t,"ProProjectAPI",(function(){return mee})),n.d(t,"ProProjectModel",(function(){return Oce})),n.d(t,"ProResourceAPI",(function(){return fee})),n.d(t,"ProScheduler",(function(){return yse})),n.d(t,"ProSchedulerStores",(function(){return Pce})),n.d(t,"ProSubProjectModel",(function(){return Ose})),n.d(t,"ProTaskEdit",(function(){return rse})),n.d(t,"ProTaskEditStm",(function(){return Hce})),n.d(t,"ProTaskModel",(function(){return Vre})),n.d(t,"ProTaskSegmentModel",(function(){return Dse})),n.d(t,"SchedulerGeneralTab",(function(){return t2})),n.d(t,"SchedulerProCommon",(function(){return p2})),n.d(t,"SchedulerTaskEditor",(function(){return Gce})),n.d(t,"StartDateField",(function(){return d1})),n.d(t,"ProAssignmentModel",(function(){return Jae})),n.d(t,"ProAssignmentStore",(function(){return yue})),n.d(t,"ProCalendarManagerStore",(function(){return Tue})),n.d(t,"ProDependencyStore",(function(){return Xie})),n.d(t,"ProResourceModel",(function(){return gae})),n.d(t,"ProResourceStore",(function(){return Aae})),n.d(t,"ProTaskStore",(function(){return yie})),n.d(t,"SchedulerProAdvancedTab",(function(){return $3})),n.d(t,"SchedulerProCalendarField",(function(){return U1})),n.d(t,"SchedulerProConstraintTypePicker",(function(){return x3})),n.d(t,"SchedulerProDependencyTab",(function(){return Y2})),n.d(t,"SchedulerProDependencyTypePicker",(function(){return E2})),n.d(t,"SchedulerProDurationColumn",(function(){return P2})),n.d(t,"SchedulerProEffortField",(function(){return b1})),n.d(t,"SchedulerProEventChangePropagator",(function(){return z0})),n.d(t,"SchedulerProEventLoader",(function(){return M0})),n.d(t,"SchedulerProFormTab",(function(){return o1})),n.d(t,"SchedulerProGeneralTab",(function(){return _1})),n.d(t,"SchedulerProModelCombo",(function(){return L1})),n.d(t,"SchedulerProNotesTab",(function(){return Z3})),n.d(t,"SchedulerProPartOfProject",(function(){return D4})),n.d(t,"SchedulerProPredecessorsTab",(function(){return i3})),n.d(t,"SchedulerProReadyStatePropagator",(function(){return _0})),n.d(t,"SchedulerProResourcesTab",(function(){return y3})),n.d(t,"SchedulerProSchedulingModePicker",(function(){return F3})),n.d(t,"SchedulerProSuccessorsTab",(function(){return J2})),n.d(t,"SchedulerProTaskEditorBase",(function(){return a4})),n.d(t,"SchedulerProTaskEditorTab",(function(){return K0})),n.d(t,"AddNewColumn",(function(){return Lse})),n.d(t,"AllColumns",(function(){return hye})),n.d(t,"CalendarColumn",(function(){return nle})),n.d(t,"ConstraintDateColumn",(function(){return vle})),n.d(t,"ConstraintTypeColumn",(function(){return Cle})),n.d(t,"DeadlineDateColumn",(function(){return Tle})),n.d(t,"DependencyColumn",(function(){return Zde})),n.d(t,"DurationColumn",(function(){return Nle})),n.d(t,"EarlyEndDateColumn",(function(){return Yle})),n.d(t,"EarlyStartDateColumn",(function(){return Jle})),n.d(t,"EffortColumn",(function(){return ife})),n.d(t,"EndDateColumn",(function(){return _fe})),n.d(t,"EventModeColumn",(function(){return Oye})),n.d(t,"GanttDateColumn",(function(){return lle})),n.d(t,"LateEndDateColumn",(function(){return Mfe})),n.d(t,"LateStartDateColumn",(function(){return zfe})),n.d(t,"ManuallyScheduledColumn",(function(){return qfe})),n.d(t,"MilestoneColumn",(function(){return tde})),n.d(t,"NameColumn",(function(){return cde})),n.d(t,"NoteColumn",(function(){return yde})),n.d(t,"PercentDoneColumn",(function(){return Ode})),n.d(t,"PredecessorColumn",(function(){return ope})),n.d(t,"ResourceAssignmentColumn",(function(){return Ohe})),n.d(t,"RollupColumn",(function(){return dfe})),n.d(t,"SchedulingModeColumn",(function(){return Phe})),n.d(t,"SequenceColumn",(function(){return Nhe})),n.d(t,"ShowInTimelineColumn",(function(){return bfe})),n.d(t,"StartDateColumn",(function(){return Ghe})),n.d(t,"SuccessorColumn",(function(){return Qhe})),n.d(t,"TotalSlackColumn",(function(){return aye})),n.d(t,"WBSColumn",(function(){return pye})),n.d(t,"AssignmentsManipulationStore",(function(){return Vpe})),n.d(t,"AssignmentStore",(function(){return Fye})),n.d(t,"DependencyStore",(function(){return Xye})),n.d(t,"ResourceStore",(function(){return cge})),n.d(t,"TaskStore",(function(){return _ve})),n.d(t,"MinimalGanttProject",(function(){return cve})),n.d(t,"CrudManager",(function(){return Vge})),n.d(t,"Baselines",(function(){return Ive})),n.d(t,"CellEdit",(function(){return Wve})),n.d(t,"CriticalPaths",(function(){return Zve})),n.d(t,"Dependencies",(function(){return cme})),n.d(t,"DependencyEdit",(function(){return Tme})),n.d(t,"Labels",(function(){return Jme})),n.d(t,"Indicators",(function(){return ube})),n.d(t,"PercentBar",(function(){return ybe})),n.d(t,"ProgressLine",(function(){return Ebe})),n.d(t,"ProjectLines",(function(){return Abe})),n.d(t,"Rollups",(function(){return Vbe})),n.d(t,"TaskContextMenu",(function(){return Kbe})),n.d(t,"TaskEdit",(function(){return lwe})),n.d(t,"TaskEditStm",(function(){return Hce})),n.d(t,"TaskTooltip",(function(){return vwe})),n.d(t,"MultiPageExporter",(function(){return Twe})),n.d(t,"PdfExport",(function(){return Gwe})),n.d(t,"SinglePageExporter",(function(){return Nwe})),n.d(t,"AssignmentModel",(function(){return Dye})),n.d(t,"AssignmentsManipulationModel",(function(){return fpe})),n.d(t,"Baseline",(function(){return vge})),n.d(t,"CalendarModel",(function(){return Mge})),n.d(t,"DependencyModel",(function(){return Vye})),n.d(t,"ProjectModel",(function(){return mve})),n.d(t,"ResourceModel",(function(){return tge})),n.d(t,"SubProjectModel",(function(){return Jwe})),n.d(t,"TaskModel",(function(){return jge})),n.d(t,"TaskSegmentModel",(function(){return oke})),n.d(t,"ProjectGenerator",(function(){return fke})),n.d(t,"ResourceAssignmentParser",(function(){return Tpe})),n.d(t,"Gantt",(function(){return dOe})),n.d(t,"GanttBase",(function(){return ASe})),n.d(t,"AdvancedTab",(function(){return $3})),n.d(t,"AssignmentEditGrid",(function(){return wOe})),n.d(t,"AssignmentField",(function(){return yhe})),n.d(t,"AssignmentGrid",(function(){return Jpe})),n.d(t,"AssignmentPicker",(function(){return uhe})),n.d(t,"ConstraintTypePicker",(function(){return x3})),n.d(t,"DependencyField",(function(){return Nde})),n.d(t,"DependencyTab",(function(){return Y2})),n.d(t,"DependencyTypePicker",(function(){return E2})),n.d(t,"EffortField",(function(){return b1})),n.d(t,"EventChangePropagator",(function(){return z0})),n.d(t,"EventLoader",(function(){return M0})),n.d(t,"FormTab",(function(){return o1})),n.d(t,"GeneralTab",(function(){return _1})),n.d(t,"NotesTab",(function(){return Z3})),n.d(t,"PredecessorsTab",(function(){return i3})),n.d(t,"ResourcesTab",(function(){return y3})),n.d(t,"SchedulingModePicker",(function(){return F3})),n.d(t,"SuccessorsTab",(function(){return J2})),n.d(t,"TaskEditor",(function(){return rwe})),n.d(t,"Timeline",(function(){return DOe})),n.d(t,"EffectResolutionResult",(function(){return N4})),n.d(t,"ConstraintType",(function(){return r2})),n.d(t,"SchedulingMode",(function(){return o2})),n.d(t,"TimeUnit",(function(){return n2})),n.d(t,"ProjectType",(function(){return u2})),n.d(t,"GanttTag",(function(){return MOe}));window.bryntum||(window.bryntum={})}])}));
//# sourceMappingURL=gantt.umd.min.js.map